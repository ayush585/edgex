function _mergeNamespaces(n,e){for(var t=0;t<e.length;t++){const Te=e[t];if(typeof Te!="string"&&!Array.isArray(Te)){for(const Ee in Te)if(Ee!=="default"&&!(Ee in n)){const Re=Object.getOwnPropertyDescriptor(Te,Ee);Re&&Object.defineProperty(n,Ee,Re.get?Re:{enumerable:!0,get:()=>Te[Ee]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Ee of document.querySelectorAll('link[rel="modulepreload"]'))Te(Ee);new MutationObserver(Ee=>{for(const Re of Ee)if(Re.type==="childList")for(const Ce of Re.addedNodes)Ce.tagName==="LINK"&&Ce.rel==="modulepreload"&&Te(Ce)}).observe(document,{childList:!0,subtree:!0});function t(Ee){const Re={};return Ee.integrity&&(Re.integrity=Ee.integrity),Ee.referrerPolicy&&(Re.referrerPolicy=Ee.referrerPolicy),Ee.crossOrigin==="use-credentials"?Re.credentials="include":Ee.crossOrigin==="anonymous"?Re.credentials="omit":Re.credentials="same-origin",Re}function Te(Ee){if(Ee.ep)return;Ee.ep=!0;const Re=t(Ee);fetch(Ee.href,Re)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function Te(){var Ee=!1;try{Ee=this instanceof Te}catch{}return Ee?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(Te){var Ee=Object.getOwnPropertyDescriptor(n,Te);Object.defineProperty(t,Te,Ee.get?Ee:{enumerable:!0,get:function(){return n[Te]}})}),t}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),Ve=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),Me=Symbol.iterator;function Oe(Un){return Un===null||typeof Un!="object"?null:(Un=Me&&Un[Me]||Un["@@iterator"],typeof Un=="function"?Un:null)}var Ue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ze=Object.assign,He={};function Ge(Un,Cn,kn){this.props=Un,this.context=Cn,this.refs=He,this.updater=kn||Ue}Ge.prototype.isReactComponent={},Ge.prototype.setState=function(Un,Cn){if(typeof Un!="object"&&typeof Un!="function"&&Un!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Un,Cn,"setState")},Ge.prototype.forceUpdate=function(Un){this.updater.enqueueForceUpdate(this,Un,"forceUpdate")};function Ke(){}Ke.prototype=Ge.prototype;function Xe(Un,Cn,kn){this.props=Un,this.context=Cn,this.refs=He,this.updater=kn||Ue}var Je=Xe.prototype=new Ke;Je.constructor=Xe,ze(Je,Ge.prototype),Je.isPureReactComponent=!0;var un=Array.isArray,fn=Object.prototype.hasOwnProperty,yn={current:null},gn={key:!0,ref:!0,__self:!0,__source:!0};function mn(Un,Cn,kn){var Yn,Jn={},sr=null,lr=null;if(Cn!=null)for(Yn in Cn.ref!==void 0&&(lr=Cn.ref),Cn.key!==void 0&&(sr=""+Cn.key),Cn)fn.call(Cn,Yn)&&!gn.hasOwnProperty(Yn)&&(Jn[Yn]=Cn[Yn]);var mr=arguments.length-2;if(mr===1)Jn.children=kn;else if(1<mr){for(var gr=Array(mr),Er=0;Er<mr;Er++)gr[Er]=arguments[Er+2];Jn.children=gr}if(Un&&Un.defaultProps)for(Yn in mr=Un.defaultProps,mr)Jn[Yn]===void 0&&(Jn[Yn]=mr[Yn]);return{$$typeof:n,type:Un,key:sr,ref:lr,props:Jn,_owner:yn.current}}function dn(Un,Cn){return{$$typeof:n,type:Un.type,key:Cn,ref:Un.ref,props:Un.props,_owner:Un._owner}}function vn(Un){return typeof Un=="object"&&Un!==null&&Un.$$typeof===n}function bn(Un){var Cn={"=":"=0",":":"=2"};return"$"+Un.replace(/[=:]/g,function(kn){return Cn[kn]})}var Tn=/\/+/g;function En(Un,Cn){return typeof Un=="object"&&Un!==null&&Un.key!=null?bn(""+Un.key):Cn.toString(36)}function In(Un,Cn,kn,Yn,Jn){var sr=typeof Un;(sr==="undefined"||sr==="boolean")&&(Un=null);var lr=!1;if(Un===null)lr=!0;else switch(sr){case"string":case"number":lr=!0;break;case"object":switch(Un.$$typeof){case n:case e:lr=!0}}if(lr)return lr=Un,Jn=Jn(lr),Un=Yn===""?"."+En(lr,0):Yn,un(Jn)?(kn="",Un!=null&&(kn=Un.replace(Tn,"$&/")+"/"),In(Jn,Cn,kn,"",function(Er){return Er})):Jn!=null&&(vn(Jn)&&(Jn=dn(Jn,kn+(!Jn.key||lr&&lr.key===Jn.key?"":(""+Jn.key).replace(Tn,"$&/")+"/")+Un)),Cn.push(Jn)),1;if(lr=0,Yn=Yn===""?".":Yn+":",un(Un))for(var mr=0;mr<Un.length;mr++){sr=Un[mr];var gr=Yn+En(sr,mr);lr+=In(sr,Cn,kn,gr,Jn)}else if(gr=Oe(Un),typeof gr=="function")for(Un=gr.call(Un),mr=0;!(sr=Un.next()).done;)sr=sr.value,gr=Yn+En(sr,mr++),lr+=In(sr,Cn,kn,gr,Jn);else if(sr==="object")throw Cn=String(Un),Error("Objects are not valid as a React child (found: "+(Cn==="[object Object]"?"object with keys {"+Object.keys(Un).join(", ")+"}":Cn)+"). If you meant to render a collection of children, use an array instead.");return lr}function Nn(Un,Cn,kn){if(Un==null)return Un;var Yn=[],Jn=0;return In(Un,Yn,"","",function(sr){return Cn.call(kn,sr,Jn++)}),Yn}function On(Un){if(Un._status===-1){var Cn=Un._result;Cn=Cn(),Cn.then(function(kn){(Un._status===0||Un._status===-1)&&(Un._status=1,Un._result=kn)},function(kn){(Un._status===0||Un._status===-1)&&(Un._status=2,Un._result=kn)}),Un._status===-1&&(Un._status=0,Un._result=Cn)}if(Un._status===1)return Un._result.default;throw Un._result}var Fn={current:null},$n={transition:null},Hn={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:$n,ReactCurrentOwner:yn};function Dn(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Nn,forEach:function(Un,Cn,kn){Nn(Un,function(){Cn.apply(this,arguments)},kn)},count:function(Un){var Cn=0;return Nn(Un,function(){Cn++}),Cn},toArray:function(Un){return Nn(Un,function(Cn){return Cn})||[]},only:function(Un){if(!vn(Un))throw Error("React.Children.only expected to receive a single React element child.");return Un}},react_production_min.Component=Ge,react_production_min.Fragment=t,react_production_min.Profiler=Ee,react_production_min.PureComponent=Xe,react_production_min.StrictMode=Te,react_production_min.Suspense=$e,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hn,react_production_min.act=Dn,react_production_min.cloneElement=function(Un,Cn,kn){if(Un==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Un+".");var Yn=ze({},Un.props),Jn=Un.key,sr=Un.ref,lr=Un._owner;if(Cn!=null){if(Cn.ref!==void 0&&(sr=Cn.ref,lr=yn.current),Cn.key!==void 0&&(Jn=""+Cn.key),Un.type&&Un.type.defaultProps)var mr=Un.type.defaultProps;for(gr in Cn)fn.call(Cn,gr)&&!gn.hasOwnProperty(gr)&&(Yn[gr]=Cn[gr]===void 0&&mr!==void 0?mr[gr]:Cn[gr])}var gr=arguments.length-2;if(gr===1)Yn.children=kn;else if(1<gr){mr=Array(gr);for(var Er=0;Er<gr;Er++)mr[Er]=arguments[Er+2];Yn.children=mr}return{$$typeof:n,type:Un.type,key:Jn,ref:sr,props:Yn,_owner:lr}},react_production_min.createContext=function(Un){return Un={$$typeof:Ce,_currentValue:Un,_currentValue2:Un,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Un.Provider={$$typeof:Re,_context:Un},Un.Consumer=Un},react_production_min.createElement=mn,react_production_min.createFactory=function(Un){var Cn=mn.bind(null,Un);return Cn.type=Un,Cn},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Un){return{$$typeof:De,render:Un}},react_production_min.isValidElement=vn,react_production_min.lazy=function(Un){return{$$typeof:Be,_payload:{_status:-1,_result:Un},_init:On}},react_production_min.memo=function(Un,Cn){return{$$typeof:Ve,type:Un,compare:Cn===void 0?null:Cn}},react_production_min.startTransition=function(Un){var Cn=$n.transition;$n.transition={};try{Un()}finally{$n.transition=Cn}},react_production_min.unstable_act=Dn,react_production_min.useCallback=function(Un,Cn){return Fn.current.useCallback(Un,Cn)},react_production_min.useContext=function(Un){return Fn.current.useContext(Un)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Un){return Fn.current.useDeferredValue(Un)},react_production_min.useEffect=function(Un,Cn){return Fn.current.useEffect(Un,Cn)},react_production_min.useId=function(){return Fn.current.useId()},react_production_min.useImperativeHandle=function(Un,Cn,kn){return Fn.current.useImperativeHandle(Un,Cn,kn)},react_production_min.useInsertionEffect=function(Un,Cn){return Fn.current.useInsertionEffect(Un,Cn)},react_production_min.useLayoutEffect=function(Un,Cn){return Fn.current.useLayoutEffect(Un,Cn)},react_production_min.useMemo=function(Un,Cn){return Fn.current.useMemo(Un,Cn)},react_production_min.useReducer=function(Un,Cn,kn){return Fn.current.useReducer(Un,Cn,kn)},react_production_min.useRef=function(Un){return Fn.current.useRef(Un)},react_production_min.useState=function(Un){return Fn.current.useState(Un)},react_production_min.useSyncExternalStore=function(Un,Cn,kn){return Fn.current.useSyncExternalStore(Un,Cn,kn)},react_production_min.useTransition=function(){return Fn.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var n=requireReact(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),Te=Object.prototype.hasOwnProperty,Ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Re={key:!0,ref:!0,__self:!0,__source:!0};function Ce(De,$e,Ve){var Be,Me={},Oe=null,Ue=null;Ve!==void 0&&(Oe=""+Ve),$e.key!==void 0&&(Oe=""+$e.key),$e.ref!==void 0&&(Ue=$e.ref);for(Be in $e)Te.call($e,Be)&&!Re.hasOwnProperty(Be)&&(Me[Be]=$e[Be]);if(De&&De.defaultProps)for(Be in $e=De.defaultProps,$e)Me[Be]===void 0&&(Me[Be]=$e[Be]);return{$$typeof:e,type:De,key:Oe,ref:Ue,props:Me,_owner:Ee.current}}return reactJsxRuntime_production_min.Fragment=t,reactJsxRuntime_production_min.jsx=Ce,reactJsxRuntime_production_min.jsxs=Ce,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(n){function e($n,Hn){var Dn=$n.length;$n.push(Hn);e:for(;0<Dn;){var Un=Dn-1>>>1,Cn=$n[Un];if(0<Ee(Cn,Hn))$n[Un]=Hn,$n[Dn]=Cn,Dn=Un;else break e}}function t($n){return $n.length===0?null:$n[0]}function Te($n){if($n.length===0)return null;var Hn=$n[0],Dn=$n.pop();if(Dn!==Hn){$n[0]=Dn;e:for(var Un=0,Cn=$n.length,kn=Cn>>>1;Un<kn;){var Yn=2*(Un+1)-1,Jn=$n[Yn],sr=Yn+1,lr=$n[sr];if(0>Ee(Jn,Dn))sr<Cn&&0>Ee(lr,Jn)?($n[Un]=lr,$n[sr]=Dn,Un=sr):($n[Un]=Jn,$n[Yn]=Dn,Un=Yn);else if(sr<Cn&&0>Ee(lr,Dn))$n[Un]=lr,$n[sr]=Dn,Un=sr;else break e}}return Hn}function Ee($n,Hn){var Dn=$n.sortIndex-Hn.sortIndex;return Dn!==0?Dn:$n.id-Hn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Re=performance;n.unstable_now=function(){return Re.now()}}else{var Ce=Date,De=Ce.now();n.unstable_now=function(){return Ce.now()-De}}var $e=[],Ve=[],Be=1,Me=null,Oe=3,Ue=!1,ze=!1,He=!1,Ge=typeof setTimeout=="function"?setTimeout:null,Ke=typeof clearTimeout=="function"?clearTimeout:null,Xe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Je($n){for(var Hn=t(Ve);Hn!==null;){if(Hn.callback===null)Te(Ve);else if(Hn.startTime<=$n)Te(Ve),Hn.sortIndex=Hn.expirationTime,e($e,Hn);else break;Hn=t(Ve)}}function un($n){if(He=!1,Je($n),!ze)if(t($e)!==null)ze=!0,On(fn);else{var Hn=t(Ve);Hn!==null&&Fn(un,Hn.startTime-$n)}}function fn($n,Hn){ze=!1,He&&(He=!1,Ke(mn),mn=-1),Ue=!0;var Dn=Oe;try{for(Je(Hn),Me=t($e);Me!==null&&(!(Me.expirationTime>Hn)||$n&&!bn());){var Un=Me.callback;if(typeof Un=="function"){Me.callback=null,Oe=Me.priorityLevel;var Cn=Un(Me.expirationTime<=Hn);Hn=n.unstable_now(),typeof Cn=="function"?Me.callback=Cn:Me===t($e)&&Te($e),Je(Hn)}else Te($e);Me=t($e)}if(Me!==null)var kn=!0;else{var Yn=t(Ve);Yn!==null&&Fn(un,Yn.startTime-Hn),kn=!1}return kn}finally{Me=null,Oe=Dn,Ue=!1}}var yn=!1,gn=null,mn=-1,dn=5,vn=-1;function bn(){return!(n.unstable_now()-vn<dn)}function Tn(){if(gn!==null){var $n=n.unstable_now();vn=$n;var Hn=!0;try{Hn=gn(!0,$n)}finally{Hn?En():(yn=!1,gn=null)}}else yn=!1}var En;if(typeof Xe=="function")En=function(){Xe(Tn)};else if(typeof MessageChannel<"u"){var In=new MessageChannel,Nn=In.port2;In.port1.onmessage=Tn,En=function(){Nn.postMessage(null)}}else En=function(){Ge(Tn,0)};function On($n){gn=$n,yn||(yn=!0,En())}function Fn($n,Hn){mn=Ge(function(){$n(n.unstable_now())},Hn)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($n){$n.callback=null},n.unstable_continueExecution=function(){ze||Ue||(ze=!0,On(fn))},n.unstable_forceFrameRate=function($n){0>$n||125<$n?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dn=0<$n?Math.floor(1e3/$n):5},n.unstable_getCurrentPriorityLevel=function(){return Oe},n.unstable_getFirstCallbackNode=function(){return t($e)},n.unstable_next=function($n){switch(Oe){case 1:case 2:case 3:var Hn=3;break;default:Hn=Oe}var Dn=Oe;Oe=Hn;try{return $n()}finally{Oe=Dn}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($n,Hn){switch($n){case 1:case 2:case 3:case 4:case 5:break;default:$n=3}var Dn=Oe;Oe=$n;try{return Hn()}finally{Oe=Dn}},n.unstable_scheduleCallback=function($n,Hn,Dn){var Un=n.unstable_now();switch(typeof Dn=="object"&&Dn!==null?(Dn=Dn.delay,Dn=typeof Dn=="number"&&0<Dn?Un+Dn:Un):Dn=Un,$n){case 1:var Cn=-1;break;case 2:Cn=250;break;case 5:Cn=1073741823;break;case 4:Cn=1e4;break;default:Cn=5e3}return Cn=Dn+Cn,$n={id:Be++,callback:Hn,priorityLevel:$n,startTime:Dn,expirationTime:Cn,sortIndex:-1},Dn>Un?($n.sortIndex=Dn,e(Ve,$n),t($e)===null&&$n===t(Ve)&&(He?(Ke(mn),mn=-1):He=!0,Fn(un,Dn-Un))):($n.sortIndex=Cn,e($e,$n),ze||Ue||(ze=!0,On(fn))),$n},n.unstable_shouldYield=bn,n.unstable_wrapCallback=function($n){var Hn=Oe;return function(){var Dn=Oe;Oe=Hn;try{return $n.apply(this,arguments)}finally{Oe=Dn}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var n=requireReact(),e=requireScheduler();function t(qe){for(var We="https://reactjs.org/docs/error-decoder.html?invariant="+qe,Ye=1;Ye<arguments.length;Ye++)We+="&args[]="+encodeURIComponent(arguments[Ye]);return"Minified React error #"+qe+"; visit "+We+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Te=new Set,Ee={};function Re(qe,We){Ce(qe,We),Ce(qe+"Capture",We)}function Ce(qe,We){for(Ee[qe]=We,qe=0;qe<We.length;qe++)Te.add(We[qe])}var De=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$e=Object.prototype.hasOwnProperty,Ve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Be={},Me={};function Oe(qe){return $e.call(Me,qe)?!0:$e.call(Be,qe)?!1:Ve.test(qe)?Me[qe]=!0:(Be[qe]=!0,!1)}function Ue(qe,We,Ye,hn){if(Ye!==null&&Ye.type===0)return!1;switch(typeof We){case"function":case"symbol":return!0;case"boolean":return hn?!1:Ye!==null?!Ye.acceptsBooleans:(qe=qe.toLowerCase().slice(0,5),qe!=="data-"&&qe!=="aria-");default:return!1}}function ze(qe,We,Ye,hn){if(We===null||typeof We>"u"||Ue(qe,We,Ye,hn))return!0;if(hn)return!1;if(Ye!==null)switch(Ye.type){case 3:return!We;case 4:return We===!1;case 5:return isNaN(We);case 6:return isNaN(We)||1>We}return!1}function He(qe,We,Ye,hn,wn,Pn,Bn){this.acceptsBooleans=We===2||We===3||We===4,this.attributeName=hn,this.attributeNamespace=wn,this.mustUseProperty=Ye,this.propertyName=qe,this.type=We,this.sanitizeURL=Pn,this.removeEmptyString=Bn}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(qe){Ge[qe]=new He(qe,0,!1,qe,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(qe){var We=qe[0];Ge[We]=new He(We,1,!1,qe[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(qe){Ge[qe]=new He(qe,2,!1,qe.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(qe){Ge[qe]=new He(qe,2,!1,qe,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(qe){Ge[qe]=new He(qe,3,!1,qe.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(qe){Ge[qe]=new He(qe,3,!0,qe,null,!1,!1)}),["capture","download"].forEach(function(qe){Ge[qe]=new He(qe,4,!1,qe,null,!1,!1)}),["cols","rows","size","span"].forEach(function(qe){Ge[qe]=new He(qe,6,!1,qe,null,!1,!1)}),["rowSpan","start"].forEach(function(qe){Ge[qe]=new He(qe,5,!1,qe.toLowerCase(),null,!1,!1)});var Ke=/[\-:]([a-z])/g;function Xe(qe){return qe[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(qe){var We=qe.replace(Ke,Xe);Ge[We]=new He(We,1,!1,qe,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(qe){var We=qe.replace(Ke,Xe);Ge[We]=new He(We,1,!1,qe,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(qe){var We=qe.replace(Ke,Xe);Ge[We]=new He(We,1,!1,qe,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(qe){Ge[qe]=new He(qe,1,!1,qe.toLowerCase(),null,!1,!1)}),Ge.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(qe){Ge[qe]=new He(qe,1,!1,qe.toLowerCase(),null,!0,!0)});function Je(qe,We,Ye,hn){var wn=Ge.hasOwnProperty(We)?Ge[We]:null;(wn!==null?wn.type!==0:hn||!(2<We.length)||We[0]!=="o"&&We[0]!=="O"||We[1]!=="n"&&We[1]!=="N")&&(ze(We,Ye,wn,hn)&&(Ye=null),hn||wn===null?Oe(We)&&(Ye===null?qe.removeAttribute(We):qe.setAttribute(We,""+Ye)):wn.mustUseProperty?qe[wn.propertyName]=Ye===null?wn.type===3?!1:"":Ye:(We=wn.attributeName,hn=wn.attributeNamespace,Ye===null?qe.removeAttribute(We):(wn=wn.type,Ye=wn===3||wn===4&&Ye===!0?"":""+Ye,hn?qe.setAttributeNS(hn,We,Ye):qe.setAttribute(We,Ye))))}var un=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fn=Symbol.for("react.element"),yn=Symbol.for("react.portal"),gn=Symbol.for("react.fragment"),mn=Symbol.for("react.strict_mode"),dn=Symbol.for("react.profiler"),vn=Symbol.for("react.provider"),bn=Symbol.for("react.context"),Tn=Symbol.for("react.forward_ref"),En=Symbol.for("react.suspense"),In=Symbol.for("react.suspense_list"),Nn=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),Fn=Symbol.for("react.offscreen"),$n=Symbol.iterator;function Hn(qe){return qe===null||typeof qe!="object"?null:(qe=$n&&qe[$n]||qe["@@iterator"],typeof qe=="function"?qe:null)}var Dn=Object.assign,Un;function Cn(qe){if(Un===void 0)try{throw Error()}catch(Ye){var We=Ye.stack.trim().match(/\n( *(at )?)/);Un=We&&We[1]||""}return`
`+Un+qe}var kn=!1;function Yn(qe,We){if(!qe||kn)return"";kn=!0;var Ye=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(We)if(We=function(){throw Error()},Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Mr){var hn=Mr}Reflect.construct(qe,[],We)}else{try{We.call()}catch(Mr){hn=Mr}qe.call(We.prototype)}else{try{throw Error()}catch(Mr){hn=Mr}qe()}}catch(Mr){if(Mr&&hn&&typeof Mr.stack=="string"){for(var wn=Mr.stack.split(`
`),Pn=hn.stack.split(`
`),Bn=wn.length-1,or=Pn.length-1;1<=Bn&&0<=or&&wn[Bn]!==Pn[or];)or--;for(;1<=Bn&&0<=or;Bn--,or--)if(wn[Bn]!==Pn[or]){if(Bn!==1||or!==1)do if(Bn--,or--,0>or||wn[Bn]!==Pn[or]){var hr=`
`+wn[Bn].replace(" at new "," at ");return qe.displayName&&hr.includes("<anonymous>")&&(hr=hr.replace("<anonymous>",qe.displayName)),hr}while(1<=Bn&&0<=or);break}}}finally{kn=!1,Error.prepareStackTrace=Ye}return(qe=qe?qe.displayName||qe.name:"")?Cn(qe):""}function Jn(qe){switch(qe.tag){case 5:return Cn(qe.type);case 16:return Cn("Lazy");case 13:return Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 2:case 15:return qe=Yn(qe.type,!1),qe;case 11:return qe=Yn(qe.type.render,!1),qe;case 1:return qe=Yn(qe.type,!0),qe;default:return""}}function sr(qe){if(qe==null)return null;if(typeof qe=="function")return qe.displayName||qe.name||null;if(typeof qe=="string")return qe;switch(qe){case gn:return"Fragment";case yn:return"Portal";case dn:return"Profiler";case mn:return"StrictMode";case En:return"Suspense";case In:return"SuspenseList"}if(typeof qe=="object")switch(qe.$$typeof){case bn:return(qe.displayName||"Context")+".Consumer";case vn:return(qe._context.displayName||"Context")+".Provider";case Tn:var We=qe.render;return qe=qe.displayName,qe||(qe=We.displayName||We.name||"",qe=qe!==""?"ForwardRef("+qe+")":"ForwardRef"),qe;case Nn:return We=qe.displayName||null,We!==null?We:sr(qe.type)||"Memo";case On:We=qe._payload,qe=qe._init;try{return sr(qe(We))}catch{}}return null}function lr(qe){var We=qe.type;switch(qe.tag){case 24:return"Cache";case 9:return(We.displayName||"Context")+".Consumer";case 10:return(We._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return qe=We.render,qe=qe.displayName||qe.name||"",We.displayName||(qe!==""?"ForwardRef("+qe+")":"ForwardRef");case 7:return"Fragment";case 5:return We;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sr(We);case 8:return We===mn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof We=="function")return We.displayName||We.name||null;if(typeof We=="string")return We}return null}function mr(qe){switch(typeof qe){case"boolean":case"number":case"string":case"undefined":return qe;case"object":return qe;default:return""}}function gr(qe){var We=qe.type;return(qe=qe.nodeName)&&qe.toLowerCase()==="input"&&(We==="checkbox"||We==="radio")}function Er(qe){var We=gr(qe)?"checked":"value",Ye=Object.getOwnPropertyDescriptor(qe.constructor.prototype,We),hn=""+qe[We];if(!qe.hasOwnProperty(We)&&typeof Ye<"u"&&typeof Ye.get=="function"&&typeof Ye.set=="function"){var wn=Ye.get,Pn=Ye.set;return Object.defineProperty(qe,We,{configurable:!0,get:function(){return wn.call(this)},set:function(Bn){hn=""+Bn,Pn.call(this,Bn)}}),Object.defineProperty(qe,We,{enumerable:Ye.enumerable}),{getValue:function(){return hn},setValue:function(Bn){hn=""+Bn},stopTracking:function(){qe._valueTracker=null,delete qe[We]}}}}function $r(qe){qe._valueTracker||(qe._valueTracker=Er(qe))}function Yr(qe){if(!qe)return!1;var We=qe._valueTracker;if(!We)return!0;var Ye=We.getValue(),hn="";return qe&&(hn=gr(qe)?qe.checked?"true":"false":qe.value),qe=hn,qe!==Ye?(We.setValue(qe),!0):!1}function Gr(qe){if(qe=qe||(typeof document<"u"?document:void 0),typeof qe>"u")return null;try{return qe.activeElement||qe.body}catch{return qe.body}}function Tr(qe,We){var Ye=We.checked;return Dn({},We,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Ye??qe._wrapperState.initialChecked})}function rr(qe,We){var Ye=We.defaultValue==null?"":We.defaultValue,hn=We.checked!=null?We.checked:We.defaultChecked;Ye=mr(We.value!=null?We.value:Ye),qe._wrapperState={initialChecked:hn,initialValue:Ye,controlled:We.type==="checkbox"||We.type==="radio"?We.checked!=null:We.value!=null}}function Ni(qe,We){We=We.checked,We!=null&&Je(qe,"checked",We,!1)}function Ai(qe,We){Ni(qe,We);var Ye=mr(We.value),hn=We.type;if(Ye!=null)hn==="number"?(Ye===0&&qe.value===""||qe.value!=Ye)&&(qe.value=""+Ye):qe.value!==""+Ye&&(qe.value=""+Ye);else if(hn==="submit"||hn==="reset"){qe.removeAttribute("value");return}We.hasOwnProperty("value")?Wr(qe,We.type,Ye):We.hasOwnProperty("defaultValue")&&Wr(qe,We.type,mr(We.defaultValue)),We.checked==null&&We.defaultChecked!=null&&(qe.defaultChecked=!!We.defaultChecked)}function bi(qe,We,Ye){if(We.hasOwnProperty("value")||We.hasOwnProperty("defaultValue")){var hn=We.type;if(!(hn!=="submit"&&hn!=="reset"||We.value!==void 0&&We.value!==null))return;We=""+qe._wrapperState.initialValue,Ye||We===qe.value||(qe.value=We),qe.defaultValue=We}Ye=qe.name,Ye!==""&&(qe.name=""),qe.defaultChecked=!!qe._wrapperState.initialChecked,Ye!==""&&(qe.name=Ye)}function Wr(qe,We,Ye){(We!=="number"||Gr(qe.ownerDocument)!==qe)&&(Ye==null?qe.defaultValue=""+qe._wrapperState.initialValue:qe.defaultValue!==""+Ye&&(qe.defaultValue=""+Ye))}var hi=Array.isArray;function ei(qe,We,Ye,hn){if(qe=qe.options,We){We={};for(var wn=0;wn<Ye.length;wn++)We["$"+Ye[wn]]=!0;for(Ye=0;Ye<qe.length;Ye++)wn=We.hasOwnProperty("$"+qe[Ye].value),qe[Ye].selected!==wn&&(qe[Ye].selected=wn),wn&&hn&&(qe[Ye].defaultSelected=!0)}else{for(Ye=""+mr(Ye),We=null,wn=0;wn<qe.length;wn++){if(qe[wn].value===Ye){qe[wn].selected=!0,hn&&(qe[wn].defaultSelected=!0);return}We!==null||qe[wn].disabled||(We=qe[wn])}We!==null&&(We.selected=!0)}}function gi(qe,We){if(We.dangerouslySetInnerHTML!=null)throw Error(t(91));return Dn({},We,{value:void 0,defaultValue:void 0,children:""+qe._wrapperState.initialValue})}function mi(qe,We){var Ye=We.value;if(Ye==null){if(Ye=We.children,We=We.defaultValue,Ye!=null){if(We!=null)throw Error(t(92));if(hi(Ye)){if(1<Ye.length)throw Error(t(93));Ye=Ye[0]}We=Ye}We==null&&(We=""),Ye=We}qe._wrapperState={initialValue:mr(Ye)}}function Hi(qe,We){var Ye=mr(We.value),hn=mr(We.defaultValue);Ye!=null&&(Ye=""+Ye,Ye!==qe.value&&(qe.value=Ye),We.defaultValue==null&&qe.defaultValue!==Ye&&(qe.defaultValue=Ye)),hn!=null&&(qe.defaultValue=""+hn)}function oi(qe){var We=qe.textContent;We===qe._wrapperState.initialValue&&We!==""&&We!==null&&(qe.value=We)}function yr(qe){switch(qe){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fr(qe,We){return qe==null||qe==="http://www.w3.org/1999/xhtml"?yr(We):qe==="http://www.w3.org/2000/svg"&&We==="foreignObject"?"http://www.w3.org/1999/xhtml":qe}var Qr,Kr=function(qe){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(We,Ye,hn,wn){MSApp.execUnsafeLocalFunction(function(){return qe(We,Ye,hn,wn)})}:qe}(function(qe,We){if(qe.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in qe)qe.innerHTML=We;else{for(Qr=Qr||document.createElement("div"),Qr.innerHTML="<svg>"+We.valueOf().toString()+"</svg>",We=Qr.firstChild;qe.firstChild;)qe.removeChild(qe.firstChild);for(;We.firstChild;)qe.appendChild(We.firstChild)}});function si(qe,We){if(We){var Ye=qe.firstChild;if(Ye&&Ye===qe.lastChild&&Ye.nodeType===3){Ye.nodeValue=We;return}}qe.textContent=We}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Li=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(qe){Li.forEach(function(We){We=We+qe.charAt(0).toUpperCase()+qe.substring(1),fi[We]=fi[qe]})});function $i(qe,We,Ye){return We==null||typeof We=="boolean"||We===""?"":Ye||typeof We!="number"||We===0||fi.hasOwnProperty(qe)&&fi[qe]?(""+We).trim():We+"px"}function zr(qe,We){qe=qe.style;for(var Ye in We)if(We.hasOwnProperty(Ye)){var hn=Ye.indexOf("--")===0,wn=$i(Ye,We[Ye],hn);Ye==="float"&&(Ye="cssFloat"),hn?qe.setProperty(Ye,wn):qe[Ye]=wn}}var Ii=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ui(qe,We){if(We){if(Ii[qe]&&(We.children!=null||We.dangerouslySetInnerHTML!=null))throw Error(t(137,qe));if(We.dangerouslySetInnerHTML!=null){if(We.children!=null)throw Error(t(60));if(typeof We.dangerouslySetInnerHTML!="object"||!("__html"in We.dangerouslySetInnerHTML))throw Error(t(61))}if(We.style!=null&&typeof We.style!="object")throw Error(t(62))}}function wi(qe,We){if(qe.indexOf("-")===-1)return typeof We.is=="string";switch(qe){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ri=null;function ci(qe){return qe=qe.target||qe.srcElement||window,qe.correspondingUseElement&&(qe=qe.correspondingUseElement),qe.nodeType===3?qe.parentNode:qe}var ws=null,hs=null,rs=null;function ri(qe){if(qe=Pu(qe)){if(typeof ws!="function")throw Error(t(280));var We=qe.stateNode;We&&(We=Yu(We),ws(qe.stateNode,qe.type,We))}}function ai(qe){hs?rs?rs.push(qe):rs=[qe]:hs=qe}function Fi(){if(hs){var qe=hs,We=rs;if(rs=hs=null,ri(qe),We)for(qe=0;qe<We.length;qe++)ri(We[qe])}}function Ms(qe,We){return qe(We)}function To(){}var Zs=!1;function Ci(qe,We,Ye){if(Zs)return qe(We,Ye);Zs=!0;try{return Ms(qe,We,Ye)}finally{Zs=!1,(hs!==null||rs!==null)&&(To(),Fi())}}function gs(qe,We){var Ye=qe.stateNode;if(Ye===null)return null;var hn=Yu(Ye);if(hn===null)return null;Ye=hn[We];e:switch(We){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(hn=!hn.disabled)||(qe=qe.type,hn=!(qe==="button"||qe==="input"||qe==="select"||qe==="textarea")),qe=!hn;break e;default:qe=!1}if(qe)return null;if(Ye&&typeof Ye!="function")throw Error(t(231,We,typeof Ye));return Ye}var Mo=!1;if(De)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){Mo=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{Mo=!1}function eo(qe,We,Ye,hn,wn,Pn,Bn,or,hr){var Mr=Array.prototype.slice.call(arguments,3);try{We.apply(Ye,Mr)}catch(Jr){this.onError(Jr)}}var xs=!1,Os=null,Ts=!1,ra=null,ua={onError:function(qe){xs=!0,Os=qe}};function po(qe,We,Ye,hn,wn,Pn,Bn,or,hr){xs=!1,Os=null,eo.apply(ua,arguments)}function Gn(qe,We,Ye,hn,wn,Pn,Bn,or,hr){if(po.apply(this,arguments),xs){if(xs){var Mr=Os;xs=!1,Os=null}else throw Error(t(198));Ts||(Ts=!0,ra=Mr)}}function ir(qe){var We=qe,Ye=qe;if(qe.alternate)for(;We.return;)We=We.return;else{qe=We;do We=qe,(We.flags&4098)!==0&&(Ye=We.return),qe=We.return;while(qe)}return We.tag===3?Ye:null}function cr(qe){if(qe.tag===13){var We=qe.memoizedState;if(We===null&&(qe=qe.alternate,qe!==null&&(We=qe.memoizedState)),We!==null)return We.dehydrated}return null}function _r(qe){if(ir(qe)!==qe)throw Error(t(188))}function Ir(qe){var We=qe.alternate;if(!We){if(We=ir(qe),We===null)throw Error(t(188));return We!==qe?null:qe}for(var Ye=qe,hn=We;;){var wn=Ye.return;if(wn===null)break;var Pn=wn.alternate;if(Pn===null){if(hn=wn.return,hn!==null){Ye=hn;continue}break}if(wn.child===Pn.child){for(Pn=wn.child;Pn;){if(Pn===Ye)return _r(wn),qe;if(Pn===hn)return _r(wn),We;Pn=Pn.sibling}throw Error(t(188))}if(Ye.return!==hn.return)Ye=wn,hn=Pn;else{for(var Bn=!1,or=wn.child;or;){if(or===Ye){Bn=!0,Ye=wn,hn=Pn;break}if(or===hn){Bn=!0,hn=wn,Ye=Pn;break}or=or.sibling}if(!Bn){for(or=Pn.child;or;){if(or===Ye){Bn=!0,Ye=Pn,hn=wn;break}if(or===hn){Bn=!0,hn=Pn,Ye=wn;break}or=or.sibling}if(!Bn)throw Error(t(189))}}if(Ye.alternate!==hn)throw Error(t(190))}if(Ye.tag!==3)throw Error(t(188));return Ye.stateNode.current===Ye?qe:We}function Or(qe){return qe=Ir(qe),qe!==null?Zr(qe):null}function Zr(qe){if(qe.tag===5||qe.tag===6)return qe;for(qe=qe.child;qe!==null;){var We=Zr(qe);if(We!==null)return We;qe=qe.sibling}return null}var yi=e.unstable_scheduleCallback,pi=e.unstable_cancelCallback,zi=e.unstable_shouldYield,_s=e.unstable_requestPaint,Gi=e.unstable_now,js=e.unstable_getCurrentPriorityLevel,Nr=e.unstable_ImmediatePriority,Vi=e.unstable_UserBlockingPriority,is=e.unstable_NormalPriority,Eo=e.unstable_LowPriority,Xo=e.unstable_IdlePriority,Ca=null,Lo=null;function vl(qe){if(Lo&&typeof Lo.onCommitFiberRoot=="function")try{Lo.onCommitFiberRoot(Ca,qe,void 0,(qe.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:wl,Ja=Math.log,qs=Math.LN2;function wl(qe){return qe>>>=0,qe===0?32:31-(Ja(qe)/qs|0)|0}var Za=64,ca=4194304;function da(qe){switch(qe&-qe){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return qe&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return qe&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return qe}}function mo(qe,We){var Ye=qe.pendingLanes;if(Ye===0)return 0;var hn=0,wn=qe.suspendedLanes,Pn=qe.pingedLanes,Bn=Ye&268435455;if(Bn!==0){var or=Bn&~wn;or!==0?hn=da(or):(Pn&=Bn,Pn!==0&&(hn=da(Pn)))}else Bn=Ye&~wn,Bn!==0?hn=da(Bn):Pn!==0&&(hn=da(Pn));if(hn===0)return 0;if(We!==0&&We!==hn&&(We&wn)===0&&(wn=hn&-hn,Pn=We&-We,wn>=Pn||wn===16&&(Pn&4194240)!==0))return We;if((hn&4)!==0&&(hn|=Ye&16),We=qe.entangledLanes,We!==0)for(qe=qe.entanglements,We&=hn;0<We;)Ye=31-ys(We),wn=1<<Ye,hn|=qe[Ye],We&=~wn;return hn}function Ha(qe,We){switch(qe){case 1:case 2:case 4:return We+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return We+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function As(qe,We){for(var Ye=qe.suspendedLanes,hn=qe.pingedLanes,wn=qe.expirationTimes,Pn=qe.pendingLanes;0<Pn;){var Bn=31-ys(Pn),or=1<<Bn,hr=wn[Bn];hr===-1?((or&Ye)===0||(or&hn)!==0)&&(wn[Bn]=Ha(or,We)):hr<=We&&(qe.expiredLanes|=or),Pn&=~or}}function Do(qe){return qe=qe.pendingLanes&-1073741825,qe!==0?qe:qe&1073741824?1073741824:0}function el(){var qe=Za;return Za<<=1,(Za&4194240)===0&&(Za=64),qe}function Ga(qe){for(var We=[],Ye=0;31>Ye;Ye++)We.push(qe);return We}function wa(qe,We,Ye){qe.pendingLanes|=We,We!==536870912&&(qe.suspendedLanes=0,qe.pingedLanes=0),qe=qe.eventTimes,We=31-ys(We),qe[We]=Ye}function us(qe,We){var Ye=qe.pendingLanes&~We;qe.pendingLanes=We,qe.suspendedLanes=0,qe.pingedLanes=0,qe.expiredLanes&=We,qe.mutableReadLanes&=We,qe.entangledLanes&=We,We=qe.entanglements;var hn=qe.eventTimes;for(qe=qe.expirationTimes;0<Ye;){var wn=31-ys(Ye),Pn=1<<wn;We[wn]=0,hn[wn]=-1,qe[wn]=-1,Ye&=~Pn}}function Oa(qe,We){var Ye=qe.entangledLanes|=We;for(qe=qe.entanglements;Ye;){var hn=31-ys(Ye),wn=1<<hn;wn&We|qe[hn]&We&&(qe[hn]|=We),Ye&=~wn}}var os=0;function Qo(qe){return qe&=-qe,1<qe?4<qe?(qe&268435455)!==0?16:536870912:4:1}var Xi,ul,es,Qi,tl,ha=!1,Fo=[],go=null,Vo=null,Jo=null,ji=new Map,ia=new Map,xa=[],Hl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ol(qe,We){switch(qe){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":ji.delete(We.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(We.pointerId)}}function Ys(qe,We,Ye,hn,wn,Pn){return qe===null||qe.nativeEvent!==Pn?(qe={blockedOn:We,domEventName:Ye,eventSystemFlags:hn,nativeEvent:Pn,targetContainers:[wn]},We!==null&&(We=Pu(We),We!==null&&ul(We)),qe):(qe.eventSystemFlags|=hn,We=qe.targetContainers,wn!==null&&We.indexOf(wn)===-1&&We.push(wn),qe)}function Na(qe,We,Ye,hn,wn){switch(We){case"focusin":return go=Ys(go,qe,We,Ye,hn,wn),!0;case"dragenter":return Vo=Ys(Vo,qe,We,Ye,hn,wn),!0;case"mouseover":return Jo=Ys(Jo,qe,We,Ye,hn,wn),!0;case"pointerover":var Pn=wn.pointerId;return ji.set(Pn,Ys(ji.get(Pn)||null,qe,We,Ye,hn,wn)),!0;case"gotpointercapture":return Pn=wn.pointerId,ia.set(Pn,Ys(ia.get(Pn)||null,qe,We,Ye,hn,wn)),!0}return!1}function Nl(qe){var We=Zl(qe.target);if(We!==null){var Ye=ir(We);if(Ye!==null){if(We=Ye.tag,We===13){if(We=cr(Ye),We!==null){qe.blockedOn=We,tl(qe.priority,function(){es(Ye)});return}}else if(We===3&&Ye.stateNode.current.memoizedState.isDehydrated){qe.blockedOn=Ye.tag===3?Ye.stateNode.containerInfo:null;return}}}qe.blockedOn=null}function Ln(qe){if(qe.blockedOn!==null)return!1;for(var We=qe.targetContainers;0<We.length;){var Ye=Ao(qe.domEventName,qe.eventSystemFlags,We[0],qe.nativeEvent);if(Ye===null){Ye=qe.nativeEvent;var hn=new Ye.constructor(Ye.type,Ye);Ri=hn,Ye.target.dispatchEvent(hn),Ri=null}else return We=Pu(Ye),We!==null&&ul(We),qe.blockedOn=Ye,!1;We.shift()}return!0}function qn(qe,We,Ye){Ln(qe)&&Ye.delete(We)}function Zn(){ha=!1,go!==null&&Ln(go)&&(go=null),Vo!==null&&Ln(Vo)&&(Vo=null),Jo!==null&&Ln(Jo)&&(Jo=null),ji.forEach(qn),ia.forEach(qn)}function ar(qe,We){qe.blockedOn===We&&(qe.blockedOn=null,ha||(ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zn)))}function vr(qe){function We(wn){return ar(wn,qe)}if(0<Fo.length){ar(Fo[0],qe);for(var Ye=1;Ye<Fo.length;Ye++){var hn=Fo[Ye];hn.blockedOn===qe&&(hn.blockedOn=null)}}for(go!==null&&ar(go,qe),Vo!==null&&ar(Vo,qe),Jo!==null&&ar(Jo,qe),ji.forEach(We),ia.forEach(We),Ye=0;Ye<xa.length;Ye++)hn=xa[Ye],hn.blockedOn===qe&&(hn.blockedOn=null);for(;0<xa.length&&(Ye=xa[0],Ye.blockedOn===null);)Nl(Ye),Ye.blockedOn===null&&xa.shift()}var Cr=un.ReactCurrentBatchConfig,ni=!0;function ui(qe,We,Ye,hn){var wn=os,Pn=Cr.transition;Cr.transition=null;try{os=1,Ki(qe,We,Ye,hn)}finally{os=wn,Cr.transition=Pn}}function ts(qe,We,Ye,hn){var wn=os,Pn=Cr.transition;Cr.transition=null;try{os=4,Ki(qe,We,Ye,hn)}finally{os=wn,Cr.transition=Pn}}function Ki(qe,We,Ye,hn){if(ni){var wn=Ao(qe,We,Ye,hn);if(wn===null)Hu(qe,We,hn,fs,Ye),Ol(qe,hn);else if(Na(wn,qe,We,Ye,hn))hn.stopPropagation();else if(Ol(qe,hn),We&4&&-1<Hl.indexOf(qe)){for(;wn!==null;){var Pn=Pu(wn);if(Pn!==null&&Xi(Pn),Pn=Ao(qe,We,Ye,hn),Pn===null&&Hu(qe,We,hn,fs,Ye),Pn===wn)break;wn=Pn}wn!==null&&hn.stopPropagation()}else Hu(qe,We,hn,null,Ye)}}var fs=null;function Ao(qe,We,Ye,hn){if(fs=null,qe=ci(hn),qe=Zl(qe),qe!==null)if(We=ir(qe),We===null)qe=null;else if(Ye=We.tag,Ye===13){if(qe=cr(We),qe!==null)return qe;qe=null}else if(Ye===3){if(We.stateNode.current.memoizedState.isDehydrated)return We.tag===3?We.stateNode.containerInfo:null;qe=null}else We!==qe&&(qe=null);return fs=qe,null}function ho(qe){switch(qe){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(js()){case Nr:return 1;case Vi:return 4;case is:case Eo:return 16;case Xo:return 536870912;default:return 16}default:return 16}}var Rr=null,Yi=null,as=null;function qo(){if(as)return as;var qe,We=Yi,Ye=We.length,hn,wn="value"in Rr?Rr.value:Rr.textContent,Pn=wn.length;for(qe=0;qe<Ye&&We[qe]===wn[qe];qe++);var Bn=Ye-qe;for(hn=1;hn<=Bn&&We[Ye-hn]===wn[Pn-hn];hn++);return as=wn.slice(qe,1<hn?1-hn:void 0)}function Xs(qe){var We=qe.keyCode;return"charCode"in qe?(qe=qe.charCode,qe===0&&We===13&&(qe=13)):qe=We,qe===10&&(qe=13),32<=qe||qe===13?qe:0}function Wo(){return!0}function xn(){return!1}function Vn(qe){function We(Ye,hn,wn,Pn,Bn){this._reactName=Ye,this._targetInst=wn,this.type=hn,this.nativeEvent=Pn,this.target=Bn,this.currentTarget=null;for(var or in qe)qe.hasOwnProperty(or)&&(Ye=qe[or],this[or]=Ye?Ye(Pn):Pn[or]);return this.isDefaultPrevented=(Pn.defaultPrevented!=null?Pn.defaultPrevented:Pn.returnValue===!1)?Wo:xn,this.isPropagationStopped=xn,this}return Dn(We.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Ye=this.nativeEvent;Ye&&(Ye.preventDefault?Ye.preventDefault():typeof Ye.returnValue!="unknown"&&(Ye.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var Ye=this.nativeEvent;Ye&&(Ye.stopPropagation?Ye.stopPropagation():typeof Ye.cancelBubble!="unknown"&&(Ye.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),We}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(qe){return qe.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=Vn(tr),br=Dn({},tr,{view:0,detail:0}),Br=Vn(br),Hr,_i,xi,Bi=Dn({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(qe){return qe.relatedTarget===void 0?qe.fromElement===qe.srcElement?qe.toElement:qe.fromElement:qe.relatedTarget},movementX:function(qe){return"movementX"in qe?qe.movementX:(qe!==xi&&(xi&&qe.type==="mousemove"?(Hr=qe.screenX-xi.screenX,_i=qe.screenY-xi.screenY):_i=Hr=0,xi=qe),Hr)},movementY:function(qe){return"movementY"in qe?qe.movementY:_i}}),Ji=Vn(Bi),bs=Dn({},Bi,{dataTransfer:0}),Ws=Vn(bs),Qs=Dn({},br,{relatedTarget:0}),Es=Vn(Qs),yo=Dn({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ds=Vn(yo),jo=Dn({},tr,{clipboardData:function(qe){return"clipboardData"in qe?qe.clipboardData:window.clipboardData}}),nl=Vn(jo),cl=Dn({},tr,{data:0}),iu=Vn(cl),Ml={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},So={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gl(qe){var We=this.nativeEvent;return We.getModifierState?We.getModifierState(qe):(qe=Ma[qe])?!!We[qe]:!1}function Ta(){return Gl}var Ze=Dn({},br,{key:function(qe){if(qe.key){var We=Ml[qe.key]||qe.key;if(We!=="Unidentified")return We}return qe.type==="keypress"?(qe=Xs(qe),qe===13?"Enter":String.fromCharCode(qe)):qe.type==="keydown"||qe.type==="keyup"?So[qe.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(qe){return qe.type==="keypress"?Xs(qe):0},keyCode:function(qe){return qe.type==="keydown"||qe.type==="keyup"?qe.keyCode:0},which:function(qe){return qe.type==="keypress"?Xs(qe):qe.type==="keydown"||qe.type==="keyup"?qe.keyCode:0}}),Sn=Vn(Ze),Mn=Dn({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xn=Vn(Mn),wr=Dn({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),Lr=Vn(wr),ti=Dn({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ss=Vn(ti),to=Dn({},Bi,{deltaX:function(qe){return"deltaX"in qe?qe.deltaX:"wheelDeltaX"in qe?-qe.wheelDeltaX:0},deltaY:function(qe){return"deltaY"in qe?qe.deltaY:"wheelDeltaY"in qe?-qe.wheelDeltaY:"wheelDelta"in qe?-qe.wheelDelta:0},deltaZ:0,deltaMode:0}),cs=Vn(to),ps=[9,13,27,32],Ps=De&&"CompositionEvent"in window,fa=null;De&&"documentMode"in document&&(fa=document.documentMode);var sa=De&&"TextEvent"in window&&!fa,La=De&&(!Ps||fa&&8<fa&&11>=fa),dl=" ",Ea=!1;function Aa(qe,We){switch(qe){case"keyup":return ps.indexOf(We.keyCode)!==-1;case"keydown":return We.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kl(qe){return qe=qe.detail,typeof qe=="object"&&"data"in qe?qe.data:null}var Sa=!1;function Yl(qe,We){switch(qe){case"compositionend":return Kl(We);case"keypress":return We.which!==32?null:(Ea=!0,dl);case"textInput":return qe=We.data,qe===dl&&Ea?null:qe;default:return null}}function $u(qe,We){if(Sa)return qe==="compositionend"||!Ps&&Aa(qe,We)?(qe=qo(),as=Yi=Rr=null,Sa=!1,qe):null;switch(qe){case"paste":return null;case"keypress":if(!(We.ctrlKey||We.altKey||We.metaKey)||We.ctrlKey&&We.altKey){if(We.char&&1<We.char.length)return We.char;if(We.which)return String.fromCharCode(We.which)}return null;case"compositionend":return La&&We.locale!=="ko"?null:We.data;default:return null}}var Xl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bo(qe){var We=qe&&qe.nodeName&&qe.nodeName.toLowerCase();return We==="input"?!!Xl[qe.type]:We==="textarea"}function oc(qe,We,Ye,hn){ai(hn),We=fc(We,"onChange"),0<We.length&&(Ye=new ur("onChange","change",null,Ye,hn),qe.push({event:Ye,listeners:We}))}var Da=null,Fa=null;function yu(qe){qu(qe,0)}function Ql(qe){var We=hu(qe);if(Yr(We))return qe}function bu(qe,We){if(qe==="change")return We}var su=!1;if(De){var Ll;if(De){var Dl="oninput"in document;if(!Dl){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),Dl=typeof xl.oninput=="function"}Ll=Dl}else Ll=!1;su=Ll&&(!document.documentMode||9<document.documentMode)}function vu(){Da&&(Da.detachEvent("onpropertychange",Va),Fa=Da=null)}function Va(qe){if(qe.propertyName==="value"&&Ql(Fa)){var We=[];oc(We,Fa,qe,ci(qe)),Ci(yu,We)}}function Tl(qe,We,Ye){qe==="focusin"?(vu(),Da=We,Fa=Ye,Da.attachEvent("onpropertychange",Va)):qe==="focusout"&&vu()}function Hs(qe){if(qe==="selectionchange"||qe==="keyup"||qe==="keydown")return Ql(Fa)}function Gs(qe,We){if(qe==="click")return Ql(We)}function Po(qe,We){if(qe==="input"||qe==="change")return Ql(We)}function Io(qe,We){return qe===We&&(qe!==0||1/qe===1/We)||qe!==qe&&We!==We}var Ho=typeof Object.is=="function"?Object.is:Io;function El(qe,We){if(Ho(qe,We))return!0;if(typeof qe!="object"||qe===null||typeof We!="object"||We===null)return!1;var Ye=Object.keys(qe),hn=Object.keys(We);if(Ye.length!==hn.length)return!1;for(hn=0;hn<Ye.length;hn++){var wn=Ye[hn];if(!$e.call(We,wn)||!Ho(qe[wn],We[wn]))return!1}return!0}function hl(qe){for(;qe&&qe.firstChild;)qe=qe.firstChild;return qe}function wu(qe,We){var Ye=hl(qe);qe=0;for(var hn;Ye;){if(Ye.nodeType===3){if(hn=qe+Ye.textContent.length,qe<=We&&hn>=We)return{node:Ye,offset:We-qe};qe=hn}e:{for(;Ye;){if(Ye.nextSibling){Ye=Ye.nextSibling;break e}Ye=Ye.parentNode}Ye=void 0}Ye=hl(Ye)}}function Rc(qe,We){return qe&&We?qe===We?!0:qe&&qe.nodeType===3?!1:We&&We.nodeType===3?Rc(qe,We.parentNode):"contains"in qe?qe.contains(We):qe.compareDocumentPosition?!!(qe.compareDocumentPosition(We)&16):!1:!1}function Cc(){for(var qe=window,We=Gr();We instanceof qe.HTMLIFrameElement;){try{var Ye=typeof We.contentWindow.location.href=="string"}catch{Ye=!1}if(Ye)qe=We.contentWindow;else break;We=Gr(qe.document)}return We}function ac(qe){var We=qe&&qe.nodeName&&qe.nodeName.toLowerCase();return We&&(We==="input"&&(qe.type==="text"||qe.type==="search"||qe.type==="tel"||qe.type==="url"||qe.type==="password")||We==="textarea"||qe.contentEditable==="true")}function rd(qe){var We=Cc(),Ye=qe.focusedElem,hn=qe.selectionRange;if(We!==Ye&&Ye&&Ye.ownerDocument&&Rc(Ye.ownerDocument.documentElement,Ye)){if(hn!==null&&ac(Ye)){if(We=hn.start,qe=hn.end,qe===void 0&&(qe=We),"selectionStart"in Ye)Ye.selectionStart=We,Ye.selectionEnd=Math.min(qe,Ye.value.length);else if(qe=(We=Ye.ownerDocument||document)&&We.defaultView||window,qe.getSelection){qe=qe.getSelection();var wn=Ye.textContent.length,Pn=Math.min(hn.start,wn);hn=hn.end===void 0?Pn:Math.min(hn.end,wn),!qe.extend&&Pn>hn&&(wn=hn,hn=Pn,Pn=wn),wn=wu(Ye,Pn);var Bn=wu(Ye,hn);wn&&Bn&&(qe.rangeCount!==1||qe.anchorNode!==wn.node||qe.anchorOffset!==wn.offset||qe.focusNode!==Bn.node||qe.focusOffset!==Bn.offset)&&(We=We.createRange(),We.setStart(wn.node,wn.offset),qe.removeAllRanges(),Pn>hn?(qe.addRange(We),qe.extend(Bn.node,Bn.offset)):(We.setEnd(Bn.node,Bn.offset),qe.addRange(We)))}}for(We=[],qe=Ye;qe=qe.parentNode;)qe.nodeType===1&&We.push({element:qe,left:qe.scrollLeft,top:qe.scrollTop});for(typeof Ye.focus=="function"&&Ye.focus(),Ye=0;Ye<We.length;Ye++)qe=We[Ye],qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}var sd=De&&"documentMode"in document&&11>=document.documentMode,ou=null,uc=null,xu=null,cc=!1;function Oc(qe,We,Ye){var hn=Ye.window===Ye?Ye.document:Ye.nodeType===9?Ye:Ye.ownerDocument;cc||ou==null||ou!==Gr(hn)||(hn=ou,"selectionStart"in hn&&ac(hn)?hn={start:hn.selectionStart,end:hn.selectionEnd}:(hn=(hn.ownerDocument&&hn.ownerDocument.defaultView||window).getSelection(),hn={anchorNode:hn.anchorNode,anchorOffset:hn.anchorOffset,focusNode:hn.focusNode,focusOffset:hn.focusOffset}),xu&&El(xu,hn)||(xu=hn,hn=fc(uc,"onSelect"),0<hn.length&&(We=new ur("onSelect","select",null,We,Ye),qe.push({event:We,listeners:hn}),We.target=ou)))}function Bu(qe,We){var Ye={};return Ye[qe.toLowerCase()]=We.toLowerCase(),Ye["Webkit"+qe]="webkit"+We,Ye["Moz"+qe]="moz"+We,Ye}var au={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionend:Bu("Transition","TransitionEnd")},lu={},Nc={};De&&(Nc=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function Uu(qe){if(lu[qe])return lu[qe];if(!au[qe])return qe;var We=au[qe],Ye;for(Ye in We)if(We.hasOwnProperty(Ye)&&Ye in Nc)return lu[qe]=We[Ye];return qe}var Mc=Uu("animationend"),Lc=Uu("animationiteration"),Dc=Uu("animationstart"),Fc=Uu("transitionend"),Vc=new Map,jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(qe,We){Vc.set(qe,We),Re(We,[qe])}for(var Tu=0;Tu<jc.length;Tu++){var Pa=jc[Tu],rl=Pa.toLowerCase(),dc=Pa[0].toUpperCase()+Pa.slice(1);Al(rl,"on"+dc)}Al(Mc,"onAnimationEnd"),Al(Lc,"onAnimationIteration"),Al(Dc,"onAnimationStart"),Al("dblclick","onDoubleClick"),Al("focusin","onFocus"),Al("focusout","onBlur"),Al(Fc,"onTransitionEnd"),Ce("onMouseEnter",["mouseout","mouseover"]),Ce("onMouseLeave",["mouseout","mouseover"]),Ce("onPointerEnter",["pointerout","pointerover"]),Ce("onPointerLeave",["pointerout","pointerover"]),Re("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Re("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Re("onBeforeInput",["compositionend","keypress","textInput","paste"]),Re("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Re("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),od=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function zu(qe,We,Ye){var hn=qe.type||"unknown-event";qe.currentTarget=Ye,Gn(hn,We,void 0,qe),qe.currentTarget=null}function qu(qe,We){We=(We&4)!==0;for(var Ye=0;Ye<qe.length;Ye++){var hn=qe[Ye],wn=hn.event;hn=hn.listeners;e:{var Pn=void 0;if(We)for(var Bn=hn.length-1;0<=Bn;Bn--){var or=hn[Bn],hr=or.instance,Mr=or.currentTarget;if(or=or.listener,hr!==Pn&&wn.isPropagationStopped())break e;zu(wn,or,Mr),Pn=hr}else for(Bn=0;Bn<hn.length;Bn++){if(or=hn[Bn],hr=or.instance,Mr=or.currentTarget,or=or.listener,hr!==Pn&&wn.isPropagationStopped())break e;zu(wn,or,Mr),Pn=hr}}}if(Ts)throw qe=ra,Ts=!1,ra=null,qe}function $s(qe,We){var Ye=We[$a];Ye===void 0&&(Ye=We[$a]=new Set);var hn=qe+"__bubble";Ye.has(hn)||(Wu(We,qe,2,!1),Ye.add(hn))}function hc(qe,We,Ye){var hn=0;We&&(hn|=4),Wu(Ye,qe,hn,We)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function uu(qe){if(!qe[Eu]){qe[Eu]=!0,Te.forEach(function(Ye){Ye!=="selectionchange"&&(od.has(Ye)||hc(Ye,!1,qe),hc(Ye,!0,qe))});var We=qe.nodeType===9?qe:qe.ownerDocument;We===null||We[Eu]||(We[Eu]=!0,hc("selectionchange",!1,We))}}function Wu(qe,We,Ye,hn){switch(ho(We)){case 1:var wn=ui;break;case 4:wn=ts;break;default:wn=Ki}Ye=wn.bind(null,We,Ye,qe),wn=void 0,!Mo||We!=="touchstart"&&We!=="touchmove"&&We!=="wheel"||(wn=!0),hn?wn!==void 0?qe.addEventListener(We,Ye,{capture:!0,passive:wn}):qe.addEventListener(We,Ye,!0):wn!==void 0?qe.addEventListener(We,Ye,{passive:wn}):qe.addEventListener(We,Ye,!1)}function Hu(qe,We,Ye,hn,wn){var Pn=hn;if((We&1)===0&&(We&2)===0&&hn!==null)e:for(;;){if(hn===null)return;var Bn=hn.tag;if(Bn===3||Bn===4){var or=hn.stateNode.containerInfo;if(or===wn||or.nodeType===8&&or.parentNode===wn)break;if(Bn===4)for(Bn=hn.return;Bn!==null;){var hr=Bn.tag;if((hr===3||hr===4)&&(hr=Bn.stateNode.containerInfo,hr===wn||hr.nodeType===8&&hr.parentNode===wn))return;Bn=Bn.return}for(;or!==null;){if(Bn=Zl(or),Bn===null)return;if(hr=Bn.tag,hr===5||hr===6){hn=Pn=Bn;continue e}or=or.parentNode}}hn=hn.return}Ci(function(){var Mr=Pn,Jr=ci(Ye),ii=[];e:{var Xr=Vc.get(qe);if(Xr!==void 0){var vi=ur,ki=qe;switch(qe){case"keypress":if(Xs(Ye)===0)break e;case"keydown":case"keyup":vi=Sn;break;case"focusin":ki="focus",vi=Es;break;case"focusout":ki="blur",vi=Es;break;case"beforeblur":case"afterblur":vi=Es;break;case"click":if(Ye.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vi=Ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vi=Ws;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vi=Lr;break;case Mc:case Lc:case Dc:vi=Ds;break;case Fc:vi=Ss;break;case"scroll":vi=Br;break;case"wheel":vi=cs;break;case"copy":case"cut":case"paste":vi=nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vi=Xn}var Oi=(We&4)!==0,Yo=!Oi&&qe==="scroll",Sr=Oi?Xr!==null?Xr+"Capture":null:Xr;Oi=[];for(var pr=Mr,kr;pr!==null;){kr=pr;var li=kr.stateNode;if(kr.tag===5&&li!==null&&(kr=li,Sr!==null&&(li=gs(pr,Sr),li!=null&&Oi.push(Gu(pr,li,kr)))),Yo)break;pr=pr.return}0<Oi.length&&(Xr=new vi(Xr,ki,null,Ye,Jr),ii.push({event:Xr,listeners:Oi}))}}if((We&7)===0){e:{if(Xr=qe==="mouseover"||qe==="pointerover",vi=qe==="mouseout"||qe==="pointerout",Xr&&Ye!==Ri&&(ki=Ye.relatedTarget||Ye.fromElement)&&(Zl(ki)||ki[pa]))break e;if((vi||Xr)&&(Xr=Jr.window===Jr?Jr:(Xr=Jr.ownerDocument)?Xr.defaultView||Xr.parentWindow:window,vi?(ki=Ye.relatedTarget||Ye.toElement,vi=Mr,ki=ki?Zl(ki):null,ki!==null&&(Yo=ir(ki),ki!==Yo||ki.tag!==5&&ki.tag!==6)&&(ki=null)):(vi=null,ki=Mr),vi!==ki)){if(Oi=Ji,li="onMouseLeave",Sr="onMouseEnter",pr="mouse",(qe==="pointerout"||qe==="pointerover")&&(Oi=Xn,li="onPointerLeave",Sr="onPointerEnter",pr="pointer"),Yo=vi==null?Xr:hu(vi),kr=ki==null?Xr:hu(ki),Xr=new Oi(li,pr+"leave",vi,Ye,Jr),Xr.target=Yo,Xr.relatedTarget=kr,li=null,Zl(Jr)===Mr&&(Oi=new Oi(Sr,pr+"enter",ki,Ye,Jr),Oi.target=kr,Oi.relatedTarget=Yo,li=Oi),Yo=li,vi&&ki)t:{for(Oi=vi,Sr=ki,pr=0,kr=Oi;kr;kr=cu(kr))pr++;for(kr=0,li=Sr;li;li=cu(li))kr++;for(;0<pr-kr;)Oi=cu(Oi),pr--;for(;0<kr-pr;)Sr=cu(Sr),kr--;for(;pr--;){if(Oi===Sr||Sr!==null&&Oi===Sr.alternate)break t;Oi=cu(Oi),Sr=cu(Sr)}Oi=null}else Oi=null;vi!==null&&ad(ii,Xr,vi,Oi,!1),ki!==null&&Yo!==null&&ad(ii,Yo,ki,Oi,!0)}}e:{if(Xr=Mr?hu(Mr):window,vi=Xr.nodeName&&Xr.nodeName.toLowerCase(),vi==="select"||vi==="input"&&Xr.type==="file")var Di=bu;else if(bo(Xr))if(su)Di=Po;else{Di=Hs;var qi=Tl}else(vi=Xr.nodeName)&&vi.toLowerCase()==="input"&&(Xr.type==="checkbox"||Xr.type==="radio")&&(Di=Gs);if(Di&&(Di=Di(qe,Mr))){oc(ii,Di,Ye,Jr);break e}qi&&qi(qe,Xr,Mr),qe==="focusout"&&(qi=Xr._wrapperState)&&qi.controlled&&Xr.type==="number"&&Wr(Xr,"number",Xr.value)}switch(qi=Mr?hu(Mr):window,qe){case"focusin":(bo(qi)||qi.contentEditable==="true")&&(ou=qi,uc=Mr,xu=null);break;case"focusout":xu=uc=ou=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,Oc(ii,Ye,Jr);break;case"selectionchange":if(sd)break;case"keydown":case"keyup":Oc(ii,Ye,Jr)}var Wi;if(Ps)e:{switch(qe){case"compositionstart":var ns="onCompositionStart";break e;case"compositionend":ns="onCompositionEnd";break e;case"compositionupdate":ns="onCompositionUpdate";break e}ns=void 0}else Sa?Aa(qe,Ye)&&(ns="onCompositionEnd"):qe==="keydown"&&Ye.keyCode===229&&(ns="onCompositionStart");ns&&(La&&Ye.locale!=="ko"&&(Sa||ns!=="onCompositionStart"?ns==="onCompositionEnd"&&Sa&&(Wi=qo()):(Rr=Jr,Yi="value"in Rr?Rr.value:Rr.textContent,Sa=!0)),qi=fc(Mr,ns),0<qi.length&&(ns=new iu(ns,qe,null,Ye,Jr),ii.push({event:ns,listeners:qi}),Wi?ns.data=Wi:(Wi=Kl(Ye),Wi!==null&&(ns.data=Wi)))),(Wi=sa?Yl(qe,Ye):$u(qe,Ye))&&(Mr=fc(Mr,"onBeforeInput"),0<Mr.length&&(Jr=new iu("onBeforeInput","beforeinput",null,Ye,Jr),ii.push({event:Jr,listeners:Mr}),Jr.data=Wi))}qu(ii,We)})}function Gu(qe,We,Ye){return{instance:qe,listener:We,currentTarget:Ye}}function fc(qe,We){for(var Ye=We+"Capture",hn=[];qe!==null;){var wn=qe,Pn=wn.stateNode;wn.tag===5&&Pn!==null&&(wn=Pn,Pn=gs(qe,Ye),Pn!=null&&hn.unshift(Gu(qe,Pn,wn)),Pn=gs(qe,We),Pn!=null&&hn.push(Gu(qe,Pn,wn))),qe=qe.return}return hn}function cu(qe){if(qe===null)return null;do qe=qe.return;while(qe&&qe.tag!==5);return qe||null}function ad(qe,We,Ye,hn,wn){for(var Pn=We._reactName,Bn=[];Ye!==null&&Ye!==hn;){var or=Ye,hr=or.alternate,Mr=or.stateNode;if(hr!==null&&hr===hn)break;or.tag===5&&Mr!==null&&(or=Mr,wn?(hr=gs(Ye,Pn),hr!=null&&Bn.unshift(Gu(Ye,hr,or))):wn||(hr=gs(Ye,Pn),hr!=null&&Bn.push(Gu(Ye,hr,or)))),Ye=Ye.return}Bn.length!==0&&qe.push({event:We,listeners:Bn})}var $d=/\r\n?/g,Bd=/\u0000|\uFFFD/g;function ld(qe){return(typeof qe=="string"?qe:""+qe).replace($d,`
`).replace(Bd,"")}function pc(qe,We,Ye){if(We=ld(We),ld(qe)!==We&&Ye)throw Error(t(425))}function Au(){}var Ku=null,du=null;function $c(qe,We){return qe==="textarea"||qe==="noscript"||typeof We.children=="string"||typeof We.children=="number"||typeof We.dangerouslySetInnerHTML=="object"&&We.dangerouslySetInnerHTML!==null&&We.dangerouslySetInnerHTML.__html!=null}var Bc=typeof setTimeout=="function"?setTimeout:void 0,ud=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,Ud=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(qe){return cd.resolve(null).then(qe).catch(zd)}:Bc;function zd(qe){setTimeout(function(){throw qe})}function Uc(qe,We){var Ye=We,hn=0;do{var wn=Ye.nextSibling;if(qe.removeChild(Ye),wn&&wn.nodeType===8)if(Ye=wn.data,Ye==="/$"){if(hn===0){qe.removeChild(wn),vr(We);return}hn--}else Ye!=="$"&&Ye!=="$?"&&Ye!=="$!"||hn++;Ye=wn}while(Ye);vr(We)}function Ia(qe){for(;qe!=null;qe=qe.nextSibling){var We=qe.nodeType;if(We===1||We===3)break;if(We===8){if(We=qe.data,We==="$"||We==="$!"||We==="$?")break;if(We==="/$")return null}}return qe}function il(qe){qe=qe.previousSibling;for(var We=0;qe;){if(qe.nodeType===8){var Ye=qe.data;if(Ye==="$"||Ye==="$!"||Ye==="$?"){if(We===0)return qe;We--}else Ye==="/$"&&We++}qe=qe.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Sl="__reactFiber$"+ja,Su="__reactProps$"+ja,pa="__reactContainer$"+ja,$a="__reactEvents$"+ja,qd="__reactListeners$"+ja,Wd="__reactHandles$"+ja;function Zl(qe){var We=qe[Sl];if(We)return We;for(var Ye=qe.parentNode;Ye;){if(We=Ye[pa]||Ye[Sl]){if(Ye=We.alternate,We.child!==null||Ye!==null&&Ye.child!==null)for(qe=il(qe);qe!==null;){if(Ye=qe[Sl])return Ye;qe=il(qe)}return We}qe=Ye,Ye=qe.parentNode}return null}function Pu(qe){return qe=qe[Sl]||qe[pa],!qe||qe.tag!==5&&qe.tag!==6&&qe.tag!==13&&qe.tag!==3?null:qe}function hu(qe){if(qe.tag===5||qe.tag===6)return qe.stateNode;throw Error(t(33))}function Yu(qe){return qe[Su]||null}var zc=[],Fl=-1;function pl(qe){return{current:qe}}function Ns(qe){0>Fl||(qe.current=zc[Fl],zc[Fl]=null,Fl--)}function Fs(qe,We){Fl++,zc[Fl]=qe.current,qe.current=We}var eu={},oa=pl(eu),Ba=pl(!1),fu=eu;function Iu(qe,We){var Ye=qe.type.contextTypes;if(!Ye)return eu;var hn=qe.stateNode;if(hn&&hn.__reactInternalMemoizedUnmaskedChildContext===We)return hn.__reactInternalMemoizedMaskedChildContext;var wn={},Pn;for(Pn in Ye)wn[Pn]=We[Pn];return hn&&(qe=qe.stateNode,qe.__reactInternalMemoizedUnmaskedChildContext=We,qe.__reactInternalMemoizedMaskedChildContext=wn),wn}function Ua(qe){return qe=qe.childContextTypes,qe!=null}function mc(){Ns(Ba),Ns(oa)}function dd(qe,We,Ye){if(oa.current!==eu)throw Error(t(168));Fs(oa,We),Fs(Ba,Ye)}function qc(qe,We,Ye){var hn=qe.stateNode;if(We=We.childContextTypes,typeof hn.getChildContext!="function")return Ye;hn=hn.getChildContext();for(var wn in hn)if(!(wn in We))throw Error(t(108,lr(qe)||"Unknown",wn));return Dn({},Ye,hn)}function pu(qe){return qe=(qe=qe.stateNode)&&qe.__reactInternalMemoizedMergedChildContext||eu,fu=oa.current,Fs(oa,qe),Fs(Ba,Ba.current),!0}function hd(qe,We,Ye){var hn=qe.stateNode;if(!hn)throw Error(t(169));Ye?(qe=qc(qe,We,fu),hn.__reactInternalMemoizedMergedChildContext=qe,Ns(Ba),Ns(oa),Fs(oa,qe)):Ns(Ba),Fs(Ba,Ye)}var Vl=null,Xu=!1,Qe=!1;function pn(qe){Vl===null?Vl=[qe]:Vl.push(qe)}function An(qe){Xu=!0,pn(qe)}function Rn(){if(!Qe&&Vl!==null){Qe=!0;var qe=0,We=os;try{var Ye=Vl;for(os=1;qe<Ye.length;qe++){var hn=Ye[qe];do hn=hn(!0);while(hn!==null)}Vl=null,Xu=!1}catch(wn){throw Vl!==null&&(Vl=Vl.slice(qe+1)),yi(Nr,Rn),wn}finally{os=We,Qe=!1}}return null}var jn=[],zn=0,Wn=null,Kn=0,Qn=[],er=0,dr=null,Ar=1,nr="";function fr(qe,We){jn[zn++]=Kn,jn[zn++]=Wn,Wn=qe,Kn=We}function xr(qe,We,Ye){Qn[er++]=Ar,Qn[er++]=nr,Qn[er++]=dr,dr=qe;var hn=Ar;qe=nr;var wn=32-ys(hn)-1;hn&=~(1<<wn),Ye+=1;var Pn=32-ys(We)+wn;if(30<Pn){var Bn=wn-wn%5;Pn=(hn&(1<<Bn)-1).toString(32),hn>>=Bn,wn-=Bn,Ar=1<<32-ys(We)+wn|Ye<<wn|hn,nr=Pn+qe}else Ar=1<<Pn|Ye<<wn|hn,nr=qe}function jr(qe){qe.return!==null&&(fr(qe,1),xr(qe,1,0))}function Pr(qe){for(;qe===Wn;)Wn=jn[--zn],jn[zn]=null,Kn=jn[--zn],jn[zn]=null;for(;qe===dr;)dr=Qn[--er],Qn[er]=null,nr=Qn[--er],Qn[er]=null,Ar=Qn[--er],Qn[er]=null}var Dr=null,Vr=null,Ur=!1,qr=null;function Mi(qe,We){var Ye=Cl(5,null,null,0);Ye.elementType="DELETED",Ye.stateNode=We,Ye.return=qe,We=qe.deletions,We===null?(qe.deletions=[Ye],qe.flags|=16):We.push(Ye)}function Ti(qe,We){switch(qe.tag){case 5:var Ye=qe.type;return We=We.nodeType!==1||Ye.toLowerCase()!==We.nodeName.toLowerCase()?null:We,We!==null?(qe.stateNode=We,Dr=qe,Vr=Ia(We.firstChild),!0):!1;case 6:return We=qe.pendingProps===""||We.nodeType!==3?null:We,We!==null?(qe.stateNode=We,Dr=qe,Vr=null,!0):!1;case 13:return We=We.nodeType!==8?null:We,We!==null?(Ye=dr!==null?{id:Ar,overflow:nr}:null,qe.memoizedState={dehydrated:We,treeContext:Ye,retryLane:1073741824},Ye=Cl(18,null,null,0),Ye.stateNode=We,Ye.return=qe,qe.child=Ye,Dr=qe,Vr=null,!0):!1;default:return!1}}function ss(qe){return(qe.mode&1)!==0&&(qe.flags&128)===0}function Pi(qe){if(Ur){var We=Vr;if(We){var Ye=We;if(!Ti(qe,We)){if(ss(qe))throw Error(t(418));We=Ia(Ye.nextSibling);var hn=Dr;We&&Ti(qe,We)?Mi(hn,Ye):(qe.flags=qe.flags&-4097|2,Ur=!1,Dr=qe)}}else{if(ss(qe))throw Error(t(418));qe.flags=qe.flags&-4097|2,Ur=!1,Dr=qe}}}function ms(qe){for(qe=qe.return;qe!==null&&qe.tag!==5&&qe.tag!==3&&qe.tag!==13;)qe=qe.return;Dr=qe}function vo(qe){if(qe!==Dr)return!1;if(!Ur)return ms(qe),Ur=!0,!1;var We;if((We=qe.tag!==3)&&!(We=qe.tag!==5)&&(We=qe.type,We=We!=="head"&&We!=="body"&&!$c(qe.type,qe.memoizedProps)),We&&(We=Vr)){if(ss(qe))throw ls(),Error(t(418));for(;We;)Mi(qe,We),We=Ia(We.nextSibling)}if(ms(qe),qe.tag===13){if(qe=qe.memoizedState,qe=qe!==null?qe.dehydrated:null,!qe)throw Error(t(317));e:{for(qe=qe.nextSibling,We=0;qe;){if(qe.nodeType===8){var Ye=qe.data;if(Ye==="/$"){if(We===0){Vr=Ia(qe.nextSibling);break e}We--}else Ye!=="$"&&Ye!=="$!"&&Ye!=="$?"||We++}qe=qe.nextSibling}Vr=null}}else Vr=Dr?Ia(qe.stateNode.nextSibling):null;return!0}function ls(){for(var qe=Vr;qe;)qe=Ia(qe.nextSibling)}function Ei(){Vr=Dr=null,Ur=!1}function di(qe){qr===null?qr=[qe]:qr.push(qe)}var ko=un.ReactCurrentBatchConfig;function Zi(qe,We,Ye){if(qe=Ye.ref,qe!==null&&typeof qe!="function"&&typeof qe!="object"){if(Ye._owner){if(Ye=Ye._owner,Ye){if(Ye.tag!==1)throw Error(t(309));var hn=Ye.stateNode}if(!hn)throw Error(t(147,qe));var wn=hn,Pn=""+qe;return We!==null&&We.ref!==null&&typeof We.ref=="function"&&We.ref._stringRef===Pn?We.ref:(We=function(Bn){var or=wn.refs;Bn===null?delete or[Pn]:or[Pn]=Bn},We._stringRef=Pn,We)}if(typeof qe!="string")throw Error(t(284));if(!Ye._owner)throw Error(t(290,qe))}return qe}function ds(qe,We){throw qe=Object.prototype.toString.call(We),Error(t(31,qe==="[object Object]"?"object with keys {"+Object.keys(We).join(", ")+"}":qe))}function Ks(qe){var We=qe._init;return We(qe._payload)}function Zo(qe){function We(Sr,pr){if(qe){var kr=Sr.deletions;kr===null?(Sr.deletions=[pr],Sr.flags|=16):kr.push(pr)}}function Ye(Sr,pr){if(!qe)return null;for(;pr!==null;)We(Sr,pr),pr=pr.sibling;return null}function hn(Sr,pr){for(Sr=new Map;pr!==null;)pr.key!==null?Sr.set(pr.key,pr):Sr.set(pr.index,pr),pr=pr.sibling;return Sr}function wn(Sr,pr){return Sr=Vu(Sr,pr),Sr.index=0,Sr.sibling=null,Sr}function Pn(Sr,pr,kr){return Sr.index=kr,qe?(kr=Sr.alternate,kr!==null?(kr=kr.index,kr<pr?(Sr.flags|=2,pr):kr):(Sr.flags|=2,pr)):(Sr.flags|=1048576,pr)}function Bn(Sr){return qe&&Sr.alternate===null&&(Sr.flags|=2),Sr}function or(Sr,pr,kr,li){return pr===null||pr.tag!==6?(pr=wh(kr,Sr.mode,li),pr.return=Sr,pr):(pr=wn(pr,kr),pr.return=Sr,pr)}function hr(Sr,pr,kr,li){var Di=kr.type;return Di===gn?Jr(Sr,pr,kr.props.children,li,kr.key):pr!==null&&(pr.elementType===Di||typeof Di=="object"&&Di!==null&&Di.$$typeof===On&&Ks(Di)===pr.type)?(li=wn(pr,kr.props),li.ref=Zi(Sr,pr,kr),li.return=Sr,li):(li=Od(kr.type,kr.key,kr.props,null,Sr.mode,li),li.ref=Zi(Sr,pr,kr),li.return=Sr,li)}function Mr(Sr,pr,kr,li){return pr===null||pr.tag!==4||pr.stateNode.containerInfo!==kr.containerInfo||pr.stateNode.implementation!==kr.implementation?(pr=xh(kr,Sr.mode,li),pr.return=Sr,pr):(pr=wn(pr,kr.children||[]),pr.return=Sr,pr)}function Jr(Sr,pr,kr,li,Di){return pr===null||pr.tag!==7?(pr=ic(kr,Sr.mode,li,Di),pr.return=Sr,pr):(pr=wn(pr,kr),pr.return=Sr,pr)}function ii(Sr,pr,kr){if(typeof pr=="string"&&pr!==""||typeof pr=="number")return pr=wh(""+pr,Sr.mode,kr),pr.return=Sr,pr;if(typeof pr=="object"&&pr!==null){switch(pr.$$typeof){case fn:return kr=Od(pr.type,pr.key,pr.props,null,Sr.mode,kr),kr.ref=Zi(Sr,null,pr),kr.return=Sr,kr;case yn:return pr=xh(pr,Sr.mode,kr),pr.return=Sr,pr;case On:var li=pr._init;return ii(Sr,li(pr._payload),kr)}if(hi(pr)||Hn(pr))return pr=ic(pr,Sr.mode,kr,null),pr.return=Sr,pr;ds(Sr,pr)}return null}function Xr(Sr,pr,kr,li){var Di=pr!==null?pr.key:null;if(typeof kr=="string"&&kr!==""||typeof kr=="number")return Di!==null?null:or(Sr,pr,""+kr,li);if(typeof kr=="object"&&kr!==null){switch(kr.$$typeof){case fn:return kr.key===Di?hr(Sr,pr,kr,li):null;case yn:return kr.key===Di?Mr(Sr,pr,kr,li):null;case On:return Di=kr._init,Xr(Sr,pr,Di(kr._payload),li)}if(hi(kr)||Hn(kr))return Di!==null?null:Jr(Sr,pr,kr,li,null);ds(Sr,kr)}return null}function vi(Sr,pr,kr,li,Di){if(typeof li=="string"&&li!==""||typeof li=="number")return Sr=Sr.get(kr)||null,or(pr,Sr,""+li,Di);if(typeof li=="object"&&li!==null){switch(li.$$typeof){case fn:return Sr=Sr.get(li.key===null?kr:li.key)||null,hr(pr,Sr,li,Di);case yn:return Sr=Sr.get(li.key===null?kr:li.key)||null,Mr(pr,Sr,li,Di);case On:var qi=li._init;return vi(Sr,pr,kr,qi(li._payload),Di)}if(hi(li)||Hn(li))return Sr=Sr.get(kr)||null,Jr(pr,Sr,li,Di,null);ds(pr,li)}return null}function ki(Sr,pr,kr,li){for(var Di=null,qi=null,Wi=pr,ns=pr=0,va=null;Wi!==null&&ns<kr.length;ns++){Wi.index>ns?(va=Wi,Wi=null):va=Wi.sibling;var Cs=Xr(Sr,Wi,kr[ns],li);if(Cs===null){Wi===null&&(Wi=va);break}qe&&Wi&&Cs.alternate===null&&We(Sr,Wi),pr=Pn(Cs,pr,ns),qi===null?Di=Cs:qi.sibling=Cs,qi=Cs,Wi=va}if(ns===kr.length)return Ye(Sr,Wi),Ur&&fr(Sr,ns),Di;if(Wi===null){for(;ns<kr.length;ns++)Wi=ii(Sr,kr[ns],li),Wi!==null&&(pr=Pn(Wi,pr,ns),qi===null?Di=Wi:qi.sibling=Wi,qi=Wi);return Ur&&fr(Sr,ns),Di}for(Wi=hn(Sr,Wi);ns<kr.length;ns++)va=vi(Wi,Sr,ns,kr[ns],li),va!==null&&(qe&&va.alternate!==null&&Wi.delete(va.key===null?ns:va.key),pr=Pn(va,pr,ns),qi===null?Di=va:qi.sibling=va,qi=va);return qe&&Wi.forEach(function(ju){return We(Sr,ju)}),Ur&&fr(Sr,ns),Di}function Oi(Sr,pr,kr,li){var Di=Hn(kr);if(typeof Di!="function")throw Error(t(150));if(kr=Di.call(kr),kr==null)throw Error(t(151));for(var qi=Di=null,Wi=pr,ns=pr=0,va=null,Cs=kr.next();Wi!==null&&!Cs.done;ns++,Cs=kr.next()){Wi.index>ns?(va=Wi,Wi=null):va=Wi.sibling;var ju=Xr(Sr,Wi,Cs.value,li);if(ju===null){Wi===null&&(Wi=va);break}qe&&Wi&&ju.alternate===null&&We(Sr,Wi),pr=Pn(ju,pr,ns),qi===null?Di=ju:qi.sibling=ju,qi=ju,Wi=va}if(Cs.done)return Ye(Sr,Wi),Ur&&fr(Sr,ns),Di;if(Wi===null){for(;!Cs.done;ns++,Cs=kr.next())Cs=ii(Sr,Cs.value,li),Cs!==null&&(pr=Pn(Cs,pr,ns),qi===null?Di=Cs:qi.sibling=Cs,qi=Cs);return Ur&&fr(Sr,ns),Di}for(Wi=hn(Sr,Wi);!Cs.done;ns++,Cs=kr.next())Cs=vi(Wi,Sr,ns,Cs.value,li),Cs!==null&&(qe&&Cs.alternate!==null&&Wi.delete(Cs.key===null?ns:Cs.key),pr=Pn(Cs,pr,ns),qi===null?Di=Cs:qi.sibling=Cs,qi=Cs);return qe&&Wi.forEach(function(hp){return We(Sr,hp)}),Ur&&fr(Sr,ns),Di}function Yo(Sr,pr,kr,li){if(typeof kr=="object"&&kr!==null&&kr.type===gn&&kr.key===null&&(kr=kr.props.children),typeof kr=="object"&&kr!==null){switch(kr.$$typeof){case fn:e:{for(var Di=kr.key,qi=pr;qi!==null;){if(qi.key===Di){if(Di=kr.type,Di===gn){if(qi.tag===7){Ye(Sr,qi.sibling),pr=wn(qi,kr.props.children),pr.return=Sr,Sr=pr;break e}}else if(qi.elementType===Di||typeof Di=="object"&&Di!==null&&Di.$$typeof===On&&Ks(Di)===qi.type){Ye(Sr,qi.sibling),pr=wn(qi,kr.props),pr.ref=Zi(Sr,qi,kr),pr.return=Sr,Sr=pr;break e}Ye(Sr,qi);break}else We(Sr,qi);qi=qi.sibling}kr.type===gn?(pr=ic(kr.props.children,Sr.mode,li,kr.key),pr.return=Sr,Sr=pr):(li=Od(kr.type,kr.key,kr.props,null,Sr.mode,li),li.ref=Zi(Sr,pr,kr),li.return=Sr,Sr=li)}return Bn(Sr);case yn:e:{for(qi=kr.key;pr!==null;){if(pr.key===qi)if(pr.tag===4&&pr.stateNode.containerInfo===kr.containerInfo&&pr.stateNode.implementation===kr.implementation){Ye(Sr,pr.sibling),pr=wn(pr,kr.children||[]),pr.return=Sr,Sr=pr;break e}else{Ye(Sr,pr);break}else We(Sr,pr);pr=pr.sibling}pr=xh(kr,Sr.mode,li),pr.return=Sr,Sr=pr}return Bn(Sr);case On:return qi=kr._init,Yo(Sr,pr,qi(kr._payload),li)}if(hi(kr))return ki(Sr,pr,kr,li);if(Hn(kr))return Oi(Sr,pr,kr,li);ds(Sr,kr)}return typeof kr=="string"&&kr!==""||typeof kr=="number"?(kr=""+kr,pr!==null&&pr.tag===6?(Ye(Sr,pr.sibling),pr=wn(pr,kr),pr.return=Sr,Sr=pr):(Ye(Sr,pr),pr=wh(kr,Sr.mode,li),pr.return=Sr,Sr=pr),Bn(Sr)):Ye(Sr,pr)}return Yo}var $o=Zo(!0),fo=Zo(!1),Go=pl(null),ea=null,oo=null,vs=null;function Is(){vs=oo=ea=null}function uo(qe){var We=Go.current;Ns(Go),qe._currentValue=We}function ks(qe,We,Ye){for(;qe!==null;){var hn=qe.alternate;if((qe.childLanes&We)!==We?(qe.childLanes|=We,hn!==null&&(hn.childLanes|=We)):hn!==null&&(hn.childLanes&We)!==We&&(hn.childLanes|=We),qe===Ye)break;qe=qe.return}}function wo(qe,We){ea=qe,vs=oo=null,qe=qe.dependencies,qe!==null&&qe.firstContext!==null&&((qe.lanes&We)!==0&&(ol=!0),qe.firstContext=null)}function xo(qe){var We=qe._currentValue;if(vs!==qe)if(qe={context:qe,memoizedValue:We,next:null},oo===null){if(ea===null)throw Error(t(308));oo=qe,ea.dependencies={lanes:0,firstContext:qe}}else oo=oo.next=qe;return We}var Bs=null;function ma(qe){Bs===null?Bs=[qe]:Bs.push(qe)}function Vs(qe,We,Ye,hn){var wn=We.interleaved;return wn===null?(Ye.next=Ye,ma(We)):(Ye.next=wn.next,wn.next=Ye),We.interleaved=Ye,Us(qe,hn)}function Us(qe,We){qe.lanes|=We;var Ye=qe.alternate;for(Ye!==null&&(Ye.lanes|=We),Ye=qe,qe=qe.return;qe!==null;)qe.childLanes|=We,Ye=qe.alternate,Ye!==null&&(Ye.childLanes|=We),Ye=qe,qe=qe.return;return Ye.tag===3?Ye.stateNode:null}var Bo=!1;function aa(qe){qe.updateQueue={baseState:qe.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(qe,We){qe=qe.updateQueue,We.updateQueue===qe&&(We.updateQueue={baseState:qe.baseState,firstBaseUpdate:qe.firstBaseUpdate,lastBaseUpdate:qe.lastBaseUpdate,shared:qe.shared,effects:qe.effects})}function Ro(qe,We){return{eventTime:qe,lane:We,tag:0,payload:null,callback:null,next:null}}function Co(qe,We,Ye){var hn=qe.updateQueue;if(hn===null)return null;if(hn=hn.shared,(Rs&2)!==0){var wn=hn.pending;return wn===null?We.next=We:(We.next=wn.next,wn.next=We),hn.pending=We,Us(qe,Ye)}return wn=hn.interleaved,wn===null?(We.next=We,ma(hn)):(We.next=wn.next,wn.next=We),hn.interleaved=We,Us(qe,Ye)}function ga(qe,We,Ye){if(We=We.updateQueue,We!==null&&(We=We.shared,(Ye&4194240)!==0)){var hn=We.lanes;hn&=qe.pendingLanes,Ye|=hn,We.lanes=Ye,Oa(qe,Ye)}}function zs(qe,We){var Ye=qe.updateQueue,hn=qe.alternate;if(hn!==null&&(hn=hn.updateQueue,Ye===hn)){var wn=null,Pn=null;if(Ye=Ye.firstBaseUpdate,Ye!==null){do{var Bn={eventTime:Ye.eventTime,lane:Ye.lane,tag:Ye.tag,payload:Ye.payload,callback:Ye.callback,next:null};Pn===null?wn=Pn=Bn:Pn=Pn.next=Bn,Ye=Ye.next}while(Ye!==null);Pn===null?wn=Pn=We:Pn=Pn.next=We}else wn=Pn=We;Ye={baseState:hn.baseState,firstBaseUpdate:wn,lastBaseUpdate:Pn,shared:hn.shared,effects:hn.effects},qe.updateQueue=Ye;return}qe=Ye.lastBaseUpdate,qe===null?Ye.firstBaseUpdate=We:qe.next=We,Ye.lastBaseUpdate=We}function ya(qe,We,Ye,hn){var wn=qe.updateQueue;Bo=!1;var Pn=wn.firstBaseUpdate,Bn=wn.lastBaseUpdate,or=wn.shared.pending;if(or!==null){wn.shared.pending=null;var hr=or,Mr=hr.next;hr.next=null,Bn===null?Pn=Mr:Bn.next=Mr,Bn=hr;var Jr=qe.alternate;Jr!==null&&(Jr=Jr.updateQueue,or=Jr.lastBaseUpdate,or!==Bn&&(or===null?Jr.firstBaseUpdate=Mr:or.next=Mr,Jr.lastBaseUpdate=hr))}if(Pn!==null){var ii=wn.baseState;Bn=0,Jr=Mr=hr=null,or=Pn;do{var Xr=or.lane,vi=or.eventTime;if((hn&Xr)===Xr){Jr!==null&&(Jr=Jr.next={eventTime:vi,lane:0,tag:or.tag,payload:or.payload,callback:or.callback,next:null});e:{var ki=qe,Oi=or;switch(Xr=We,vi=Ye,Oi.tag){case 1:if(ki=Oi.payload,typeof ki=="function"){ii=ki.call(vi,ii,Xr);break e}ii=ki;break e;case 3:ki.flags=ki.flags&-65537|128;case 0:if(ki=Oi.payload,Xr=typeof ki=="function"?ki.call(vi,ii,Xr):ki,Xr==null)break e;ii=Dn({},ii,Xr);break e;case 2:Bo=!0}}or.callback!==null&&or.lane!==0&&(qe.flags|=64,Xr=wn.effects,Xr===null?wn.effects=[or]:Xr.push(or))}else vi={eventTime:vi,lane:Xr,tag:or.tag,payload:or.payload,callback:or.callback,next:null},Jr===null?(Mr=Jr=vi,hr=ii):Jr=Jr.next=vi,Bn|=Xr;if(or=or.next,or===null){if(or=wn.shared.pending,or===null)break;Xr=or,or=Xr.next,Xr.next=null,wn.lastBaseUpdate=Xr,wn.shared.pending=null}}while(!0);if(Jr===null&&(hr=ii),wn.baseState=hr,wn.firstBaseUpdate=Mr,wn.lastBaseUpdate=Jr,We=wn.shared.interleaved,We!==null){wn=We;do Bn|=wn.lane,wn=wn.next;while(wn!==We)}else Pn===null&&(wn.shared.lanes=0);ec|=Bn,qe.lanes=Bn,qe.memoizedState=ii}}function sl(qe,We,Ye){if(qe=We.effects,We.effects=null,qe!==null)for(We=0;We<qe.length;We++){var hn=qe[We],wn=hn.callback;if(wn!==null){if(hn.callback=null,hn=Ye,typeof wn!="function")throw Error(t(191,wn));wn.call(hn)}}}var ml={},ta=pl(ml),Oo=pl(ml),tu=pl(ml);function jl(qe){if(qe===ml)throw Error(t(174));return qe}function ku(qe,We){switch(Fs(tu,We),Fs(Oo,qe),Fs(ta,ml),qe=We.nodeType,qe){case 9:case 11:We=(We=We.documentElement)?We.namespaceURI:Fr(null,"");break;default:qe=qe===8?We.parentNode:We,We=qe.namespaceURI||null,qe=qe.tagName,We=Fr(We,qe)}Ns(ta),Fs(ta,We)}function Pl(){Ns(ta),Ns(Oo),Ns(tu)}function fd(qe){jl(tu.current);var We=jl(ta.current),Ye=Fr(We,qe.type);We!==Ye&&(Fs(Oo,qe),Fs(ta,Ye))}function Wc(qe){Oo.current===qe&&(Ns(ta),Ns(Oo))}var Js=pl(0);function gl(qe){for(var We=qe;We!==null;){if(We.tag===13){var Ye=We.memoizedState;if(Ye!==null&&(Ye=Ye.dehydrated,Ye===null||Ye.data==="$?"||Ye.data==="$!"))return We}else if(We.tag===19&&We.memoizedProps.revealOrder!==void 0){if((We.flags&128)!==0)return We}else if(We.child!==null){We.child.return=We,We=We.child;continue}if(We===qe)break;for(;We.sibling===null;){if(We.return===null||We.return===qe)return null;We=We.return}We.sibling.return=We.return,We=We.sibling}return null}var Hc=[];function Gc(){for(var qe=0;qe<Hc.length;qe++)Hc[qe]._workInProgressVersionPrimary=null;Hc.length=0}var gc=un.ReactCurrentDispatcher,_c=un.ReactCurrentBatchConfig,Il=0,co=null,Uo=null,No=null,Ru=!1,$l=!1,Cu=0,Hd=0;function Ko(){throw Error(t(321))}function yc(qe,We){if(We===null)return!1;for(var Ye=0;Ye<We.length&&Ye<qe.length;Ye++)if(!Ho(qe[Ye],We[Ye]))return!1;return!0}function Qu(qe,We,Ye,hn,wn,Pn){if(Il=Pn,co=We,We.memoizedState=null,We.updateQueue=null,We.lanes=0,gc.current=qe===null||qe.memoizedState===null?Vf:jf,qe=Ye(hn,wn),$l){Pn=0;do{if($l=!1,Cu=0,25<=Pn)throw Error(t(301));Pn+=1,No=Uo=null,We.updateQueue=null,gc.current=$f,qe=Ye(hn,wn)}while($l)}if(gc.current=yd,We=Uo!==null&&Uo.next!==null,Il=0,No=Uo=co=null,Ru=!1,We)throw Error(t(300));return qe}function kl(){var qe=Cu!==0;return Cu=0,qe}function _l(){var qe={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return No===null?co.memoizedState=No=qe:No=No.next=qe,No}function Ka(){if(Uo===null){var qe=co.alternate;qe=qe!==null?qe.memoizedState:null}else qe=Uo.next;var We=No===null?co.memoizedState:No.next;if(We!==null)No=We,Uo=qe;else{if(qe===null)throw Error(t(310));Uo=qe,qe={memoizedState:Uo.memoizedState,baseState:Uo.baseState,baseQueue:Uo.baseQueue,queue:Uo.queue,next:null},No===null?co.memoizedState=No=qe:No=No.next=qe}return No}function Ju(qe,We){return typeof We=="function"?We(qe):We}function bc(qe){var We=Ka(),Ye=We.queue;if(Ye===null)throw Error(t(311));Ye.lastRenderedReducer=qe;var hn=Uo,wn=hn.baseQueue,Pn=Ye.pending;if(Pn!==null){if(wn!==null){var Bn=wn.next;wn.next=Pn.next,Pn.next=Bn}hn.baseQueue=wn=Pn,Ye.pending=null}if(wn!==null){Pn=wn.next,hn=hn.baseState;var or=Bn=null,hr=null,Mr=Pn;do{var Jr=Mr.lane;if((Il&Jr)===Jr)hr!==null&&(hr=hr.next={lane:0,action:Mr.action,hasEagerState:Mr.hasEagerState,eagerState:Mr.eagerState,next:null}),hn=Mr.hasEagerState?Mr.eagerState:qe(hn,Mr.action);else{var ii={lane:Jr,action:Mr.action,hasEagerState:Mr.hasEagerState,eagerState:Mr.eagerState,next:null};hr===null?(or=hr=ii,Bn=hn):hr=hr.next=ii,co.lanes|=Jr,ec|=Jr}Mr=Mr.next}while(Mr!==null&&Mr!==Pn);hr===null?Bn=hn:hr.next=or,Ho(hn,We.memoizedState)||(ol=!0),We.memoizedState=hn,We.baseState=Bn,We.baseQueue=hr,Ye.lastRenderedState=hn}if(qe=Ye.interleaved,qe!==null){wn=qe;do Pn=wn.lane,co.lanes|=Pn,ec|=Pn,wn=wn.next;while(wn!==qe)}else wn===null&&(Ye.lanes=0);return[We.memoizedState,Ye.dispatch]}function nu(qe){var We=Ka(),Ye=We.queue;if(Ye===null)throw Error(t(311));Ye.lastRenderedReducer=qe;var hn=Ye.dispatch,wn=Ye.pending,Pn=We.memoizedState;if(wn!==null){Ye.pending=null;var Bn=wn=wn.next;do Pn=qe(Pn,Bn.action),Bn=Bn.next;while(Bn!==wn);Ho(Pn,We.memoizedState)||(ol=!0),We.memoizedState=Pn,We.baseQueue===null&&(We.baseState=Pn),Ye.lastRenderedState=Pn}return[Pn,hn]}function pd(){}function Kc(qe,We){var Ye=co,hn=Ka(),wn=We(),Pn=!Ho(hn.memoizedState,wn);if(Pn&&(hn.memoizedState=wn,ol=!0),hn=hn.queue,xc(gd.bind(null,Ye,hn,qe),[qe]),hn.getSnapshot!==We||Pn||No!==null&&No.memoizedState.tag&1){if(Ye.flags|=2048,Ya(9,Yc.bind(null,Ye,hn,wn,We),void 0,null),ba===null)throw Error(t(349));(Il&30)!==0||md(Ye,We,wn)}return wn}function md(qe,We,Ye){qe.flags|=16384,qe={getSnapshot:We,value:Ye},We=co.updateQueue,We===null?(We={lastEffect:null,stores:null},co.updateQueue=We,We.stores=[qe]):(Ye=We.stores,Ye===null?We.stores=[qe]:Ye.push(qe))}function Yc(qe,We,Ye,hn){We.value=Ye,We.getSnapshot=hn,Ou(We)&&vc(qe)}function gd(qe,We,Ye){return Ye(function(){Ou(We)&&vc(qe)})}function Ou(qe){var We=qe.getSnapshot;qe=qe.value;try{var Ye=We();return!Ho(qe,Ye)}catch{return!0}}function vc(qe){var We=Us(qe,1);We!==null&&Wl(We,qe,1,-1)}function Zu(qe){var We=_l();return typeof qe=="function"&&(qe=qe()),We.memoizedState=We.baseState=qe,qe={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:qe},We.queue=qe,qe=qe.dispatch=Ff.bind(null,co,qe),[We.memoizedState,qe]}function Ya(qe,We,Ye,hn){return qe={tag:qe,create:We,destroy:Ye,deps:hn,next:null},We=co.updateQueue,We===null?(We={lastEffect:null,stores:null},co.updateQueue=We,We.lastEffect=qe.next=qe):(Ye=We.lastEffect,Ye===null?We.lastEffect=qe.next=qe:(hn=Ye.next,Ye.next=qe,qe.next=hn,We.lastEffect=qe)),qe}function Bl(){return Ka().memoizedState}function yl(qe,We,Ye,hn){var wn=_l();co.flags|=qe,wn.memoizedState=Ya(1|We,Ye,void 0,hn===void 0?null:hn)}function mu(qe,We,Ye,hn){var wn=Ka();hn=hn===void 0?null:hn;var Pn=void 0;if(Uo!==null){var Bn=Uo.memoizedState;if(Pn=Bn.destroy,hn!==null&&yc(hn,Bn.deps)){wn.memoizedState=Ya(We,Ye,Pn,hn);return}}co.flags|=qe,wn.memoizedState=Ya(1|We,Ye,Pn,hn)}function wc(qe,We){return yl(8390656,8,qe,We)}function xc(qe,We){return mu(2048,8,qe,We)}function _d(qe,We){return mu(4,2,qe,We)}function Tc(qe,We){return mu(4,4,qe,We)}function Ec(qe,We){if(typeof We=="function")return qe=qe(),We(qe),function(){We(null)};if(We!=null)return qe=qe(),We.current=qe,function(){We.current=null}}function Ih(qe,We,Ye){return Ye=Ye!=null?Ye.concat([qe]):null,mu(4,4,Ec.bind(null,We,qe),Ye)}function Gd(){}function kh(qe,We){var Ye=Ka();We=We===void 0?null:We;var hn=Ye.memoizedState;return hn!==null&&We!==null&&yc(We,hn[1])?hn[0]:(Ye.memoizedState=[qe,We],qe)}function Rh(qe,We){var Ye=Ka();We=We===void 0?null:We;var hn=Ye.memoizedState;return hn!==null&&We!==null&&yc(We,hn[1])?hn[0]:(qe=qe(),Ye.memoizedState=[qe,We],qe)}function Ch(qe,We,Ye){return(Il&21)===0?(qe.baseState&&(qe.baseState=!1,ol=!0),qe.memoizedState=Ye):(Ho(Ye,We)||(Ye=el(),co.lanes|=Ye,ec|=Ye,qe.baseState=!0),We)}function Lf(qe,We){var Ye=os;os=Ye!==0&&4>Ye?Ye:4,qe(!0);var hn=_c.transition;_c.transition={};try{qe(!1),We()}finally{os=Ye,_c.transition=hn}}function Oh(){return Ka().memoizedState}function Df(qe,We,Ye){var hn=Du(qe);if(Ye={lane:hn,action:Ye,hasEagerState:!1,eagerState:null,next:null},Nh(qe))Mh(We,Ye);else if(Ye=Vs(qe,We,Ye,hn),Ye!==null){var wn=Qa();Wl(Ye,qe,hn,wn),Lh(Ye,We,hn)}}function Ff(qe,We,Ye){var hn=Du(qe),wn={lane:hn,action:Ye,hasEagerState:!1,eagerState:null,next:null};if(Nh(qe))Mh(We,wn);else{var Pn=qe.alternate;if(qe.lanes===0&&(Pn===null||Pn.lanes===0)&&(Pn=We.lastRenderedReducer,Pn!==null))try{var Bn=We.lastRenderedState,or=Pn(Bn,Ye);if(wn.hasEagerState=!0,wn.eagerState=or,Ho(or,Bn)){var hr=We.interleaved;hr===null?(wn.next=wn,ma(We)):(wn.next=hr.next,hr.next=wn),We.interleaved=wn;return}}catch{}finally{}Ye=Vs(qe,We,wn,hn),Ye!==null&&(wn=Qa(),Wl(Ye,qe,hn,wn),Lh(Ye,We,hn))}}function Nh(qe){var We=qe.alternate;return qe===co||We!==null&&We===co}function Mh(qe,We){$l=Ru=!0;var Ye=qe.pending;Ye===null?We.next=We:(We.next=Ye.next,Ye.next=We),qe.pending=We}function Lh(qe,We,Ye){if((Ye&4194240)!==0){var hn=We.lanes;hn&=qe.pendingLanes,Ye|=hn,We.lanes=Ye,Oa(qe,Ye)}}var yd={readContext:xo,useCallback:Ko,useContext:Ko,useEffect:Ko,useImperativeHandle:Ko,useInsertionEffect:Ko,useLayoutEffect:Ko,useMemo:Ko,useReducer:Ko,useRef:Ko,useState:Ko,useDebugValue:Ko,useDeferredValue:Ko,useTransition:Ko,useMutableSource:Ko,useSyncExternalStore:Ko,useId:Ko,unstable_isNewReconciler:!1},Vf={readContext:xo,useCallback:function(qe,We){return _l().memoizedState=[qe,We===void 0?null:We],qe},useContext:xo,useEffect:wc,useImperativeHandle:function(qe,We,Ye){return Ye=Ye!=null?Ye.concat([qe]):null,yl(4194308,4,Ec.bind(null,We,qe),Ye)},useLayoutEffect:function(qe,We){return yl(4194308,4,qe,We)},useInsertionEffect:function(qe,We){return yl(4,2,qe,We)},useMemo:function(qe,We){var Ye=_l();return We=We===void 0?null:We,qe=qe(),Ye.memoizedState=[qe,We],qe},useReducer:function(qe,We,Ye){var hn=_l();return We=Ye!==void 0?Ye(We):We,hn.memoizedState=hn.baseState=We,qe={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:We},hn.queue=qe,qe=qe.dispatch=Df.bind(null,co,qe),[hn.memoizedState,qe]},useRef:function(qe){var We=_l();return qe={current:qe},We.memoizedState=qe},useState:Zu,useDebugValue:Gd,useDeferredValue:function(qe){return _l().memoizedState=qe},useTransition:function(){var qe=Zu(!1),We=qe[0];return qe=Lf.bind(null,qe[1]),_l().memoizedState=qe,[We,qe]},useMutableSource:function(){},useSyncExternalStore:function(qe,We,Ye){var hn=co,wn=_l();if(Ur){if(Ye===void 0)throw Error(t(407));Ye=Ye()}else{if(Ye=We(),ba===null)throw Error(t(349));(Il&30)!==0||md(hn,We,Ye)}wn.memoizedState=Ye;var Pn={value:Ye,getSnapshot:We};return wn.queue=Pn,wc(gd.bind(null,hn,Pn,qe),[qe]),hn.flags|=2048,Ya(9,Yc.bind(null,hn,Pn,Ye,We),void 0,null),Ye},useId:function(){var qe=_l(),We=ba.identifierPrefix;if(Ur){var Ye=nr,hn=Ar;Ye=(hn&~(1<<32-ys(hn)-1)).toString(32)+Ye,We=":"+We+"R"+Ye,Ye=Cu++,0<Ye&&(We+="H"+Ye.toString(32)),We+=":"}else Ye=Hd++,We=":"+We+"r"+Ye.toString(32)+":";return qe.memoizedState=We},unstable_isNewReconciler:!1},jf={readContext:xo,useCallback:kh,useContext:xo,useEffect:xc,useImperativeHandle:Ih,useInsertionEffect:_d,useLayoutEffect:Tc,useMemo:Rh,useReducer:bc,useRef:Bl,useState:function(){return bc(Ju)},useDebugValue:Gd,useDeferredValue:function(qe){var We=Ka();return Ch(We,Uo.memoizedState,qe)},useTransition:function(){var qe=bc(Ju)[0],We=Ka().memoizedState;return[qe,We]},useMutableSource:pd,useSyncExternalStore:Kc,useId:Oh,unstable_isNewReconciler:!1},$f={readContext:xo,useCallback:kh,useContext:xo,useEffect:xc,useImperativeHandle:Ih,useInsertionEffect:_d,useLayoutEffect:Tc,useMemo:Rh,useReducer:nu,useRef:Bl,useState:function(){return nu(Ju)},useDebugValue:Gd,useDeferredValue:function(qe){var We=Ka();return Uo===null?We.memoizedState=qe:Ch(We,Uo.memoizedState,qe)},useTransition:function(){var qe=nu(Ju)[0],We=Ka().memoizedState;return[qe,We]},useMutableSource:pd,useSyncExternalStore:Kc,useId:Oh,unstable_isNewReconciler:!1};function Ul(qe,We){if(qe&&qe.defaultProps){We=Dn({},We),qe=qe.defaultProps;for(var Ye in qe)We[Ye]===void 0&&(We[Ye]=qe[Ye]);return We}return We}function Kd(qe,We,Ye,hn){We=qe.memoizedState,Ye=Ye(hn,We),Ye=Ye==null?We:Dn({},We,Ye),qe.memoizedState=Ye,qe.lanes===0&&(qe.updateQueue.baseState=Ye)}var bd={isMounted:function(qe){return(qe=qe._reactInternals)?ir(qe)===qe:!1},enqueueSetState:function(qe,We,Ye){qe=qe._reactInternals;var hn=Qa(),wn=Du(qe),Pn=Ro(hn,wn);Pn.payload=We,Ye!=null&&(Pn.callback=Ye),We=Co(qe,Pn,wn),We!==null&&(Wl(We,qe,wn,hn),ga(We,qe,wn))},enqueueReplaceState:function(qe,We,Ye){qe=qe._reactInternals;var hn=Qa(),wn=Du(qe),Pn=Ro(hn,wn);Pn.tag=1,Pn.payload=We,Ye!=null&&(Pn.callback=Ye),We=Co(qe,Pn,wn),We!==null&&(Wl(We,qe,wn,hn),ga(We,qe,wn))},enqueueForceUpdate:function(qe,We){qe=qe._reactInternals;var Ye=Qa(),hn=Du(qe),wn=Ro(Ye,hn);wn.tag=2,We!=null&&(wn.callback=We),We=Co(qe,wn,hn),We!==null&&(Wl(We,qe,hn,Ye),ga(We,qe,hn))}};function Dh(qe,We,Ye,hn,wn,Pn,Bn){return qe=qe.stateNode,typeof qe.shouldComponentUpdate=="function"?qe.shouldComponentUpdate(hn,Pn,Bn):We.prototype&&We.prototype.isPureReactComponent?!El(Ye,hn)||!El(wn,Pn):!0}function Fh(qe,We,Ye){var hn=!1,wn=eu,Pn=We.contextType;return typeof Pn=="object"&&Pn!==null?Pn=xo(Pn):(wn=Ua(We)?fu:oa.current,hn=We.contextTypes,Pn=(hn=hn!=null)?Iu(qe,wn):eu),We=new We(Ye,Pn),qe.memoizedState=We.state!==null&&We.state!==void 0?We.state:null,We.updater=bd,qe.stateNode=We,We._reactInternals=qe,hn&&(qe=qe.stateNode,qe.__reactInternalMemoizedUnmaskedChildContext=wn,qe.__reactInternalMemoizedMaskedChildContext=Pn),We}function Vh(qe,We,Ye,hn){qe=We.state,typeof We.componentWillReceiveProps=="function"&&We.componentWillReceiveProps(Ye,hn),typeof We.UNSAFE_componentWillReceiveProps=="function"&&We.UNSAFE_componentWillReceiveProps(Ye,hn),We.state!==qe&&bd.enqueueReplaceState(We,We.state,null)}function Yd(qe,We,Ye,hn){var wn=qe.stateNode;wn.props=Ye,wn.state=qe.memoizedState,wn.refs={},aa(qe);var Pn=We.contextType;typeof Pn=="object"&&Pn!==null?wn.context=xo(Pn):(Pn=Ua(We)?fu:oa.current,wn.context=Iu(qe,Pn)),wn.state=qe.memoizedState,Pn=We.getDerivedStateFromProps,typeof Pn=="function"&&(Kd(qe,We,Pn,Ye),wn.state=qe.memoizedState),typeof We.getDerivedStateFromProps=="function"||typeof wn.getSnapshotBeforeUpdate=="function"||typeof wn.UNSAFE_componentWillMount!="function"&&typeof wn.componentWillMount!="function"||(We=wn.state,typeof wn.componentWillMount=="function"&&wn.componentWillMount(),typeof wn.UNSAFE_componentWillMount=="function"&&wn.UNSAFE_componentWillMount(),We!==wn.state&&bd.enqueueReplaceState(wn,wn.state,null),ya(qe,Ye,wn,hn),wn.state=qe.memoizedState),typeof wn.componentDidMount=="function"&&(qe.flags|=4194308)}function Ac(qe,We){try{var Ye="",hn=We;do Ye+=Jn(hn),hn=hn.return;while(hn);var wn=Ye}catch(Pn){wn=`
Error generating stack: `+Pn.message+`
`+Pn.stack}return{value:qe,source:We,stack:wn,digest:null}}function Xd(qe,We,Ye){return{value:qe,source:null,stack:Ye??null,digest:We??null}}function Qd(qe,We){try{console.error(We.value)}catch(Ye){setTimeout(function(){throw Ye})}}var Bf=typeof WeakMap=="function"?WeakMap:Map;function jh(qe,We,Ye){Ye=Ro(-1,Ye),Ye.tag=3,Ye.payload={element:null};var hn=We.value;return Ye.callback=function(){Sd||(Sd=!0,hh=hn),Qd(qe,We)},Ye}function $h(qe,We,Ye){Ye=Ro(-1,Ye),Ye.tag=3;var hn=qe.type.getDerivedStateFromError;if(typeof hn=="function"){var wn=We.value;Ye.payload=function(){return hn(wn)},Ye.callback=function(){Qd(qe,We)}}var Pn=qe.stateNode;return Pn!==null&&typeof Pn.componentDidCatch=="function"&&(Ye.callback=function(){Qd(qe,We),typeof hn!="function"&&(Mu===null?Mu=new Set([this]):Mu.add(this));var Bn=We.stack;this.componentDidCatch(We.value,{componentStack:Bn!==null?Bn:""})}),Ye}function Bh(qe,We,Ye){var hn=qe.pingCache;if(hn===null){hn=qe.pingCache=new Bf;var wn=new Set;hn.set(We,wn)}else wn=hn.get(We),wn===void 0&&(wn=new Set,hn.set(We,wn));wn.has(Ye)||(wn.add(Ye),qe=tp.bind(null,qe,We,Ye),We.then(qe,qe))}function Uh(qe){do{var We;if((We=qe.tag===13)&&(We=qe.memoizedState,We=We!==null?We.dehydrated!==null:!0),We)return qe;qe=qe.return}while(qe!==null);return null}function zh(qe,We,Ye,hn,wn){return(qe.mode&1)===0?(qe===We?qe.flags|=65536:(qe.flags|=128,Ye.flags|=131072,Ye.flags&=-52805,Ye.tag===1&&(Ye.alternate===null?Ye.tag=17:(We=Ro(-1,1),We.tag=2,Co(Ye,We,1))),Ye.lanes|=1),qe):(qe.flags|=65536,qe.lanes=wn,qe)}var Uf=un.ReactCurrentOwner,ol=!1;function Xa(qe,We,Ye,hn){We.child=qe===null?fo(We,null,Ye,hn):$o(We,qe.child,Ye,hn)}function qh(qe,We,Ye,hn,wn){Ye=Ye.render;var Pn=We.ref;return wo(We,wn),hn=Qu(qe,We,Ye,hn,Pn,wn),Ye=kl(),qe!==null&&!ol?(We.updateQueue=qe.updateQueue,We.flags&=-2053,qe.lanes&=~wn,gu(qe,We,wn)):(Ur&&Ye&&jr(We),We.flags|=1,Xa(qe,We,hn,wn),We.child)}function Wh(qe,We,Ye,hn,wn){if(qe===null){var Pn=Ye.type;return typeof Pn=="function"&&!bh(Pn)&&Pn.defaultProps===void 0&&Ye.compare===null&&Ye.defaultProps===void 0?(We.tag=15,We.type=Pn,Hh(qe,We,Pn,hn,wn)):(qe=Od(Ye.type,null,hn,We,We.mode,wn),qe.ref=We.ref,qe.return=We,We.child=qe)}if(Pn=qe.child,(qe.lanes&wn)===0){var Bn=Pn.memoizedProps;if(Ye=Ye.compare,Ye=Ye!==null?Ye:El,Ye(Bn,hn)&&qe.ref===We.ref)return gu(qe,We,wn)}return We.flags|=1,qe=Vu(Pn,hn),qe.ref=We.ref,qe.return=We,We.child=qe}function Hh(qe,We,Ye,hn,wn){if(qe!==null){var Pn=qe.memoizedProps;if(El(Pn,hn)&&qe.ref===We.ref)if(ol=!1,We.pendingProps=hn=Pn,(qe.lanes&wn)!==0)(qe.flags&131072)!==0&&(ol=!0);else return We.lanes=qe.lanes,gu(qe,We,wn)}return Jd(qe,We,Ye,hn,wn)}function Gh(qe,We,Ye){var hn=We.pendingProps,wn=hn.children,Pn=qe!==null?qe.memoizedState:null;if(hn.mode==="hidden")if((We.mode&1)===0)We.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fs(Pc,bl),bl|=Ye;else{if((Ye&1073741824)===0)return qe=Pn!==null?Pn.baseLanes|Ye:Ye,We.lanes=We.childLanes=1073741824,We.memoizedState={baseLanes:qe,cachePool:null,transitions:null},We.updateQueue=null,Fs(Pc,bl),bl|=qe,null;We.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn=Pn!==null?Pn.baseLanes:Ye,Fs(Pc,bl),bl|=hn}else Pn!==null?(hn=Pn.baseLanes|Ye,We.memoizedState=null):hn=Ye,Fs(Pc,bl),bl|=hn;return Xa(qe,We,wn,Ye),We.child}function Kh(qe,We){var Ye=We.ref;(qe===null&&Ye!==null||qe!==null&&qe.ref!==Ye)&&(We.flags|=512,We.flags|=2097152)}function Jd(qe,We,Ye,hn,wn){var Pn=Ua(Ye)?fu:oa.current;return Pn=Iu(We,Pn),wo(We,wn),Ye=Qu(qe,We,Ye,hn,Pn,wn),hn=kl(),qe!==null&&!ol?(We.updateQueue=qe.updateQueue,We.flags&=-2053,qe.lanes&=~wn,gu(qe,We,wn)):(Ur&&hn&&jr(We),We.flags|=1,Xa(qe,We,Ye,wn),We.child)}function Yh(qe,We,Ye,hn,wn){if(Ua(Ye)){var Pn=!0;pu(We)}else Pn=!1;if(wo(We,wn),We.stateNode===null)wd(qe,We),Fh(We,Ye,hn),Yd(We,Ye,hn,wn),hn=!0;else if(qe===null){var Bn=We.stateNode,or=We.memoizedProps;Bn.props=or;var hr=Bn.context,Mr=Ye.contextType;typeof Mr=="object"&&Mr!==null?Mr=xo(Mr):(Mr=Ua(Ye)?fu:oa.current,Mr=Iu(We,Mr));var Jr=Ye.getDerivedStateFromProps,ii=typeof Jr=="function"||typeof Bn.getSnapshotBeforeUpdate=="function";ii||typeof Bn.UNSAFE_componentWillReceiveProps!="function"&&typeof Bn.componentWillReceiveProps!="function"||(or!==hn||hr!==Mr)&&Vh(We,Bn,hn,Mr),Bo=!1;var Xr=We.memoizedState;Bn.state=Xr,ya(We,hn,Bn,wn),hr=We.memoizedState,or!==hn||Xr!==hr||Ba.current||Bo?(typeof Jr=="function"&&(Kd(We,Ye,Jr,hn),hr=We.memoizedState),(or=Bo||Dh(We,Ye,or,hn,Xr,hr,Mr))?(ii||typeof Bn.UNSAFE_componentWillMount!="function"&&typeof Bn.componentWillMount!="function"||(typeof Bn.componentWillMount=="function"&&Bn.componentWillMount(),typeof Bn.UNSAFE_componentWillMount=="function"&&Bn.UNSAFE_componentWillMount()),typeof Bn.componentDidMount=="function"&&(We.flags|=4194308)):(typeof Bn.componentDidMount=="function"&&(We.flags|=4194308),We.memoizedProps=hn,We.memoizedState=hr),Bn.props=hn,Bn.state=hr,Bn.context=Mr,hn=or):(typeof Bn.componentDidMount=="function"&&(We.flags|=4194308),hn=!1)}else{Bn=We.stateNode,za(qe,We),or=We.memoizedProps,Mr=We.type===We.elementType?or:Ul(We.type,or),Bn.props=Mr,ii=We.pendingProps,Xr=Bn.context,hr=Ye.contextType,typeof hr=="object"&&hr!==null?hr=xo(hr):(hr=Ua(Ye)?fu:oa.current,hr=Iu(We,hr));var vi=Ye.getDerivedStateFromProps;(Jr=typeof vi=="function"||typeof Bn.getSnapshotBeforeUpdate=="function")||typeof Bn.UNSAFE_componentWillReceiveProps!="function"&&typeof Bn.componentWillReceiveProps!="function"||(or!==ii||Xr!==hr)&&Vh(We,Bn,hn,hr),Bo=!1,Xr=We.memoizedState,Bn.state=Xr,ya(We,hn,Bn,wn);var ki=We.memoizedState;or!==ii||Xr!==ki||Ba.current||Bo?(typeof vi=="function"&&(Kd(We,Ye,vi,hn),ki=We.memoizedState),(Mr=Bo||Dh(We,Ye,Mr,hn,Xr,ki,hr)||!1)?(Jr||typeof Bn.UNSAFE_componentWillUpdate!="function"&&typeof Bn.componentWillUpdate!="function"||(typeof Bn.componentWillUpdate=="function"&&Bn.componentWillUpdate(hn,ki,hr),typeof Bn.UNSAFE_componentWillUpdate=="function"&&Bn.UNSAFE_componentWillUpdate(hn,ki,hr)),typeof Bn.componentDidUpdate=="function"&&(We.flags|=4),typeof Bn.getSnapshotBeforeUpdate=="function"&&(We.flags|=1024)):(typeof Bn.componentDidUpdate!="function"||or===qe.memoizedProps&&Xr===qe.memoizedState||(We.flags|=4),typeof Bn.getSnapshotBeforeUpdate!="function"||or===qe.memoizedProps&&Xr===qe.memoizedState||(We.flags|=1024),We.memoizedProps=hn,We.memoizedState=ki),Bn.props=hn,Bn.state=ki,Bn.context=hr,hn=Mr):(typeof Bn.componentDidUpdate!="function"||or===qe.memoizedProps&&Xr===qe.memoizedState||(We.flags|=4),typeof Bn.getSnapshotBeforeUpdate!="function"||or===qe.memoizedProps&&Xr===qe.memoizedState||(We.flags|=1024),hn=!1)}return Zd(qe,We,Ye,hn,Pn,wn)}function Zd(qe,We,Ye,hn,wn,Pn){Kh(qe,We);var Bn=(We.flags&128)!==0;if(!hn&&!Bn)return wn&&hd(We,Ye,!1),gu(qe,We,Pn);hn=We.stateNode,Uf.current=We;var or=Bn&&typeof Ye.getDerivedStateFromError!="function"?null:hn.render();return We.flags|=1,qe!==null&&Bn?(We.child=$o(We,qe.child,null,Pn),We.child=$o(We,null,or,Pn)):Xa(qe,We,or,Pn),We.memoizedState=hn.state,wn&&hd(We,Ye,!0),We.child}function Xh(qe){var We=qe.stateNode;We.pendingContext?dd(qe,We.pendingContext,We.pendingContext!==We.context):We.context&&dd(qe,We.context,!1),ku(qe,We.containerInfo)}function Qh(qe,We,Ye,hn,wn){return Ei(),di(wn),We.flags|=256,Xa(qe,We,Ye,hn),We.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(qe){return{baseLanes:qe,cachePool:null,transitions:null}}function Jh(qe,We,Ye){var hn=We.pendingProps,wn=Js.current,Pn=!1,Bn=(We.flags&128)!==0,or;if((or=Bn)||(or=qe!==null&&qe.memoizedState===null?!1:(wn&2)!==0),or?(Pn=!0,We.flags&=-129):(qe===null||qe.memoizedState!==null)&&(wn|=1),Fs(Js,wn&1),qe===null)return Pi(We),qe=We.memoizedState,qe!==null&&(qe=qe.dehydrated,qe!==null)?((We.mode&1)===0?We.lanes=1:qe.data==="$!"?We.lanes=8:We.lanes=1073741824,null):(Bn=hn.children,qe=hn.fallback,Pn?(hn=We.mode,Pn=We.child,Bn={mode:"hidden",children:Bn},(hn&1)===0&&Pn!==null?(Pn.childLanes=0,Pn.pendingProps=Bn):Pn=Nd(Bn,hn,0,null),qe=ic(qe,hn,Ye,null),Pn.return=We,qe.return=We,Pn.sibling=qe,We.child=Pn,We.child.memoizedState=th(Ye),We.memoizedState=eh,qe):nh(We,Bn));if(wn=qe.memoizedState,wn!==null&&(or=wn.dehydrated,or!==null))return zf(qe,We,Bn,hn,or,wn,Ye);if(Pn){Pn=hn.fallback,Bn=We.mode,wn=qe.child,or=wn.sibling;var hr={mode:"hidden",children:hn.children};return(Bn&1)===0&&We.child!==wn?(hn=We.child,hn.childLanes=0,hn.pendingProps=hr,We.deletions=null):(hn=Vu(wn,hr),hn.subtreeFlags=wn.subtreeFlags&14680064),or!==null?Pn=Vu(or,Pn):(Pn=ic(Pn,Bn,Ye,null),Pn.flags|=2),Pn.return=We,hn.return=We,hn.sibling=Pn,We.child=hn,hn=Pn,Pn=We.child,Bn=qe.child.memoizedState,Bn=Bn===null?th(Ye):{baseLanes:Bn.baseLanes|Ye,cachePool:null,transitions:Bn.transitions},Pn.memoizedState=Bn,Pn.childLanes=qe.childLanes&~Ye,We.memoizedState=eh,hn}return Pn=qe.child,qe=Pn.sibling,hn=Vu(Pn,{mode:"visible",children:hn.children}),(We.mode&1)===0&&(hn.lanes=Ye),hn.return=We,hn.sibling=null,qe!==null&&(Ye=We.deletions,Ye===null?(We.deletions=[qe],We.flags|=16):Ye.push(qe)),We.child=hn,We.memoizedState=null,hn}function nh(qe,We){return We=Nd({mode:"visible",children:We},qe.mode,0,null),We.return=qe,qe.child=We}function vd(qe,We,Ye,hn){return hn!==null&&di(hn),$o(We,qe.child,null,Ye),qe=nh(We,We.pendingProps.children),qe.flags|=2,We.memoizedState=null,qe}function zf(qe,We,Ye,hn,wn,Pn,Bn){if(Ye)return We.flags&256?(We.flags&=-257,hn=Xd(Error(t(422))),vd(qe,We,Bn,hn)):We.memoizedState!==null?(We.child=qe.child,We.flags|=128,null):(Pn=hn.fallback,wn=We.mode,hn=Nd({mode:"visible",children:hn.children},wn,0,null),Pn=ic(Pn,wn,Bn,null),Pn.flags|=2,hn.return=We,Pn.return=We,hn.sibling=Pn,We.child=hn,(We.mode&1)!==0&&$o(We,qe.child,null,Bn),We.child.memoizedState=th(Bn),We.memoizedState=eh,Pn);if((We.mode&1)===0)return vd(qe,We,Bn,null);if(wn.data==="$!"){if(hn=wn.nextSibling&&wn.nextSibling.dataset,hn)var or=hn.dgst;return hn=or,Pn=Error(t(419)),hn=Xd(Pn,hn,void 0),vd(qe,We,Bn,hn)}if(or=(Bn&qe.childLanes)!==0,ol||or){if(hn=ba,hn!==null){switch(Bn&-Bn){case 4:wn=2;break;case 16:wn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:wn=32;break;case 536870912:wn=268435456;break;default:wn=0}wn=(wn&(hn.suspendedLanes|Bn))!==0?0:wn,wn!==0&&wn!==Pn.retryLane&&(Pn.retryLane=wn,Us(qe,wn),Wl(hn,qe,wn,-1))}return yh(),hn=Xd(Error(t(421))),vd(qe,We,Bn,hn)}return wn.data==="$?"?(We.flags|=128,We.child=qe.child,We=np.bind(null,qe),wn._reactRetry=We,null):(qe=Pn.treeContext,Vr=Ia(wn.nextSibling),Dr=We,Ur=!0,qr=null,qe!==null&&(Qn[er++]=Ar,Qn[er++]=nr,Qn[er++]=dr,Ar=qe.id,nr=qe.overflow,dr=We),We=nh(We,hn.children),We.flags|=4096,We)}function Zh(qe,We,Ye){qe.lanes|=We;var hn=qe.alternate;hn!==null&&(hn.lanes|=We),ks(qe.return,We,Ye)}function rh(qe,We,Ye,hn,wn){var Pn=qe.memoizedState;Pn===null?qe.memoizedState={isBackwards:We,rendering:null,renderingStartTime:0,last:hn,tail:Ye,tailMode:wn}:(Pn.isBackwards=We,Pn.rendering=null,Pn.renderingStartTime=0,Pn.last=hn,Pn.tail=Ye,Pn.tailMode=wn)}function ef(qe,We,Ye){var hn=We.pendingProps,wn=hn.revealOrder,Pn=hn.tail;if(Xa(qe,We,hn.children,Ye),hn=Js.current,(hn&2)!==0)hn=hn&1|2,We.flags|=128;else{if(qe!==null&&(qe.flags&128)!==0)e:for(qe=We.child;qe!==null;){if(qe.tag===13)qe.memoizedState!==null&&Zh(qe,Ye,We);else if(qe.tag===19)Zh(qe,Ye,We);else if(qe.child!==null){qe.child.return=qe,qe=qe.child;continue}if(qe===We)break e;for(;qe.sibling===null;){if(qe.return===null||qe.return===We)break e;qe=qe.return}qe.sibling.return=qe.return,qe=qe.sibling}hn&=1}if(Fs(Js,hn),(We.mode&1)===0)We.memoizedState=null;else switch(wn){case"forwards":for(Ye=We.child,wn=null;Ye!==null;)qe=Ye.alternate,qe!==null&&gl(qe)===null&&(wn=Ye),Ye=Ye.sibling;Ye=wn,Ye===null?(wn=We.child,We.child=null):(wn=Ye.sibling,Ye.sibling=null),rh(We,!1,wn,Ye,Pn);break;case"backwards":for(Ye=null,wn=We.child,We.child=null;wn!==null;){if(qe=wn.alternate,qe!==null&&gl(qe)===null){We.child=wn;break}qe=wn.sibling,wn.sibling=Ye,Ye=wn,wn=qe}rh(We,!0,Ye,null,Pn);break;case"together":rh(We,!1,null,null,void 0);break;default:We.memoizedState=null}return We.child}function wd(qe,We){(We.mode&1)===0&&qe!==null&&(qe.alternate=null,We.alternate=null,We.flags|=2)}function gu(qe,We,Ye){if(qe!==null&&(We.dependencies=qe.dependencies),ec|=We.lanes,(Ye&We.childLanes)===0)return null;if(qe!==null&&We.child!==qe.child)throw Error(t(153));if(We.child!==null){for(qe=We.child,Ye=Vu(qe,qe.pendingProps),We.child=Ye,Ye.return=We;qe.sibling!==null;)qe=qe.sibling,Ye=Ye.sibling=Vu(qe,qe.pendingProps),Ye.return=We;Ye.sibling=null}return We.child}function qf(qe,We,Ye){switch(We.tag){case 3:Xh(We),Ei();break;case 5:fd(We);break;case 1:Ua(We.type)&&pu(We);break;case 4:ku(We,We.stateNode.containerInfo);break;case 10:var hn=We.type._context,wn=We.memoizedProps.value;Fs(Go,hn._currentValue),hn._currentValue=wn;break;case 13:if(hn=We.memoizedState,hn!==null)return hn.dehydrated!==null?(Fs(Js,Js.current&1),We.flags|=128,null):(Ye&We.child.childLanes)!==0?Jh(qe,We,Ye):(Fs(Js,Js.current&1),qe=gu(qe,We,Ye),qe!==null?qe.sibling:null);Fs(Js,Js.current&1);break;case 19:if(hn=(Ye&We.childLanes)!==0,(qe.flags&128)!==0){if(hn)return ef(qe,We,Ye);We.flags|=128}if(wn=We.memoizedState,wn!==null&&(wn.rendering=null,wn.tail=null,wn.lastEffect=null),Fs(Js,Js.current),hn)break;return null;case 22:case 23:return We.lanes=0,Gh(qe,We,Ye)}return gu(qe,We,Ye)}var tf,ih,nf,rf;tf=function(qe,We){for(var Ye=We.child;Ye!==null;){if(Ye.tag===5||Ye.tag===6)qe.appendChild(Ye.stateNode);else if(Ye.tag!==4&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===We)break;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===We)return;Ye=Ye.return}Ye.sibling.return=Ye.return,Ye=Ye.sibling}},ih=function(){},nf=function(qe,We,Ye,hn){var wn=qe.memoizedProps;if(wn!==hn){qe=We.stateNode,jl(ta.current);var Pn=null;switch(Ye){case"input":wn=Tr(qe,wn),hn=Tr(qe,hn),Pn=[];break;case"select":wn=Dn({},wn,{value:void 0}),hn=Dn({},hn,{value:void 0}),Pn=[];break;case"textarea":wn=gi(qe,wn),hn=gi(qe,hn),Pn=[];break;default:typeof wn.onClick!="function"&&typeof hn.onClick=="function"&&(qe.onclick=Au)}Ui(Ye,hn);var Bn;Ye=null;for(Mr in wn)if(!hn.hasOwnProperty(Mr)&&wn.hasOwnProperty(Mr)&&wn[Mr]!=null)if(Mr==="style"){var or=wn[Mr];for(Bn in or)or.hasOwnProperty(Bn)&&(Ye||(Ye={}),Ye[Bn]="")}else Mr!=="dangerouslySetInnerHTML"&&Mr!=="children"&&Mr!=="suppressContentEditableWarning"&&Mr!=="suppressHydrationWarning"&&Mr!=="autoFocus"&&(Ee.hasOwnProperty(Mr)?Pn||(Pn=[]):(Pn=Pn||[]).push(Mr,null));for(Mr in hn){var hr=hn[Mr];if(or=wn?.[Mr],hn.hasOwnProperty(Mr)&&hr!==or&&(hr!=null||or!=null))if(Mr==="style")if(or){for(Bn in or)!or.hasOwnProperty(Bn)||hr&&hr.hasOwnProperty(Bn)||(Ye||(Ye={}),Ye[Bn]="");for(Bn in hr)hr.hasOwnProperty(Bn)&&or[Bn]!==hr[Bn]&&(Ye||(Ye={}),Ye[Bn]=hr[Bn])}else Ye||(Pn||(Pn=[]),Pn.push(Mr,Ye)),Ye=hr;else Mr==="dangerouslySetInnerHTML"?(hr=hr?hr.__html:void 0,or=or?or.__html:void 0,hr!=null&&or!==hr&&(Pn=Pn||[]).push(Mr,hr)):Mr==="children"?typeof hr!="string"&&typeof hr!="number"||(Pn=Pn||[]).push(Mr,""+hr):Mr!=="suppressContentEditableWarning"&&Mr!=="suppressHydrationWarning"&&(Ee.hasOwnProperty(Mr)?(hr!=null&&Mr==="onScroll"&&$s("scroll",qe),Pn||or===hr||(Pn=[])):(Pn=Pn||[]).push(Mr,hr))}Ye&&(Pn=Pn||[]).push("style",Ye);var Mr=Pn;(We.updateQueue=Mr)&&(We.flags|=4)}},rf=function(qe,We,Ye,hn){Ye!==hn&&(We.flags|=4)};function Xc(qe,We){if(!Ur)switch(qe.tailMode){case"hidden":We=qe.tail;for(var Ye=null;We!==null;)We.alternate!==null&&(Ye=We),We=We.sibling;Ye===null?qe.tail=null:Ye.sibling=null;break;case"collapsed":Ye=qe.tail;for(var hn=null;Ye!==null;)Ye.alternate!==null&&(hn=Ye),Ye=Ye.sibling;hn===null?We||qe.tail===null?qe.tail=null:qe.tail.sibling=null:hn.sibling=null}}function qa(qe){var We=qe.alternate!==null&&qe.alternate.child===qe.child,Ye=0,hn=0;if(We)for(var wn=qe.child;wn!==null;)Ye|=wn.lanes|wn.childLanes,hn|=wn.subtreeFlags&14680064,hn|=wn.flags&14680064,wn.return=qe,wn=wn.sibling;else for(wn=qe.child;wn!==null;)Ye|=wn.lanes|wn.childLanes,hn|=wn.subtreeFlags,hn|=wn.flags,wn.return=qe,wn=wn.sibling;return qe.subtreeFlags|=hn,qe.childLanes=Ye,We}function Wf(qe,We,Ye){var hn=We.pendingProps;switch(Pr(We),We.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(We),null;case 1:return Ua(We.type)&&mc(),qa(We),null;case 3:return hn=We.stateNode,Pl(),Ns(Ba),Ns(oa),Gc(),hn.pendingContext&&(hn.context=hn.pendingContext,hn.pendingContext=null),(qe===null||qe.child===null)&&(vo(We)?We.flags|=4:qe===null||qe.memoizedState.isDehydrated&&(We.flags&256)===0||(We.flags|=1024,qr!==null&&(mh(qr),qr=null))),ih(qe,We),qa(We),null;case 5:Wc(We);var wn=jl(tu.current);if(Ye=We.type,qe!==null&&We.stateNode!=null)nf(qe,We,Ye,hn,wn),qe.ref!==We.ref&&(We.flags|=512,We.flags|=2097152);else{if(!hn){if(We.stateNode===null)throw Error(t(166));return qa(We),null}if(qe=jl(ta.current),vo(We)){hn=We.stateNode,Ye=We.type;var Pn=We.memoizedProps;switch(hn[Sl]=We,hn[Su]=Pn,qe=(We.mode&1)!==0,Ye){case"dialog":$s("cancel",hn),$s("close",hn);break;case"iframe":case"object":case"embed":$s("load",hn);break;case"video":case"audio":for(wn=0;wn<Jl.length;wn++)$s(Jl[wn],hn);break;case"source":$s("error",hn);break;case"img":case"image":case"link":$s("error",hn),$s("load",hn);break;case"details":$s("toggle",hn);break;case"input":rr(hn,Pn),$s("invalid",hn);break;case"select":hn._wrapperState={wasMultiple:!!Pn.multiple},$s("invalid",hn);break;case"textarea":mi(hn,Pn),$s("invalid",hn)}Ui(Ye,Pn),wn=null;for(var Bn in Pn)if(Pn.hasOwnProperty(Bn)){var or=Pn[Bn];Bn==="children"?typeof or=="string"?hn.textContent!==or&&(Pn.suppressHydrationWarning!==!0&&pc(hn.textContent,or,qe),wn=["children",or]):typeof or=="number"&&hn.textContent!==""+or&&(Pn.suppressHydrationWarning!==!0&&pc(hn.textContent,or,qe),wn=["children",""+or]):Ee.hasOwnProperty(Bn)&&or!=null&&Bn==="onScroll"&&$s("scroll",hn)}switch(Ye){case"input":$r(hn),bi(hn,Pn,!0);break;case"textarea":$r(hn),oi(hn);break;case"select":case"option":break;default:typeof Pn.onClick=="function"&&(hn.onclick=Au)}hn=wn,We.updateQueue=hn,hn!==null&&(We.flags|=4)}else{Bn=wn.nodeType===9?wn:wn.ownerDocument,qe==="http://www.w3.org/1999/xhtml"&&(qe=yr(Ye)),qe==="http://www.w3.org/1999/xhtml"?Ye==="script"?(qe=Bn.createElement("div"),qe.innerHTML="<script><\/script>",qe=qe.removeChild(qe.firstChild)):typeof hn.is=="string"?qe=Bn.createElement(Ye,{is:hn.is}):(qe=Bn.createElement(Ye),Ye==="select"&&(Bn=qe,hn.multiple?Bn.multiple=!0:hn.size&&(Bn.size=hn.size))):qe=Bn.createElementNS(qe,Ye),qe[Sl]=We,qe[Su]=hn,tf(qe,We,!1,!1),We.stateNode=qe;e:{switch(Bn=wi(Ye,hn),Ye){case"dialog":$s("cancel",qe),$s("close",qe),wn=hn;break;case"iframe":case"object":case"embed":$s("load",qe),wn=hn;break;case"video":case"audio":for(wn=0;wn<Jl.length;wn++)$s(Jl[wn],qe);wn=hn;break;case"source":$s("error",qe),wn=hn;break;case"img":case"image":case"link":$s("error",qe),$s("load",qe),wn=hn;break;case"details":$s("toggle",qe),wn=hn;break;case"input":rr(qe,hn),wn=Tr(qe,hn),$s("invalid",qe);break;case"option":wn=hn;break;case"select":qe._wrapperState={wasMultiple:!!hn.multiple},wn=Dn({},hn,{value:void 0}),$s("invalid",qe);break;case"textarea":mi(qe,hn),wn=gi(qe,hn),$s("invalid",qe);break;default:wn=hn}Ui(Ye,wn),or=wn;for(Pn in or)if(or.hasOwnProperty(Pn)){var hr=or[Pn];Pn==="style"?zr(qe,hr):Pn==="dangerouslySetInnerHTML"?(hr=hr?hr.__html:void 0,hr!=null&&Kr(qe,hr)):Pn==="children"?typeof hr=="string"?(Ye!=="textarea"||hr!=="")&&si(qe,hr):typeof hr=="number"&&si(qe,""+hr):Pn!=="suppressContentEditableWarning"&&Pn!=="suppressHydrationWarning"&&Pn!=="autoFocus"&&(Ee.hasOwnProperty(Pn)?hr!=null&&Pn==="onScroll"&&$s("scroll",qe):hr!=null&&Je(qe,Pn,hr,Bn))}switch(Ye){case"input":$r(qe),bi(qe,hn,!1);break;case"textarea":$r(qe),oi(qe);break;case"option":hn.value!=null&&qe.setAttribute("value",""+mr(hn.value));break;case"select":qe.multiple=!!hn.multiple,Pn=hn.value,Pn!=null?ei(qe,!!hn.multiple,Pn,!1):hn.defaultValue!=null&&ei(qe,!!hn.multiple,hn.defaultValue,!0);break;default:typeof wn.onClick=="function"&&(qe.onclick=Au)}switch(Ye){case"button":case"input":case"select":case"textarea":hn=!!hn.autoFocus;break e;case"img":hn=!0;break e;default:hn=!1}}hn&&(We.flags|=4)}We.ref!==null&&(We.flags|=512,We.flags|=2097152)}return qa(We),null;case 6:if(qe&&We.stateNode!=null)rf(qe,We,qe.memoizedProps,hn);else{if(typeof hn!="string"&&We.stateNode===null)throw Error(t(166));if(Ye=jl(tu.current),jl(ta.current),vo(We)){if(hn=We.stateNode,Ye=We.memoizedProps,hn[Sl]=We,(Pn=hn.nodeValue!==Ye)&&(qe=Dr,qe!==null))switch(qe.tag){case 3:pc(hn.nodeValue,Ye,(qe.mode&1)!==0);break;case 5:qe.memoizedProps.suppressHydrationWarning!==!0&&pc(hn.nodeValue,Ye,(qe.mode&1)!==0)}Pn&&(We.flags|=4)}else hn=(Ye.nodeType===9?Ye:Ye.ownerDocument).createTextNode(hn),hn[Sl]=We,We.stateNode=hn}return qa(We),null;case 13:if(Ns(Js),hn=We.memoizedState,qe===null||qe.memoizedState!==null&&qe.memoizedState.dehydrated!==null){if(Ur&&Vr!==null&&(We.mode&1)!==0&&(We.flags&128)===0)ls(),Ei(),We.flags|=98560,Pn=!1;else if(Pn=vo(We),hn!==null&&hn.dehydrated!==null){if(qe===null){if(!Pn)throw Error(t(318));if(Pn=We.memoizedState,Pn=Pn!==null?Pn.dehydrated:null,!Pn)throw Error(t(317));Pn[Sl]=We}else Ei(),(We.flags&128)===0&&(We.memoizedState=null),We.flags|=4;qa(We),Pn=!1}else qr!==null&&(mh(qr),qr=null),Pn=!0;if(!Pn)return We.flags&65536?We:null}return(We.flags&128)!==0?(We.lanes=Ye,We):(hn=hn!==null,hn!==(qe!==null&&qe.memoizedState!==null)&&hn&&(We.child.flags|=8192,(We.mode&1)!==0&&(qe===null||(Js.current&1)!==0?la===0&&(la=3):yh())),We.updateQueue!==null&&(We.flags|=4),qa(We),null);case 4:return Pl(),ih(qe,We),qe===null&&uu(We.stateNode.containerInfo),qa(We),null;case 10:return uo(We.type._context),qa(We),null;case 17:return Ua(We.type)&&mc(),qa(We),null;case 19:if(Ns(Js),Pn=We.memoizedState,Pn===null)return qa(We),null;if(hn=(We.flags&128)!==0,Bn=Pn.rendering,Bn===null)if(hn)Xc(Pn,!1);else{if(la!==0||qe!==null&&(qe.flags&128)!==0)for(qe=We.child;qe!==null;){if(Bn=gl(qe),Bn!==null){for(We.flags|=128,Xc(Pn,!1),hn=Bn.updateQueue,hn!==null&&(We.updateQueue=hn,We.flags|=4),We.subtreeFlags=0,hn=Ye,Ye=We.child;Ye!==null;)Pn=Ye,qe=hn,Pn.flags&=14680066,Bn=Pn.alternate,Bn===null?(Pn.childLanes=0,Pn.lanes=qe,Pn.child=null,Pn.subtreeFlags=0,Pn.memoizedProps=null,Pn.memoizedState=null,Pn.updateQueue=null,Pn.dependencies=null,Pn.stateNode=null):(Pn.childLanes=Bn.childLanes,Pn.lanes=Bn.lanes,Pn.child=Bn.child,Pn.subtreeFlags=0,Pn.deletions=null,Pn.memoizedProps=Bn.memoizedProps,Pn.memoizedState=Bn.memoizedState,Pn.updateQueue=Bn.updateQueue,Pn.type=Bn.type,qe=Bn.dependencies,Pn.dependencies=qe===null?null:{lanes:qe.lanes,firstContext:qe.firstContext}),Ye=Ye.sibling;return Fs(Js,Js.current&1|2),We.child}qe=qe.sibling}Pn.tail!==null&&Gi()>Ic&&(We.flags|=128,hn=!0,Xc(Pn,!1),We.lanes=4194304)}else{if(!hn)if(qe=gl(Bn),qe!==null){if(We.flags|=128,hn=!0,Ye=qe.updateQueue,Ye!==null&&(We.updateQueue=Ye,We.flags|=4),Xc(Pn,!0),Pn.tail===null&&Pn.tailMode==="hidden"&&!Bn.alternate&&!Ur)return qa(We),null}else 2*Gi()-Pn.renderingStartTime>Ic&&Ye!==1073741824&&(We.flags|=128,hn=!0,Xc(Pn,!1),We.lanes=4194304);Pn.isBackwards?(Bn.sibling=We.child,We.child=Bn):(Ye=Pn.last,Ye!==null?Ye.sibling=Bn:We.child=Bn,Pn.last=Bn)}return Pn.tail!==null?(We=Pn.tail,Pn.rendering=We,Pn.tail=We.sibling,Pn.renderingStartTime=Gi(),We.sibling=null,Ye=Js.current,Fs(Js,hn?Ye&1|2:Ye&1),We):(qa(We),null);case 22:case 23:return _h(),hn=We.memoizedState!==null,qe!==null&&qe.memoizedState!==null!==hn&&(We.flags|=8192),hn&&(We.mode&1)!==0?(bl&1073741824)!==0&&(qa(We),We.subtreeFlags&6&&(We.flags|=8192)):qa(We),null;case 24:return null;case 25:return null}throw Error(t(156,We.tag))}function Hf(qe,We){switch(Pr(We),We.tag){case 1:return Ua(We.type)&&mc(),qe=We.flags,qe&65536?(We.flags=qe&-65537|128,We):null;case 3:return Pl(),Ns(Ba),Ns(oa),Gc(),qe=We.flags,(qe&65536)!==0&&(qe&128)===0?(We.flags=qe&-65537|128,We):null;case 5:return Wc(We),null;case 13:if(Ns(Js),qe=We.memoizedState,qe!==null&&qe.dehydrated!==null){if(We.alternate===null)throw Error(t(340));Ei()}return qe=We.flags,qe&65536?(We.flags=qe&-65537|128,We):null;case 19:return Ns(Js),null;case 4:return Pl(),null;case 10:return uo(We.type._context),null;case 22:case 23:return _h(),null;case 24:return null;default:return null}}var xd=!1,Wa=!1,Gf=typeof WeakSet=="function"?WeakSet:Set,Si=null;function Sc(qe,We){var Ye=qe.ref;if(Ye!==null)if(typeof Ye=="function")try{Ye(null)}catch(hn){zo(qe,We,hn)}else Ye.current=null}function sh(qe,We,Ye){try{Ye()}catch(hn){zo(qe,We,hn)}}var sf=!1;function Kf(qe,We){if(Ku=ni,qe=Cc(),ac(qe)){if("selectionStart"in qe)var Ye={start:qe.selectionStart,end:qe.selectionEnd};else e:{Ye=(Ye=qe.ownerDocument)&&Ye.defaultView||window;var hn=Ye.getSelection&&Ye.getSelection();if(hn&&hn.rangeCount!==0){Ye=hn.anchorNode;var wn=hn.anchorOffset,Pn=hn.focusNode;hn=hn.focusOffset;try{Ye.nodeType,Pn.nodeType}catch{Ye=null;break e}var Bn=0,or=-1,hr=-1,Mr=0,Jr=0,ii=qe,Xr=null;t:for(;;){for(var vi;ii!==Ye||wn!==0&&ii.nodeType!==3||(or=Bn+wn),ii!==Pn||hn!==0&&ii.nodeType!==3||(hr=Bn+hn),ii.nodeType===3&&(Bn+=ii.nodeValue.length),(vi=ii.firstChild)!==null;)Xr=ii,ii=vi;for(;;){if(ii===qe)break t;if(Xr===Ye&&++Mr===wn&&(or=Bn),Xr===Pn&&++Jr===hn&&(hr=Bn),(vi=ii.nextSibling)!==null)break;ii=Xr,Xr=ii.parentNode}ii=vi}Ye=or===-1||hr===-1?null:{start:or,end:hr}}else Ye=null}Ye=Ye||{start:0,end:0}}else Ye=null;for(du={focusedElem:qe,selectionRange:Ye},ni=!1,Si=We;Si!==null;)if(We=Si,qe=We.child,(We.subtreeFlags&1028)!==0&&qe!==null)qe.return=We,Si=qe;else for(;Si!==null;){We=Si;try{var ki=We.alternate;if((We.flags&1024)!==0)switch(We.tag){case 0:case 11:case 15:break;case 1:if(ki!==null){var Oi=ki.memoizedProps,Yo=ki.memoizedState,Sr=We.stateNode,pr=Sr.getSnapshotBeforeUpdate(We.elementType===We.type?Oi:Ul(We.type,Oi),Yo);Sr.__reactInternalSnapshotBeforeUpdate=pr}break;case 3:var kr=We.stateNode.containerInfo;kr.nodeType===1?kr.textContent="":kr.nodeType===9&&kr.documentElement&&kr.removeChild(kr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(li){zo(We,We.return,li)}if(qe=We.sibling,qe!==null){qe.return=We.return,Si=qe;break}Si=We.return}return ki=sf,sf=!1,ki}function Qc(qe,We,Ye){var hn=We.updateQueue;if(hn=hn!==null?hn.lastEffect:null,hn!==null){var wn=hn=hn.next;do{if((wn.tag&qe)===qe){var Pn=wn.destroy;wn.destroy=void 0,Pn!==void 0&&sh(We,Ye,Pn)}wn=wn.next}while(wn!==hn)}}function Td(qe,We){if(We=We.updateQueue,We=We!==null?We.lastEffect:null,We!==null){var Ye=We=We.next;do{if((Ye.tag&qe)===qe){var hn=Ye.create;Ye.destroy=hn()}Ye=Ye.next}while(Ye!==We)}}function oh(qe){var We=qe.ref;if(We!==null){var Ye=qe.stateNode;switch(qe.tag){case 5:qe=Ye;break;default:qe=Ye}typeof We=="function"?We(qe):We.current=qe}}function of(qe){var We=qe.alternate;We!==null&&(qe.alternate=null,of(We)),qe.child=null,qe.deletions=null,qe.sibling=null,qe.tag===5&&(We=qe.stateNode,We!==null&&(delete We[Sl],delete We[Su],delete We[$a],delete We[qd],delete We[Wd])),qe.stateNode=null,qe.return=null,qe.dependencies=null,qe.memoizedProps=null,qe.memoizedState=null,qe.pendingProps=null,qe.stateNode=null,qe.updateQueue=null}function af(qe){return qe.tag===5||qe.tag===3||qe.tag===4}function lf(qe){e:for(;;){for(;qe.sibling===null;){if(qe.return===null||af(qe.return))return null;qe=qe.return}for(qe.sibling.return=qe.return,qe=qe.sibling;qe.tag!==5&&qe.tag!==6&&qe.tag!==18;){if(qe.flags&2||qe.child===null||qe.tag===4)continue e;qe.child.return=qe,qe=qe.child}if(!(qe.flags&2))return qe.stateNode}}function ah(qe,We,Ye){var hn=qe.tag;if(hn===5||hn===6)qe=qe.stateNode,We?Ye.nodeType===8?Ye.parentNode.insertBefore(qe,We):Ye.insertBefore(qe,We):(Ye.nodeType===8?(We=Ye.parentNode,We.insertBefore(qe,Ye)):(We=Ye,We.appendChild(qe)),Ye=Ye._reactRootContainer,Ye!=null||We.onclick!==null||(We.onclick=Au));else if(hn!==4&&(qe=qe.child,qe!==null))for(ah(qe,We,Ye),qe=qe.sibling;qe!==null;)ah(qe,We,Ye),qe=qe.sibling}function lh(qe,We,Ye){var hn=qe.tag;if(hn===5||hn===6)qe=qe.stateNode,We?Ye.insertBefore(qe,We):Ye.appendChild(qe);else if(hn!==4&&(qe=qe.child,qe!==null))for(lh(qe,We,Ye),qe=qe.sibling;qe!==null;)lh(qe,We,Ye),qe=qe.sibling}var ka=null,zl=!1;function Nu(qe,We,Ye){for(Ye=Ye.child;Ye!==null;)uf(qe,We,Ye),Ye=Ye.sibling}function uf(qe,We,Ye){if(Lo&&typeof Lo.onCommitFiberUnmount=="function")try{Lo.onCommitFiberUnmount(Ca,Ye)}catch{}switch(Ye.tag){case 5:Wa||Sc(Ye,We);case 6:var hn=ka,wn=zl;ka=null,Nu(qe,We,Ye),ka=hn,zl=wn,ka!==null&&(zl?(qe=ka,Ye=Ye.stateNode,qe.nodeType===8?qe.parentNode.removeChild(Ye):qe.removeChild(Ye)):ka.removeChild(Ye.stateNode));break;case 18:ka!==null&&(zl?(qe=ka,Ye=Ye.stateNode,qe.nodeType===8?Uc(qe.parentNode,Ye):qe.nodeType===1&&Uc(qe,Ye),vr(qe)):Uc(ka,Ye.stateNode));break;case 4:hn=ka,wn=zl,ka=Ye.stateNode.containerInfo,zl=!0,Nu(qe,We,Ye),ka=hn,zl=wn;break;case 0:case 11:case 14:case 15:if(!Wa&&(hn=Ye.updateQueue,hn!==null&&(hn=hn.lastEffect,hn!==null))){wn=hn=hn.next;do{var Pn=wn,Bn=Pn.destroy;Pn=Pn.tag,Bn!==void 0&&((Pn&2)!==0||(Pn&4)!==0)&&sh(Ye,We,Bn),wn=wn.next}while(wn!==hn)}Nu(qe,We,Ye);break;case 1:if(!Wa&&(Sc(Ye,We),hn=Ye.stateNode,typeof hn.componentWillUnmount=="function"))try{hn.props=Ye.memoizedProps,hn.state=Ye.memoizedState,hn.componentWillUnmount()}catch(or){zo(Ye,We,or)}Nu(qe,We,Ye);break;case 21:Nu(qe,We,Ye);break;case 22:Ye.mode&1?(Wa=(hn=Wa)||Ye.memoizedState!==null,Nu(qe,We,Ye),Wa=hn):Nu(qe,We,Ye);break;default:Nu(qe,We,Ye)}}function cf(qe){var We=qe.updateQueue;if(We!==null){qe.updateQueue=null;var Ye=qe.stateNode;Ye===null&&(Ye=qe.stateNode=new Gf),We.forEach(function(hn){var wn=rp.bind(null,qe,hn);Ye.has(hn)||(Ye.add(hn),hn.then(wn,wn))})}}function ql(qe,We){var Ye=We.deletions;if(Ye!==null)for(var hn=0;hn<Ye.length;hn++){var wn=Ye[hn];try{var Pn=qe,Bn=We,or=Bn;e:for(;or!==null;){switch(or.tag){case 5:ka=or.stateNode,zl=!1;break e;case 3:ka=or.stateNode.containerInfo,zl=!0;break e;case 4:ka=or.stateNode.containerInfo,zl=!0;break e}or=or.return}if(ka===null)throw Error(t(160));uf(Pn,Bn,wn),ka=null,zl=!1;var hr=wn.alternate;hr!==null&&(hr.return=null),wn.return=null}catch(Mr){zo(wn,We,Mr)}}if(We.subtreeFlags&12854)for(We=We.child;We!==null;)df(We,qe),We=We.sibling}function df(qe,We){var Ye=qe.alternate,hn=qe.flags;switch(qe.tag){case 0:case 11:case 14:case 15:if(ql(We,qe),ru(qe),hn&4){try{Qc(3,qe,qe.return),Td(3,qe)}catch(Oi){zo(qe,qe.return,Oi)}try{Qc(5,qe,qe.return)}catch(Oi){zo(qe,qe.return,Oi)}}break;case 1:ql(We,qe),ru(qe),hn&512&&Ye!==null&&Sc(Ye,Ye.return);break;case 5:if(ql(We,qe),ru(qe),hn&512&&Ye!==null&&Sc(Ye,Ye.return),qe.flags&32){var wn=qe.stateNode;try{si(wn,"")}catch(Oi){zo(qe,qe.return,Oi)}}if(hn&4&&(wn=qe.stateNode,wn!=null)){var Pn=qe.memoizedProps,Bn=Ye!==null?Ye.memoizedProps:Pn,or=qe.type,hr=qe.updateQueue;if(qe.updateQueue=null,hr!==null)try{or==="input"&&Pn.type==="radio"&&Pn.name!=null&&Ni(wn,Pn),wi(or,Bn);var Mr=wi(or,Pn);for(Bn=0;Bn<hr.length;Bn+=2){var Jr=hr[Bn],ii=hr[Bn+1];Jr==="style"?zr(wn,ii):Jr==="dangerouslySetInnerHTML"?Kr(wn,ii):Jr==="children"?si(wn,ii):Je(wn,Jr,ii,Mr)}switch(or){case"input":Ai(wn,Pn);break;case"textarea":Hi(wn,Pn);break;case"select":var Xr=wn._wrapperState.wasMultiple;wn._wrapperState.wasMultiple=!!Pn.multiple;var vi=Pn.value;vi!=null?ei(wn,!!Pn.multiple,vi,!1):Xr!==!!Pn.multiple&&(Pn.defaultValue!=null?ei(wn,!!Pn.multiple,Pn.defaultValue,!0):ei(wn,!!Pn.multiple,Pn.multiple?[]:"",!1))}wn[Su]=Pn}catch(Oi){zo(qe,qe.return,Oi)}}break;case 6:if(ql(We,qe),ru(qe),hn&4){if(qe.stateNode===null)throw Error(t(162));wn=qe.stateNode,Pn=qe.memoizedProps;try{wn.nodeValue=Pn}catch(Oi){zo(qe,qe.return,Oi)}}break;case 3:if(ql(We,qe),ru(qe),hn&4&&Ye!==null&&Ye.memoizedState.isDehydrated)try{vr(We.containerInfo)}catch(Oi){zo(qe,qe.return,Oi)}break;case 4:ql(We,qe),ru(qe);break;case 13:ql(We,qe),ru(qe),wn=qe.child,wn.flags&8192&&(Pn=wn.memoizedState!==null,wn.stateNode.isHidden=Pn,!Pn||wn.alternate!==null&&wn.alternate.memoizedState!==null||(dh=Gi())),hn&4&&cf(qe);break;case 22:if(Jr=Ye!==null&&Ye.memoizedState!==null,qe.mode&1?(Wa=(Mr=Wa)||Jr,ql(We,qe),Wa=Mr):ql(We,qe),ru(qe),hn&8192){if(Mr=qe.memoizedState!==null,(qe.stateNode.isHidden=Mr)&&!Jr&&(qe.mode&1)!==0)for(Si=qe,Jr=qe.child;Jr!==null;){for(ii=Si=Jr;Si!==null;){switch(Xr=Si,vi=Xr.child,Xr.tag){case 0:case 11:case 14:case 15:Qc(4,Xr,Xr.return);break;case 1:Sc(Xr,Xr.return);var ki=Xr.stateNode;if(typeof ki.componentWillUnmount=="function"){hn=Xr,Ye=Xr.return;try{We=hn,ki.props=We.memoizedProps,ki.state=We.memoizedState,ki.componentWillUnmount()}catch(Oi){zo(hn,Ye,Oi)}}break;case 5:Sc(Xr,Xr.return);break;case 22:if(Xr.memoizedState!==null){pf(ii);continue}}vi!==null?(vi.return=Xr,Si=vi):pf(ii)}Jr=Jr.sibling}e:for(Jr=null,ii=qe;;){if(ii.tag===5){if(Jr===null){Jr=ii;try{wn=ii.stateNode,Mr?(Pn=wn.style,typeof Pn.setProperty=="function"?Pn.setProperty("display","none","important"):Pn.display="none"):(or=ii.stateNode,hr=ii.memoizedProps.style,Bn=hr!=null&&hr.hasOwnProperty("display")?hr.display:null,or.style.display=$i("display",Bn))}catch(Oi){zo(qe,qe.return,Oi)}}}else if(ii.tag===6){if(Jr===null)try{ii.stateNode.nodeValue=Mr?"":ii.memoizedProps}catch(Oi){zo(qe,qe.return,Oi)}}else if((ii.tag!==22&&ii.tag!==23||ii.memoizedState===null||ii===qe)&&ii.child!==null){ii.child.return=ii,ii=ii.child;continue}if(ii===qe)break e;for(;ii.sibling===null;){if(ii.return===null||ii.return===qe)break e;Jr===ii&&(Jr=null),ii=ii.return}Jr===ii&&(Jr=null),ii.sibling.return=ii.return,ii=ii.sibling}}break;case 19:ql(We,qe),ru(qe),hn&4&&cf(qe);break;case 21:break;default:ql(We,qe),ru(qe)}}function ru(qe){var We=qe.flags;if(We&2){try{e:{for(var Ye=qe.return;Ye!==null;){if(af(Ye)){var hn=Ye;break e}Ye=Ye.return}throw Error(t(160))}switch(hn.tag){case 5:var wn=hn.stateNode;hn.flags&32&&(si(wn,""),hn.flags&=-33);var Pn=lf(qe);lh(qe,Pn,wn);break;case 3:case 4:var Bn=hn.stateNode.containerInfo,or=lf(qe);ah(qe,or,Bn);break;default:throw Error(t(161))}}catch(hr){zo(qe,qe.return,hr)}qe.flags&=-3}We&4096&&(qe.flags&=-4097)}function Yf(qe,We,Ye){Si=qe,hf(qe)}function hf(qe,We,Ye){for(var hn=(qe.mode&1)!==0;Si!==null;){var wn=Si,Pn=wn.child;if(wn.tag===22&&hn){var Bn=wn.memoizedState!==null||xd;if(!Bn){var or=wn.alternate,hr=or!==null&&or.memoizedState!==null||Wa;or=xd;var Mr=Wa;if(xd=Bn,(Wa=hr)&&!Mr)for(Si=wn;Si!==null;)Bn=Si,hr=Bn.child,Bn.tag===22&&Bn.memoizedState!==null?mf(wn):hr!==null?(hr.return=Bn,Si=hr):mf(wn);for(;Pn!==null;)Si=Pn,hf(Pn),Pn=Pn.sibling;Si=wn,xd=or,Wa=Mr}ff(qe)}else(wn.subtreeFlags&8772)!==0&&Pn!==null?(Pn.return=wn,Si=Pn):ff(qe)}}function ff(qe){for(;Si!==null;){var We=Si;if((We.flags&8772)!==0){var Ye=We.alternate;try{if((We.flags&8772)!==0)switch(We.tag){case 0:case 11:case 15:Wa||Td(5,We);break;case 1:var hn=We.stateNode;if(We.flags&4&&!Wa)if(Ye===null)hn.componentDidMount();else{var wn=We.elementType===We.type?Ye.memoizedProps:Ul(We.type,Ye.memoizedProps);hn.componentDidUpdate(wn,Ye.memoizedState,hn.__reactInternalSnapshotBeforeUpdate)}var Pn=We.updateQueue;Pn!==null&&sl(We,Pn,hn);break;case 3:var Bn=We.updateQueue;if(Bn!==null){if(Ye=null,We.child!==null)switch(We.child.tag){case 5:Ye=We.child.stateNode;break;case 1:Ye=We.child.stateNode}sl(We,Bn,Ye)}break;case 5:var or=We.stateNode;if(Ye===null&&We.flags&4){Ye=or;var hr=We.memoizedProps;switch(We.type){case"button":case"input":case"select":case"textarea":hr.autoFocus&&Ye.focus();break;case"img":hr.src&&(Ye.src=hr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(We.memoizedState===null){var Mr=We.alternate;if(Mr!==null){var Jr=Mr.memoizedState;if(Jr!==null){var ii=Jr.dehydrated;ii!==null&&vr(ii)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wa||We.flags&512&&oh(We)}catch(Xr){zo(We,We.return,Xr)}}if(We===qe){Si=null;break}if(Ye=We.sibling,Ye!==null){Ye.return=We.return,Si=Ye;break}Si=We.return}}function pf(qe){for(;Si!==null;){var We=Si;if(We===qe){Si=null;break}var Ye=We.sibling;if(Ye!==null){Ye.return=We.return,Si=Ye;break}Si=We.return}}function mf(qe){for(;Si!==null;){var We=Si;try{switch(We.tag){case 0:case 11:case 15:var Ye=We.return;try{Td(4,We)}catch(hr){zo(We,Ye,hr)}break;case 1:var hn=We.stateNode;if(typeof hn.componentDidMount=="function"){var wn=We.return;try{hn.componentDidMount()}catch(hr){zo(We,wn,hr)}}var Pn=We.return;try{oh(We)}catch(hr){zo(We,Pn,hr)}break;case 5:var Bn=We.return;try{oh(We)}catch(hr){zo(We,Bn,hr)}}}catch(hr){zo(We,We.return,hr)}if(We===qe){Si=null;break}var or=We.sibling;if(or!==null){or.return=We.return,Si=or;break}Si=We.return}}var Xf=Math.ceil,Ed=un.ReactCurrentDispatcher,uh=un.ReactCurrentOwner,Rl=un.ReactCurrentBatchConfig,Rs=0,ba=null,na=null,Ra=0,bl=0,Pc=pl(0),la=0,Jc=null,ec=0,Ad=0,ch=0,Zc=null,al=null,dh=0,Ic=1/0,_u=null,Sd=!1,hh=null,Mu=null,Pd=!1,Lu=null,Id=0,ed=0,fh=null,kd=-1,Rd=0;function Qa(){return(Rs&6)!==0?Gi():kd!==-1?kd:kd=Gi()}function Du(qe){return(qe.mode&1)===0?1:(Rs&2)!==0&&Ra!==0?Ra&-Ra:ko.transition!==null?(Rd===0&&(Rd=el()),Rd):(qe=os,qe!==0||(qe=window.event,qe=qe===void 0?16:ho(qe.type)),qe)}function Wl(qe,We,Ye,hn){if(50<ed)throw ed=0,fh=null,Error(t(185));wa(qe,Ye,hn),((Rs&2)===0||qe!==ba)&&(qe===ba&&((Rs&2)===0&&(Ad|=Ye),la===4&&Fu(qe,Ra)),ll(qe,hn),Ye===1&&Rs===0&&(We.mode&1)===0&&(Ic=Gi()+500,Xu&&Rn()))}function ll(qe,We){var Ye=qe.callbackNode;As(qe,We);var hn=mo(qe,qe===ba?Ra:0);if(hn===0)Ye!==null&&pi(Ye),qe.callbackNode=null,qe.callbackPriority=0;else if(We=hn&-hn,qe.callbackPriority!==We){if(Ye!=null&&pi(Ye),We===1)qe.tag===0?An(_f.bind(null,qe)):pn(_f.bind(null,qe)),Ud(function(){(Rs&6)===0&&Rn()}),Ye=null;else{switch(Qo(hn)){case 1:Ye=Nr;break;case 4:Ye=Vi;break;case 16:Ye=is;break;case 536870912:Ye=Xo;break;default:Ye=is}Ye=Af(Ye,gf.bind(null,qe))}qe.callbackPriority=We,qe.callbackNode=Ye}}function gf(qe,We){if(kd=-1,Rd=0,(Rs&6)!==0)throw Error(t(327));var Ye=qe.callbackNode;if(kc()&&qe.callbackNode!==Ye)return null;var hn=mo(qe,qe===ba?Ra:0);if(hn===0)return null;if((hn&30)!==0||(hn&qe.expiredLanes)!==0||We)We=Cd(qe,hn);else{We=hn;var wn=Rs;Rs|=2;var Pn=bf();(ba!==qe||Ra!==We)&&(_u=null,Ic=Gi()+500,nc(qe,We));do try{Zf();break}catch(or){yf(qe,or)}while(!0);Is(),Ed.current=Pn,Rs=wn,na!==null?We=0:(ba=null,Ra=0,We=la)}if(We!==0){if(We===2&&(wn=Do(qe),wn!==0&&(hn=wn,We=ph(qe,wn))),We===1)throw Ye=Jc,nc(qe,0),Fu(qe,hn),ll(qe,Gi()),Ye;if(We===6)Fu(qe,hn);else{if(wn=qe.current.alternate,(hn&30)===0&&!Qf(wn)&&(We=Cd(qe,hn),We===2&&(Pn=Do(qe),Pn!==0&&(hn=Pn,We=ph(qe,Pn))),We===1))throw Ye=Jc,nc(qe,0),Fu(qe,hn),ll(qe,Gi()),Ye;switch(qe.finishedWork=wn,qe.finishedLanes=hn,We){case 0:case 1:throw Error(t(345));case 2:rc(qe,al,_u);break;case 3:if(Fu(qe,hn),(hn&130023424)===hn&&(We=dh+500-Gi(),10<We)){if(mo(qe,0)!==0)break;if(wn=qe.suspendedLanes,(wn&hn)!==hn){Qa(),qe.pingedLanes|=qe.suspendedLanes&wn;break}qe.timeoutHandle=Bc(rc.bind(null,qe,al,_u),We);break}rc(qe,al,_u);break;case 4:if(Fu(qe,hn),(hn&4194240)===hn)break;for(We=qe.eventTimes,wn=-1;0<hn;){var Bn=31-ys(hn);Pn=1<<Bn,Bn=We[Bn],Bn>wn&&(wn=Bn),hn&=~Pn}if(hn=wn,hn=Gi()-hn,hn=(120>hn?120:480>hn?480:1080>hn?1080:1920>hn?1920:3e3>hn?3e3:4320>hn?4320:1960*Xf(hn/1960))-hn,10<hn){qe.timeoutHandle=Bc(rc.bind(null,qe,al,_u),hn);break}rc(qe,al,_u);break;case 5:rc(qe,al,_u);break;default:throw Error(t(329))}}}return ll(qe,Gi()),qe.callbackNode===Ye?gf.bind(null,qe):null}function ph(qe,We){var Ye=Zc;return qe.current.memoizedState.isDehydrated&&(nc(qe,We).flags|=256),qe=Cd(qe,We),qe!==2&&(We=al,al=Ye,We!==null&&mh(We)),qe}function mh(qe){al===null?al=qe:al.push.apply(al,qe)}function Qf(qe){for(var We=qe;;){if(We.flags&16384){var Ye=We.updateQueue;if(Ye!==null&&(Ye=Ye.stores,Ye!==null))for(var hn=0;hn<Ye.length;hn++){var wn=Ye[hn],Pn=wn.getSnapshot;wn=wn.value;try{if(!Ho(Pn(),wn))return!1}catch{return!1}}}if(Ye=We.child,We.subtreeFlags&16384&&Ye!==null)Ye.return=We,We=Ye;else{if(We===qe)break;for(;We.sibling===null;){if(We.return===null||We.return===qe)return!0;We=We.return}We.sibling.return=We.return,We=We.sibling}}return!0}function Fu(qe,We){for(We&=~ch,We&=~Ad,qe.suspendedLanes|=We,qe.pingedLanes&=~We,qe=qe.expirationTimes;0<We;){var Ye=31-ys(We),hn=1<<Ye;qe[Ye]=-1,We&=~hn}}function _f(qe){if((Rs&6)!==0)throw Error(t(327));kc();var We=mo(qe,0);if((We&1)===0)return ll(qe,Gi()),null;var Ye=Cd(qe,We);if(qe.tag!==0&&Ye===2){var hn=Do(qe);hn!==0&&(We=hn,Ye=ph(qe,hn))}if(Ye===1)throw Ye=Jc,nc(qe,0),Fu(qe,We),ll(qe,Gi()),Ye;if(Ye===6)throw Error(t(345));return qe.finishedWork=qe.current.alternate,qe.finishedLanes=We,rc(qe,al,_u),ll(qe,Gi()),null}function gh(qe,We){var Ye=Rs;Rs|=1;try{return qe(We)}finally{Rs=Ye,Rs===0&&(Ic=Gi()+500,Xu&&Rn())}}function tc(qe){Lu!==null&&Lu.tag===0&&(Rs&6)===0&&kc();var We=Rs;Rs|=1;var Ye=Rl.transition,hn=os;try{if(Rl.transition=null,os=1,qe)return qe()}finally{os=hn,Rl.transition=Ye,Rs=We,(Rs&6)===0&&Rn()}}function _h(){bl=Pc.current,Ns(Pc)}function nc(qe,We){qe.finishedWork=null,qe.finishedLanes=0;var Ye=qe.timeoutHandle;if(Ye!==-1&&(qe.timeoutHandle=-1,ud(Ye)),na!==null)for(Ye=na.return;Ye!==null;){var hn=Ye;switch(Pr(hn),hn.tag){case 1:hn=hn.type.childContextTypes,hn!=null&&mc();break;case 3:Pl(),Ns(Ba),Ns(oa),Gc();break;case 5:Wc(hn);break;case 4:Pl();break;case 13:Ns(Js);break;case 19:Ns(Js);break;case 10:uo(hn.type._context);break;case 22:case 23:_h()}Ye=Ye.return}if(ba=qe,na=qe=Vu(qe.current,null),Ra=bl=We,la=0,Jc=null,ch=Ad=ec=0,al=Zc=null,Bs!==null){for(We=0;We<Bs.length;We++)if(Ye=Bs[We],hn=Ye.interleaved,hn!==null){Ye.interleaved=null;var wn=hn.next,Pn=Ye.pending;if(Pn!==null){var Bn=Pn.next;Pn.next=wn,hn.next=Bn}Ye.pending=hn}Bs=null}return qe}function yf(qe,We){do{var Ye=na;try{if(Is(),gc.current=yd,Ru){for(var hn=co.memoizedState;hn!==null;){var wn=hn.queue;wn!==null&&(wn.pending=null),hn=hn.next}Ru=!1}if(Il=0,No=Uo=co=null,$l=!1,Cu=0,uh.current=null,Ye===null||Ye.return===null){la=1,Jc=We,na=null;break}e:{var Pn=qe,Bn=Ye.return,or=Ye,hr=We;if(We=Ra,or.flags|=32768,hr!==null&&typeof hr=="object"&&typeof hr.then=="function"){var Mr=hr,Jr=or,ii=Jr.tag;if((Jr.mode&1)===0&&(ii===0||ii===11||ii===15)){var Xr=Jr.alternate;Xr?(Jr.updateQueue=Xr.updateQueue,Jr.memoizedState=Xr.memoizedState,Jr.lanes=Xr.lanes):(Jr.updateQueue=null,Jr.memoizedState=null)}var vi=Uh(Bn);if(vi!==null){vi.flags&=-257,zh(vi,Bn,or,Pn,We),vi.mode&1&&Bh(Pn,Mr,We),We=vi,hr=Mr;var ki=We.updateQueue;if(ki===null){var Oi=new Set;Oi.add(hr),We.updateQueue=Oi}else ki.add(hr);break e}else{if((We&1)===0){Bh(Pn,Mr,We),yh();break e}hr=Error(t(426))}}else if(Ur&&or.mode&1){var Yo=Uh(Bn);if(Yo!==null){(Yo.flags&65536)===0&&(Yo.flags|=256),zh(Yo,Bn,or,Pn,We),di(Ac(hr,or));break e}}Pn=hr=Ac(hr,or),la!==4&&(la=2),Zc===null?Zc=[Pn]:Zc.push(Pn),Pn=Bn;do{switch(Pn.tag){case 3:Pn.flags|=65536,We&=-We,Pn.lanes|=We;var Sr=jh(Pn,hr,We);zs(Pn,Sr);break e;case 1:or=hr;var pr=Pn.type,kr=Pn.stateNode;if((Pn.flags&128)===0&&(typeof pr.getDerivedStateFromError=="function"||kr!==null&&typeof kr.componentDidCatch=="function"&&(Mu===null||!Mu.has(kr)))){Pn.flags|=65536,We&=-We,Pn.lanes|=We;var li=$h(Pn,or,We);zs(Pn,li);break e}}Pn=Pn.return}while(Pn!==null)}wf(Ye)}catch(Di){We=Di,na===Ye&&Ye!==null&&(na=Ye=Ye.return);continue}break}while(!0)}function bf(){var qe=Ed.current;return Ed.current=yd,qe===null?yd:qe}function yh(){(la===0||la===3||la===2)&&(la=4),ba===null||(ec&268435455)===0&&(Ad&268435455)===0||Fu(ba,Ra)}function Cd(qe,We){var Ye=Rs;Rs|=2;var hn=bf();(ba!==qe||Ra!==We)&&(_u=null,nc(qe,We));do try{Jf();break}catch(wn){yf(qe,wn)}while(!0);if(Is(),Rs=Ye,Ed.current=hn,na!==null)throw Error(t(261));return ba=null,Ra=0,la}function Jf(){for(;na!==null;)vf(na)}function Zf(){for(;na!==null&&!zi();)vf(na)}function vf(qe){var We=Ef(qe.alternate,qe,bl);qe.memoizedProps=qe.pendingProps,We===null?wf(qe):na=We,uh.current=null}function wf(qe){var We=qe;do{var Ye=We.alternate;if(qe=We.return,(We.flags&32768)===0){if(Ye=Wf(Ye,We,bl),Ye!==null){na=Ye;return}}else{if(Ye=Hf(Ye,We),Ye!==null){Ye.flags&=32767,na=Ye;return}if(qe!==null)qe.flags|=32768,qe.subtreeFlags=0,qe.deletions=null;else{la=6,na=null;return}}if(We=We.sibling,We!==null){na=We;return}na=We=qe}while(We!==null);la===0&&(la=5)}function rc(qe,We,Ye){var hn=os,wn=Rl.transition;try{Rl.transition=null,os=1,ep(qe,We,Ye,hn)}finally{Rl.transition=wn,os=hn}return null}function ep(qe,We,Ye,hn){do kc();while(Lu!==null);if((Rs&6)!==0)throw Error(t(327));Ye=qe.finishedWork;var wn=qe.finishedLanes;if(Ye===null)return null;if(qe.finishedWork=null,qe.finishedLanes=0,Ye===qe.current)throw Error(t(177));qe.callbackNode=null,qe.callbackPriority=0;var Pn=Ye.lanes|Ye.childLanes;if(us(qe,Pn),qe===ba&&(na=ba=null,Ra=0),(Ye.subtreeFlags&2064)===0&&(Ye.flags&2064)===0||Pd||(Pd=!0,Af(is,function(){return kc(),null})),Pn=(Ye.flags&15990)!==0,(Ye.subtreeFlags&15990)!==0||Pn){Pn=Rl.transition,Rl.transition=null;var Bn=os;os=1;var or=Rs;Rs|=4,uh.current=null,Kf(qe,Ye),df(Ye,qe),rd(du),ni=!!Ku,du=Ku=null,qe.current=Ye,Yf(Ye),_s(),Rs=or,os=Bn,Rl.transition=Pn}else qe.current=Ye;if(Pd&&(Pd=!1,Lu=qe,Id=wn),Pn=qe.pendingLanes,Pn===0&&(Mu=null),vl(Ye.stateNode),ll(qe,Gi()),We!==null)for(hn=qe.onRecoverableError,Ye=0;Ye<We.length;Ye++)wn=We[Ye],hn(wn.value,{componentStack:wn.stack,digest:wn.digest});if(Sd)throw Sd=!1,qe=hh,hh=null,qe;return(Id&1)!==0&&qe.tag!==0&&kc(),Pn=qe.pendingLanes,(Pn&1)!==0?qe===fh?ed++:(ed=0,fh=qe):ed=0,Rn(),null}function kc(){if(Lu!==null){var qe=Qo(Id),We=Rl.transition,Ye=os;try{if(Rl.transition=null,os=16>qe?16:qe,Lu===null)var hn=!1;else{if(qe=Lu,Lu=null,Id=0,(Rs&6)!==0)throw Error(t(331));var wn=Rs;for(Rs|=4,Si=qe.current;Si!==null;){var Pn=Si,Bn=Pn.child;if((Si.flags&16)!==0){var or=Pn.deletions;if(or!==null){for(var hr=0;hr<or.length;hr++){var Mr=or[hr];for(Si=Mr;Si!==null;){var Jr=Si;switch(Jr.tag){case 0:case 11:case 15:Qc(8,Jr,Pn)}var ii=Jr.child;if(ii!==null)ii.return=Jr,Si=ii;else for(;Si!==null;){Jr=Si;var Xr=Jr.sibling,vi=Jr.return;if(of(Jr),Jr===Mr){Si=null;break}if(Xr!==null){Xr.return=vi,Si=Xr;break}Si=vi}}}var ki=Pn.alternate;if(ki!==null){var Oi=ki.child;if(Oi!==null){ki.child=null;do{var Yo=Oi.sibling;Oi.sibling=null,Oi=Yo}while(Oi!==null)}}Si=Pn}}if((Pn.subtreeFlags&2064)!==0&&Bn!==null)Bn.return=Pn,Si=Bn;else e:for(;Si!==null;){if(Pn=Si,(Pn.flags&2048)!==0)switch(Pn.tag){case 0:case 11:case 15:Qc(9,Pn,Pn.return)}var Sr=Pn.sibling;if(Sr!==null){Sr.return=Pn.return,Si=Sr;break e}Si=Pn.return}}var pr=qe.current;for(Si=pr;Si!==null;){Bn=Si;var kr=Bn.child;if((Bn.subtreeFlags&2064)!==0&&kr!==null)kr.return=Bn,Si=kr;else e:for(Bn=pr;Si!==null;){if(or=Si,(or.flags&2048)!==0)try{switch(or.tag){case 0:case 11:case 15:Td(9,or)}}catch(Di){zo(or,or.return,Di)}if(or===Bn){Si=null;break e}var li=or.sibling;if(li!==null){li.return=or.return,Si=li;break e}Si=or.return}}if(Rs=wn,Rn(),Lo&&typeof Lo.onPostCommitFiberRoot=="function")try{Lo.onPostCommitFiberRoot(Ca,qe)}catch{}hn=!0}return hn}finally{os=Ye,Rl.transition=We}}return!1}function xf(qe,We,Ye){We=Ac(Ye,We),We=jh(qe,We,1),qe=Co(qe,We,1),We=Qa(),qe!==null&&(wa(qe,1,We),ll(qe,We))}function zo(qe,We,Ye){if(qe.tag===3)xf(qe,qe,Ye);else for(;We!==null;){if(We.tag===3){xf(We,qe,Ye);break}else if(We.tag===1){var hn=We.stateNode;if(typeof We.type.getDerivedStateFromError=="function"||typeof hn.componentDidCatch=="function"&&(Mu===null||!Mu.has(hn))){qe=Ac(Ye,qe),qe=$h(We,qe,1),We=Co(We,qe,1),qe=Qa(),We!==null&&(wa(We,1,qe),ll(We,qe));break}}We=We.return}}function tp(qe,We,Ye){var hn=qe.pingCache;hn!==null&&hn.delete(We),We=Qa(),qe.pingedLanes|=qe.suspendedLanes&Ye,ba===qe&&(Ra&Ye)===Ye&&(la===4||la===3&&(Ra&130023424)===Ra&&500>Gi()-dh?nc(qe,0):ch|=Ye),ll(qe,We)}function Tf(qe,We){We===0&&((qe.mode&1)===0?We=1:(We=ca,ca<<=1,(ca&130023424)===0&&(ca=4194304)));var Ye=Qa();qe=Us(qe,We),qe!==null&&(wa(qe,We,Ye),ll(qe,Ye))}function np(qe){var We=qe.memoizedState,Ye=0;We!==null&&(Ye=We.retryLane),Tf(qe,Ye)}function rp(qe,We){var Ye=0;switch(qe.tag){case 13:var hn=qe.stateNode,wn=qe.memoizedState;wn!==null&&(Ye=wn.retryLane);break;case 19:hn=qe.stateNode;break;default:throw Error(t(314))}hn!==null&&hn.delete(We),Tf(qe,Ye)}var Ef;Ef=function(qe,We,Ye){if(qe!==null)if(qe.memoizedProps!==We.pendingProps||Ba.current)ol=!0;else{if((qe.lanes&Ye)===0&&(We.flags&128)===0)return ol=!1,qf(qe,We,Ye);ol=(qe.flags&131072)!==0}else ol=!1,Ur&&(We.flags&1048576)!==0&&xr(We,Kn,We.index);switch(We.lanes=0,We.tag){case 2:var hn=We.type;wd(qe,We),qe=We.pendingProps;var wn=Iu(We,oa.current);wo(We,Ye),wn=Qu(null,We,hn,qe,wn,Ye);var Pn=kl();return We.flags|=1,typeof wn=="object"&&wn!==null&&typeof wn.render=="function"&&wn.$$typeof===void 0?(We.tag=1,We.memoizedState=null,We.updateQueue=null,Ua(hn)?(Pn=!0,pu(We)):Pn=!1,We.memoizedState=wn.state!==null&&wn.state!==void 0?wn.state:null,aa(We),wn.updater=bd,We.stateNode=wn,wn._reactInternals=We,Yd(We,hn,qe,Ye),We=Zd(null,We,hn,!0,Pn,Ye)):(We.tag=0,Ur&&Pn&&jr(We),Xa(null,We,wn,Ye),We=We.child),We;case 16:hn=We.elementType;e:{switch(wd(qe,We),qe=We.pendingProps,wn=hn._init,hn=wn(hn._payload),We.type=hn,wn=We.tag=sp(hn),qe=Ul(hn,qe),wn){case 0:We=Jd(null,We,hn,qe,Ye);break e;case 1:We=Yh(null,We,hn,qe,Ye);break e;case 11:We=qh(null,We,hn,qe,Ye);break e;case 14:We=Wh(null,We,hn,Ul(hn.type,qe),Ye);break e}throw Error(t(306,hn,""))}return We;case 0:return hn=We.type,wn=We.pendingProps,wn=We.elementType===hn?wn:Ul(hn,wn),Jd(qe,We,hn,wn,Ye);case 1:return hn=We.type,wn=We.pendingProps,wn=We.elementType===hn?wn:Ul(hn,wn),Yh(qe,We,hn,wn,Ye);case 3:e:{if(Xh(We),qe===null)throw Error(t(387));hn=We.pendingProps,Pn=We.memoizedState,wn=Pn.element,za(qe,We),ya(We,hn,null,Ye);var Bn=We.memoizedState;if(hn=Bn.element,Pn.isDehydrated)if(Pn={element:hn,isDehydrated:!1,cache:Bn.cache,pendingSuspenseBoundaries:Bn.pendingSuspenseBoundaries,transitions:Bn.transitions},We.updateQueue.baseState=Pn,We.memoizedState=Pn,We.flags&256){wn=Ac(Error(t(423)),We),We=Qh(qe,We,hn,Ye,wn);break e}else if(hn!==wn){wn=Ac(Error(t(424)),We),We=Qh(qe,We,hn,Ye,wn);break e}else for(Vr=Ia(We.stateNode.containerInfo.firstChild),Dr=We,Ur=!0,qr=null,Ye=fo(We,null,hn,Ye),We.child=Ye;Ye;)Ye.flags=Ye.flags&-3|4096,Ye=Ye.sibling;else{if(Ei(),hn===wn){We=gu(qe,We,Ye);break e}Xa(qe,We,hn,Ye)}We=We.child}return We;case 5:return fd(We),qe===null&&Pi(We),hn=We.type,wn=We.pendingProps,Pn=qe!==null?qe.memoizedProps:null,Bn=wn.children,$c(hn,wn)?Bn=null:Pn!==null&&$c(hn,Pn)&&(We.flags|=32),Kh(qe,We),Xa(qe,We,Bn,Ye),We.child;case 6:return qe===null&&Pi(We),null;case 13:return Jh(qe,We,Ye);case 4:return ku(We,We.stateNode.containerInfo),hn=We.pendingProps,qe===null?We.child=$o(We,null,hn,Ye):Xa(qe,We,hn,Ye),We.child;case 11:return hn=We.type,wn=We.pendingProps,wn=We.elementType===hn?wn:Ul(hn,wn),qh(qe,We,hn,wn,Ye);case 7:return Xa(qe,We,We.pendingProps,Ye),We.child;case 8:return Xa(qe,We,We.pendingProps.children,Ye),We.child;case 12:return Xa(qe,We,We.pendingProps.children,Ye),We.child;case 10:e:{if(hn=We.type._context,wn=We.pendingProps,Pn=We.memoizedProps,Bn=wn.value,Fs(Go,hn._currentValue),hn._currentValue=Bn,Pn!==null)if(Ho(Pn.value,Bn)){if(Pn.children===wn.children&&!Ba.current){We=gu(qe,We,Ye);break e}}else for(Pn=We.child,Pn!==null&&(Pn.return=We);Pn!==null;){var or=Pn.dependencies;if(or!==null){Bn=Pn.child;for(var hr=or.firstContext;hr!==null;){if(hr.context===hn){if(Pn.tag===1){hr=Ro(-1,Ye&-Ye),hr.tag=2;var Mr=Pn.updateQueue;if(Mr!==null){Mr=Mr.shared;var Jr=Mr.pending;Jr===null?hr.next=hr:(hr.next=Jr.next,Jr.next=hr),Mr.pending=hr}}Pn.lanes|=Ye,hr=Pn.alternate,hr!==null&&(hr.lanes|=Ye),ks(Pn.return,Ye,We),or.lanes|=Ye;break}hr=hr.next}}else if(Pn.tag===10)Bn=Pn.type===We.type?null:Pn.child;else if(Pn.tag===18){if(Bn=Pn.return,Bn===null)throw Error(t(341));Bn.lanes|=Ye,or=Bn.alternate,or!==null&&(or.lanes|=Ye),ks(Bn,Ye,We),Bn=Pn.sibling}else Bn=Pn.child;if(Bn!==null)Bn.return=Pn;else for(Bn=Pn;Bn!==null;){if(Bn===We){Bn=null;break}if(Pn=Bn.sibling,Pn!==null){Pn.return=Bn.return,Bn=Pn;break}Bn=Bn.return}Pn=Bn}Xa(qe,We,wn.children,Ye),We=We.child}return We;case 9:return wn=We.type,hn=We.pendingProps.children,wo(We,Ye),wn=xo(wn),hn=hn(wn),We.flags|=1,Xa(qe,We,hn,Ye),We.child;case 14:return hn=We.type,wn=Ul(hn,We.pendingProps),wn=Ul(hn.type,wn),Wh(qe,We,hn,wn,Ye);case 15:return Hh(qe,We,We.type,We.pendingProps,Ye);case 17:return hn=We.type,wn=We.pendingProps,wn=We.elementType===hn?wn:Ul(hn,wn),wd(qe,We),We.tag=1,Ua(hn)?(qe=!0,pu(We)):qe=!1,wo(We,Ye),Fh(We,hn,wn),Yd(We,hn,wn,Ye),Zd(null,We,hn,!0,qe,Ye);case 19:return ef(qe,We,Ye);case 22:return Gh(qe,We,Ye)}throw Error(t(156,We.tag))};function Af(qe,We){return yi(qe,We)}function ip(qe,We,Ye,hn){this.tag=qe,this.key=Ye,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=We,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=hn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cl(qe,We,Ye,hn){return new ip(qe,We,Ye,hn)}function bh(qe){return qe=qe.prototype,!(!qe||!qe.isReactComponent)}function sp(qe){if(typeof qe=="function")return bh(qe)?1:0;if(qe!=null){if(qe=qe.$$typeof,qe===Tn)return 11;if(qe===Nn)return 14}return 2}function Vu(qe,We){var Ye=qe.alternate;return Ye===null?(Ye=Cl(qe.tag,We,qe.key,qe.mode),Ye.elementType=qe.elementType,Ye.type=qe.type,Ye.stateNode=qe.stateNode,Ye.alternate=qe,qe.alternate=Ye):(Ye.pendingProps=We,Ye.type=qe.type,Ye.flags=0,Ye.subtreeFlags=0,Ye.deletions=null),Ye.flags=qe.flags&14680064,Ye.childLanes=qe.childLanes,Ye.lanes=qe.lanes,Ye.child=qe.child,Ye.memoizedProps=qe.memoizedProps,Ye.memoizedState=qe.memoizedState,Ye.updateQueue=qe.updateQueue,We=qe.dependencies,Ye.dependencies=We===null?null:{lanes:We.lanes,firstContext:We.firstContext},Ye.sibling=qe.sibling,Ye.index=qe.index,Ye.ref=qe.ref,Ye}function Od(qe,We,Ye,hn,wn,Pn){var Bn=2;if(hn=qe,typeof qe=="function")bh(qe)&&(Bn=1);else if(typeof qe=="string")Bn=5;else e:switch(qe){case gn:return ic(Ye.children,wn,Pn,We);case mn:Bn=8,wn|=8;break;case dn:return qe=Cl(12,Ye,We,wn|2),qe.elementType=dn,qe.lanes=Pn,qe;case En:return qe=Cl(13,Ye,We,wn),qe.elementType=En,qe.lanes=Pn,qe;case In:return qe=Cl(19,Ye,We,wn),qe.elementType=In,qe.lanes=Pn,qe;case Fn:return Nd(Ye,wn,Pn,We);default:if(typeof qe=="object"&&qe!==null)switch(qe.$$typeof){case vn:Bn=10;break e;case bn:Bn=9;break e;case Tn:Bn=11;break e;case Nn:Bn=14;break e;case On:Bn=16,hn=null;break e}throw Error(t(130,qe==null?qe:typeof qe,""))}return We=Cl(Bn,Ye,We,wn),We.elementType=qe,We.type=hn,We.lanes=Pn,We}function ic(qe,We,Ye,hn){return qe=Cl(7,qe,hn,We),qe.lanes=Ye,qe}function Nd(qe,We,Ye,hn){return qe=Cl(22,qe,hn,We),qe.elementType=Fn,qe.lanes=Ye,qe.stateNode={isHidden:!1},qe}function wh(qe,We,Ye){return qe=Cl(6,qe,null,We),qe.lanes=Ye,qe}function xh(qe,We,Ye){return We=Cl(4,qe.children!==null?qe.children:[],qe.key,We),We.lanes=Ye,We.stateNode={containerInfo:qe.containerInfo,pendingChildren:null,implementation:qe.implementation},We}function op(qe,We,Ye,hn,wn){this.tag=We,this.containerInfo=qe,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ga(0),this.expirationTimes=Ga(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ga(0),this.identifierPrefix=hn,this.onRecoverableError=wn,this.mutableSourceEagerHydrationData=null}function Th(qe,We,Ye,hn,wn,Pn,Bn,or,hr){return qe=new op(qe,We,Ye,or,hr),We===1?(We=1,Pn===!0&&(We|=8)):We=0,Pn=Cl(3,null,null,We),qe.current=Pn,Pn.stateNode=qe,Pn.memoizedState={element:hn,isDehydrated:Ye,cache:null,transitions:null,pendingSuspenseBoundaries:null},aa(Pn),qe}function ap(qe,We,Ye){var hn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yn,key:hn==null?null:""+hn,children:qe,containerInfo:We,implementation:Ye}}function Sf(qe){if(!qe)return eu;qe=qe._reactInternals;e:{if(ir(qe)!==qe||qe.tag!==1)throw Error(t(170));var We=qe;do{switch(We.tag){case 3:We=We.stateNode.context;break e;case 1:if(Ua(We.type)){We=We.stateNode.__reactInternalMemoizedMergedChildContext;break e}}We=We.return}while(We!==null);throw Error(t(171))}if(qe.tag===1){var Ye=qe.type;if(Ua(Ye))return qc(qe,Ye,We)}return We}function Pf(qe,We,Ye,hn,wn,Pn,Bn,or,hr){return qe=Th(Ye,hn,!0,qe,wn,Pn,Bn,or,hr),qe.context=Sf(null),Ye=qe.current,hn=Qa(),wn=Du(Ye),Pn=Ro(hn,wn),Pn.callback=We??null,Co(Ye,Pn,wn),qe.current.lanes=wn,wa(qe,wn,hn),ll(qe,hn),qe}function Md(qe,We,Ye,hn){var wn=We.current,Pn=Qa(),Bn=Du(wn);return Ye=Sf(Ye),We.context===null?We.context=Ye:We.pendingContext=Ye,We=Ro(Pn,Bn),We.payload={element:qe},hn=hn===void 0?null:hn,hn!==null&&(We.callback=hn),qe=Co(wn,We,Bn),qe!==null&&(Wl(qe,wn,Bn,Pn),ga(qe,wn,Bn)),Bn}function Ld(qe){if(qe=qe.current,!qe.child)return null;switch(qe.child.tag){case 5:return qe.child.stateNode;default:return qe.child.stateNode}}function kf(qe,We){if(qe=qe.memoizedState,qe!==null&&qe.dehydrated!==null){var Ye=qe.retryLane;qe.retryLane=Ye!==0&&Ye<We?Ye:We}}function Eh(qe,We){kf(qe,We),(qe=qe.alternate)&&kf(qe,We)}function lp(){return null}var Rf=typeof reportError=="function"?reportError:function(qe){console.error(qe)};function Ah(qe){this._internalRoot=qe}Dd.prototype.render=Ah.prototype.render=function(qe){var We=this._internalRoot;if(We===null)throw Error(t(409));Md(qe,We,null,null)},Dd.prototype.unmount=Ah.prototype.unmount=function(){var qe=this._internalRoot;if(qe!==null){this._internalRoot=null;var We=qe.containerInfo;tc(function(){Md(null,qe,null,null)}),We[pa]=null}};function Dd(qe){this._internalRoot=qe}Dd.prototype.unstable_scheduleHydration=function(qe){if(qe){var We=Qi();qe={blockedOn:null,target:qe,priority:We};for(var Ye=0;Ye<xa.length&&We!==0&&We<xa[Ye].priority;Ye++);xa.splice(Ye,0,qe),Ye===0&&Nl(qe)}};function Sh(qe){return!(!qe||qe.nodeType!==1&&qe.nodeType!==9&&qe.nodeType!==11)}function Fd(qe){return!(!qe||qe.nodeType!==1&&qe.nodeType!==9&&qe.nodeType!==11&&(qe.nodeType!==8||qe.nodeValue!==" react-mount-point-unstable "))}function Cf(){}function up(qe,We,Ye,hn,wn){if(wn){if(typeof hn=="function"){var Pn=hn;hn=function(){var Mr=Ld(Bn);Pn.call(Mr)}}var Bn=Pf(We,hn,qe,0,null,!1,!1,"",Cf);return qe._reactRootContainer=Bn,qe[pa]=Bn.current,uu(qe.nodeType===8?qe.parentNode:qe),tc(),Bn}for(;wn=qe.lastChild;)qe.removeChild(wn);if(typeof hn=="function"){var or=hn;hn=function(){var Mr=Ld(hr);or.call(Mr)}}var hr=Th(qe,0,!1,null,null,!1,!1,"",Cf);return qe._reactRootContainer=hr,qe[pa]=hr.current,uu(qe.nodeType===8?qe.parentNode:qe),tc(function(){Md(We,hr,Ye,hn)}),hr}function Vd(qe,We,Ye,hn,wn){var Pn=Ye._reactRootContainer;if(Pn){var Bn=Pn;if(typeof wn=="function"){var or=wn;wn=function(){var hr=Ld(Bn);or.call(hr)}}Md(We,Bn,qe,wn)}else Bn=up(Ye,We,qe,wn,hn);return Ld(Bn)}Xi=function(qe){switch(qe.tag){case 3:var We=qe.stateNode;if(We.current.memoizedState.isDehydrated){var Ye=da(We.pendingLanes);Ye!==0&&(Oa(We,Ye|1),ll(We,Gi()),(Rs&6)===0&&(Ic=Gi()+500,Rn()))}break;case 13:tc(function(){var hn=Us(qe,1);if(hn!==null){var wn=Qa();Wl(hn,qe,1,wn)}}),Eh(qe,1)}},ul=function(qe){if(qe.tag===13){var We=Us(qe,134217728);if(We!==null){var Ye=Qa();Wl(We,qe,134217728,Ye)}Eh(qe,134217728)}},es=function(qe){if(qe.tag===13){var We=Du(qe),Ye=Us(qe,We);if(Ye!==null){var hn=Qa();Wl(Ye,qe,We,hn)}Eh(qe,We)}},Qi=function(){return os},tl=function(qe,We){var Ye=os;try{return os=qe,We()}finally{os=Ye}},ws=function(qe,We,Ye){switch(We){case"input":if(Ai(qe,Ye),We=Ye.name,Ye.type==="radio"&&We!=null){for(Ye=qe;Ye.parentNode;)Ye=Ye.parentNode;for(Ye=Ye.querySelectorAll("input[name="+JSON.stringify(""+We)+'][type="radio"]'),We=0;We<Ye.length;We++){var hn=Ye[We];if(hn!==qe&&hn.form===qe.form){var wn=Yu(hn);if(!wn)throw Error(t(90));Yr(hn),Ai(hn,wn)}}}break;case"textarea":Hi(qe,Ye);break;case"select":We=Ye.value,We!=null&&ei(qe,!!Ye.multiple,We,!1)}},Ms=gh,To=tc;var cp={usingClientEntryPoint:!1,Events:[Pu,hu,Yu,ai,Fi,gh]},nd={findFiberByHostInstance:Zl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dp={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:un.ReactCurrentDispatcher,findHostInstanceByFiber:function(qe){return qe=Or(qe),qe===null?null:qe.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{Ca=jd.inject(dp),Lo=jd}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cp,reactDom_production_min.createPortal=function(qe,We){var Ye=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sh(We))throw Error(t(200));return ap(qe,We,null,Ye)},reactDom_production_min.createRoot=function(qe,We){if(!Sh(qe))throw Error(t(299));var Ye=!1,hn="",wn=Rf;return We!=null&&(We.unstable_strictMode===!0&&(Ye=!0),We.identifierPrefix!==void 0&&(hn=We.identifierPrefix),We.onRecoverableError!==void 0&&(wn=We.onRecoverableError)),We=Th(qe,1,!1,null,null,Ye,!1,hn,wn),qe[pa]=We.current,uu(qe.nodeType===8?qe.parentNode:qe),new Ah(We)},reactDom_production_min.findDOMNode=function(qe){if(qe==null)return null;if(qe.nodeType===1)return qe;var We=qe._reactInternals;if(We===void 0)throw typeof qe.render=="function"?Error(t(188)):(qe=Object.keys(qe).join(","),Error(t(268,qe)));return qe=Or(We),qe=qe===null?null:qe.stateNode,qe},reactDom_production_min.flushSync=function(qe){return tc(qe)},reactDom_production_min.hydrate=function(qe,We,Ye){if(!Fd(We))throw Error(t(200));return Vd(null,qe,We,!0,Ye)},reactDom_production_min.hydrateRoot=function(qe,We,Ye){if(!Sh(qe))throw Error(t(405));var hn=Ye!=null&&Ye.hydratedSources||null,wn=!1,Pn="",Bn=Rf;if(Ye!=null&&(Ye.unstable_strictMode===!0&&(wn=!0),Ye.identifierPrefix!==void 0&&(Pn=Ye.identifierPrefix),Ye.onRecoverableError!==void 0&&(Bn=Ye.onRecoverableError)),We=Pf(We,null,qe,1,Ye??null,wn,!1,Pn,Bn),qe[pa]=We.current,uu(qe),hn)for(qe=0;qe<hn.length;qe++)Ye=hn[qe],wn=Ye._getVersion,wn=wn(Ye._source),We.mutableSourceEagerHydrationData==null?We.mutableSourceEagerHydrationData=[Ye,wn]:We.mutableSourceEagerHydrationData.push(Ye,wn);return new Dd(We)},reactDom_production_min.render=function(qe,We,Ye){if(!Fd(We))throw Error(t(200));return Vd(null,qe,We,!1,Ye)},reactDom_production_min.unmountComponentAtNode=function(qe){if(!Fd(qe))throw Error(t(40));return qe._reactRootContainer?(tc(function(){Vd(null,null,qe,!1,function(){qe._reactRootContainer=null,qe[pa]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=gh,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(qe,We,Ye,hn){if(!Fd(Ye))throw Error(t(200));if(qe==null||qe._reactInternals===void 0)throw Error(t(38));return Vd(qe,We,Ye,!1,hn)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var n=requireReactDom();return client.createRoot=n.createRoot,client.hydrateRoot=n.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),scriptRel="modulepreload",assetsURL=function(n){return"/"+n},seen={},__vitePreload=function(e,t,Te){let Ee=Promise.resolve();if(t&&t.length>0){let $e=function(Ve){return Promise.all(Ve.map(Be=>Promise.resolve(Be).then(Me=>({status:"fulfilled",value:Me}),Me=>({status:"rejected",reason:Me}))))};document.getElementsByTagName("link");const Ce=document.querySelector("meta[property=csp-nonce]"),De=Ce?.nonce||Ce?.getAttribute("nonce");Ee=$e(t.map(Ve=>{if(Ve=assetsURL(Ve),Ve in seen)return;seen[Ve]=!0;const Be=Ve.endsWith(".css"),Me=Be?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ve}"]${Me}`))return;const Oe=document.createElement("link");if(Oe.rel=Be?"stylesheet":scriptRel,Be||(Oe.as="script"),Oe.crossOrigin="",Oe.href=Ve,De&&Oe.setAttribute("nonce",De),document.head.appendChild(Oe),Be)return new Promise((Ue,ze)=>{Oe.addEventListener("load",Ue),Oe.addEventListener("error",()=>ze(new Error(`Unable to preload CSS for ${Ve}`)))})}))}function Re(Ce){const De=new Event("vite:preloadError",{cancelable:!0});if(De.payload=Ce,window.dispatchEvent(De),!De.defaultPrevented)throw Ce}return Ee.then(Ce=>{for(const De of Ce||[])De.status==="rejected"&&Re(De.reason);return e().catch(Re)})};requireReactDom();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var Te in t)Object.prototype.hasOwnProperty.call(t,Te)&&(n[Te]=t[Te])}return n},_extends$3.apply(this,arguments)}var Action;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(n){n===void 0&&(n={});function e(Te,Ee){let{pathname:Re,search:Ce,hash:De}=Te.location;return createLocation("",{pathname:Re,search:Ce,hash:De},Ee.state&&Ee.state.usr||null,Ee.state&&Ee.state.key||"default")}function t(Te,Ee){return typeof Ee=="string"?Ee:createPath(Ee)}return getUrlBasedHistory(e,t,null,n)}function invariant$1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function warning(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(n,e){return{usr:n.state,key:n.key,idx:e}}function createLocation(n,e,t,Te){return t===void 0&&(t=null),_extends$3({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:t,key:e&&e.key||Te||createKey()})}function createPath(n){let{pathname:e="/",search:t="",hash:Te=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),Te&&Te!=="#"&&(e+=Te.charAt(0)==="#"?Te:"#"+Te),e}function parsePath(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let Te=n.indexOf("?");Te>=0&&(e.search=n.substr(Te),n=n.substr(0,Te)),n&&(e.pathname=n)}return e}function getUrlBasedHistory(n,e,t,Te){Te===void 0&&(Te={});let{window:Ee=document.defaultView,v5Compat:Re=!1}=Te,Ce=Ee.history,De=Action.Pop,$e=null,Ve=Be();Ve==null&&(Ve=0,Ce.replaceState(_extends$3({},Ce.state,{idx:Ve}),""));function Be(){return(Ce.state||{idx:null}).idx}function Me(){De=Action.Pop;let Ge=Be(),Ke=Ge==null?null:Ge-Ve;Ve=Ge,$e&&$e({action:De,location:He.location,delta:Ke})}function Oe(Ge,Ke){De=Action.Push;let Xe=createLocation(He.location,Ge,Ke);Ve=Be()+1;let Je=getHistoryState(Xe,Ve),un=He.createHref(Xe);try{Ce.pushState(Je,"",un)}catch(fn){if(fn instanceof DOMException&&fn.name==="DataCloneError")throw fn;Ee.location.assign(un)}Re&&$e&&$e({action:De,location:He.location,delta:1})}function Ue(Ge,Ke){De=Action.Replace;let Xe=createLocation(He.location,Ge,Ke);Ve=Be();let Je=getHistoryState(Xe,Ve),un=He.createHref(Xe);Ce.replaceState(Je,"",un),Re&&$e&&$e({action:De,location:He.location,delta:0})}function ze(Ge){let Ke=Ee.location.origin!=="null"?Ee.location.origin:Ee.location.href,Xe=typeof Ge=="string"?Ge:createPath(Ge);return Xe=Xe.replace(/ $/,"%20"),invariant$1(Ke,"No window.location.(origin|href) available to create URL for href: "+Xe),new URL(Xe,Ke)}let He={get action(){return De},get location(){return n(Ee,Ce)},listen(Ge){if($e)throw new Error("A history only accepts one active listener");return Ee.addEventListener(PopStateEventType,Me),$e=Ge,()=>{Ee.removeEventListener(PopStateEventType,Me),$e=null}},createHref(Ge){return e(Ee,Ge)},createURL:ze,encodeLocation(Ge){let Ke=ze(Ge);return{pathname:Ke.pathname,search:Ke.search,hash:Ke.hash}},push:Oe,replace:Ue,go(Ge){return Ce.go(Ge)}};return He}var ResultType;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ResultType||(ResultType={}));function matchRoutes(n,e,t){return t===void 0&&(t="/"),matchRoutesImpl(n,e,t)}function matchRoutesImpl(n,e,t,Te){let Ee=typeof e=="string"?parsePath(e):e,Re=stripBasename(Ee.pathname||"/",t);if(Re==null)return null;let Ce=flattenRoutes(n);rankRouteBranches(Ce);let De=null;for(let $e=0;De==null&&$e<Ce.length;++$e){let Ve=decodePath(Re);De=matchRouteBranch(Ce[$e],Ve)}return De}function flattenRoutes(n,e,t,Te){e===void 0&&(e=[]),t===void 0&&(t=[]),Te===void 0&&(Te="");let Ee=(Re,Ce,De)=>{let $e={relativePath:De===void 0?Re.path||"":De,caseSensitive:Re.caseSensitive===!0,childrenIndex:Ce,route:Re};$e.relativePath.startsWith("/")&&(invariant$1($e.relativePath.startsWith(Te),'Absolute route path "'+$e.relativePath+'" nested under path '+('"'+Te+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),$e.relativePath=$e.relativePath.slice(Te.length));let Ve=joinPaths([Te,$e.relativePath]),Be=t.concat($e);Re.children&&Re.children.length>0&&(invariant$1(Re.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Ve+'".')),flattenRoutes(Re.children,e,Be,Ve)),!(Re.path==null&&!Re.index)&&e.push({path:Ve,score:computeScore(Ve,Re.index),routesMeta:Be})};return n.forEach((Re,Ce)=>{var De;if(Re.path===""||!((De=Re.path)!=null&&De.includes("?")))Ee(Re,Ce);else for(let $e of explodeOptionalSegments(Re.path))Ee(Re,Ce,$e)}),e}function explodeOptionalSegments(n){let e=n.split("/");if(e.length===0)return[];let[t,...Te]=e,Ee=t.endsWith("?"),Re=t.replace(/\?$/,"");if(Te.length===0)return Ee?[Re,""]:[Re];let Ce=explodeOptionalSegments(Te.join("/")),De=[];return De.push(...Ce.map($e=>$e===""?Re:[Re,$e].join("/"))),Ee&&De.push(...Ce),De.map($e=>n.startsWith("/")&&$e===""?"/":$e)}function rankRouteBranches(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(Te=>Te.childrenIndex),t.routesMeta.map(Te=>Te.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=n=>n==="*";function computeScore(n,e){let t=n.split("/"),Te=t.length;return t.some(isSplat)&&(Te+=splatPenalty),e&&(Te+=indexRouteValue),t.filter(Ee=>!isSplat(Ee)).reduce((Ee,Re)=>Ee+(paramRe.test(Re)?dynamicSegmentValue:Re===""?emptySegmentValue:staticSegmentValue),Te)}function compareIndexes(n,e){return n.length===e.length&&n.slice(0,-1).every((Te,Ee)=>Te===e[Ee])?n[n.length-1]-e[e.length-1]:0}function matchRouteBranch(n,e,t){let{routesMeta:Te}=n,Ee={},Re="/",Ce=[];for(let De=0;De<Te.length;++De){let $e=Te[De],Ve=De===Te.length-1,Be=Re==="/"?e:e.slice(Re.length)||"/",Me=matchPath({path:$e.relativePath,caseSensitive:$e.caseSensitive,end:Ve},Be),Oe=$e.route;if(!Me)return null;Object.assign(Ee,Me.params),Ce.push({params:Ee,pathname:joinPaths([Re,Me.pathname]),pathnameBase:normalizePathname(joinPaths([Re,Me.pathnameBase])),route:Oe}),Me.pathnameBase!=="/"&&(Re=joinPaths([Re,Me.pathnameBase]))}return Ce}function matchPath(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,Te]=compilePath(n.path,n.caseSensitive,n.end),Ee=e.match(t);if(!Ee)return null;let Re=Ee[0],Ce=Re.replace(/(.)\/+$/,"$1"),De=Ee.slice(1);return{params:Te.reduce((Ve,Be,Me)=>{let{paramName:Oe,isOptional:Ue}=Be;if(Oe==="*"){let He=De[Me]||"";Ce=Re.slice(0,Re.length-He.length).replace(/(.)\/+$/,"$1")}const ze=De[Me];return Ue&&!ze?Ve[Oe]=void 0:Ve[Oe]=(ze||"").replace(/%2F/g,"/"),Ve},{}),pathname:Re,pathnameBase:Ce,pattern:n}}function compilePath(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),warning(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let Te=[],Ee="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(Ce,De,$e)=>(Te.push({paramName:De,isOptional:$e!=null}),$e?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(Te.push({paramName:"*"}),Ee+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?Ee+="\\/*$":n!==""&&n!=="/"&&(Ee+="(?:(?=\\/|$))"),[new RegExp(Ee,e?void 0:"i"),Te]}function decodePath(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function stripBasename(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,Te=n.charAt(t);return Te&&Te!=="/"?null:n.slice(t)||"/"}function resolvePath(n,e){e===void 0&&(e="/");let{pathname:t,search:Te="",hash:Ee=""}=typeof n=="string"?parsePath(n):n;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(Te),hash:normalizeHash(Ee)}}function resolvePathname(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(Ee=>{Ee===".."?t.length>1&&t.pop():Ee!=="."&&t.push(Ee)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(n,e,t,Te){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(Te)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(n,e){let t=getPathContributingMatches(n);return e?t.map((Te,Ee)=>Ee===t.length-1?Te.pathname:Te.pathnameBase):t.map(Te=>Te.pathnameBase)}function resolveTo(n,e,t,Te){Te===void 0&&(Te=!1);let Ee;typeof n=="string"?Ee=parsePath(n):(Ee=_extends$3({},n),invariant$1(!Ee.pathname||!Ee.pathname.includes("?"),getInvalidPathError("?","pathname","search",Ee)),invariant$1(!Ee.pathname||!Ee.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Ee)),invariant$1(!Ee.search||!Ee.search.includes("#"),getInvalidPathError("#","search","hash",Ee)));let Re=n===""||Ee.pathname==="",Ce=Re?"/":Ee.pathname,De;if(Ce==null)De=t;else{let Me=e.length-1;if(!Te&&Ce.startsWith("..")){let Oe=Ce.split("/");for(;Oe[0]==="..";)Oe.shift(),Me-=1;Ee.pathname=Oe.join("/")}De=Me>=0?e[Me]:"/"}let $e=resolvePath(Ee,De),Ve=Ce&&Ce!=="/"&&Ce.endsWith("/"),Be=(Re||Ce===".")&&t.endsWith("/");return!$e.pathname.endsWith("/")&&(Ve||Be)&&($e.pathname+="/"),$e}const joinPaths=n=>n.join("/").replace(/\/\/+/g,"/"),normalizePathname=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,normalizeHash=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function isRouteErrorResponse(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var Te in t)Object.prototype.hasOwnProperty.call(t,Te)&&(n[Te]=t[Te])}return n},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(n,e){let{relative:t}=e===void 0?{}:e;useInRouterContext()||invariant$1(!1);let{basename:Te,navigator:Ee}=reactExports.useContext(NavigationContext),{hash:Re,pathname:Ce,search:De}=useResolvedPath(n,{relative:t}),$e=Ce;return Te!=="/"&&($e=Ce==="/"?Te:joinPaths([Te,Ce])),Ee.createHref({pathname:$e,search:De,hash:Re})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(n){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(n)}function useNavigate(){let{isDataRoute:n}=reactExports.useContext(RouteContext);return n?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let n=reactExports.useContext(DataRouterContext),{basename:e,future:t,navigator:Te}=reactExports.useContext(NavigationContext),{matches:Ee}=reactExports.useContext(RouteContext),{pathname:Re}=useLocation(),Ce=JSON.stringify(getResolveToMatches(Ee,t.v7_relativeSplatPath)),De=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{De.current=!0}),reactExports.useCallback(function(Ve,Be){if(Be===void 0&&(Be={}),!De.current)return;if(typeof Ve=="number"){Te.go(Ve);return}let Me=resolveTo(Ve,JSON.parse(Ce),Re,Be.relative==="path");n==null&&e!=="/"&&(Me.pathname=Me.pathname==="/"?e:joinPaths([e,Me.pathname])),(Be.replace?Te.replace:Te.push)(Me,Be.state,Be)},[e,Te,Ce,Re,n])}function useResolvedPath(n,e){let{relative:t}=e===void 0?{}:e,{future:Te}=reactExports.useContext(NavigationContext),{matches:Ee}=reactExports.useContext(RouteContext),{pathname:Re}=useLocation(),Ce=JSON.stringify(getResolveToMatches(Ee,Te.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(n,JSON.parse(Ce),Re,t==="path"),[n,Ce,Re,t])}function useRoutes(n,e){return useRoutesImpl(n,e)}function useRoutesImpl(n,e,t,Te){useInRouterContext()||invariant$1(!1);let{navigator:Ee}=reactExports.useContext(NavigationContext),{matches:Re}=reactExports.useContext(RouteContext),Ce=Re[Re.length-1],De=Ce?Ce.params:{};Ce&&Ce.pathname;let $e=Ce?Ce.pathnameBase:"/";Ce&&Ce.route;let Ve=useLocation(),Be;if(e){var Me;let Ge=typeof e=="string"?parsePath(e):e;$e==="/"||(Me=Ge.pathname)!=null&&Me.startsWith($e)||invariant$1(!1),Be=Ge}else Be=Ve;let Oe=Be.pathname||"/",Ue=Oe;if($e!=="/"){let Ge=$e.replace(/^\//,"").split("/");Ue="/"+Oe.replace(/^\//,"").split("/").slice(Ge.length).join("/")}let ze=matchRoutes(n,{pathname:Ue}),He=_renderMatches(ze&&ze.map(Ge=>Object.assign({},Ge,{params:Object.assign({},De,Ge.params),pathname:joinPaths([$e,Ee.encodeLocation?Ee.encodeLocation(Ge.pathname).pathname:Ge.pathname]),pathnameBase:Ge.pathnameBase==="/"?$e:joinPaths([$e,Ee.encodeLocation?Ee.encodeLocation(Ge.pathnameBase).pathname:Ge.pathnameBase])})),Re,t,Te);return e&&He?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},Be),navigationType:Action.Pop}},He):He}function DefaultErrorComponent(){let n=useRouteError(),e=isRouteErrorResponse(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,Ee={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:Ee},t):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(n){let{routeContext:e,match:t,children:Te}=n,Ee=reactExports.useContext(DataRouterContext);return Ee&&Ee.static&&Ee.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(Ee.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},Te)}function _renderMatches(n,e,t,Te){var Ee;if(e===void 0&&(e=[]),t===void 0&&(t=null),Te===void 0&&(Te=null),n==null){var Re;if(!t)return null;if(t.errors)n=t.matches;else if((Re=Te)!=null&&Re.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let Ce=n,De=(Ee=t)==null?void 0:Ee.errors;if(De!=null){let Be=Ce.findIndex(Me=>Me.route.id&&De?.[Me.route.id]!==void 0);Be>=0||invariant$1(!1),Ce=Ce.slice(0,Math.min(Ce.length,Be+1))}let $e=!1,Ve=-1;if(t&&Te&&Te.v7_partialHydration)for(let Be=0;Be<Ce.length;Be++){let Me=Ce[Be];if((Me.route.HydrateFallback||Me.route.hydrateFallbackElement)&&(Ve=Be),Me.route.id){let{loaderData:Oe,errors:Ue}=t,ze=Me.route.loader&&Oe[Me.route.id]===void 0&&(!Ue||Ue[Me.route.id]===void 0);if(Me.route.lazy||ze){$e=!0,Ve>=0?Ce=Ce.slice(0,Ve+1):Ce=[Ce[0]];break}}}return Ce.reduceRight((Be,Me,Oe)=>{let Ue,ze=!1,He=null,Ge=null;t&&(Ue=De&&Me.route.id?De[Me.route.id]:void 0,He=Me.route.errorElement||defaultErrorElement,$e&&(Ve<0&&Oe===0?(warningOnce("route-fallback"),ze=!0,Ge=null):Ve===Oe&&(ze=!0,Ge=Me.route.hydrateFallbackElement||null)));let Ke=e.concat(Ce.slice(0,Oe+1)),Xe=()=>{let Je;return Ue?Je=He:ze?Je=Ge:Me.route.Component?Je=reactExports.createElement(Me.route.Component,null):Me.route.element?Je=Me.route.element:Je=Be,reactExports.createElement(RenderedRoute,{match:Me,routeContext:{outlet:Be,matches:Ke,isDataRoute:t!=null},children:Je})};return t&&(Me.route.ErrorBoundary||Me.route.errorElement||Oe===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:He,error:Ue,children:Xe(),routeContext:{outlet:null,matches:Ke,isDataRoute:!0}}):Xe()},null)}var DataRouterHook$1=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(DataRouterHook$1||{}),DataRouterStateHook$1=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(DataRouterStateHook$1||{});function useDataRouterContext(n){let e=reactExports.useContext(DataRouterContext);return e||invariant$1(!1),e}function useDataRouterState(n){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(n){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(n){let e=useRouteContext(),t=e.matches[e.matches.length-1];return t.route.id||invariant$1(!1),t.route.id}function useRouteError(){var n;let e=reactExports.useContext(RouteErrorContext),t=useDataRouterState(),Te=useCurrentRouteId();return e!==void 0?e:(n=t.errors)==null?void 0:n[Te]}function useNavigateStable(){let{router:n}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{t.current=!0}),reactExports.useCallback(function(Ee,Re){Re===void 0&&(Re={}),t.current&&(typeof Ee=="number"?n.navigate(Ee):n.navigate(Ee,_extends$2({fromRouteId:e},Re)))},[n,e])}const alreadyWarned$1={};function warningOnce(n,e,t){alreadyWarned$1[n]||(alreadyWarned$1[n]=!0)}function logV6DeprecationWarnings(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Route(n){invariant$1(!1)}function Router(n){let{basename:e="/",children:t=null,location:Te,navigationType:Ee=Action.Pop,navigator:Re,static:Ce=!1,future:De}=n;useInRouterContext()&&invariant$1(!1);let $e=e.replace(/^\/*/,"/"),Ve=reactExports.useMemo(()=>({basename:$e,navigator:Re,static:Ce,future:_extends$2({v7_relativeSplatPath:!1},De)}),[$e,De,Re,Ce]);typeof Te=="string"&&(Te=parsePath(Te));let{pathname:Be="/",search:Me="",hash:Oe="",state:Ue=null,key:ze="default"}=Te,He=reactExports.useMemo(()=>{let Ge=stripBasename(Be,$e);return Ge==null?null:{location:{pathname:Ge,search:Me,hash:Oe,state:Ue,key:ze},navigationType:Ee}},[$e,Be,Me,Oe,Ue,ze,Ee]);return He==null?null:reactExports.createElement(NavigationContext.Provider,{value:Ve},reactExports.createElement(LocationContext.Provider,{children:t,value:He}))}function Routes(n){let{children:e,location:t}=n;return useRoutes(createRoutesFromChildren(e),t)}new Promise(()=>{});function createRoutesFromChildren(n,e){e===void 0&&(e=[]);let t=[];return reactExports.Children.forEach(n,(Te,Ee)=>{if(!reactExports.isValidElement(Te))return;let Re=[...e,Ee];if(Te.type===reactExports.Fragment){t.push.apply(t,createRoutesFromChildren(Te.props.children,Re));return}Te.type!==Route&&invariant$1(!1),!Te.props.index||!Te.props.children||invariant$1(!1);let Ce={id:Te.props.id||Re.join("-"),caseSensitive:Te.props.caseSensitive,element:Te.props.element,Component:Te.props.Component,index:Te.props.index,path:Te.props.path,loader:Te.props.loader,action:Te.props.action,errorElement:Te.props.errorElement,ErrorBoundary:Te.props.ErrorBoundary,hasErrorBoundary:Te.props.ErrorBoundary!=null||Te.props.errorElement!=null,shouldRevalidate:Te.props.shouldRevalidate,handle:Te.props.handle,lazy:Te.props.lazy};Te.props.children&&(Ce.children=createRoutesFromChildren(Te.props.children,Re)),t.push(Ce)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var Te in t)Object.prototype.hasOwnProperty.call(t,Te)&&(n[Te]=t[Te])}return n},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(n,e){if(n==null)return{};var t={},Te=Object.keys(n),Ee,Re;for(Re=0;Re<Te.length;Re++)Ee=Te[Re],!(e.indexOf(Ee)>=0)&&(t[Ee]=n[Ee]);return t}function isModifiedEvent(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function shouldProcessLinkClick(n,e){return n.button===0&&(!e||e==="_self")&&!isModifiedEvent(n)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(n){let{basename:e,children:t,future:Te,window:Ee}=n,Re=reactExports.useRef();Re.current==null&&(Re.current=createBrowserHistory({window:Ee,v5Compat:!0}));let Ce=Re.current,[De,$e]=reactExports.useState({action:Ce.action,location:Ce.location}),{v7_startTransition:Ve}=Te||{},Be=reactExports.useCallback(Me=>{Ve&&startTransitionImpl?startTransitionImpl(()=>$e(Me)):$e(Me)},[$e,Ve]);return reactExports.useLayoutEffect(()=>Ce.listen(Be),[Ce,Be]),reactExports.useEffect(()=>logV6DeprecationWarnings(Te),[Te]),reactExports.createElement(Router,{basename:e,children:t,location:De.location,navigationType:De.action,navigator:Ce,future:Te})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,t){let{onClick:Te,relative:Ee,reloadDocument:Re,replace:Ce,state:De,target:$e,to:Ve,preventScrollReset:Be,viewTransition:Me}=e,Oe=_objectWithoutPropertiesLoose$1(e,_excluded$1),{basename:Ue}=reactExports.useContext(NavigationContext),ze,He=!1;if(typeof Ve=="string"&&ABSOLUTE_URL_REGEX.test(Ve)&&(ze=Ve,isBrowser$1))try{let Je=new URL(window.location.href),un=Ve.startsWith("//")?new URL(Je.protocol+Ve):new URL(Ve),fn=stripBasename(un.pathname,Ue);un.origin===Je.origin&&fn!=null?Ve=fn+un.search+un.hash:He=!0}catch{}let Ge=useHref(Ve,{relative:Ee}),Ke=useLinkClickHandler(Ve,{replace:Ce,state:De,target:$e,preventScrollReset:Be,relative:Ee,viewTransition:Me});function Xe(Je){Te&&Te(Je),Je.defaultPrevented||Ke(Je)}return reactExports.createElement("a",_extends$1({},Oe,{href:ze||Ge,onClick:He||Re?Te:Xe,ref:t,target:$e}))});var DataRouterHook;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(n,e){let{target:t,replace:Te,state:Ee,preventScrollReset:Re,relative:Ce,viewTransition:De}=e===void 0?{}:e,$e=useNavigate(),Ve=useLocation(),Be=useResolvedPath(n,{relative:Ce});return reactExports.useCallback(Me=>{if(shouldProcessLinkClick(Me,t)){Me.preventDefault();let Oe=Te!==void 0?Te:createPath(Ve)===createPath(Be);$e(n,{replace:Oe,state:Ee,preventScrollReset:Re,relative:Ce,viewTransition:De})}},[Ve,$e,Be,Te,Ee,t,n,Re,Ce,De])}const getDefaultsFromPostinstall=()=>{};var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(n){const e=[];let t=0;for(let Te=0;Te<n.length;Te++){let Ee=n.charCodeAt(Te);Ee<128?e[t++]=Ee:Ee<2048?(e[t++]=Ee>>6|192,e[t++]=Ee&63|128):(Ee&64512)===55296&&Te+1<n.length&&(n.charCodeAt(Te+1)&64512)===56320?(Ee=65536+((Ee&1023)<<10)+(n.charCodeAt(++Te)&1023),e[t++]=Ee>>18|240,e[t++]=Ee>>12&63|128,e[t++]=Ee>>6&63|128,e[t++]=Ee&63|128):(e[t++]=Ee>>12|224,e[t++]=Ee>>6&63|128,e[t++]=Ee&63|128)}return e},byteArrayToString=function(n){const e=[];let t=0,Te=0;for(;t<n.length;){const Ee=n[t++];if(Ee<128)e[Te++]=String.fromCharCode(Ee);else if(Ee>191&&Ee<224){const Re=n[t++];e[Te++]=String.fromCharCode((Ee&31)<<6|Re&63)}else if(Ee>239&&Ee<365){const Re=n[t++],Ce=n[t++],De=n[t++],$e=((Ee&7)<<18|(Re&63)<<12|(Ce&63)<<6|De&63)-65536;e[Te++]=String.fromCharCode(55296+($e>>10)),e[Te++]=String.fromCharCode(56320+($e&1023))}else{const Re=n[t++],Ce=n[t++];e[Te++]=String.fromCharCode((Ee&15)<<12|(Re&63)<<6|Ce&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let Ee=0;Ee<n.length;Ee+=3){const Re=n[Ee],Ce=Ee+1<n.length,De=Ce?n[Ee+1]:0,$e=Ee+2<n.length,Ve=$e?n[Ee+2]:0,Be=Re>>2,Me=(Re&3)<<4|De>>4;let Oe=(De&15)<<2|Ve>>6,Ue=Ve&63;$e||(Ue=64,Ce||(Oe=64)),Te.push(t[Be],t[Me],t[Oe],t[Ue])}return Te.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(stringToByteArray$1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):byteArrayToString(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let Ee=0;Ee<n.length;){const Re=t[n.charAt(Ee++)],De=Ee<n.length?t[n.charAt(Ee)]:0;++Ee;const Ve=Ee<n.length?t[n.charAt(Ee)]:64;++Ee;const Me=Ee<n.length?t[n.charAt(Ee)]:64;if(++Ee,Re==null||De==null||Ve==null||Me==null)throw new DecodeBase64StringError;const Oe=Re<<2|De>>4;if(Te.push(Oe),Ve!==64){const Ue=De<<4&240|Ve>>2;if(Te.push(Ue),Me!==64){const ze=Ve<<6&192|Me;Te.push(ze)}}}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(n){const e=stringToByteArray$1(n);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(n){return base64Encode(n).replace(/\./g,"")},base64Decode=function(n){try{return base64.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const n=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&base64Decode(n[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},getDefaultEmulatorHost=n=>{var e,t;return(t=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},getDefaultEmulatorHostnameAndPort=n=>{const e=getDefaultEmulatorHost(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const Te=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),Te]:[e.substring(0,t),Te]},getDefaultAppConfig=()=>{var n;return(n=getDefaults())===null||n===void 0?void 0:n.config},getExperimentalSetting=n=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,Te)=>{t?this.reject(t):this.resolve(Te),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,Te))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},Te=e||"demo-project",Ee=n.iat||0,Re=n.sub||n.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ce=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:Ee,exp:Ee+3600,auth_time:Ee,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},n);return[base64urlEncodeWithoutPadding(JSON.stringify(t)),base64urlEncodeWithoutPadding(JSON.stringify(Ce)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const n={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?n.emulator.push(e):n.prod.push(e);return n}function getOrCreateEl(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(n,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[n]===e||emulatorStatus[n]||previouslyDismissed)return;emulatorStatus[n]=e;function t(Oe){return`__firebase__banner__${Oe}`}const Te="__firebase__banner",Re=getEmulatorSummary().prod.length>0;function Ce(){const Oe=document.getElementById(Te);Oe&&Oe.remove()}function De(Oe){Oe.style.display="flex",Oe.style.background="#7faaf0",Oe.style.position="fixed",Oe.style.bottom="5px",Oe.style.left="5px",Oe.style.padding=".5em",Oe.style.borderRadius="5px",Oe.style.alignItems="center"}function $e(Oe,Ue){Oe.setAttribute("width","24"),Oe.setAttribute("id",Ue),Oe.setAttribute("height","24"),Oe.setAttribute("viewBox","0 0 24 24"),Oe.setAttribute("fill","none"),Oe.style.marginLeft="-6px"}function Ve(){const Oe=document.createElement("span");return Oe.style.cursor="pointer",Oe.style.marginLeft="16px",Oe.style.fontSize="24px",Oe.innerHTML=" &times;",Oe.onclick=()=>{previouslyDismissed=!0,Ce()},Oe}function Be(Oe,Ue){Oe.setAttribute("id",Ue),Oe.innerText="Learn more",Oe.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",Oe.setAttribute("target","__blank"),Oe.style.paddingLeft="5px",Oe.style.textDecoration="underline"}function Me(){const Oe=getOrCreateEl(Te),Ue=t("text"),ze=document.getElementById(Ue)||document.createElement("span"),He=t("learnmore"),Ge=document.getElementById(He)||document.createElement("a"),Ke=t("preprendIcon"),Xe=document.getElementById(Ke)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(Oe.created){const Je=Oe.element;De(Je),Be(Ge,He);const un=Ve();$e(Xe,Ke),Je.append(Xe,ze,Ge,un),document.body.appendChild(Je)}Re?(ze.innerText="Preview backend disconnected.",Xe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Xe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ze.innerText="Preview backend running in this workspace."),ze.setAttribute("id",Ue)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Me):Me()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var n;const e=(n=getDefaults())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const n=getUA();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((n,e)=>{try{let t=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",Ee=self.indexedDB.open(Te);Ee.onsuccess=()=>{Ee.result.close(),t||self.indexedDB.deleteDatabase(Te),n(!0)},Ee.onupgradeneeded=()=>{t=!1},Ee.onerror=()=>{var Re;e(((Re=Ee.error)===null||Re===void 0?void 0:Re.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,Te){super(t),this.code=e,this.customData=Te,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,Te){this.service=e,this.serviceName=t,this.errors=Te}create(e,...t){const Te=t[0]||{},Ee=`${this.service}/${e}`,Re=this.errors[e],Ce=Re?replaceTemplate(Re,Te):"Error",De=`${this.serviceName}: ${Ce} (${Ee}).`;return new FirebaseError(Ee,De,Te)}}function replaceTemplate(n,e){return n.replace(PATTERN,(t,Te)=>{const Ee=e[Te];return Ee!=null?String(Ee):`<${Te}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function deepEqual(n,e){if(n===e)return!0;const t=Object.keys(n),Te=Object.keys(e);for(const Ee of t){if(!Te.includes(Ee))return!1;const Re=n[Ee],Ce=e[Ee];if(isObject$2(Re)&&isObject$2(Ce)){if(!deepEqual(Re,Ce))return!1}else if(Re!==Ce)return!1}for(const Ee of Te)if(!t.includes(Ee))return!1;return!0}function isObject$2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(n){const e=[];for(const[t,Te]of Object.entries(n))Array.isArray(Te)?Te.forEach(Ee=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(Ee))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(Te));return e.length?"&"+e.join("&"):""}function querystringDecode(n){const e={};return n.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[Ee,Re]=Te.split("=");e[decodeURIComponent(Ee)]=decodeURIComponent(Re)}}),e}function extractQuerystring(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function createSubscribe(n,e){const t=new ObserverProxy(n,e);return t.subscribe.bind(t)}class ObserverProxy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(Te=>{this.error(Te)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,Te){let Ee;if(e===void 0&&t===void 0&&Te===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?Ee=e:Ee={next:e,error:t,complete:Te},Ee.next===void 0&&(Ee.next=noop$2),Ee.error===void 0&&(Ee.error=noop$2),Ee.complete===void 0&&(Ee.complete=noop$2);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ee.error(this.finalError):Ee.complete()}catch{}}),this.observers.push(Ee),Re}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(Te){typeof console<"u"&&console.error&&console.error(Te)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function noop$2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(n){return n&&n._delegate?n._delegate:n}class Component{constructor(e,t,Te){this.name=e,this.instanceFactory=t,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const Te=new Deferred;if(this.instancesDeferred.set(t,Te),this.isInitialized(t)||this.shouldAutoInitialize())try{const Ee=this.getOrInitializeService({instanceIdentifier:t});Ee&&Te.resolve(Ee)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const Te=this.normalizeInstanceIdentifier(e?.identifier),Ee=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(Te)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(Re){if(Ee)return null;throw Re}else{if(Ee)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[t,Te]of this.instancesDeferred.entries()){const Ee=this.normalizeInstanceIdentifier(t);try{const Re=this.getOrInitializeService({instanceIdentifier:Ee});Te.resolve(Re)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,Te=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ee=this.getOrInitializeService({instanceIdentifier:Te,options:t});for(const[Re,Ce]of this.instancesDeferred.entries()){const De=this.normalizeInstanceIdentifier(Re);Te===De&&Ce.resolve(Ee)}return Ee}onInit(e,t){var Te;const Ee=this.normalizeInstanceIdentifier(t),Re=(Te=this.onInitCallbacks.get(Ee))!==null&&Te!==void 0?Te:new Set;Re.add(e),this.onInitCallbacks.set(Ee,Re);const Ce=this.instances.get(Ee);return Ce&&e(Ce,Ee),()=>{Re.delete(e)}}invokeOnInitCallbacks(e,t){const Te=this.onInitCallbacks.get(t);if(Te)for(const Ee of Te)try{Ee(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let Te=this.instances.get(e);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:t}),this.instances.set(e,Te),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(Te,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,Te)}catch{}return Te||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(n){return n===DEFAULT_ENTRY_NAME$1?void 0:n}function isComponentEager(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Provider(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(n,e,...t)=>{if(e<n.logLevel)return;const Te=new Date().toISOString(),Ee=ConsoleMethod[e];if(Ee)console[Ee](`[${Te}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(n,e)=>e.some(t=>n instanceof t);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(n){const e=new Promise((t,Te)=>{const Ee=()=>{n.removeEventListener("success",Re),n.removeEventListener("error",Ce)},Re=()=>{t(wrap$2(n.result)),Ee()},Ce=()=>{Te(n.error),Ee()};n.addEventListener("success",Re),n.addEventListener("error",Ce)});return e.then(t=>{t instanceof IDBCursor&&cursorRequestMap.set(t,n)}).catch(()=>{}),reverseTransformCache.set(e,n),e}function cacheDonePromiseForTransaction(n){if(transactionDoneMap.has(n))return;const e=new Promise((t,Te)=>{const Ee=()=>{n.removeEventListener("complete",Re),n.removeEventListener("error",Ce),n.removeEventListener("abort",Ce)},Re=()=>{t(),Ee()},Ce=()=>{Te(n.error||new DOMException("AbortError","AbortError")),Ee()};n.addEventListener("complete",Re),n.addEventListener("error",Ce),n.addEventListener("abort",Ce)});transactionDoneMap.set(n,e)}let idbProxyTraps={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||transactionStoreNamesMap.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wrap$2(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function replaceTraps(n){idbProxyTraps=n(idbProxyTraps)}function wrapFunction(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const Te=n.call(unwrap(this),e,...t);return transactionStoreNamesMap.set(Te,e.sort?e.sort():[e]),wrap$2(Te)}:getCursorAdvanceMethods().includes(n)?function(...e){return n.apply(unwrap(this),e),wrap$2(cursorRequestMap.get(this))}:function(...e){return wrap$2(n.apply(unwrap(this),e))}}function transformCachableValue(n){return typeof n=="function"?wrapFunction(n):(n instanceof IDBTransaction&&cacheDonePromiseForTransaction(n),instanceOfAny(n,getIdbProxyableTypes())?new Proxy(n,idbProxyTraps):n)}function wrap$2(n){if(n instanceof IDBRequest)return promisifyRequest(n);if(transformCache.has(n))return transformCache.get(n);const e=transformCachableValue(n);return e!==n&&(transformCache.set(n,e),reverseTransformCache.set(e,n)),e}const unwrap=n=>reverseTransformCache.get(n);function openDB(n,e,{blocked:t,upgrade:Te,blocking:Ee,terminated:Re}={}){const Ce=indexedDB.open(n,e),De=wrap$2(Ce);return Te&&Ce.addEventListener("upgradeneeded",$e=>{Te(wrap$2(Ce.result),$e.oldVersion,$e.newVersion,wrap$2(Ce.transaction),$e)}),t&&Ce.addEventListener("blocked",$e=>t($e.oldVersion,$e.newVersion,$e)),De.then($e=>{Re&&$e.addEventListener("close",()=>Re()),Ee&&$e.addEventListener("versionchange",Ve=>Ee(Ve.oldVersion,Ve.newVersion,Ve))}).catch(()=>{}),De}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const t=e.replace(/FromIndex$/,""),Te=e!==t,Ee=writeMethods.includes(t);if(!(t in(Te?IDBIndex:IDBObjectStore).prototype)||!(Ee||readMethods.includes(t)))return;const Re=async function(Ce,...De){const $e=this.transaction(Ce,Ee?"readwrite":"readonly");let Ve=$e.store;return Te&&(Ve=Ve.index(De.shift())),(await Promise.all([Ve[t](...De),Ee&&$e.done]))[0]};return cachedMethods.set(e,Re),Re}replaceTraps(n=>({...n,get:(e,t,Te)=>getMethod(e,t)||n.get(e,t,Te),has:(e,t)=>!!getMethod(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(isVersionServiceProvider(t)){const Te=t.getImmediate();return`${Te.library}/${Te.version}`}else return null}).filter(t=>t).join(" ")}}function isVersionServiceProvider(n){const e=n.getComponent();return e?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(n,e){try{n.container.addComponent(e)}catch(t){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _registerComponent(n){const e=n.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,n);for(const t of _apps.values())_addComponent(t,n);for(const t of _serverApps.values())_addComponent(t,n);return!0}function _getProvider(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _isFirebaseServerApp(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,t,Te){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const Te=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},e),Ee=Te.name;if(typeof Ee!="string"||!Ee)throw ERROR_FACTORY.create("bad-app-name",{appName:String(Ee)});if(t||(t=getDefaultAppConfig()),!t)throw ERROR_FACTORY.create("no-options");const Re=_apps.get(Ee);if(Re){if(deepEqual(t,Re.options)&&deepEqual(Te,Re.config))return Re;throw ERROR_FACTORY.create("duplicate-app",{appName:Ee})}const Ce=new ComponentContainer(Ee);for(const $e of _components.values())Ce.addComponent($e);const De=new FirebaseAppImpl(t,Te,Ce);return _apps.set(Ee,De),De}function getApp(n=DEFAULT_ENTRY_NAME){const e=_apps.get(n);if(!e&&n===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:n});return e}function registerVersion(n,e,t){var Te;let Ee=(Te=PLATFORM_LOG_STRING[n])!==null&&Te!==void 0?Te:n;t&&(Ee+=`-${t}`);const Re=Ee.match(/\s|\//),Ce=e.match(/\s|\//);if(Re||Ce){const De=[`Unable to register library "${Ee}" with version "${e}":`];Re&&De.push(`library name "${Ee}" contains illegal characters (whitespace or "/")`),Re&&Ce&&De.push("and"),Ce&&De.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(De.join(" "));return}_registerComponent(new Component(`${Ee}-version`,()=>({library:Ee,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(STORE_NAME)}catch(t){console.warn(t)}}}}).catch(n=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:n.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(n){try{const t=(await getDbPromise()).transaction(STORE_NAME),Te=await t.objectStore(STORE_NAME).get(computeKey(n));return await t.done,Te}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const t=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(t.message)}}}async function writeHeartbeatsToIndexedDB(n,e){try{const Te=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await Te.objectStore(STORE_NAME).put(e,computeKey(n)),await Te.done}catch(t){if(t instanceof FirebaseError)logger.warn(t.message);else{const Te=ERROR_FACTORY.create("idb-set",{originalErrorMessage:t?.message});logger.warn(Te.message)}}}function computeKey(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(t),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}async triggerHeartbeat(){var e,t;try{const Ee=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Re=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===Re||this._heartbeatsCache.heartbeats.some(Ce=>Ce.date===Re))return;if(this._heartbeatsCache.heartbeats.push({date:Re,agent:Ee}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const Ce=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(Ce,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Te){logger.warn(Te)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=getUTCDateString(),{heartbeatsToSend:Te,unsentEntries:Ee}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),Re=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:Te}));return this._heartbeatsCache.lastSentHeartbeatDate=t,Ee.length>0?(this._heartbeatsCache.heartbeats=Ee,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),Re}catch(t){return logger.warn(t),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(n,e=MAX_HEADER_BYTES){const t=[];let Te=n.slice();for(const Ee of n){const Re=t.find(Ce=>Ce.agent===Ee.agent);if(Re){if(Re.dates.push(Ee.date),countBytes(t)>e){Re.dates.pop();break}}else if(t.push({agent:Ee.agent,dates:[Ee.date]}),countBytes(t)>e){t.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:t,unsentEntries:Te}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await readHeartbeatsFromIndexedDB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const Ee=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:Ee.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const Ee=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:Ee.lastSentHeartbeatDate,heartbeats:[...Ee.heartbeats,...e.heartbeats]})}else return}}function countBytes(n){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n})).length}function getEarliestHeartbeatIdx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let Te=1;Te<n.length;Te++)n[Te].date<t&&(t=n[Te].date,e=Te);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(n){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,n),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest(n,e){var t={};for(var Te in n)Object.prototype.hasOwnProperty.call(n,Te)&&e.indexOf(Te)<0&&(t[Te]=n[Te]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ee=0,Te=Object.getOwnPropertySymbols(n);Ee<Te.length;Ee++)e.indexOf(Te[Ee])<0&&Object.prototype.propertyIsEnumerable.call(n,Te[Ee])&&(t[Te[Ee]]=n[Te[Ee]]);return t}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(n,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${n}`,...e)}function _logError(n,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(n,...e){throw createErrorInternal(n,...e)}function _createError(n,...e){return createErrorInternal(n,...e)}function _errorWithCustomMessage(n,e,t){const Te=Object.assign(Object.assign({},prodErrorMap()),{[e]:t});return new ErrorFactory("auth","Firebase",Te).create(e,{appName:n.name})}function _serverAppCurrentUserOperationNotSupportedError(n){return _errorWithCustomMessage(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(n,e,t){const Te=t;if(!(e instanceof Te))throw Te.name!==e.constructor.name&&_fail(n,"argument-error"),_errorWithCustomMessage(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(n,...e){if(typeof n!="string"){const t=e[0],Te=[...e.slice(1)];return Te[0]&&(Te[0].appName=n.name),n._errorFactory.create(t,...Te)}return _DEFAULT_AUTH_ERROR_FACTORY.create(n,...e)}function _assert(n,e,...t){if(!n)throw createErrorInternal(e,...t)}function debugFail(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _logError(e),new Error(e)}function debugAssert(n,e){n||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,t){this.shortDelay=e,this.longDelay=t,debugAssert(t>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(n,e){debugAssert(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,t,Te){this.fetchImpl=e,t&&(this.headersImpl=t),Te&&(this.responseImpl=Te)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function _performApiRequest(n,e,t,Te,Ee={}){return _performFetchWithErrorHandling(n,Ee,async()=>{let Re={},Ce={};Te&&(e==="GET"?Ce=Te:Re={body:JSON.stringify(Te)});const De=querystring(Object.assign({key:n.config.apiKey},Ce)).slice(1),$e=await n._getAdditionalHeaders();$e["Content-Type"]="application/json",n.languageCode&&($e["X-Firebase-Locale"]=n.languageCode);const Ve=Object.assign({method:e,headers:$e},Re);return isCloudflareWorker()||(Ve.referrerPolicy="no-referrer"),n.emulatorConfig&&isCloudWorkstation(n.emulatorConfig.host)&&(Ve.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(n,n.config.apiHost,t,De),Ve)})}async function _performFetchWithErrorHandling(n,e,t){n._canInitEmulator=!1;const Te=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const Ee=new NetworkTimeout(n),Re=await Promise.race([t(),Ee.promise]);Ee.clearNetworkTimeout();const Ce=await Re.json();if("needConfirmation"in Ce)throw _makeTaggedError(n,"account-exists-with-different-credential",Ce);if(Re.ok&&!("errorMessage"in Ce))return Ce;{const De=Re.ok?Ce.errorMessage:Ce.error.message,[$e,Ve]=De.split(" : ");if($e==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(n,"credential-already-in-use",Ce);if($e==="EMAIL_EXISTS")throw _makeTaggedError(n,"email-already-in-use",Ce);if($e==="USER_DISABLED")throw _makeTaggedError(n,"user-disabled",Ce);const Be=Te[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw _errorWithCustomMessage(n,Be,Ve);_fail(n,Be)}}catch(Ee){if(Ee instanceof FirebaseError)throw Ee;_fail(n,"network-request-failed",{message:String(Ee)})}}async function _performSignInRequest(n,e,t,Te,Ee={}){const Re=await _performApiRequest(n,e,t,Te,Ee);return"mfaPendingCredential"in Re&&_fail(n,"multi-factor-auth-required",{_serverResponse:Re}),Re}async function _getFinalTarget(n,e,t,Te){const Ee=`${e}${t}?${Te}`,Re=n,Ce=Re.config.emulator?_emulatorUrl(n.config,Ee):`${n.config.apiScheme}://${Ee}`;return CookieAuthProxiedEndpoints.includes(t)&&(await Re._persistenceManagerAvailable,Re._getPersistenceType()==="COOKIE")?Re._getPersistence()._getFinalTarget(Ce).toString():Ce}function _parseEnforcementState(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,Te)=>{this.timer=setTimeout(()=>Te(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(n,e,t){const Te={appName:n.name};t.email&&(Te.email=t.email),t.phoneNumber&&(Te.phoneNumber=t.phoneNumber);const Ee=_createError(n,e,Te);return Ee.customData._tokenResponse=t,Ee}function isEnterprise(n){return n!==void 0&&n.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _parseEnforcementState(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(n,e){return _performApiRequest(n,"GET","/v2/recaptchaConfig",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(n,e){return _performApiRequest(n,"POST","/v1/accounts:delete",e)}async function getAccountInfo(n,e){return _performApiRequest(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(n,e=!1){const t=getModularInstance(n),Te=await t.getIdToken(e),Ee=_parseToken(Te);_assert(Ee&&Ee.exp&&Ee.auth_time&&Ee.iat,t.auth,"internal-error");const Re=typeof Ee.firebase=="object"?Ee.firebase:void 0,Ce=Re?.sign_in_provider;return{claims:Ee,token:Te,authTime:utcTimestampToDateString(secondsStringToMilliseconds(Ee.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(Ee.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(Ee.exp)),signInProvider:Ce||null,signInSecondFactor:Re?.sign_in_second_factor||null}}function secondsStringToMilliseconds(n){return Number(n)*1e3}function _parseToken(n){const[e,t,Te]=n.split(".");if(e===void 0||t===void 0||Te===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const Ee=base64Decode(t);return Ee?JSON.parse(Ee):(_logError("Failed to decode base64 JWT payload"),null)}catch(Ee){return _logError("Caught error parsing JWT payload as JSON",Ee?.toString()),null}}function _tokenExpiresIn(n){const e=_parseToken(n);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(n,e,t=!1){if(t)return e;try{return await e}catch(Te){throw Te instanceof FirebaseError&&isUserInvalidated(Te)&&n.auth.currentUser===n&&await n.auth.signOut(),Te}}function isUserInvalidated({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const Te=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),Te}else{this.errorBackoff=3e4;const Ee=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,Ee)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(n){var e;const t=n.auth,Te=await n.getIdToken(),Ee=await _logoutIfInvalidated(n,getAccountInfo(t,{idToken:Te}));_assert(Ee?.users.length,t,"internal-error");const Re=Ee.users[0];n._notifyReloadListener(Re);const Ce=!((e=Re.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(Re.providerUserInfo):[],De=mergeProviderData(n.providerData,Ce),$e=n.isAnonymous,Ve=!(n.email&&Re.passwordHash)&&!De?.length,Be=$e?Ve:!1,Me={uid:Re.localId,displayName:Re.displayName||null,photoURL:Re.photoUrl||null,email:Re.email||null,emailVerified:Re.emailVerified||!1,phoneNumber:Re.phoneNumber||null,tenantId:Re.tenantId||null,providerData:De,metadata:new UserMetadata(Re.createdAt,Re.lastLoginAt),isAnonymous:Be};Object.assign(n,Me)}async function reload(n){const e=getModularInstance(n);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(n,e){return[...n.filter(Te=>!e.some(Ee=>Ee.providerId===Te.providerId)),...e]}function extractProviderData(n){return n.map(e=>{var{providerId:t}=e,Te=__rest(e,["providerId"]);return{providerId:t,uid:Te.rawId||"",displayName:Te.displayName||null,email:Te.email||null,phoneNumber:Te.phoneNumber||null,photoURL:Te.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(n,e){const t=await _performFetchWithErrorHandling(n,{},async()=>{const Te=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:Ee,apiKey:Re}=n.config,Ce=await _getFinalTarget(n,Ee,"/v1/token",`key=${Re}`),De=await n._getAdditionalHeaders();De["Content-Type"]="application/x-www-form-urlencoded";const $e={method:"POST",headers:De,body:Te};return n.emulatorConfig&&isCloudWorkstation(n.emulatorConfig.host)&&($e.credentials="include"),FetchProvider.fetch()(Ce,$e)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function revokeToken(n,e){return _performApiRequest(n,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const t=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:Te,refreshToken:Ee,expiresIn:Re}=await requestStsToken(e,t);this.updateTokensAndExpiration(Te,Ee,Number(Re))}updateTokensAndExpiration(e,t,Te){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+Te*1e3}static fromJSON(e,t){const{refreshToken:Te,accessToken:Ee,expirationTime:Re}=t,Ce=new StsTokenManager;return Te&&(_assert(typeof Te=="string","internal-error",{appName:e}),Ce.refreshToken=Te),Ee&&(_assert(typeof Ee=="string","internal-error",{appName:e}),Ce.accessToken=Ee),Re&&(_assert(typeof Re=="number","internal-error",{appName:e}),Ce.expirationTime=Re),Ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(n,e){_assert(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:t,auth:Te,stsTokenManager:Ee}=e,Re=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=Te,this.stsTokenManager=Ee,this.accessToken=Ee.accessToken,this.displayName=Re.displayName||null,this.email=Re.email||null,this.emailVerified=Re.emailVerified||!1,this.phoneNumber=Re.phoneNumber||null,this.photoURL=Re.photoURL||null,this.isAnonymous=Re.isAnonymous||!1,this.tenantId=Re.tenantId||null,this.providerData=Re.providerData?[...Re.providerData]:[],this.metadata=new UserMetadata(Re.createdAt||void 0,Re.lastLoginAt||void 0)}async getIdToken(e){const t=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let Te=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),Te=!0),t&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),Te&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var Te,Ee,Re,Ce,De,$e,Ve,Be;const Me=(Te=t.displayName)!==null&&Te!==void 0?Te:void 0,Oe=(Ee=t.email)!==null&&Ee!==void 0?Ee:void 0,Ue=(Re=t.phoneNumber)!==null&&Re!==void 0?Re:void 0,ze=(Ce=t.photoURL)!==null&&Ce!==void 0?Ce:void 0,He=(De=t.tenantId)!==null&&De!==void 0?De:void 0,Ge=($e=t._redirectEventId)!==null&&$e!==void 0?$e:void 0,Ke=(Ve=t.createdAt)!==null&&Ve!==void 0?Ve:void 0,Xe=(Be=t.lastLoginAt)!==null&&Be!==void 0?Be:void 0,{uid:Je,emailVerified:un,isAnonymous:fn,providerData:yn,stsTokenManager:gn}=t;_assert(Je&&gn,e,"internal-error");const mn=StsTokenManager.fromJSON(this.name,gn);_assert(typeof Je=="string",e,"internal-error"),assertStringOrUndefined(Me,e.name),assertStringOrUndefined(Oe,e.name),_assert(typeof un=="boolean",e,"internal-error"),_assert(typeof fn=="boolean",e,"internal-error"),assertStringOrUndefined(Ue,e.name),assertStringOrUndefined(ze,e.name),assertStringOrUndefined(He,e.name),assertStringOrUndefined(Ge,e.name),assertStringOrUndefined(Ke,e.name),assertStringOrUndefined(Xe,e.name);const dn=new UserImpl({uid:Je,auth:e,email:Oe,emailVerified:un,displayName:Me,isAnonymous:fn,photoURL:ze,phoneNumber:Ue,tenantId:He,stsTokenManager:mn,createdAt:Ke,lastLoginAt:Xe});return yn&&Array.isArray(yn)&&(dn.providerData=yn.map(vn=>Object.assign({},vn))),Ge&&(dn._redirectEventId=Ge),dn}static async _fromIdTokenResponse(e,t,Te=!1){const Ee=new StsTokenManager;Ee.updateFromServerResponse(t);const Re=new UserImpl({uid:t.localId,auth:e,stsTokenManager:Ee,isAnonymous:Te});return await _reloadWithoutSaving(Re),Re}static async _fromGetAccountInfoResponse(e,t,Te){const Ee=t.users[0];_assert(Ee.localId!==void 0,"internal-error");const Re=Ee.providerUserInfo!==void 0?extractProviderData(Ee.providerUserInfo):[],Ce=!(Ee.email&&Ee.passwordHash)&&!Re?.length,De=new StsTokenManager;De.updateFromIdToken(Te);const $e=new UserImpl({uid:Ee.localId,auth:e,stsTokenManager:De,isAnonymous:Ce}),Ve={uid:Ee.localId,displayName:Ee.displayName||null,photoURL:Ee.photoUrl||null,email:Ee.email||null,emailVerified:Ee.emailVerified||!1,phoneNumber:Ee.phoneNumber||null,tenantId:Ee.tenantId||null,providerData:Re,metadata:new UserMetadata(Ee.createdAt,Ee.lastLoginAt),isAnonymous:!(Ee.email&&Ee.passwordHash)&&!Re?.length};return Object.assign($e,Ve),$e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(n){debugAssert(n instanceof Function,"Expected a class definition");let e=instanceCache.get(n);return e?(debugAssert(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,instanceCache.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(n,e,t){return`firebase:${n}:${e}:${t}`}class PersistenceUserManager{constructor(e,t,Te){this.persistence=e,this.auth=t,this.userKey=Te;const{config:Ee,name:Re}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,Ee.apiKey,Re),this.fullPersistenceKey=_persistenceKeyName("persistence",Ee.apiKey,Re),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return t?UserImpl._fromGetAccountInfoResponse(this.auth,t,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,Te="authUser"){if(!t.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,Te);const Ee=(await Promise.all(t.map(async Ve=>{if(await Ve._isAvailable())return Ve}))).filter(Ve=>Ve);let Re=Ee[0]||_getInstance(inMemoryPersistence);const Ce=_persistenceKeyName(Te,e.config.apiKey,e.name);let De=null;for(const Ve of t)try{const Be=await Ve._get(Ce);if(Be){let Me;if(typeof Be=="string"){const Oe=await getAccountInfo(e,{idToken:Be}).catch(()=>{});if(!Oe)break;Me=await UserImpl._fromGetAccountInfoResponse(e,Oe,Be)}else Me=UserImpl._fromJSON(e,Be);Ve!==Re&&(De=Me),Re=Ve;break}}catch{}const $e=Ee.filter(Ve=>Ve._shouldAllowMigration);return!Re._shouldAllowMigration||!$e.length?new PersistenceUserManager(Re,e,Te):(Re=$e[0],De&&await Re._set(Ce,De.toJSON()),await Promise.all(t.map(async Ve=>{if(Ve!==Re)try{await Ve._remove(Ce)}catch{}})),new PersistenceUserManager(Re,e,Te))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,Te=n.match(t);if(Te?.length===2)return Te[1]}return"Other"}function _isFirefox(n=getUA()){return/firefox\//i.test(n)}function _isSafari(n=getUA()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(n=getUA()){return/crios\//i.test(n)}function _isIEMobile(n=getUA()){return/iemobile/i.test(n)}function _isAndroid(n=getUA()){return/android/i.test(n)}function _isBlackBerry(n=getUA()){return/blackberry/i.test(n)}function _isWebOS(n=getUA()){return/webos/i.test(n)}function _isIOS(n=getUA()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _isIOSStandalone(n=getUA()){var e;return _isIOS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(n=getUA()){return _isIOS(n)||_isAndroid(n)||_isWebOS(n)||_isBlackBerry(n)||/windows phone/i.test(n)||_isIEMobile(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(n,e=[]){let t;switch(n){case"Browser":t=_getBrowserName(getUA());break;case"Worker":t=`${_getBrowserName(getUA())}-${n}`;break;default:t=n}const Te=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${SDK_VERSION}/${Te}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const Te=Re=>new Promise((Ce,De)=>{try{const $e=e(Re);Ce($e)}catch($e){De($e)}});Te.onAbort=t,this.queue.push(Te);const Ee=this.queue.length-1;return()=>{this.queue[Ee]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const Te of this.queue)await Te(e),Te.onAbort&&t.push(Te.onAbort)}catch(Te){t.reverse();for(const Ee of t)try{Ee()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:Te?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(n,e={}){return _performApiRequest(n,"GET","/v2/passwordPolicy",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var t,Te,Ee,Re;const Ce=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=Ce.minPasswordLength)!==null&&t!==void 0?t:MINIMUM_MIN_PASSWORD_LENGTH,Ce.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Ce.maxPasswordLength),Ce.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=Ce.containsLowercaseCharacter),Ce.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=Ce.containsUppercaseCharacter),Ce.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=Ce.containsNumericCharacter),Ce.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Ce.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(Ee=(Te=e.allowedNonAlphanumericCharacters)===null||Te===void 0?void 0:Te.join(""))!==null&&Ee!==void 0?Ee:"",this.forceUpgradeOnSignin=(Re=e.forceUpgradeOnSignin)!==null&&Re!==void 0?Re:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,Te,Ee,Re,Ce,De;const $e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,$e),this.validatePasswordCharacterOptions(e,$e),$e.isValid&&($e.isValid=(t=$e.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),$e.isValid&&($e.isValid=(Te=$e.meetsMaxPasswordLength)!==null&&Te!==void 0?Te:!0),$e.isValid&&($e.isValid=(Ee=$e.containsLowercaseLetter)!==null&&Ee!==void 0?Ee:!0),$e.isValid&&($e.isValid=(Re=$e.containsUppercaseLetter)!==null&&Re!==void 0?Re:!0),$e.isValid&&($e.isValid=(Ce=$e.containsNumericCharacter)!==null&&Ce!==void 0?Ce:!0),$e.isValid&&($e.isValid=(De=$e.containsNonAlphanumericCharacter)!==null&&De!==void 0?De:!0),$e}validatePasswordLengthOptions(e,t){const Te=this.customStrengthOptions.minPasswordLength,Ee=this.customStrengthOptions.maxPasswordLength;Te&&(t.meetsMinPasswordLength=e.length>=Te),Ee&&(t.meetsMaxPasswordLength=e.length<=Ee)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let Te;for(let Ee=0;Ee<e.length;Ee++)Te=e.charAt(Ee),this.updatePasswordCharacterOptionsStatuses(t,Te>="a"&&Te<="z",Te>="A"&&Te<="Z",Te>="0"&&Te<="9",this.allowedNonAlphanumericCharacters.includes(Te))}updatePasswordCharacterOptionsStatuses(e,t,Te,Ee,Re){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=Te)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=Ee)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=Re))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,t,Te,Ee){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=Te,this.config=Ee,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=Ee.sdkClientVersion,this._persistenceManagerAvailable=new Promise(Re=>this._resolvePersistenceManagerAvailable=Re)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_getInstance(t)),this._initializationPromise=this.queue(async()=>{var Te,Ee,Re;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),(Te=this._resolvePersistenceManagerAvailable)===null||Te===void 0||Te.call(this),!this._deleted)){if(!((Ee=this._popupRedirectResolver)===null||Ee===void 0)&&Ee._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((Re=this.currentUser)===null||Re===void 0?void 0:Re.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await getAccountInfo(this,{idToken:e}),Te=await UserImpl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(Te)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_isFirebaseServerApp(this.app)){const Ce=this.app.settings.authIdToken;return Ce?new Promise(De=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(Ce).then(De,De))}):this.directlySetCurrentUser(null)}const Te=await this.assertedPersistence.getCurrentUser();let Ee=Te,Re=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const Ce=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,De=Ee?._redirectEventId,$e=await this.tryRedirectSignIn(e);(!Ce||Ce===De)&&$e?.user&&(Ee=$e.user,Re=!0)}if(!Ee)return this.directlySetCurrentUser(null);if(!Ee._redirectEventId){if(Re)try{await this.beforeStateQueue.runMiddleware(Ee)}catch(Ce){Ee=Te,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Ce))}return Ee?this.reloadAndSetCurrentUserOrClear(Ee):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===Ee._redirectEventId?this.directlySetCurrentUser(Ee):this.reloadAndSetCurrentUserOrClear(Ee)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const t=e?getModularInstance(e):null;return t&&_assert(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),t=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,Te){return this.registerStateListener(this.authStateSubscription,e,t,Te)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,Te){return this.registerStateListener(this.idTokenSubscription,e,t,Te)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const Te=this.onAuthStateChanged(()=>{Te(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),Te={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(Te.tenantId=this.tenantId),await revokeToken(this,Te)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const Te=await this.getOrInitRedirectPersistenceManager(t);return e===null?Te.removeCurrentUser():Te.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_getInstance(e)||this._popupRedirectResolver;_assert(t,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,Te;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((Te=this.redirectUser)===null||Te===void 0?void 0:Te._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const Te=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==Te&&(this.lastNotifiedUid=Te,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,Te,Ee){if(this._deleted)return()=>{};const Re=typeof t=="function"?t:t.next.bind(t);let Ce=!1;const De=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(De,this,"internal-error"),De.then(()=>{Ce||Re(this.currentUser)}),typeof t=="function"){const $e=e.addObserver(t,Te,Ee);return()=>{Ce=!0,$e()}}else{const $e=e.addObserver(t);return()=>{Ce=!0,$e()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const Te=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());Te&&(t["X-Firebase-Client"]=Te);const Ee=await this._getAppCheckToken();return Ee&&(t["X-Firebase-AppCheck"]=Ee),t}async _getAppCheckToken(){var e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&_logWarn(`Error while retrieving App Check token: ${t.error}`),t?.token}}function _castAuth(n){return getModularInstance(n)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(t=>this.observer=t)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(n){externalJSProvider=n}function _loadJS(n){return externalJSProvider.loadJS(n)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",t=!1){async function Te(Re){if(!t){if(Re.tenantId==null&&Re._agentRecaptchaConfig!=null)return Re._agentRecaptchaConfig.siteKey;if(Re.tenantId!=null&&Re._tenantRecaptchaConfigs[Re.tenantId]!==void 0)return Re._tenantRecaptchaConfigs[Re.tenantId].siteKey}return new Promise(async(Ce,De)=>{getRecaptchaConfig(Re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then($e=>{if($e.recaptchaKey===void 0)De(new Error("recaptcha Enterprise site key undefined"));else{const Ve=new RecaptchaConfig($e);return Re.tenantId==null?Re._agentRecaptchaConfig=Ve:Re._tenantRecaptchaConfigs[Re.tenantId]=Ve,Ce(Ve.siteKey)}}).catch($e=>{De($e)})})}function Ee(Re,Ce,De){const $e=window.grecaptcha;isEnterprise($e)?$e.enterprise.ready(()=>{$e.enterprise.execute(Re,{action:e}).then(Ve=>{Ce(Ve)}).catch(()=>{Ce(FAKE_TOKEN)})}):De(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((Re,Ce)=>{Te(this.auth).then(De=>{if(!t&&isEnterprise(window.grecaptcha))Ee(De,Re,Ce);else{if(typeof window>"u"){Ce(new Error("RecaptchaVerifier is only supported in browser"));return}let $e=_recaptchaEnterpriseScriptUrl();$e.length!==0&&($e+=De),_loadJS($e).then(()=>{Ee(De,Re,Ce)}).catch(Ve=>{Ce(Ve)})}}).catch(De=>{Ce(De)})})}}async function injectRecaptchaFields(n,e,t,Te=!1,Ee=!1){const Re=new RecaptchaEnterpriseVerifier(n);let Ce;if(Ee)Ce=FAKE_TOKEN;else try{Ce=await Re.verify(t)}catch{Ce=await Re.verify(t,!0)}const De=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in De){const $e=De.phoneEnrollmentInfo.phoneNumber,Ve=De.phoneEnrollmentInfo.recaptchaToken;Object.assign(De,{phoneEnrollmentInfo:{phoneNumber:$e,recaptchaToken:Ve,captchaResponse:Ce,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in De){const $e=De.phoneSignInInfo.recaptchaToken;Object.assign(De,{phoneSignInInfo:{recaptchaToken:$e,captchaResponse:Ce,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return De}return Te?Object.assign(De,{captchaResp:Ce}):Object.assign(De,{captchaResponse:Ce}),Object.assign(De,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(De,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),De}async function handleRecaptchaFlow(n,e,t,Te,Ee){var Re;if(!((Re=n._getRecaptchaConfig())===null||Re===void 0)&&Re.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const Ce=await injectRecaptchaFields(n,e,t,t==="getOobCode");return Te(n,Ce)}else return Te(n,e).catch(async Ce=>{if(Ce.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const De=await injectRecaptchaFields(n,e,t,t==="getOobCode");return Te(n,De)}else return Promise.reject(Ce)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(n,e){const t=_getProvider(n,"auth");if(t.isInitialized()){const Ee=t.getImmediate(),Re=t.getOptions();if(deepEqual(Re,e??{}))return Ee;_fail(Ee,"already-initialized")}return t.initialize({options:e})}function _initializeAuthInstance(n,e){const t=e?.persistence||[],Te=(Array.isArray(t)?t:[t]).map(_getInstance);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(Te,e?.popupRedirectResolver)}function connectAuthEmulator(n,e,t){const Te=_castAuth(n);_assert(/^https?:\/\//.test(e),Te,"invalid-emulator-scheme");const Ee=!1,Re=extractProtocol(e),{host:Ce,port:De}=extractHostAndPort(e),$e=De===null?"":`:${De}`,Ve={url:`${Re}//${Ce}${$e}/`},Be=Object.freeze({host:Ce,port:De,protocol:Re.replace(":",""),options:Object.freeze({disableWarnings:Ee})});if(!Te._canInitEmulator){_assert(Te.config.emulator&&Te.emulatorConfig,Te,"emulator-config-failed"),_assert(deepEqual(Ve,Te.config.emulator)&&deepEqual(Be,Te.emulatorConfig),Te,"emulator-config-failed");return}Te.config.emulator=Ve,Te.emulatorConfig=Be,Te.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(Ce)?(pingServer(`${Re}//${Ce}${$e}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function extractHostAndPort(n){const e=extractProtocol(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const Te=t[2].split("@").pop()||"",Ee=/^(\[[^\]]+\])(:|$)/.exec(Te);if(Ee){const Re=Ee[1];return{host:Re,port:parsePort(Te.substr(Re.length+1))}}else{const[Re,Ce]=Te.split(":");return{host:Re,port:parsePort(Ce)}}}function parsePort(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function emitEmulatorWarning(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,t){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(n,e){return _performApiRequest(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(n,e))}async function sendOobCode(n,e){return _performApiRequest(n,"POST","/v1/accounts:sendOobCode",_addTidIfNecessary(n,e))}async function sendPasswordResetEmail$1(n,e){return sendOobCode(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(n,e))}async function signInWithEmailLinkForLinking(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,t,Te,Ee=null){super("password",Te),this._email=e,this._password=t,this._tenantId=Ee}static _fromEmailAndPassword(e,t){return new EmailAuthCredential(e,t,"password")}static _fromEmailAndCode(e,t,Te=null){return new EmailAuthCredential(e,t,"emailLink",Te)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,t,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const Te={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,Te,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:t,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_fail("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:Te,signInMethod:Ee}=t,Re=__rest(t,["providerId","signInMethod"]);if(!Te||!Ee)return null;const Ce=new OAuthCredential(Te,Ee);return Ce.idToken=Re.idToken||void 0,Ce.accessToken=Re.accessToken||void 0,Ce.secret=Re.secret,Ce.nonce=Re.nonce,Ce.pendingToken=Re.pendingToken||null,Ce}_getIdTokenResponse(e){const t=this.buildRequest();return signInWithIdp(e,t)}_linkToIdToken(e,t){const Te=this.buildRequest();return Te.idToken=t,signInWithIdp(e,Te)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,signInWithIdp(e,t)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=querystring(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(n){const e=querystringDecode(extractQuerystring(n)).link,t=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,Te=querystringDecode(extractQuerystring(n)).deep_link_id;return(Te?querystringDecode(extractQuerystring(Te)).link:null)||Te||t||e||n}class ActionCodeURL{constructor(e){var t,Te,Ee,Re,Ce,De;const $e=querystringDecode(extractQuerystring(e)),Ve=(t=$e.apiKey)!==null&&t!==void 0?t:null,Be=(Te=$e.oobCode)!==null&&Te!==void 0?Te:null,Me=parseMode((Ee=$e.mode)!==null&&Ee!==void 0?Ee:null);_assert(Ve&&Be&&Me,"argument-error"),this.apiKey=Ve,this.operation=Me,this.code=Be,this.continueUrl=(Re=$e.continueUrl)!==null&&Re!==void 0?Re:null,this.languageCode=(Ce=$e.lang)!==null&&Ce!==void 0?Ce:null,this.tenantId=(De=$e.tenantId)!==null&&De!==void 0?De:null}static parseLink(e){const t=parseDeepLink(e);try{return new ActionCodeURL(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,t){return EmailAuthCredential._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const Te=ActionCodeURL.parseLink(t);return _assert(Te,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,Te.code,Te.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:Te}=e;if(!t&&!Te)return null;try{return GoogleAuthProvider.credential(t,Te)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,t){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:Te}=e;if(!t||!Te)return null;try{return TwitterAuthProvider.credential(t,Te)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signUp",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,Te,Ee=!1){const Re=await UserImpl._fromIdTokenResponse(e,Te,Ee),Ce=providerIdForResponse(Te);return new UserCredentialImpl({user:Re,providerId:Ce,_tokenResponse:Te,operationType:t})}static async _forOperation(e,t,Te){await e._updateTokensIfNecessary(Te,!0);const Ee=providerIdForResponse(Te);return new UserCredentialImpl({user:e,providerId:Ee,_tokenResponse:Te,operationType:t})}}function providerIdForResponse(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,t,Te,Ee){var Re;super(t.code,t.message),this.operationType=Te,this.user=Ee,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(Re=e.tenantId)!==null&&Re!==void 0?Re:void 0,_serverResponse:t.customData._serverResponse,operationType:Te}}static _fromErrorAndOperation(e,t,Te,Ee){return new MultiFactorError(e,t,Te,Ee)}}function _processCredentialSavingMfaContextIfNecessary(n,e,t,Te){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(Re=>{throw Re.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(n,Re,e,Te):Re})}async function _link$1(n,e,t=!1){const Te=await _logoutIfInvalidated(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return UserCredentialImpl._forOperation(n,"link",Te)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(n,e,t=!1){const{auth:Te}=n;if(_isFirebaseServerApp(Te.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(Te));const Ee="reauthenticate";try{const Re=await _logoutIfInvalidated(n,_processCredentialSavingMfaContextIfNecessary(Te,Ee,e,n),t);_assert(Re.idToken,Te,"internal-error");const Ce=_parseToken(Re.idToken);_assert(Ce,Te,"internal-error");const{sub:De}=Ce;return _assert(n.uid===De,Te,"user-mismatch"),UserCredentialImpl._forOperation(n,Ee,Re)}catch(Re){throw Re?.code==="auth/user-not-found"&&_fail(Te,"user-mismatch"),Re}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(n,e,t=!1){if(_isFirebaseServerApp(n.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n));const Te="signIn",Ee=await _processCredentialSavingMfaContextIfNecessary(n,Te,e),Re=await UserCredentialImpl._fromIdTokenResponse(n,Te,Ee);return t||await n._updateCurrentUser(Re.user),Re}async function signInWithCredential(n,e){return _signInWithCredential(_castAuth(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(n){const e=_castAuth(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sendPasswordResetEmail(n,e,t){const Te=_castAuth(n);await handleRecaptchaFlow(Te,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",sendPasswordResetEmail$1)}async function createUserWithEmailAndPassword(n,e,t){if(_isFirebaseServerApp(n.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n));const Te=_castAuth(n),Ce=await handleRecaptchaFlow(Te,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch($e=>{throw $e.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(n),$e}),De=await UserCredentialImpl._fromIdTokenResponse(Te,"signIn",Ce);return await Te._updateCurrentUser(De.user),De}function signInWithEmailAndPassword(n,e,t){return _isFirebaseServerApp(n.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n)):signInWithCredential(getModularInstance(n),EmailAuthProvider.credential(e,t)).catch(async Te=>{throw Te.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(n),Te})}function onIdTokenChanged(n,e,t,Te){return getModularInstance(n).onIdTokenChanged(e,t,Te)}function beforeAuthStateChanged(n,e,t){return getModularInstance(n).beforeAuthStateChanged(e,t)}function onAuthStateChanged(n,e,t,Te){return getModularInstance(n).onAuthStateChanged(e,t,Te)}function signOut(n){return getModularInstance(n).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const Te=this.storage.getItem(t),Ee=this.localCache[t];Te!==Ee&&e(t,Ee,Te)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((Ce,De,$e)=>{this.notifyListeners(Ce,$e)});return}const Te=e.key;t?this.detachListener():this.stopPolling();const Ee=()=>{const Ce=this.storage.getItem(Te);!t&&this.localCache[Te]===Ce||this.notifyListeners(Te,Ce)},Re=this.storage.getItem(Te);_isIE10()&&Re!==e.newValue&&e.newValue!==e.oldValue?setTimeout(Ee,IE10_LOCAL_STORAGE_SYNC_DELAY):Ee()}notifyListeners(e,t){this.localCache[e]=t;const Te=this.listeners[e];if(Te)for(const Ee of Array.from(Te))Ee(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,Te)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:Te}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(Ee=>Ee.isListeningto(e));if(t)return t;const Te=new Receiver(e);return this.receivers.push(Te),Te}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:Te,eventType:Ee,data:Re}=t.data,Ce=this.handlersMap[Ee];if(!Ce?.size)return;t.ports[0].postMessage({status:"ack",eventId:Te,eventType:Ee});const De=Array.from(Ce).map(async Ve=>Ve(t.origin,Re)),$e=await _allSettled(De);t.ports[0].postMessage({status:"done",eventId:Te,eventType:Ee,response:$e})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(n="",e=10){let t="";for(let Te=0;Te<e;Te++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,Te=50){const Ee=typeof MessageChannel<"u"?new MessageChannel:null;if(!Ee)throw new Error("connection_unavailable");let Re,Ce;return new Promise((De,$e)=>{const Ve=_generateEventId("",20);Ee.port1.start();const Be=setTimeout(()=>{$e(new Error("unsupported_event"))},Te);Ce={messageChannel:Ee,onMessage(Me){const Oe=Me;if(Oe.data.eventId===Ve)switch(Oe.data.status){case"ack":clearTimeout(Be),Re=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(Re),De(Oe.data.response);break;default:clearTimeout(Be),clearTimeout(Re),$e(new Error("invalid_response"));break}}},this.handlers.add(Ce),Ee.port1.addEventListener("message",Ce.onMessage),this.target.postMessage({eventType:e,eventId:Ve,data:t},[Ee.port2])}).finally(()=>{Ce&&this.removeMessageHandler(Ce)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(n){_window().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function getObjectStore(n,e){return n.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const n=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(n).toPromise()}function _openDatabase(){const n=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const Te=n.result;try{Te.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(Ee){t(Ee)}}),n.addEventListener("success",async()=>{const Te=n.result;Te.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(Te):(Te.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(n,e,t){const Te=getObjectStore(n,!0).put({[DB_DATA_KEYPATH]:e,value:t});return new DBPromise(Te).toPromise()}async function getObject(n,e){const t=getObjectStore(n,!1).get(e),Te=await new DBPromise(t).toPromise();return Te===void 0?null:Te.value}function _deleteObject(n,e){const t=getObjectStore(n,!0).delete(e);return new DBPromise(t).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let t=0;for(;;)try{const Te=await this._openDb();return await e(Te)}catch(Te){if(t++>_TRANSACTION_RETRY_COUNT)throw Te;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const Te=await this.sender._send("ping",{},800);Te&&!((e=Te[0])===null||e===void 0)&&e.fulfilled&&!((t=Te[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(Te=>_putObject(Te,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(Te=>getObject(Te,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_deleteObject(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(Ee=>{const Re=getObjectStore(Ee,!1).getAll();return new DBPromise(Re).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],Te=new Set;if(e.length!==0)for(const{fbase_key:Ee,value:Re}of e)Te.add(Ee),JSON.stringify(this.localCache[Ee])!==JSON.stringify(Re)&&(this.notifyListeners(Ee,Re),t.push(Ee));for(const Ee of Object.keys(this.localCache))this.localCache[Ee]&&!Te.has(Ee)&&(this.notifyListeners(Ee,null),t.push(Ee));return t}notifyListeners(e,t){this.localCache[e]=t;const Te=this.listeners[e];if(Te)for(const Ee of Array.from(Te))Ee(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(n,e){return e?_getInstance(e):(_assert(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return signInWithIdp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _signIn(n){return _signInWithCredential(n.auth,new IdpCredential(n),n.bypassAuthState)}function _reauth(n){const{auth:e,user:t}=n;return _assert(t,e,"internal-error"),_reauthenticate(t,new IdpCredential(n),n.bypassAuthState)}async function _link(n){const{auth:e,user:t}=n;return _assert(t,e,"internal-error"),_link$1(t,new IdpCredential(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,t,Te,Ee,Re=!1){this.auth=e,this.resolver=Te,this.user=Ee,this.bypassAuthState=Re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Te){this.reject(Te)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:Te,postBody:Ee,tenantId:Re,error:Ce,type:De}=e;if(Ce){this.reject(Ce);return}const $e={auth:this.auth,requestUri:t,sessionId:Te,tenantId:Re||void 0,postBody:Ee||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(De)($e))}catch(Ve){this.reject(Ve)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(n,e,t){if(_isFirebaseServerApp(n.app))return Promise.reject(_createError(n,"operation-not-supported-in-this-environment"));const Te=_castAuth(n);_assertInstanceOf(n,e,FederatedAuthProvider);const Ee=_withDefaultResolver(Te,t);return new PopupOperation(Te,"signInViaPopup",e,Ee).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,t,Te,Ee,Re){super(e,t,Ee,Re),this.provider=Te,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,Te;if(!((Te=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||Te===void 0)&&Te.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,t,Te=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,Te),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const Te=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(Te)}catch(t){e=()=>Promise.reject(t)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(n,e){const t=pendingRedirectKey(e),Te=resolverPersistence(n);if(!await Te._isAvailable())return!1;const Ee=await Te._get(t)==="true";return await Te._remove(t),Ee}function _overrideRedirectResult(n,e){redirectOutcomeMap.set(n._key(),e)}function resolverPersistence(n){return _getInstance(n._redirectPersistence)}function pendingRedirectKey(n){return _persistenceKeyName(PENDING_REDIRECT_KEY,n.config.apiKey,n.name)}async function _getRedirectResult(n,e,t=!1){if(_isFirebaseServerApp(n.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n));const Te=_castAuth(n),Ee=_withDefaultResolver(Te,e),Ce=await new RedirectAction(Te,Ee,t).execute();return Ce&&!t&&(delete Ce.user._redirectEventId,await Te._persistUserIfCurrent(Ce.user),await Te._setRedirectUser(null,e)),Ce}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(Te=>{this.isEventForConsumer(e,Te)&&(t=!0,this.sendToConsumer(e,Te),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var Te;if(e.error&&!isNullRedirectEvent(e)){const Ee=((Te=e.error.code)===null||Te===void 0?void 0:Te.split("auth/")[1])||"internal-error";t.onError(_createError(this.auth,Ee))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const Te=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&Te}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(n,e={}){return _performApiRequest(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(n);for(const t of e)try{if(matchDomain(t))return}catch{}_fail(n,"unauthorized-domain")}function matchDomain(n){const e=_getCurrentUrl(),{protocol:t,hostname:Te}=new URL(e);if(n.startsWith("chrome-extension://")){const Ce=new URL(n);return Ce.hostname===""&&Te===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&Ce.hostname===Te}if(!HTTP_REGEX.test(t))return!1;if(IP_ADDRESS_REGEX.test(n))return Te===n;const Ee=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Ee+"|"+Ee+")$","i").test(Te)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const n=_window().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function loadGapi(n){return new Promise((e,t)=>{var Te,Ee,Re;function Ce(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),t(_createError(n,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((Ee=(Te=_window().gapi)===null||Te===void 0?void 0:Te.iframes)===null||Ee===void 0)&&Ee.Iframe)e(gapi.iframes.getContext());else if(!((Re=_window().gapi)===null||Re===void 0)&&Re.load)Ce();else{const De=_generateCallbackName("iframefcb");return _window()[De]=()=>{gapi.load?Ce():t(_createError(n,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${De}`).catch($e=>t($e))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(n){return cachedGApiLoader=cachedGApiLoader||loadGapi(n),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(n){const e=n.config;_assert(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${n.config.authDomain}/${IFRAME_PATH}`,Te={apiKey:e.apiKey,appName:n.name,v:SDK_VERSION},Ee=EID_FROM_APIHOST.get(n.config.apiHost);Ee&&(Te.eid=Ee);const Re=n._getFrameworks();return Re.length&&(Te.fw=Re.join(",")),`${t}?${querystring(Te).slice(1)}`}async function _openIframe(n){const e=await _loadGapi(n),t=_window().gapi;return _assert(t,n,"internal-error"),e.open({where:document.body,url:getIframeUrl(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},Te=>new Promise(async(Ee,Re)=>{await Te.restyle({setHideOnLeave:!1});const Ce=_createError(n,"network-request-failed"),De=_window().setTimeout(()=>{Re(Ce)},PING_TIMEOUT.get());function $e(){_window().clearTimeout(De),Ee(Te)}Te.ping($e).then($e,()=>{Re(Ce)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(n,e,t,Te=DEFAULT_WIDTH,Ee=DEFAULT_HEIGHT){const Re=Math.max((window.screen.availHeight-Ee)/2,0).toString(),Ce=Math.max((window.screen.availWidth-Te)/2,0).toString();let De="";const $e=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:Te.toString(),height:Ee.toString(),top:Re,left:Ce}),Ve=getUA().toLowerCase();t&&(De=_isChromeIOS(Ve)?TARGET_BLANK:t),_isFirefox(Ve)&&(e=e||FIREFOX_EMPTY_URL,$e.scrollbars="yes");const Be=Object.entries($e).reduce((Oe,[Ue,ze])=>`${Oe}${Ue}=${ze},`,"");if(_isIOSStandalone(Ve)&&De!=="_self")return openAsNewWindowIOS(e||"",De),new AuthPopup(null);const Me=window.open(e||"",De,Be);_assert(Me,n,"popup-blocked");try{Me.focus()}catch{}return new AuthPopup(Me)}function openAsNewWindowIOS(n,e){const t=document.createElement("a");t.href=n,t.target=e;const Te=document.createEvent("MouseEvent");Te.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(Te)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(n,e,t,Te,Ee,Re){_assert(n.config.authDomain,n,"auth-domain-config-required"),_assert(n.config.apiKey,n,"invalid-api-key");const Ce={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:Te,v:SDK_VERSION,eventId:Ee};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(n.languageCode),Ce.providerId=e.providerId||"",isEmpty$2(e.getCustomParameters())||(Ce.customParameters=JSON.stringify(e.getCustomParameters()));for(const[Be,Me]of Object.entries({}))Ce[Be]=Me}if(e instanceof BaseOAuthProvider){const Be=e.getScopes().filter(Me=>Me!=="");Be.length>0&&(Ce.scopes=Be.join(","))}n.tenantId&&(Ce.tid=n.tenantId);const De=Ce;for(const Be of Object.keys(De))De[Be]===void 0&&delete De[Be];const $e=await n._getAppCheckToken(),Ve=$e?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent($e)}`:"";return`${getHandlerBase(n)}?${querystring(De).slice(1)}${Ve}`}function getHandlerBase({config:n}){return n.emulator?_emulatorUrl(n,EMULATOR_WIDGET_PATH):`https://${n.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,t,Te,Ee){var Re;debugAssert((Re=this.eventManagers[e._key()])===null||Re===void 0?void 0:Re.manager,"_initialize() not called before _openPopup()");const Ce=await _getRedirectUrl(e,t,Te,_getCurrentUrl(),Ee);return _open(e,Ce,_generateEventId())}async _openRedirect(e,t,Te,Ee){await this._originValidation(e);const Re=await _getRedirectUrl(e,t,Te,_getCurrentUrl(),Ee);return _setWindowLocation(Re),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:Ee,promise:Re}=this.eventManagers[t];return Ee?Promise.resolve(Ee):(debugAssert(Re,"If manager is not set, promise should be"),Re)}const Te=this.initAndGetManager(e);return this.eventManagers[t]={promise:Te},Te.catch(()=>{delete this.eventManagers[t]}),Te}async initAndGetManager(e){const t=await _openIframe(e),Te=new AuthEventManager(e);return t.register("authEvent",Ee=>(_assert(Ee?.authEvent,e,"invalid-auth-event"),{status:Te.onEvent(Ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:Te},this.iframes[e._key()]=t,Te}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},Ee=>{var Re;const Ce=(Re=Ee?.[0])===null||Re===void 0?void 0:Re[WEB_STORAGE_SUPPORT_KEY];Ce!==void 0&&t(!!Ce),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_validateOrigin(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$3="@firebase/auth",version$1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(Te=>{e(Te?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(n){_registerComponent(new Component("auth",(e,{options:t})=>{const Te=e.getProvider("app").getImmediate(),Ee=e.getProvider("heartbeat"),Re=e.getProvider("app-check-internal"),{apiKey:Ce,authDomain:De}=Te.options;_assert(Ce&&!Ce.includes(":"),"invalid-api-key",{appName:Te.name});const $e={apiKey:Ce,authDomain:De,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(n)},Ve=new AuthImpl(Te,Ee,Re,$e);return _initializeAuthInstance(Ve,t),Ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,Te)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const t=_castAuth(e.getProvider("auth").getImmediate());return(Te=>new AuthInterop(Te))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$3,version$1,getVersionForPlatform(n)),registerVersion(name$3,version$1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=n=>async e=>{const t=e&&await e.getIdTokenResult(),Te=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(Te&&Te>authIdTokenMaxAge)return;const Ee=t?.token;lastPostedIdToken!==Ee&&(lastPostedIdToken=Ee,await fetch(n,{method:Ee?"POST":"DELETE",headers:Ee?{Authorization:`Bearer ${Ee}`}:{}}))};function getAuth(n=getApp()){const e=_getProvider(n,"auth");if(e.isInitialized())return e.getImmediate();const t=initializeAuth(n,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),Te=getExperimentalSetting("authTokenSyncURL");if(Te&&typeof isSecureContext=="boolean"&&isSecureContext){const Re=new URL(Te,location.origin);if(location.origin===Re.origin){const Ce=mintCookieFactory(Re.toString());beforeAuthStateChanged(t,Ce,()=>Ce(t.currentUser)),onIdTokenChanged(t,De=>Ce(De))}}const Ee=getDefaultEmulatorHost("auth");return Ee&&connectAuthEmulator(t,`http://${Ee}`),t}function getScriptParentElement(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(n){return new Promise((e,t)=>{const Te=document.createElement("script");Te.setAttribute("src",n),Te.onload=e,Te.onerror=Ee=>{const Re=_createError("internal-error");Re.customData=Ee,t(Re)},Te.type="text/javascript",Te.charset="UTF-8",getScriptParentElement().appendChild(Te)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name$2="firebase",version="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$2,version,"app");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(gn,mn){function dn(){}dn.prototype=mn.prototype,gn.D=mn.prototype,gn.prototype=new dn,gn.prototype.constructor=gn,gn.C=function(vn,bn,Tn){for(var En=Array(arguments.length-2),In=2;In<arguments.length;In++)En[In-2]=arguments[In];return mn.prototype[bn].apply(vn,En)}}function t(){this.blockSize=-1}function Te(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(Te,t),Te.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function Ee(gn,mn,dn){dn||(dn=0);var vn=Array(16);if(typeof mn=="string")for(var bn=0;16>bn;++bn)vn[bn]=mn.charCodeAt(dn++)|mn.charCodeAt(dn++)<<8|mn.charCodeAt(dn++)<<16|mn.charCodeAt(dn++)<<24;else for(bn=0;16>bn;++bn)vn[bn]=mn[dn++]|mn[dn++]<<8|mn[dn++]<<16|mn[dn++]<<24;mn=gn.g[0],dn=gn.g[1],bn=gn.g[2];var Tn=gn.g[3],En=mn+(Tn^dn&(bn^Tn))+vn[0]+3614090360&4294967295;mn=dn+(En<<7&4294967295|En>>>25),En=Tn+(bn^mn&(dn^bn))+vn[1]+3905402710&4294967295,Tn=mn+(En<<12&4294967295|En>>>20),En=bn+(dn^Tn&(mn^dn))+vn[2]+606105819&4294967295,bn=Tn+(En<<17&4294967295|En>>>15),En=dn+(mn^bn&(Tn^mn))+vn[3]+3250441966&4294967295,dn=bn+(En<<22&4294967295|En>>>10),En=mn+(Tn^dn&(bn^Tn))+vn[4]+4118548399&4294967295,mn=dn+(En<<7&4294967295|En>>>25),En=Tn+(bn^mn&(dn^bn))+vn[5]+1200080426&4294967295,Tn=mn+(En<<12&4294967295|En>>>20),En=bn+(dn^Tn&(mn^dn))+vn[6]+2821735955&4294967295,bn=Tn+(En<<17&4294967295|En>>>15),En=dn+(mn^bn&(Tn^mn))+vn[7]+4249261313&4294967295,dn=bn+(En<<22&4294967295|En>>>10),En=mn+(Tn^dn&(bn^Tn))+vn[8]+1770035416&4294967295,mn=dn+(En<<7&4294967295|En>>>25),En=Tn+(bn^mn&(dn^bn))+vn[9]+2336552879&4294967295,Tn=mn+(En<<12&4294967295|En>>>20),En=bn+(dn^Tn&(mn^dn))+vn[10]+4294925233&4294967295,bn=Tn+(En<<17&4294967295|En>>>15),En=dn+(mn^bn&(Tn^mn))+vn[11]+2304563134&4294967295,dn=bn+(En<<22&4294967295|En>>>10),En=mn+(Tn^dn&(bn^Tn))+vn[12]+1804603682&4294967295,mn=dn+(En<<7&4294967295|En>>>25),En=Tn+(bn^mn&(dn^bn))+vn[13]+4254626195&4294967295,Tn=mn+(En<<12&4294967295|En>>>20),En=bn+(dn^Tn&(mn^dn))+vn[14]+2792965006&4294967295,bn=Tn+(En<<17&4294967295|En>>>15),En=dn+(mn^bn&(Tn^mn))+vn[15]+1236535329&4294967295,dn=bn+(En<<22&4294967295|En>>>10),En=mn+(bn^Tn&(dn^bn))+vn[1]+4129170786&4294967295,mn=dn+(En<<5&4294967295|En>>>27),En=Tn+(dn^bn&(mn^dn))+vn[6]+3225465664&4294967295,Tn=mn+(En<<9&4294967295|En>>>23),En=bn+(mn^dn&(Tn^mn))+vn[11]+643717713&4294967295,bn=Tn+(En<<14&4294967295|En>>>18),En=dn+(Tn^mn&(bn^Tn))+vn[0]+3921069994&4294967295,dn=bn+(En<<20&4294967295|En>>>12),En=mn+(bn^Tn&(dn^bn))+vn[5]+3593408605&4294967295,mn=dn+(En<<5&4294967295|En>>>27),En=Tn+(dn^bn&(mn^dn))+vn[10]+38016083&4294967295,Tn=mn+(En<<9&4294967295|En>>>23),En=bn+(mn^dn&(Tn^mn))+vn[15]+3634488961&4294967295,bn=Tn+(En<<14&4294967295|En>>>18),En=dn+(Tn^mn&(bn^Tn))+vn[4]+3889429448&4294967295,dn=bn+(En<<20&4294967295|En>>>12),En=mn+(bn^Tn&(dn^bn))+vn[9]+568446438&4294967295,mn=dn+(En<<5&4294967295|En>>>27),En=Tn+(dn^bn&(mn^dn))+vn[14]+3275163606&4294967295,Tn=mn+(En<<9&4294967295|En>>>23),En=bn+(mn^dn&(Tn^mn))+vn[3]+4107603335&4294967295,bn=Tn+(En<<14&4294967295|En>>>18),En=dn+(Tn^mn&(bn^Tn))+vn[8]+1163531501&4294967295,dn=bn+(En<<20&4294967295|En>>>12),En=mn+(bn^Tn&(dn^bn))+vn[13]+2850285829&4294967295,mn=dn+(En<<5&4294967295|En>>>27),En=Tn+(dn^bn&(mn^dn))+vn[2]+4243563512&4294967295,Tn=mn+(En<<9&4294967295|En>>>23),En=bn+(mn^dn&(Tn^mn))+vn[7]+1735328473&4294967295,bn=Tn+(En<<14&4294967295|En>>>18),En=dn+(Tn^mn&(bn^Tn))+vn[12]+2368359562&4294967295,dn=bn+(En<<20&4294967295|En>>>12),En=mn+(dn^bn^Tn)+vn[5]+4294588738&4294967295,mn=dn+(En<<4&4294967295|En>>>28),En=Tn+(mn^dn^bn)+vn[8]+2272392833&4294967295,Tn=mn+(En<<11&4294967295|En>>>21),En=bn+(Tn^mn^dn)+vn[11]+1839030562&4294967295,bn=Tn+(En<<16&4294967295|En>>>16),En=dn+(bn^Tn^mn)+vn[14]+4259657740&4294967295,dn=bn+(En<<23&4294967295|En>>>9),En=mn+(dn^bn^Tn)+vn[1]+2763975236&4294967295,mn=dn+(En<<4&4294967295|En>>>28),En=Tn+(mn^dn^bn)+vn[4]+1272893353&4294967295,Tn=mn+(En<<11&4294967295|En>>>21),En=bn+(Tn^mn^dn)+vn[7]+4139469664&4294967295,bn=Tn+(En<<16&4294967295|En>>>16),En=dn+(bn^Tn^mn)+vn[10]+3200236656&4294967295,dn=bn+(En<<23&4294967295|En>>>9),En=mn+(dn^bn^Tn)+vn[13]+681279174&4294967295,mn=dn+(En<<4&4294967295|En>>>28),En=Tn+(mn^dn^bn)+vn[0]+3936430074&4294967295,Tn=mn+(En<<11&4294967295|En>>>21),En=bn+(Tn^mn^dn)+vn[3]+3572445317&4294967295,bn=Tn+(En<<16&4294967295|En>>>16),En=dn+(bn^Tn^mn)+vn[6]+76029189&4294967295,dn=bn+(En<<23&4294967295|En>>>9),En=mn+(dn^bn^Tn)+vn[9]+3654602809&4294967295,mn=dn+(En<<4&4294967295|En>>>28),En=Tn+(mn^dn^bn)+vn[12]+3873151461&4294967295,Tn=mn+(En<<11&4294967295|En>>>21),En=bn+(Tn^mn^dn)+vn[15]+530742520&4294967295,bn=Tn+(En<<16&4294967295|En>>>16),En=dn+(bn^Tn^mn)+vn[2]+3299628645&4294967295,dn=bn+(En<<23&4294967295|En>>>9),En=mn+(bn^(dn|~Tn))+vn[0]+4096336452&4294967295,mn=dn+(En<<6&4294967295|En>>>26),En=Tn+(dn^(mn|~bn))+vn[7]+1126891415&4294967295,Tn=mn+(En<<10&4294967295|En>>>22),En=bn+(mn^(Tn|~dn))+vn[14]+2878612391&4294967295,bn=Tn+(En<<15&4294967295|En>>>17),En=dn+(Tn^(bn|~mn))+vn[5]+4237533241&4294967295,dn=bn+(En<<21&4294967295|En>>>11),En=mn+(bn^(dn|~Tn))+vn[12]+1700485571&4294967295,mn=dn+(En<<6&4294967295|En>>>26),En=Tn+(dn^(mn|~bn))+vn[3]+2399980690&4294967295,Tn=mn+(En<<10&4294967295|En>>>22),En=bn+(mn^(Tn|~dn))+vn[10]+4293915773&4294967295,bn=Tn+(En<<15&4294967295|En>>>17),En=dn+(Tn^(bn|~mn))+vn[1]+2240044497&4294967295,dn=bn+(En<<21&4294967295|En>>>11),En=mn+(bn^(dn|~Tn))+vn[8]+1873313359&4294967295,mn=dn+(En<<6&4294967295|En>>>26),En=Tn+(dn^(mn|~bn))+vn[15]+4264355552&4294967295,Tn=mn+(En<<10&4294967295|En>>>22),En=bn+(mn^(Tn|~dn))+vn[6]+2734768916&4294967295,bn=Tn+(En<<15&4294967295|En>>>17),En=dn+(Tn^(bn|~mn))+vn[13]+1309151649&4294967295,dn=bn+(En<<21&4294967295|En>>>11),En=mn+(bn^(dn|~Tn))+vn[4]+4149444226&4294967295,mn=dn+(En<<6&4294967295|En>>>26),En=Tn+(dn^(mn|~bn))+vn[11]+3174756917&4294967295,Tn=mn+(En<<10&4294967295|En>>>22),En=bn+(mn^(Tn|~dn))+vn[2]+718787259&4294967295,bn=Tn+(En<<15&4294967295|En>>>17),En=dn+(Tn^(bn|~mn))+vn[9]+3951481745&4294967295,gn.g[0]=gn.g[0]+mn&4294967295,gn.g[1]=gn.g[1]+(bn+(En<<21&4294967295|En>>>11))&4294967295,gn.g[2]=gn.g[2]+bn&4294967295,gn.g[3]=gn.g[3]+Tn&4294967295}Te.prototype.u=function(gn,mn){mn===void 0&&(mn=gn.length);for(var dn=mn-this.blockSize,vn=this.B,bn=this.h,Tn=0;Tn<mn;){if(bn==0)for(;Tn<=dn;)Ee(this,gn,Tn),Tn+=this.blockSize;if(typeof gn=="string"){for(;Tn<mn;)if(vn[bn++]=gn.charCodeAt(Tn++),bn==this.blockSize){Ee(this,vn),bn=0;break}}else for(;Tn<mn;)if(vn[bn++]=gn[Tn++],bn==this.blockSize){Ee(this,vn),bn=0;break}}this.h=bn,this.o+=mn},Te.prototype.v=function(){var gn=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);gn[0]=128;for(var mn=1;mn<gn.length-8;++mn)gn[mn]=0;var dn=8*this.o;for(mn=gn.length-8;mn<gn.length;++mn)gn[mn]=dn&255,dn/=256;for(this.u(gn),gn=Array(16),mn=dn=0;4>mn;++mn)for(var vn=0;32>vn;vn+=8)gn[dn++]=this.g[mn]>>>vn&255;return gn};function Re(gn,mn){var dn=De;return Object.prototype.hasOwnProperty.call(dn,gn)?dn[gn]:dn[gn]=mn(gn)}function Ce(gn,mn){this.h=mn;for(var dn=[],vn=!0,bn=gn.length-1;0<=bn;bn--){var Tn=gn[bn]|0;vn&&Tn==mn||(dn[bn]=Tn,vn=!1)}this.g=dn}var De={};function $e(gn){return-128<=gn&&128>gn?Re(gn,function(mn){return new Ce([mn|0],0>mn?-1:0)}):new Ce([gn|0],0>gn?-1:0)}function Ve(gn){if(isNaN(gn)||!isFinite(gn))return Me;if(0>gn)return Ge(Ve(-gn));for(var mn=[],dn=1,vn=0;gn>=dn;vn++)mn[vn]=gn/dn|0,dn*=4294967296;return new Ce(mn,0)}function Be(gn,mn){if(gn.length==0)throw Error("number format error: empty string");if(mn=mn||10,2>mn||36<mn)throw Error("radix out of range: "+mn);if(gn.charAt(0)=="-")return Ge(Be(gn.substring(1),mn));if(0<=gn.indexOf("-"))throw Error('number format error: interior "-" character');for(var dn=Ve(Math.pow(mn,8)),vn=Me,bn=0;bn<gn.length;bn+=8){var Tn=Math.min(8,gn.length-bn),En=parseInt(gn.substring(bn,bn+Tn),mn);8>Tn?(Tn=Ve(Math.pow(mn,Tn)),vn=vn.j(Tn).add(Ve(En))):(vn=vn.j(dn),vn=vn.add(Ve(En)))}return vn}var Me=$e(0),Oe=$e(1),Ue=$e(16777216);n=Ce.prototype,n.m=function(){if(He(this))return-Ge(this).m();for(var gn=0,mn=1,dn=0;dn<this.g.length;dn++){var vn=this.i(dn);gn+=(0<=vn?vn:4294967296+vn)*mn,mn*=4294967296}return gn},n.toString=function(gn){if(gn=gn||10,2>gn||36<gn)throw Error("radix out of range: "+gn);if(ze(this))return"0";if(He(this))return"-"+Ge(this).toString(gn);for(var mn=Ve(Math.pow(gn,6)),dn=this,vn="";;){var bn=un(dn,mn).g;dn=Ke(dn,bn.j(mn));var Tn=((0<dn.g.length?dn.g[0]:dn.h)>>>0).toString(gn);if(dn=bn,ze(dn))return Tn+vn;for(;6>Tn.length;)Tn="0"+Tn;vn=Tn+vn}},n.i=function(gn){return 0>gn?0:gn<this.g.length?this.g[gn]:this.h};function ze(gn){if(gn.h!=0)return!1;for(var mn=0;mn<gn.g.length;mn++)if(gn.g[mn]!=0)return!1;return!0}function He(gn){return gn.h==-1}n.l=function(gn){return gn=Ke(this,gn),He(gn)?-1:ze(gn)?0:1};function Ge(gn){for(var mn=gn.g.length,dn=[],vn=0;vn<mn;vn++)dn[vn]=~gn.g[vn];return new Ce(dn,~gn.h).add(Oe)}n.abs=function(){return He(this)?Ge(this):this},n.add=function(gn){for(var mn=Math.max(this.g.length,gn.g.length),dn=[],vn=0,bn=0;bn<=mn;bn++){var Tn=vn+(this.i(bn)&65535)+(gn.i(bn)&65535),En=(Tn>>>16)+(this.i(bn)>>>16)+(gn.i(bn)>>>16);vn=En>>>16,Tn&=65535,En&=65535,dn[bn]=En<<16|Tn}return new Ce(dn,dn[dn.length-1]&-2147483648?-1:0)};function Ke(gn,mn){return gn.add(Ge(mn))}n.j=function(gn){if(ze(this)||ze(gn))return Me;if(He(this))return He(gn)?Ge(this).j(Ge(gn)):Ge(Ge(this).j(gn));if(He(gn))return Ge(this.j(Ge(gn)));if(0>this.l(Ue)&&0>gn.l(Ue))return Ve(this.m()*gn.m());for(var mn=this.g.length+gn.g.length,dn=[],vn=0;vn<2*mn;vn++)dn[vn]=0;for(vn=0;vn<this.g.length;vn++)for(var bn=0;bn<gn.g.length;bn++){var Tn=this.i(vn)>>>16,En=this.i(vn)&65535,In=gn.i(bn)>>>16,Nn=gn.i(bn)&65535;dn[2*vn+2*bn]+=En*Nn,Xe(dn,2*vn+2*bn),dn[2*vn+2*bn+1]+=Tn*Nn,Xe(dn,2*vn+2*bn+1),dn[2*vn+2*bn+1]+=En*In,Xe(dn,2*vn+2*bn+1),dn[2*vn+2*bn+2]+=Tn*In,Xe(dn,2*vn+2*bn+2)}for(vn=0;vn<mn;vn++)dn[vn]=dn[2*vn+1]<<16|dn[2*vn];for(vn=mn;vn<2*mn;vn++)dn[vn]=0;return new Ce(dn,0)};function Xe(gn,mn){for(;(gn[mn]&65535)!=gn[mn];)gn[mn+1]+=gn[mn]>>>16,gn[mn]&=65535,mn++}function Je(gn,mn){this.g=gn,this.h=mn}function un(gn,mn){if(ze(mn))throw Error("division by zero");if(ze(gn))return new Je(Me,Me);if(He(gn))return mn=un(Ge(gn),mn),new Je(Ge(mn.g),Ge(mn.h));if(He(mn))return mn=un(gn,Ge(mn)),new Je(Ge(mn.g),mn.h);if(30<gn.g.length){if(He(gn)||He(mn))throw Error("slowDivide_ only works with positive integers.");for(var dn=Oe,vn=mn;0>=vn.l(gn);)dn=fn(dn),vn=fn(vn);var bn=yn(dn,1),Tn=yn(vn,1);for(vn=yn(vn,2),dn=yn(dn,2);!ze(vn);){var En=Tn.add(vn);0>=En.l(gn)&&(bn=bn.add(dn),Tn=En),vn=yn(vn,1),dn=yn(dn,1)}return mn=Ke(gn,bn.j(mn)),new Je(bn,mn)}for(bn=Me;0<=gn.l(mn);){for(dn=Math.max(1,Math.floor(gn.m()/mn.m())),vn=Math.ceil(Math.log(dn)/Math.LN2),vn=48>=vn?1:Math.pow(2,vn-48),Tn=Ve(dn),En=Tn.j(mn);He(En)||0<En.l(gn);)dn-=vn,Tn=Ve(dn),En=Tn.j(mn);ze(Tn)&&(Tn=Oe),bn=bn.add(Tn),gn=Ke(gn,En)}return new Je(bn,gn)}n.A=function(gn){return un(this,gn).h},n.and=function(gn){for(var mn=Math.max(this.g.length,gn.g.length),dn=[],vn=0;vn<mn;vn++)dn[vn]=this.i(vn)&gn.i(vn);return new Ce(dn,this.h&gn.h)},n.or=function(gn){for(var mn=Math.max(this.g.length,gn.g.length),dn=[],vn=0;vn<mn;vn++)dn[vn]=this.i(vn)|gn.i(vn);return new Ce(dn,this.h|gn.h)},n.xor=function(gn){for(var mn=Math.max(this.g.length,gn.g.length),dn=[],vn=0;vn<mn;vn++)dn[vn]=this.i(vn)^gn.i(vn);return new Ce(dn,this.h^gn.h)};function fn(gn){for(var mn=gn.g.length+1,dn=[],vn=0;vn<mn;vn++)dn[vn]=gn.i(vn)<<1|gn.i(vn-1)>>>31;return new Ce(dn,gn.h)}function yn(gn,mn){var dn=mn>>5;mn%=32;for(var vn=gn.g.length-dn,bn=[],Tn=0;Tn<vn;Tn++)bn[Tn]=0<mn?gn.i(Tn+dn)>>>mn|gn.i(Tn+dn+1)<<32-mn:gn.i(Tn+dn);return new Ce(bn,gn.h)}Te.prototype.digest=Te.prototype.v,Te.prototype.reset=Te.prototype.s,Te.prototype.update=Te.prototype.u,Md5=Te,Ce.prototype.add=Ce.prototype.add,Ce.prototype.multiply=Ce.prototype.j,Ce.prototype.modulo=Ce.prototype.A,Ce.prototype.compare=Ce.prototype.l,Ce.prototype.toNumber=Ce.prototype.m,Ce.prototype.toString=Ce.prototype.toString,Ce.prototype.getBits=Ce.prototype.i,Ce.fromNumber=Ve,Ce.fromString=Be,Integer=Ce}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(Ze,Sn,Mn){return Ze==Array.prototype||Ze==Object.prototype||(Ze[Sn]=Mn.value),Ze};function t(Ze){Ze=[typeof globalThis=="object"&&globalThis,Ze,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var Sn=0;Sn<Ze.length;++Sn){var Mn=Ze[Sn];if(Mn&&Mn.Math==Math)return Mn}throw Error("Cannot find global object")}var Te=t(this);function Ee(Ze,Sn){if(Sn)e:{var Mn=Te;Ze=Ze.split(".");for(var Xn=0;Xn<Ze.length-1;Xn++){var wr=Ze[Xn];if(!(wr in Mn))break e;Mn=Mn[wr]}Ze=Ze[Ze.length-1],Xn=Mn[Ze],Sn=Sn(Xn),Sn!=Xn&&Sn!=null&&e(Mn,Ze,{configurable:!0,writable:!0,value:Sn})}}function Re(Ze,Sn){Ze instanceof String&&(Ze+="");var Mn=0,Xn=!1,wr={next:function(){if(!Xn&&Mn<Ze.length){var Lr=Mn++;return{value:Sn(Lr,Ze[Lr]),done:!1}}return Xn=!0,{done:!0,value:void 0}}};return wr[Symbol.iterator]=function(){return wr},wr}Ee("Array.prototype.values",function(Ze){return Ze||function(){return Re(this,function(Sn,Mn){return Mn})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var Ce=Ce||{},De=this||self;function $e(Ze){var Sn=typeof Ze;return Sn=Sn!="object"?Sn:Ze?Array.isArray(Ze)?"array":Sn:"null",Sn=="array"||Sn=="object"&&typeof Ze.length=="number"}function Ve(Ze){var Sn=typeof Ze;return Sn=="object"&&Ze!=null||Sn=="function"}function Be(Ze,Sn,Mn){return Ze.call.apply(Ze.bind,arguments)}function Me(Ze,Sn,Mn){if(!Ze)throw Error();if(2<arguments.length){var Xn=Array.prototype.slice.call(arguments,2);return function(){var wr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(wr,Xn),Ze.apply(Sn,wr)}}return function(){return Ze.apply(Sn,arguments)}}function Oe(Ze,Sn,Mn){return Oe=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Be:Me,Oe.apply(null,arguments)}function Ue(Ze,Sn){var Mn=Array.prototype.slice.call(arguments,1);return function(){var Xn=Mn.slice();return Xn.push.apply(Xn,arguments),Ze.apply(this,Xn)}}function ze(Ze,Sn){function Mn(){}Mn.prototype=Sn.prototype,Ze.aa=Sn.prototype,Ze.prototype=new Mn,Ze.prototype.constructor=Ze,Ze.Qb=function(Xn,wr,Lr){for(var ti=Array(arguments.length-2),Ss=2;Ss<arguments.length;Ss++)ti[Ss-2]=arguments[Ss];return Sn.prototype[wr].apply(Xn,ti)}}function He(Ze){const Sn=Ze.length;if(0<Sn){const Mn=Array(Sn);for(let Xn=0;Xn<Sn;Xn++)Mn[Xn]=Ze[Xn];return Mn}return[]}function Ge(Ze,Sn){for(let Mn=1;Mn<arguments.length;Mn++){const Xn=arguments[Mn];if($e(Xn)){const wr=Ze.length||0,Lr=Xn.length||0;Ze.length=wr+Lr;for(let ti=0;ti<Lr;ti++)Ze[wr+ti]=Xn[ti]}else Ze.push(Xn)}}class Ke{constructor(Sn,Mn){this.i=Sn,this.j=Mn,this.h=0,this.g=null}get(){let Sn;return 0<this.h?(this.h--,Sn=this.g,this.g=Sn.next,Sn.next=null):Sn=this.i(),Sn}}function Xe(Ze){return/^[\s\xa0]*$/.test(Ze)}function Je(){var Ze=De.navigator;return Ze&&(Ze=Ze.userAgent)?Ze:""}function un(Ze){return un[" "](Ze),Ze}un[" "]=function(){};var fn=Je().indexOf("Gecko")!=-1&&!(Je().toLowerCase().indexOf("webkit")!=-1&&Je().indexOf("Edge")==-1)&&!(Je().indexOf("Trident")!=-1||Je().indexOf("MSIE")!=-1)&&Je().indexOf("Edge")==-1;function yn(Ze,Sn,Mn){for(const Xn in Ze)Sn.call(Mn,Ze[Xn],Xn,Ze)}function gn(Ze,Sn){for(const Mn in Ze)Sn.call(void 0,Ze[Mn],Mn,Ze)}function mn(Ze){const Sn={};for(const Mn in Ze)Sn[Mn]=Ze[Mn];return Sn}const dn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vn(Ze,Sn){let Mn,Xn;for(let wr=1;wr<arguments.length;wr++){Xn=arguments[wr];for(Mn in Xn)Ze[Mn]=Xn[Mn];for(let Lr=0;Lr<dn.length;Lr++)Mn=dn[Lr],Object.prototype.hasOwnProperty.call(Xn,Mn)&&(Ze[Mn]=Xn[Mn])}}function bn(Ze){var Sn=1;Ze=Ze.split(":");const Mn=[];for(;0<Sn&&Ze.length;)Mn.push(Ze.shift()),Sn--;return Ze.length&&Mn.push(Ze.join(":")),Mn}function Tn(Ze){De.setTimeout(()=>{throw Ze},0)}function En(){var Ze=Hn;let Sn=null;return Ze.g&&(Sn=Ze.g,Ze.g=Ze.g.next,Ze.g||(Ze.h=null),Sn.next=null),Sn}class In{constructor(){this.h=this.g=null}add(Sn,Mn){const Xn=Nn.get();Xn.set(Sn,Mn),this.h?this.h.next=Xn:this.g=Xn,this.h=Xn}}var Nn=new Ke(()=>new On,Ze=>Ze.reset());class On{constructor(){this.next=this.g=this.h=null}set(Sn,Mn){this.h=Sn,this.g=Mn,this.next=null}reset(){this.next=this.g=this.h=null}}let Fn,$n=!1,Hn=new In,Dn=()=>{const Ze=De.Promise.resolve(void 0);Fn=()=>{Ze.then(Un)}};var Un=()=>{for(var Ze;Ze=En();){try{Ze.h.call(Ze.g)}catch(Mn){Tn(Mn)}var Sn=Nn;Sn.j(Ze),100>Sn.h&&(Sn.h++,Ze.next=Sn.g,Sn.g=Ze)}$n=!1};function Cn(){this.s=this.s,this.C=this.C}Cn.prototype.s=!1,Cn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kn(Ze,Sn){this.type=Ze,this.g=this.target=Sn,this.defaultPrevented=!1}kn.prototype.h=function(){this.defaultPrevented=!0};var Yn=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var Ze=!1,Sn=Object.defineProperty({},"passive",{get:function(){Ze=!0}});try{const Mn=()=>{};De.addEventListener("test",Mn,Sn),De.removeEventListener("test",Mn,Sn)}catch{}return Ze}();function Jn(Ze,Sn){if(kn.call(this,Ze?Ze.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,Ze){var Mn=this.type=Ze.type,Xn=Ze.changedTouches&&Ze.changedTouches.length?Ze.changedTouches[0]:null;if(this.target=Ze.target||Ze.srcElement,this.g=Sn,Sn=Ze.relatedTarget){if(fn){e:{try{un(Sn.nodeName);var wr=!0;break e}catch{}wr=!1}wr||(Sn=null)}}else Mn=="mouseover"?Sn=Ze.fromElement:Mn=="mouseout"&&(Sn=Ze.toElement);this.relatedTarget=Sn,Xn?(this.clientX=Xn.clientX!==void 0?Xn.clientX:Xn.pageX,this.clientY=Xn.clientY!==void 0?Xn.clientY:Xn.pageY,this.screenX=Xn.screenX||0,this.screenY=Xn.screenY||0):(this.clientX=Ze.clientX!==void 0?Ze.clientX:Ze.pageX,this.clientY=Ze.clientY!==void 0?Ze.clientY:Ze.pageY,this.screenX=Ze.screenX||0,this.screenY=Ze.screenY||0),this.button=Ze.button,this.key=Ze.key||"",this.ctrlKey=Ze.ctrlKey,this.altKey=Ze.altKey,this.shiftKey=Ze.shiftKey,this.metaKey=Ze.metaKey,this.pointerId=Ze.pointerId||0,this.pointerType=typeof Ze.pointerType=="string"?Ze.pointerType:sr[Ze.pointerType]||"",this.state=Ze.state,this.i=Ze,Ze.defaultPrevented&&Jn.aa.h.call(this)}}ze(Jn,kn);var sr={2:"touch",3:"pen",4:"mouse"};Jn.prototype.h=function(){Jn.aa.h.call(this);var Ze=this.i;Ze.preventDefault?Ze.preventDefault():Ze.returnValue=!1};var lr="closure_listenable_"+(1e6*Math.random()|0),mr=0;function gr(Ze,Sn,Mn,Xn,wr){this.listener=Ze,this.proxy=null,this.src=Sn,this.type=Mn,this.capture=!!Xn,this.ha=wr,this.key=++mr,this.da=this.fa=!1}function Er(Ze){Ze.da=!0,Ze.listener=null,Ze.proxy=null,Ze.src=null,Ze.ha=null}function $r(Ze){this.src=Ze,this.g={},this.h=0}$r.prototype.add=function(Ze,Sn,Mn,Xn,wr){var Lr=Ze.toString();Ze=this.g[Lr],Ze||(Ze=this.g[Lr]=[],this.h++);var ti=Gr(Ze,Sn,Xn,wr);return-1<ti?(Sn=Ze[ti],Mn||(Sn.fa=!1)):(Sn=new gr(Sn,this.src,Lr,!!Xn,wr),Sn.fa=Mn,Ze.push(Sn)),Sn};function Yr(Ze,Sn){var Mn=Sn.type;if(Mn in Ze.g){var Xn=Ze.g[Mn],wr=Array.prototype.indexOf.call(Xn,Sn,void 0),Lr;(Lr=0<=wr)&&Array.prototype.splice.call(Xn,wr,1),Lr&&(Er(Sn),Ze.g[Mn].length==0&&(delete Ze.g[Mn],Ze.h--))}}function Gr(Ze,Sn,Mn,Xn){for(var wr=0;wr<Ze.length;++wr){var Lr=Ze[wr];if(!Lr.da&&Lr.listener==Sn&&Lr.capture==!!Mn&&Lr.ha==Xn)return wr}return-1}var Tr="closure_lm_"+(1e6*Math.random()|0),rr={};function Ni(Ze,Sn,Mn,Xn,wr){if(Array.isArray(Sn)){for(var Lr=0;Lr<Sn.length;Lr++)Ni(Ze,Sn[Lr],Mn,Xn,wr);return null}return Mn=oi(Mn),Ze&&Ze[lr]?Ze.K(Sn,Mn,Ve(Xn)?!!Xn.capture:!1,wr):Ai(Ze,Sn,Mn,!1,Xn,wr)}function Ai(Ze,Sn,Mn,Xn,wr,Lr){if(!Sn)throw Error("Invalid event type");var ti=Ve(wr)?!!wr.capture:!!wr,Ss=mi(Ze);if(Ss||(Ze[Tr]=Ss=new $r(Ze)),Mn=Ss.add(Sn,Mn,Xn,ti,Lr),Mn.proxy)return Mn;if(Xn=bi(),Mn.proxy=Xn,Xn.src=Ze,Xn.listener=Mn,Ze.addEventListener)Yn||(wr=ti),wr===void 0&&(wr=!1),Ze.addEventListener(Sn.toString(),Xn,wr);else if(Ze.attachEvent)Ze.attachEvent(ei(Sn.toString()),Xn);else if(Ze.addListener&&Ze.removeListener)Ze.addListener(Xn);else throw Error("addEventListener and attachEvent are unavailable.");return Mn}function bi(){function Ze(Mn){return Sn.call(Ze.src,Ze.listener,Mn)}const Sn=gi;return Ze}function Wr(Ze,Sn,Mn,Xn,wr){if(Array.isArray(Sn))for(var Lr=0;Lr<Sn.length;Lr++)Wr(Ze,Sn[Lr],Mn,Xn,wr);else Xn=Ve(Xn)?!!Xn.capture:!!Xn,Mn=oi(Mn),Ze&&Ze[lr]?(Ze=Ze.i,Sn=String(Sn).toString(),Sn in Ze.g&&(Lr=Ze.g[Sn],Mn=Gr(Lr,Mn,Xn,wr),-1<Mn&&(Er(Lr[Mn]),Array.prototype.splice.call(Lr,Mn,1),Lr.length==0&&(delete Ze.g[Sn],Ze.h--)))):Ze&&(Ze=mi(Ze))&&(Sn=Ze.g[Sn.toString()],Ze=-1,Sn&&(Ze=Gr(Sn,Mn,Xn,wr)),(Mn=-1<Ze?Sn[Ze]:null)&&hi(Mn))}function hi(Ze){if(typeof Ze!="number"&&Ze&&!Ze.da){var Sn=Ze.src;if(Sn&&Sn[lr])Yr(Sn.i,Ze);else{var Mn=Ze.type,Xn=Ze.proxy;Sn.removeEventListener?Sn.removeEventListener(Mn,Xn,Ze.capture):Sn.detachEvent?Sn.detachEvent(ei(Mn),Xn):Sn.addListener&&Sn.removeListener&&Sn.removeListener(Xn),(Mn=mi(Sn))?(Yr(Mn,Ze),Mn.h==0&&(Mn.src=null,Sn[Tr]=null)):Er(Ze)}}}function ei(Ze){return Ze in rr?rr[Ze]:rr[Ze]="on"+Ze}function gi(Ze,Sn){if(Ze.da)Ze=!0;else{Sn=new Jn(Sn,this);var Mn=Ze.listener,Xn=Ze.ha||Ze.src;Ze.fa&&hi(Ze),Ze=Mn.call(Xn,Sn)}return Ze}function mi(Ze){return Ze=Ze[Tr],Ze instanceof $r?Ze:null}var Hi="__closure_events_fn_"+(1e9*Math.random()>>>0);function oi(Ze){return typeof Ze=="function"?Ze:(Ze[Hi]||(Ze[Hi]=function(Sn){return Ze.handleEvent(Sn)}),Ze[Hi])}function yr(){Cn.call(this),this.i=new $r(this),this.M=this,this.F=null}ze(yr,Cn),yr.prototype[lr]=!0,yr.prototype.removeEventListener=function(Ze,Sn,Mn,Xn){Wr(this,Ze,Sn,Mn,Xn)};function Fr(Ze,Sn){var Mn,Xn=Ze.F;if(Xn)for(Mn=[];Xn;Xn=Xn.F)Mn.push(Xn);if(Ze=Ze.M,Xn=Sn.type||Sn,typeof Sn=="string")Sn=new kn(Sn,Ze);else if(Sn instanceof kn)Sn.target=Sn.target||Ze;else{var wr=Sn;Sn=new kn(Xn,Ze),vn(Sn,wr)}if(wr=!0,Mn)for(var Lr=Mn.length-1;0<=Lr;Lr--){var ti=Sn.g=Mn[Lr];wr=Qr(ti,Xn,!0,Sn)&&wr}if(ti=Sn.g=Ze,wr=Qr(ti,Xn,!0,Sn)&&wr,wr=Qr(ti,Xn,!1,Sn)&&wr,Mn)for(Lr=0;Lr<Mn.length;Lr++)ti=Sn.g=Mn[Lr],wr=Qr(ti,Xn,!1,Sn)&&wr}yr.prototype.N=function(){if(yr.aa.N.call(this),this.i){var Ze=this.i,Sn;for(Sn in Ze.g){for(var Mn=Ze.g[Sn],Xn=0;Xn<Mn.length;Xn++)Er(Mn[Xn]);delete Ze.g[Sn],Ze.h--}}this.F=null},yr.prototype.K=function(Ze,Sn,Mn,Xn){return this.i.add(String(Ze),Sn,!1,Mn,Xn)},yr.prototype.L=function(Ze,Sn,Mn,Xn){return this.i.add(String(Ze),Sn,!0,Mn,Xn)};function Qr(Ze,Sn,Mn,Xn){if(Sn=Ze.i.g[String(Sn)],!Sn)return!0;Sn=Sn.concat();for(var wr=!0,Lr=0;Lr<Sn.length;++Lr){var ti=Sn[Lr];if(ti&&!ti.da&&ti.capture==Mn){var Ss=ti.listener,to=ti.ha||ti.src;ti.fa&&Yr(Ze.i,ti),wr=Ss.call(to,Xn)!==!1&&wr}}return wr&&!Xn.defaultPrevented}function Kr(Ze,Sn,Mn){if(typeof Ze=="function")Mn&&(Ze=Oe(Ze,Mn));else if(Ze&&typeof Ze.handleEvent=="function")Ze=Oe(Ze.handleEvent,Ze);else throw Error("Invalid listener argument");return 2147483647<Number(Sn)?-1:De.setTimeout(Ze,Sn||0)}function si(Ze){Ze.g=Kr(()=>{Ze.g=null,Ze.i&&(Ze.i=!1,si(Ze))},Ze.l);const Sn=Ze.h;Ze.h=null,Ze.m.apply(null,Sn)}class fi extends Cn{constructor(Sn,Mn){super(),this.m=Sn,this.l=Mn,this.h=null,this.i=!1,this.g=null}j(Sn){this.h=arguments,this.g?this.i=!0:si(this)}N(){super.N(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(Ze){Cn.call(this),this.h=Ze,this.g={}}ze(Li,Cn);var $i=[];function zr(Ze){yn(Ze.g,function(Sn,Mn){this.g.hasOwnProperty(Mn)&&hi(Sn)},Ze),Ze.g={}}Li.prototype.N=function(){Li.aa.N.call(this),zr(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ii=De.JSON.stringify,Ui=De.JSON.parse,wi=class{stringify(Ze){return De.JSON.stringify(Ze,void 0)}parse(Ze){return De.JSON.parse(Ze,void 0)}};function Ri(){}Ri.prototype.h=null;function ci(Ze){return Ze.h||(Ze.h=Ze.i())}function ws(){}var hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rs(){kn.call(this,"d")}ze(rs,kn);function ri(){kn.call(this,"c")}ze(ri,kn);var ai={},Fi=null;function Ms(){return Fi=Fi||new yr}ai.La="serverreachability";function To(Ze){kn.call(this,ai.La,Ze)}ze(To,kn);function Zs(Ze){const Sn=Ms();Fr(Sn,new To(Sn))}ai.STAT_EVENT="statevent";function Ci(Ze,Sn){kn.call(this,ai.STAT_EVENT,Ze),this.stat=Sn}ze(Ci,kn);function gs(Ze){const Sn=Ms();Fr(Sn,new Ci(Sn,Ze))}ai.Ma="timingevent";function Mo(Ze,Sn){kn.call(this,ai.Ma,Ze),this.size=Sn}ze(Mo,kn);function Ls(Ze,Sn){if(typeof Ze!="function")throw Error("Fn must not be null and must be a function");return De.setTimeout(function(){Ze()},Sn)}function eo(){this.g=!0}eo.prototype.xa=function(){this.g=!1};function xs(Ze,Sn,Mn,Xn,wr,Lr){Ze.info(function(){if(Ze.g)if(Lr)for(var ti="",Ss=Lr.split("&"),to=0;to<Ss.length;to++){var cs=Ss[to].split("=");if(1<cs.length){var ps=cs[0];cs=cs[1];var Ps=ps.split("_");ti=2<=Ps.length&&Ps[1]=="type"?ti+(ps+"="+cs+"&"):ti+(ps+"=redacted&")}}else ti=null;else ti=Lr;return"XMLHTTP REQ ("+Xn+") [attempt "+wr+"]: "+Sn+`
`+Mn+`
`+ti})}function Os(Ze,Sn,Mn,Xn,wr,Lr,ti){Ze.info(function(){return"XMLHTTP RESP ("+Xn+") [ attempt "+wr+"]: "+Sn+`
`+Mn+`
`+Lr+" "+ti})}function Ts(Ze,Sn,Mn,Xn){Ze.info(function(){return"XMLHTTP TEXT ("+Sn+"): "+ua(Ze,Mn)+(Xn?" "+Xn:"")})}function ra(Ze,Sn){Ze.info(function(){return"TIMEOUT: "+Sn})}eo.prototype.info=function(){};function ua(Ze,Sn){if(!Ze.g)return Sn;if(!Sn)return null;try{var Mn=JSON.parse(Sn);if(Mn){for(Ze=0;Ze<Mn.length;Ze++)if(Array.isArray(Mn[Ze])){var Xn=Mn[Ze];if(!(2>Xn.length)){var wr=Xn[1];if(Array.isArray(wr)&&!(1>wr.length)){var Lr=wr[0];if(Lr!="noop"&&Lr!="stop"&&Lr!="close")for(var ti=1;ti<wr.length;ti++)wr[ti]=""}}}}return Ii(Mn)}catch{return Sn}}var po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function cr(){}ze(cr,Ri),cr.prototype.g=function(){return new XMLHttpRequest},cr.prototype.i=function(){return{}},ir=new cr;function _r(Ze,Sn,Mn,Xn){this.j=Ze,this.i=Sn,this.l=Mn,this.R=Xn||1,this.U=new Li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ir}function Ir(){this.i=null,this.g="",this.h=!1}var Or={},Zr={};function yi(Ze,Sn,Mn){Ze.L=1,Ze.v=Oa(Do(Sn)),Ze.m=Mn,Ze.P=!0,pi(Ze,null)}function pi(Ze,Sn){Ze.F=Date.now(),Gi(Ze),Ze.A=Do(Ze.v);var Mn=Ze.A,Xn=Ze.R;Array.isArray(Xn)||(Xn=[String(Xn)]),ji(Mn.i,"t",Xn),Ze.C=0,Mn=Ze.j.J,Ze.h=new Ir,Ze.g=cl(Ze.j,Mn?Sn:null,!Ze.m),0<Ze.O&&(Ze.M=new fi(Oe(Ze.Y,Ze,Ze.g),Ze.O)),Sn=Ze.U,Mn=Ze.g,Xn=Ze.ca;var wr="readystatechange";Array.isArray(wr)||(wr&&($i[0]=wr.toString()),wr=$i);for(var Lr=0;Lr<wr.length;Lr++){var ti=Ni(Mn,wr[Lr],Xn||Sn.handleEvent,!1,Sn.h||Sn);if(!ti)break;Sn.g[ti.key]=ti}Sn=Ze.H?mn(Ze.H):{},Ze.m?(Ze.u||(Ze.u="POST"),Sn["Content-Type"]="application/x-www-form-urlencoded",Ze.g.ea(Ze.A,Ze.u,Ze.m,Sn)):(Ze.u="GET",Ze.g.ea(Ze.A,Ze.u,null,Sn)),Zs(),xs(Ze.i,Ze.u,Ze.A,Ze.l,Ze.R,Ze.m)}_r.prototype.ca=function(Ze){Ze=Ze.target;const Sn=this.M;Sn&&as(Ze)==3?Sn.j():this.Y(Ze)},_r.prototype.Y=function(Ze){try{if(Ze==this.g)e:{const Ps=as(this.g);var Sn=this.g.Ba();const fa=this.g.Z();if(!(3>Ps)&&(Ps!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Ps!=4||Sn==7||(Sn==8||0>=fa?Zs(3):Zs(2)),Nr(this);var Mn=this.g.Z();this.X=Mn;t:if(zi(this)){var Xn=qo(this.g);Ze="";var wr=Xn.length,Lr=as(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){is(this),Vi(this);var ti="";break t}this.h.i=new De.TextDecoder}for(Sn=0;Sn<wr;Sn++)this.h.h=!0,Ze+=this.h.i.decode(Xn[Sn],{stream:!(Lr&&Sn==wr-1)});Xn.length=0,this.h.g+=Ze,this.C=0,ti=this.h.g}else ti=this.g.oa();if(this.o=Mn==200,Os(this.i,this.u,this.A,this.l,this.R,Ps,Mn),this.o){if(this.T&&!this.K){t:{if(this.g){var Ss,to=this.g;if((Ss=to.g?to.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xe(Ss)){var cs=Ss;break t}}cs=null}if(Mn=cs)Ts(this.i,this.l,Mn,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eo(this,Mn);else{this.o=!1,this.s=3,gs(12),is(this),Vi(this);break e}}if(this.P){Mn=!0;let sa;for(;!this.J&&this.C<ti.length;)if(sa=_s(this,ti),sa==Zr){Ps==4&&(this.s=4,gs(14),Mn=!1),Ts(this.i,this.l,null,"[Incomplete Response]");break}else if(sa==Or){this.s=4,gs(15),Ts(this.i,this.l,ti,"[Invalid Chunk]"),Mn=!1;break}else Ts(this.i,this.l,sa,null),Eo(this,sa);if(zi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ps!=4||ti.length!=0||this.h.h||(this.s=1,gs(16),Mn=!1),this.o=this.o&&Mn,!Mn)Ts(this.i,this.l,ti,"[Invalid Chunked Response]"),is(this),Vi(this);else if(0<ti.length&&!this.W){this.W=!0;var ps=this.j;ps.g==this&&ps.ba&&!ps.M&&(ps.j.info("Great, no buffering proxy detected. Bytes received: "+ti.length),bs(ps),ps.M=!0,gs(11))}}else Ts(this.i,this.l,ti,null),Eo(this,ti);Ps==4&&is(this),this.o&&!this.J&&(Ps==4?Es(this.j,this):(this.o=!1,Gi(this)))}else Xs(this.g),Mn==400&&0<ti.indexOf("Unknown SID")?(this.s=3,gs(12)):(this.s=0,gs(13)),is(this),Vi(this)}}}catch{}finally{}};function zi(Ze){return Ze.g?Ze.u=="GET"&&Ze.L!=2&&Ze.j.Ca:!1}function _s(Ze,Sn){var Mn=Ze.C,Xn=Sn.indexOf(`
`,Mn);return Xn==-1?Zr:(Mn=Number(Sn.substring(Mn,Xn)),isNaN(Mn)?Or:(Xn+=1,Xn+Mn>Sn.length?Zr:(Sn=Sn.slice(Xn,Xn+Mn),Ze.C=Xn+Mn,Sn)))}_r.prototype.cancel=function(){this.J=!0,is(this)};function Gi(Ze){Ze.S=Date.now()+Ze.I,js(Ze,Ze.I)}function js(Ze,Sn){if(Ze.B!=null)throw Error("WatchDog timer not null");Ze.B=Ls(Oe(Ze.ba,Ze),Sn)}function Nr(Ze){Ze.B&&(De.clearTimeout(Ze.B),Ze.B=null)}_r.prototype.ba=function(){this.B=null;const Ze=Date.now();0<=Ze-this.S?(ra(this.i,this.A),this.L!=2&&(Zs(),gs(17)),is(this),this.s=2,Vi(this)):js(this,this.S-Ze)};function Vi(Ze){Ze.j.G==0||Ze.J||Es(Ze.j,Ze)}function is(Ze){Nr(Ze);var Sn=Ze.M;Sn&&typeof Sn.ma=="function"&&Sn.ma(),Ze.M=null,zr(Ze.U),Ze.g&&(Sn=Ze.g,Ze.g=null,Sn.abort(),Sn.ma())}function Eo(Ze,Sn){try{var Mn=Ze.j;if(Mn.G!=0&&(Mn.g==Ze||ys(Mn.h,Ze))){if(!Ze.K&&ys(Mn.h,Ze)&&Mn.G==3){try{var Xn=Mn.Da.g.parse(Sn)}catch{Xn=null}if(Array.isArray(Xn)&&Xn.length==3){var wr=Xn;if(wr[0]==0){e:if(!Mn.u){if(Mn.g)if(Mn.g.F+3e3<Ze.F)Qs(Mn),tr(Mn);else break e;Ji(Mn),gs(18)}}else Mn.za=wr[1],0<Mn.za-Mn.T&&37500>wr[2]&&Mn.F&&Mn.v==0&&!Mn.C&&(Mn.C=Ls(Oe(Mn.Za,Mn),6e3));if(1>=vl(Mn.h)&&Mn.ca){try{Mn.ca()}catch{}Mn.ca=void 0}}else Ds(Mn,11)}else if((Ze.K||Mn.g==Ze)&&Qs(Mn),!Xe(Sn))for(wr=Mn.Da.g.parse(Sn),Sn=0;Sn<wr.length;Sn++){let cs=wr[Sn];if(Mn.T=cs[0],cs=cs[1],Mn.G==2)if(cs[0]=="c"){Mn.K=cs[1],Mn.ia=cs[2];const ps=cs[3];ps!=null&&(Mn.la=ps,Mn.j.info("VER="+Mn.la));const Ps=cs[4];Ps!=null&&(Mn.Aa=Ps,Mn.j.info("SVER="+Mn.Aa));const fa=cs[5];fa!=null&&typeof fa=="number"&&0<fa&&(Xn=1.5*fa,Mn.L=Xn,Mn.j.info("backChannelRequestTimeoutMs_="+Xn)),Xn=Mn;const sa=Ze.g;if(sa){const La=sa.g?sa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var Lr=Xn.h;Lr.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(Lr.j=Lr.l,Lr.g=new Set,Lr.h&&(Ja(Lr,Lr.h),Lr.h=null))}if(Xn.D){const dl=sa.g?sa.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(Xn.ya=dl,us(Xn.I,Xn.D,dl))}}Mn.G=3,Mn.l&&Mn.l.ua(),Mn.ba&&(Mn.R=Date.now()-Ze.F,Mn.j.info("Handshake RTT: "+Mn.R+"ms")),Xn=Mn;var ti=Ze;if(Xn.qa=nl(Xn,Xn.J?Xn.ia:null,Xn.W),ti.K){qs(Xn.h,ti);var Ss=ti,to=Xn.L;to&&(Ss.I=to),Ss.B&&(Nr(Ss),Gi(Ss)),Xn.g=ti}else Bi(Xn);0<Mn.i.length&&br(Mn)}else cs[0]!="stop"&&cs[0]!="close"||Ds(Mn,7);else Mn.G==3&&(cs[0]=="stop"||cs[0]=="close"?cs[0]=="stop"?Ds(Mn,7):Vn(Mn):cs[0]!="noop"&&Mn.l&&Mn.l.ta(cs),Mn.v=0)}}Zs(4)}catch{}}var Xo=class{constructor(Ze,Sn){this.g=Ze,this.map=Sn}};function Ca(Ze){this.l=Ze||10,De.PerformanceNavigationTiming?(Ze=De.performance.getEntriesByType("navigation"),Ze=0<Ze.length&&(Ze[0].nextHopProtocol=="hq"||Ze[0].nextHopProtocol=="h2")):Ze=!!(De.chrome&&De.chrome.loadTimes&&De.chrome.loadTimes()&&De.chrome.loadTimes().wasFetchedViaSpdy),this.j=Ze?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lo(Ze){return Ze.h?!0:Ze.g?Ze.g.size>=Ze.j:!1}function vl(Ze){return Ze.h?1:Ze.g?Ze.g.size:0}function ys(Ze,Sn){return Ze.h?Ze.h==Sn:Ze.g?Ze.g.has(Sn):!1}function Ja(Ze,Sn){Ze.g?Ze.g.add(Sn):Ze.h=Sn}function qs(Ze,Sn){Ze.h&&Ze.h==Sn?Ze.h=null:Ze.g&&Ze.g.has(Sn)&&Ze.g.delete(Sn)}Ca.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const Ze of this.g.values())Ze.cancel();this.g.clear()}};function wl(Ze){if(Ze.h!=null)return Ze.i.concat(Ze.h.D);if(Ze.g!=null&&Ze.g.size!==0){let Sn=Ze.i;for(const Mn of Ze.g.values())Sn=Sn.concat(Mn.D);return Sn}return He(Ze.i)}function Za(Ze){if(Ze.V&&typeof Ze.V=="function")return Ze.V();if(typeof Map<"u"&&Ze instanceof Map||typeof Set<"u"&&Ze instanceof Set)return Array.from(Ze.values());if(typeof Ze=="string")return Ze.split("");if($e(Ze)){for(var Sn=[],Mn=Ze.length,Xn=0;Xn<Mn;Xn++)Sn.push(Ze[Xn]);return Sn}Sn=[],Mn=0;for(Xn in Ze)Sn[Mn++]=Ze[Xn];return Sn}function ca(Ze){if(Ze.na&&typeof Ze.na=="function")return Ze.na();if(!Ze.V||typeof Ze.V!="function"){if(typeof Map<"u"&&Ze instanceof Map)return Array.from(Ze.keys());if(!(typeof Set<"u"&&Ze instanceof Set)){if($e(Ze)||typeof Ze=="string"){var Sn=[];Ze=Ze.length;for(var Mn=0;Mn<Ze;Mn++)Sn.push(Mn);return Sn}Sn=[],Mn=0;for(const Xn in Ze)Sn[Mn++]=Xn;return Sn}}}function da(Ze,Sn){if(Ze.forEach&&typeof Ze.forEach=="function")Ze.forEach(Sn,void 0);else if($e(Ze)||typeof Ze=="string")Array.prototype.forEach.call(Ze,Sn,void 0);else for(var Mn=ca(Ze),Xn=Za(Ze),wr=Xn.length,Lr=0;Lr<wr;Lr++)Sn.call(void 0,Xn[Lr],Mn&&Mn[Lr],Ze)}var mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ha(Ze,Sn){if(Ze){Ze=Ze.split("&");for(var Mn=0;Mn<Ze.length;Mn++){var Xn=Ze[Mn].indexOf("="),wr=null;if(0<=Xn){var Lr=Ze[Mn].substring(0,Xn);wr=Ze[Mn].substring(Xn+1)}else Lr=Ze[Mn];Sn(Lr,wr?decodeURIComponent(wr.replace(/\+/g," ")):"")}}}function As(Ze){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,Ze instanceof As){this.h=Ze.h,el(this,Ze.j),this.o=Ze.o,this.g=Ze.g,Ga(this,Ze.s),this.l=Ze.l;var Sn=Ze.i,Mn=new Fo;Mn.i=Sn.i,Sn.g&&(Mn.g=new Map(Sn.g),Mn.h=Sn.h),wa(this,Mn),this.m=Ze.m}else Ze&&(Sn=String(Ze).match(mo))?(this.h=!1,el(this,Sn[1]||"",!0),this.o=os(Sn[2]||""),this.g=os(Sn[3]||"",!0),Ga(this,Sn[4]),this.l=os(Sn[5]||"",!0),wa(this,Sn[6]||"",!0),this.m=os(Sn[7]||"")):(this.h=!1,this.i=new Fo(null,this.h))}As.prototype.toString=function(){var Ze=[],Sn=this.j;Sn&&Ze.push(Qo(Sn,ul,!0),":");var Mn=this.g;return(Mn||Sn=="file")&&(Ze.push("//"),(Sn=this.o)&&Ze.push(Qo(Sn,ul,!0),"@"),Ze.push(encodeURIComponent(String(Mn)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Mn=this.s,Mn!=null&&Ze.push(":",String(Mn))),(Mn=this.l)&&(this.g&&Mn.charAt(0)!="/"&&Ze.push("/"),Ze.push(Qo(Mn,Mn.charAt(0)=="/"?Qi:es,!0))),(Mn=this.i.toString())&&Ze.push("?",Mn),(Mn=this.m)&&Ze.push("#",Qo(Mn,ha)),Ze.join("")};function Do(Ze){return new As(Ze)}function el(Ze,Sn,Mn){Ze.j=Mn?os(Sn,!0):Sn,Ze.j&&(Ze.j=Ze.j.replace(/:$/,""))}function Ga(Ze,Sn){if(Sn){if(Sn=Number(Sn),isNaN(Sn)||0>Sn)throw Error("Bad port number "+Sn);Ze.s=Sn}else Ze.s=null}function wa(Ze,Sn,Mn){Sn instanceof Fo?(Ze.i=Sn,xa(Ze.i,Ze.h)):(Mn||(Sn=Qo(Sn,tl)),Ze.i=new Fo(Sn,Ze.h))}function us(Ze,Sn,Mn){Ze.i.set(Sn,Mn)}function Oa(Ze){return us(Ze,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),Ze}function os(Ze,Sn){return Ze?Sn?decodeURI(Ze.replace(/%25/g,"%2525")):decodeURIComponent(Ze):""}function Qo(Ze,Sn,Mn){return typeof Ze=="string"?(Ze=encodeURI(Ze).replace(Sn,Xi),Mn&&(Ze=Ze.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Ze):null}function Xi(Ze){return Ze=Ze.charCodeAt(0),"%"+(Ze>>4&15).toString(16)+(Ze&15).toString(16)}var ul=/[#\/\?@]/g,es=/[#\?:]/g,Qi=/[#\?]/g,tl=/[#\?@]/g,ha=/#/g;function Fo(Ze,Sn){this.h=this.g=null,this.i=Ze||null,this.j=!!Sn}function go(Ze){Ze.g||(Ze.g=new Map,Ze.h=0,Ze.i&&Ha(Ze.i,function(Sn,Mn){Ze.add(decodeURIComponent(Sn.replace(/\+/g," ")),Mn)}))}n=Fo.prototype,n.add=function(Ze,Sn){go(this),this.i=null,Ze=ia(this,Ze);var Mn=this.g.get(Ze);return Mn||this.g.set(Ze,Mn=[]),Mn.push(Sn),this.h+=1,this};function Vo(Ze,Sn){go(Ze),Sn=ia(Ze,Sn),Ze.g.has(Sn)&&(Ze.i=null,Ze.h-=Ze.g.get(Sn).length,Ze.g.delete(Sn))}function Jo(Ze,Sn){return go(Ze),Sn=ia(Ze,Sn),Ze.g.has(Sn)}n.forEach=function(Ze,Sn){go(this),this.g.forEach(function(Mn,Xn){Mn.forEach(function(wr){Ze.call(Sn,wr,Xn,this)},this)},this)},n.na=function(){go(this);const Ze=Array.from(this.g.values()),Sn=Array.from(this.g.keys()),Mn=[];for(let Xn=0;Xn<Sn.length;Xn++){const wr=Ze[Xn];for(let Lr=0;Lr<wr.length;Lr++)Mn.push(Sn[Xn])}return Mn},n.V=function(Ze){go(this);let Sn=[];if(typeof Ze=="string")Jo(this,Ze)&&(Sn=Sn.concat(this.g.get(ia(this,Ze))));else{Ze=Array.from(this.g.values());for(let Mn=0;Mn<Ze.length;Mn++)Sn=Sn.concat(Ze[Mn])}return Sn},n.set=function(Ze,Sn){return go(this),this.i=null,Ze=ia(this,Ze),Jo(this,Ze)&&(this.h-=this.g.get(Ze).length),this.g.set(Ze,[Sn]),this.h+=1,this},n.get=function(Ze,Sn){return Ze?(Ze=this.V(Ze),0<Ze.length?String(Ze[0]):Sn):Sn};function ji(Ze,Sn,Mn){Vo(Ze,Sn),0<Mn.length&&(Ze.i=null,Ze.g.set(ia(Ze,Sn),He(Mn)),Ze.h+=Mn.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const Ze=[],Sn=Array.from(this.g.keys());for(var Mn=0;Mn<Sn.length;Mn++){var Xn=Sn[Mn];const Lr=encodeURIComponent(String(Xn)),ti=this.V(Xn);for(Xn=0;Xn<ti.length;Xn++){var wr=Lr;ti[Xn]!==""&&(wr+="="+encodeURIComponent(String(ti[Xn]))),Ze.push(wr)}}return this.i=Ze.join("&")};function ia(Ze,Sn){return Sn=String(Sn),Ze.j&&(Sn=Sn.toLowerCase()),Sn}function xa(Ze,Sn){Sn&&!Ze.j&&(go(Ze),Ze.i=null,Ze.g.forEach(function(Mn,Xn){var wr=Xn.toLowerCase();Xn!=wr&&(Vo(this,Xn),ji(this,wr,Mn))},Ze)),Ze.j=Sn}function Hl(Ze,Sn){const Mn=new eo;if(De.Image){const Xn=new Image;Xn.onload=Ue(Ys,Mn,"TestLoadImage: loaded",!0,Sn,Xn),Xn.onerror=Ue(Ys,Mn,"TestLoadImage: error",!1,Sn,Xn),Xn.onabort=Ue(Ys,Mn,"TestLoadImage: abort",!1,Sn,Xn),Xn.ontimeout=Ue(Ys,Mn,"TestLoadImage: timeout",!1,Sn,Xn),De.setTimeout(function(){Xn.ontimeout&&Xn.ontimeout()},1e4),Xn.src=Ze}else Sn(!1)}function Ol(Ze,Sn){const Mn=new eo,Xn=new AbortController,wr=setTimeout(()=>{Xn.abort(),Ys(Mn,"TestPingServer: timeout",!1,Sn)},1e4);fetch(Ze,{signal:Xn.signal}).then(Lr=>{clearTimeout(wr),Lr.ok?Ys(Mn,"TestPingServer: ok",!0,Sn):Ys(Mn,"TestPingServer: server error",!1,Sn)}).catch(()=>{clearTimeout(wr),Ys(Mn,"TestPingServer: error",!1,Sn)})}function Ys(Ze,Sn,Mn,Xn,wr){try{wr&&(wr.onload=null,wr.onerror=null,wr.onabort=null,wr.ontimeout=null),Xn(Mn)}catch{}}function Na(){this.g=new wi}function Nl(Ze,Sn,Mn){const Xn=Mn||"";try{da(Ze,function(wr,Lr){let ti=wr;Ve(wr)&&(ti=Ii(wr)),Sn.push(Xn+Lr+"="+encodeURIComponent(ti))})}catch(wr){throw Sn.push(Xn+"type="+encodeURIComponent("_badmap")),wr}}function Ln(Ze){this.l=Ze.Ub||null,this.j=Ze.eb||!1}ze(Ln,Ri),Ln.prototype.g=function(){return new qn(this.l,this.j)},Ln.prototype.i=function(Ze){return function(){return Ze}}({});function qn(Ze,Sn){yr.call(this),this.D=Ze,this.o=Sn,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}ze(qn,yr),n=qn.prototype,n.open=function(Ze,Sn){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=Ze,this.A=Sn,this.readyState=1,vr(this)},n.send=function(Ze){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Sn={headers:this.u,method:this.B,credentials:this.m,cache:void 0};Ze&&(Sn.body=Ze),(this.D||De).fetch(new Request(this.A,Sn)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ar(this)),this.readyState=0},n.Sa=function(Ze){if(this.g&&(this.l=Ze,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=Ze.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")Ze.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof De.ReadableStream<"u"&&"body"in Ze){if(this.j=Ze.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zn(this)}else Ze.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zn(Ze){Ze.j.read().then(Ze.Pa.bind(Ze)).catch(Ze.ga.bind(Ze))}n.Pa=function(Ze){if(this.g){if(this.o&&Ze.value)this.response.push(Ze.value);else if(!this.o){var Sn=Ze.value?Ze.value:new Uint8Array(0);(Sn=this.v.decode(Sn,{stream:!Ze.done}))&&(this.response=this.responseText+=Sn)}Ze.done?ar(this):vr(this),this.readyState==3&&Zn(this)}},n.Ra=function(Ze){this.g&&(this.response=this.responseText=Ze,ar(this))},n.Qa=function(Ze){this.g&&(this.response=Ze,ar(this))},n.ga=function(){this.g&&ar(this)};function ar(Ze){Ze.readyState=4,Ze.l=null,Ze.j=null,Ze.v=null,vr(Ze)}n.setRequestHeader=function(Ze,Sn){this.u.append(Ze,Sn)},n.getResponseHeader=function(Ze){return this.h&&this.h.get(Ze.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const Ze=[],Sn=this.h.entries();for(var Mn=Sn.next();!Mn.done;)Mn=Mn.value,Ze.push(Mn[0]+": "+Mn[1]),Mn=Sn.next();return Ze.join(`\r
`)};function vr(Ze){Ze.onreadystatechange&&Ze.onreadystatechange.call(Ze)}Object.defineProperty(qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(Ze){this.m=Ze?"include":"same-origin"}});function Cr(Ze){let Sn="";return yn(Ze,function(Mn,Xn){Sn+=Xn,Sn+=":",Sn+=Mn,Sn+=`\r
`}),Sn}function ni(Ze,Sn,Mn){e:{for(Xn in Mn){var Xn=!1;break e}Xn=!0}Xn||(Mn=Cr(Mn),typeof Ze=="string"?Mn!=null&&encodeURIComponent(String(Mn)):us(Ze,Sn,Mn))}function ui(Ze){yr.call(this),this.headers=new Map,this.o=Ze||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}ze(ui,yr);var ts=/^https?$/i,Ki=["POST","PUT"];n=ui.prototype,n.Ha=function(Ze){this.J=Ze},n.ea=function(Ze,Sn,Mn,Xn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+Ze);Sn=Sn?Sn.toUpperCase():"GET",this.D=Ze,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?ci(this.o):ci(ir),this.g.onreadystatechange=Oe(this.Ea,this);try{this.B=!0,this.g.open(Sn,String(Ze),!0),this.B=!1}catch(Lr){fs(this,Lr);return}if(Ze=Mn||"",Mn=new Map(this.headers),Xn)if(Object.getPrototypeOf(Xn)===Object.prototype)for(var wr in Xn)Mn.set(wr,Xn[wr]);else if(typeof Xn.keys=="function"&&typeof Xn.get=="function")for(const Lr of Xn.keys())Mn.set(Lr,Xn.get(Lr));else throw Error("Unknown input type for opt_headers: "+String(Xn));Xn=Array.from(Mn.keys()).find(Lr=>Lr.toLowerCase()=="content-type"),wr=De.FormData&&Ze instanceof De.FormData,!(0<=Array.prototype.indexOf.call(Ki,Sn,void 0))||Xn||wr||Mn.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Lr,ti]of Mn)this.g.setRequestHeader(Lr,ti);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yi(this),this.u=!0,this.g.send(Ze),this.u=!1}catch(Lr){fs(this,Lr)}};function fs(Ze,Sn){Ze.h=!1,Ze.g&&(Ze.j=!0,Ze.g.abort(),Ze.j=!1),Ze.l=Sn,Ze.m=5,Ao(Ze),Rr(Ze)}function Ao(Ze){Ze.A||(Ze.A=!0,Fr(Ze,"complete"),Fr(Ze,"error"))}n.abort=function(Ze){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=Ze||7,Fr(this,"complete"),Fr(this,"abort"),Rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),ui.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ho(this):this.bb())},n.bb=function(){ho(this)};function ho(Ze){if(Ze.h&&typeof Ce<"u"&&(!Ze.v[1]||as(Ze)!=4||Ze.Z()!=2)){if(Ze.u&&as(Ze)==4)Kr(Ze.Ea,0,Ze);else if(Fr(Ze,"readystatechange"),as(Ze)==4){Ze.h=!1;try{const ti=Ze.Z();e:switch(ti){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Sn=!0;break e;default:Sn=!1}var Mn;if(!(Mn=Sn)){var Xn;if(Xn=ti===0){var wr=String(Ze.D).match(mo)[1]||null;!wr&&De.self&&De.self.location&&(wr=De.self.location.protocol.slice(0,-1)),Xn=!ts.test(wr?wr.toLowerCase():"")}Mn=Xn}if(Mn)Fr(Ze,"complete"),Fr(Ze,"success");else{Ze.m=6;try{var Lr=2<as(Ze)?Ze.g.statusText:""}catch{Lr=""}Ze.l=Lr+" ["+Ze.Z()+"]",Ao(Ze)}}finally{Rr(Ze)}}}}function Rr(Ze,Sn){if(Ze.g){Yi(Ze);const Mn=Ze.g,Xn=Ze.v[0]?()=>{}:null;Ze.g=null,Ze.v=null,Sn||Fr(Ze,"ready");try{Mn.onreadystatechange=Xn}catch{}}}function Yi(Ze){Ze.I&&(De.clearTimeout(Ze.I),Ze.I=null)}n.isActive=function(){return!!this.g};function as(Ze){return Ze.g?Ze.g.readyState:0}n.Z=function(){try{return 2<as(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(Ze){if(this.g){var Sn=this.g.responseText;return Ze&&Sn.indexOf(Ze)==0&&(Sn=Sn.substring(Ze.length)),Ui(Sn)}};function qo(Ze){try{if(!Ze.g)return null;if("response"in Ze.g)return Ze.g.response;switch(Ze.H){case"":case"text":return Ze.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Ze.g)return Ze.g.mozResponseArrayBuffer}return null}catch{return null}}function Xs(Ze){const Sn={};Ze=(Ze.g&&2<=as(Ze)&&Ze.g.getAllResponseHeaders()||"").split(`\r
`);for(let Xn=0;Xn<Ze.length;Xn++){if(Xe(Ze[Xn]))continue;var Mn=bn(Ze[Xn]);const wr=Mn[0];if(Mn=Mn[1],typeof Mn!="string")continue;Mn=Mn.trim();const Lr=Sn[wr]||[];Sn[wr]=Lr,Lr.push(Mn)}gn(Sn,function(Xn){return Xn.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wo(Ze,Sn,Mn){return Mn&&Mn.internalChannelParams&&Mn.internalChannelParams[Ze]||Sn}function xn(Ze){this.Aa=0,this.i=[],this.j=new eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wo("failFast",!1,Ze),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wo("baseRetryDelayMs",5e3,Ze),this.cb=Wo("retryDelaySeedMs",1e4,Ze),this.Wa=Wo("forwardChannelMaxRetries",2,Ze),this.wa=Wo("forwardChannelRequestTimeoutMs",2e4,Ze),this.pa=Ze&&Ze.xmlHttpFactory||void 0,this.Xa=Ze&&Ze.Tb||void 0,this.Ca=Ze&&Ze.useFetchStreams||!1,this.L=void 0,this.J=Ze&&Ze.supportsCrossDomainXhr||!1,this.K="",this.h=new Ca(Ze&&Ze.concurrentRequestLimit),this.Da=new Na,this.P=Ze&&Ze.fastHandshake||!1,this.O=Ze&&Ze.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=Ze&&Ze.Rb||!1,Ze&&Ze.xa&&this.j.xa(),Ze&&Ze.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&Ze&&Ze.detectBufferingProxy||!1,this.ja=void 0,Ze&&Ze.longPollingTimeout&&0<Ze.longPollingTimeout&&(this.ja=Ze.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xn.prototype,n.la=8,n.G=1,n.connect=function(Ze,Sn,Mn,Xn){gs(0),this.W=Ze,this.H=Sn||{},Mn&&Xn!==void 0&&(this.H.OSID=Mn,this.H.OAID=Xn),this.F=this.X,this.I=nl(this,null,this.W),br(this)};function Vn(Ze){if(ur(Ze),Ze.G==3){var Sn=Ze.U++,Mn=Do(Ze.I);if(us(Mn,"SID",Ze.K),us(Mn,"RID",Sn),us(Mn,"TYPE","terminate"),_i(Ze,Mn),Sn=new _r(Ze,Ze.j,Sn),Sn.L=2,Sn.v=Oa(Do(Mn)),Mn=!1,De.navigator&&De.navigator.sendBeacon)try{Mn=De.navigator.sendBeacon(Sn.v.toString(),"")}catch{}!Mn&&De.Image&&(new Image().src=Sn.v,Mn=!0),Mn||(Sn.g=cl(Sn.j,null),Sn.g.ea(Sn.v)),Sn.F=Date.now(),Gi(Sn)}jo(Ze)}function tr(Ze){Ze.g&&(bs(Ze),Ze.g.cancel(),Ze.g=null)}function ur(Ze){tr(Ze),Ze.u&&(De.clearTimeout(Ze.u),Ze.u=null),Qs(Ze),Ze.h.cancel(),Ze.s&&(typeof Ze.s=="number"&&De.clearTimeout(Ze.s),Ze.s=null)}function br(Ze){if(!Lo(Ze.h)&&!Ze.s){Ze.s=!0;var Sn=Ze.Ga;Fn||Dn(),$n||(Fn(),$n=!0),Hn.add(Sn,Ze),Ze.B=0}}function Br(Ze,Sn){return vl(Ze.h)>=Ze.h.j-(Ze.s?1:0)?!1:Ze.s?(Ze.i=Sn.D.concat(Ze.i),!0):Ze.G==1||Ze.G==2||Ze.B>=(Ze.Va?0:Ze.Wa)?!1:(Ze.s=Ls(Oe(Ze.Ga,Ze,Sn),yo(Ze,Ze.B)),Ze.B++,!0)}n.Ga=function(Ze){if(this.s)if(this.s=null,this.G==1){if(!Ze){this.U=Math.floor(1e5*Math.random()),Ze=this.U++;const wr=new _r(this,this.j,Ze);let Lr=this.o;if(this.S&&(Lr?(Lr=mn(Lr),vn(Lr,this.S)):Lr=this.S),this.m!==null||this.O||(wr.H=Lr,Lr=null),this.P)e:{for(var Sn=0,Mn=0;Mn<this.i.length;Mn++){t:{var Xn=this.i[Mn];if("__data__"in Xn.map&&(Xn=Xn.map.__data__,typeof Xn=="string")){Xn=Xn.length;break t}Xn=void 0}if(Xn===void 0)break;if(Sn+=Xn,4096<Sn){Sn=Mn;break e}if(Sn===4096||Mn===this.i.length-1){Sn=Mn+1;break e}}Sn=1e3}else Sn=1e3;Sn=xi(this,wr,Sn),Mn=Do(this.I),us(Mn,"RID",Ze),us(Mn,"CVER",22),this.D&&us(Mn,"X-HTTP-Session-Id",this.D),_i(this,Mn),Lr&&(this.O?Sn="headers="+encodeURIComponent(String(Cr(Lr)))+"&"+Sn:this.m&&ni(Mn,this.m,Lr)),Ja(this.h,wr),this.Ua&&us(Mn,"TYPE","init"),this.P?(us(Mn,"$req",Sn),us(Mn,"SID","null"),wr.T=!0,yi(wr,Mn,null)):yi(wr,Mn,Sn),this.G=2}}else this.G==3&&(Ze?Hr(this,Ze):this.i.length==0||Lo(this.h)||Hr(this))};function Hr(Ze,Sn){var Mn;Sn?Mn=Sn.l:Mn=Ze.U++;const Xn=Do(Ze.I);us(Xn,"SID",Ze.K),us(Xn,"RID",Mn),us(Xn,"AID",Ze.T),_i(Ze,Xn),Ze.m&&Ze.o&&ni(Xn,Ze.m,Ze.o),Mn=new _r(Ze,Ze.j,Mn,Ze.B+1),Ze.m===null&&(Mn.H=Ze.o),Sn&&(Ze.i=Sn.D.concat(Ze.i)),Sn=xi(Ze,Mn,1e3),Mn.I=Math.round(.5*Ze.wa)+Math.round(.5*Ze.wa*Math.random()),Ja(Ze.h,Mn),yi(Mn,Xn,Sn)}function _i(Ze,Sn){Ze.H&&yn(Ze.H,function(Mn,Xn){us(Sn,Xn,Mn)}),Ze.l&&da({},function(Mn,Xn){us(Sn,Xn,Mn)})}function xi(Ze,Sn,Mn){Mn=Math.min(Ze.i.length,Mn);var Xn=Ze.l?Oe(Ze.l.Na,Ze.l,Ze):null;e:{var wr=Ze.i;let Lr=-1;for(;;){const ti=["count="+Mn];Lr==-1?0<Mn?(Lr=wr[0].g,ti.push("ofs="+Lr)):Lr=0:ti.push("ofs="+Lr);let Ss=!0;for(let to=0;to<Mn;to++){let cs=wr[to].g;const ps=wr[to].map;if(cs-=Lr,0>cs)Lr=Math.max(0,wr[to].g-100),Ss=!1;else try{Nl(ps,ti,"req"+cs+"_")}catch{Xn&&Xn(ps)}}if(Ss){Xn=ti.join("&");break e}}}return Ze=Ze.i.splice(0,Mn),Sn.D=Ze,Xn}function Bi(Ze){if(!Ze.g&&!Ze.u){Ze.Y=1;var Sn=Ze.Fa;Fn||Dn(),$n||(Fn(),$n=!0),Hn.add(Sn,Ze),Ze.v=0}}function Ji(Ze){return Ze.g||Ze.u||3<=Ze.v?!1:(Ze.Y++,Ze.u=Ls(Oe(Ze.Fa,Ze),yo(Ze,Ze.v)),Ze.v++,!0)}n.Fa=function(){if(this.u=null,Ws(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var Ze=2*this.R;this.j.info("BP detection timer enabled: "+Ze),this.A=Ls(Oe(this.ab,this),Ze)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gs(10),tr(this),Ws(this))};function bs(Ze){Ze.A!=null&&(De.clearTimeout(Ze.A),Ze.A=null)}function Ws(Ze){Ze.g=new _r(Ze,Ze.j,"rpc",Ze.Y),Ze.m===null&&(Ze.g.H=Ze.o),Ze.g.O=0;var Sn=Do(Ze.qa);us(Sn,"RID","rpc"),us(Sn,"SID",Ze.K),us(Sn,"AID",Ze.T),us(Sn,"CI",Ze.F?"0":"1"),!Ze.F&&Ze.ja&&us(Sn,"TO",Ze.ja),us(Sn,"TYPE","xmlhttp"),_i(Ze,Sn),Ze.m&&Ze.o&&ni(Sn,Ze.m,Ze.o),Ze.L&&(Ze.g.I=Ze.L);var Mn=Ze.g;Ze=Ze.ia,Mn.L=1,Mn.v=Oa(Do(Sn)),Mn.m=null,Mn.P=!0,pi(Mn,Ze)}n.Za=function(){this.C!=null&&(this.C=null,tr(this),Ji(this),gs(19))};function Qs(Ze){Ze.C!=null&&(De.clearTimeout(Ze.C),Ze.C=null)}function Es(Ze,Sn){var Mn=null;if(Ze.g==Sn){Qs(Ze),bs(Ze),Ze.g=null;var Xn=2}else if(ys(Ze.h,Sn))Mn=Sn.D,qs(Ze.h,Sn),Xn=1;else return;if(Ze.G!=0){if(Sn.o)if(Xn==1){Mn=Sn.m?Sn.m.length:0,Sn=Date.now()-Sn.F;var wr=Ze.B;Xn=Ms(),Fr(Xn,new Mo(Xn,Mn)),br(Ze)}else Bi(Ze);else if(wr=Sn.s,wr==3||wr==0&&0<Sn.X||!(Xn==1&&Br(Ze,Sn)||Xn==2&&Ji(Ze)))switch(Mn&&0<Mn.length&&(Sn=Ze.h,Sn.i=Sn.i.concat(Mn)),wr){case 1:Ds(Ze,5);break;case 4:Ds(Ze,10);break;case 3:Ds(Ze,6);break;default:Ds(Ze,2)}}}function yo(Ze,Sn){let Mn=Ze.Ta+Math.floor(Math.random()*Ze.cb);return Ze.isActive()||(Mn*=2),Mn*Sn}function Ds(Ze,Sn){if(Ze.j.info("Error code "+Sn),Sn==2){var Mn=Oe(Ze.fb,Ze),Xn=Ze.Xa;const wr=!Xn;Xn=new As(Xn||"//www.google.com/images/cleardot.gif"),De.location&&De.location.protocol=="http"||el(Xn,"https"),Oa(Xn),wr?Hl(Xn.toString(),Mn):Ol(Xn.toString(),Mn)}else gs(2);Ze.G=0,Ze.l&&Ze.l.sa(Sn),jo(Ze),ur(Ze)}n.fb=function(Ze){Ze?(this.j.info("Successfully pinged google.com"),gs(2)):(this.j.info("Failed to ping google.com"),gs(1))};function jo(Ze){if(Ze.G=0,Ze.ka=[],Ze.l){const Sn=wl(Ze.h);(Sn.length!=0||Ze.i.length!=0)&&(Ge(Ze.ka,Sn),Ge(Ze.ka,Ze.i),Ze.h.i.length=0,He(Ze.i),Ze.i.length=0),Ze.l.ra()}}function nl(Ze,Sn,Mn){var Xn=Mn instanceof As?Do(Mn):new As(Mn);if(Xn.g!="")Sn&&(Xn.g=Sn+"."+Xn.g),Ga(Xn,Xn.s);else{var wr=De.location;Xn=wr.protocol,Sn=Sn?Sn+"."+wr.hostname:wr.hostname,wr=+wr.port;var Lr=new As(null);Xn&&el(Lr,Xn),Sn&&(Lr.g=Sn),wr&&Ga(Lr,wr),Mn&&(Lr.l=Mn),Xn=Lr}return Mn=Ze.D,Sn=Ze.ya,Mn&&Sn&&us(Xn,Mn,Sn),us(Xn,"VER",Ze.la),_i(Ze,Xn),Xn}function cl(Ze,Sn,Mn){if(Sn&&!Ze.J)throw Error("Can't create secondary domain capable XhrIo object.");return Sn=Ze.Ca&&!Ze.pa?new ui(new Ln({eb:Mn})):new ui(Ze.pa),Sn.Ha(Ze.J),Sn}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}n=iu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ml(){}Ml.prototype.g=function(Ze,Sn){return new So(Ze,Sn)};function So(Ze,Sn){yr.call(this),this.g=new xn(Sn),this.l=Ze,this.h=Sn&&Sn.messageUrlParams||null,Ze=Sn&&Sn.messageHeaders||null,Sn&&Sn.clientProtocolHeaderRequired&&(Ze?Ze["X-Client-Protocol"]="webchannel":Ze={"X-Client-Protocol":"webchannel"}),this.g.o=Ze,Ze=Sn&&Sn.initMessageHeaders||null,Sn&&Sn.messageContentType&&(Ze?Ze["X-WebChannel-Content-Type"]=Sn.messageContentType:Ze={"X-WebChannel-Content-Type":Sn.messageContentType}),Sn&&Sn.va&&(Ze?Ze["X-WebChannel-Client-Profile"]=Sn.va:Ze={"X-WebChannel-Client-Profile":Sn.va}),this.g.S=Ze,(Ze=Sn&&Sn.Sb)&&!Xe(Ze)&&(this.g.m=Ze),this.v=Sn&&Sn.supportsCrossDomainXhr||!1,this.u=Sn&&Sn.sendRawJson||!1,(Sn=Sn&&Sn.httpSessionIdParam)&&!Xe(Sn)&&(this.g.D=Sn,Ze=this.h,Ze!==null&&Sn in Ze&&(Ze=this.h,Sn in Ze&&delete Ze[Sn])),this.j=new Ta(this)}ze(So,yr),So.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},So.prototype.close=function(){Vn(this.g)},So.prototype.o=function(Ze){var Sn=this.g;if(typeof Ze=="string"){var Mn={};Mn.__data__=Ze,Ze=Mn}else this.u&&(Mn={},Mn.__data__=Ii(Ze),Ze=Mn);Sn.i.push(new Xo(Sn.Ya++,Ze)),Sn.G==3&&br(Sn)},So.prototype.N=function(){this.g.l=null,delete this.j,Vn(this.g),delete this.g,So.aa.N.call(this)};function Ma(Ze){rs.call(this),Ze.__headers__&&(this.headers=Ze.__headers__,this.statusCode=Ze.__status__,delete Ze.__headers__,delete Ze.__status__);var Sn=Ze.__sm__;if(Sn){e:{for(const Mn in Sn){Ze=Mn;break e}Ze=void 0}(this.i=Ze)&&(Ze=this.i,Sn=Sn!==null&&Ze in Sn?Sn[Ze]:void 0),this.data=Sn}else this.data=Ze}ze(Ma,rs);function Gl(){ri.call(this),this.status=1}ze(Gl,ri);function Ta(Ze){this.g=Ze}ze(Ta,iu),Ta.prototype.ua=function(){Fr(this.g,"a")},Ta.prototype.ta=function(Ze){Fr(this.g,new Ma(Ze))},Ta.prototype.sa=function(Ze){Fr(this.g,new Gl)},Ta.prototype.ra=function(){Fr(this.g,"b")},Ml.prototype.createWebChannel=Ml.prototype.g,So.prototype.send=So.prototype.o,So.prototype.open=So.prototype.m,So.prototype.close=So.prototype.close,createWebChannelTransport=function(){return new Ml},getStatEventTarget=function(){return Ms()},Event$1=ai,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},po.NO_ERROR=0,po.TIMEOUT=8,po.HTTP_ERROR=6,ErrorCode=po,Gn.COMPLETE="complete",EventType=Gn,ws.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",yr.prototype.listen=yr.prototype.K,WebChannel=ws,ui.prototype.listenOnce=ui.prototype.L,ui.prototype.getLastError=ui.prototype.Ka,ui.prototype.getLastErrorCode=ui.prototype.Ba,ui.prototype.getStatus=ui.prototype.Z,ui.prototype.getResponseJson=ui.prototype.Oa,ui.prototype.getResponseText=ui.prototype.oa,ui.prototype.send=ui.prototype.ea,ui.prototype.setWithCredentials=ui.prototype.Ha,XhrIo=ui}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F$2="@firebase/firestore",M$1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let User$1=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};User$1.UNAUTHENTICATED=new User$1(null),User$1.GOOGLE_CREDENTIALS=new User$1("google-credentials-uid"),User$1.FIRST_PARTY=new User$1("first-party-uid"),User$1.MOCK_USER=new User$1("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$2="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(n,...e){if(O$1.logLevel<=LogLevel.DEBUG){const t=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x$2}): ${n}`,...t)}}function __PRIVATE_logError(n,...e){if(O$1.logLevel<=LogLevel.ERROR){const t=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x$2}): ${n}`,...t)}}function __PRIVATE_logWarn(n,...e){if(O$1.logLevel<=LogLevel.WARN){const t=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x$2}): ${n}`,...t)}}function __PRIVATE_argToString(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(n,e,t){let Te="Unexpected state";typeof e=="string"?Te=e:t=e,__PRIVATE__fail(n,Te,t)}function __PRIVATE__fail(n,e,t){let Te=`FIRESTORE (${x$2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{Te+=" CONTEXT: "+JSON.stringify(t)}catch{Te+=" CONTEXT: "+t}throw __PRIVATE_logError(Te),new Error(Te)}function __PRIVATE_hardAssert(n,e,t,Te){let Ee="Unexpected state";typeof t=="string"?Ee=t:Te=t,n||__PRIVATE__fail(e,Ee,Te)}function __PRIVATE_debugCast(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(User$1.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User$1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){__PRIVATE_hardAssert(this.o===void 0,42304);let Te=this.i;const Ee=$e=>this.i!==Te?(Te=this.i,t($e)):Promise.resolve();let Re=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),Re.resolve(),Re=new __PRIVATE_Deferred,e.enqueueRetryable(()=>Ee(this.currentUser))};const Ce=()=>{const $e=Re;e.enqueueRetryable(async()=>{await $e.promise,await Ee(this.currentUser)})},De=$e=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$e,this.o&&(this.auth.addAuthTokenListener(this.o),Ce())};this.t.onInit($e=>De($e)),setTimeout(()=>{if(!this.auth){const $e=this.t.getImmediate({optional:!0});$e?De($e):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),Re.resolve(),Re=new __PRIVATE_Deferred)}},0),Ce()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(Te=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):Te?(__PRIVATE_hardAssert(typeof Te.accessToken=="string",31837,{l:Te}),new __PRIVATE_OAuthToken(Te.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User$1(e)}}class __PRIVATE_FirstPartyToken{constructor(e,t,Te){this.P=e,this.T=t,this.I=Te,this.type="FirstParty",this.user=User$1.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,t,Te){this.P=e,this.T=t,this.I=Te}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(User$1.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){__PRIVATE_hardAssert(this.o===void 0,3512);const Te=Re=>{Re.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${Re.error.message}`);const Ce=Re.token!==this.m;return this.m=Re.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${Ce?"new":"existing"} token.`),Ce?t(Re.token):Promise.resolve()};this.o=Re=>{e.enqueueRetryable(()=>Te(Re))};const Ee=Re=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=Re,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(Re=>Ee(Re)),setTimeout(()=>{if(!this.appCheck){const Re=this.V.getImmediate({optional:!0});Re?Ee(Re):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(__PRIVATE_hardAssert(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AppCheckToken(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let Te=0;Te<n;Te++)t[Te]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let Te="";for(;Te.length<20;){const Ee=__PRIVATE_randomBytes(40);for(let Re=0;Re<Ee.length;++Re)Te.length<20&&Ee[Re]<t&&(Te+=e.charAt(Ee[Re]%62))}return Te}}function __PRIVATE_primitiveComparator(n,e){return n<e?-1:n>e?1:0}function __PRIVATE_compareUtf8Strings(n,e){let t=0;for(;t<n.length&&t<e.length;){const Te=n.codePointAt(t),Ee=e.codePointAt(t);if(Te!==Ee){if(Te<128&&Ee<128)return __PRIVATE_primitiveComparator(Te,Ee);{const Re=__PRIVATE_newTextEncoder(),Ce=__PRIVATE_compareByteArrays$1(Re.encode(__PRIVATE_getUtf8SafeSubstring(n,t)),Re.encode(__PRIVATE_getUtf8SafeSubstring(e,t)));return Ce!==0?Ce:__PRIVATE_primitiveComparator(Te,Ee)}}t+=Te>65535?2:1}return __PRIVATE_primitiveComparator(n.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return __PRIVATE_primitiveComparator(n[t],e[t]);return __PRIVATE_primitiveComparator(n.length,e.length)}function __PRIVATE_arrayEquals(n,e,t){return n.length===e.length&&n.every((Te,Ee)=>t(Te,e[Ee]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$2="__name__";class BasePath{constructor(e,t,Te){t===void 0?t=0:t>e.length&&fail(637,{offset:t,range:e.length}),Te===void 0?Te=e.length-t:Te>e.length-t&&fail(1746,{length:Te,range:e.length-t}),this.segments=e,this.offset=t,this.len=Te}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(Te=>{t.push(Te)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,Te=this.limit();t<Te;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const Te=Math.min(e.length,t.length);for(let Ee=0;Ee<Te;Ee++){const Re=BasePath.compareSegments(e.get(Ee),t.get(Ee));if(Re!==0)return Re}return __PRIVATE_primitiveComparator(e.length,t.length)}static compareSegments(e,t){const Te=BasePath.isNumericId(e),Ee=BasePath.isNumericId(t);return Te&&!Ee?-1:!Te&&Ee?1:Te&&Ee?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(t)):__PRIVATE_compareUtf8Strings(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,t,Te){return new ResourcePath(e,t,Te)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const Te of e){if(Te.indexOf("//")>=0)throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid segment (${Te}). Paths must not contain // in them.`);t.push(...Te.split("/").filter(Ee=>Ee.length>0))}return new ResourcePath(t)}static emptyPath(){return new ResourcePath([])}}const L$2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,t,Te){return new FieldPath$1(e,t,Te)}static isValidIdentifier(e){return L$2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B$2}static keyField(){return new FieldPath$1([B$2])}static fromServerFormat(e){const t=[];let Te="",Ee=0;const Re=()=>{if(Te.length===0)throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(Te),Te=""};let Ce=!1;for(;Ee<e.length;){const De=e[Ee];if(De==="\\"){if(Ee+1===e.length)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const $e=e[Ee+1];if($e!=="\\"&&$e!=="."&&$e!=="`")throw new FirestoreError(N$2.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);Te+=$e,Ee+=2}else De==="`"?(Ce=!Ce,Ee++):De!=="."||Ce?(Te+=De,Ee++):(Re(),Ee++)}if(Re(),Ce)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(t)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ResourcePath.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(n,e,t){if(!t)throw new FirestoreError(N$2.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(n,e,t,Te){if(e===!0&&Te===!0)throw new FirestoreError(N$2.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function __PRIVATE_validateDocumentPath(n){if(!DocumentKey.isDocumentKey(n))throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_validateCollectionPath(n){if(DocumentKey.isDocumentKey(n))throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_isPlainObject(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function __PRIVATE_valueDescription(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(Te){return Te.constructor?Te.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fail(12329,{type:typeof n})}function __PRIVATE_cast(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=__PRIVATE_valueDescription(n);throw new FirestoreError(N$2.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(n,e){const t={typeString:n};return e&&(t.value=e),t}function __PRIVATE_validateJSON(n,e){if(!__PRIVATE_isPlainObject(n))throw new FirestoreError(N$2.INVALID_ARGUMENT,"JSON must be an object");let t;for(const Te in e)if(e[Te]){const Ee=e[Te].typeString,Re="value"in e[Te]?{value:e[Te].value}:void 0;if(!(Te in n)){t=`JSON missing required field: '${Te}'`;break}const Ce=n[Te];if(Ee&&typeof Ce!==Ee){t=`JSON field '${Te}' must be a ${Ee}.`;break}if(Re!==void 0&&Ce!==Re.value){t=`Expected '${Te}' field to equal '${Re.value}'`;break}}if(t)throw new FirestoreError(N$2.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$1=-62135596800,q$1=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),Te=Math.floor((e-1e3*t)*q$1);return new Timestamp(t,Te)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<k$1)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q$1}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$2=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(n,e){const t=n.toTimestamp().seconds,Te=n.toTimestamp().nanoseconds+1,Ee=SnapshotVersion.fromTimestamp(Te===1e9?new Timestamp(t+1,0):new Timestamp(t,Te));return new IndexOffset(Ee,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(n){return new IndexOffset(n.readTime,n.key,Q$2)}class IndexOffset{constructor(e,t,Te){this.readTime=e,this.documentKey=t,this.largestBatchId=Te}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q$2)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q$2)}}function __PRIVATE_indexOffsetComparator(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=DocumentKey.comparator(n.documentKey,e.documentKey),t!==0?t:__PRIVATE_primitiveComparator(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(n){if(n.code!==N$2.FAILED_PRECONDITION||n.message!==$$2)throw n;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((Te,Ee)=>{this.nextCallback=Re=>{this.wrapSuccess(e,Re).next(Te,Ee)},this.catchCallback=Re=>{this.wrapFailure(t,Re).next(Te,Ee)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof PersistencePromise?t:PersistencePromise.resolve(t)}catch(t){return PersistencePromise.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.reject(t)}static resolve(e){return new PersistencePromise((t,Te)=>{t(e)})}static reject(e){return new PersistencePromise((t,Te)=>{Te(e)})}static waitFor(e){return new PersistencePromise((t,Te)=>{let Ee=0,Re=0,Ce=!1;e.forEach(De=>{++Ee,De.next(()=>{++Re,Ce&&Re===Ee&&t()},$e=>Te($e))}),Ce=!0,Re===Ee&&t()})}static or(e){let t=PersistencePromise.resolve(!1);for(const Te of e)t=t.next(Ee=>Ee?PersistencePromise.resolve(Ee):Te());return t}static forEach(e,t){const Te=[];return e.forEach((Ee,Re)=>{Te.push(t.call(this,Ee,Re))}),this.waitFor(Te)}static mapArray(e,t){return new PersistencePromise((Te,Ee)=>{const Re=e.length,Ce=new Array(Re);let De=0;for(let $e=0;$e<Re;$e++){const Ve=$e;t(e[Ve]).next(Be=>{Ce[Ve]=Be,++De,De===Re&&Te(Ce)},Be=>Ee(Be))}})}static doWhile(e,t){return new PersistencePromise((Te,Ee)=>{const Re=()=>{e()===!0?t().next(()=>{Re()},Ee):Te()};Re()})}}function __PRIVATE_getAndroidVersion(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function __PRIVATE_isIndexedDbTransactionError(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=Te=>this._e(Te),this.ae=Te=>t.writeSequenceNumber(Te))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}__PRIVATE_ListenSequence.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$2=-1;function __PRIVATE_isNullOrUndefined(n){return n==null}function __PRIVATE_isNegativeZero(n){return n===0&&1/n==-1/0}function isSafeInteger(n){return typeof n=="number"&&Number.isInteger(n)&&!__PRIVATE_isNegativeZero(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$2="";function __PRIVATE_encodeResourcePath(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(n.get(t),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(n,e){let t=e;const Te=n.length;for(let Ee=0;Ee<Te;Ee++){const Re=n.charAt(Ee);switch(Re){case"\0":t+="";break;case z$2:t+="";break;default:t+=Re}}return t}function __PRIVATE_encodeSeparator(n){return n+z$2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function forEach$1(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function isEmpty$1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,t){this.comparator=e,this.root=t||LLRBNode.EMPTY}insert(e,t){return new SortedMap(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const Te=this.comparator(e,t.key);if(Te===0)return t.value;Te<0?t=t.left:Te>0&&(t=t.right)}return null}indexOf(e){let t=0,Te=this.root;for(;!Te.isEmpty();){const Ee=this.comparator(e,Te.key);if(Ee===0)return t+Te.left.size;Ee<0?Te=Te.left:(t+=Te.left.size+1,Te=Te.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,Te)=>(e(t,Te),!1))}toString(){const e=[];return this.inorderTraversal((t,Te)=>(e.push(`${t}:${Te}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,t,Te,Ee){this.isReverse=Ee,this.nodeStack=[];let Re=1;for(;!e.isEmpty();)if(Re=t?Te(e.key,t):1,t&&Ee&&(Re*=-1),Re<0)e=this.isReverse?e.left:e.right;else{if(Re===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,t,Te,Ee,Re){this.key=e,this.value=t,this.color=Te??LLRBNode.RED,this.left=Ee??LLRBNode.EMPTY,this.right=Re??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,Te,Ee,Re){return new LLRBNode(e??this.key,t??this.value,Te??this.color,Ee??this.left,Re??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,Te){let Ee=this;const Re=Te(e,Ee.key);return Ee=Re<0?Ee.copy(null,null,null,Ee.left.insert(e,t,Te),null):Re===0?Ee.copy(null,t,null,null,null):Ee.copy(null,null,null,null,Ee.right.insert(e,t,Te)),Ee.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let Te,Ee=this;if(t(e,Ee.key)<0)Ee.left.isEmpty()||Ee.left.isRed()||Ee.left.left.isRed()||(Ee=Ee.moveRedLeft()),Ee=Ee.copy(null,null,null,Ee.left.remove(e,t),null);else{if(Ee.left.isRed()&&(Ee=Ee.rotateRight()),Ee.right.isEmpty()||Ee.right.isRed()||Ee.right.left.isRed()||(Ee=Ee.moveRedRight()),t(e,Ee.key)===0){if(Ee.right.isEmpty())return LLRBNode.EMPTY;Te=Ee.right.min(),Ee=Ee.copy(Te.key,Te.value,null,null,Ee.right.removeMin())}Ee=Ee.copy(null,null,null,null,Ee.right.remove(e,t))}return Ee.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,t,Te,Ee,Re){return this}insert(e,t,Te){return new LLRBNode(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,Te)=>(e(t),!1))}forEachInRange(e,t){const Te=this.data.getIteratorFrom(e[0]);for(;Te.hasNext();){const Ee=Te.getNext();if(this.comparator(Ee.key,e[1])>=0)return;t(Ee.key)}}forEachWhile(e,t){let Te;for(Te=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();Te.hasNext();)if(!e(Te.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(Te=>{t=t.add(Te)}),t}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const t=this.data.getIterator(),Te=e.data.getIterator();for(;t.hasNext();){const Ee=t.getNext().key,Re=Te.getNext().key;if(this.comparator(Ee,Re)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new SortedSet(this.comparator);return t.data=e,t}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let t=new SortedSet(FieldPath$1.comparator);for(const Te of this.fields)t=t.add(Te);for(const Te of e)t=t.add(Te);return new FieldMask(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(t,Te)=>t.isEqual(Te))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(Ee){try{return atob(Ee)}catch(Re){throw typeof DOMException<"u"&&Re instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+Re):Re}}(e);return new ByteString(t)}static fromUint8Array(e){const t=function(Ee){let Re="";for(let Ce=0;Ce<Ee.length;++Ce)Re+=String.fromCharCode(Ee[Ce]);return Re}(e);return new ByteString(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const Te=new Uint8Array(t.length);for(let Ee=0;Ee<t.length;Ee++)Te[Ee]=t.charCodeAt(Ee);return Te}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(n){if(__PRIVATE_hardAssert(!!n,39018),typeof n=="string"){let e=0;const t=it$1.exec(n);if(__PRIVATE_hardAssert(!!t,46558,{timestamp:n}),t[1]){let Ee=t[1];Ee=(Ee+"000000000").substr(0,9),e=Number(Ee)}const Te=new Date(n);return{seconds:Math.floor(Te.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(n.seconds),nanos:__PRIVATE_normalizeNumber(n.nanos)}}function __PRIVATE_normalizeNumber(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function __PRIVATE_normalizeByteString(n){return typeof n=="string"?ByteString.fromBase64String(n):ByteString.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st$2="server_timestamp",ot$1="__type__",_t$2="__previous_value__",at$2="__local_write_time__";function __PRIVATE_isServerTimestamp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ot$1])===null||t===void 0?void 0:t.stringValue)===st$2}function __PRIVATE_getPreviousValue(n){const e=n.mapValue.fields[_t$2];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(n){const e=__PRIVATE_normalizeTimestamp(n.mapValue.fields[at$2].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,t,Te,Ee,Re,Ce,De,$e,Ve,Be){this.databaseId=e,this.appId=t,this.persistenceKey=Te,this.host=Ee,this.ssl=Re,this.forceLongPolling=Ce,this.autoDetectLongPolling=De,this.longPollingOptions=$e,this.useFetchStreams=Ve,this.isUsingEmulator=Be}}const ut$1="(default)";class DatabaseId{constructor(e,t){this.projectId=e,this.database=t||ut$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct$1="__type__",lt$2="__max__",ht$2={mapValue:{}},Pt$2="__vector__",Tt$1="value";function __PRIVATE_typeOrder(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?__PRIVATE_isServerTimestamp(n)?4:__PRIVATE_isMaxValue(n)?9007199254740991:__PRIVATE_isVectorValue(n)?10:11:fail(28295,{value:n})}function __PRIVATE_valueEquals(n,e){if(n===e)return!0;const t=__PRIVATE_typeOrder(n);if(t!==__PRIVATE_typeOrder(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(n).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(Ee,Re){if(typeof Ee.timestampValue=="string"&&typeof Re.timestampValue=="string"&&Ee.timestampValue.length===Re.timestampValue.length)return Ee.timestampValue===Re.timestampValue;const Ce=__PRIVATE_normalizeTimestamp(Ee.timestampValue),De=__PRIVATE_normalizeTimestamp(Re.timestampValue);return Ce.seconds===De.seconds&&Ce.nanos===De.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(Ee,Re){return __PRIVATE_normalizeByteString(Ee.bytesValue).isEqual(__PRIVATE_normalizeByteString(Re.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(Ee,Re){return __PRIVATE_normalizeNumber(Ee.geoPointValue.latitude)===__PRIVATE_normalizeNumber(Re.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(Ee.geoPointValue.longitude)===__PRIVATE_normalizeNumber(Re.geoPointValue.longitude)}(n,e);case 2:return function(Ee,Re){if("integerValue"in Ee&&"integerValue"in Re)return __PRIVATE_normalizeNumber(Ee.integerValue)===__PRIVATE_normalizeNumber(Re.integerValue);if("doubleValue"in Ee&&"doubleValue"in Re){const Ce=__PRIVATE_normalizeNumber(Ee.doubleValue),De=__PRIVATE_normalizeNumber(Re.doubleValue);return Ce===De?__PRIVATE_isNegativeZero(Ce)===__PRIVATE_isNegativeZero(De):isNaN(Ce)&&isNaN(De)}return!1}(n,e);case 9:return __PRIVATE_arrayEquals(n.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(Ee,Re){const Ce=Ee.mapValue.fields||{},De=Re.mapValue.fields||{};if(__PRIVATE_objectSize(Ce)!==__PRIVATE_objectSize(De))return!1;for(const $e in Ce)if(Ce.hasOwnProperty($e)&&(De[$e]===void 0||!__PRIVATE_valueEquals(Ce[$e],De[$e])))return!1;return!0}(n,e);default:return fail(52216,{left:n})}}function __PRIVATE_arrayValueContains(n,e){return(n.values||[]).find(t=>__PRIVATE_valueEquals(t,e))!==void 0}function __PRIVATE_valueCompare(n,e){if(n===e)return 0;const t=__PRIVATE_typeOrder(n),Te=__PRIVATE_typeOrder(e);if(t!==Te)return __PRIVATE_primitiveComparator(t,Te);switch(t){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(n.booleanValue,e.booleanValue);case 2:return function(Re,Ce){const De=__PRIVATE_normalizeNumber(Re.integerValue||Re.doubleValue),$e=__PRIVATE_normalizeNumber(Ce.integerValue||Ce.doubleValue);return De<$e?-1:De>$e?1:De===$e?0:isNaN(De)?isNaN($e)?0:-1:1}(n,e);case 3:return __PRIVATE_compareTimestamps(n.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(n),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(n.stringValue,e.stringValue);case 6:return function(Re,Ce){const De=__PRIVATE_normalizeByteString(Re),$e=__PRIVATE_normalizeByteString(Ce);return De.compareTo($e)}(n.bytesValue,e.bytesValue);case 7:return function(Re,Ce){const De=Re.split("/"),$e=Ce.split("/");for(let Ve=0;Ve<De.length&&Ve<$e.length;Ve++){const Be=__PRIVATE_primitiveComparator(De[Ve],$e[Ve]);if(Be!==0)return Be}return __PRIVATE_primitiveComparator(De.length,$e.length)}(n.referenceValue,e.referenceValue);case 8:return function(Re,Ce){const De=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(Re.latitude),__PRIVATE_normalizeNumber(Ce.latitude));return De!==0?De:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(Re.longitude),__PRIVATE_normalizeNumber(Ce.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(n.arrayValue,e.arrayValue);case 10:return function(Re,Ce){var De,$e,Ve,Be;const Me=Re.fields||{},Oe=Ce.fields||{},Ue=(De=Me[Tt$1])===null||De===void 0?void 0:De.arrayValue,ze=($e=Oe[Tt$1])===null||$e===void 0?void 0:$e.arrayValue,He=__PRIVATE_primitiveComparator(((Ve=Ue?.values)===null||Ve===void 0?void 0:Ve.length)||0,((Be=ze?.values)===null||Be===void 0?void 0:Be.length)||0);return He!==0?He:__PRIVATE_compareArrays(Ue,ze)}(n.mapValue,e.mapValue);case 11:return function(Re,Ce){if(Re===ht$2.mapValue&&Ce===ht$2.mapValue)return 0;if(Re===ht$2.mapValue)return 1;if(Ce===ht$2.mapValue)return-1;const De=Re.fields||{},$e=Object.keys(De),Ve=Ce.fields||{},Be=Object.keys(Ve);$e.sort(),Be.sort();for(let Me=0;Me<$e.length&&Me<Be.length;++Me){const Oe=__PRIVATE_compareUtf8Strings($e[Me],Be[Me]);if(Oe!==0)return Oe;const Ue=__PRIVATE_valueCompare(De[$e[Me]],Ve[Be[Me]]);if(Ue!==0)return Ue}return __PRIVATE_primitiveComparator($e.length,Be.length)}(n.mapValue,e.mapValue);default:throw fail(23264,{le:t})}}function __PRIVATE_compareTimestamps(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return __PRIVATE_primitiveComparator(n,e);const t=__PRIVATE_normalizeTimestamp(n),Te=__PRIVATE_normalizeTimestamp(e),Ee=__PRIVATE_primitiveComparator(t.seconds,Te.seconds);return Ee!==0?Ee:__PRIVATE_primitiveComparator(t.nanos,Te.nanos)}function __PRIVATE_compareArrays(n,e){const t=n.values||[],Te=e.values||[];for(let Ee=0;Ee<t.length&&Ee<Te.length;++Ee){const Re=__PRIVATE_valueCompare(t[Ee],Te[Ee]);if(Re)return Re}return __PRIVATE_primitiveComparator(t.length,Te.length)}function canonicalId(n){return __PRIVATE_canonifyValue(n)}function __PRIVATE_canonifyValue(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const Te=__PRIVATE_normalizeTimestamp(t);return`time(${Te.seconds},${Te.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return __PRIVATE_normalizeByteString(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return DocumentKey.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let Te="[",Ee=!0;for(const Re of t.values||[])Ee?Ee=!1:Te+=",",Te+=__PRIVATE_canonifyValue(Re);return Te+"]"}(n.arrayValue):"mapValue"in n?function(t){const Te=Object.keys(t.fields||{}).sort();let Ee="{",Re=!0;for(const Ce of Te)Re?Re=!1:Ee+=",",Ee+=`${Ce}:${__PRIVATE_canonifyValue(t.fields[Ce])}`;return Ee+"}"}(n.mapValue):fail(61005,{value:n})}function __PRIVATE_estimateByteSize(n){switch(__PRIVATE_typeOrder(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(n);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*n.stringValue.length;case 6:return __PRIVATE_normalizeByteString(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(Te){return(Te.values||[]).reduce((Ee,Re)=>Ee+__PRIVATE_estimateByteSize(Re),0)}(n.arrayValue);case 10:case 11:return function(Te){let Ee=0;return forEach$1(Te.fields,(Re,Ce)=>{Ee+=Re.length+__PRIVATE_estimateByteSize(Ce)}),Ee}(n.mapValue);default:throw fail(13486,{value:n})}}function __PRIVATE_refValue(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function isInteger$1(n){return!!n&&"integerValue"in n}function isArray$1(n){return!!n&&"arrayValue"in n}function __PRIVATE_isNullValue(n){return!!n&&"nullValue"in n}function __PRIVATE_isNanValue(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function __PRIVATE_isMapValue(n){return!!n&&"mapValue"in n}function __PRIVATE_isVectorValue(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ct$1])===null||t===void 0?void 0:t.stringValue)===Pt$2}function __PRIVATE_deepClone(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return forEach$1(n.mapValue.fields,(t,Te)=>e.mapValue.fields[t]=__PRIVATE_deepClone(Te)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=__PRIVATE_deepClone(n.arrayValue.values[t]);return e}return Object.assign({},n)}function __PRIVATE_isMaxValue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lt$2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ObjectValue$1=class Ph{constructor(e){this.value=e}static empty(){return new Ph({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let Te=0;Te<e.length-1;++Te)if(t=(t.mapValue.fields||{})[e.get(Te)],!__PRIVATE_isMapValue(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(t)}setAll(e){let t=FieldPath$1.emptyPath(),Te={},Ee=[];e.forEach((Ce,De)=>{if(!t.isImmediateParentOf(De)){const $e=this.getFieldsMap(t);this.applyChanges($e,Te,Ee),Te={},Ee=[],t=De.popLast()}Ce?Te[De.lastSegment()]=__PRIVATE_deepClone(Ce):Ee.push(De.lastSegment())});const Re=this.getFieldsMap(t);this.applyChanges(Re,Te,Ee)}delete(e){const t=this.field(e.popLast());__PRIVATE_isMapValue(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let Te=0;Te<e.length;++Te){let Ee=t.mapValue.fields[e.get(Te)];__PRIVATE_isMapValue(Ee)&&Ee.mapValue.fields||(Ee={mapValue:{fields:{}}},t.mapValue.fields[e.get(Te)]=Ee),t=Ee}return t.mapValue.fields}applyChanges(e,t,Te){forEach$1(t,(Ee,Re)=>e[Ee]=Re);for(const Ee of Te)delete e[Ee]}clone(){return new Ph(__PRIVATE_deepClone(this.value))}};function __PRIVATE_extractFieldMask(n){const e=[];return forEach$1(n.fields,(t,Te)=>{const Ee=new FieldPath$1([t]);if(__PRIVATE_isMapValue(Te)){const Re=__PRIVATE_extractFieldMask(Te.mapValue).fields;if(Re.length===0)e.push(Ee);else for(const Ce of Re)e.push(Ee.child(Ce))}else e.push(Ee)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,t,Te,Ee,Re,Ce,De){this.key=e,this.documentType=t,this.version=Te,this.readTime=Ee,this.createTime=Re,this.data=Ce,this.documentState=De}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),0)}static newFoundDocument(e,t,Te,Ee){return new MutableDocument(e,1,t,SnapshotVersion.min(),Te,Ee,0)}static newNoDocument(e,t){return new MutableDocument(e,2,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),0)}static newUnknownDocument(e,t){return new MutableDocument(e,3,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue$1.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue$1.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,t){this.position=e,this.inclusive=t}}function __PRIVATE_boundCompareToDocument(n,e,t){let Te=0;for(let Ee=0;Ee<n.position.length;Ee++){const Re=e[Ee],Ce=n.position[Ee];if(Re.field.isKeyField()?Te=DocumentKey.comparator(DocumentKey.fromName(Ce.referenceValue),t.key):Te=__PRIVATE_valueCompare(Ce,t.data.field(Re.field)),Re.dir==="desc"&&(Te*=-1),Te!==0)break}return Te}function __PRIVATE_boundEquals(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!__PRIVATE_valueEquals(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,t="asc"){this.field=e,this.dir=t}}function __PRIVATE_orderByEquals(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,t,Te){super(),this.field=e,this.op=t,this.value=Te}static create(e,t,Te){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,Te):new __PRIVATE_KeyFieldFilter(e,t,Te):t==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,Te):t==="in"?new __PRIVATE_InFilter(e,Te):t==="not-in"?new __PRIVATE_NotInFilter(e,Te):t==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,Te):new FieldFilter(e,t,Te)}static createKeyFieldInFilter(e,t,Te){return t==="in"?new __PRIVATE_KeyFieldInFilter(e,Te):new __PRIVATE_KeyFieldNotInFilter(e,Te)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value)):t!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(t)&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new CompositeFilter(e,t)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(n){return n.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(n){return __PRIVATE_compositeFilterIsFlat(n)&&__PRIVATE_compositeFilterIsConjunction(n)}function __PRIVATE_compositeFilterIsFlat(n){for(const e of n.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(n){if(n instanceof FieldFilter)return n.field.canonicalString()+n.op.toString()+canonicalId(n.value);if(__PRIVATE_compositeFilterIsFlatConjunction(n))return n.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=n.filters.map(t=>__PRIVATE_canonifyFilter(t)).join(",");return`${n.op}(${e})`}}function __PRIVATE_filterEquals(n,e){return n instanceof FieldFilter?function(Te,Ee){return Ee instanceof FieldFilter&&Te.op===Ee.op&&Te.field.isEqual(Ee.field)&&__PRIVATE_valueEquals(Te.value,Ee.value)}(n,e):n instanceof CompositeFilter?function(Te,Ee){return Ee instanceof CompositeFilter&&Te.op===Ee.op&&Te.filters.length===Ee.filters.length?Te.filters.reduce((Re,Ce,De)=>Re&&__PRIVATE_filterEquals(Ce,Ee.filters[De]),!0):!1}(n,e):void fail(19439)}function __PRIVATE_stringifyFilter(n){return n instanceof FieldFilter?function(t){return`${t.field.canonicalString()} ${t.op} ${canonicalId(t.value)}`}(n):n instanceof CompositeFilter?function(t){return t.op.toString()+" {"+t.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(n):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,t,Te){super(e,t,Te),this.key=DocumentKey.fromName(Te.referenceValue)}matches(e){const t=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(t)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,t){super(e,"in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(Te=>DocumentKey.fromName(Te.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return isArray$1(t)&&__PRIVATE_arrayValueContains(t.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!isArray$1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(Te=>__PRIVATE_arrayValueContains(this.value.arrayValue,Te))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,t=null,Te=[],Ee=[],Re=null,Ce=null,De=null){this.path=e,this.collectionGroup=t,this.orderBy=Te,this.filters=Ee,this.limit=Re,this.startAt=Ce,this.endAt=De,this.Pe=null}}function __PRIVATE_newTarget(n,e=null,t=[],Te=[],Ee=null,Re=null,Ce=null){return new __PRIVATE_TargetImpl(n,e,t,Te,Ee,Re,Ce)}function __PRIVATE_canonifyTarget(n){const e=__PRIVATE_debugCast(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(Te=>__PRIVATE_canonifyFilter(Te)).join(","),t+="|ob:",t+=e.orderBy.map(Te=>function(Re){return Re.field.canonicalString()+Re.dir}(Te)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(Te=>canonicalId(Te)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(Te=>canonicalId(Te)).join(",")),e.Pe=t}return e.Pe}function __PRIVATE_targetEquals(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!__PRIVATE_orderByEquals(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!__PRIVATE_filterEquals(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(n.startAt,e.startAt)&&__PRIVATE_boundEquals(n.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(n){return DocumentKey.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,t=null,Te=[],Ee=[],Re=null,Ce="F",De=null,$e=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=Te,this.filters=Ee,this.limit=Re,this.limitType=Ce,this.startAt=De,this.endAt=$e,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(n,e,t,Te,Ee,Re,Ce,De){return new __PRIVATE_QueryImpl(n,e,t,Te,Ee,Re,Ce,De)}function __PRIVATE_newQueryForPath(n){return new __PRIVATE_QueryImpl(n)}function __PRIVATE_queryMatchesAllDocuments(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(n){return n.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(n){const e=__PRIVATE_debugCast(n);if(e.Te===null){e.Te=[];const t=new Set;for(const Re of e.explicitOrderBy)e.Te.push(Re),t.add(Re.field.canonicalString());const Te=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(Ce){let De=new SortedSet(FieldPath$1.comparator);return Ce.filters.forEach($e=>{$e.getFlattenedFilters().forEach(Ve=>{Ve.isInequality()&&(De=De.add(Ve.field))})}),De})(e).forEach(Re=>{t.has(Re.canonicalString())||Re.isKeyField()||e.Te.push(new OrderBy(Re,Te))}),t.has(FieldPath$1.keyField().canonicalString())||e.Te.push(new OrderBy(FieldPath$1.keyField(),Te))}return e.Te}function __PRIVATE_queryToTarget(n){const e=__PRIVATE_debugCast(n);return e.Ie||(e.Ie=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(n))),e.Ie}function __PRIVATE__queryToTarget(n,e){if(n.limitType==="F")return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(Ee=>{const Re=Ee.dir==="desc"?"asc":"desc";return new OrderBy(Ee.field,Re)});const t=n.endAt?new Bound(n.endAt.position,n.endAt.inclusive):null,Te=n.startAt?new Bound(n.startAt.position,n.startAt.inclusive):null;return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,t,Te)}}function __PRIVATE_queryWithAddedFilter(n,e){const t=n.filters.concat([e]);return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function __PRIVATE_queryWithLimit(n,e,t){return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function __PRIVATE_queryEquals(n,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(n),__PRIVATE_queryToTarget(e))&&n.limitType===e.limitType}function __PRIVATE_canonifyQuery(n){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(n))}|lt:${n.limitType}`}function __PRIVATE_stringifyQuery(n){return`Query(target=${function(t){let Te=t.path.canonicalString();return t.collectionGroup!==null&&(Te+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(Te+=`, filters: [${t.filters.map(Ee=>__PRIVATE_stringifyFilter(Ee)).join(", ")}]`),__PRIVATE_isNullOrUndefined(t.limit)||(Te+=", limit: "+t.limit),t.orderBy.length>0&&(Te+=`, orderBy: [${t.orderBy.map(Ee=>function(Ce){return`${Ce.field.canonicalString()} (${Ce.dir})`}(Ee)).join(", ")}]`),t.startAt&&(Te+=", startAt: ",Te+=t.startAt.inclusive?"b:":"a:",Te+=t.startAt.position.map(Ee=>canonicalId(Ee)).join(",")),t.endAt&&(Te+=", endAt: ",Te+=t.endAt.inclusive?"a:":"b:",Te+=t.endAt.position.map(Ee=>canonicalId(Ee)).join(",")),`Target(${Te})`}(__PRIVATE_queryToTarget(n))}; limitType=${n.limitType})`}function __PRIVATE_queryMatches(n,e){return e.isFoundDocument()&&function(Te,Ee){const Re=Ee.key.path;return Te.collectionGroup!==null?Ee.key.hasCollectionId(Te.collectionGroup)&&Te.path.isPrefixOf(Re):DocumentKey.isDocumentKey(Te.path)?Te.path.isEqual(Re):Te.path.isImmediateParentOf(Re)}(n,e)&&function(Te,Ee){for(const Re of __PRIVATE_queryNormalizedOrderBy(Te))if(!Re.field.isKeyField()&&Ee.data.field(Re.field)===null)return!1;return!0}(n,e)&&function(Te,Ee){for(const Re of Te.filters)if(!Re.matches(Ee))return!1;return!0}(n,e)&&function(Te,Ee){return!(Te.startAt&&!function(Ce,De,$e){const Ve=__PRIVATE_boundCompareToDocument(Ce,De,$e);return Ce.inclusive?Ve<=0:Ve<0}(Te.startAt,__PRIVATE_queryNormalizedOrderBy(Te),Ee)||Te.endAt&&!function(Ce,De,$e){const Ve=__PRIVATE_boundCompareToDocument(Ce,De,$e);return Ce.inclusive?Ve>=0:Ve>0}(Te.endAt,__PRIVATE_queryNormalizedOrderBy(Te),Ee))}(n,e)}function __PRIVATE_queryCollectionGroup(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function __PRIVATE_newQueryComparator(n){return(e,t)=>{let Te=!1;for(const Ee of __PRIVATE_queryNormalizedOrderBy(n)){const Re=__PRIVATE_compareDocs(Ee,e,t);if(Re!==0)return Re;Te=Te||Ee.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(n,e,t){const Te=n.field.isKeyField()?DocumentKey.comparator(e.key,t.key):function(Re,Ce,De){const $e=Ce.data.field(Re),Ve=De.data.field(Re);return $e!==null&&Ve!==null?__PRIVATE_valueCompare($e,Ve):fail(42886)}(n.field,e,t);switch(n.dir){case"asc":return Te;case"desc":return-1*Te;default:return fail(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),Te=this.inner[t];if(Te!==void 0){for(const[Ee,Re]of Te)if(this.equalsFn(Ee,e))return Re}}has(e){return this.get(e)!==void 0}set(e,t){const Te=this.mapKeyFn(e),Ee=this.inner[Te];if(Ee===void 0)return this.inner[Te]=[[e,t]],void this.innerSize++;for(let Re=0;Re<Ee.length;Re++)if(this.equalsFn(Ee[Re][0],e))return void(Ee[Re]=[e,t]);Ee.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),Te=this.inner[t];if(Te===void 0)return!1;for(let Ee=0;Ee<Te.length;Ee++)if(this.equalsFn(Te[Ee][0],e))return Te.length===1?delete this.inner[t]:Te.splice(Ee,1),this.innerSize--,!0;return!1}forEach(e){forEach$1(this.inner,(t,Te)=>{for(const[Ee,Re]of Te)e(Ee,Re)})}isEmpty(){return isEmpty$1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et$2=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Et$2}const At$2=new SortedMap(DocumentKey.comparator);function documentMap(...n){let e=At$2;for(const t of n)e=e.insert(t.key,t);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(n){let e=At$2;return n.forEach((t,Te)=>e=e.insert(t,Te.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(n=>n.toString(),(n,e)=>n.isEqual(e))}const Rt$1=new SortedMap(DocumentKey.comparator),Vt$2=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...n){let e=Vt$2;for(const t of n)e=e.add(t);return e}const mt$2=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt$2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(n){return{integerValue:""+n}}function toNumber(n,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(n,e,t){return n instanceof __PRIVATE_ServerTimestampTransform?function(Ee,Re){const Ce={fields:{[ot$1]:{stringValue:st$2},[at$2]:{timestampValue:{seconds:Ee.seconds,nanos:Ee.nanoseconds}}}};return Re&&__PRIVATE_isServerTimestamp(Re)&&(Re=__PRIVATE_getPreviousValue(Re)),Re&&(Ce.fields[_t$2]=Re),{mapValue:Ce}}(t,e):n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):function(Ee,Re){const Ce=__PRIVATE_computeTransformOperationBaseValue(Ee,Re),De=asNumber$1(Ce)+asNumber$1(Ee.Ee);return isInteger$1(Ce)&&isInteger$1(Ee.Ee)?__PRIVATE_toInteger(De):__PRIVATE_toDouble(Ee.serializer,De)}(n,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(n,e,t){return n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):t}function __PRIVATE_computeTransformOperationBaseValue(n,e){return n instanceof __PRIVATE_NumericIncrementTransformOperation?function(Te){return isInteger$1(Te)||function(Re){return!!Re&&"doubleValue"in Re}(Te)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(n,e){const t=__PRIVATE_coercedFieldValuesArray(e);for(const Te of n.elements)t.some(Ee=>__PRIVATE_valueEquals(Ee,Te))||t.push(Te);return{arrayValue:{values:t}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(n,e){let t=__PRIVATE_coercedFieldValuesArray(e);for(const Te of n.elements)t=t.filter(Ee=>!__PRIVATE_valueEquals(Ee,Te));return{arrayValue:{values:t}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function asNumber$1(n){return __PRIVATE_normalizeNumber(n.integerValue||n.doubleValue)}function __PRIVATE_coercedFieldValuesArray(n){return isArray$1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,t){this.field=e,this.transform=t}}function __PRIVATE_fieldTransformEquals(n,e){return n.field.isEqual(e.field)&&function(Te,Ee){return Te instanceof __PRIVATE_ArrayUnionTransformOperation&&Ee instanceof __PRIVATE_ArrayUnionTransformOperation||Te instanceof __PRIVATE_ArrayRemoveTransformOperation&&Ee instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(Te.elements,Ee.elements,__PRIVATE_valueEquals):Te instanceof __PRIVATE_NumericIncrementTransformOperation&&Ee instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(Te.Ee,Ee.Ee):Te instanceof __PRIVATE_ServerTimestampTransform&&Ee instanceof __PRIVATE_ServerTimestampTransform}(n.transform,e.transform)}class MutationResult{constructor(e,t){this.version=e,this.transformResults=t}}class Precondition{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new __PRIVATE_DeleteMutation(n.key,Precondition.none()):new __PRIVATE_SetMutation(n.key,n.data,Precondition.none());{const t=n.data,Te=ObjectValue$1.empty();let Ee=new SortedSet(FieldPath$1.comparator);for(let Re of e.fields)if(!Ee.has(Re)){let Ce=t.field(Re);Ce===null&&Re.length>1&&(Re=Re.popLast(),Ce=t.field(Re)),Ce===null?Te.delete(Re):Te.set(Re,Ce),Ee=Ee.add(Re)}return new __PRIVATE_PatchMutation(n.key,Te,new FieldMask(Ee.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(n,e,t){n instanceof __PRIVATE_SetMutation?function(Ee,Re,Ce){const De=Ee.value.clone(),$e=__PRIVATE_serverTransformResults(Ee.fieldTransforms,Re,Ce.transformResults);De.setAll($e),Re.convertToFoundDocument(Ce.version,De).setHasCommittedMutations()}(n,e,t):n instanceof __PRIVATE_PatchMutation?function(Ee,Re,Ce){if(!__PRIVATE_preconditionIsValidForDocument(Ee.precondition,Re))return void Re.convertToUnknownDocument(Ce.version);const De=__PRIVATE_serverTransformResults(Ee.fieldTransforms,Re,Ce.transformResults),$e=Re.data;$e.setAll(__PRIVATE_getPatch(Ee)),$e.setAll(De),Re.convertToFoundDocument(Ce.version,$e).setHasCommittedMutations()}(n,e,t):function(Ee,Re,Ce){Re.convertToNoDocument(Ce.version).setHasCommittedMutations()}(0,e,t)}function __PRIVATE_mutationApplyToLocalView(n,e,t,Te){return n instanceof __PRIVATE_SetMutation?function(Re,Ce,De,$e){if(!__PRIVATE_preconditionIsValidForDocument(Re.precondition,Ce))return De;const Ve=Re.value.clone(),Be=__PRIVATE_localTransformResults(Re.fieldTransforms,$e,Ce);return Ve.setAll(Be),Ce.convertToFoundDocument(Ce.version,Ve).setHasLocalMutations(),null}(n,e,t,Te):n instanceof __PRIVATE_PatchMutation?function(Re,Ce,De,$e){if(!__PRIVATE_preconditionIsValidForDocument(Re.precondition,Ce))return De;const Ve=__PRIVATE_localTransformResults(Re.fieldTransforms,$e,Ce),Be=Ce.data;return Be.setAll(__PRIVATE_getPatch(Re)),Be.setAll(Ve),Ce.convertToFoundDocument(Ce.version,Be).setHasLocalMutations(),De===null?null:De.unionWith(Re.fieldMask.fields).unionWith(Re.fieldTransforms.map(Me=>Me.field))}(n,e,t,Te):function(Re,Ce,De){return __PRIVATE_preconditionIsValidForDocument(Re.precondition,Ce)?(Ce.convertToNoDocument(Ce.version).setHasLocalMutations(),null):De}(n,e,t)}function __PRIVATE_mutationExtractBaseValue(n,e){let t=null;for(const Te of n.fieldTransforms){const Ee=e.data.field(Te.field),Re=__PRIVATE_computeTransformOperationBaseValue(Te.transform,Ee||null);Re!=null&&(t===null&&(t=ObjectValue$1.empty()),t.set(Te.field,Re))}return t||null}function __PRIVATE_mutationEquals(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(Te,Ee){return Te===void 0&&Ee===void 0||!(!Te||!Ee)&&__PRIVATE_arrayEquals(Te,Ee,(Re,Ce)=>__PRIVATE_fieldTransformEquals(Re,Ce))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,t,Te,Ee=[]){super(),this.key=e,this.value=t,this.precondition=Te,this.fieldTransforms=Ee,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,t,Te,Ee,Re=[]){super(),this.key=e,this.data=t,this.fieldMask=Te,this.precondition=Ee,this.fieldTransforms=Re,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const Te=n.data.field(t);e.set(t,Te)}}),e}function __PRIVATE_serverTransformResults(n,e,t){const Te=new Map;__PRIVATE_hardAssert(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let Ee=0;Ee<t.length;Ee++){const Re=n[Ee],Ce=Re.transform,De=e.data.field(Re.field);Te.set(Re.field,__PRIVATE_applyTransformOperationToRemoteDocument(Ce,De,t[Ee]))}return Te}function __PRIVATE_localTransformResults(n,e,t){const Te=new Map;for(const Ee of n){const Re=Ee.transform,Ce=t.data.field(Ee.field);Te.set(Ee.field,__PRIVATE_applyTransformOperationToLocalView(Re,Ce,e))}return Te}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,t,Te,Ee){this.batchId=e,this.localWriteTime=t,this.baseMutations=Te,this.mutations=Ee}applyToRemoteDocument(e,t){const Te=t.mutationResults;for(let Ee=0;Ee<this.mutations.length;Ee++){const Re=this.mutations[Ee];Re.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(Re,e,Te[Ee])}}applyToLocalView(e,t){for(const Te of this.baseMutations)Te.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(Te,e,t,this.localWriteTime));for(const Te of this.mutations)Te.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(Te,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const Te=__PRIVATE_newMutationMap();return this.mutations.forEach(Ee=>{const Re=e.get(Ee.key),Ce=Re.overlayedDocument;let De=this.applyToLocalView(Ce,Re.mutatedFields);De=t.has(Ee.key)?null:De;const $e=__PRIVATE_calculateOverlayMutation(Ce,De);$e!==null&&Te.set(Ee.key,$e),Ce.isValidDocument()||Ce.convertToNoDocument(SnapshotVersion.min())}),Te}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(t,Te)=>__PRIVATE_mutationEquals(t,Te))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(t,Te)=>__PRIVATE_mutationEquals(t,Te))}}class MutationBatchResult{constructor(e,t,Te,Ee){this.batch=e,this.commitVersion=t,this.mutationResults=Te,this.docVersions=Ee}static from(e,t,Te){__PRIVATE_hardAssert(e.mutations.length===Te.length,58842,{Ve:e.mutations.length,me:Te.length});let Ee=function(){return Rt$1}();const Re=e.mutations;for(let Ce=0;Ce<Re.length;Ce++)Ee=Ee.insert(Re[Ce].key,Te[Ce].version);return new MutationBatchResult(e,t,Te,Ee)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft$1,gt$2;function __PRIVATE_isPermanentError(n){switch(n){case N$2.OK:return fail(64938);case N$2.CANCELLED:case N$2.UNKNOWN:case N$2.DEADLINE_EXCEEDED:case N$2.RESOURCE_EXHAUSTED:case N$2.INTERNAL:case N$2.UNAVAILABLE:case N$2.UNAUTHENTICATED:return!1;case N$2.INVALID_ARGUMENT:case N$2.NOT_FOUND:case N$2.ALREADY_EXISTS:case N$2.PERMISSION_DENIED:case N$2.FAILED_PRECONDITION:case N$2.ABORTED:case N$2.OUT_OF_RANGE:case N$2.UNIMPLEMENTED:case N$2.DATA_LOSS:return!0;default:return fail(15467,{code:n})}}function __PRIVATE_mapCodeFromRpcCode(n){if(n===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$2.UNKNOWN;switch(n){case ft$1.OK:return N$2.OK;case ft$1.CANCELLED:return N$2.CANCELLED;case ft$1.UNKNOWN:return N$2.UNKNOWN;case ft$1.DEADLINE_EXCEEDED:return N$2.DEADLINE_EXCEEDED;case ft$1.RESOURCE_EXHAUSTED:return N$2.RESOURCE_EXHAUSTED;case ft$1.INTERNAL:return N$2.INTERNAL;case ft$1.UNAVAILABLE:return N$2.UNAVAILABLE;case ft$1.UNAUTHENTICATED:return N$2.UNAUTHENTICATED;case ft$1.INVALID_ARGUMENT:return N$2.INVALID_ARGUMENT;case ft$1.NOT_FOUND:return N$2.NOT_FOUND;case ft$1.ALREADY_EXISTS:return N$2.ALREADY_EXISTS;case ft$1.PERMISSION_DENIED:return N$2.PERMISSION_DENIED;case ft$1.FAILED_PRECONDITION:return N$2.FAILED_PRECONDITION;case ft$1.ABORTED:return N$2.ABORTED;case ft$1.OUT_OF_RANGE:return N$2.OUT_OF_RANGE;case ft$1.UNIMPLEMENTED:return N$2.UNIMPLEMENTED;case ft$1.DATA_LOSS:return N$2.DATA_LOSS;default:return fail(39323,{code:n})}}(gt$2=ft$1||(ft$1={}))[gt$2.OK=0]="OK",gt$2[gt$2.CANCELLED=1]="CANCELLED",gt$2[gt$2.UNKNOWN=2]="UNKNOWN",gt$2[gt$2.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt$2[gt$2.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt$2[gt$2.NOT_FOUND=5]="NOT_FOUND",gt$2[gt$2.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt$2[gt$2.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt$2[gt$2.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt$2[gt$2.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt$2[gt$2.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt$2[gt$2.ABORTED=10]="ABORTED",gt$2[gt$2.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt$2[gt$2.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt$2[gt$2.INTERNAL=13]="INTERNAL",gt$2[gt$2.UNAVAILABLE=14]="UNAVAILABLE",gt$2[gt$2.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt$2=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(n){const e=__PRIVATE_newTextEncoder().encode(n),t=new Md5;return t.update(e),new Uint8Array(t.digest())}function __PRIVATE_get64BitUints(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),Te=e.getUint32(4,!0),Ee=e.getUint32(8,!0),Re=e.getUint32(12,!0);return[new Integer([t,Te],0),new Integer([Ee,Re],0)]}class BloomFilter{constructor(e,t,Te){if(this.bitmap=e,this.padding=t,this.hashCount=Te,t<0||t>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${t}`);if(Te<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${Te}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${Te}`);if(e.length===0&&t!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Integer.fromNumber(this.fe)}pe(e,t,Te){let Ee=e.add(t.multiply(Integer.fromNumber(Te)));return Ee.compare(yt$2)===1&&(Ee=new Integer([Ee.getBits(0),Ee.getBits(1)],0)),Ee.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=__PRIVATE_getMd5HashValue(e),[Te,Ee]=__PRIVATE_get64BitUints(t);for(let Re=0;Re<this.hashCount;Re++){const Ce=this.pe(Te,Ee,Re);if(!this.ye(Ce))return!1}return!0}static create(e,t,Te){const Ee=e%8==0?0:8-e%8,Re=new Uint8Array(Math.ceil(e/8)),Ce=new BloomFilter(Re,Ee,t);return Te.forEach(De=>Ce.insert(De)),Ce}insert(e){if(this.fe===0)return;const t=__PRIVATE_getMd5HashValue(e),[Te,Ee]=__PRIVATE_get64BitUints(t);for(let Re=0;Re<this.hashCount;Re++){const Ce=this.pe(Te,Ee,Re);this.we(Ce)}}we(e){const t=Math.floor(e/8),Te=e%8;this.bitmap[t]|=1<<Te}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,t,Te,Ee,Re){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=Te,this.documentUpdates=Ee,this.resolvedLimboDocuments=Re}static createSynthesizedRemoteEventForCurrentChange(e,t,Te){const Ee=new Map;return Ee.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,t,Te)),new RemoteEvent(SnapshotVersion.min(),Ee,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,t,Te,Ee,Re){this.resumeToken=e,this.current=t,this.addedDocuments=Te,this.modifiedDocuments=Ee,this.removedDocuments=Re}static createSynthesizedTargetChangeForCurrentChange(e,t,Te){return new TargetChange(Te,t,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,t,Te,Ee){this.Se=e,this.removedTargetIds=t,this.key=Te,this.be=Ee}}class __PRIVATE_ExistenceFilterChange{constructor(e,t){this.targetId=e,this.De=t}}class __PRIVATE_WatchTargetChange{constructor(e,t,Te=ByteString.EMPTY_BYTE_STRING,Ee=null){this.state=e,this.targetIds=t,this.resumeToken=Te,this.cause=Ee}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Ce=__PRIVATE_snapshotChangesMap(),this.Fe=ByteString.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=__PRIVATE_documentKeySet(),t=__PRIVATE_documentKeySet(),Te=__PRIVATE_documentKeySet();return this.Ce.forEach((Ee,Re)=>{switch(Re){case 0:e=e.add(Ee);break;case 2:t=t.add(Ee);break;case 1:Te=Te.add(Ee);break;default:fail(38017,{changeType:Re})}}),new TargetChange(this.Fe,this.Me,e,t,Te)}ke(){this.xe=!1,this.Ce=__PRIVATE_snapshotChangesMap()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.We=e,this.Ge=new Map,this.ze=__PRIVATE_mutableDocumentMap(),this.je=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=new SortedMap(__PRIVATE_primitiveComparator)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const Te=this.tt(t);switch(e.state){case 0:this.nt(t)&&Te.Be(e.resumeToken);break;case 1:Te.Ue(),Te.Oe||Te.ke(),Te.Be(e.resumeToken);break;case 2:Te.Ue(),Te.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(Te.Ke(),Te.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),Te.Be(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((Te,Ee)=>{this.nt(Ee)&&t(Ee)})}it(e){const t=e.targetId,Te=e.De.count,Ee=this.st(t);if(Ee){const Re=Ee.target;if(__PRIVATE_targetIsDocumentTarget(Re))if(Te===0){const Ce=new DocumentKey(Re.path);this.Xe(t,Ce,MutableDocument.newNoDocument(Ce,SnapshotVersion.min()))}else __PRIVATE_hardAssert(Te===1,20013,{expectedCount:Te});else{const Ce=this.ot(t);if(Ce!==Te){const De=this._t(e),$e=De?this.ut(De,e,Ce):1;if($e!==0){this.rt(t);const Ve=$e===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,Ve)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:Te="",padding:Ee=0},hashCount:Re=0}=t;let Ce,De;try{Ce=__PRIVATE_normalizeByteString(Te).toUint8Array()}catch($e){if($e instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+$e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw $e}try{De=new BloomFilter(Ce,Ee,Re)}catch($e){return __PRIVATE_logWarn($e instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",$e),null}return De.fe===0?null:De}ut(e,t,Te){return t.De.count===Te-this.ht(e,t.targetId)?0:2}ht(e,t){const Te=this.We.getRemoteKeysForTarget(t);let Ee=0;return Te.forEach(Re=>{const Ce=this.We.lt(),De=`projects/${Ce.projectId}/databases/${Ce.database}/documents/${Re.path.canonicalString()}`;e.mightContain(De)||(this.Xe(t,Re,null),Ee++)}),Ee}Pt(e){const t=new Map;this.Ge.forEach((Re,Ce)=>{const De=this.st(Ce);if(De){if(Re.current&&__PRIVATE_targetIsDocumentTarget(De.target)){const $e=new DocumentKey(De.target.path);this.Tt($e).has(Ce)||this.It(Ce,$e)||this.Xe(Ce,$e,MutableDocument.newNoDocument($e,e))}Re.Ne&&(t.set(Ce,Re.Le()),Re.ke())}});let Te=__PRIVATE_documentKeySet();this.Je.forEach((Re,Ce)=>{let De=!0;Ce.forEachWhile($e=>{const Ve=this.st($e);return!Ve||Ve.purpose==="TargetPurposeLimboResolution"||(De=!1,!1)}),De&&(Te=Te.add(Re))}),this.ze.forEach((Re,Ce)=>Ce.setReadTime(e));const Ee=new RemoteEvent(e,t,this.He,this.ze,Te);return this.ze=__PRIVATE_mutableDocumentMap(),this.je=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=new SortedMap(__PRIVATE_primitiveComparator),Ee}Ze(e,t){if(!this.nt(e))return;const Te=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,Te),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,Te){if(!this.nt(e))return;const Ee=this.tt(e);this.It(e,t)?Ee.qe(t,1):Ee.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),Te&&(this.ze=this.ze.insert(t,Te))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new __PRIVATE_TargetState,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new __PRIVATE_TargetState),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const wt$2={asc:"ASCENDING",desc:"DESCENDING"},St={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bt$2={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function __PRIVATE_toInt32Proto(n,e){return n.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(n,e){return toTimestamp(n,e.toTimestamp())}function __PRIVATE_fromVersion(n){return __PRIVATE_hardAssert(!!n,49232),SnapshotVersion.fromTimestamp(function(t){const Te=__PRIVATE_normalizeTimestamp(t);return new Timestamp(Te.seconds,Te.nanos)}(n))}function __PRIVATE_toResourceName(n,e){return __PRIVATE_toResourcePath(n,e).canonicalString()}function __PRIVATE_toResourcePath(n,e){const t=function(Ee){return new ResourcePath(["projects",Ee.projectId,"databases",Ee.database])}(n).child("documents");return e===void 0?t:t.child(e)}function __PRIVATE_fromResourceName(n){const e=ResourcePath.fromString(n);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(n,e){return __PRIVATE_toResourceName(n.databaseId,e.path)}function fromName(n,e){const t=__PRIVATE_fromResourceName(e);if(t.get(1)!==n.databaseId.projectId)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(t))}function __PRIVATE_toQueryPath(n,e){return __PRIVATE_toResourceName(n.databaseId,e)}function __PRIVATE_fromQueryPath(n){const e=__PRIVATE_fromResourceName(n);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(n){return new ResourcePath(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(n){return __PRIVATE_hardAssert(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function __PRIVATE_toMutationDocument(n,e,t){return{name:__PRIVATE_toName(n,e),fields:t.value.mapValue.fields}}function __PRIVATE_fromWatchChange(n,e){let t;if("targetChange"in e){e.targetChange;const Te=function(Ve){return Ve==="NO_CHANGE"?0:Ve==="ADD"?1:Ve==="REMOVE"?2:Ve==="CURRENT"?3:Ve==="RESET"?4:fail(39313,{state:Ve})}(e.targetChange.targetChangeType||"NO_CHANGE"),Ee=e.targetChange.targetIds||[],Re=function(Ve,Be){return Ve.useProto3Json?(__PRIVATE_hardAssert(Be===void 0||typeof Be=="string",58123),ByteString.fromBase64String(Be||"")):(__PRIVATE_hardAssert(Be===void 0||Be instanceof Buffer||Be instanceof Uint8Array,16193),ByteString.fromUint8Array(Be||new Uint8Array))}(n,e.targetChange.resumeToken),Ce=e.targetChange.cause,De=Ce&&function(Ve){const Be=Ve.code===void 0?N$2.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(Ve.code);return new FirestoreError(Be,Ve.message||"")}(Ce);t=new __PRIVATE_WatchTargetChange(Te,Ee,Re,De||null)}else if("documentChange"in e){e.documentChange;const Te=e.documentChange;Te.document,Te.document.name,Te.document.updateTime;const Ee=fromName(n,Te.document.name),Re=__PRIVATE_fromVersion(Te.document.updateTime),Ce=Te.document.createTime?__PRIVATE_fromVersion(Te.document.createTime):SnapshotVersion.min(),De=new ObjectValue$1({mapValue:{fields:Te.document.fields}}),$e=MutableDocument.newFoundDocument(Ee,Re,Ce,De),Ve=Te.targetIds||[],Be=Te.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange(Ve,Be,$e.key,$e)}else if("documentDelete"in e){e.documentDelete;const Te=e.documentDelete;Te.document;const Ee=fromName(n,Te.document),Re=Te.readTime?__PRIVATE_fromVersion(Te.readTime):SnapshotVersion.min(),Ce=MutableDocument.newNoDocument(Ee,Re),De=Te.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],De,Ce.key,Ce)}else if("documentRemove"in e){e.documentRemove;const Te=e.documentRemove;Te.document;const Ee=fromName(n,Te.document),Re=Te.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],Re,Ee,null)}else{if(!("filter"in e))return fail(11601,{At:e});{e.filter;const Te=e.filter;Te.targetId;const{count:Ee=0,unchangedNames:Re}=Te,Ce=new ExistenceFilter(Ee,Re),De=Te.targetId;t=new __PRIVATE_ExistenceFilterChange(De,Ce)}}return t}function toMutation(n,e){let t;if(e instanceof __PRIVATE_SetMutation)t={update:__PRIVATE_toMutationDocument(n,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)t={delete:__PRIVATE_toName(n,e.key)};else if(e instanceof __PRIVATE_PatchMutation)t={update:__PRIVATE_toMutationDocument(n,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Rt:e.type});t={verify:__PRIVATE_toName(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(Te=>function(Re,Ce){const De=Ce.transform;if(De instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:Ce.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(De instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:Ce.field.canonicalString(),appendMissingElements:{values:De.elements}};if(De instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:Ce.field.canonicalString(),removeAllFromArray:{values:De.elements}};if(De instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:Ce.field.canonicalString(),increment:De.Ee};throw fail(20930,{transform:Ce.transform})}(0,Te))),e.precondition.isNone||(t.currentDocument=function(Ee,Re){return Re.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(Ee,Re.updateTime)}:Re.exists!==void 0?{exists:Re.exists}:fail(27497)}(n,e.precondition)),t}function __PRIVATE_fromWriteResults(n,e){return n&&n.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),n.map(t=>function(Ee,Re){let Ce=Ee.updateTime?__PRIVATE_fromVersion(Ee.updateTime):__PRIVATE_fromVersion(Re);return Ce.isEqual(SnapshotVersion.min())&&(Ce=__PRIVATE_fromVersion(Re)),new MutationResult(Ce,Ee.transformResults||[])}(t,e))):[]}function __PRIVATE_toDocumentsTarget(n,e){return{documents:[__PRIVATE_toQueryPath(n,e.path)]}}function __PRIVATE_toQueryTarget(n,e){const t={structuredQuery:{}},Te=e.path;let Ee;e.collectionGroup!==null?(Ee=Te,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(Ee=Te.popLast(),t.structuredQuery.from=[{collectionId:Te.lastSegment()}]),t.parent=__PRIVATE_toQueryPath(n,Ee);const Re=function(Ve){if(Ve.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(Ve,"and"))}(e.filters);Re&&(t.structuredQuery.where=Re);const Ce=function(Ve){if(Ve.length!==0)return Ve.map(Be=>function(Oe){return{field:__PRIVATE_toFieldPathReference(Oe.field),direction:__PRIVATE_toDirection(Oe.dir)}}(Be))}(e.orderBy);Ce&&(t.structuredQuery.orderBy=Ce);const De=__PRIVATE_toInt32Proto(n,e.limit);return De!==null&&(t.structuredQuery.limit=De),e.startAt&&(t.structuredQuery.startAt=function(Ve){return{before:Ve.inclusive,values:Ve.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(Ve){return{before:!Ve.inclusive,values:Ve.position}}(e.endAt)),{Vt:t,parent:Ee}}function __PRIVATE_convertQueryTargetToQuery(n){let e=__PRIVATE_fromQueryPath(n.parent);const t=n.structuredQuery,Te=t.from?t.from.length:0;let Ee=null;if(Te>0){__PRIVATE_hardAssert(Te===1,65062);const Be=t.from[0];Be.allDescendants?Ee=Be.collectionId:e=e.child(Be.collectionId)}let Re=[];t.where&&(Re=function(Me){const Oe=__PRIVATE_fromFilter(Me);return Oe instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(Oe)?Oe.getFilters():[Oe]}(t.where));let Ce=[];t.orderBy&&(Ce=function(Me){return Me.map(Oe=>function(ze){return new OrderBy(__PRIVATE_fromFieldPathReference(ze.field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ze.direction))}(Oe))}(t.orderBy));let De=null;t.limit&&(De=function(Me){let Oe;return Oe=typeof Me=="object"?Me.value:Me,__PRIVATE_isNullOrUndefined(Oe)?null:Oe}(t.limit));let $e=null;t.startAt&&($e=function(Me){const Oe=!!Me.before,Ue=Me.values||[];return new Bound(Ue,Oe)}(t.startAt));let Ve=null;return t.endAt&&(Ve=function(Me){const Oe=!Me.before,Ue=Me.values||[];return new Bound(Ue,Oe)}(t.endAt)),__PRIVATE_newQuery(e,Ee,Ce,Re,De,"F",$e,Ve)}function __PRIVATE_toListenRequestLabels(n,e){const t=function(Ee){switch(Ee){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:Ee})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function __PRIVATE_fromFilter(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const Te=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Te,"==",{doubleValue:NaN});case"IS_NULL":const Ee=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Ee,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const Re=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Re,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const Ce=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Ce,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(n):n.fieldFilter!==void 0?function(t){return FieldFilter.create(__PRIVATE_fromFieldPathReference(t.fieldFilter.field),function(Ee){switch(Ee){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return CompositeFilter.create(t.compositeFilter.filters.map(Te=>__PRIVATE_fromFilter(Te)),function(Ee){switch(Ee){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(t.compositeFilter.op))}(n):fail(30097,{filter:n})}function __PRIVATE_toDirection(n){return wt$2[n]}function __PRIVATE_toOperatorName(n){return St[n]}function __PRIVATE_toCompositeOperatorName(n){return bt$2[n]}function __PRIVATE_toFieldPathReference(n){return{fieldPath:n.canonicalString()}}function __PRIVATE_fromFieldPathReference(n){return FieldPath$1.fromServerFormat(n.fieldPath)}function __PRIVATE_toFilter(n){return n instanceof FieldFilter?function(t){if(t.op==="=="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:__PRIVATE_toOperatorName(t.op),value:t.value}}}(n):n instanceof CompositeFilter?function(t){const Te=t.getFilters().map(Ee=>__PRIVATE_toFilter(Ee));return Te.length===1?Te[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(t.op),filters:Te}}}(n):fail(54877,{filter:n})}function __PRIVATE_toDocumentMask(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,t,Te,Ee,Re=SnapshotVersion.min(),Ce=SnapshotVersion.min(),De=ByteString.EMPTY_BYTE_STRING,$e=null){this.target=e,this.targetId=t,this.purpose=Te,this.sequenceNumber=Ee,this.snapshotVersion=Re,this.lastLimboFreeSnapshotVersion=Ce,this.resumeToken=De,this.expectedCount=$e}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.gt=e}}function __PRIVATE_fromBundledQuery(n){const e=__PRIVATE_convertQueryTargetToQuery({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Dn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,t){return this.Dn.add(t),PersistencePromise.resolve()}getCollectionParents(e,t){return PersistencePromise.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return PersistencePromise.resolve()}deleteFieldIndex(e,t){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,t){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,t){return PersistencePromise.resolve(null)}getIndexType(e,t){return PersistencePromise.resolve(0)}getFieldIndexes(e,t){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,t){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,t){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,t,Te){return PersistencePromise.resolve()}updateIndexEntries(e,t){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const t=e.lastSegment(),Te=e.popLast(),Ee=this.index[t]||new SortedSet(ResourcePath.comparator),Re=!Ee.has(Te);return this.index[t]=Ee.add(Te),Re}has(e){const t=e.lastSegment(),Te=e.popLast(),Ee=this.index[t];return Ee&&Ee.has(Te)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt$2=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,Te){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=Te}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt$2,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new __PRIVATE_TargetIdGenerator(0)}static ur(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$2="LruGarbageCollector",Ot$2=1048576;function __PRIVATE_bufferEntryComparator([n,e],[t,Te]){const Ee=__PRIVATE_primitiveComparator(n,t);return Ee===0?__PRIVATE_primitiveComparator(e,Te):Ee}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Tr=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const Te=this.buffer.last();__PRIVATE_bufferEntryComparator(t,Te)<0&&(this.buffer=this.buffer.delete(Te).add(t))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,t,Te){this.garbageCollector=e,this.asyncQueue=t,this.localStore=Te,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){__PRIVATE_logDebug(xt$2,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){__PRIVATE_isIndexedDbTransactionError(t)?__PRIVATE_logDebug(xt$2,"Ignoring IndexedDB error during garbage collection: ",t):await __PRIVATE_ignoreIfPrimaryLeaseLoss(t)}await this.Rr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(Te=>Math.floor(t/100*Te))}nthSequenceNumber(e,t){if(t===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ue);const Te=new __PRIVATE_RollingSequenceNumberBuffer(t);return this.Vr.forEachTarget(e,Ee=>Te.Er(Ee.sequenceNumber)).next(()=>this.Vr.gr(e,Ee=>Te.Er(Ee))).next(()=>Te.maxValue)}removeTargets(e,t,Te){return this.Vr.removeTargets(e,t,Te)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft$1)):this.getCacheSize(e).next(Te=>Te<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${Te} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft$1):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let Te,Ee,Re,Ce,De,$e,Ve;const Be=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Me=>(Me>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Me}`),Ee=this.params.maximumSequenceNumbersToCollect):Ee=Me,Ce=Date.now(),this.nthSequenceNumber(e,Ee))).next(Me=>(Te=Me,De=Date.now(),this.removeTargets(e,Te,t))).next(Me=>(Re=Me,$e=Date.now(),this.removeOrphanedDocuments(e,Te))).next(Me=>(Ve=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${Ce-Be}ms
	Determined least recently used ${Ee} in `+(De-Ce)+`ms
	Removed ${Re} targets in `+($e-De)+`ms
	Removed ${Me} documents in `+(Ve-$e)+`ms
Total Duration: ${Ve-Be}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:Ee,targetsRemoved:Re,documentsRemoved:Me})))}}function __PRIVATE_newLruGarbageCollector(n,e){return new __PRIVATE_LruGarbageCollectorImpl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const Te=this.changes.get(t);return Te!==void 0?PersistencePromise.resolve(Te):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,t,Te,Ee){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=Te,this.indexManager=Ee}getDocument(e,t){let Te=null;return this.documentOverlayCache.getOverlay(e,t).next(Ee=>(Te=Ee,this.remoteDocumentCache.getEntry(e,t))).next(Ee=>(Te!==null&&__PRIVATE_mutationApplyToLocalView(Te.mutation,Ee,FieldMask.empty(),Timestamp.now()),Ee))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(Te=>this.getLocalViewOfDocuments(e,Te,__PRIVATE_documentKeySet()).next(()=>Te))}getLocalViewOfDocuments(e,t,Te=__PRIVATE_documentKeySet()){const Ee=__PRIVATE_newOverlayMap();return this.populateOverlays(e,Ee,t).next(()=>this.computeViews(e,t,Ee,Te).next(Re=>{let Ce=documentMap();return Re.forEach((De,$e)=>{Ce=Ce.insert(De,$e.overlayedDocument)}),Ce}))}getOverlayedDocuments(e,t){const Te=__PRIVATE_newOverlayMap();return this.populateOverlays(e,Te,t).next(()=>this.computeViews(e,t,Te,__PRIVATE_documentKeySet()))}populateOverlays(e,t,Te){const Ee=[];return Te.forEach(Re=>{t.has(Re)||Ee.push(Re)}),this.documentOverlayCache.getOverlays(e,Ee).next(Re=>{Re.forEach((Ce,De)=>{t.set(Ce,De)})})}computeViews(e,t,Te,Ee){let Re=__PRIVATE_mutableDocumentMap();const Ce=__PRIVATE_newDocumentKeyMap(),De=function(){return __PRIVATE_newDocumentKeyMap()}();return t.forEach(($e,Ve)=>{const Be=Te.get(Ve.key);Ee.has(Ve.key)&&(Be===void 0||Be.mutation instanceof __PRIVATE_PatchMutation)?Re=Re.insert(Ve.key,Ve):Be!==void 0?(Ce.set(Ve.key,Be.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(Be.mutation,Ve,Be.mutation.getFieldMask(),Timestamp.now())):Ce.set(Ve.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,Re).next($e=>($e.forEach((Ve,Be)=>Ce.set(Ve,Be)),t.forEach((Ve,Be)=>{var Me;return De.set(Ve,new OverlayedDocument(Be,(Me=Ce.get(Ve))!==null&&Me!==void 0?Me:null))}),De))}recalculateAndSaveOverlays(e,t){const Te=__PRIVATE_newDocumentKeyMap();let Ee=new SortedMap((Ce,De)=>Ce-De),Re=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(Ce=>{for(const De of Ce)De.keys().forEach($e=>{const Ve=t.get($e);if(Ve===null)return;let Be=Te.get($e)||FieldMask.empty();Be=De.applyToLocalView(Ve,Be),Te.set($e,Be);const Me=(Ee.get(De.batchId)||__PRIVATE_documentKeySet()).add($e);Ee=Ee.insert(De.batchId,Me)})}).next(()=>{const Ce=[],De=Ee.getReverseIterator();for(;De.hasNext();){const $e=De.getNext(),Ve=$e.key,Be=$e.value,Me=__PRIVATE_newMutationMap();Be.forEach(Oe=>{if(!Re.has(Oe)){const Ue=__PRIVATE_calculateOverlayMutation(t.get(Oe),Te.get(Oe));Ue!==null&&Me.set(Oe,Ue),Re=Re.add(Oe)}}),Ce.push(this.documentOverlayCache.saveOverlays(e,Ve,Me))}return PersistencePromise.waitFor(Ce)}).next(()=>Te)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(Te=>this.recalculateAndSaveOverlays(e,Te))}getDocumentsMatchingQuery(e,t,Te,Ee){return function(Ce){return DocumentKey.isDocumentKey(Ce.path)&&Ce.collectionGroup===null&&Ce.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):__PRIVATE_isCollectionGroupQuery(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,Te,Ee):this.getDocumentsMatchingCollectionQuery(e,t,Te,Ee)}getNextDocuments(e,t,Te,Ee){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,Te,Ee).next(Re=>{const Ce=Ee-Re.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,Te.largestBatchId,Ee-Re.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let De=Q$2,$e=Re;return Ce.next(Ve=>PersistencePromise.forEach(Ve,(Be,Me)=>(De<Me.largestBatchId&&(De=Me.largestBatchId),Re.get(Be)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,Be).next(Oe=>{$e=$e.insert(Be,Oe)}))).next(()=>this.populateOverlays(e,Ve,Re)).next(()=>this.computeViews(e,$e,Ve,__PRIVATE_documentKeySet())).next(Be=>({batchId:De,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Be)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new DocumentKey(t)).next(Te=>{let Ee=documentMap();return Te.isFoundDocument()&&(Ee=Ee.insert(Te.key,Te)),Ee})}getDocumentsMatchingCollectionGroupQuery(e,t,Te,Ee){const Re=t.collectionGroup;let Ce=documentMap();return this.indexManager.getCollectionParents(e,Re).next(De=>PersistencePromise.forEach(De,$e=>{const Ve=function(Me,Oe){return new __PRIVATE_QueryImpl(Oe,null,Me.explicitOrderBy.slice(),Me.filters.slice(),Me.limit,Me.limitType,Me.startAt,Me.endAt)}(t,$e.child(Re));return this.getDocumentsMatchingCollectionQuery(e,Ve,Te,Ee).next(Be=>{Be.forEach((Me,Oe)=>{Ce=Ce.insert(Me,Oe)})})}).next(()=>Ce))}getDocumentsMatchingCollectionQuery(e,t,Te,Ee){let Re;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,Te.largestBatchId).next(Ce=>(Re=Ce,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,Te,Re,Ee))).next(Ce=>{Re.forEach(($e,Ve)=>{const Be=Ve.getKey();Ce.get(Be)===null&&(Ce=Ce.insert(Be,MutableDocument.newInvalidDocument(Be)))});let De=documentMap();return Ce.forEach(($e,Ve)=>{const Be=Re.get($e);Be!==void 0&&__PRIVATE_mutationApplyToLocalView(Be.mutation,Ve,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(t,Ve)&&(De=De.insert($e,Ve))}),De})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return PersistencePromise.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(Ee){return{id:Ee.id,version:Ee.version,createTime:__PRIVATE_fromVersion(Ee.createTime)}}(t)),PersistencePromise.resolve()}getNamedQuery(e,t){return PersistencePromise.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(Ee){return{name:Ee.name,query:__PRIVATE_fromBundledQuery(Ee.bundledQuery),readTime:__PRIVATE_fromVersion(Ee.readTime)}}(t)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.kr=new Map}getOverlay(e,t){return PersistencePromise.resolve(this.overlays.get(t))}getOverlays(e,t){const Te=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(t,Ee=>this.getOverlay(e,Ee).next(Re=>{Re!==null&&Te.set(Ee,Re)})).next(()=>Te)}saveOverlays(e,t,Te){return Te.forEach((Ee,Re)=>{this.wt(e,t,Re)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,t,Te){const Ee=this.kr.get(Te);return Ee!==void 0&&(Ee.forEach(Re=>this.overlays=this.overlays.remove(Re)),this.kr.delete(Te)),PersistencePromise.resolve()}getOverlaysForCollection(e,t,Te){const Ee=__PRIVATE_newOverlayMap(),Re=t.length+1,Ce=new DocumentKey(t.child("")),De=this.overlays.getIteratorFrom(Ce);for(;De.hasNext();){const $e=De.getNext().value,Ve=$e.getKey();if(!t.isPrefixOf(Ve.path))break;Ve.path.length===Re&&$e.largestBatchId>Te&&Ee.set($e.getKey(),$e)}return PersistencePromise.resolve(Ee)}getOverlaysForCollectionGroup(e,t,Te,Ee){let Re=new SortedMap((Ve,Be)=>Ve-Be);const Ce=this.overlays.getIterator();for(;Ce.hasNext();){const Ve=Ce.getNext().value;if(Ve.getKey().getCollectionGroup()===t&&Ve.largestBatchId>Te){let Be=Re.get(Ve.largestBatchId);Be===null&&(Be=__PRIVATE_newOverlayMap(),Re=Re.insert(Ve.largestBatchId,Be)),Be.set(Ve.getKey(),Ve)}}const De=__PRIVATE_newOverlayMap(),$e=Re.getIterator();for(;$e.hasNext()&&($e.getNext().value.forEach((Ve,Be)=>De.set(Ve,Be)),!(De.size()>=Ee)););return PersistencePromise.resolve(De)}wt(e,t,Te){const Ee=this.overlays.get(Te.key);if(Ee!==null){const Ce=this.kr.get(Ee.largestBatchId).delete(Te.key);this.kr.set(Ee.largestBatchId,Ce)}this.overlays=this.overlays.insert(Te.key,new Overlay(t,Te));let Re=this.kr.get(t);Re===void 0&&(Re=__PRIVATE_documentKeySet(),this.kr.set(t,Re)),this.kr.set(t,Re.add(Te.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.qr=new SortedSet(__PRIVATE_DocReference.Qr),this.$r=new SortedSet(__PRIVATE_DocReference.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const Te=new __PRIVATE_DocReference(e,t);this.qr=this.qr.add(Te),this.$r=this.$r.add(Te)}Kr(e,t){e.forEach(Te=>this.addReference(Te,t))}removeReference(e,t){this.Wr(new __PRIVATE_DocReference(e,t))}Gr(e,t){e.forEach(Te=>this.removeReference(Te,t))}zr(e){const t=new DocumentKey(new ResourcePath([])),Te=new __PRIVATE_DocReference(t,e),Ee=new __PRIVATE_DocReference(t,e+1),Re=[];return this.$r.forEachInRange([Te,Ee],Ce=>{this.Wr(Ce),Re.push(Ce.key)}),Re}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new DocumentKey(new ResourcePath([])),Te=new __PRIVATE_DocReference(t,e),Ee=new __PRIVATE_DocReference(t,e+1);let Re=__PRIVATE_documentKeySet();return this.$r.forEachInRange([Te,Ee],Ce=>{Re=Re.add(Ce.key)}),Re}containsKey(e){const t=new __PRIVATE_DocReference(e,0),Te=this.qr.firstAfterOrEqual(t);return Te!==null&&e.isEqual(Te.key)}}class __PRIVATE_DocReference{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return DocumentKey.comparator(e.key,t.key)||__PRIVATE_primitiveComparator(e.Hr,t.Hr)}static Ur(e,t){return __PRIVATE_primitiveComparator(e.Hr,t.Hr)||DocumentKey.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new SortedSet(__PRIVATE_DocReference.Qr)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,Te,Ee){const Re=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const Ce=new MutationBatch(Re,t,Te,Ee);this.mutationQueue.push(Ce);for(const De of Ee)this.Yr=this.Yr.add(new __PRIVATE_DocReference(De.key,Re)),this.indexManager.addToCollectionParentIndex(e,De.key.path.popLast());return PersistencePromise.resolve(Ce)}lookupMutationBatch(e,t){return PersistencePromise.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const Te=t+1,Ee=this.Xr(Te),Re=Ee<0?0:Ee;return PersistencePromise.resolve(this.mutationQueue.length>Re?this.mutationQueue[Re]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G$2:this.er-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const Te=new __PRIVATE_DocReference(t,0),Ee=new __PRIVATE_DocReference(t,Number.POSITIVE_INFINITY),Re=[];return this.Yr.forEachInRange([Te,Ee],Ce=>{const De=this.Zr(Ce.Hr);Re.push(De)}),PersistencePromise.resolve(Re)}getAllMutationBatchesAffectingDocumentKeys(e,t){let Te=new SortedSet(__PRIVATE_primitiveComparator);return t.forEach(Ee=>{const Re=new __PRIVATE_DocReference(Ee,0),Ce=new __PRIVATE_DocReference(Ee,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([Re,Ce],De=>{Te=Te.add(De.Hr)})}),PersistencePromise.resolve(this.ei(Te))}getAllMutationBatchesAffectingQuery(e,t){const Te=t.path,Ee=Te.length+1;let Re=Te;DocumentKey.isDocumentKey(Re)||(Re=Re.child(""));const Ce=new __PRIVATE_DocReference(new DocumentKey(Re),0);let De=new SortedSet(__PRIVATE_primitiveComparator);return this.Yr.forEachWhile($e=>{const Ve=$e.key.path;return!!Te.isPrefixOf(Ve)&&(Ve.length===Ee&&(De=De.add($e.Hr)),!0)},Ce),PersistencePromise.resolve(this.ei(De))}ei(e){const t=[];return e.forEach(Te=>{const Ee=this.Zr(Te);Ee!==null&&t.push(Ee)}),t}removeMutationBatch(e,t){__PRIVATE_hardAssert(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let Te=this.Yr;return PersistencePromise.forEach(t.mutations,Ee=>{const Re=new __PRIVATE_DocReference(Ee.key,t.batchId);return Te=Te.delete(Re),this.referenceDelegate.markPotentiallyOrphaned(e,Ee.key)}).next(()=>{this.Yr=Te})}rr(e){}containsKey(e,t){const Te=new __PRIVATE_DocReference(t,0),Ee=this.Yr.firstAfterOrEqual(Te);return PersistencePromise.resolve(t.isEqual(Ee&&Ee.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ni=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const Te=t.key,Ee=this.docs.get(Te),Re=Ee?Ee.size:0,Ce=this.ni(t);return this.docs=this.docs.insert(Te,{document:t.mutableCopy(),size:Ce}),this.size+=Ce-Re,this.indexManager.addToCollectionParentIndex(e,Te.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const Te=this.docs.get(t);return PersistencePromise.resolve(Te?Te.document.mutableCopy():MutableDocument.newInvalidDocument(t))}getEntries(e,t){let Te=__PRIVATE_mutableDocumentMap();return t.forEach(Ee=>{const Re=this.docs.get(Ee);Te=Te.insert(Ee,Re?Re.document.mutableCopy():MutableDocument.newInvalidDocument(Ee))}),PersistencePromise.resolve(Te)}getDocumentsMatchingQuery(e,t,Te,Ee){let Re=__PRIVATE_mutableDocumentMap();const Ce=t.path,De=new DocumentKey(Ce.child("__id-9223372036854775808__")),$e=this.docs.getIteratorFrom(De);for(;$e.hasNext();){const{key:Ve,value:{document:Be}}=$e.getNext();if(!Ce.isPrefixOf(Ve.path))break;Ve.path.length>Ce.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(Be),Te)<=0||(Ee.has(Be.key)||__PRIVATE_queryMatches(t,Be))&&(Re=Re.insert(Be.key,Be.mutableCopy()))}return PersistencePromise.resolve(Re)}getAllFromCollectionGroup(e,t,Te,Ee){fail(9500)}ri(e,t){return PersistencePromise.forEach(this.docs,Te=>t(Te))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((Te,Ee)=>{Ee.isValidDocument()?t.push(this.Or.addEntry(e,Ee)):this.Or.removeEntry(Te)}),PersistencePromise.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.ii=new ObjectMap(t=>__PRIVATE_canonifyTarget(t),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.si=0,this.oi=new __PRIVATE_ReferenceSet,this.targetCount=0,this._i=__PRIVATE_TargetIdGenerator.ar()}forEachTarget(e,t){return this.ii.forEach((Te,Ee)=>t(Ee)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,t,Te){return Te&&(this.lastRemoteSnapshotVersion=Te),t>this.si&&(this.si=t),PersistencePromise.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new __PRIVATE_TargetIdGenerator(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,t){return this.hr(t),PersistencePromise.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,t,Te){let Ee=0;const Re=[];return this.ii.forEach((Ce,De)=>{De.sequenceNumber<=t&&Te.get(De.targetId)===null&&(this.ii.delete(Ce),Re.push(this.removeMatchingKeysForTargetId(e,De.targetId)),Ee++)}),PersistencePromise.waitFor(Re).next(()=>Ee)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,t){const Te=this.ii.get(t)||null;return PersistencePromise.resolve(Te)}addMatchingKeys(e,t,Te){return this.oi.Kr(t,Te),PersistencePromise.resolve()}removeMatchingKeys(e,t,Te){this.oi.Gr(t,Te);const Ee=this.persistence.referenceDelegate,Re=[];return Ee&&t.forEach(Ce=>{Re.push(Ee.markPotentiallyOrphaned(e,Ce))}),PersistencePromise.waitFor(Re)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,t){const Te=this.oi.Jr(t);return PersistencePromise.resolve(Te)}containsKey(e,t){return PersistencePromise.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,t){this.ai={},this.overlays={},this.ui=new __PRIVATE_ListenSequence(0),this.ci=!1,this.ci=!0,this.li=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.hi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(Ee){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(Ee)}(Te=>this.referenceDelegate.Pi(Te)),this.serializer=new __PRIVATE_LocalSerializer(t),this.Ti=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let Te=this.ai[e.toKey()];return Te||(Te=new __PRIVATE_MemoryMutationQueue(t,this.referenceDelegate),this.ai[e.toKey()]=Te),Te}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,Te){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const Ee=new __PRIVATE_MemoryTransaction(this.ui.next());return this.referenceDelegate.Ii(),Te(Ee).next(Re=>this.referenceDelegate.di(Ee).next(()=>Re)).toPromise().then(Re=>(Ee.raiseOnCommittedEvent(),Re))}Ei(e,t){return PersistencePromise.or(Object.values(this.ai).map(Te=>()=>Te.containsKey(e,t)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ai=new __PRIVATE_ReferenceSet,this.Ri=null}static Vi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get mi(){if(this.Ri)return this.Ri;throw fail(60996)}addReference(e,t,Te){return this.Ai.addReference(Te,t),this.mi.delete(Te.toString()),PersistencePromise.resolve()}removeReference(e,t,Te){return this.Ai.removeReference(Te,t),this.mi.add(Te.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),PersistencePromise.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(Ee=>this.mi.add(Ee.toString()));const Te=this.persistence.getTargetCache();return Te.getMatchingKeysForTargetId(e,t.targetId).next(Ee=>{Ee.forEach(Re=>this.mi.add(Re.toString()))}).next(()=>Te.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.mi,Te=>{const Ee=DocumentKey.fromPath(Te);return this.fi(e,Ee).next(Re=>{Re||t.removeEntry(Ee,SnapshotVersion.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(Te=>{Te?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,t){this.persistence=e,this.gi=new ObjectMap(Te=>__PRIVATE_encodeResourcePath(Te.path),(Te,Ee)=>Te.isEqual(Ee)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,t)}static Vi(e,t){return new __PRIVATE_MemoryLruDelegate(e,t)}Ii(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(Te=>t.next(Ee=>Te+Ee))}yr(e){let t=0;return this.gr(e,Te=>{t++}).next(()=>t)}gr(e,t){return PersistencePromise.forEach(this.gi,(Te,Ee)=>this.Sr(e,Te,Ee).next(Re=>Re?PersistencePromise.resolve():t(Ee)))}removeTargets(e,t,Te){return this.persistence.getTargetCache().removeTargets(e,t,Te)}removeOrphanedDocuments(e,t){let Te=0;const Ee=this.persistence.getRemoteDocumentCache(),Re=Ee.newChangeBuffer();return Ee.ri(e,Ce=>this.Sr(e,Ce,t).next(De=>{De||(Te++,Re.removeEntry(Ce,SnapshotVersion.min()))})).next(()=>Re.apply(e)).next(()=>Te)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,t){const Te=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,Te)}addReference(e,t,Te){return this.gi.set(Te,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,t,Te){return this.gi.set(Te,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=__PRIVATE_estimateByteSize(e.data.value)),t}Sr(e,t,Te){return PersistencePromise.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const Ee=this.gi.get(t);return PersistencePromise.resolve(Ee!==void 0&&Ee>Te)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,t,Te,Ee){this.targetId=e,this.fromCache=t,this.Is=Te,this.ds=Ee}static Es(e,t){let Te=__PRIVATE_documentKeySet(),Ee=__PRIVATE_documentKeySet();for(const Re of t.docChanges)switch(Re.type){case 0:Te=Te.add(Re.doc.key);break;case 1:Ee=Ee.add(Re.doc.key)}return new __PRIVATE_LocalViewChanges(e,t.fromCache,Te,Ee)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,Te,Ee){const Re={result:null};return this.ps(e,t).next(Ce=>{Re.result=Ce}).next(()=>{if(!Re.result)return this.ys(e,t,Ee,Te).next(Ce=>{Re.result=Ce})}).next(()=>{if(Re.result)return;const Ce=new QueryContext;return this.ws(e,t,Ce).next(De=>{if(Re.result=De,this.Rs)return this.Ss(e,t,Ce,De.size)})}).next(()=>Re.result)}Ss(e,t,Te,Ee){return Te.documentReadCount<this.Vs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(t),"scans",Te.documentReadCount,"local documents and returns",Ee,"documents as results."),Te.documentReadCount>this.fs*Ee?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(t))):PersistencePromise.resolve())}ps(e,t){if(__PRIVATE_queryMatchesAllDocuments(t))return PersistencePromise.resolve(null);let Te=__PRIVATE_queryToTarget(t);return this.indexManager.getIndexType(e,Te).next(Ee=>Ee===0?null:(t.limit!==null&&Ee===1&&(t=__PRIVATE_queryWithLimit(t,null,"F"),Te=__PRIVATE_queryToTarget(t)),this.indexManager.getDocumentsMatchingTarget(e,Te).next(Re=>{const Ce=__PRIVATE_documentKeySet(...Re);return this.gs.getDocuments(e,Ce).next(De=>this.indexManager.getMinOffset(e,Te).next($e=>{const Ve=this.bs(t,De);return this.Ds(t,Ve,Ce,$e.readTime)?this.ps(e,__PRIVATE_queryWithLimit(t,null,"F")):this.vs(e,Ve,t,$e)}))})))}ys(e,t,Te,Ee){return __PRIVATE_queryMatchesAllDocuments(t)||Ee.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.gs.getDocuments(e,Te).next(Re=>{const Ce=this.bs(t,Re);return this.Ds(t,Ce,Te,Ee)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",Ee.toString(),__PRIVATE_stringifyQuery(t)),this.vs(e,Ce,t,__PRIVATE_newIndexOffsetSuccessorFromReadTime(Ee,Q$2)).next(De=>De))})}bs(e,t){let Te=new SortedSet(__PRIVATE_newQueryComparator(e));return t.forEach((Ee,Re)=>{__PRIVATE_queryMatches(e,Re)&&(Te=Te.add(Re))}),Te}Ds(e,t,Te,Ee){if(e.limit===null)return!1;if(Te.size!==t.size)return!0;const Re=e.limitType==="F"?t.last():t.first();return!!Re&&(Re.hasPendingWrites||Re.version.compareTo(Ee)>0)}ws(e,t,Te){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(t)),this.gs.getDocumentsMatchingQuery(e,t,IndexOffset.min(),Te)}vs(e,t,Te,Ee){return this.gs.getDocumentsMatchingQuery(e,Te,Ee).next(Re=>(t.forEach(Ce=>{Re=Re.insert(Ce.key,Ce)}),Re))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt$2="LocalStore",$t$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,t,Te,Ee){this.persistence=e,this.Cs=t,this.serializer=Ee,this.Fs=new SortedMap(__PRIVATE_primitiveComparator),this.Ms=new ObjectMap(Re=>__PRIVATE_canonifyTarget(Re),__PRIVATE_targetEquals),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(Te)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function __PRIVATE_newLocalStore(n,e,t,Te){return new __PRIVATE_LocalStoreImpl(n,e,t,Te)}async function __PRIVATE_localStoreHandleUserChange(n,e){const t=__PRIVATE_debugCast(n);return await t.persistence.runTransaction("Handle user change","readonly",Te=>{let Ee;return t.mutationQueue.getAllMutationBatches(Te).next(Re=>(Ee=Re,t.Ns(e),t.mutationQueue.getAllMutationBatches(Te))).next(Re=>{const Ce=[],De=[];let $e=__PRIVATE_documentKeySet();for(const Ve of Ee){Ce.push(Ve.batchId);for(const Be of Ve.mutations)$e=$e.add(Be.key)}for(const Ve of Re){De.push(Ve.batchId);for(const Be of Ve.mutations)$e=$e.add(Be.key)}return t.localDocuments.getDocuments(Te,$e).next(Ve=>({Bs:Ve,removedBatchIds:Ce,addedBatchIds:De}))})})}function __PRIVATE_localStoreAcknowledgeBatch(n,e){const t=__PRIVATE_debugCast(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",Te=>{const Ee=e.batch.keys(),Re=t.Os.newChangeBuffer({trackRemovals:!0});return function(De,$e,Ve,Be){const Me=Ve.batch,Oe=Me.keys();let Ue=PersistencePromise.resolve();return Oe.forEach(ze=>{Ue=Ue.next(()=>Be.getEntry($e,ze)).next(He=>{const Ge=Ve.docVersions.get(ze);__PRIVATE_hardAssert(Ge!==null,48541),He.version.compareTo(Ge)<0&&(Me.applyToRemoteDocument(He,Ve),He.isValidDocument()&&(He.setReadTime(Ve.commitVersion),Be.addEntry(He)))})}),Ue.next(()=>De.mutationQueue.removeMutationBatch($e,Me))}(t,Te,e,Re).next(()=>Re.apply(Te)).next(()=>t.mutationQueue.performConsistencyCheck(Te)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(Te,Ee,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Te,function(De){let $e=__PRIVATE_documentKeySet();for(let Ve=0;Ve<De.mutationResults.length;++Ve)De.mutationResults[Ve].transformResults.length>0&&($e=$e.add(De.batch.mutations[Ve].key));return $e}(e))).next(()=>t.localDocuments.getDocuments(Te,Ee))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n){const e=__PRIVATE_debugCast(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(n,e){const t=__PRIVATE_debugCast(n),Te=e.snapshotVersion;let Ee=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",Re=>{const Ce=t.Os.newChangeBuffer({trackRemovals:!0});Ee=t.Fs;const De=[];e.targetChanges.forEach((Be,Me)=>{const Oe=Ee.get(Me);if(!Oe)return;De.push(t.hi.removeMatchingKeys(Re,Be.removedDocuments,Me).next(()=>t.hi.addMatchingKeys(Re,Be.addedDocuments,Me)));let Ue=Oe.withSequenceNumber(Re.currentSequenceNumber);e.targetMismatches.get(Me)!==null?Ue=Ue.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):Be.resumeToken.approximateByteSize()>0&&(Ue=Ue.withResumeToken(Be.resumeToken,Te)),Ee=Ee.insert(Me,Ue),function(He,Ge,Ke){return He.resumeToken.approximateByteSize()===0||Ge.snapshotVersion.toMicroseconds()-He.snapshotVersion.toMicroseconds()>=$t$1?!0:Ke.addedDocuments.size+Ke.modifiedDocuments.size+Ke.removedDocuments.size>0}(Oe,Ue,Be)&&De.push(t.hi.updateTargetData(Re,Ue))});let $e=__PRIVATE_mutableDocumentMap(),Ve=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(Be=>{e.resolvedLimboDocuments.has(Be)&&De.push(t.persistence.referenceDelegate.updateLimboDocument(Re,Be))}),De.push(__PRIVATE_populateDocumentChangeBuffer(Re,Ce,e.documentUpdates).next(Be=>{$e=Be.Ls,Ve=Be.ks})),!Te.isEqual(SnapshotVersion.min())){const Be=t.hi.getLastRemoteSnapshotVersion(Re).next(Me=>t.hi.setTargetsMetadata(Re,Re.currentSequenceNumber,Te));De.push(Be)}return PersistencePromise.waitFor(De).next(()=>Ce.apply(Re)).next(()=>t.localDocuments.getLocalViewOfDocuments(Re,$e,Ve)).next(()=>$e)}).then(Re=>(t.Fs=Ee,Re))}function __PRIVATE_populateDocumentChangeBuffer(n,e,t){let Te=__PRIVATE_documentKeySet(),Ee=__PRIVATE_documentKeySet();return t.forEach(Re=>Te=Te.add(Re)),e.getEntries(n,Te).next(Re=>{let Ce=__PRIVATE_mutableDocumentMap();return t.forEach((De,$e)=>{const Ve=Re.get(De);$e.isFoundDocument()!==Ve.isFoundDocument()&&(Ee=Ee.add(De)),$e.isNoDocument()&&$e.version.isEqual(SnapshotVersion.min())?(e.removeEntry(De,$e.readTime),Ce=Ce.insert(De,$e)):!Ve.isValidDocument()||$e.version.compareTo(Ve.version)>0||$e.version.compareTo(Ve.version)===0&&Ve.hasPendingWrites?(e.addEntry($e),Ce=Ce.insert(De,$e)):__PRIVATE_logDebug(Qt$2,"Ignoring outdated watch update for ",De,". Current version:",Ve.version," Watch version:",$e.version)}),{Ls:Ce,ks:Ee}})}function __PRIVATE_localStoreGetNextMutationBatch(n,e){const t=__PRIVATE_debugCast(n);return t.persistence.runTransaction("Get next mutation batch","readonly",Te=>(e===void 0&&(e=G$2),t.mutationQueue.getNextMutationBatchAfterBatchId(Te,e)))}function __PRIVATE_localStoreAllocateTarget(n,e){const t=__PRIVATE_debugCast(n);return t.persistence.runTransaction("Allocate target","readwrite",Te=>{let Ee;return t.hi.getTargetData(Te,e).next(Re=>Re?(Ee=Re,PersistencePromise.resolve(Ee)):t.hi.allocateTargetId(Te).next(Ce=>(Ee=new TargetData(e,Ce,"TargetPurposeListen",Te.currentSequenceNumber),t.hi.addTargetData(Te,Ee).next(()=>Ee))))}).then(Te=>{const Ee=t.Fs.get(Te.targetId);return(Ee===null||Te.snapshotVersion.compareTo(Ee.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(Te.targetId,Te),t.Ms.set(e,Te.targetId)),Te})}async function __PRIVATE_localStoreReleaseTarget(n,e,t){const Te=__PRIVATE_debugCast(n),Ee=Te.Fs.get(e),Re=t?"readwrite":"readwrite-primary";try{t||await Te.persistence.runTransaction("Release target",Re,Ce=>Te.persistence.referenceDelegate.removeTarget(Ce,Ee))}catch(Ce){if(!__PRIVATE_isIndexedDbTransactionError(Ce))throw Ce;__PRIVATE_logDebug(Qt$2,`Failed to update sequence numbers for target ${e}: ${Ce}`)}Te.Fs=Te.Fs.remove(e),Te.Ms.delete(Ee.target)}function __PRIVATE_localStoreExecuteQuery(n,e,t){const Te=__PRIVATE_debugCast(n);let Ee=SnapshotVersion.min(),Re=__PRIVATE_documentKeySet();return Te.persistence.runTransaction("Execute query","readwrite",Ce=>function($e,Ve,Be){const Me=__PRIVATE_debugCast($e),Oe=Me.Ms.get(Be);return Oe!==void 0?PersistencePromise.resolve(Me.Fs.get(Oe)):Me.hi.getTargetData(Ve,Be)}(Te,Ce,__PRIVATE_queryToTarget(e)).next(De=>{if(De)return Ee=De.lastLimboFreeSnapshotVersion,Te.hi.getMatchingKeysForTargetId(Ce,De.targetId).next($e=>{Re=$e})}).next(()=>Te.Cs.getDocumentsMatchingQuery(Ce,e,t?Ee:SnapshotVersion.min(),t?Re:__PRIVATE_documentKeySet())).next(De=>(__PRIVATE_setMaxReadTime(Te,__PRIVATE_queryCollectionGroup(e),De),{documents:De,qs:Re})))}function __PRIVATE_setMaxReadTime(n,e,t){let Te=n.xs.get(e)||SnapshotVersion.min();t.forEach((Ee,Re)=>{Re.readTime.compareTo(Te)>0&&(Te=Re.readTime)}),n.xs.set(e,Te)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Fo=new __PRIVATE_LocalClientState,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,Te){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,Te){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,t,Te){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt$1=null;function __PRIVATE_generateUniqueDebugId(){return jt$1===null?jt$1=function(){return 268435456+Math.round(2147483648*Math.random())}():jt$1++,"0x"+jt$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt$1="RestConnection",Ht$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",Te=encodeURIComponent(this.databaseId.projectId),Ee=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${Te}/databases/${Ee}`,this.Ko=this.databaseId.database===ut$1?`project_id=${Te}`:`project_id=${Te}&database_id=${Ee}`}Wo(e,t,Te,Ee,Re){const Ce=__PRIVATE_generateUniqueDebugId(),De=this.Go(e,t.toUriEncodedString());__PRIVATE_logDebug(Jt$1,`Sending RPC '${e}' ${Ce}:`,De,Te);const $e={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo($e,Ee,Re);const{host:Ve}=new URL(De),Be=isCloudWorkstation(Ve);return this.jo(e,De,$e,Te,Be).then(Me=>(__PRIVATE_logDebug(Jt$1,`Received RPC '${e}' ${Ce}: `,Me),Me),Me=>{throw __PRIVATE_logWarn(Jt$1,`RPC '${e}' ${Ce} failed with error: `,Me,"url: ",De,"request:",Te),Me})}Jo(e,t,Te,Ee,Re,Ce){return this.Wo(e,t,Te,Ee,Re)}zo(e,t,Te){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x$2}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((Ee,Re)=>e[Re]=Ee),Te&&Te.headers.forEach((Ee,Re)=>e[Re]=Ee)}Go(e,t){const Te=Ht$1[e];return`${this.$o}/v1/${t}:${Te}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,Te,Ee,Re){const Ce=__PRIVATE_generateUniqueDebugId();return new Promise((De,$e)=>{const Ve=new XhrIo;Ve.setWithCredentials(!0),Ve.listenOnce(EventType.COMPLETE,()=>{try{switch(Ve.getLastErrorCode()){case ErrorCode.NO_ERROR:const Me=Ve.getResponseJson();__PRIVATE_logDebug(Yt$1,`XHR for RPC '${e}' ${Ce} received:`,JSON.stringify(Me)),De(Me);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Ce} timed out`),$e(new FirestoreError(N$2.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const Oe=Ve.getStatus();if(__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Ce} failed with status:`,Oe,"response text:",Ve.getResponseText()),Oe>0){let Ue=Ve.getResponseJson();Array.isArray(Ue)&&(Ue=Ue[0]);const ze=Ue?.error;if(ze&&ze.status&&ze.message){const He=function(Ke){const Xe=Ke.toLowerCase().replace(/_/g,"-");return Object.values(N$2).indexOf(Xe)>=0?Xe:N$2.UNKNOWN}(ze.status);$e(new FirestoreError(He,ze.message))}else $e(new FirestoreError(N$2.UNKNOWN,"Server responded with status "+Ve.getStatus()))}else $e(new FirestoreError(N$2.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{c_:e,streamId:Ce,l_:Ve.getLastErrorCode(),h_:Ve.getLastError()})}}finally{__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Ce} completed.`)}});const Be=JSON.stringify(Ee);__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Ce} sending request:`,Ee),Ve.send(t,"POST",Be,Te,15)})}P_(e,t,Te){const Ee=__PRIVATE_generateUniqueDebugId(),Re=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],Ce=createWebChannelTransport(),De=getStatEventTarget(),$e={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Ve=this.longPollingOptions.timeoutSeconds;Ve!==void 0&&($e.longPollingTimeout=Math.round(1e3*Ve)),this.useFetchStreams&&($e.useFetchStreams=!0),this.zo($e.initMessageHeaders,t,Te),$e.encodeInitMessageHeaders=!0;const Be=Re.join("");__PRIVATE_logDebug(Yt$1,`Creating RPC '${e}' stream ${Ee}: ${Be}`,$e);const Me=Ce.createWebChannel(Be,$e);this.T_(Me);let Oe=!1,Ue=!1;const ze=new __PRIVATE_StreamBridge({Ho:Ge=>{Ue?__PRIVATE_logDebug(Yt$1,`Not sending because RPC '${e}' stream ${Ee} is closed:`,Ge):(Oe||(__PRIVATE_logDebug(Yt$1,`Opening RPC '${e}' stream ${Ee} transport.`),Me.open(),Oe=!0),__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} sending:`,Ge),Me.send(Ge))},Yo:()=>Me.close()}),He=(Ge,Ke,Xe)=>{Ge.listen(Ke,Je=>{try{Xe(Je)}catch(un){setTimeout(()=>{throw un},0)}})};return He(Me,WebChannel.EventType.OPEN,()=>{Ue||(__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} transport opened.`),ze.s_())}),He(Me,WebChannel.EventType.CLOSE,()=>{Ue||(Ue=!0,__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} transport closed`),ze.__(),this.I_(Me))}),He(Me,WebChannel.EventType.ERROR,Ge=>{Ue||(Ue=!0,__PRIVATE_logWarn(Yt$1,`RPC '${e}' stream ${Ee} transport errored. Name:`,Ge.name,"Message:",Ge.message),ze.__(new FirestoreError(N$2.UNAVAILABLE,"The operation could not be completed")))}),He(Me,WebChannel.EventType.MESSAGE,Ge=>{var Ke;if(!Ue){const Xe=Ge.data[0];__PRIVATE_hardAssert(!!Xe,16349);const Je=Xe,un=Je?.error||((Ke=Je[0])===null||Ke===void 0?void 0:Ke.error);if(un){__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} received error:`,un);const fn=un.status;let yn=function(dn){const vn=ft$1[dn];if(vn!==void 0)return __PRIVATE_mapCodeFromRpcCode(vn)}(fn),gn=un.message;yn===void 0&&(yn=N$2.INTERNAL,gn="Unknown error status: "+fn+" with message "+un.message),Ue=!0,ze.__(new FirestoreError(yn,gn)),Me.close()}else __PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} received:`,Xe),ze.a_(Xe)}}),He(De,Event$1.STAT_EVENT,Ge=>{Ge.stat===Stat.PROXY?__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} detected buffering proxy`):Ge.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} detected no buffering proxy`)}),setTimeout(()=>{ze.o_()},0),ze}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(n){return new JsonProtoSerializer(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,t,Te=1e3,Ee=1.5,Re=6e4){this.Fi=e,this.timerId=t,this.d_=Te,this.E_=Ee,this.A_=Re,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),Te=Math.max(0,Date.now()-this.m_),Ee=Math.max(0,t-Te);Ee>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${Ee} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${Te} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,Ee,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,t,Te,Ee,Re,Ce,De,$e){this.Fi=e,this.w_=Te,this.S_=Ee,this.connection=Re,this.authCredentialsProvider=Ce,this.appCheckCredentialsProvider=De,this.listener=$e,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new __PRIVATE_ExponentialBackoff(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N$2.RESOURCE_EXHAUSTED?(__PRIVATE_logError(t.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N$2.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([Te,Ee])=>{this.b_===t&&this.W_(Te,Ee)},Te=>{e(()=>{const Ee=new FirestoreError(N$2.UNKNOWN,"Fetching auth token failed: "+Te.message);return this.G_(Ee)})})}W_(e,t){const Te=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{Te(()=>this.listener.Zo())}),this.stream.e_(()=>{Te(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(Ee=>{Te(()=>this.G_(Ee))}),this.stream.onMessage(Ee=>{Te(()=>++this.C_==1?this.j_(Ee):this.onNext(Ee))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return __PRIVATE_logDebug(Zt$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(__PRIVATE_logDebug(Zt$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,t,Te,Ee,Re,Ce){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,Te,Ee,Ce),this.serializer=Re}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=__PRIVATE_fromWatchChange(this.serializer,e),Te=function(Re){if(!("targetChange"in Re))return SnapshotVersion.min();const Ce=Re.targetChange;return Ce.targetIds&&Ce.targetIds.length?SnapshotVersion.min():Ce.readTime?__PRIVATE_fromVersion(Ce.readTime):SnapshotVersion.min()}(e);return this.listener.J_(t,Te)}H_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.addTarget=function(Re,Ce){let De;const $e=Ce.target;if(De=__PRIVATE_targetIsDocumentTarget($e)?{documents:__PRIVATE_toDocumentsTarget(Re,$e)}:{query:__PRIVATE_toQueryTarget(Re,$e).Vt},De.targetId=Ce.targetId,Ce.resumeToken.approximateByteSize()>0){De.resumeToken=__PRIVATE_toBytes(Re,Ce.resumeToken);const Ve=__PRIVATE_toInt32Proto(Re,Ce.expectedCount);Ve!==null&&(De.expectedCount=Ve)}else if(Ce.snapshotVersion.compareTo(SnapshotVersion.min())>0){De.readTime=toTimestamp(Re,Ce.snapshotVersion.toTimestamp());const Ve=__PRIVATE_toInt32Proto(Re,Ce.expectedCount);Ve!==null&&(De.expectedCount=Ve)}return De}(this.serializer,e);const Te=__PRIVATE_toListenRequestLabels(this.serializer,e);Te&&(t.labels=Te),this.k_(t)}Y_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.removeTarget=e,this.k_(t)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,t,Te,Ee,Re,Ce){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,Te,Ee,Ce),this.serializer=Re}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),Te=__PRIVATE_fromVersion(e.commitTime);return this.listener.ta(Te,t)}na(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(Te=>toMutation(this.serializer,Te))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,t,Te,Ee){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=Te,this.serializer=Ee,this.ra=!1}ia(){if(this.ra)throw new FirestoreError(N$2.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,Te,Ee){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([Re,Ce])=>this.connection.Wo(e,__PRIVATE_toResourcePath(t,Te),Ee,Re,Ce)).catch(Re=>{throw Re.name==="FirebaseError"?(Re.code===N$2.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),Re):new FirestoreError(N$2.UNKNOWN,Re.toString())})}Jo(e,t,Te,Ee,Re){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([Ce,De])=>this.connection.Jo(e,__PRIVATE_toResourcePath(t,Te),Ee,Ce,De,Re)).catch(Ce=>{throw Ce.name==="FirebaseError"?(Ce.code===N$2.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),Ce):new FirestoreError(N$2.UNKNOWN,Ce.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(__PRIVATE_logError(t),this._a=!1):__PRIVATE_logDebug("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$2="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,t,Te,Ee,Re){this.localStore=e,this.datastore=t,this.asyncQueue=Te,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=Re,this.Ea.xo(Ce=>{Te.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt$2,"Restarting streams for network reachability change."),await async function($e){const Ve=__PRIVATE_debugCast($e);Ve.Ia.add(4),await __PRIVATE_disableNetworkInternal(Ve),Ve.Aa.set("Unknown"),Ve.Ia.delete(4),await __PRIVATE_enableNetworkInternal(Ve)}(this))})}),this.Aa=new __PRIVATE_OnlineStateTracker(Te,Ee)}}async function __PRIVATE_enableNetworkInternal(n){if(__PRIVATE_canUseNetwork(n))for(const e of n.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(n){for(const e of n.da)await e(!1)}function __PRIVATE_remoteStoreListen(n,e){const t=__PRIVATE_debugCast(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):__PRIVATE_ensureWatchStream(t).x_()&&__PRIVATE_sendWatchRequest(t,e))}function __PRIVATE_remoteStoreUnlisten(n,e){const t=__PRIVATE_debugCast(n),Te=__PRIVATE_ensureWatchStream(t);t.Ta.delete(e),Te.x_()&&__PRIVATE_sendUnwatchRequest(t,e),t.Ta.size===0&&(Te.x_()?Te.B_():__PRIVATE_canUseNetwork(t)&&t.Aa.set("Unknown"))}function __PRIVATE_sendWatchRequest(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}__PRIVATE_ensureWatchStream(n).H_(e)}function __PRIVATE_sendUnwatchRequest(n,e){n.Ra.$e(e),__PRIVATE_ensureWatchStream(n).Y_(e)}function __PRIVATE_startWatchStream(n){n.Ra=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(n).start(),n.Aa.aa()}function __PRIVATE_shouldStartWatchStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWatchStream(n).M_()&&n.Ta.size>0}function __PRIVATE_canUseNetwork(n){return __PRIVATE_debugCast(n).Ia.size===0}function __PRIVATE_cleanUpWatchStreamState(n){n.Ra=void 0}async function __PRIVATE_onWatchStreamConnected(n){n.Aa.set("Online")}async function __PRIVATE_onWatchStreamOpen(n){n.Ta.forEach((e,t)=>{__PRIVATE_sendWatchRequest(n,e)})}async function __PRIVATE_onWatchStreamClose(n,e){__PRIVATE_cleanUpWatchStreamState(n),__PRIVATE_shouldStartWatchStream(n)?(n.Aa.la(e),__PRIVATE_startWatchStream(n)):n.Aa.set("Unknown")}async function __PRIVATE_onWatchStreamChange(n,e,t){if(n.Aa.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(Ee,Re){const Ce=Re.cause;for(const De of Re.targetIds)Ee.Ta.has(De)&&(await Ee.remoteSyncer.rejectListen(De,Ce),Ee.Ta.delete(De),Ee.Ra.removeTarget(De))}(n,e)}catch(Te){__PRIVATE_logDebug(Xt$2,"Failed to remove targets %s: %s ",e.targetIds.join(","),Te),await __PRIVATE_disableNetworkUntilRecovery(n,Te)}else if(e instanceof __PRIVATE_DocumentWatchChange?n.Ra.Ye(e):e instanceof __PRIVATE_ExistenceFilterChange?n.Ra.it(e):n.Ra.et(e),!t.isEqual(SnapshotVersion.min()))try{const Te=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore);t.compareTo(Te)>=0&&await function(Re,Ce){const De=Re.Ra.Pt(Ce);return De.targetChanges.forEach(($e,Ve)=>{if($e.resumeToken.approximateByteSize()>0){const Be=Re.Ta.get(Ve);Be&&Re.Ta.set(Ve,Be.withResumeToken($e.resumeToken,Ce))}}),De.targetMismatches.forEach(($e,Ve)=>{const Be=Re.Ta.get($e);if(!Be)return;Re.Ta.set($e,Be.withResumeToken(ByteString.EMPTY_BYTE_STRING,Be.snapshotVersion)),__PRIVATE_sendUnwatchRequest(Re,$e);const Me=new TargetData(Be.target,$e,Ve,Be.sequenceNumber);__PRIVATE_sendWatchRequest(Re,Me)}),Re.remoteSyncer.applyRemoteEvent(De)}(n,t)}catch(Te){__PRIVATE_logDebug(Xt$2,"Failed to raise snapshot:",Te),await __PRIVATE_disableNetworkUntilRecovery(n,Te)}}async function __PRIVATE_disableNetworkUntilRecovery(n,e,t){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;n.Ia.add(1),await __PRIVATE_disableNetworkInternal(n),n.Aa.set("Offline"),t||(t=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt$2,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await __PRIVATE_enableNetworkInternal(n)})}function __PRIVATE_executeWithRecovery(n,e){return e().catch(t=>__PRIVATE_disableNetworkUntilRecovery(n,t,e))}async function __PRIVATE_fillWritePipeline(n){const e=__PRIVATE_debugCast(n),t=__PRIVATE_ensureWriteStream(e);let Te=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:G$2;for(;__PRIVATE_canAddToWritePipeline(e);)try{const Ee=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,Te);if(Ee===null){e.Pa.length===0&&t.B_();break}Te=Ee.batchId,__PRIVATE_addToWritePipeline(e,Ee)}catch(Ee){await __PRIVATE_disableNetworkUntilRecovery(e,Ee)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(n){return __PRIVATE_canUseNetwork(n)&&n.Pa.length<10}function __PRIVATE_addToWritePipeline(n,e){n.Pa.push(e);const t=__PRIVATE_ensureWriteStream(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function __PRIVATE_shouldStartWriteStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWriteStream(n).M_()&&n.Pa.length>0}function __PRIVATE_startWriteStream(n){__PRIVATE_ensureWriteStream(n).start()}async function __PRIVATE_onWriteStreamOpen(n){__PRIVATE_ensureWriteStream(n).na()}async function __PRIVATE_onWriteHandshakeComplete(n){const e=__PRIVATE_ensureWriteStream(n);for(const t of n.Pa)e.X_(t.mutations)}async function __PRIVATE_onMutationResult(n,e,t){const Te=n.Pa.shift(),Ee=MutationBatchResult.from(Te,e,t);await __PRIVATE_executeWithRecovery(n,()=>n.remoteSyncer.applySuccessfulWrite(Ee)),await __PRIVATE_fillWritePipeline(n)}async function __PRIVATE_onWriteStreamClose(n,e){e&&__PRIVATE_ensureWriteStream(n).Z_&&await async function(Te,Ee){if(function(Ce){return __PRIVATE_isPermanentError(Ce)&&Ce!==N$2.ABORTED}(Ee.code)){const Re=Te.Pa.shift();__PRIVATE_ensureWriteStream(Te).N_(),await __PRIVATE_executeWithRecovery(Te,()=>Te.remoteSyncer.rejectFailedWrite(Re.batchId,Ee)),await __PRIVATE_fillWritePipeline(Te)}}(n,e),__PRIVATE_shouldStartWriteStream(n)&&__PRIVATE_startWriteStream(n)}async function __PRIVATE_remoteStoreHandleCredentialChange(n,e){const t=__PRIVATE_debugCast(n);t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt$2,"RemoteStore received new credentials");const Te=__PRIVATE_canUseNetwork(t);t.Ia.add(3),await __PRIVATE_disableNetworkInternal(t),Te&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await __PRIVATE_enableNetworkInternal(t)}async function __PRIVATE_remoteStoreApplyPrimaryState(n,e){const t=__PRIVATE_debugCast(n);e?(t.Ia.delete(2),await __PRIVATE_enableNetworkInternal(t)):e||(t.Ia.add(2),await __PRIVATE_disableNetworkInternal(t),t.Aa.set("Unknown"))}function __PRIVATE_ensureWatchStream(n){return n.Va||(n.Va=function(t,Te,Ee){const Re=__PRIVATE_debugCast(t);return Re.ia(),new __PRIVATE_PersistentListenStream(Te,Re.connection,Re.authCredentials,Re.appCheckCredentials,Re.serializer,Ee)}(n.datastore,n.asyncQueue,{Zo:__PRIVATE_onWatchStreamConnected.bind(null,n),e_:__PRIVATE_onWatchStreamOpen.bind(null,n),n_:__PRIVATE_onWatchStreamClose.bind(null,n),J_:__PRIVATE_onWatchStreamChange.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):n.Aa.set("Unknown")):(await n.Va.stop(),__PRIVATE_cleanUpWatchStreamState(n))})),n.Va}function __PRIVATE_ensureWriteStream(n){return n.ma||(n.ma=function(t,Te,Ee){const Re=__PRIVATE_debugCast(t);return Re.ia(),new __PRIVATE_PersistentWriteStream(Te,Re.connection,Re.authCredentials,Re.appCheckCredentials,Re.serializer,Ee)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:__PRIVATE_onWriteStreamOpen.bind(null,n),n_:__PRIVATE_onWriteStreamClose.bind(null,n),ea:__PRIVATE_onWriteHandshakeComplete.bind(null,n),ta:__PRIVATE_onMutationResult.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await __PRIVATE_fillWritePipeline(n)):(await n.ma.stop(),n.Pa.length>0&&(__PRIVATE_logDebug(Xt$2,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,t,Te,Ee,Re){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=Te,this.op=Ee,this.removalCallback=Re,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(Ce=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,Te,Ee,Re){const Ce=Date.now()+Te,De=new DelayedOperation(e,t,Ce,Ee,Re);return De.start(Te),De}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$2.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(n,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${n}`),__PRIVATE_isIndexedDbTransactionError(n))return new FirestoreError(N$2.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(t,Te)=>e(t,Te)||DocumentKey.comparator(t.key,Te.key):(t,Te)=>DocumentKey.comparator(t.key,Te.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,Te)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),Te=e.sortedSet.getIterator();for(;t.hasNext();){const Ee=t.getNext().key,Re=Te.getNext().key;if(!Ee.isEqual(Re))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const Te=new DocumentSet;return Te.comparator=this.comparator,Te.keyedMap=e,Te.sortedSet=t,Te}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.fa=new SortedMap(DocumentKey.comparator)}track(e){const t=e.doc.key,Te=this.fa.get(t);Te?e.type!==0&&Te.type===3?this.fa=this.fa.insert(t,e):e.type===3&&Te.type!==1?this.fa=this.fa.insert(t,{type:Te.type,doc:e.doc}):e.type===2&&Te.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&Te.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&Te.type===0?this.fa=this.fa.remove(t):e.type===1&&Te.type===2?this.fa=this.fa.insert(t,{type:1,doc:Te.doc}):e.type===0&&Te.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):fail(63341,{At:e,ga:Te}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,Te)=>{e.push(Te)}),e}}class ViewSnapshot{constructor(e,t,Te,Ee,Re,Ce,De,$e,Ve){this.query=e,this.docs=t,this.oldDocs=Te,this.docChanges=Ee,this.mutatedKeys=Re,this.fromCache=Ce,this.syncStateChanged=De,this.excludesMetadataChanges=$e,this.hasCachedResults=Ve}static fromInitialDocuments(e,t,Te,Ee,Re){const Ce=[];return t.forEach(De=>{Ce.push({type:0,doc:De})}),new ViewSnapshot(e,t,DocumentSet.emptySet(t),Ce,Te,Ee,!0,!1,Re)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,Te=e.docChanges;if(t.length!==Te.length)return!1;for(let Ee=0;Ee<t.length;Ee++)if(t[Ee].type!==Te[Ee].type||!t[Ee].doc.isEqual(Te[Ee].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,Te){const Ee=__PRIVATE_debugCast(t),Re=Ee.queries;Ee.queries=__PRIVATE_newQueriesObjectMap(),Re.forEach((Ce,De)=>{for(const $e of De.wa)$e.onError(Te)})})(this,new FirestoreError(N$2.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(n=>__PRIVATE_canonifyQuery(n),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(n,e){const t=__PRIVATE_debugCast(n);let Te=3;const Ee=e.query;let Re=t.queries.get(Ee);Re?!Re.Sa()&&e.ba()&&(Te=2):(Re=new __PRIVATE_QueryListenersInfo,Te=e.ba()?0:1);try{switch(Te){case 0:Re.ya=await t.onListen(Ee,!0);break;case 1:Re.ya=await t.onListen(Ee,!1);break;case 2:await t.onFirstRemoteStoreListen(Ee)}}catch(Ce){const De=__PRIVATE_wrapInUserErrorIfRecoverable(Ce,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(De)}t.queries.set(Ee,Re),Re.wa.push(e),e.va(t.onlineState),Re.ya&&e.Ca(Re.ya)&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}async function __PRIVATE_eventManagerUnlisten(n,e){const t=__PRIVATE_debugCast(n),Te=e.query;let Ee=3;const Re=t.queries.get(Te);if(Re){const Ce=Re.wa.indexOf(e);Ce>=0&&(Re.wa.splice(Ce,1),Re.wa.length===0?Ee=e.ba()?0:1:!Re.Sa()&&e.ba()&&(Ee=2))}switch(Ee){case 0:return t.queries.delete(Te),t.onUnlisten(Te,!0);case 1:return t.queries.delete(Te),t.onUnlisten(Te,!1);case 2:return t.onLastRemoteStoreUnlisten(Te);default:return}}function __PRIVATE_eventManagerOnWatchChange(n,e){const t=__PRIVATE_debugCast(n);let Te=!1;for(const Ee of e){const Re=Ee.query,Ce=t.queries.get(Re);if(Ce){for(const De of Ce.wa)De.Ca(Ee)&&(Te=!0);Ce.ya=Ee}}Te&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}function __PRIVATE_eventManagerOnWatchError(n,e,t){const Te=__PRIVATE_debugCast(n),Ee=Te.queries.get(e);if(Ee)for(const Re of Ee.wa)Re.onError(t);Te.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(n){n.Da.forEach(e=>{e.next()})}var en,tn;(tn=en||(en={})).Fa="default",tn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,t,Te){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=Te||{}}Ca(e){if(!this.options.includeMetadataChanges){const Te=[];for(const Ee of e.docChanges)Ee.type!==3&&Te.push(Ee);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,Te,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const Te=t!=="Offline";return(!this.options.ka||!Te)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==en.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Xa=__PRIVATE_newQueryComparator(e),this.eu=new DocumentSet(this.Xa)}get tu(){return this.Ha}nu(e,t){const Te=t?t.ru:new __PRIVATE_DocumentChangeSet,Ee=t?t.eu:this.eu;let Re=t?t.mutatedKeys:this.mutatedKeys,Ce=Ee,De=!1;const $e=this.query.limitType==="F"&&Ee.size===this.query.limit?Ee.last():null,Ve=this.query.limitType==="L"&&Ee.size===this.query.limit?Ee.first():null;if(e.inorderTraversal((Be,Me)=>{const Oe=Ee.get(Be),Ue=__PRIVATE_queryMatches(this.query,Me)?Me:null,ze=!!Oe&&this.mutatedKeys.has(Oe.key),He=!!Ue&&(Ue.hasLocalMutations||this.mutatedKeys.has(Ue.key)&&Ue.hasCommittedMutations);let Ge=!1;Oe&&Ue?Oe.data.isEqual(Ue.data)?ze!==He&&(Te.track({type:3,doc:Ue}),Ge=!0):this.iu(Oe,Ue)||(Te.track({type:2,doc:Ue}),Ge=!0,($e&&this.Xa(Ue,$e)>0||Ve&&this.Xa(Ue,Ve)<0)&&(De=!0)):!Oe&&Ue?(Te.track({type:0,doc:Ue}),Ge=!0):Oe&&!Ue&&(Te.track({type:1,doc:Oe}),Ge=!0,($e||Ve)&&(De=!0)),Ge&&(Ue?(Ce=Ce.add(Ue),Re=He?Re.add(Be):Re.delete(Be)):(Ce=Ce.delete(Be),Re=Re.delete(Be)))}),this.query.limit!==null)for(;Ce.size>this.query.limit;){const Be=this.query.limitType==="F"?Ce.last():Ce.first();Ce=Ce.delete(Be.key),Re=Re.delete(Be.key),Te.track({type:1,doc:Be})}return{eu:Ce,ru:Te,Ds:De,mutatedKeys:Re}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,Te,Ee){const Re=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const Ce=e.ru.pa();Ce.sort((Be,Me)=>function(Ue,ze){const He=Ge=>{switch(Ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{At:Ge})}};return He(Ue)-He(ze)}(Be.type,Me.type)||this.Xa(Be.doc,Me.doc)),this.su(Te),Ee=Ee!=null&&Ee;const De=t&&!Ee?this.ou():[],$e=this.Za.size===0&&this.current&&!Ee?1:0,Ve=$e!==this.Ya;return this.Ya=$e,Ce.length!==0||Ve?{snapshot:new ViewSnapshot(this.query,e.eu,Re,Ce,e.mutatedKeys,$e===0,Ve,!1,!!Te&&Te.resumeToken.approximateByteSize()>0),_u:De}:{_u:De}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=__PRIVATE_documentKeySet(),this.eu.forEach(Te=>{this.au(Te.key)&&(this.Za=this.Za.add(Te.key))});const t=[];return e.forEach(Te=>{this.Za.has(Te)||t.push(new __PRIVATE_RemovedLimboDocument(Te))}),this.Za.forEach(Te=>{e.has(Te)||t.push(new __PRIVATE_AddedLimboDocument(Te))}),t}uu(e){this.Ha=e.qs,this.Za=__PRIVATE_documentKeySet();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ViewSnapshot.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const nn="SyncEngine";class __PRIVATE_QueryView{constructor(e,t,Te){this.query=e,this.targetId=t,this.view=Te}}class LimboResolution{constructor(e){this.key=e,this.lu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,t,Te,Ee,Re,Ce){this.localStore=e,this.remoteStore=t,this.eventManager=Te,this.sharedClientState=Ee,this.currentUser=Re,this.maxConcurrentLimboResolutions=Ce,this.hu={},this.Pu=new ObjectMap(De=>__PRIVATE_canonifyQuery(De),__PRIVATE_queryEquals),this.Tu=new Map,this.Iu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.Au=new __PRIVATE_ReferenceSet,this.Ru={},this.Vu=new Map,this.mu=__PRIVATE_TargetIdGenerator.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function __PRIVATE_syncEngineListen(n,e,t=!0){const Te=__PRIVATE_ensureWatchCallbacks(n);let Ee;const Re=Te.Pu.get(e);return Re?(Te.sharedClientState.addLocalQueryTarget(Re.targetId),Ee=Re.view.cu()):Ee=await __PRIVATE_allocateTargetAndMaybeListen(Te,e,t,!0),Ee}async function __PRIVATE_triggerRemoteStoreListen(n,e){const t=__PRIVATE_ensureWatchCallbacks(n);await __PRIVATE_allocateTargetAndMaybeListen(t,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(n,e,t,Te){const Ee=await __PRIVATE_localStoreAllocateTarget(n.localStore,__PRIVATE_queryToTarget(e)),Re=Ee.targetId,Ce=n.sharedClientState.addLocalQueryTarget(Re,t);let De;return Te&&(De=await __PRIVATE_initializeViewAndComputeSnapshot(n,e,Re,Ce==="current",Ee.resumeToken)),n.isPrimaryClient&&t&&__PRIVATE_remoteStoreListen(n.remoteStore,Ee),De}async function __PRIVATE_initializeViewAndComputeSnapshot(n,e,t,Te,Ee){n.gu=(Me,Oe,Ue)=>async function(He,Ge,Ke,Xe){let Je=Ge.view.nu(Ke);Je.Ds&&(Je=await __PRIVATE_localStoreExecuteQuery(He.localStore,Ge.query,!1).then(({documents:gn})=>Ge.view.nu(gn,Je)));const un=Xe&&Xe.targetChanges.get(Ge.targetId),fn=Xe&&Xe.targetMismatches.get(Ge.targetId)!=null,yn=Ge.view.applyChanges(Je,He.isPrimaryClient,un,fn);return __PRIVATE_updateTrackedLimbos(He,Ge.targetId,yn._u),yn.snapshot}(n,Me,Oe,Ue);const Re=await __PRIVATE_localStoreExecuteQuery(n.localStore,e,!0),Ce=new __PRIVATE_View(e,Re.qs),De=Ce.nu(Re.documents),$e=TargetChange.createSynthesizedTargetChangeForCurrentChange(t,Te&&n.onlineState!=="Offline",Ee),Ve=Ce.applyChanges(De,n.isPrimaryClient,$e);__PRIVATE_updateTrackedLimbos(n,t,Ve._u);const Be=new __PRIVATE_QueryView(e,t,Ce);return n.Pu.set(e,Be),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),Ve.snapshot}async function __PRIVATE_syncEngineUnlisten(n,e,t){const Te=__PRIVATE_debugCast(n),Ee=Te.Pu.get(e),Re=Te.Tu.get(Ee.targetId);if(Re.length>1)return Te.Tu.set(Ee.targetId,Re.filter(Ce=>!__PRIVATE_queryEquals(Ce,e))),void Te.Pu.delete(e);Te.isPrimaryClient?(Te.sharedClientState.removeLocalQueryTarget(Ee.targetId),Te.sharedClientState.isActiveQueryTarget(Ee.targetId)||await __PRIVATE_localStoreReleaseTarget(Te.localStore,Ee.targetId,!1).then(()=>{Te.sharedClientState.clearQueryState(Ee.targetId),t&&__PRIVATE_remoteStoreUnlisten(Te.remoteStore,Ee.targetId),__PRIVATE_removeAndCleanupTarget(Te,Ee.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(Te,Ee.targetId),await __PRIVATE_localStoreReleaseTarget(Te.localStore,Ee.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(n,e){const t=__PRIVATE_debugCast(n),Te=t.Pu.get(e),Ee=t.Tu.get(Te.targetId);t.isPrimaryClient&&Ee.length===1&&(t.sharedClientState.removeLocalQueryTarget(Te.targetId),__PRIVATE_remoteStoreUnlisten(t.remoteStore,Te.targetId))}async function __PRIVATE_syncEngineWrite(n,e,t){const Te=__PRIVATE_syncEngineEnsureWriteCallbacks(n);try{const Ee=await function(Ce,De){const $e=__PRIVATE_debugCast(Ce),Ve=Timestamp.now(),Be=De.reduce((Ue,ze)=>Ue.add(ze.key),__PRIVATE_documentKeySet());let Me,Oe;return $e.persistence.runTransaction("Locally write mutations","readwrite",Ue=>{let ze=__PRIVATE_mutableDocumentMap(),He=__PRIVATE_documentKeySet();return $e.Os.getEntries(Ue,Be).next(Ge=>{ze=Ge,ze.forEach((Ke,Xe)=>{Xe.isValidDocument()||(He=He.add(Ke))})}).next(()=>$e.localDocuments.getOverlayedDocuments(Ue,ze)).next(Ge=>{Me=Ge;const Ke=[];for(const Xe of De){const Je=__PRIVATE_mutationExtractBaseValue(Xe,Me.get(Xe.key).overlayedDocument);Je!=null&&Ke.push(new __PRIVATE_PatchMutation(Xe.key,Je,__PRIVATE_extractFieldMask(Je.value.mapValue),Precondition.exists(!0)))}return $e.mutationQueue.addMutationBatch(Ue,Ve,Ke,De)}).next(Ge=>{Oe=Ge;const Ke=Ge.applyToLocalDocumentSet(Me,He);return $e.documentOverlayCache.saveOverlays(Ue,Ge.batchId,Ke)})}).then(()=>({batchId:Oe.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Me)}))}(Te.localStore,e);Te.sharedClientState.addPendingMutation(Ee.batchId),function(Ce,De,$e){let Ve=Ce.Ru[Ce.currentUser.toKey()];Ve||(Ve=new SortedMap(__PRIVATE_primitiveComparator)),Ve=Ve.insert(De,$e),Ce.Ru[Ce.currentUser.toKey()]=Ve}(Te,Ee.batchId,t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(Te,Ee.changes),await __PRIVATE_fillWritePipeline(Te.remoteStore)}catch(Ee){const Re=__PRIVATE_wrapInUserErrorIfRecoverable(Ee,"Failed to persist write");t.reject(Re)}}async function __PRIVATE_syncEngineApplyRemoteEvent(n,e){const t=__PRIVATE_debugCast(n);try{const Te=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(t.localStore,e);e.targetChanges.forEach((Ee,Re)=>{const Ce=t.Eu.get(Re);Ce&&(__PRIVATE_hardAssert(Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size<=1,22616),Ee.addedDocuments.size>0?Ce.lu=!0:Ee.modifiedDocuments.size>0?__PRIVATE_hardAssert(Ce.lu,14607):Ee.removedDocuments.size>0&&(__PRIVATE_hardAssert(Ce.lu,42227),Ce.lu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,Te,e)}catch(Te){await __PRIVATE_ignoreIfPrimaryLeaseLoss(Te)}}function __PRIVATE_syncEngineApplyOnlineStateChange(n,e,t){const Te=__PRIVATE_debugCast(n);if(Te.isPrimaryClient&&t===0||!Te.isPrimaryClient&&t===1){const Ee=[];Te.Pu.forEach((Re,Ce)=>{const De=Ce.view.va(e);De.snapshot&&Ee.push(De.snapshot)}),function(Ce,De){const $e=__PRIVATE_debugCast(Ce);$e.onlineState=De;let Ve=!1;$e.queries.forEach((Be,Me)=>{for(const Oe of Me.wa)Oe.va(De)&&(Ve=!0)}),Ve&&__PRIVATE_raiseSnapshotsInSyncEvent($e)}(Te.eventManager,e),Ee.length&&Te.hu.J_(Ee),Te.onlineState=e,Te.isPrimaryClient&&Te.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(n,e,t){const Te=__PRIVATE_debugCast(n);Te.sharedClientState.updateQueryState(e,"rejected",t);const Ee=Te.Eu.get(e),Re=Ee&&Ee.key;if(Re){let Ce=new SortedMap(DocumentKey.comparator);Ce=Ce.insert(Re,MutableDocument.newNoDocument(Re,SnapshotVersion.min()));const De=__PRIVATE_documentKeySet().add(Re),$e=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),Ce,De);await __PRIVATE_syncEngineApplyRemoteEvent(Te,$e),Te.du=Te.du.remove(Re),Te.Eu.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(Te)}else await __PRIVATE_localStoreReleaseTarget(Te.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(Te,e,t)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(n,e){const t=__PRIVATE_debugCast(n),Te=e.batch.batchId;try{const Ee=await __PRIVATE_localStoreAcknowledgeBatch(t.localStore,e);__PRIVATE_processUserCallback(t,Te,null),__PRIVATE_triggerPendingWritesCallbacks(t,Te),t.sharedClientState.updateMutationState(Te,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,Ee)}catch(Ee){await __PRIVATE_ignoreIfPrimaryLeaseLoss(Ee)}}async function __PRIVATE_syncEngineRejectFailedWrite(n,e,t){const Te=__PRIVATE_debugCast(n);try{const Ee=await function(Ce,De){const $e=__PRIVATE_debugCast(Ce);return $e.persistence.runTransaction("Reject batch","readwrite-primary",Ve=>{let Be;return $e.mutationQueue.lookupMutationBatch(Ve,De).next(Me=>(__PRIVATE_hardAssert(Me!==null,37113),Be=Me.keys(),$e.mutationQueue.removeMutationBatch(Ve,Me))).next(()=>$e.mutationQueue.performConsistencyCheck(Ve)).next(()=>$e.documentOverlayCache.removeOverlaysForBatchId(Ve,Be,De)).next(()=>$e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Ve,Be)).next(()=>$e.localDocuments.getDocuments(Ve,Be))})}(Te.localStore,e);__PRIVATE_processUserCallback(Te,e,t),__PRIVATE_triggerPendingWritesCallbacks(Te,e),Te.sharedClientState.updateMutationState(e,"rejected",t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(Te,Ee)}catch(Ee){await __PRIVATE_ignoreIfPrimaryLeaseLoss(Ee)}}function __PRIVATE_triggerPendingWritesCallbacks(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function __PRIVATE_processUserCallback(n,e,t){const Te=__PRIVATE_debugCast(n);let Ee=Te.Ru[Te.currentUser.toKey()];if(Ee){const Re=Ee.get(e);Re&&(t?Re.reject(t):Re.resolve(),Ee=Ee.remove(e)),Te.Ru[Te.currentUser.toKey()]=Ee}}function __PRIVATE_removeAndCleanupTarget(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const Te of n.Tu.get(e))n.Pu.delete(Te),t&&n.hu.pu(Te,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(Te=>{n.Au.containsKey(Te)||__PRIVATE_removeLimboTarget(n,Te)})}function __PRIVATE_removeLimboTarget(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(__PRIVATE_remoteStoreUnlisten(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_updateTrackedLimbos(n,e,t){for(const Te of t)Te instanceof __PRIVATE_AddedLimboDocument?(n.Au.addReference(Te.key,e),__PRIVATE_trackLimboChange(n,Te)):Te instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(nn,"Document no longer in limbo: "+Te.key),n.Au.removeReference(Te.key,e),n.Au.containsKey(Te.key)||__PRIVATE_removeLimboTarget(n,Te.key)):fail(19791,{yu:Te})}function __PRIVATE_trackLimboChange(n,e){const t=e.key,Te=t.path.canonicalString();n.du.get(t)||n.Iu.has(Te)||(__PRIVATE_logDebug(nn,"New document in limbo: "+t),n.Iu.add(Te),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_pumpEnqueuedLimboResolutions(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new DocumentKey(ResourcePath.fromString(e)),Te=n.mu.next();n.Eu.set(Te,new LimboResolution(t)),n.du=n.du.insert(t,Te),__PRIVATE_remoteStoreListen(n.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(t.path)),Te,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ue))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,e,t){const Te=__PRIVATE_debugCast(n),Ee=[],Re=[],Ce=[];Te.Pu.isEmpty()||(Te.Pu.forEach((De,$e)=>{Ce.push(Te.gu($e,e,t).then(Ve=>{var Be;if((Ve||t)&&Te.isPrimaryClient){const Me=Ve?!Ve.fromCache:(Be=t?.targetChanges.get($e.targetId))===null||Be===void 0?void 0:Be.current;Te.sharedClientState.updateQueryState($e.targetId,Me?"current":"not-current")}if(Ve){Ee.push(Ve);const Me=__PRIVATE_LocalViewChanges.Es($e.targetId,Ve);Re.push(Me)}}))}),await Promise.all(Ce),Te.hu.J_(Ee),await async function($e,Ve){const Be=__PRIVATE_debugCast($e);try{await Be.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>PersistencePromise.forEach(Ve,Oe=>PersistencePromise.forEach(Oe.Is,Ue=>Be.persistence.referenceDelegate.addReference(Me,Oe.targetId,Ue)).next(()=>PersistencePromise.forEach(Oe.ds,Ue=>Be.persistence.referenceDelegate.removeReference(Me,Oe.targetId,Ue)))))}catch(Me){if(!__PRIVATE_isIndexedDbTransactionError(Me))throw Me;__PRIVATE_logDebug(Qt$2,"Failed to update sequence numbers: "+Me)}for(const Me of Ve){const Oe=Me.targetId;if(!Me.fromCache){const Ue=Be.Fs.get(Oe),ze=Ue.snapshotVersion,He=Ue.withLastLimboFreeSnapshotVersion(ze);Be.Fs=Be.Fs.insert(Oe,He)}}}(Te.localStore,Re))}async function __PRIVATE_syncEngineHandleCredentialChange(n,e){const t=__PRIVATE_debugCast(n);if(!t.currentUser.isEqual(e)){__PRIVATE_logDebug(nn,"User change. New user:",e.toKey());const Te=await __PRIVATE_localStoreHandleUserChange(t.localStore,e);t.currentUser=e,function(Re,Ce){Re.Vu.forEach(De=>{De.forEach($e=>{$e.reject(new FirestoreError(N$2.CANCELLED,Ce))})}),Re.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,Te.removedBatchIds,Te.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,Te.Bs)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(n,e){const t=__PRIVATE_debugCast(n),Te=t.Eu.get(e);if(Te&&Te.lu)return __PRIVATE_documentKeySet().add(Te.key);{let Ee=__PRIVATE_documentKeySet();const Re=t.Tu.get(e);if(!Re)return Ee;for(const Ce of Re){const De=t.Pu.get(Ce);Ee=Ee.unionWith(De.view.tu)}return Ee}}function __PRIVATE_ensureWatchCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.hu.J_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.hu.pu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Du(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Vi,this.serializer)}bu(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const Te=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(Te,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(Te=>__PRIVATE_MemoryLruDelegate.Vi(Te,t),this.serializer)}}class OnlineComponentProvider{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=Te=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,Te,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const t=__PRIVATE_newSerializer(e.databaseInfo.databaseId),Te=function(Re){return new __PRIVATE_WebChannelConnection(Re)}(e.databaseInfo);return function(Re,Ce,De,$e){return new __PRIVATE_DatastoreImpl(Re,Ce,De,$e)}(e.authCredentials,e.appCheckCredentials,Te,t)}createRemoteStore(e){return function(Te,Ee,Re,Ce,De){return new __PRIVATE_RemoteStoreImpl(Te,Ee,Re,Ce,De)}(this.localStore,this.datastore,e.asyncQueue,t=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,t,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,t){return function(Ee,Re,Ce,De,$e,Ve,Be){const Me=new __PRIVATE_SyncEngineImpl(Ee,Re,Ce,De,$e,Ve);return Be&&(Me.fu=!0),Me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(Ee){const Re=__PRIVATE_debugCast(Ee);__PRIVATE_logDebug(Xt$2,"RemoteStore shutting down."),Re.Ia.add(5),await __PRIVATE_disableNetworkInternal(Re),Re.Ea.shutdown(),Re.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(e,t,Te,Ee,Re){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=Te,this.databaseInfo=Ee,this.user=User$1.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=Re,this.authCredentials.start(Te,async Ce=>{__PRIVATE_logDebug(rn,"Received user=",Ce.uid),await this.authCredentialListener(Ce),this.user=Ce}),this.appCheckCredentials.start(Te,Ce=>(__PRIVATE_logDebug(rn,"Received new app check token=",Ce),this.appCheckCredentialListener(Ce,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const Te=__PRIVATE_wrapInUserErrorIfRecoverable(t,"Failed to shutdown persistence");e.reject(Te)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let Te=t.initialUser;n.setCredentialChangeListener(async Ee=>{Te.isEqual(Ee)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,Ee),Te=Ee)}),e.persistence.setDatabaseDeletedListener(()=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{__PRIVATE_logDebug("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(Ee=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion failed",Ee)})}),n._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress();const t=await __PRIVATE_ensureOfflineComponents(n);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(Te=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,Te)),n.setAppCheckTokenChangeListener((Te,Ee)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,Ee)),n._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(Ee){return Ee.name==="FirebaseError"?Ee.code===N$2.FAILED_PRECONDITION||Ee.code===N$2.UNIMPLEMENTED:!(typeof DOMException<"u"&&Ee instanceof DOMException)||Ee.code===22||Ee.code===20||Ee.code===11}(t))throw t;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+t),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return n._offlineComponents}async function __PRIVATE_ensureOnlineComponents(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,n._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,new OnlineComponentProvider))),n._onlineComponents}function __PRIVATE_getSyncEngine(n){return __PRIVATE_ensureOnlineComponents(n).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(n){const e=await __PRIVATE_ensureOnlineComponents(n),t=e.eventManager;return t.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),t.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),t}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(n,e,t={}){const Te=new __PRIVATE_Deferred;return n.asyncQueue.enqueueAndForget(async()=>function(Re,Ce,De,$e,Ve){const Be=new __PRIVATE_AsyncObserver({next:Oe=>{Be.Ou(),Ce.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(Re,Me));const Ue=Oe.docs.has(De);!Ue&&Oe.fromCache?Ve.reject(new FirestoreError(N$2.UNAVAILABLE,"Failed to get document because the client is offline.")):Ue&&Oe.fromCache&&$e&&$e.source==="server"?Ve.reject(new FirestoreError(N$2.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Ve.resolve(Oe)},error:Oe=>Ve.reject(Oe)}),Me=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(De.path),Be,{includeMetadataChanges:!0,ka:!0});return __PRIVATE_eventManagerListen(Re,Me)}(await __PRIVATE_getEventManager(n),n.asyncQueue,e,t,Te)),Te.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(e){var t,Te;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on,this.ssl=_n}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_n;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt$2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot$2)throw new FirestoreError(N$2.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((Te=e.experimentalLongPollingOptions)!==null&&Te!==void 0?Te:{}),function(Re){if(Re.timeoutSeconds!==void 0){if(isNaN(Re.timeoutSeconds))throw new FirestoreError(N$2.INVALID_ARGUMENT,`invalid long polling timeout: ${Re.timeoutSeconds} (must not be NaN)`);if(Re.timeoutSeconds<5)throw new FirestoreError(N$2.INVALID_ARGUMENT,`invalid long polling timeout: ${Re.timeoutSeconds} (minimum allowed value is 5)`);if(Re.timeoutSeconds>30)throw new FirestoreError(N$2.INVALID_ARGUMENT,`invalid long polling timeout: ${Re.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(Te,Ee){return Te.timeoutSeconds===Ee.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,t,Te,Ee){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=Te,this._app=Ee,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$2.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$2.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(Te){if(!Te)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(Te.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(Te.sessionIndex||"0",Te.iamToken||null,Te.authTokenFactory||null);case"provider":return Te.client;default:throw new FirestoreError(N$2.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const Te=sn.get(t);Te&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(t),Te.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(n,e,t,Te={}){var Ee;n=__PRIVATE_cast(n,Firestore$1);const Re=isCloudWorkstation(e),Ce=n._getSettings(),De=Object.assign(Object.assign({},Ce),{emulatorOptions:n._getEmulatorOptions()}),$e=`${e}:${t}`;Re&&(pingServer(`https://${$e}`),updateEmulatorBanner("Firestore",!0)),Ce.host!==on&&Ce.host!==$e&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const Ve=Object.assign(Object.assign({},Ce),{host:$e,ssl:Re,emulatorOptions:Te});if(!deepEqual(Ve,De)&&(n._setSettings(Ve),Te.mockUserToken)){let Be,Me;if(typeof Te.mockUserToken=="string")Be=Te.mockUserToken,Me=User$1.MOCK_USER;else{Be=createMockUserToken(Te.mockUserToken,(Ee=n._app)===null||Ee===void 0?void 0:Ee.options.projectId);const Oe=Te.mockUserToken.sub||Te.mockUserToken.user_id;if(!Oe)throw new FirestoreError(N$2.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Me=new User$1(Oe)}n._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(Be,Me))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,t,Te){this.converter=t,this._query=Te,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,t,Te){this.converter=t,this._key=Te,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,Te){if(__PRIVATE_validateJSON(t,DocumentReference._jsonSchema))return new DocumentReference(e,Te||null,new DocumentKey(ResourcePath.fromString(t.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,t,Te){super(e,t,__PRIVATE_newQueryForPath(Te)),this._path=Te,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(n,e,...t){if(n=getModularInstance(n),__PRIVATE_validateNonEmptyArgument("collection","path",e),n instanceof Firestore$1){const Te=ResourcePath.fromString(e,...t);return __PRIVATE_validateCollectionPath(Te),new CollectionReference(n,null,Te)}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N$2.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const Te=n._path.child(ResourcePath.fromString(e,...t));return __PRIVATE_validateCollectionPath(Te),new CollectionReference(n.firestore,null,Te)}}function doc(n,e,...t){if(n=getModularInstance(n),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),n instanceof Firestore$1){const Te=ResourcePath.fromString(e,...t);return __PRIVATE_validateDocumentPath(Te),new DocumentReference(n,null,new DocumentKey(Te))}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N$2.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const Te=n._path.child(ResourcePath.fromString(e,...t));return __PRIVATE_validateDocumentPath(Te),new DocumentReference(n.firestore,n instanceof CollectionReference?n.converter:null,new DocumentKey(Te))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.oc=()=>{const Te=getDocument();Te&&__PRIVATE_logDebug(an,"Visibility state changed to "+Te.visibilityState),this.F_.y_()},this._c=e;const t=getDocument();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=getDocument();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new __PRIVATE_Deferred;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(Te=>{throw this.tc=Te,this.nc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(Te)),Te}).then(Te=>(this.nc=!1,Te))));return this._c=t,t}enqueueAfterDelay(e,t,Te){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const Ee=DelayedOperation.createAndSchedule(this,e,t,Te,Re=>this.lc(Re));return this.ec.push(Ee),Ee}ac(){this.tc&&fail(47125,{hc:__PRIVATE_getMessageOrStack(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,Te)=>t.targetTimeMs-Te.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function __PRIVATE_getMessageOrStack(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(n){return function(t,Te){if(typeof t!="object"||t===null)return!1;const Ee=t;for(const Re of Te)if(Re in Ee&&typeof Ee[Re]=="function")return!0;return!1}(n,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,t,Te,Ee){super(e,t,Te,Ee),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=Ee?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(n,e){const t=typeof n=="object"?n:getApp(),Te=typeof n=="string"?n:ut$1,Ee=_getProvider(t,"firestore").getImmediate({identifier:Te});if(!Ee._initialized){const Re=getDefaultEmulatorHostnameAndPort("firestore");Re&&connectFirestoreEmulator(Ee,...Re)}return Ee}function ensureFirestoreConfigured(n){if(n._terminated)throw new FirestoreError(N$2.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||__PRIVATE_configureFirestore(n),n._firestoreClient}function __PRIVATE_configureFirestore(n){var e,t,Te;const Ee=n._freezeSettings(),Re=function(De,$e,Ve,Be){return new DatabaseInfo(De,$e,Ve,Be.host,Be.ssl,Be.experimentalForceLongPolling,Be.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(Be.experimentalLongPollingOptions),Be.useFetchStreams,Be.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,Ee);n._componentsProvider||!((t=Ee.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((Te=Ee.localCache)===null||Te===void 0)&&Te._onlineComponentProvider)&&(n._componentsProvider={_offline:Ee.localCache._offlineComponentProvider,_online:Ee.localCache._onlineComponentProvider}),n._firestoreClient=new FirestoreClient(n._authCredentials,n._appCheckCredentials,n._queue,Re,n._componentsProvider&&function(De){const $e=De?._online.build();return{_offline:De?._offline.build($e),_online:$e}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(t){throw new FirestoreError(N$2.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(Te,Ee){if(Te.length!==Ee.length)return!1;for(let Re=0;Re<Te.length;++Re)if(Te[Re]!==Ee[Re])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new VectorValue(e.vectorValues);throw new FirestoreError(N$2.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=/^__.*__$/;class ParsedSetData{constructor(e,t,Te){this.data=e,this.fieldMask=t,this.fieldTransforms=Te}toMutation(e,t){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,t,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,t,Te){this.data=e,this.fieldMask=t,this.fieldTransforms=Te}toMutation(e,t){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function __PRIVATE_isWrite(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ec:n})}}class __PRIVATE_ParseContextImpl{constructor(e,t,Te,Ee,Re,Ce){this.settings=e,this.databaseId=t,this.serializer=Te,this.ignoreUndefinedProperties=Ee,Re===void 0&&this.Ac(),this.fieldTransforms=Re||[],this.fieldMask=Ce||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const Te=(t=this.path)===null||t===void 0?void 0:t.child(e),Ee=this.Rc({path:Te,mc:!1});return Ee.fc(e),Ee}gc(e){var t;const Te=(t=this.path)===null||t===void 0?void 0:t.child(e),Ee=this.Rc({path:Te,mc:!1});return Ee.Ac(),Ee}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ec)&&cn.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,t,Te){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=Te||__PRIVATE_newSerializer(e)}Dc(e,t,Te,Ee=!1){return new __PRIVATE_ParseContextImpl({Ec:e,methodName:t,bc:Te,path:FieldPath$1.emptyPath(),mc:!1,Sc:Ee},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(n){const e=n._freezeSettings(),t=__PRIVATE_newSerializer(n._databaseId);return new __PRIVATE_UserDataReader(n._databaseId,!!e.ignoreUndefinedProperties,t)}function __PRIVATE_parseSetData(n,e,t,Te,Ee,Re={}){const Ce=n.Dc(Re.merge||Re.mergeFields?2:0,e,t,Ee);__PRIVATE_validatePlainObject("Data must be an object, but it was:",Ce,Te);const De=__PRIVATE_parseObject(Te,Ce);let $e,Ve;if(Re.merge)$e=new FieldMask(Ce.fieldMask),Ve=Ce.fieldTransforms;else if(Re.mergeFields){const Be=[];for(const Me of Re.mergeFields){const Oe=__PRIVATE_fieldPathFromArgument$1(e,Me,t);if(!Ce.contains(Oe))throw new FirestoreError(N$2.INVALID_ARGUMENT,`Field '${Oe}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(Be,Oe)||Be.push(Oe)}$e=new FieldMask(Be),Ve=Ce.fieldTransforms.filter(Me=>$e.covers(Me.field))}else $e=null,Ve=Ce.fieldTransforms;return new ParsedSetData(new ObjectValue$1(De),$e,Ve)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseUpdateData(n,e,t,Te){const Ee=n.Dc(1,e,t);__PRIVATE_validatePlainObject("Data must be an object, but it was:",Ee,Te);const Re=[],Ce=ObjectValue$1.empty();forEach$1(Te,($e,Ve)=>{const Be=__PRIVATE_fieldPathFromDotSeparatedString(e,$e,t);Ve=getModularInstance(Ve);const Me=Ee.gc(Be);if(Ve instanceof __PRIVATE_DeleteFieldValueImpl)Re.push(Be);else{const Oe=__PRIVATE_parseData(Ve,Me);Oe!=null&&(Re.push(Be),Ce.set(Be,Oe))}});const De=new FieldMask(Re);return new ParsedUpdateData(Ce,De,Ee.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(n,e,t,Te,Ee,Re){const Ce=n.Dc(1,e,t),De=[__PRIVATE_fieldPathFromArgument$1(e,Te,t)],$e=[Ee];if(Re.length%2!=0)throw new FirestoreError(N$2.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Oe=0;Oe<Re.length;Oe+=2)De.push(__PRIVATE_fieldPathFromArgument$1(e,Re[Oe])),$e.push(Re[Oe+1]);const Ve=[],Be=ObjectValue$1.empty();for(let Oe=De.length-1;Oe>=0;--Oe)if(!__PRIVATE_fieldMaskContains(Ve,De[Oe])){const Ue=De[Oe];let ze=$e[Oe];ze=getModularInstance(ze);const He=Ce.gc(Ue);if(ze instanceof __PRIVATE_DeleteFieldValueImpl)Ve.push(Ue);else{const Ge=__PRIVATE_parseData(ze,He);Ge!=null&&(Ve.push(Ue),Be.set(Ue,Ge))}}const Me=new FieldMask(Ve);return new ParsedUpdateData(Be,Me,Ce.fieldTransforms)}function __PRIVATE_parseQueryValue(n,e,t,Te=!1){return __PRIVATE_parseData(t,n.Dc(Te?4:3,e))}function __PRIVATE_parseData(n,e){if(__PRIVATE_looksLikeJsonObject(n=getModularInstance(n)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,n),__PRIVATE_parseObject(n,e);if(n instanceof FieldValue)return function(Te,Ee){if(!__PRIVATE_isWrite(Ee.Ec))throw Ee.wc(`${Te._methodName}() can only be used with update() and set()`);if(!Ee.path)throw Ee.wc(`${Te._methodName}() is not currently supported inside arrays`);const Re=Te._toFieldTransform(Ee);Re&&Ee.fieldTransforms.push(Re)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(Te,Ee){const Re=[];let Ce=0;for(const De of Te){let $e=__PRIVATE_parseData(De,Ee.yc(Ce));$e==null&&($e={nullValue:"NULL_VALUE"}),Re.push($e),Ce++}return{arrayValue:{values:Re}}}(n,e)}return function(Te,Ee){if((Te=getModularInstance(Te))===null)return{nullValue:"NULL_VALUE"};if(typeof Te=="number")return toNumber(Ee.serializer,Te);if(typeof Te=="boolean")return{booleanValue:Te};if(typeof Te=="string")return{stringValue:Te};if(Te instanceof Date){const Re=Timestamp.fromDate(Te);return{timestampValue:toTimestamp(Ee.serializer,Re)}}if(Te instanceof Timestamp){const Re=new Timestamp(Te.seconds,1e3*Math.floor(Te.nanoseconds/1e3));return{timestampValue:toTimestamp(Ee.serializer,Re)}}if(Te instanceof GeoPoint)return{geoPointValue:{latitude:Te.latitude,longitude:Te.longitude}};if(Te instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(Ee.serializer,Te._byteString)};if(Te instanceof DocumentReference){const Re=Ee.databaseId,Ce=Te.firestore._databaseId;if(!Ce.isEqual(Re))throw Ee.wc(`Document reference is for database ${Ce.projectId}/${Ce.database} but should be for database ${Re.projectId}/${Re.database}`);return{referenceValue:__PRIVATE_toResourceName(Te.firestore._databaseId||Ee.databaseId,Te._key.path)}}if(Te instanceof VectorValue)return function(Ce,De){return{mapValue:{fields:{[ct$1]:{stringValue:Pt$2},[Tt$1]:{arrayValue:{values:Ce.toArray().map(Ve=>{if(typeof Ve!="number")throw De.wc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(De.serializer,Ve)})}}}}}}(Te,Ee);throw Ee.wc(`Unsupported field value: ${__PRIVATE_valueDescription(Te)}`)}(n,e)}function __PRIVATE_parseObject(n,e){const t={};return isEmpty$1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach$1(n,(Te,Ee)=>{const Re=__PRIVATE_parseData(Ee,e.Vc(Te));Re!=null&&(t[Te]=Re)}),{mapValue:{fields:t}}}function __PRIVATE_looksLikeJsonObject(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Timestamp||n instanceof GeoPoint||n instanceof Bytes||n instanceof DocumentReference||n instanceof FieldValue||n instanceof VectorValue)}function __PRIVATE_validatePlainObject(n,e,t){if(!__PRIVATE_looksLikeJsonObject(t)||!__PRIVATE_isPlainObject(t)){const Te=__PRIVATE_valueDescription(t);throw Te==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+Te)}}function __PRIVATE_fieldPathFromArgument$1(n,e,t){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(n,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",n,!1,void 0,t)}const ln$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(n,e,t){if(e.search(ln$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function __PRIVATE_createError(n,e,t,Te,Ee){const Re=Te&&!Te.isEmpty(),Ce=Ee!==void 0;let De=`Function ${e}() called with invalid data`;t&&(De+=" (via `toFirestore()`)"),De+=". ";let $e="";return(Re||Ce)&&($e+=" (found",Re&&($e+=` in field ${Te}`),Ce&&($e+=` in document ${Ee}`),$e+=")"),new FirestoreError(N$2.INVALID_ARGUMENT,De+n+$e)}function __PRIVATE_fieldMaskContains(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,t,Te,Ee,Re){this._firestore=e,this._userDataWriter=t,this._key=Te,this._document=Ee,this._converter=Re}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(n,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(n,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new FirestoreError(N$2.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(n,e,...t){let Te=[];e instanceof AppliableConstraint&&Te.push(e),Te=Te.concat(t),function(Re){const Ce=Re.filter($e=>$e instanceof QueryCompositeFilterConstraint).length,De=Re.filter($e=>$e instanceof QueryFieldFilterConstraint).length;if(Ce>1||Ce>0&&De>0)throw new FirestoreError(N$2.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(Te);for(const Ee of Te)n=Ee._apply(n);return n}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,t,Te){super(),this._field=e,this._op=t,this._value=Te,this.type="where"}static _create(e,t,Te){return new QueryFieldFilterConstraint(e,t,Te)}_apply(e){const t=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,t),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,t))}_parse(e){const t=__PRIVATE_newUserDataReader(e.firestore);return function(Re,Ce,De,$e,Ve,Be,Me){let Oe;if(Ve.isKeyField()){if(Be==="array-contains"||Be==="array-contains-any")throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Be}' queries on documentId().`);if(Be==="in"||Be==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(Me,Be);const ze=[];for(const He of Me)ze.push(__PRIVATE_parseDocumentIdValue($e,Re,He));Oe={arrayValue:{values:ze}}}else Oe=__PRIVATE_parseDocumentIdValue($e,Re,Me)}else Be!=="in"&&Be!=="not-in"&&Be!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(Me,Be),Oe=__PRIVATE_parseQueryValue(De,Ce,Me,Be==="in"||Be==="not-in");return FieldFilter.create(Ve,Be,Oe)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new QueryCompositeFilterConstraint(e,t)}_parse(e){const t=this._queryConstraints.map(Te=>Te._parse(e)).filter(Te=>Te.getFilters().length>0);return t.length===1?t[0]:CompositeFilter.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(Ee,Re){let Ce=Ee;const De=Re.getFlattenedFilters();for(const $e of De)__PRIVATE_validateNewFieldFilter(Ce,$e),Ce=__PRIVATE_queryWithAddedFilter(Ce,$e)}(e._query,t),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QueryOrderByConstraint(e,t)}_apply(e){const t=function(Ee,Re,Ce){if(Ee.startAt!==null)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(Ee.endAt!==null)throw new FirestoreError(N$2.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(Re,Ce)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(Ee,Re){const Ce=Ee.explicitOrderBy.concat([Re]);return new __PRIVATE_QueryImpl(Ee.path,Ee.collectionGroup,Ce,Ee.filters.slice(),Ee.limit,Ee.limitType,Ee.startAt,Ee.endAt)}(e._query,t))}}function orderBy(n,e="asc"){const t=e,Te=__PRIVATE_fieldPathFromArgument("orderBy",n);return QueryOrderByConstraint._create(Te,t)}function __PRIVATE_parseDocumentIdValue(n,e,t){if(typeof(t=getModularInstance(t))=="string"){if(t==="")throw new FirestoreError(N$2.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&t.indexOf("/")!==-1)throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const Te=e.path.child(ResourcePath.fromString(t));if(!DocumentKey.isDocumentKey(Te))throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${Te}' is not because it has an odd number of segments (${Te.length}).`);return __PRIVATE_refValue(n,new DocumentKey(Te))}if(t instanceof DocumentReference)return __PRIVATE_refValue(n,t._key);throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(t)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(n,e){if(!Array.isArray(n)||n.length===0)throw new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(n,e){const t=function(Ee,Re){for(const Ce of Ee)for(const De of Ce.getFlattenedFilters())if(Re.indexOf(De.op)>=0)return De.op;return null}(n.filters,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$2.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,t="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const Te={};return forEach$1(e,(Ee,Re)=>{Te[Ee]=this.convertValue(Re,t)}),Te}convertVectorValue(e){var t,Te,Ee;const Re=(Ee=(Te=(t=e.fields)===null||t===void 0?void 0:t[Tt$1].arrayValue)===null||Te===void 0?void 0:Te.values)===null||Ee===void 0?void 0:Ee.map(Ce=>__PRIVATE_normalizeNumber(Ce.doubleValue));return new VectorValue(Re)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,t){return(e.values||[]).map(Te=>this.convertValue(Te,t))}convertServerTimestamp(e,t){switch(t){case"previous":const Te=__PRIVATE_getPreviousValue(e);return Te==null?null:this.convertValue(Te,t);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const t=__PRIVATE_normalizeTimestamp(e);return new Timestamp(t.seconds,t.nanos)}convertDocumentKey(e,t){const Te=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(Te),9688,{name:e});const Ee=new DatabaseId(Te.get(1),Te.get(3)),Re=new DocumentKey(Te.popFirst(5));return Ee.isEqual(t)||__PRIVATE_logError(`Document ${Re} contains a document reference within a different database (${Ee.projectId}/${Ee.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),Re}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(n,e,t){let Te;return Te=n?n.toFirestore(e):e,Te}class SnapshotMetadata{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,t,Te,Ee,Re,Ce){super(e,t,Te,Ee,Ce),this._firestore=e,this._firestoreImpl=e,this.metadata=Re}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const Te=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(Te!==null)return this._userDataWriter.convertValue(Te,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$2.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=DocumentSnapshot._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,t,Te,Ee){this._firestore=e,this._userDataWriter=t,this._snapshot=Ee,this.metadata=new SnapshotMetadata(Ee.hasPendingWrites,Ee.fromCache),this.query=Te}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(Te=>{e.call(t,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,Te.key,Te,new SnapshotMetadata(this._snapshot.mutatedKeys.has(Te.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$2.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(Ee,Re){if(Ee._snapshot.oldDocs.isEmpty()){let Ce=0;return Ee._snapshot.docChanges.map(De=>{const $e=new QueryDocumentSnapshot(Ee._firestore,Ee._userDataWriter,De.doc.key,De.doc,new SnapshotMetadata(Ee._snapshot.mutatedKeys.has(De.doc.key),Ee._snapshot.fromCache),Ee.query.converter);return De.doc,{type:"added",doc:$e,oldIndex:-1,newIndex:Ce++}})}{let Ce=Ee._snapshot.oldDocs;return Ee._snapshot.docChanges.filter(De=>Re||De.type!==3).map(De=>{const $e=new QueryDocumentSnapshot(Ee._firestore,Ee._userDataWriter,De.doc.key,De.doc,new SnapshotMetadata(Ee._snapshot.mutatedKeys.has(De.doc.key),Ee._snapshot.fromCache),Ee.query.converter);let Ve=-1,Be=-1;return De.type!==0&&(Ve=Ce.indexOf(De.doc.key),Ce=Ce.delete(De.doc.key)),De.type!==1&&(Ce=Ce.add(De.doc),Be=Ce.indexOf(De.doc.key)),{type:__PRIVATE_resultChangeType(De.type),doc:$e,oldIndex:Ve,newIndex:Be}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$2.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],Te=[],Ee=[];return this.docs.forEach(Re=>{Re._document!==null&&(t.push(Re._document),Te.push(this._userDataWriter.convertObjectMap(Re._document.data.value.mapValue.fields,"previous")),Ee.push(Re.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(n){n=__PRIVATE_cast(n,DocumentReference);const e=__PRIVATE_cast(n.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),n._key).then(t=>__PRIVATE_convertToDocSnapshot(e,n,t))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,t)}}function setDoc(n,e,t){n=__PRIVATE_cast(n,DocumentReference);const Te=__PRIVATE_cast(n.firestore,Firestore),Ee=__PRIVATE_applyFirestoreDataConverter(n.converter,e);return executeWrite(Te,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(Te),"setDoc",n._key,Ee,n.converter!==null,t).toMutation(n._key,Precondition.none())])}function updateDoc(n,e,t,...Te){n=__PRIVATE_cast(n,DocumentReference);const Ee=__PRIVATE_cast(n.firestore,Firestore),Re=__PRIVATE_newUserDataReader(Ee);let Ce;return Ce=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(Re,"updateDoc",n._key,e,t,Te):__PRIVATE_parseUpdateData(Re,"updateDoc",n._key,e),executeWrite(Ee,[Ce.toMutation(n._key,Precondition.exists(!0))])}function addDoc(n,e){const t=__PRIVATE_cast(n.firestore,Firestore),Te=doc(n),Ee=__PRIVATE_applyFirestoreDataConverter(n.converter,e);return executeWrite(t,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(n.firestore),"addDoc",Te._key,Ee,n.converter!==null,{}).toMutation(Te._key,Precondition.exists(!1))]).then(()=>Te)}function onSnapshot(n,...e){var t,Te,Ee;n=getModularInstance(n);let Re={includeMetadataChanges:!1,source:"default"},Ce=0;typeof e[Ce]!="object"||__PRIVATE_isPartialObserver(e[Ce])||(Re=e[Ce++]);const De={includeMetadataChanges:Re.includeMetadataChanges,source:Re.source};if(__PRIVATE_isPartialObserver(e[Ce])){const Me=e[Ce];e[Ce]=(t=Me.next)===null||t===void 0?void 0:t.bind(Me),e[Ce+1]=(Te=Me.error)===null||Te===void 0?void 0:Te.bind(Me),e[Ce+2]=(Ee=Me.complete)===null||Ee===void 0?void 0:Ee.bind(Me)}let $e,Ve,Be;if(n instanceof DocumentReference)Ve=__PRIVATE_cast(n.firestore,Firestore),Be=__PRIVATE_newQueryForPath(n._key.path),$e={next:Me=>{e[Ce]&&e[Ce](__PRIVATE_convertToDocSnapshot(Ve,n,Me))},error:e[Ce+1],complete:e[Ce+2]};else{const Me=__PRIVATE_cast(n,Query);Ve=__PRIVATE_cast(Me.firestore,Firestore),Be=Me._query;const Oe=new __PRIVATE_ExpUserDataWriter(Ve);$e={next:Ue=>{e[Ce]&&e[Ce](new QuerySnapshot(Ve,Oe,Me,Ue))},error:e[Ce+1],complete:e[Ce+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(n._query)}return function(Oe,Ue,ze,He){const Ge=new __PRIVATE_AsyncObserver(He),Ke=new __PRIVATE_QueryListener(Ue,Ge,ze);return Oe.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(Oe),Ke)),()=>{Ge.Ou(),Oe.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(Oe),Ke))}}(ensureFirestoreConfigured(Ve),Be,De,$e)}function executeWrite(n,e){return function(Te,Ee){const Re=new __PRIVATE_Deferred;return Te.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(Te),Ee,Re)),Re.promise}(ensureFirestoreConfigured(n),e)}function __PRIVATE_convertToDocSnapshot(n,e,t){const Te=t.docs.get(e._key),Ee=new __PRIVATE_ExpUserDataWriter(n);return new DocumentSnapshot(n,Ee,e._key,Te,new SnapshotMetadata(t.hasPendingWrites,t.fromCache),e.converter)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}(function(e,t=!0){(function(Ee){x$2=Ee})(SDK_VERSION),_registerComponent(new Component("firestore",(Te,{instanceIdentifier:Ee,options:Re})=>{const Ce=Te.getProvider("app").getImmediate(),De=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(Te.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(Ce,Te.getProvider("app-check-internal")),function(Ve,Be){if(!Object.prototype.hasOwnProperty.apply(Ve.options,["projectId"]))throw new FirestoreError(N$2.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(Ve.options.projectId,Be)}(Ce,Ee),Ce);return Re=Object.assign({useFetchStreams:t},Re),De._setSettings(Re),De},"PUBLIC").setMultipleInstances(!0)),registerVersion(F$2,M$1,e),registerVersion(F$2,M$1,"esm2017")})();const firebaseConfig={apiKey:"AIzaSyCHS52OJz8dlhTOA3BFv3lhTT02v6BfZM8",authDomain:"edgex-e6582.firebaseapp.com",projectId:"edgex-e6582",storageBucket:"edgex-e6582.appspot.com",messagingSenderId:"1005678739291",appId:"1:1005678739291:web:29360b6d2d6f2ef884e47e",measurementId:"G-MX6KJMJH62"},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app),googleProvider=new GoogleAuthProvider;googleProvider.addScope("profile");googleProvider.addScope("email");googleProvider.setCustomParameters({prompt:"select_account"});function r(n){var e,t,Te="";if(typeof n=="string"||typeof n=="number")Te+=n;else if(typeof n=="object")if(Array.isArray(n)){var Ee=n.length;for(e=0;e<Ee;e++)n[e]&&(t=r(n[e]))&&(Te&&(Te+=" "),Te+=t)}else for(t in n)n[t]&&(Te&&(Te+=" "),Te+=t);return Te}function clsx(){for(var n,e,t=0,Te="",Ee=arguments.length;t<Ee;t++)(n=arguments[t])&&(e=r(n))&&(Te&&(Te+=" "),Te+=e);return Te}function Mt$1(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Mt$1(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$1=n=>typeof n=="number"&&!isNaN(n),N$1=n=>typeof n=="string",P$1=n=>typeof n=="function",mt$1=n=>N$1(n)||L$1(n),B$1=n=>N$1(n)||P$1(n)?n:null,pt$1=(n,e)=>n===!1||L$1(n)&&n>0?n:e,z$1=n=>reactExports.isValidElement(n)||N$1(n)||P$1(n)||L$1(n);function Z$1(n,e,t=300){let{scrollHeight:Te,style:Ee}=n;requestAnimationFrame(()=>{Ee.minHeight="initial",Ee.height=Te+"px",Ee.transition=`all ${t}ms`,requestAnimationFrame(()=>{Ee.height="0",Ee.padding="0",Ee.margin="0",setTimeout(e,t)})})}function $$1({enter:n,exit:e,appendPosition:t=!1,collapse:Te=!0,collapseDuration:Ee=300}){return function({children:Re,position:Ce,preventExitTransition:De,done:$e,nodeRef:Ve,isIn:Be,playToast:Me}){let Oe=t?`${n}--${Ce}`:n,Ue=t?`${e}--${Ce}`:e,ze=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let He=Ve.current,Ge=Oe.split(" "),Ke=Xe=>{Xe.target===Ve.current&&(Me(),He.removeEventListener("animationend",Ke),He.removeEventListener("animationcancel",Ke),ze.current===0&&Xe.type!=="animationcancel"&&He.classList.remove(...Ge))};He.classList.add(...Ge),He.addEventListener("animationend",Ke),He.addEventListener("animationcancel",Ke)},[]),reactExports.useEffect(()=>{let He=Ve.current,Ge=()=>{He.removeEventListener("animationend",Ge),Te?Z$1(He,$e,Ee):$e()};Be||(De?Ge():(ze.current=1,He.className+=` ${Ue}`,He.addEventListener("animationend",Ge)))},[Be]),React.createElement(React.Fragment,null,Re)}}function J$1(n,e){return{content:tt$1(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function tt$1(n,e,t=!1){return reactExports.isValidElement(n)&&!N$1(n.type)?reactExports.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):P$1(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function yt$1({closeToast:n,theme:e,ariaLabel:t="close"}){return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:Te=>{Te.stopPropagation(),n(!0)},"aria-label":t},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt$1({delay:n,isRunning:e,closeToast:t,type:Te="default",hide:Ee,className:Re,controlledProgress:Ce,progress:De,rtl:$e,isIn:Ve,theme:Be}){let Me=Ee||Ce&&De===0,Oe={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};Ce&&(Oe.transform=`scaleX(${De})`);let Ue=clsx("Toastify__progress-bar",Ce?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Be}`,`Toastify__progress-bar--${Te}`,{"Toastify__progress-bar--rtl":$e}),ze=P$1(Re)?Re({rtl:$e,type:Te,defaultClassName:Ue}):clsx(Ue,Re),He={[Ce&&De>=1?"onTransitionEnd":"onAnimationEnd"]:Ce&&De<1?null:()=>{Ve&&t()}};return React.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":Me},React.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Be} Toastify__progress-bar--${Te}`}),React.createElement("div",{role:"progressbar","aria-hidden":Me?"true":"false","aria-label":"notification timer",className:ze,style:Oe,...He}))}var Xt$1=1,at$1=()=>`${Xt$1++}`;function _t$1(n,e,t){let Te=1,Ee=0,Re=[],Ce=[],De=e,$e=new Map,Ve=new Set,Be=Xe=>(Ve.add(Xe),()=>Ve.delete(Xe)),Me=()=>{Ce=Array.from($e.values()),Ve.forEach(Xe=>Xe())},Oe=({containerId:Xe,toastId:Je,updateId:un})=>{let fn=Xe?Xe!==n:n!==1,yn=$e.has(Je)&&un==null;return fn||yn},Ue=(Xe,Je)=>{$e.forEach(un=>{var fn;(Je==null||Je===un.props.toastId)&&((fn=un.toggle)==null||fn.call(un,Xe))})},ze=Xe=>{var Je,un;(un=(Je=Xe.props)==null?void 0:Je.onClose)==null||un.call(Je,Xe.removalReason),Xe.isActive=!1},He=Xe=>{if(Xe==null)$e.forEach(ze);else{let Je=$e.get(Xe);Je&&ze(Je)}Me()},Ge=()=>{Ee-=Re.length,Re=[]},Ke=Xe=>{var Je,un;let{toastId:fn,updateId:yn}=Xe.props,gn=yn==null;Xe.staleId&&$e.delete(Xe.staleId),Xe.isActive=!0,$e.set(fn,Xe),Me(),t(J$1(Xe,gn?"added":"updated")),gn&&((un=(Je=Xe.props).onOpen)==null||un.call(Je))};return{id:n,props:De,observe:Be,toggle:Ue,removeToast:He,toasts:$e,clearQueue:Ge,buildToast:(Xe,Je)=>{if(Oe(Je))return;let{toastId:un,updateId:fn,data:yn,staleId:gn,delay:mn}=Je,dn=fn==null;dn&&Ee++;let vn={...De,style:De.toastStyle,key:Te++,...Object.fromEntries(Object.entries(Je).filter(([Tn,En])=>En!=null)),toastId:un,updateId:fn,data:yn,isIn:!1,className:B$1(Je.className||De.toastClassName),progressClassName:B$1(Je.progressClassName||De.progressClassName),autoClose:Je.isLoading?!1:pt$1(Je.autoClose,De.autoClose),closeToast(Tn){$e.get(un).removalReason=Tn,He(un)},deleteToast(){let Tn=$e.get(un);if(Tn!=null){if(t(J$1(Tn,"removed")),$e.delete(un),Ee--,Ee<0&&(Ee=0),Re.length>0){Ke(Re.shift());return}Me()}}};vn.closeButton=De.closeButton,Je.closeButton===!1||z$1(Je.closeButton)?vn.closeButton=Je.closeButton:Je.closeButton===!0&&(vn.closeButton=z$1(De.closeButton)?De.closeButton:!0);let bn={content:Xe,props:vn,staleId:gn};De.limit&&De.limit>0&&Ee>De.limit&&dn?Re.push(bn):L$1(mn)?setTimeout(()=>{Ke(bn)},mn):Ke(bn)},setProps(Xe){De=Xe},setToggle:(Xe,Je)=>{let un=$e.get(Xe);un&&(un.toggle=Je)},isToastActive:Xe=>{var Je;return(Je=$e.get(Xe))==null?void 0:Je.isActive},getSnapshot:()=>Ce}}var I$1=new Map,F$1=[],st$1=new Set,Vt$1=n=>st$1.forEach(e=>e(n)),bt$1=()=>I$1.size>0;function Qt$1(){F$1.forEach(n=>nt$1(n.content,n.options)),F$1=[]}var vt$1=(n,{containerId:e})=>{var t;return(t=I$1.get(e||1))==null?void 0:t.toasts.get(n)};function X$2(n,e){var t;if(e)return!!((t=I$1.get(e))!=null&&t.isToastActive(n));let Te=!1;return I$1.forEach(Ee=>{Ee.isToastActive(n)&&(Te=!0)}),Te}function ht$1(n){if(!bt$1()){F$1=F$1.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||mt$1(n))I$1.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=I$1.get(n.containerId);e?e.removeToast(n.id):I$1.forEach(t=>{t.removeToast(n.id)})}}var Ct$1=(n={})=>{I$1.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function nt$1(n,e){z$1(n)&&(bt$1()||F$1.push({content:n,options:e}),I$1.forEach(t=>{t.buildToast(n,e)}))}function xt$1(n){var e;(e=I$1.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function rt$1(n,e){I$1.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function Et$1(n){let e=n.containerId||1;return{subscribe(t){let Te=_t$1(e,n,Vt$1);I$1.set(e,Te);let Ee=Te.observe(t);return Qt$1(),()=>{Ee(),I$1.delete(e)}},setProps(t){var Te;(Te=I$1.get(e))==null||Te.setProps(t)},getSnapshot(){var t;return(t=I$1.get(e))==null?void 0:t.getSnapshot()}}}function Pt$1(n){return st$1.add(n),()=>{st$1.delete(n)}}function Wt$1(n){return n&&(N$1(n.toastId)||L$1(n.toastId))?n.toastId:at$1()}function U$1(n,e){return nt$1(n,e),e.toastId}function V$1(n,e){return{...e,type:e&&e.type||n,toastId:Wt$1(e)}}function Q$1(n){return(e,t)=>U$1(e,V$1(n,t))}function y$1(n,e){return U$1(n,V$1("default",e))}y$1.loading=(n,e)=>U$1(n,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function Gt$1(n,{pending:e,error:t,success:Te},Ee){let Re;e&&(Re=N$1(e)?y$1.loading(e,Ee):y$1.loading(e.render,{...Ee,...e}));let Ce={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},De=(Ve,Be,Me)=>{if(Be==null){y$1.dismiss(Re);return}let Oe={type:Ve,...Ce,...Ee,data:Me},Ue=N$1(Be)?{render:Be}:Be;return Re?y$1.update(Re,{...Oe,...Ue}):y$1(Ue.render,{...Oe,...Ue}),Me},$e=P$1(n)?n():n;return $e.then(Ve=>De("success",Te,Ve)).catch(Ve=>De("error",t,Ve)),$e}y$1.promise=Gt$1;y$1.success=Q$1("success");y$1.info=Q$1("info");y$1.error=Q$1("error");y$1.warning=Q$1("warning");y$1.warn=y$1.warning;y$1.dark=(n,e)=>U$1(n,V$1("default",{theme:"dark",...e}));function qt$1(n){ht$1(n)}y$1.dismiss=qt$1;y$1.clearWaitingQueue=Ct$1;y$1.isActive=X$2;y$1.update=(n,e={})=>{let t=vt$1(n,e);if(t){let{props:Te,content:Ee}=t,Re={delay:100,...Te,...e,toastId:e.toastId||n,updateId:at$1()};Re.toastId!==n&&(Re.staleId=n);let Ce=Re.render||Ee;delete Re.render,U$1(Ce,Re)}};y$1.done=n=>{y$1.update(n,{progress:1})};y$1.onChange=Pt$1;y$1.play=n=>rt$1(!0,n);y$1.pause=n=>rt$1(!1,n);function It$1(n){var e;let{subscribe:t,getSnapshot:Te,setProps:Ee}=reactExports.useRef(Et$1(n)).current;Ee(n);let Re=(e=reactExports.useSyncExternalStore(t,Te,Te))==null?void 0:e.slice();function Ce(De){if(!Re)return[];let $e=new Map;return n.newestOnTop&&Re.reverse(),Re.forEach(Ve=>{let{position:Be}=Ve.props;$e.has(Be)||$e.set(Be,[]),$e.get(Be).push(Ve)}),Array.from($e,Ve=>De(Ve[0],Ve[1]))}return{getToastToRender:Ce,isToastActive:X$2,count:Re?.length}}function At$1(n){let[e,t]=reactExports.useState(!1),[Te,Ee]=reactExports.useState(!1),Re=reactExports.useRef(null),Ce=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:De,pauseOnHover:$e,closeToast:Ve,onClick:Be,closeOnClick:Me}=n;xt$1({id:n.toastId,containerId:n.containerId,fn:t}),reactExports.useEffect(()=>{if(n.pauseOnFocusLoss)return Oe(),()=>{Ue()}},[n.pauseOnFocusLoss]);function Oe(){document.hasFocus()||Ke(),window.addEventListener("focus",Ge),window.addEventListener("blur",Ke)}function Ue(){window.removeEventListener("focus",Ge),window.removeEventListener("blur",Ke)}function ze(gn){if(n.draggable===!0||n.draggable===gn.pointerType){Xe();let mn=Re.current;Ce.canCloseOnClick=!0,Ce.canDrag=!0,mn.style.transition="none",n.draggableDirection==="x"?(Ce.start=gn.clientX,Ce.removalDistance=mn.offsetWidth*(n.draggablePercent/100)):(Ce.start=gn.clientY,Ce.removalDistance=mn.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function He(gn){let{top:mn,bottom:dn,left:vn,right:bn}=Re.current.getBoundingClientRect();gn.nativeEvent.type!=="touchend"&&n.pauseOnHover&&gn.clientX>=vn&&gn.clientX<=bn&&gn.clientY>=mn&&gn.clientY<=dn?Ke():Ge()}function Ge(){t(!0)}function Ke(){t(!1)}function Xe(){Ce.didMove=!1,document.addEventListener("pointermove",un),document.addEventListener("pointerup",fn)}function Je(){document.removeEventListener("pointermove",un),document.removeEventListener("pointerup",fn)}function un(gn){let mn=Re.current;if(Ce.canDrag&&mn){Ce.didMove=!0,e&&Ke(),n.draggableDirection==="x"?Ce.delta=gn.clientX-Ce.start:Ce.delta=gn.clientY-Ce.start,Ce.start!==gn.clientX&&(Ce.canCloseOnClick=!1);let dn=n.draggableDirection==="x"?`${Ce.delta}px, var(--y)`:`0, calc(${Ce.delta}px + var(--y))`;mn.style.transform=`translate3d(${dn},0)`,mn.style.opacity=`${1-Math.abs(Ce.delta/Ce.removalDistance)}`}}function fn(){Je();let gn=Re.current;if(Ce.canDrag&&Ce.didMove&&gn){if(Ce.canDrag=!1,Math.abs(Ce.delta)>Ce.removalDistance){Ee(!0),n.closeToast(!0),n.collapseAll();return}gn.style.transition="transform 0.2s, opacity 0.2s",gn.style.removeProperty("transform"),gn.style.removeProperty("opacity")}}let yn={onPointerDown:ze,onPointerUp:He};return De&&$e&&(yn.onMouseEnter=Ke,n.stacked||(yn.onMouseLeave=Ge)),Me&&(yn.onClick=gn=>{Be&&Be(gn),Ce.canCloseOnClick&&Ve(!0)}),{playToast:Ge,pauseToast:Ke,isRunning:e,preventExitTransition:Te,toastRef:Re,eventHandlers:yn}}var Ot$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G$1=({theme:n,type:e,isLoading:t,...Te})=>React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...Te});function ao(n){return React.createElement(G$1,{...n},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(n){return React.createElement(G$1,{...n},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(n){return React.createElement(G$1,{...n},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(n){return React.createElement(G$1,{...n},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React.createElement("div",{className:"Toastify__spinner"})}var W$1={info:so,warning:ao,success:no,error:ro,spinner:io},lo=n=>n in W$1;function Nt$1({theme:n,type:e,isLoading:t,icon:Te}){let Ee=null,Re={theme:n,type:e};return Te===!1||(P$1(Te)?Ee=Te({...Re,isLoading:t}):reactExports.isValidElement(Te)?Ee=reactExports.cloneElement(Te,Re):t?Ee=W$1.spinner():lo(e)&&(Ee=W$1[e](Re))),Ee}var wt$1=n=>{let{isRunning:e,preventExitTransition:t,toastRef:Te,eventHandlers:Ee,playToast:Re}=At$1(n),{closeButton:Ce,children:De,autoClose:$e,onClick:Ve,type:Be,hideProgressBar:Me,closeToast:Oe,transition:Ue,position:ze,className:He,style:Ge,progressClassName:Ke,updateId:Xe,role:Je,progress:un,rtl:fn,toastId:yn,deleteToast:gn,isIn:mn,isLoading:dn,closeOnClick:vn,theme:bn,ariaLabel:Tn}=n,En=clsx("Toastify__toast",`Toastify__toast-theme--${bn}`,`Toastify__toast--${Be}`,{"Toastify__toast--rtl":fn},{"Toastify__toast--close-on-click":vn}),In=P$1(He)?He({rtl:fn,position:ze,type:Be,defaultClassName:En}):clsx(En,He),Nn=Nt$1(n),On=!!un||!$e,Fn={closeToast:Oe,type:Be,theme:bn},$n=null;return Ce===!1||(P$1(Ce)?$n=Ce(Fn):reactExports.isValidElement(Ce)?$n=reactExports.cloneElement(Ce,Fn):$n=yt$1(Fn)),React.createElement(Ue,{isIn:mn,done:gn,position:ze,preventExitTransition:t,nodeRef:Te,playToast:Re},React.createElement("div",{id:yn,tabIndex:0,onClick:Ve,"data-in":mn,className:In,...Ee,style:Ge,ref:Te,...mn&&{role:Je,"aria-label":Tn}},Nn!=null&&React.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!dn})},Nn),tt$1(De,n,!e),$n,!n.customProgressBar&&React.createElement(gt$1,{...Xe&&!On?{key:`p-${Xe}`}:{},rtl:fn,theme:bn,delay:$e,isRunning:e,isIn:mn,closeToast:Oe,hide:Me,type:Be,className:Ke,controlledProgress:On,progress:un||0})))},K$1=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),lt$1=$$1(K$1("bounce",!0)),_o={position:"top-right",transition:lt$1,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function Lt$1(n){let e={..._o,...n},t=n.stacked,[Te,Ee]=reactExports.useState(!0),Re=reactExports.useRef(null),{getToastToRender:Ce,isToastActive:De,count:$e}=It$1(e),{className:Ve,style:Be,rtl:Me,containerId:Oe,hotKeys:Ue}=e;function ze(Ge){let Ke=clsx("Toastify__toast-container",`Toastify__toast-container--${Ge}`,{"Toastify__toast-container--rtl":Me});return P$1(Ve)?Ve({position:Ge,rtl:Me,defaultClassName:Ke}):clsx(Ke,B$1(Ve))}function He(){t&&(Ee(!0),y$1.play())}return Ot$1(()=>{var Ge;if(t){let Ke=Re.current.querySelectorAll('[data-in="true"]'),Xe=12,Je=(Ge=e.position)==null?void 0:Ge.includes("top"),un=0,fn=0;Array.from(Ke).reverse().forEach((yn,gn)=>{let mn=yn;mn.classList.add("Toastify__toast--stacked"),gn>0&&(mn.dataset.collapsed=`${Te}`),mn.dataset.pos||(mn.dataset.pos=Je?"top":"bot");let dn=un*(Te?.2:1)+(Te?0:Xe*gn);mn.style.setProperty("--y",`${Je?dn:dn*-1}px`),mn.style.setProperty("--g",`${Xe}`),mn.style.setProperty("--s",`${1-(Te?fn:0)}`),un+=mn.offsetHeight,fn+=.025})}},[Te,$e,t]),reactExports.useEffect(()=>{function Ge(Ke){var Xe;let Je=Re.current;Ue(Ke)&&((Xe=Je.querySelector('[tabIndex="0"]'))==null||Xe.focus(),Ee(!1),y$1.pause()),Ke.key==="Escape"&&(document.activeElement===Je||Je!=null&&Je.contains(document.activeElement))&&(Ee(!0),y$1.play())}return document.addEventListener("keydown",Ge),()=>{document.removeEventListener("keydown",Ge)}},[Ue]),React.createElement("section",{ref:Re,className:"Toastify",id:Oe,onMouseEnter:()=>{t&&(Ee(!1),y$1.pause())},onMouseLeave:He,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},Ce((Ge,Ke)=>{let Xe=Ke.length?{...Be}:{...Be,pointerEvents:"none"};return React.createElement("div",{tabIndex:-1,className:ze(Ge),"data-stacked":t,style:Xe,key:`c-${Ge}`},Ke.map(({content:Je,props:un})=>React.createElement(wt$1,{...un,stacked:t,collapseAll:He,isIn:De(un.toastId,un.containerId),key:`t-${un.key}`},Je)))}))}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase$1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,Te)=>Te?Te.toUpperCase():t.toLowerCase()),toPascalCase=n=>{const e=toCamelCase$1(n);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...n)=>n.filter((e,t,Te)=>!!e&&e.trim()!==""&&Te.indexOf(e)===t).join(" ").trim(),hasA11yProp=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:Te,className:Ee="",children:Re,iconNode:Ce,...De},$e)=>reactExports.createElement("svg",{ref:$e,...defaultAttributes,width:e,height:e,stroke:n,strokeWidth:Te?Number(t)*24/Number(e):t,className:mergeClasses("lucide",Ee),...!Re&&!hasA11yProp(De)&&{"aria-hidden":"true"},...De},[...Ce.map(([Ve,Be])=>reactExports.createElement(Ve,Be)),...Array.isArray(Re)?Re:[Re]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(n,e)=>{const t=reactExports.forwardRef(({className:Te,...Ee},Re)=>reactExports.createElement(Icon,{ref:Re,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(n))}`,`lucide-${n}`,Te),...Ee}));return t.displayName=toPascalCase(n),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$r);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$q);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Award=createLucideIcon("award",__iconNode$p);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$o);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Brain=createLucideIcon("brain",__iconNode$n);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],CircleArrowRight=createLucideIcon("circle-arrow-right",__iconNode$m);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],CirclePlus=createLucideIcon("circle-plus",__iconNode$l);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],CircleStop=createLucideIcon("circle-stop",__iconNode$k);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CircleUser=createLucideIcon("circle-user",__iconNode$j);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$i);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$h);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$g);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],GraduationCap=createLucideIcon("graduation-cap",__iconNode$f);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$e);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$d);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$c);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$b);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Menu=createLucideIcon("menu",__iconNode$a);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],MessageSquare=createLucideIcon("message-square",__iconNode$9);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Mic=createLucideIcon("mic",__iconNode$8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Moon=createLucideIcon("moon",__iconNode$7);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],NotebookPen=createLucideIcon("notebook-pen",__iconNode$6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],SendHorizontal=createLucideIcon("send-horizontal",__iconNode$5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$1=createLucideIcon("x",__iconNode),Navbar=({isAuthenticated:n,onLogout:e,user:t,theme:Te,toggleTheme:Ee})=>{const[Re,Ce]=reactExports.useState(!1),[De,$e]=reactExports.useState(!1),[Ve,Be]=reactExports.useState(!1),Me=useNavigate(),Oe=useLocation(),Ue=[{id:"home",label:"Home",icon:House,path:"/",description:"Return to main dashboard"},{id:"careercrack",label:"CareerCrack",icon:Brain,path:"/careercrack",description:"AI-powered career advice"},{id:"moodmirror",label:"MoodMirror",icon:MessageSquare,path:"/moodmirror",description:"Mental wellness companion"},{id:"smartnotes",label:"SmartNotes",icon:FileText,path:"/smartnotes",description:"Intelligent note-taking"},{id:"scholarships",label:"ScholarshipScout",icon:Award,path:"/scholarships",description:"Find scholarships"},{id:"voicefeedback",label:"VoiceFeedback",icon:Mic,path:"/voicefeedback",description:"Voice-powered insights"},{id:"resourcevault",label:"ResourceVault",icon:BookOpen,path:"/resourcevault",description:"Discover resources"}],He=(()=>{const yn=Oe.pathname,gn=Ue.find(mn=>mn.path===yn);return gn?gn.id:"home"})(),Ge=yn=>{Me(yn.path),Ce(!1)},Ke=async()=>{try{await signOut(auth),e&&e(),Me("/"),$e(!1),Ce(!1),Be(!1)}catch(yn){console.error("Logout error:",yn)}},Xe=()=>{Ce(yn=>{const gn=!yn;return gn?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),gn})},Je=()=>{$e(!De)};React.useEffect(()=>{const yn=gn=>{De&&!gn.target.closest(".profile-menu-container")&&$e(!1)};return document.addEventListener("mousedown",yn),()=>{document.removeEventListener("mousedown",yn)}},[De]);const un=()=>{const yn=Te==="dark",gn=Ee||(()=>{document.documentElement.classList.toggle("dark");try{const mn=document.documentElement.classList.contains("dark");localStorage.setItem("theme",mn?"dark":"light")}catch{}});return jsxRuntimeExports.jsx("button",{onClick:gn,className:"p-2 rounded-md text-purple-100 hover:text-white hover:bg-purple-700/30 transition-colors duration-200",title:"Toggle theme",children:yn?jsxRuntimeExports.jsx(Sun,{className:"h-5 w-5"}):jsxRuntimeExports.jsx(Moon,{className:"h-5 w-5"})})},fn=()=>t?jsxRuntimeExports.jsxs("div",{className:"relative profile-menu-container",children:[jsxRuntimeExports.jsx("button",{onClick:Je,className:"flex items-center justify-center p-2 bg-purple-700 hover:bg-purple-600 text-white rounded-full text-sm font-medium transition-colors duration-200 w-10 h-10",title:t.email||"User Profile",children:jsxRuntimeExports.jsx(CircleUser,{className:"h-6 w-6"})}),De&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 mt-2 py-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.email||"User"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Signed in"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Be(!0),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-4 w-4 mr-2"}),jsxRuntimeExports.jsx("span",{children:"Sign out"})]})]})]}):jsxRuntimeExports.jsxs(Link,{to:"/login",className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors duration-200",title:"Sign in to EDGEx",children:[jsxRuntimeExports.jsx(CircleUser,{className:"h-4 w-5"}),jsxRuntimeExports.jsx("span",{className:"hidden xl:block",children:"Sign In"})]});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("nav",{className:"bg-gradient-to-r from-purple-900 via-purple-800 to-indigo-900 border-b border-purple-700/30 sticky top-0 z-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16 gap-6",children:[jsxRuntimeExports.jsxs(Link,{to:"/",className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold text-white",children:["EDGE",jsxRuntimeExports.jsx("span",{className:"text-purple-300",children:"x"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-200 hidden sm:block",children:"AI Toolkit"})]})]}),jsxRuntimeExports.jsx("div",{className:"hidden lg:flex items-center space-x-2",children:Ue.map(yn=>{const gn=yn.icon,mn=He===yn.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>Ge(yn),className:`
           flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
           ${mn?"bg-purple-700 text-white":"text-purple-100 hover:text-white hover:bg-purple-700/50"}
          `,title:yn.description,children:[jsxRuntimeExports.jsx(gn,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden xl:block",children:yn.label})]},yn.id)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[un(),fn()]}),jsxRuntimeExports.jsx("div",{className:"flex items-center lg:hidden",children:un()}),jsxRuntimeExports.jsx("button",{onClick:Xe,className:"lg:hidden p-2 rounded-lg text-purple-100 hover:text-white hover:bg-purple-700/50 transition-colors duration-200","aria-label":"Toggle navigation menu",children:Re?jsxRuntimeExports.jsx(X$1,{className:"h-6 w-6"}):jsxRuntimeExports.jsx(Menu,{className:"h-6 w-6"})})]})]})}),jsxRuntimeExports.jsx("div",{className:`lg:hidden transition-all duration-300 ${Re?"max-h-screen opacity-100":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-1 bg-purple-900/95 backdrop-blur-sm border-t border-purple-700/30 overflow-y-auto max-h-[calc(100vh-4rem)]",children:[Ue.map(yn=>{const gn=yn.icon,mn=He===yn.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>Ge(yn),className:`
          w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all duration-200
          ${mn?"bg-purple-700 text-white":"text-purple-100 hover:text-white hover:bg-purple-700/50"}
         `,children:[jsxRuntimeExports.jsx(gn,{className:"h-5 w-5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:yn.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-purple-300",children:yn.description})]})]},yn.id)}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t border-purple-700/30",children:t?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-white truncate",children:t.email||"User"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-300",children:"Signed in"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Be(!0),className:"w-full flex items-center space-x-3 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Sign out"})]})]}):jsxRuntimeExports.jsxs(Link,{to:"/login",className:"w-full flex items-center space-x-3 px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors duration-200",onClick:()=>Ce(!1),children:[jsxRuntimeExports.jsx(CircleUser,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Sign In"})]})})]})}),Ve&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm z-50",onClick:()=>Be(!1),children:jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-purple-800 to-indigo-900 border border-purple-600/50 p-6 rounded-2xl shadow-2xl w-96 animate-fadeIn",onClick:yn=>yn.stopPropagation(),children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Log out"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-200 mb-6",children:"Are you sure you want to log out of EDGEx?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Be(!1),className:"px-4 py-2 rounded-lg bg-purple-700/40 text-purple-200 hover:bg-purple-600 hover:text-white transition-all duration-200",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Ke,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-medium transition-all duration-200 shadow-md",children:"Confirm"})]})]})})]})})};var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(n,e){if(n==null)return{};var t=_objectWithoutPropertiesLoose(n,e),Te,Ee;if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(n);for(Ee=0;Ee<Re.length;Ee++)Te=Re[Ee],!(e.indexOf(Te)>=0)&&Object.prototype.propertyIsEnumerable.call(n,Te)&&(t[Te]=n[Te])}return t}function _objectWithoutPropertiesLoose(n,e){if(n==null)return{};var t={};for(var Te in n)if(Object.prototype.hasOwnProperty.call(n,Te)){if(e.indexOf(Te)>=0)continue;t[Te]=n[Te]}return t}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var Te in t)Object.prototype.hasOwnProperty.call(t,Te)&&(n[Te]=t[Te])}return n},_extends.apply(this,arguments)}function ownKeys(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var Te=Object.getOwnPropertySymbols(n);e&&(Te=Te.filter(function(Ee){return Object.getOwnPropertyDescriptor(n,Ee).enumerable})),t.push.apply(t,Te)}return t}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(Te){_defineProperty(n,Te,t[Te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(Te){Object.defineProperty(n,Te,Object.getOwnPropertyDescriptor(t,Te))})}return n}function _defineProperty(n,e,t){return e=_toPropertyKey(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _toPropertyKey(n){var e=_toPrimitive(n,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var Te=t.call(n,e);if(typeof Te!="object")return Te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Tree2Element(n){return n&&n.map((e,t)=>React.createElement(e.tag,_objectSpread({key:t},e.attr),Tree2Element(e.child)))}function GenIcon(n){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},n.attr)},e),Tree2Element(n.child))}function IconBase(n){var e=t=>{var{attr:Te,size:Ee,title:Re}=n,Ce=_objectWithoutProperties(n,_excluded),De=Ee||t.size||"1em",$e;return t.className&&($e=t.className),n.className&&($e=($e?$e+" ":"")+n.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,Te,Ce,{className:$e,style:_objectSpread(_objectSpread({color:n.color||t.color},t.style),n.style),height:De,width:De,xmlns:"http://www.w3.org/2000/svg"}),Re&&React.createElement("title",null,Re),n.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,t=>e(t)):e(DefaultContext)}function FaGithub(n){return GenIcon({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function FaLinkedin(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function FaArrowUp(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(n)}function FaRobot(n){return GenIcon({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function FaUserCircle(n){return GenIcon({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(n)}const LayoutGroupContext=reactExports.createContext({});function useConstant(n){const e=reactExports.useRef(null);return e.current===null&&(e.current=n()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(n,e){n.indexOf(e)===-1&&n.push(e)}function removeItem(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const clamp=(n,e,t)=>t>e?e:t<n?n:t;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function isObject$1(n){return typeof n=="object"&&n!==null}const isZeroValueString=n=>/^0[^.\s]+$/u.test(n);function memo(n){let e;return()=>(e===void 0&&(e=n()),e)}const noop$1=n=>n,combineFunctions=(n,e)=>t=>e(n(t)),pipe=(...n)=>n.reduce(combineFunctions),progress=(n,e,t)=>{const Te=e-n;return Te===0?1:(t-n)/Te};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,t,Te){const Ee=this.subscriptions.length;if(Ee)if(Ee===1)this.subscriptions[0](e,t,Te);else for(let Re=0;Re<Ee;Re++){const Ce=this.subscriptions[Re];Ce&&Ce(e,t,Te)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=n=>n*1e3,millisecondsToSeconds=n=>n/1e3;function velocityPerSecond(n,e){return e?n*(1e3/e):0}const calcBezier=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(n,e,t,Te,Ee){let Re,Ce,De=0;do Ce=e+(t-e)/2,Re=calcBezier(Ce,Te,Ee)-n,Re>0?t=Ce:e=Ce;while(Math.abs(Re)>subdivisionPrecision&&++De<subdivisionMaxIterations);return Ce}function cubicBezier(n,e,t,Te){if(n===e&&t===Te)return noop$1;const Ee=Re=>binarySubdivide(Re,0,1,n,t);return Re=>Re===0||Re===1?Re:calcBezier(Ee(Re),e,Te)}const mirrorEasing=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,reverseEasing=n=>e=>1-n(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=n=>(n*=2)<1?.5*backIn(n):.5*(2-Math.pow(2,-10*(n-1))),circIn=n=>1-Math.sin(Math.acos(n)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=n=>Array.isArray(n)&&typeof n[0]!="number",isBezierDefinition=n=>Array.isArray(n)&&typeof n[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=n=>typeof n=="string",easingDefinitionToFunction=n=>{if(isBezierDefinition(n)){invariant(n.length===4);const[e,t,Te,Ee]=n;return cubicBezier(e,t,Te,Ee)}else if(isValidEasing(n))return easingLookup[n];return n},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(n,e){let t=new Set,Te=new Set,Ee=!1,Re=!1;const Ce=new WeakSet;let De={delta:0,timestamp:0,isProcessing:!1};function $e(Be){Ce.has(Be)&&(Ve.schedule(Be),n()),Be(De)}const Ve={schedule:(Be,Me=!1,Oe=!1)=>{const ze=Oe&&Ee?t:Te;return Me&&Ce.add(Be),ze.has(Be)||ze.add(Be),Be},cancel:Be=>{Te.delete(Be),Ce.delete(Be)},process:Be=>{if(De=Be,Ee){Re=!0;return}Ee=!0,[t,Te]=[Te,t],t.forEach($e),t.clear(),Ee=!1,Re&&(Re=!1,Ve.process(Be))}};return Ve}const maxElapsed$1=40;function createRenderBatcher(n,e){let t=!1,Te=!0;const Ee={delta:0,timestamp:0,isProcessing:!1},Re=()=>t=!0,Ce=stepsOrder.reduce((Je,un)=>(Je[un]=createRenderStep(Re),Je),{}),{setup:De,read:$e,resolveKeyframes:Ve,preUpdate:Be,update:Me,preRender:Oe,render:Ue,postRender:ze}=Ce,He=()=>{const Je=MotionGlobalConfig.useManualTiming?Ee.timestamp:performance.now();t=!1,MotionGlobalConfig.useManualTiming||(Ee.delta=Te?1e3/60:Math.max(Math.min(Je-Ee.timestamp,maxElapsed$1),1)),Ee.timestamp=Je,Ee.isProcessing=!0,De.process(Ee),$e.process(Ee),Ve.process(Ee),Be.process(Ee),Me.process(Ee),Oe.process(Ee),Ue.process(Ee),ze.process(Ee),Ee.isProcessing=!1,t&&e&&(Te=!1,n(He))},Ge=()=>{t=!0,Te=!0,Ee.isProcessing||n(He)};return{schedule:stepsOrder.reduce((Je,un)=>{const fn=Ce[un];return Je[un]=(yn,gn=!1,mn=!1)=>(t||Ge(),fn.schedule(yn,gn,mn)),Je},{}),cancel:Je=>{for(let un=0;un<stepsOrder.length;un++)Ce[stepsOrder[un]].cancel(Je)},state:Ee,steps:Ce}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:n=>{now=n,queueMicrotask(clearTime)}},checkStringStartsWith=n=>e=>typeof e=="string"&&e.startsWith(n),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=n=>startsAsVariableToken(n)?singleCssVariableRegex.test(n.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number$1={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},alpha={...number$1,transform:n=>clamp(0,1,n)},scale={...number$1,default:1},sanitize=n=>Math.round(n*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(n){return n==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(n,e)=>t=>!!(typeof t=="string"&&singleColorRegex.test(t)&&t.startsWith(n)||e&&!isNullish(t)&&Object.prototype.hasOwnProperty.call(t,e)),splitColor=(n,e,t)=>Te=>{if(typeof Te!="string")return Te;const[Ee,Re,Ce,De]=Te.match(floatRegex);return{[n]:parseFloat(Ee),[e]:parseFloat(Re),[t]:parseFloat(Ce),alpha:De!==void 0?parseFloat(De):1}},clampRgbUnit=n=>clamp(0,255,n),rgbUnit={...number$1,transform:n=>Math.round(clampRgbUnit(n))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:Te=1})=>"rgba("+rgbUnit.transform(n)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+sanitize(alpha.transform(Te))+")"};function parseHex(n){let e="",t="",Te="",Ee="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),Te=n.substring(5,7),Ee=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),Te=n.substring(3,4),Ee=n.substring(4,5),e+=e,t+=t,Te+=Te,Ee+=Ee),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(Te,16),alpha:Ee?parseInt(Ee,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:n=>percent.parse(n)/100,transform:n=>percent.transform(n*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:Te=1})=>"hsla("+Math.round(n)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(t))+", "+sanitize(alpha.transform(Te))+")"},color$1={test:n=>rgba.test(n)||hex.test(n)||hsla.test(n),parse:n=>rgba.test(n)?rgba.parse(n):hsla.test(n)?hsla.parse(n):hex.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?rgba.transform(n):hsla.transform(n),getAnimatableNone:n=>{const e=color$1.parse(n);return e.alpha=0,color$1.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(n){return isNaN(n)&&typeof n=="string"&&(n.match(floatRegex)?.length||0)+(n.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(n){const e=n.toString(),t=[],Te={color:[],number:[],var:[]},Ee=[];let Re=0;const De=e.replace(complexRegex,$e=>(color$1.test($e)?(Te.color.push(Re),Ee.push(COLOR_TOKEN),t.push(color$1.parse($e))):$e.startsWith(VAR_FUNCTION_TOKEN)?(Te.var.push(Re),Ee.push(VAR_TOKEN),t.push($e)):(Te.number.push(Re),Ee.push(NUMBER_TOKEN),t.push(parseFloat($e))),++Re,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:t,split:De,indexes:Te,types:Ee}}function parseComplexValue(n){return analyseComplexValue(n).values}function createTransformer(n){const{split:e,types:t}=analyseComplexValue(n),Te=e.length;return Ee=>{let Re="";for(let Ce=0;Ce<Te;Ce++)if(Re+=e[Ce],Ee[Ce]!==void 0){const De=t[Ce];De===NUMBER_TOKEN?Re+=sanitize(Ee[Ce]):De===COLOR_TOKEN?Re+=color$1.transform(Ee[Ce]):Re+=Ee[Ce]}return Re}}const convertNumbersToZero=n=>typeof n=="number"?0:color$1.test(n)?color$1.getAnimatableNone(n):n;function getAnimatableNone$1(n){const e=parseComplexValue(n);return createTransformer(n)(e.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function hslaToRgba({hue:n,saturation:e,lightness:t,alpha:Te}){n/=360,e/=100,t/=100;let Ee=0,Re=0,Ce=0;if(!e)Ee=Re=Ce=t;else{const De=t<.5?t*(1+e):t+e-t*e,$e=2*t-De;Ee=hueToRgb($e,De,n+1/3),Re=hueToRgb($e,De,n),Ce=hueToRgb($e,De,n-1/3)}return{red:Math.round(Ee*255),green:Math.round(Re*255),blue:Math.round(Ce*255),alpha:Te}}function mixImmediate(n,e){return t=>t>0?e:n}const mixNumber$1=(n,e,t)=>n+(e-n)*t,mixLinearColor=(n,e,t)=>{const Te=n*n,Ee=t*(e*e-Te)+Te;return Ee<0?0:Math.sqrt(Ee)},colorTypes=[hex,rgba,hsla],getColorType=n=>colorTypes.find(e=>e.test(n));function asRGBA(n){const e=getColorType(n);if(!e)return!1;let t=e.parse(n);return e===hsla&&(t=hslaToRgba(t)),t}const mixColor=(n,e)=>{const t=asRGBA(n),Te=asRGBA(e);if(!t||!Te)return mixImmediate(n,e);const Ee={...t};return Re=>(Ee.red=mixLinearColor(t.red,Te.red,Re),Ee.green=mixLinearColor(t.green,Te.green,Re),Ee.blue=mixLinearColor(t.blue,Te.blue,Re),Ee.alpha=mixNumber$1(t.alpha,Te.alpha,Re),rgba.transform(Ee))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(n,e){return invisibleValues.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function mixNumber(n,e){return t=>mixNumber$1(n,e,t)}function getMixer(n){return typeof n=="number"?mixNumber:typeof n=="string"?isCSSVariableToken(n)?mixImmediate:color$1.test(n)?mixColor:mixComplex:Array.isArray(n)?mixArray:typeof n=="object"?color$1.test(n)?mixColor:mixObject:mixImmediate}function mixArray(n,e){const t=[...n],Te=t.length,Ee=n.map((Re,Ce)=>getMixer(Re)(Re,e[Ce]));return Re=>{for(let Ce=0;Ce<Te;Ce++)t[Ce]=Ee[Ce](Re);return t}}function mixObject(n,e){const t={...n,...e},Te={};for(const Ee in t)n[Ee]!==void 0&&e[Ee]!==void 0&&(Te[Ee]=getMixer(n[Ee])(n[Ee],e[Ee]));return Ee=>{for(const Re in Te)t[Re]=Te[Re](Ee);return t}}function matchOrder(n,e){const t=[],Te={color:0,var:0,number:0};for(let Ee=0;Ee<e.values.length;Ee++){const Re=e.types[Ee],Ce=n.indexes[Re][Te[Re]],De=n.values[Ce]??0;t[Ee]=De,Te[Re]++}return t}const mixComplex=(n,e)=>{const t=complex.createTransformer(e),Te=analyseComplexValue(n),Ee=analyseComplexValue(e);return Te.indexes.var.length===Ee.indexes.var.length&&Te.indexes.color.length===Ee.indexes.color.length&&Te.indexes.number.length>=Ee.indexes.number.length?invisibleValues.has(n)&&!Ee.values.length||invisibleValues.has(e)&&!Te.values.length?mixVisibility(n,e):pipe(mixArray(matchOrder(Te,Ee),Ee.values),t):mixImmediate(n,e)};function mix(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?mixNumber$1(n,e,t):getMixer(n)(n,e)}const frameloopDriver=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>frame.update(e,t),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(n,e,t=10)=>{let Te="";const Ee=Math.max(Math.round(e/t),2);for(let Re=0;Re<Ee;Re++)Te+=Math.round(n(Re/(Ee-1))*1e4)/1e4+", ";return`linear(${Te.substring(0,Te.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(n){let e=0;const t=50;let Te=n.next(e);for(;!Te.done&&e<maxGeneratorDuration;)e+=t,Te=n.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(n,e=100,t){const Te=t({...n,keyframes:[0,e]}),Ee=Math.min(calcGeneratorDuration(Te),maxGeneratorDuration);return{type:"keyframes",ease:Re=>Te.next(Ee*Re).value/e,duration:millisecondsToSeconds(Ee)}}const velocitySampleDuration=5;function calcGeneratorVelocity(n,e,t){const Te=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(t-n(Te),e-Te)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:n=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:t=springDefaults.velocity,mass:Te=springDefaults.mass}){let Ee,Re,Ce=1-e;Ce=clamp(springDefaults.minDamping,springDefaults.maxDamping,Ce),n=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(n)),Ce<1?(Ee=Ve=>{const Be=Ve*Ce,Me=Be*n,Oe=Be-t,Ue=calcAngularFreq(Ve,Ce),ze=Math.exp(-Me);return safeMin-Oe/Ue*ze},Re=Ve=>{const Me=Ve*Ce*n,Oe=Me*t+t,Ue=Math.pow(Ce,2)*Math.pow(Ve,2)*n,ze=Math.exp(-Me),He=calcAngularFreq(Math.pow(Ve,2),Ce);return(-Ee(Ve)+safeMin>0?-1:1)*((Oe-Ue)*ze)/He}):(Ee=Ve=>{const Be=Math.exp(-Ve*n),Me=(Ve-t)*n+1;return-safeMin+Be*Me},Re=Ve=>{const Be=Math.exp(-Ve*n),Me=(t-Ve)*(n*n);return Be*Me});const De=5/n,$e=approximateRoot(Ee,Re,De);if(n=secondsToMilliseconds(n),isNaN($e))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:n};{const Ve=Math.pow($e,2)*Te;return{stiffness:Ve,damping:Ce*2*Math.sqrt(Te*Ve),duration:n}}}const rootIterations=12;function approximateRoot(n,e,t){let Te=t;for(let Ee=1;Ee<rootIterations;Ee++)Te=Te-n(Te)/e(Te);return Te}function calcAngularFreq(n,e){return n*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(n,e){return e.some(t=>n[t]!==void 0)}function getSpringOptions(n){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...n};if(!isSpringType(n,physicsKeys)&&isSpringType(n,durationKeys))if(n.visualDuration){const t=n.visualDuration,Te=2*Math.PI/(t*1.2),Ee=Te*Te,Re=2*clamp(.05,1,1-(n.bounce||0))*Math.sqrt(Ee);e={...e,mass:springDefaults.mass,stiffness:Ee,damping:Re}}else{const t=findSpring(n);e={...e,...t,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(n=springDefaults.visualDuration,e=springDefaults.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:Te,restDelta:Ee}=t;const Re=t.keyframes[0],Ce=t.keyframes[t.keyframes.length-1],De={done:!1,value:Re},{stiffness:$e,damping:Ve,mass:Be,duration:Me,velocity:Oe,isResolvedFromDuration:Ue}=getSpringOptions({...t,velocity:-millisecondsToSeconds(t.velocity||0)}),ze=Oe||0,He=Ve/(2*Math.sqrt($e*Be)),Ge=Ce-Re,Ke=millisecondsToSeconds(Math.sqrt($e/Be)),Xe=Math.abs(Ge)<5;Te||(Te=Xe?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),Ee||(Ee=Xe?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Je;if(He<1){const fn=calcAngularFreq(Ke,He);Je=yn=>{const gn=Math.exp(-He*Ke*yn);return Ce-gn*((ze+He*Ke*Ge)/fn*Math.sin(fn*yn)+Ge*Math.cos(fn*yn))}}else if(He===1)Je=fn=>Ce-Math.exp(-Ke*fn)*(Ge+(ze+Ke*Ge)*fn);else{const fn=Ke*Math.sqrt(He*He-1);Je=yn=>{const gn=Math.exp(-He*Ke*yn),mn=Math.min(fn*yn,300);return Ce-gn*((ze+He*Ke*Ge)*Math.sinh(mn)+fn*Ge*Math.cosh(mn))/fn}}const un={calculatedDuration:Ue&&Me||null,next:fn=>{const yn=Je(fn);if(Ue)De.done=fn>=Me;else{let gn=fn===0?ze:0;He<1&&(gn=fn===0?secondsToMilliseconds(ze):calcGeneratorVelocity(Je,fn,yn));const mn=Math.abs(gn)<=Te,dn=Math.abs(Ce-yn)<=Ee;De.done=mn&&dn}return De.value=De.done?Ce:yn,De},toString:()=>{const fn=Math.min(calcGeneratorDuration(un),maxGeneratorDuration),yn=generateLinearEasing(gn=>un.next(fn*gn).value,fn,30);return fn+"ms "+yn},toTransition:()=>{}};return un}spring.applyToOptions=n=>{const e=createGeneratorEasing(n,100,spring);return n.ease=e.ease,n.duration=secondsToMilliseconds(e.duration),n.type="keyframes",n};function inertia({keyframes:n,velocity:e=0,power:t=.8,timeConstant:Te=325,bounceDamping:Ee=10,bounceStiffness:Re=500,modifyTarget:Ce,min:De,max:$e,restDelta:Ve=.5,restSpeed:Be}){const Me=n[0],Oe={done:!1,value:Me},Ue=mn=>De!==void 0&&mn<De||$e!==void 0&&mn>$e,ze=mn=>De===void 0?$e:$e===void 0||Math.abs(De-mn)<Math.abs($e-mn)?De:$e;let He=t*e;const Ge=Me+He,Ke=Ce===void 0?Ge:Ce(Ge);Ke!==Ge&&(He=Ke-Me);const Xe=mn=>-He*Math.exp(-mn/Te),Je=mn=>Ke+Xe(mn),un=mn=>{const dn=Xe(mn),vn=Je(mn);Oe.done=Math.abs(dn)<=Ve,Oe.value=Oe.done?Ke:vn};let fn,yn;const gn=mn=>{Ue(Oe.value)&&(fn=mn,yn=spring({keyframes:[Oe.value,ze(Oe.value)],velocity:calcGeneratorVelocity(Je,mn,Oe.value),damping:Ee,stiffness:Re,restDelta:Ve,restSpeed:Be}))};return gn(0),{calculatedDuration:null,next:mn=>{let dn=!1;return!yn&&fn===void 0&&(dn=!0,un(mn),gn(mn)),fn!==void 0&&mn>=fn?yn.next(mn-fn):(!dn&&un(mn),Oe)}}}function createMixers(n,e,t){const Te=[],Ee=t||MotionGlobalConfig.mix||mix,Re=n.length-1;for(let Ce=0;Ce<Re;Ce++){let De=Ee(n[Ce],n[Ce+1]);if(e){const $e=Array.isArray(e)?e[Ce]||noop$1:e;De=pipe($e,De)}Te.push(De)}return Te}function interpolate$1(n,e,{clamp:t=!0,ease:Te,mixer:Ee}={}){const Re=n.length;if(invariant(Re===e.length),Re===1)return()=>e[0];if(Re===2&&e[0]===e[1])return()=>e[1];const Ce=n[0]===n[1];n[0]>n[Re-1]&&(n=[...n].reverse(),e=[...e].reverse());const De=createMixers(e,Te,Ee),$e=De.length,Ve=Be=>{if(Ce&&Be<n[0])return e[0];let Me=0;if($e>1)for(;Me<n.length-2&&!(Be<n[Me+1]);Me++);const Oe=progress(n[Me],n[Me+1],Be);return De[Me](Oe)};return t?Be=>Ve(clamp(n[0],n[Re-1],Be)):Ve}function fillOffset(n,e){const t=n[n.length-1];for(let Te=1;Te<=e;Te++){const Ee=progress(0,e,Te);n.push(mixNumber$1(t,1,Ee))}}function defaultOffset$1(n){const e=[0];return fillOffset(e,n.length-1),e}function convertOffsetToTimes(n,e){return n.map(t=>t*e)}function defaultEasing(n,e){return n.map(()=>e||easeInOut).splice(0,n.length-1)}function keyframes({duration:n=300,keyframes:e,times:t,ease:Te="easeInOut"}){const Ee=isEasingArray(Te)?Te.map(easingDefinitionToFunction):easingDefinitionToFunction(Te),Re={done:!1,value:e[0]},Ce=convertOffsetToTimes(t&&t.length===e.length?t:defaultOffset$1(e),n),De=interpolate$1(Ce,e,{ease:Array.isArray(Ee)?Ee:defaultEasing(e,Ee)});return{calculatedDuration:n,next:$e=>(Re.value=De($e),Re.done=$e>=n,Re)}}const isNotNull$1=n=>n!==null;function getFinalKeyframe$1(n,{repeat:e,repeatType:t="loop"},Te,Ee=1){const Re=n.filter(isNotNull$1),De=Ee<0||e&&t!=="loop"&&e%2===1?0:Re.length-1;return!De||Te===void 0?Re[De]:Te}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(n){typeof n.type=="string"&&(n.type=transitionTypeMap[n.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const percentToProgress=n=>n/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:t=keyframes,repeat:Te=0,repeatDelay:Ee=0,repeatType:Re,velocity:Ce=0}=e;let{keyframes:De}=e;const $e=t||keyframes;$e!==keyframes&&typeof De[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(De[0],De[1])),De=[0,100]);const Ve=$e({...e,keyframes:De});Re==="mirror"&&(this.mirroredGenerator=$e({...e,keyframes:[...De].reverse(),velocity:-Ce})),Ve.calculatedDuration===null&&(Ve.calculatedDuration=calcGeneratorDuration(Ve));const{calculatedDuration:Be}=Ve;this.calculatedDuration=Be,this.resolvedDuration=Be+Ee,this.totalDuration=this.resolvedDuration*(Te+1)-Ee,this.generator=Ve}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:Te,totalDuration:Ee,mixKeyframes:Re,mirroredGenerator:Ce,resolvedDuration:De,calculatedDuration:$e}=this;if(this.startTime===null)return Te.next(0);const{delay:Ve=0,keyframes:Be,repeat:Me,repeatType:Oe,repeatDelay:Ue,type:ze,onUpdate:He,finalKeyframe:Ge}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-Ee/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const Ke=this.currentTime-Ve*(this.playbackSpeed>=0?1:-1),Xe=this.playbackSpeed>=0?Ke<0:Ke>Ee;this.currentTime=Math.max(Ke,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Ee);let Je=this.currentTime,un=Te;if(Me){const mn=Math.min(this.currentTime,Ee)/De;let dn=Math.floor(mn),vn=mn%1;!vn&&mn>=1&&(vn=1),vn===1&&dn--,dn=Math.min(dn,Me+1),!!(dn%2)&&(Oe==="reverse"?(vn=1-vn,Ue&&(vn-=Ue/De)):Oe==="mirror"&&(un=Ce)),Je=clamp(0,1,vn)*De}const fn=Xe?{done:!1,value:Be[0]}:un.next(Je);Re&&(fn.value=Re(fn.value));let{done:yn}=fn;!Xe&&$e!==null&&(yn=this.playbackSpeed>=0?this.currentTime>=Ee:this.currentTime<=0);const gn=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&yn);return gn&&ze!==inertia&&(fn.value=getFinalKeyframe$1(Be,this.options,Ge,this.speed)),He&&He(fn.value),gn&&this.finish(),fn}then(e,t){return this.finished.then(e,t)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:t}=this.options;this.driver||(this.driver=e(Ee=>this.tick(Ee))),this.options.onPlay?.();const Te=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=Te):this.holdTime!==null?this.startTime=Te-this.holdTime:this.startTime||(this.startTime=t??Te),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const radToDeg=n=>n*180/Math.PI,rotate=n=>{const e=radToDeg(Math.atan2(n[1],n[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate,rotateZ:rotate,skewX:n=>radToDeg(Math.atan(n[1])),skewY:n=>radToDeg(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},rebaseAngle=n=>(n=n%360,n<0&&(n+=360),n),rotateZ=rotate,scaleX=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),scaleY=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:n=>(scaleX(n)+scaleY(n))/2,rotateX:n=>rebaseAngle(radToDeg(Math.atan2(n[6],n[5]))),rotateY:n=>rebaseAngle(radToDeg(Math.atan2(-n[2],n[0]))),rotateZ,rotate:rotateZ,skewX:n=>radToDeg(Math.atan(n[4])),skewY:n=>radToDeg(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function defaultTransformValue(n){return n.includes("scale")?1:0}function parseValueFromTransform(n,e){if(!n||n==="none")return defaultTransformValue(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let Te,Ee;if(t)Te=matrix3dParsers,Ee=t;else{const De=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);Te=matrix2dParsers,Ee=De}if(!Ee)return defaultTransformValue(e);const Re=Te[e],Ce=Ee[1].split(",").map(convertTransformToNumber);return typeof Re=="function"?Re(Ce):Ce[Re]}const readTransformValue=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return parseValueFromTransform(t,e)};function convertTransformToNumber(n){return parseFloat(n.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=n=>n===number$1||n===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(n=>!transformKeys.has(n));function removeNonTranslationalTransform(n){const e=[];return nonTranslationalTransformKeys.forEach(t=>{const Te=n.getValue(t);Te!==void 0&&(e.push([t,Te.get()]),Te.set(t.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>parseValueFromTransform(e,"x"),y:(n,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const n=Array.from(toResolve).filter(Te=>Te.needsMeasurement),e=new Set(n.map(Te=>Te.element)),t=new Map;e.forEach(Te=>{const Ee=removeNonTranslationalTransform(Te);Ee.length&&(t.set(Te,Ee),Te.render())}),n.forEach(Te=>Te.measureInitialState()),e.forEach(Te=>{Te.render();const Ee=t.get(Te);Ee&&Ee.forEach(([Re,Ce])=>{Te.getValue(Re)?.set(Ce)})}),n.forEach(Te=>Te.measureEndState()),n.forEach(Te=>{Te.suspendedScrollY!==void 0&&window.scrollTo(0,Te.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(n=>n.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,t,Te,Ee,Re,Ce=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=Te,this.motionValue=Ee,this.element=Re,this.isAsync=Ce}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:Te,motionValue:Ee}=this;if(e[0]===null){const Re=Ee?.get(),Ce=e[e.length-1];if(Re!==void 0)e[0]=Re;else if(Te&&t){const De=Te.readValue(t,Ce);De!=null&&(e[0]=De)}e[0]===void 0&&(e[0]=Ce),Ee&&Re===void 0&&Ee.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=n=>n.startsWith("--");function setStyle(n,e,t){isCSSVar(e)?n.style.setProperty(e,t):n.style[e]=t}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(n,e){const t=memo(n);return()=>supportsFlags[e]??t()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([n,e,t,Te])=>`cubic-bezier(${n}, ${e}, ${t}, ${Te})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(n,e){if(n)return typeof n=="function"?supportsLinearEasing()?generateLinearEasing(n,e):"ease-out":isBezierDefinition(n)?cubicBezierAsString(n):Array.isArray(n)?n.map(t=>mapEasingToNativeEasing(t,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[n]}function startWaapiAnimation(n,e,t,{delay:Te=0,duration:Ee=300,repeat:Re=0,repeatType:Ce="loop",ease:De="easeOut",times:$e}={},Ve=void 0){const Be={[e]:t};$e&&(Be.offset=$e);const Me=mapEasingToNativeEasing(De,Ee);Array.isArray(Me)&&(Be.easing=Me);const Oe={delay:Te,duration:Ee,easing:Array.isArray(Me)?"linear":Me,fill:"both",iterations:Re+1,direction:Ce==="reverse"?"alternate":"normal"};return Ve&&(Oe.pseudoElement=Ve),n.animate(Be,Oe)}function isGenerator(n){return typeof n=="function"&&"applyToOptions"in n}function applyGeneratorOptions({type:n,...e}){return isGenerator(n)&&supportsLinearEasing()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:Te,keyframes:Ee,pseudoElement:Re,allowFlatten:Ce=!1,finalKeyframe:De,onComplete:$e}=e;this.isPseudoElement=!!Re,this.allowFlatten=Ce,this.options=e,invariant(typeof e.type!="string");const Ve=applyGeneratorOptions(e);this.animation=startWaapiAnimation(t,Te,Ee,Ve,Re),Ve.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!Re){const Be=getFinalKeyframe$1(Ee,this.options,De,this.speed);this.updateMotionValue?this.updateMotionValue(Be):setStyle(t,Te,Be),this.animation.cancel()}$e?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$1):t(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(n){return n in unsupportedEasingFunctions}function replaceStringEasing(n){typeof n.ease=="string"&&isUnsupportedEase(n.ease)&&(n.ease=unsupportedEasingFunctions[n.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:Te,onComplete:Ee,element:Re,...Ce}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const De=new JSAnimation({...Ce,autoplay:!1}),$e=secondsToMilliseconds(this.finishedTime??this.time);t.setWithVelocity(De.sample($e-sampleDelta).value,De.sample($e).value,sampleDelta),De.stop()}}const isAnimatable=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(complex.test(n)||n==="0")&&!n.startsWith("url("));function hasKeyframesChanged(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function canAnimate(n,e,t,Te){const Ee=n[0];if(Ee===null)return!1;if(e==="display"||e==="visibility")return!0;const Re=n[n.length-1],Ce=isAnimatable(Ee,e),De=isAnimatable(Re,e);return!Ce||!De?!1:hasKeyframesChanged(n)||(t==="spring"||isGenerator(t))&&Te}function makeAnimationInstant(n){n.duration=0,n.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(n){const{motionValue:e,name:t,repeatDelay:Te,repeatType:Ee,damping:Re,type:Ce}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:$e,transformTemplate:Ve}=e.owner.getProps();return supportsWaapi()&&t&&acceleratedValues.has(t)&&(t!=="transform"||!Ve)&&!$e&&!Te&&Ee!=="mirror"&&Re!==0&&Ce!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:t=0,type:Te="keyframes",repeat:Ee=0,repeatDelay:Re=0,repeatType:Ce="loop",keyframes:De,name:$e,motionValue:Ve,element:Be,...Me}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const Oe={autoplay:e,delay:t,type:Te,repeat:Ee,repeatDelay:Re,repeatType:Ce,name:$e,motionValue:Ve,element:Be,...Me},Ue=Be?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new Ue(De,(ze,He,Ge)=>this.onKeyframesResolved(ze,He,Oe,!Ge),$e,Ve,Be),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,Te,Ee){this.keyframeResolver=void 0;const{name:Re,type:Ce,velocity:De,delay:$e,isHandoff:Ve,onUpdate:Be}=Te;this.resolvedAt=time.now(),canAnimate(e,Re,Ce,De)||((MotionGlobalConfig.instantAnimations||!$e)&&Be?.(getFinalKeyframe$1(e,Te,t)),e[0]=e[e.length-1],makeAnimationInstant(Te),Te.repeat=0);const Oe={startTime:Ee?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...Te,keyframes:e},Ue=!Ve&&supportsBrowserAnimation(Oe)?new NativeAnimationExtended({...Oe,element:Oe.motionValue.owner.current}):new JSAnimation(Oe);Ue.finished.then(()=>this.notifyFinished()).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=Ue.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=Ue}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(n){const e=splitCSSVariableRegex.exec(n);if(!e)return[,];const[,t,Te,Ee]=e;return[`--${t??Te}`,Ee]}function getVariableValue(n,e,t=1){const[Te,Ee]=parseCSSVariable(n);if(!Te)return;const Re=window.getComputedStyle(e).getPropertyValue(Te);if(Re){const Ce=Re.trim();return isNumericalString(Ce)?parseFloat(Ce):Ce}return isCSSVariableToken(Ee)?getVariableValue(Ee,e,t+1):Ee}function getValueTransition(n,e){return n?.[e]??n?.default??n}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:n=>n==="auto",parse:n=>n},testValueType=n=>e=>e.test(n),dimensionValueTypes=[number$1,px,percent,degrees,vw,vh,auto],findDimensionValueType=n=>dimensionValueTypes.find(testValueType(n));function isNone(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||isZeroValueString(n):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[Te]=t.match(floatRegex)||[];if(!Te)return n;const Ee=t.replace(Te,"");let Re=maxDefaults.has(e)?1:0;return Te!==t&&(Re*=100),e+"("+Re+Ee+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:n=>{const e=n.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):n}},int={...number$1,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=n=>defaultValueTypes[n];function getAnimatableNone(n,e){let t=getDefaultValueType(n);return t!==filter&&(t=complex),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(n,e,t){let Te=0,Ee;for(;Te<n.length&&!Ee;){const Re=n[Te];typeof Re=="string"&&!invalidTemplates.has(Re)&&analyseComplexValue(Re).values.length&&(Ee=n[Te]),Te++}if(Ee&&t)for(const Re of e)n[Re]=getAnimatableNone(t,Ee)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,t,Te,Ee,Re){super(e,t,Te,Ee,Re,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:Te}=this;if(!t||!t.current)return;super.readKeyframes();for(let $e=0;$e<e.length;$e++){let Ve=e[$e];if(typeof Ve=="string"&&(Ve=Ve.trim(),isCSSVariableToken(Ve))){const Be=getVariableValue(Ve,t.current);Be!==void 0&&(e[$e]=Be),$e===e.length-1&&(this.finalKeyframe=Ve)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(Te)||e.length!==2)return;const[Ee,Re]=e,Ce=findDimensionValueType(Ee),De=findDimensionValueType(Re);if(Ce!==De)if(isNumOrPxType(Ce)&&isNumOrPxType(De))for(let $e=0;$e<e.length;$e++){const Ve=e[$e];typeof Ve=="string"&&(e[$e]=parseFloat(Ve))}else positionalValues[Te]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,Te=[];for(let Ee=0;Ee<e.length;Ee++)(e[Ee]===null||isNone(e[Ee]))&&Te.push(Ee);Te.length&&makeNoneKeyframesAnimatable(e,Te,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:Te}=this;if(!e||!e.current)return;Te==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[Te](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const Ee=t[t.length-1];Ee!==void 0&&e.getValue(Te,Ee).jump(Ee,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:Te}=this;if(!e||!e.current)return;const Ee=e.getValue(t);Ee&&Ee.jump(this.measuredOrigin,!1);const Re=Te.length-1,Ce=Te[Re];Te[Re]=positionalValues[t](e.measureViewportBox(),window.getComputedStyle(e.current)),Ce!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=Ce),this.removedTransforms?.length&&this.removedTransforms.forEach(([De,$e])=>{e.getValue(De).set($e)}),this.resolveNoneKeyframes()}}function resolveElements(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const Ee=document.querySelectorAll(n);return Ee?Array.from(Ee):[]}return Array.from(n)}const getValueAsType=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function isHTMLElement(n){return isObject$1(n)&&"offsetHeight"in n}const MAX_VELOCITY_DELTA=30,isFloat=n=>!isNaN(parseFloat(n)),collectMotionValues={current:void 0};class MotionValue{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=Te=>{const Ee=time.now();if(this.updatedAt!==Ee&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(Te),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const Re of this.dependents)Re.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SubscriptionManager);const Te=this.events[e].add(t);return e==="change"?()=>{Te(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:Te}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,Te){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-Te}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(n,e){return new MotionValue(n,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(n){return n==="x"||n==="y"?isDragging[n]?null:(isDragging[n]=!0,()=>{isDragging[n]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(n,e){const t=resolveElements(n),Te=new AbortController,Ee={passive:!0,...e,signal:Te.signal};return[t,Ee,()=>Te.abort()]}function isValidHover(n){return!(n.pointerType==="touch"||isDragActive())}function hover(n,e,t={}){const[Te,Ee,Re]=setupGesture(n,t),Ce=De=>{if(!isValidHover(De))return;const{target:$e}=De,Ve=e($e,De);if(typeof Ve!="function"||!$e)return;const Be=Me=>{isValidHover(Me)&&(Ve(Me),$e.removeEventListener("pointerleave",Be))};$e.addEventListener("pointerleave",Be,Ee)};return Te.forEach(De=>{De.addEventListener("pointerenter",Ce,Ee)}),Re}const isNodeOrChild=(n,e)=>e?n===e?!0:isNodeOrChild(n,e.parentElement):!1,isPrimaryPointer=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(n){return focusableElements.has(n.tagName)||n.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(n){return e=>{e.key==="Enter"&&n(e)}}function firePointerEvent(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(n,e)=>{const t=n.currentTarget;if(!t)return;const Te=filterEvents(()=>{if(isPressing.has(t))return;firePointerEvent(t,"down");const Ee=filterEvents(()=>{firePointerEvent(t,"up")}),Re=()=>firePointerEvent(t,"cancel");t.addEventListener("keyup",Ee,e),t.addEventListener("blur",Re,e)});t.addEventListener("keydown",Te,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",Te),e)};function isValidPressEvent(n){return isPrimaryPointer(n)&&!isDragActive()}function press(n,e,t={}){const[Te,Ee,Re]=setupGesture(n,t),Ce=De=>{const $e=De.currentTarget;if(!isValidPressEvent(De))return;isPressing.add($e);const Ve=e($e,De),Be=(Ue,ze)=>{window.removeEventListener("pointerup",Me),window.removeEventListener("pointercancel",Oe),isPressing.has($e)&&isPressing.delete($e),isValidPressEvent(Ue)&&typeof Ve=="function"&&Ve(Ue,{success:ze})},Me=Ue=>{Be(Ue,$e===window||$e===document||t.useGlobalTarget||isNodeOrChild($e,Ue.target))},Oe=Ue=>{Be(Ue,!1)};window.addEventListener("pointerup",Me,Ee),window.addEventListener("pointercancel",Oe,Ee)};return Te.forEach(De=>{(t.useGlobalTarget?window:De).addEventListener("pointerdown",Ce,Ee),isHTMLElement(De)&&(De.addEventListener("focus",Ve=>enableKeyboardPress(Ve,Ee)),!isElementKeyboardAccessible(De)&&!De.hasAttribute("tabindex")&&(De.tabIndex=0))}),Re}function isSVGElement(n){return isObject$1(n)&&"ownerSVGElement"in n}const resizeHandlers=new WeakMap;let observer;const getSize=(n,e,t)=>(Te,Ee)=>Ee&&Ee[0]?Ee[0][n+"Size"]:isSVGElement(Te)&&"getBBox"in Te?Te.getBBox()[e]:Te[t],getWidth=getSize("inline","width","offsetWidth"),getHeight=getSize("block","height","offsetHeight");function notifyTarget({target:n,borderBoxSize:e}){resizeHandlers.get(n)?.forEach(t=>{t(n,{get width(){return getWidth(n,e)},get height(){return getHeight(n,e)}})})}function notifyAll(n){n.forEach(notifyTarget)}function createResizeObserver(){typeof ResizeObserver>"u"||(observer=new ResizeObserver(notifyAll))}function resizeElement(n,e){observer||createResizeObserver();const t=resolveElements(n);return t.forEach(Te=>{let Ee=resizeHandlers.get(Te);Ee||(Ee=new Set,resizeHandlers.set(Te,Ee)),Ee.add(e),observer?.observe(Te)}),()=>{t.forEach(Te=>{const Ee=resizeHandlers.get(Te);Ee?.delete(e),Ee?.size||observer?.unobserve(Te)})}}const windowCallbacks=new Set;let windowResizeHandler;function createWindowResizeHandler(){windowResizeHandler=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};windowCallbacks.forEach(e=>e(n))},window.addEventListener("resize",windowResizeHandler)}function resizeWindow(n){return windowCallbacks.add(n),windowResizeHandler||createWindowResizeHandler(),()=>{windowCallbacks.delete(n),!windowCallbacks.size&&typeof windowResizeHandler=="function"&&(window.removeEventListener("resize",windowResizeHandler),windowResizeHandler=void 0)}}function resize(n,e){return typeof n=="function"?resizeWindow(n):resizeElement(n,e)}function observeTimeline(n,e){let t;const Te=()=>{const{currentTime:Ee}=e,Ce=(Ee===null?0:Ee.value)/100;t!==Ce&&n(Ce),t=Ce};return frame.preUpdate(Te,!0),()=>cancelFrame(Te)}function isSVGSVGElement(n){return isSVGElement(n)&&n.tagName==="svg"}function transform(...n){const e=!Array.isArray(n[0]),t=e?0:-1,Te=n[0+t],Ee=n[1+t],Re=n[2+t],Ce=n[3+t],De=interpolate$1(Ee,Re,Ce);return e?De(Te):De}const isMotionValue=n=>!!(n&&n.getVelocity),valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=n=>valueTypes.find(testValueType(n)),MotionConfigContext=reactExports.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const Te=t.offsetParent,Ee=isHTMLElement(Te)&&Te.offsetWidth||0,Re=this.props.sizeRef.current;Re.height=t.offsetHeight||0,Re.width=t.offsetWidth||0,Re.top=t.offsetTop,Re.left=t.offsetLeft,Re.right=Ee-Re.width-Re.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:n,isPresent:e,anchorX:t,root:Te}){const Ee=reactExports.useId(),Re=reactExports.useRef(null),Ce=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:De}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:$e,height:Ve,top:Be,left:Me,right:Oe}=Ce.current;if(e||!Re.current||!$e||!Ve)return;const Ue=t==="left"?`left: ${Me}`:`right: ${Oe}`;Re.current.dataset.motionPopId=Ee;const ze=document.createElement("style");De&&(ze.nonce=De);const He=Te??document.head;return He.appendChild(ze),ze.sheet&&ze.sheet.insertRule(`
          [data-motion-pop-id="${Ee}"] {
            position: absolute !important;
            width: ${$e}px !important;
            height: ${Ve}px !important;
            ${Ue}px !important;
            top: ${Be}px !important;
          }
        `),()=>{He.contains(ze)&&He.removeChild(ze)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:Re,sizeRef:Ce,children:reactExports.cloneElement(n,{ref:Re})})}const PresenceChild=({children:n,initial:e,isPresent:t,onExitComplete:Te,custom:Ee,presenceAffectsLayout:Re,mode:Ce,anchorX:De,root:$e})=>{const Ve=useConstant(newChildrenMap),Be=reactExports.useId();let Me=!0,Oe=reactExports.useMemo(()=>(Me=!1,{id:Be,initial:e,isPresent:t,custom:Ee,onExitComplete:Ue=>{Ve.set(Ue,!0);for(const ze of Ve.values())if(!ze)return;Te&&Te()},register:Ue=>(Ve.set(Ue,!1),()=>Ve.delete(Ue))}),[t,Ve,Te]);return Re&&Me&&(Oe={...Oe}),reactExports.useMemo(()=>{Ve.forEach((Ue,ze)=>Ve.set(ze,!1))},[t]),reactExports.useEffect(()=>{!t&&!Ve.size&&Te&&Te()},[t]),Ce==="popLayout"&&(n=jsxRuntimeExports.jsx(PopChild,{isPresent:t,anchorX:De,root:$e,children:n})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Oe,children:n})};function newChildrenMap(){return new Map}function usePresence(n=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:Te,register:Ee}=e,Re=reactExports.useId();reactExports.useEffect(()=>{if(n)return Ee(Re)},[n]);const Ce=reactExports.useCallback(()=>n&&Te&&Te(Re),[Re,Te,n]);return!t&&Te?[!1,Ce]:[!0]}const getChildKey=n=>n.key||"";function onlyElements(n){const e=[];return reactExports.Children.forEach(n,t=>{reactExports.isValidElement(t)&&e.push(t)}),e}const AnimatePresence=({children:n,custom:e,initial:t=!0,onExitComplete:Te,presenceAffectsLayout:Ee=!0,mode:Re="sync",propagate:Ce=!1,anchorX:De="left",root:$e})=>{const[Ve,Be]=usePresence(Ce),Me=reactExports.useMemo(()=>onlyElements(n),[n]),Oe=Ce&&!Ve?[]:Me.map(getChildKey),Ue=reactExports.useRef(!0),ze=reactExports.useRef(Me),He=useConstant(()=>new Map),[Ge,Ke]=reactExports.useState(Me),[Xe,Je]=reactExports.useState(Me);useIsomorphicLayoutEffect(()=>{Ue.current=!1,ze.current=Me;for(let yn=0;yn<Xe.length;yn++){const gn=getChildKey(Xe[yn]);Oe.includes(gn)?He.delete(gn):He.get(gn)!==!0&&He.set(gn,!1)}},[Xe,Oe.length,Oe.join("-")]);const un=[];if(Me!==Ge){let yn=[...Me];for(let gn=0;gn<Xe.length;gn++){const mn=Xe[gn],dn=getChildKey(mn);Oe.includes(dn)||(yn.splice(gn,0,mn),un.push(mn))}return Re==="wait"&&un.length&&(yn=un),Je(onlyElements(yn)),Ke(Me),null}const{forceRender:fn}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Xe.map(yn=>{const gn=getChildKey(yn),mn=Ce&&!Ve?!1:Me===Xe||Oe.includes(gn),dn=()=>{if(He.has(gn))He.set(gn,!0);else return;let vn=!0;He.forEach(bn=>{bn||(vn=!1)}),vn&&(fn?.(),Je(ze.current),Ce&&Be?.(),Te&&Te())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:mn,initial:!Ue.current||t?void 0:!1,custom:e,presenceAffectsLayout:Ee,mode:Re,root:$e,onExitComplete:mn?void 0:dn,anchorX:De,children:yn},gn)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const n in featureProps)featureDefinitions[n]={isEnabled:e=>featureProps[n].some(t=>!!e[t])};function loadFeatures(n){for(const e in n)featureDefinitions[e]={...featureDefinitions[e],...n[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||validMotionProps.has(n)}let shouldForward=n=>!isValidMotionProp(n);function loadExternalIsValidProp(n){typeof n=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):n(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(n,e,t){const Te={};for(const Ee in n)Ee==="values"&&typeof n.values=="object"||(shouldForward(Ee)||t===!0&&isValidMotionProp(Ee)||!e&&!isValidMotionProp(Ee)||n.draggable&&Ee.startsWith("onDrag"))&&(Te[Ee]=n[Ee]);return Te}const MotionContext=reactExports.createContext({});function isAnimationControls(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function isVariantLabel(n){return typeof n=="string"||Array.isArray(n)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(n){return isAnimationControls(n.animate)||variantProps.some(e=>isVariantLabel(n[e]))}function isVariantNode(n){return!!(isControllingVariants(n)||n.variants)}function getCurrentTreeVariants(n,e){if(isControllingVariants(n)){const{initial:t,animate:Te}=n;return{initial:t===!1||isVariantLabel(t)?t:void 0,animate:isVariantLabel(Te)?Te:void 0}}return n.inherit!==!1?e:{}}function useCreateMotionContext(n){const{initial:e,animate:t}=getCurrentTreeVariants(n,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:t}),[variantLabelsAsDependency(e),variantLabelsAsDependency(t)])}function variantLabelsAsDependency(n){return Array.isArray(n)?n.join(" "):n}const scaleCorrectors={};function addScaleCorrector(n){for(const e in n)scaleCorrectors[e]=n[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(n,{layout:e,layoutId:t}){return transformProps.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!scaleCorrectors[n]||n==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(n,e,t){let Te="",Ee=!0;for(let Re=0;Re<numTransforms;Re++){const Ce=transformPropOrder[Re],De=n[Ce];if(De===void 0)continue;let $e=!0;if(typeof De=="number"?$e=De===(Ce.startsWith("scale")?1:0):$e=parseFloat(De)===0,!$e||t){const Ve=getValueAsType(De,numberValueTypes[Ce]);if(!$e){Ee=!1;const Be=translateAlias[Ce]||Ce;Te+=`${Be}(${Ve}) `}t&&(e[Ce]=Ve)}}return Te=Te.trim(),t?Te=t(e,Ee?"":Te):Ee&&(Te="none"),Te}function buildHTMLStyles(n,e,t){const{style:Te,vars:Ee,transformOrigin:Re}=n;let Ce=!1,De=!1;for(const $e in e){const Ve=e[$e];if(transformProps.has($e)){Ce=!0;continue}else if(isCSSVariableName($e)){Ee[$e]=Ve;continue}else{const Be=getValueAsType(Ve,numberValueTypes[$e]);$e.startsWith("origin")?(De=!0,Re[$e]=Be):Te[$e]=Be}}if(e.transform||(Ce||t?Te.transform=buildTransform(e,n.transform,t):Te.transform&&(Te.transform="none")),De){const{originX:$e="50%",originY:Ve="50%",originZ:Be=0}=Re;Te.transformOrigin=`${$e} ${Ve} ${Be}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(n,e,t){for(const Te in e)!isMotionValue(e[Te])&&!isForcedMotionValue(Te,t)&&(n[Te]=e[Te])}function useInitialMotionValues({transformTemplate:n},e){return reactExports.useMemo(()=>{const t=createHtmlRenderState();return buildHTMLStyles(t,e,n),Object.assign({},t.vars,t.style)},[e])}function useStyle(n,e){const t=n.style||{},Te={};return copyRawValuesOnly(Te,t,n),Object.assign(Te,useInitialMotionValues(n,e)),Te}function useHTMLProps(n,e){const t={},Te=useStyle(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,Te.userSelect=Te.WebkitUserSelect=Te.WebkitTouchCallout="none",Te.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=Te,t}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(n,e,t=1,Te=0,Ee=!0){n.pathLength=1;const Re=Ee?dashKeys:camelKeys;n[Re.offset]=px.transform(-Te);const Ce=px.transform(e),De=px.transform(t);n[Re.array]=`${Ce} ${De}`}function buildSVGAttrs(n,{attrX:e,attrY:t,attrScale:Te,pathLength:Ee,pathSpacing:Re=1,pathOffset:Ce=0,...De},$e,Ve,Be){if(buildHTMLStyles(n,De,Ve),$e){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:Me,style:Oe}=n;Me.transform&&(Oe.transform=Me.transform,delete Me.transform),(Oe.transform||Me.transformOrigin)&&(Oe.transformOrigin=Me.transformOrigin??"50% 50%",delete Me.transformOrigin),Oe.transform&&(Oe.transformBox=Be?.transformBox??"fill-box",delete Me.transformBox),e!==void 0&&(Me.x=e),t!==void 0&&(Me.y=t),Te!==void 0&&(Me.scale=Te),Ee!==void 0&&buildSVGPath(Me,Ee,Re,Ce,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=n=>typeof n=="string"&&n.toLowerCase()==="svg";function useSVGProps(n,e,t,Te){const Ee=reactExports.useMemo(()=>{const Re=createSvgRenderState();return buildSVGAttrs(Re,e,isSVGTag(Te),n.transformTemplate,n.style),{...Re.attrs,style:{...Re.style}}},[e]);if(n.style){const Re={};copyRawValuesOnly(Re,n.style,n),Ee.style={...Re,...Ee.style}}return Ee}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(n){return typeof n!="string"||n.includes("-")?!1:!!(lowercaseSVGElements.indexOf(n)>-1||/[A-Z]/u.test(n))}function useRender(n,e,t,{latestValues:Te},Ee,Re=!1){const De=(isSVGComponent(n)?useSVGProps:useHTMLProps)(e,Te,Ee,n),$e=filterProps(e,typeof n=="string",Re),Ve=n!==reactExports.Fragment?{...$e,...De,ref:t}:{},{children:Be}=e,Me=reactExports.useMemo(()=>isMotionValue(Be)?Be.get():Be,[Be]);return reactExports.createElement(n,{...Ve,children:Me})}function getValueState(n){const e=[{},{}];return n?.values.forEach((t,Te)=>{e[0][Te]=t.get(),e[1][Te]=t.getVelocity()}),e}function resolveVariantFromProps(n,e,t,Te){if(typeof e=="function"){const[Ee,Re]=getValueState(Te);e=e(t!==void 0?t:n.custom,Ee,Re)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[Ee,Re]=getValueState(Te);e=e(t!==void 0?t:n.custom,Ee,Re)}return e}function resolveMotionValue(n){return isMotionValue(n)?n.get():n}function makeState({scrapeMotionValuesFromProps:n,createRenderState:e},t,Te,Ee){return{latestValues:makeLatestValues(t,Te,Ee,n),renderState:e()}}function makeLatestValues(n,e,t,Te){const Ee={},Re=Te(n,{});for(const Oe in Re)Ee[Oe]=resolveMotionValue(Re[Oe]);let{initial:Ce,animate:De}=n;const $e=isControllingVariants(n),Ve=isVariantNode(n);e&&Ve&&!$e&&n.inherit!==!1&&(Ce===void 0&&(Ce=e.initial),De===void 0&&(De=e.animate));let Be=t?t.initial===!1:!1;Be=Be||Ce===!1;const Me=Be?De:Ce;if(Me&&typeof Me!="boolean"&&!isAnimationControls(Me)){const Oe=Array.isArray(Me)?Me:[Me];for(let Ue=0;Ue<Oe.length;Ue++){const ze=resolveVariantFromProps(n,Oe[Ue]);if(ze){const{transitionEnd:He,transition:Ge,...Ke}=ze;for(const Xe in Ke){let Je=Ke[Xe];if(Array.isArray(Je)){const un=Be?Je.length-1:0;Je=Je[un]}Je!==null&&(Ee[Xe]=Je)}for(const Xe in He)Ee[Xe]=He[Xe]}}}return Ee}const makeUseVisualState=n=>(e,t)=>{const Te=reactExports.useContext(MotionContext),Ee=reactExports.useContext(PresenceContext),Re=()=>makeState(n,e,Te,Ee);return t?Re():useConstant(Re)};function scrapeMotionValuesFromProps$1(n,e,t){const{style:Te}=n,Ee={};for(const Re in Te)(isMotionValue(Te[Re])||e.style&&isMotionValue(e.style[Re])||isForcedMotionValue(Re,n)||t?.getValue(Re)?.liveStyle!==void 0)&&(Ee[Re]=Te[Re]);return Ee}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(n,e,t){const Te=scrapeMotionValuesFromProps$1(n,e,t);for(const Ee in n)if(isMotionValue(n[Ee])||isMotionValue(e[Ee])){const Re=transformPropOrder.indexOf(Ee)!==-1?"attr"+Ee.charAt(0).toUpperCase()+Ee.substring(1):Ee;Te[Re]=n[Ee]}return Te}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function useMotionRef(n,e,t){return reactExports.useCallback(Te=>{Te&&n.onMount&&n.onMount(Te),e&&(Te?e.mount(Te):e.unmount()),t&&(typeof t=="function"?t(Te):isRefObject(t)&&(t.current=Te))},[e])}const camelToDash=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(n,e,t,Te,Ee){const{visualElement:Re}=reactExports.useContext(MotionContext),Ce=reactExports.useContext(LazyContext),De=reactExports.useContext(PresenceContext),$e=reactExports.useContext(MotionConfigContext).reducedMotion,Ve=reactExports.useRef(null);Te=Te||Ce.renderer,!Ve.current&&Te&&(Ve.current=Te(n,{visualState:e,parent:Re,props:t,presenceContext:De,blockInitialAnimation:De?De.initial===!1:!1,reducedMotionConfig:$e}));const Be=Ve.current,Me=reactExports.useContext(SwitchLayoutGroupContext);Be&&!Be.projection&&Ee&&(Be.type==="html"||Be.type==="svg")&&createProjectionNode$1(Ve.current,t,Ee,Me);const Oe=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Be&&Oe.current&&Be.update(t,De)});const Ue=t[optimizedAppearDataAttribute],ze=reactExports.useRef(!!Ue&&!window.MotionHandoffIsComplete?.(Ue)&&window.MotionHasOptimisedAnimation?.(Ue));return useIsomorphicLayoutEffect(()=>{Be&&(Oe.current=!0,window.MotionIsMounted=!0,Be.updateFeatures(),Be.scheduleRenderMicrotask(),ze.current&&Be.animationState&&Be.animationState.animateChanges())}),reactExports.useEffect(()=>{Be&&(!ze.current&&Be.animationState&&Be.animationState.animateChanges(),ze.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(Ue)}),ze.current=!1),Be.enteringChildren=void 0)}),Be}function createProjectionNode$1(n,e,t,Te){const{layoutId:Ee,layout:Re,drag:Ce,dragConstraints:De,layoutScroll:$e,layoutRoot:Ve,layoutCrossfade:Be}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(n.parent)),n.projection.setOptions({layoutId:Ee,layout:Re,alwaysMeasureLayout:!!Ce||De&&isRefObject(De),visualElement:n,animationType:typeof Re=="string"?Re:"both",initialPromotionConfig:Te,crossfade:Be,layoutScroll:$e,layoutRoot:Ve})}function getClosestProjectingNode(n){if(n)return n.options.allowProjection!==!1?n.projection:getClosestProjectingNode(n.parent)}function createMotionComponent(n,{forwardMotionProps:e=!1}={},t,Te){t&&loadFeatures(t);const Ee=isSVGComponent(n)?useSVGVisualState:useHTMLVisualState;function Re(De,$e){let Ve;const Be={...reactExports.useContext(MotionConfigContext),...De,layoutId:useLayoutId(De)},{isStatic:Me}=Be,Oe=useCreateMotionContext(De),Ue=Ee(De,Me);if(!Me&&isBrowser){useStrictMode();const ze=getProjectionFunctionality(Be);Ve=ze.MeasureLayout,Oe.visualElement=useVisualElement(n,Ue,Be,Te,ze.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Oe,children:[Ve&&Oe.visualElement?jsxRuntimeExports.jsx(Ve,{visualElement:Oe.visualElement,...Be}):null,useRender(n,De,useMotionRef(Ue,Oe.visualElement,$e),Ue,Me,e)]})}Re.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const Ce=reactExports.forwardRef(Re);return Ce[motionComponentSymbol]=n,Ce}function useLayoutId({layoutId:n}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&n!==void 0?e+"-"+n:n}function useStrictMode(n,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(n){const{drag:e,layout:t}=featureDefinitions;if(!e&&!t)return{};const Te={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?Te.MeasureLayout:void 0,ProjectionNode:Te.ProjectionNode}}function createMotionProxy(n,e){if(typeof Proxy>"u")return createMotionComponent;const t=new Map,Te=(Re,Ce)=>createMotionComponent(Re,Ce,n,e),Ee=(Re,Ce)=>Te(Re,Ce);return new Proxy(Ee,{get:(Re,Ce)=>Ce==="create"?Te:(t.has(Ce)||t.set(Ce,createMotionComponent(Ce,void 0,n,e)),t.get(Ce))})}function convertBoundingBoxToBox({top:n,left:e,right:t,bottom:Te}){return{x:{min:e,max:t},y:{min:n,max:Te}}}function convertBoxToBoundingBox({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function transformBoxPoints(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),Te=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:Te.y,right:Te.x}}function isIdentityScale(n){return n===void 0||n===1}function hasScale({scale:n,scaleX:e,scaleY:t}){return!isIdentityScale(n)||!isIdentityScale(e)||!isIdentityScale(t)}function hasTransform(n){return hasScale(n)||has2DTranslate(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function has2DTranslate(n){return is2DTranslate(n.x)||is2DTranslate(n.y)}function is2DTranslate(n){return n&&n!=="0%"}function scalePoint(n,e,t){const Te=n-t,Ee=e*Te;return t+Ee}function applyPointDelta(n,e,t,Te,Ee){return Ee!==void 0&&(n=scalePoint(n,Ee,Te)),scalePoint(n,t,Te)+e}function applyAxisDelta(n,e=0,t=1,Te,Ee){n.min=applyPointDelta(n.min,e,t,Te,Ee),n.max=applyPointDelta(n.max,e,t,Te,Ee)}function applyBoxDelta(n,{x:e,y:t}){applyAxisDelta(n.x,e.translate,e.scale,e.originPoint),applyAxisDelta(n.y,t.translate,t.scale,t.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(n,e,t,Te=!1){const Ee=t.length;if(!Ee)return;e.x=e.y=1;let Re,Ce;for(let De=0;De<Ee;De++){Re=t[De],Ce=Re.projectionDelta;const{visualElement:$e}=Re.options;$e&&$e.props.style&&$e.props.style.display==="contents"||(Te&&Re.options.layoutScroll&&Re.scroll&&Re!==Re.root&&transformBox(n,{x:-Re.scroll.offset.x,y:-Re.scroll.offset.y}),Ce&&(e.x*=Ce.x.scale,e.y*=Ce.y.scale,applyBoxDelta(n,Ce)),Te&&hasTransform(Re.latestValues)&&transformBox(n,Re.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(n,e){n.min=n.min+e,n.max=n.max+e}function transformAxis(n,e,t,Te,Ee=.5){const Re=mixNumber$1(n.min,n.max,Ee);applyAxisDelta(n,e,t,Re,Te)}function transformBox(n,e){transformAxis(n.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(n.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(n,e){return convertBoundingBoxToBox(transformBoxPoints(n.getBoundingClientRect(),e))}function measurePageBox(n,e,t){const Te=measureViewportBox(n,t),{scroll:Ee}=e;return Ee&&(translateAxis(Te.x,Ee.offset.x),translateAxis(Te.y,Ee.offset.y)),Te}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=n.matches;n.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(n,e,t){for(const Te in e){const Ee=e[Te],Re=t[Te];if(isMotionValue(Ee))n.addValue(Te,Ee);else if(isMotionValue(Re))n.addValue(Te,motionValue(Ee,{owner:n}));else if(Re!==Ee)if(n.hasValue(Te)){const Ce=n.getValue(Te);Ce.liveStyle===!0?Ce.jump(Ee):Ce.hasAnimated||Ce.set(Ee)}else{const Ce=n.getStaticValue(Te);n.addValue(Te,motionValue(Ce!==void 0?Ce:Ee,{owner:n}))}}for(const Te in t)e[Te]===void 0&&n.removeValue(Te);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,t,Te){return{}}constructor({parent:e,props:t,presenceContext:Te,reducedMotionConfig:Ee,blockInitialAnimation:Re,visualState:Ce},De={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Oe=time.now();this.renderScheduledAt<Oe&&(this.renderScheduledAt=Oe,frame.render(this.render,!1,!0))};const{latestValues:$e,renderState:Ve}=Ce;this.latestValues=$e,this.baseTarget={...$e},this.initialValues=t.initial?{...$e}:{},this.renderState=Ve,this.parent=e,this.props=t,this.presenceContext=Te,this.depth=e?e.depth+1:0,this.reducedMotionConfig=Ee,this.options=De,this.blockInitialAnimation=!!Re,this.isControllingVariants=isControllingVariants(t),this.isVariantNode=isVariantNode(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:Be,...Me}=this.scrapeMotionValuesFromProps(t,{},this);for(const Oe in Me){const Ue=Me[Oe];$e[Oe]!==void 0&&isMotionValue(Ue)&&Ue.set($e[Oe])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,Te)=>this.bindToMotionValue(Te,t)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const Te=transformProps.has(e);Te&&this.onBindTransform&&this.onBindTransform();const Ee=t.on("change",Ce=>{this.latestValues[e]=Ce,this.props.onUpdate&&frame.preRender(this.notifyUpdate),Te&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let Re;window.MotionCheckAppearSync&&(Re=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{Ee(),Re&&Re(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const t=featureDefinitions[e];if(!t)continue;const{isEnabled:Te,Feature:Ee}=t;if(!this.features[e]&&Ee&&Te(this.props)&&(this.features[e]=new Ee(this)),this.features[e]){const Re=this.features[e];Re.isMounted?Re.update():(Re.mount(),Re.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let Te=0;Te<propEventHandlers.length;Te++){const Ee=propEventHandlers[Te];this.propEventSubscriptions[Ee]&&(this.propEventSubscriptions[Ee](),delete this.propEventSubscriptions[Ee]);const Re="on"+Ee,Ce=e[Re];Ce&&(this.propEventSubscriptions[Ee]=this.on(Ee,Ce))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const Te=this.values.get(e);t!==Te&&(Te&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let Te=this.values.get(e);return Te===void 0&&t!==void 0&&(Te=motionValue(t===null?void 0:t,{owner:this}),this.addValue(e,Te)),Te}readValue(e,t){let Te=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return Te!=null&&(typeof Te=="string"&&(isNumericalString(Te)||isZeroValueString(Te))?Te=parseFloat(Te):!findValueType(Te)&&complex.test(t)&&(Te=getAnimatableNone(e,t)),this.setBaseTarget(e,isMotionValue(Te)?Te.get():Te)),isMotionValue(Te)?Te.get():Te}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let Te;if(typeof t=="string"||typeof t=="object"){const Re=resolveVariantFromProps(this.props,t,this.presenceContext?.custom);Re&&(Te=Re[e])}if(t&&Te!==void 0)return Te;const Ee=this.getBaseTargetFromProps(this.props,e);return Ee!==void 0&&!isMotionValue(Ee)?Ee:this.initialValues[e]!==void 0&&Te===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:Te}){delete t[e],delete Te[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function renderHTML(n,{style:e,vars:t},Te,Ee){const Re=n.style;let Ce;for(Ce in e)Re[Ce]=e[Ce];Ee?.applyProjectionStyles(Re,Te);for(Ce in t)Re.setProperty(Ce,t[Ce])}function getComputedStyle$1(n){return window.getComputedStyle(n)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,t){if(transformProps.has(t))return this.projection?.isProjecting?defaultTransformValue(t):readTransformValue(e,t);{const Te=getComputedStyle$1(e),Ee=(isCSSVariableName(t)?Te.getPropertyValue(t):Te[t])||0;return typeof Ee=="string"?Ee.trim():Ee}}measureInstanceViewportBox(e,{transformPagePoint:t}){return measureViewportBox(e,t)}build(e,t,Te){buildHTMLStyles(e,t,Te.transformTemplate)}scrapeMotionValuesFromProps(e,t,Te){return scrapeMotionValuesFromProps$1(e,t,Te)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(n,e,t,Te){renderHTML(n,e,void 0,Te);for(const Ee in e.attrs)n.setAttribute(camelCaseAttributes.has(Ee)?Ee:camelToDash(Ee),e.attrs[Ee])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(transformProps.has(t)){const Te=getDefaultValueType(t);return Te&&Te.default||0}return t=camelCaseAttributes.has(t)?t:camelToDash(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,Te){return scrapeMotionValuesFromProps(e,t,Te)}build(e,t,Te){buildSVGAttrs(e,t,this.isSVGTag,Te.transformTemplate,Te.style)}renderInstance(e,t,Te,Ee){renderSVG(e,t,Te,Ee)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(n,e)=>isSVGComponent(n)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:n!==reactExports.Fragment});function resolveVariant(n,e,t){const Te=n.getProps();return resolveVariantFromProps(Te,e,t!==void 0?t:Te.custom,n)}const isKeyframesTarget=n=>Array.isArray(n);function setMotionValue(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,motionValue(t))}function resolveFinalValueInKeyframes(n){return isKeyframesTarget(n)?n[n.length-1]||0:n}function setTarget(n,e){const t=resolveVariant(n,e);let{transitionEnd:Te={},transition:Ee={},...Re}=t||{};Re={...Re,...Te};for(const Ce in Re){const De=resolveFinalValueInKeyframes(Re[Ce]);setMotionValue(n,Ce,De)}}function isWillChangeMotionValue(n){return!!(isMotionValue(n)&&n.add)}function addValueToWillChange(n,e){const t=n.getValue("willChange");if(isWillChangeMotionValue(t))return t.add(e);if(!t&&MotionGlobalConfig.WillChange){const Te=new MotionGlobalConfig.WillChange("auto");n.addValue("willChange",Te),Te.add(e)}}function getOptimisedAppearId(n){return n.props[optimizedAppearDataAttribute]}const isNotNull=n=>n!==null;function getFinalKeyframe(n,{repeat:e,repeatType:t="loop"},Te){const Ee=n.filter(isNotNull),Re=e&&t!=="loop"&&e%2===1?0:Ee.length-1;return Ee[Re]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(n,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(n)?n.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:n,delay:e,delayChildren:t,staggerChildren:Te,staggerDirection:Ee,repeat:Re,repeatType:Ce,repeatDelay:De,from:$e,elapsed:Ve,...Be}){return!!Object.keys(Be).length}const animateMotionValue=(n,e,t,Te={},Ee,Re)=>Ce=>{const De=getValueTransition(Te,n)||{},$e=De.delay||Te.delay||0;let{elapsed:Ve=0}=Te;Ve=Ve-secondsToMilliseconds($e);const Be={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...De,delay:-Ve,onUpdate:Oe=>{e.set(Oe),De.onUpdate&&De.onUpdate(Oe)},onComplete:()=>{Ce(),De.onComplete&&De.onComplete()},name:n,motionValue:e,element:Re?void 0:Ee};isTransitionDefined(De)||Object.assign(Be,getDefaultTransition(n,Be)),Be.duration&&(Be.duration=secondsToMilliseconds(Be.duration)),Be.repeatDelay&&(Be.repeatDelay=secondsToMilliseconds(Be.repeatDelay)),Be.from!==void 0&&(Be.keyframes[0]=Be.from);let Me=!1;if((Be.type===!1||Be.duration===0&&!Be.repeatDelay)&&(makeAnimationInstant(Be),Be.delay===0&&(Me=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(Me=!0,makeAnimationInstant(Be),Be.delay=0),Be.allowFlatten=!De.type&&!De.ease,Me&&!Re&&e.get()!==void 0){const Oe=getFinalKeyframe(Be.keyframes,De);if(Oe!==void 0){frame.update(()=>{Be.onUpdate(Oe),Be.onComplete()});return}}return De.isSync?new JSAnimation(Be):new AsyncMotionValueAnimation(Be)};function shouldBlockAnimation({protectedKeys:n,needsAnimating:e},t){const Te=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,Te}function animateTarget(n,e,{delay:t=0,transitionOverride:Te,type:Ee}={}){let{transition:Re=n.getDefaultTransition(),transitionEnd:Ce,...De}=e;Te&&(Re=Te);const $e=[],Ve=Ee&&n.animationState&&n.animationState.getState()[Ee];for(const Be in De){const Me=n.getValue(Be,n.latestValues[Be]??null),Oe=De[Be];if(Oe===void 0||Ve&&shouldBlockAnimation(Ve,Be))continue;const Ue={delay:t,...getValueTransition(Re||{},Be)},ze=Me.get();if(ze!==void 0&&!Me.isAnimating&&!Array.isArray(Oe)&&Oe===ze&&!Ue.velocity)continue;let He=!1;if(window.MotionHandoffAnimation){const Ke=getOptimisedAppearId(n);if(Ke){const Xe=window.MotionHandoffAnimation(Ke,Be,frame);Xe!==null&&(Ue.startTime=Xe,He=!0)}}addValueToWillChange(n,Be),Me.start(animateMotionValue(Be,Me,Oe,n.shouldReduceMotion&&positionalKeys.has(Be)?{type:!1}:Ue,n,He));const Ge=Me.animation;Ge&&$e.push(Ge)}return Ce&&Promise.all($e).then(()=>{frame.update(()=>{Ce&&setTarget(n,Ce)})}),$e}function calcChildStagger(n,e,t,Te=0,Ee=1){const Re=Array.from(n).sort((Ve,Be)=>Ve.sortNodePosition(Be)).indexOf(e),Ce=n.size,De=(Ce-1)*Te;return typeof t=="function"?t(Re,Ce):Ee===1?Re*Te:De-Re*Te}function animateVariant(n,e,t={}){const Te=resolveVariant(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:Ee=n.getDefaultTransition()||{}}=Te||{};t.transitionOverride&&(Ee=t.transitionOverride);const Re=Te?()=>Promise.all(animateTarget(n,Te,t)):()=>Promise.resolve(),Ce=n.variantChildren&&n.variantChildren.size?($e=0)=>{const{delayChildren:Ve=0,staggerChildren:Be,staggerDirection:Me}=Ee;return animateChildren(n,e,$e,Ve,Be,Me,t)}:()=>Promise.resolve(),{when:De}=Ee;if(De){const[$e,Ve]=De==="beforeChildren"?[Re,Ce]:[Ce,Re];return $e().then(()=>Ve())}else return Promise.all([Re(),Ce(t.delay)])}function animateChildren(n,e,t=0,Te=0,Ee=0,Re=1,Ce){const De=[];for(const $e of n.variantChildren)$e.notify("AnimationStart",e),De.push(animateVariant($e,e,{...Ce,delay:t+(typeof Te=="function"?0:Te)+calcChildStagger(n.variantChildren,$e,Te,Ee,Re)}).then(()=>$e.notify("AnimationComplete",e)));return Promise.all(De)}function animateVisualElement(n,e,t={}){n.notify("AnimationStart",e);let Te;if(Array.isArray(e)){const Ee=e.map(Re=>animateVariant(n,Re,t));Te=Promise.all(Ee)}else if(typeof e=="string")Te=animateVariant(n,e,t);else{const Ee=typeof e=="function"?resolveVariant(n,e,t.custom):e;Te=Promise.all(animateTarget(n,Ee,t))}return Te.then(()=>{n.notify("AnimationComplete",e)})}function shallowCompare(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let Te=0;Te<t;Te++)if(e[Te]!==n[Te])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?getVariantContext(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<numVariantProps;t++){const Te=variantProps[t],Ee=n.props[Te];(isVariantLabel(Ee)||Ee===!1)&&(e[Te]=Ee)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(n){return e=>Promise.all(e.map(({animation:t,options:Te})=>animateVisualElement(n,t,Te)))}function createAnimationState(n){let e=animateList(n),t=createState$1(),Te=!0;const Ee=$e=>(Ve,Be)=>{const Me=resolveVariant(n,Be,$e==="exit"?n.presenceContext?.custom:void 0);if(Me){const{transition:Oe,transitionEnd:Ue,...ze}=Me;Ve={...Ve,...ze,...Ue}}return Ve};function Re($e){e=$e(n)}function Ce($e){const{props:Ve}=n,Be=getVariantContext(n.parent)||{},Me=[],Oe=new Set;let Ue={},ze=1/0;for(let Ge=0;Ge<numAnimationTypes;Ge++){const Ke=reversePriorityOrder[Ge],Xe=t[Ke],Je=Ve[Ke]!==void 0?Ve[Ke]:Be[Ke],un=isVariantLabel(Je),fn=Ke===$e?Xe.isActive:null;fn===!1&&(ze=Ge);let yn=Je===Be[Ke]&&Je!==Ve[Ke]&&un;if(yn&&Te&&n.manuallyAnimateOnMount&&(yn=!1),Xe.protectedKeys={...Ue},!Xe.isActive&&fn===null||!Je&&!Xe.prevProp||isAnimationControls(Je)||typeof Je=="boolean")continue;const gn=checkVariantsDidChange(Xe.prevProp,Je);let mn=gn||Ke===$e&&Xe.isActive&&!yn&&un||Ge>ze&&un,dn=!1;const vn=Array.isArray(Je)?Je:[Je];let bn=vn.reduce(Ee(Ke),{});fn===!1&&(bn={});const{prevResolvedValues:Tn={}}=Xe,En={...Tn,...bn},In=Fn=>{mn=!0,Oe.has(Fn)&&(dn=!0,Oe.delete(Fn)),Xe.needsAnimating[Fn]=!0;const $n=n.getValue(Fn);$n&&($n.liveStyle=!1)};for(const Fn in En){const $n=bn[Fn],Hn=Tn[Fn];if(Ue.hasOwnProperty(Fn))continue;let Dn=!1;isKeyframesTarget($n)&&isKeyframesTarget(Hn)?Dn=!shallowCompare($n,Hn):Dn=$n!==Hn,Dn?$n!=null?In(Fn):Oe.add(Fn):$n!==void 0&&Oe.has(Fn)?In(Fn):Xe.protectedKeys[Fn]=!0}Xe.prevProp=Je,Xe.prevResolvedValues=bn,Xe.isActive&&(Ue={...Ue,...bn}),Te&&n.blockInitialAnimation&&(mn=!1);const Nn=yn&&gn;mn&&(!Nn||dn)&&Me.push(...vn.map(Fn=>{const $n={type:Ke};if(typeof Fn=="string"&&Te&&!Nn&&n.manuallyAnimateOnMount&&n.parent){const{parent:Hn}=n,Dn=resolveVariant(Hn,Fn);if(Hn.enteringChildren&&Dn){const{delayChildren:Un}=Dn.transition||{};$n.delay=calcChildStagger(Hn.enteringChildren,n,Un)}}return{animation:Fn,options:$n}}))}if(Oe.size){const Ge={};if(typeof Ve.initial!="boolean"){const Ke=resolveVariant(n,Array.isArray(Ve.initial)?Ve.initial[0]:Ve.initial);Ke&&Ke.transition&&(Ge.transition=Ke.transition)}Oe.forEach(Ke=>{const Xe=n.getBaseTarget(Ke),Je=n.getValue(Ke);Je&&(Je.liveStyle=!0),Ge[Ke]=Xe??null}),Me.push({animation:Ge})}let He=!!Me.length;return Te&&(Ve.initial===!1||Ve.initial===Ve.animate)&&!n.manuallyAnimateOnMount&&(He=!1),Te=!1,He?e(Me):Promise.resolve()}function De($e,Ve){if(t[$e].isActive===Ve)return Promise.resolve();n.variantChildren?.forEach(Me=>Me.animationState?.setActive($e,Ve)),t[$e].isActive=Ve;const Be=Ce($e);for(const Me in t)t[Me].protectedKeys={};return Be}return{animateChanges:Ce,setActive:De,setAnimateFunction:Re,getState:()=>t,reset:()=>{t=createState$1(),Te=!0}}}function checkVariantsDidChange(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!shallowCompare(e,n):!1}function createTypeState(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState$1(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:Te}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===Te)return;const Ee=this.node.animationState.setActive("exit",!e);t&&!e&&Ee.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(n,e,t,Te={passive:!0}){return n.addEventListener(e,t,Te),()=>n.removeEventListener(e,t)}function extractEventInfo(n){return{point:{x:n.pageX,y:n.pageY}}}const addPointerInfo=n=>e=>isPrimaryPointer(e)&&n(e,extractEventInfo(e));function addPointerEvent(n,e,t,Te){return addDomEvent(n,e,addPointerInfo(t),Te)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(n){return n.max-n.min}function isNear(n,e,t){return Math.abs(n-e)<=t}function calcAxisDelta(n,e,t,Te=.5){n.origin=Te,n.originPoint=mixNumber$1(e.min,e.max,n.origin),n.scale=calcLength(t)/calcLength(e),n.translate=mixNumber$1(t.min,t.max,n.origin)-n.originPoint,(n.scale>=SCALE_MIN&&n.scale<=SCALE_MAX||isNaN(n.scale))&&(n.scale=1),(n.translate>=TRANSLATE_MIN&&n.translate<=TRANSLATE_MAX||isNaN(n.translate))&&(n.translate=0)}function calcBoxDelta(n,e,t,Te){calcAxisDelta(n.x,e.x,t.x,Te?Te.originX:void 0),calcAxisDelta(n.y,e.y,t.y,Te?Te.originY:void 0)}function calcRelativeAxis(n,e,t){n.min=t.min+e.min,n.max=n.min+calcLength(e)}function calcRelativeBox(n,e,t){calcRelativeAxis(n.x,e.x,t.x),calcRelativeAxis(n.y,e.y,t.y)}function calcRelativeAxisPosition(n,e,t){n.min=e.min-t.min,n.max=n.min+calcLength(e)}function calcRelativePosition(n,e,t){calcRelativeAxisPosition(n.x,e.x,t.x),calcRelativeAxisPosition(n.y,e.y,t.y)}function eachAxis(n){return[n("x"),n("y")]}const getContextWindow=({current:n})=>n?n.ownerDocument.defaultView:null,distance=(n,e)=>Math.abs(n-e);function distance2D(n,e){const t=distance(n.x,e.x),Te=distance(n.y,e.y);return Math.sqrt(t**2+Te**2)}class PanSession{constructor(e,t,{transformPagePoint:Te,contextWindow:Ee=window,dragSnapToOrigin:Re=!1,distanceThreshold:Ce=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Oe=getPanInfo(this.lastMoveEventInfo,this.history),Ue=this.startEvent!==null,ze=distance2D(Oe.offset,{x:0,y:0})>=this.distanceThreshold;if(!Ue&&!ze)return;const{point:He}=Oe,{timestamp:Ge}=frameData;this.history.push({...He,timestamp:Ge});const{onStart:Ke,onMove:Xe}=this.handlers;Ue||(Ke&&Ke(this.lastMoveEvent,Oe),this.startEvent=this.lastMoveEvent),Xe&&Xe(this.lastMoveEvent,Oe)},this.handlePointerMove=(Oe,Ue)=>{this.lastMoveEvent=Oe,this.lastMoveEventInfo=transformPoint(Ue,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Oe,Ue)=>{this.end();const{onEnd:ze,onSessionEnd:He,resumeAnimation:Ge}=this.handlers;if(this.dragSnapToOrigin&&Ge&&Ge(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ke=getPanInfo(Oe.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Ue,this.transformPagePoint),this.history);this.startEvent&&ze&&ze(Oe,Ke),He&&He(Oe,Ke)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=Re,this.handlers=t,this.transformPagePoint=Te,this.distanceThreshold=Ce,this.contextWindow=Ee||window;const De=extractEventInfo(e),$e=transformPoint(De,this.transformPagePoint),{point:Ve}=$e,{timestamp:Be}=frameData;this.history=[{...Ve,timestamp:Be}];const{onSessionStart:Me}=t;Me&&Me(e,getPanInfo($e,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(n,e){return e?{point:e(n.point)}:n}function subtractPoint(n,e){return{x:n.x-e.x,y:n.y-e.y}}function getPanInfo({point:n},e){return{point:n,delta:subtractPoint(n,lastDevicePoint(e)),offset:subtractPoint(n,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(n){return n[0]}function lastDevicePoint(n){return n[n.length-1]}function getVelocity(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,Te=null;const Ee=lastDevicePoint(n);for(;t>=0&&(Te=n[t],!(Ee.timestamp-Te.timestamp>secondsToMilliseconds(e)));)t--;if(!Te)return{x:0,y:0};const Re=millisecondsToSeconds(Ee.timestamp-Te.timestamp);if(Re===0)return{x:0,y:0};const Ce={x:(Ee.x-Te.x)/Re,y:(Ee.y-Te.y)/Re};return Ce.x===1/0&&(Ce.x=0),Ce.y===1/0&&(Ce.y=0),Ce}function applyConstraints(n,{min:e,max:t},Te){return e!==void 0&&n<e?n=Te?mixNumber$1(e,n,Te.min):Math.max(n,e):t!==void 0&&n>t&&(n=Te?mixNumber$1(t,n,Te.max):Math.min(n,t)),n}function calcRelativeAxisConstraints(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function calcRelativeConstraints(n,{top:e,left:t,bottom:Te,right:Ee}){return{x:calcRelativeAxisConstraints(n.x,t,Ee),y:calcRelativeAxisConstraints(n.y,e,Te)}}function calcViewportAxisConstraints(n,e){let t=e.min-n.min,Te=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,Te]=[Te,t]),{min:t,max:Te}}function calcViewportConstraints(n,e){return{x:calcViewportAxisConstraints(n.x,e.x),y:calcViewportAxisConstraints(n.y,e.y)}}function calcOrigin(n,e){let t=.5;const Te=calcLength(n),Ee=calcLength(e);return Ee>Te?t=progress(e.min,e.max-Te,n.min):Te>Ee&&(t=progress(n.min,n.max-Ee,e.min)),clamp(0,1,t)}function rebaseAxisConstraints(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const defaultElastic=.35;function resolveDragElastic(n=defaultElastic){return n===!1?n=0:n===!0&&(n=defaultElastic),{x:resolveAxisElastic(n,"left","right"),y:resolveAxisElastic(n,"top","bottom")}}function resolveAxisElastic(n,e,t){return{min:resolvePointElastic(n,e),max:resolvePointElastic(n,t)}}function resolvePointElastic(n,e){return typeof n=="number"?n:n[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:Te}={}){const{presenceContext:Ee}=this.visualElement;if(Ee&&Ee.isPresent===!1)return;const Re=Me=>{const{dragSnapToOrigin:Oe}=this.getProps();Oe?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(extractEventInfo(Me).point)},Ce=(Me,Oe)=>{const{drag:Ue,dragPropagation:ze,onDragStart:He}=this.getProps();if(Ue&&!ze&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(Ue),!this.openDragLock))return;this.latestPointerEvent=Me,this.latestPanInfo=Oe,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Ke=>{let Xe=this.getAxisMotionValue(Ke).get()||0;if(percent.test(Xe)){const{projection:Je}=this.visualElement;if(Je&&Je.layout){const un=Je.layout.layoutBox[Ke];un&&(Xe=calcLength(un)*(parseFloat(Xe)/100))}}this.originPoint[Ke]=Xe}),He&&frame.postRender(()=>He(Me,Oe)),addValueToWillChange(this.visualElement,"transform");const{animationState:Ge}=this.visualElement;Ge&&Ge.setActive("whileDrag",!0)},De=(Me,Oe)=>{this.latestPointerEvent=Me,this.latestPanInfo=Oe;const{dragPropagation:Ue,dragDirectionLock:ze,onDirectionLock:He,onDrag:Ge}=this.getProps();if(!Ue&&!this.openDragLock)return;const{offset:Ke}=Oe;if(ze&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Ke),this.currentDirection!==null&&He&&He(this.currentDirection);return}this.updateAxis("x",Oe.point,Ke),this.updateAxis("y",Oe.point,Ke),this.visualElement.render(),Ge&&Ge(Me,Oe)},$e=(Me,Oe)=>{this.latestPointerEvent=Me,this.latestPanInfo=Oe,this.stop(Me,Oe),this.latestPointerEvent=null,this.latestPanInfo=null},Ve=()=>eachAxis(Me=>this.getAnimationState(Me)==="paused"&&this.getAxisMotionValue(Me).animation?.play()),{dragSnapToOrigin:Be}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:Re,onStart:Ce,onMove:De,onSessionEnd:$e,resumeAnimation:Ve},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:Be,distanceThreshold:Te,contextWindow:getContextWindow(this.visualElement)})}stop(e,t){const Te=e||this.latestPointerEvent,Ee=t||this.latestPanInfo,Re=this.isDragging;if(this.cancel(),!Re||!Ee||!Te)return;const{velocity:Ce}=Ee;this.startAnimation(Ce);const{onDragEnd:De}=this.getProps();De&&frame.postRender(()=>De(Te,Ee))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:Te}=this.getProps();!Te&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,Te){const{drag:Ee}=this.getProps();if(!Te||!shouldDrag(e,Ee,this.currentDirection))return;const Re=this.getAxisMotionValue(e);let Ce=this.originPoint[e]+Te[e];this.constraints&&this.constraints[e]&&(Ce=applyConstraints(Ce,this.constraints[e],this.elastic[e])),Re.set(Ce)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),Te=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,Ee=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&Te?this.constraints=calcRelativeConstraints(Te.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(t),Ee!==this.constraints&&Te&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(Re=>{this.constraints!==!1&&this.getAxisMotionValue(Re)&&(this.constraints[Re]=rebaseAxisConstraints(Te.layoutBox[Re],this.constraints[Re]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!isRefObject(e))return!1;const Te=e.current,{projection:Ee}=this.visualElement;if(!Ee||!Ee.layout)return!1;const Re=measurePageBox(Te,Ee.root,this.visualElement.getTransformPagePoint());let Ce=calcViewportConstraints(Ee.layout.layoutBox,Re);if(t){const De=t(convertBoxToBoundingBox(Ce));this.hasMutatedConstraints=!!De,De&&(Ce=convertBoundingBoxToBox(De))}return Ce}startAnimation(e){const{drag:t,dragMomentum:Te,dragElastic:Ee,dragTransition:Re,dragSnapToOrigin:Ce,onDragTransitionEnd:De}=this.getProps(),$e=this.constraints||{},Ve=eachAxis(Be=>{if(!shouldDrag(Be,t,this.currentDirection))return;let Me=$e&&$e[Be]||{};Ce&&(Me={min:0,max:0});const Oe=Ee?200:1e6,Ue=Ee?40:1e7,ze={type:"inertia",velocity:Te?e[Be]:0,bounceStiffness:Oe,bounceDamping:Ue,timeConstant:750,restDelta:1,restSpeed:10,...Re,...Me};return this.startAxisValueAnimation(Be,ze)});return Promise.all(Ve).then(De)}startAxisValueAnimation(e,t){const Te=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),Te.start(animateMotionValue(e,Te,0,t,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,Te=this.visualElement.getProps(),Ee=Te[t];return Ee||this.visualElement.getValue(e,(Te.initial?Te.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(t=>{const{drag:Te}=this.getProps();if(!shouldDrag(t,Te,this.currentDirection))return;const{projection:Ee}=this.visualElement,Re=this.getAxisMotionValue(t);if(Ee&&Ee.layout){const{min:Ce,max:De}=Ee.layout.layoutBox[t];Re.set(e[t]-mixNumber$1(Ce,De,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:Te}=this.visualElement;if(!isRefObject(t)||!Te||!this.constraints)return;this.stopAnimation();const Ee={x:0,y:0};eachAxis(Ce=>{const De=this.getAxisMotionValue(Ce);if(De&&this.constraints!==!1){const $e=De.get();Ee[Ce]=calcOrigin({min:$e,max:$e},this.constraints[Ce])}});const{transformTemplate:Re}=this.visualElement.getProps();this.visualElement.current.style.transform=Re?Re({},""):"none",Te.root&&Te.root.updateScroll(),Te.updateLayout(),this.resolveConstraints(),eachAxis(Ce=>{if(!shouldDrag(Ce,e,null))return;const De=this.getAxisMotionValue(Ce),{min:$e,max:Ve}=this.constraints[Ce];De.set(mixNumber$1($e,Ve,Ee[Ce]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,t=addPointerEvent(e,"pointerdown",$e=>{const{drag:Ve,dragListener:Be=!0}=this.getProps();Ve&&Be&&this.start($e)}),Te=()=>{const{dragConstraints:$e}=this.getProps();isRefObject($e)&&$e.current&&(this.constraints=this.resolveRefConstraints())},{projection:Ee}=this.visualElement,Re=Ee.addEventListener("measure",Te);Ee&&!Ee.layout&&(Ee.root&&Ee.root.updateScroll(),Ee.updateLayout()),frame.read(Te);const Ce=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),De=Ee.addEventListener("didUpdate",({delta:$e,hasLayoutChanged:Ve})=>{this.isDragging&&Ve&&(eachAxis(Be=>{const Me=this.getAxisMotionValue(Be);Me&&(this.originPoint[Be]+=$e[Be].translate,Me.set(Me.get()+$e[Be].translate))}),this.visualElement.render())});return()=>{Ce(),t(),Re(),De&&De()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:Te=!1,dragPropagation:Ee=!1,dragConstraints:Re=!1,dragElastic:Ce=defaultElastic,dragMomentum:De=!0}=e;return{...e,drag:t,dragDirectionLock:Te,dragPropagation:Ee,dragConstraints:Re,dragElastic:Ce,dragMomentum:De}}}function shouldDrag(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function getCurrentDirection(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=n=>(e,t)=>{n&&frame.postRender(()=>n(e,t))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:Te,onPanEnd:Ee}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(t),onMove:Te,onEnd:(Re,Ce)=>{delete this.session,Ee&&frame.postRender(()=>Ee(Re,Ce))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const correctBorderRadius={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(px.test(n))n=parseFloat(n);else return n;const t=pixelsToPercent(n,e.target.x),Te=pixelsToPercent(n,e.target.y);return`${t}% ${Te}%`}},correctBoxShadow={correct:(n,{treeScale:e,projectionDelta:t})=>{const Te=n,Ee=complex.parse(n);if(Ee.length>5)return Te;const Re=complex.createTransformer(n),Ce=typeof Ee[0]!="number"?1:0,De=t.x.scale*e.x,$e=t.y.scale*e.y;Ee[0+Ce]/=De,Ee[1+Ce]/=$e;const Ve=mixNumber$1(De,$e,.5);return typeof Ee[2+Ce]=="number"&&(Ee[2+Ce]/=Ve),typeof Ee[3+Ce]=="number"&&(Ee[3+Ce]/=Ve),Re(Ee)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:Te,layoutId:Ee}=this.props,{projection:Re}=e;addScaleCorrector(defaultScaleCorrectors),Re&&(t.group&&t.group.add(Re),Te&&Te.register&&Ee&&Te.register(Re),hasTakenAnySnapshot&&Re.root.didUpdate(),Re.addEventListener("animationComplete",()=>{this.safeToRemove()}),Re.setOptions({...Re.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:Te,drag:Ee,isPresent:Re}=this.props,{projection:Ce}=Te;return Ce&&(Ce.isPresent=Re,hasTakenAnySnapshot=!0,Ee||e.layoutDependency!==t||t===void 0||e.isPresent!==Re?Ce.willUpdate():this.safeToRemove(),e.isPresent!==Re&&(Re?Ce.promote():Ce.relegate()||frame.postRender(()=>{const De=Ce.getStack();(!De||!De.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:Te}=this.props,{projection:Ee}=e;hasTakenAnySnapshot=!0,Ee&&(Ee.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(Ee),Te&&Te.deregister&&Te.deregister(Ee))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(n){const[e,t]=usePresence(),Te=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...n,layoutGroup:Te,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:t})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(n,e,t){const Te=isMotionValue(n)?n:motionValue(n);return Te.start(animateMotionValue("",Te,e,t)),Te.animation}const compareByDepth=(n,e)=>n.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(n,e){const t=time.now(),Te=({timestamp:Ee})=>{const Re=Ee-t;Re>=e&&(cancelFrame(Te),n(Re-e))};return frame.setup(Te,!0),()=>cancelFrame(Te)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=n=>typeof n=="string"?parseFloat(n):n,isPx=n=>typeof n=="number"||px.test(n);function mixValues(n,e,t,Te,Ee,Re){Ee?(n.opacity=mixNumber$1(0,t.opacity??1,easeCrossfadeIn(Te)),n.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(Te))):Re&&(n.opacity=mixNumber$1(e.opacity??1,t.opacity??1,Te));for(let Ce=0;Ce<numBorders;Ce++){const De=`border${borders[Ce]}Radius`;let $e=getRadius(e,De),Ve=getRadius(t,De);if($e===void 0&&Ve===void 0)continue;$e||($e=0),Ve||(Ve=0),$e===0||Ve===0||isPx($e)===isPx(Ve)?(n[De]=Math.max(mixNumber$1(asNumber($e),asNumber(Ve),Te),0),(percent.test(Ve)||percent.test($e))&&(n[De]+="%")):n[De]=Ve}(e.rotate||t.rotate)&&(n.rotate=mixNumber$1(e.rotate||0,t.rotate||0,Te))}function getRadius(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(n,e,t){return Te=>Te<n?0:Te>e?1:t(progress(n,e,Te))}function copyAxisInto(n,e){n.min=e.min,n.max=e.max}function copyBoxInto(n,e){copyAxisInto(n.x,e.x),copyAxisInto(n.y,e.y)}function copyAxisDeltaInto(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function removePointDelta(n,e,t,Te,Ee){return n-=e,n=scalePoint(n,1/t,Te),Ee!==void 0&&(n=scalePoint(n,1/Ee,Te)),n}function removeAxisDelta(n,e=0,t=1,Te=.5,Ee,Re=n,Ce=n){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(Ce.min,Ce.max,e/100)-Ce.min),typeof e!="number")return;let De=mixNumber$1(Re.min,Re.max,Te);n===Re&&(De-=e),n.min=removePointDelta(n.min,e,t,De,Ee),n.max=removePointDelta(n.max,e,t,De,Ee)}function removeAxisTransforms(n,e,[t,Te,Ee],Re,Ce){removeAxisDelta(n,e[t],e[Te],e[Ee],e.scale,Re,Ce)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(n,e,t,Te){removeAxisTransforms(n.x,e,xKeys,t?t.x:void 0,Te?Te.x:void 0),removeAxisTransforms(n.y,e,yKeys,t?t.y:void 0,Te?Te.y:void 0)}function isAxisDeltaZero(n){return n.translate===0&&n.scale===1}function isDeltaZero(n){return isAxisDeltaZero(n.x)&&isAxisDeltaZero(n.y)}function axisEquals(n,e){return n.min===e.min&&n.max===e.max}function boxEquals(n,e){return axisEquals(n.x,e.x)&&axisEquals(n.y,e.y)}function axisEqualsRounded(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function boxEqualsRounded(n,e){return axisEqualsRounded(n.x,e.x)&&axisEqualsRounded(n.y,e.y)}function aspectRatio(n){return calcLength(n.x)/calcLength(n.y)}function axisDeltaEquals(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(Ee=>e===Ee);if(t===0)return!1;let Te;for(let Ee=t;Ee>=0;Ee--){const Re=this.members[Ee];if(Re.isPresent!==!1){Te=Re;break}}return Te?(this.promote(Te),!0):!1}promote(e,t){const Te=this.lead;if(e!==Te&&(this.prevLead=Te,this.lead=e,e.show(),Te)){Te.instance&&Te.scheduleRender(),e.scheduleRender(),e.resumeFrom=Te,t&&(e.resumeFrom.preserveOpacity=!0),Te.snapshot&&(e.snapshot=Te.snapshot,e.snapshot.latestValues=Te.animationValues||Te.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:Ee}=e.options;Ee===!1&&Te.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:Te}=e;t.onExitComplete&&t.onExitComplete(),Te&&Te.options.onExitComplete&&Te.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(n,e,t){let Te="";const Ee=n.x.translate/e.x,Re=n.y.translate/e.y,Ce=t?.z||0;if((Ee||Re||Ce)&&(Te=`translate3d(${Ee}px, ${Re}px, ${Ce}px) `),(e.x!==1||e.y!==1)&&(Te+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:Ve,rotate:Be,rotateX:Me,rotateY:Oe,skewX:Ue,skewY:ze}=t;Ve&&(Te=`perspective(${Ve}px) ${Te}`),Be&&(Te+=`rotate(${Be}deg) `),Me&&(Te+=`rotateX(${Me}deg) `),Oe&&(Te+=`rotateY(${Oe}deg) `),Ue&&(Te+=`skewX(${Ue}deg) `),ze&&(Te+=`skewY(${ze}deg) `)}const De=n.x.scale*e.x,$e=n.y.scale*e.y;return(De!==1||$e!==1)&&(Te+=`scale(${De}, ${$e})`),Te||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(n,e,t,Te){const{latestValues:Ee}=e;Ee[n]&&(t[n]=Ee[n],e.setStaticValue(n,0),Te&&(Te[n]=0))}function cancelTreeOptimisedTransformAnimations(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:Ee,layoutId:Re}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",frame,!(Ee||Re))}const{parent:Te}=n;Te&&!Te.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(Te)}function createProjectionNode({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:Te,resetTransform:Ee}){return class{constructor(Ce={},De=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=Ce,this.root=De?De.root||De:this,this.path=De?[...De.path,De]:[],this.parent=De,this.depth=De?De.depth+1:0;for(let $e=0;$e<this.path.length;$e++)this.path[$e].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(Ce,De){return this.eventHandlers.has(Ce)||this.eventHandlers.set(Ce,new SubscriptionManager),this.eventHandlers.get(Ce).add(De)}notifyListeners(Ce,...De){const $e=this.eventHandlers.get(Ce);$e&&$e.notify(...De)}hasListeners(Ce){return this.eventHandlers.has(Ce)}mount(Ce){if(this.instance)return;this.isSVG=isSVGElement(Ce)&&!isSVGSVGElement(Ce),this.instance=Ce;const{layoutId:De,layout:$e,visualElement:Ve}=this.options;if(Ve&&!Ve.current&&Ve.mount(Ce),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&($e||De)&&(this.isLayoutDirty=!0),n){let Be,Me=0;const Oe=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{Me=window.innerWidth}),n(Ce,()=>{const Ue=window.innerWidth;Ue!==Me&&(Me=Ue,this.root.updateBlockedByResize=!0,Be&&Be(),Be=delay(Oe,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}De&&this.root.registerSharedNode(De,this),this.options.animate!==!1&&Ve&&(De||$e)&&this.addEventListener("didUpdate",({delta:Be,hasLayoutChanged:Me,hasRelativeLayoutChanged:Oe,layout:Ue})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ze=this.options.transition||Ve.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:He,onLayoutAnimationComplete:Ge}=Ve.getProps(),Ke=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Ue),Xe=!Me&&Oe;if(this.options.layoutRoot||this.resumeFrom||Xe||Me&&(Ke||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Je={...getValueTransition(ze,"layout"),onPlay:He,onComplete:Ge};(Ve.shouldReduceMotion||this.options.layoutRoot)&&(Je.delay=0,Je.type=!1),this.startAnimation(Je),this.setAnimationOrigin(Be,Xe)}else Me||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Ue})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const Ce=this.getStack();Ce&&Ce.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:Ce}=this.options;return Ce&&Ce.getProps().transformTemplate}willUpdate(Ce=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Be=0;Be<this.path.length;Be++){const Me=this.path[Be];Me.shouldResetTransform=!0,Me.updateScroll("snapshot"),Me.options.layoutRoot&&Me.willUpdate(!1)}const{layoutId:De,layout:$e}=this.options;if(De===void 0&&!$e)return;const Ve=this.getTransformTemplate();this.prevTransformTemplateValue=Ve?Ve(this.latestValues,""):void 0,this.updateSnapshot(),Ce&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const De=time.now();frameData.delta=clamp(0,1e3/60,De-frameData.timestamp),frameData.timestamp=De,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let $e=0;$e<this.path.length;$e++)this.path[$e].updateScroll();const Ce=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:De}=this.options;De&&De.notify("LayoutMeasure",this.layout.layoutBox,Ce?Ce.layoutBox:void 0)}updateScroll(Ce="measure"){let De=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===Ce&&(De=!1),De&&this.instance){const $e=Te(this.instance);this.scroll={animationId:this.root.animationId,phase:Ce,isRoot:$e,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:$e}}}resetTransform(){if(!Ee)return;const Ce=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,De=this.projectionDelta&&!isDeltaZero(this.projectionDelta),$e=this.getTransformTemplate(),Ve=$e?$e(this.latestValues,""):void 0,Be=Ve!==this.prevTransformTemplateValue;Ce&&this.instance&&(De||hasTransform(this.latestValues)||Be)&&(Ee(this.instance,Ve),this.shouldResetTransform=!1,this.scheduleRender())}measure(Ce=!0){const De=this.measurePageBox();let $e=this.removeElementScroll(De);return Ce&&($e=this.removeTransform($e)),roundBox($e),{animationId:this.root.animationId,measuredBox:De,layoutBox:$e,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:Ce}=this.options;if(!Ce)return createBox();const De=Ce.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:Ve}=this.root;Ve&&(translateAxis(De.x,Ve.offset.x),translateAxis(De.y,Ve.offset.y))}return De}removeElementScroll(Ce){const De=createBox();if(copyBoxInto(De,Ce),this.scroll?.wasRoot)return De;for(let $e=0;$e<this.path.length;$e++){const Ve=this.path[$e],{scroll:Be,options:Me}=Ve;Ve!==this.root&&Be&&Me.layoutScroll&&(Be.wasRoot&&copyBoxInto(De,Ce),translateAxis(De.x,Be.offset.x),translateAxis(De.y,Be.offset.y))}return De}applyTransform(Ce,De=!1){const $e=createBox();copyBoxInto($e,Ce);for(let Ve=0;Ve<this.path.length;Ve++){const Be=this.path[Ve];!De&&Be.options.layoutScroll&&Be.scroll&&Be!==Be.root&&transformBox($e,{x:-Be.scroll.offset.x,y:-Be.scroll.offset.y}),hasTransform(Be.latestValues)&&transformBox($e,Be.latestValues)}return hasTransform(this.latestValues)&&transformBox($e,this.latestValues),$e}removeTransform(Ce){const De=createBox();copyBoxInto(De,Ce);for(let $e=0;$e<this.path.length;$e++){const Ve=this.path[$e];if(!Ve.instance||!hasTransform(Ve.latestValues))continue;hasScale(Ve.latestValues)&&Ve.updateSnapshot();const Be=createBox(),Me=Ve.measurePageBox();copyBoxInto(Be,Me),removeBoxTransforms(De,Ve.latestValues,Ve.snapshot?Ve.snapshot.layoutBox:void 0,Be)}return hasTransform(this.latestValues)&&removeBoxTransforms(De,this.latestValues),De}setTargetDelta(Ce){this.targetDelta=Ce,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(Ce){this.options={...this.options,...Ce,crossfade:Ce.crossfade!==void 0?Ce.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(Ce=!1){const De=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=De.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=De.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=De.isSharedProjectionDirty);const $e=!!this.resumingFrom||this!==De;if(!(Ce||$e&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Be,layoutId:Me}=this.options;if(!(!this.layout||!(Be||Me))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const Oe=this.getClosestProjectingParent();Oe&&Oe.layout&&this.animationProgress!==1?(this.relativeParent=Oe,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,Oe.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const Oe=this.getClosestProjectingParent();Oe&&!!Oe.resumingFrom==!!this.resumingFrom&&!Oe.options.layoutScroll&&Oe.target&&this.animationProgress!==1?(this.relativeParent=Oe,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,Oe.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const Ce=this.getLead(),De=!!this.resumingFrom||this!==Ce;let $e=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&($e=!1),De&&(this.isSharedProjectionDirty||this.isTransformDirty)&&($e=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&($e=!1),$e)return;const{layout:Ve,layoutId:Be}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Ve||Be))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Me=this.treeScale.x,Oe=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,De),Ce.layout&&!Ce.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(Ce.target=Ce.layout.layoutBox,Ce.targetWithTransforms=createBox());const{target:Ue}=Ce;if(!Ue){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,Ue,this.latestValues),(this.treeScale.x!==Me||this.treeScale.y!==Oe||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Ue))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(Ce=!0){if(this.options.visualElement?.scheduleRender(),Ce){const De=this.getStack();De&&De.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(Ce,De=!1){const $e=this.snapshot,Ve=$e?$e.latestValues:{},Be={...this.latestValues},Me=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!De;const Oe=createBox(),Ue=$e?$e.source:void 0,ze=this.layout?this.layout.source:void 0,He=Ue!==ze,Ge=this.getStack(),Ke=!Ge||Ge.members.length<=1,Xe=!!(He&&!Ke&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Je;this.mixTargetDelta=un=>{const fn=un/1e3;mixAxisDelta(Me.x,Ce.x,fn),mixAxisDelta(Me.y,Ce.y,fn),this.setTargetDelta(Me),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Oe,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Oe,fn),Je&&boxEquals(this.relativeTarget,Je)&&(this.isProjectionDirty=!1),Je||(Je=createBox()),copyBoxInto(Je,this.relativeTarget)),He&&(this.animationValues=Be,mixValues(Be,Ve,this.latestValues,fn,Xe,Ke)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=fn},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(Ce){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...Ce,velocity:0,isSync:!0,onUpdate:De=>{this.mixTargetDelta(De),Ce.onUpdate&&Ce.onUpdate(De)},onStop:()=>{},onComplete:()=>{Ce.onComplete&&Ce.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const Ce=this.getStack();Ce&&Ce.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const Ce=this.getLead();let{targetWithTransforms:De,target:$e,layout:Ve,latestValues:Be}=Ce;if(!(!De||!$e||!Ve)){if(this!==Ce&&this.layout&&Ve&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,Ve.layoutBox)){$e=this.target||createBox();const Me=calcLength(this.layout.layoutBox.x);$e.x.min=Ce.target.x.min,$e.x.max=$e.x.min+Me;const Oe=calcLength(this.layout.layoutBox.y);$e.y.min=Ce.target.y.min,$e.y.max=$e.y.min+Oe}copyBoxInto(De,$e),transformBox(De,Be),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,De,Be)}}registerSharedNode(Ce,De){this.sharedNodes.has(Ce)||this.sharedNodes.set(Ce,new NodeStack),this.sharedNodes.get(Ce).add(De);const Ve=De.options.initialPromotionConfig;De.promote({transition:Ve?Ve.transition:void 0,preserveFollowOpacity:Ve&&Ve.shouldPreserveFollowOpacity?Ve.shouldPreserveFollowOpacity(De):void 0})}isLead(){const Ce=this.getStack();return Ce?Ce.lead===this:!0}getLead(){const{layoutId:Ce}=this.options;return Ce?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:Ce}=this.options;return Ce?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:Ce}=this.options;if(Ce)return this.root.sharedNodes.get(Ce)}promote({needsReset:Ce,transition:De,preserveFollowOpacity:$e}={}){const Ve=this.getStack();Ve&&Ve.promote(this,$e),Ce&&(this.projectionDelta=void 0,this.needsReset=!0),De&&this.setOptions({transition:De})}relegate(){const Ce=this.getStack();return Ce?Ce.relegate(this):!1}resetSkewAndRotation(){const{visualElement:Ce}=this.options;if(!Ce)return;let De=!1;const{latestValues:$e}=Ce;if(($e.z||$e.rotate||$e.rotateX||$e.rotateY||$e.rotateZ||$e.skewX||$e.skewY)&&(De=!0),!De)return;const Ve={};$e.z&&resetDistortingTransform("z",Ce,Ve,this.animationValues);for(let Be=0;Be<transformAxes.length;Be++)resetDistortingTransform(`rotate${transformAxes[Be]}`,Ce,Ve,this.animationValues),resetDistortingTransform(`skew${transformAxes[Be]}`,Ce,Ve,this.animationValues);Ce.render();for(const Be in Ve)Ce.setStaticValue(Be,Ve[Be]),this.animationValues&&(this.animationValues[Be]=Ve[Be]);Ce.scheduleRender()}applyProjectionStyles(Ce,De){if(!this.instance||this.isSVG)return;if(!this.isVisible){Ce.visibility="hidden";return}const $e=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,Ce.visibility="",Ce.opacity="",Ce.pointerEvents=resolveMotionValue(De?.pointerEvents)||"",Ce.transform=$e?$e(this.latestValues,""):"none";return}const Ve=this.getLead();if(!this.projectionDelta||!this.layout||!Ve.target){this.options.layoutId&&(Ce.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Ce.pointerEvents=resolveMotionValue(De?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(Ce.transform=$e?$e({},""):"none",this.hasProjected=!1);return}Ce.visibility="";const Be=Ve.animationValues||Ve.latestValues;this.applyTransformsToTarget();let Me=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Be);$e&&(Me=$e(Be,Me)),Ce.transform=Me;const{x:Oe,y:Ue}=this.projectionDelta;Ce.transformOrigin=`${Oe.origin*100}% ${Ue.origin*100}% 0`,Ve.animationValues?Ce.opacity=Ve===this?Be.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:Be.opacityExit:Ce.opacity=Ve===this?Be.opacity!==void 0?Be.opacity:"":Be.opacityExit!==void 0?Be.opacityExit:0;for(const ze in scaleCorrectors){if(Be[ze]===void 0)continue;const{correct:He,applyTo:Ge,isCSSVariable:Ke}=scaleCorrectors[ze],Xe=Me==="none"?Be[ze]:He(Be[ze],Ve);if(Ge){const Je=Ge.length;for(let un=0;un<Je;un++)Ce[Ge[un]]=Xe}else Ke?this.options.visualElement.renderState.vars[ze]=Xe:Ce[ze]=Xe}this.options.layoutId&&(Ce.pointerEvents=Ve===this?resolveMotionValue(De?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(Ce=>Ce.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(n){n.updateLayout()}function notifyLayoutUpdate(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:Te}=n.layout,{animationType:Ee}=n.options,Re=e.source!==n.layout.source;Ee==="size"?eachAxis(Be=>{const Me=Re?e.measuredBox[Be]:e.layoutBox[Be],Oe=calcLength(Me);Me.min=t[Be].min,Me.max=Me.min+Oe}):shouldAnimatePositionOnly(Ee,e.layoutBox,t)&&eachAxis(Be=>{const Me=Re?e.measuredBox[Be]:e.layoutBox[Be],Oe=calcLength(t[Be]);Me.max=Me.min+Oe,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[Be].max=n.relativeTarget[Be].min+Oe)});const Ce=createDelta();calcBoxDelta(Ce,t,e.layoutBox);const De=createDelta();Re?calcBoxDelta(De,n.applyTransform(Te,!0),e.measuredBox):calcBoxDelta(De,t,e.layoutBox);const $e=!isDeltaZero(Ce);let Ve=!1;if(!n.resumeFrom){const Be=n.getClosestProjectingParent();if(Be&&!Be.resumeFrom){const{snapshot:Me,layout:Oe}=Be;if(Me&&Oe){const Ue=createBox();calcRelativePosition(Ue,e.layoutBox,Me.layoutBox);const ze=createBox();calcRelativePosition(ze,t,Oe.layoutBox),boxEqualsRounded(Ue,ze)||(Ve=!0),Be.options.layoutRoot&&(n.relativeTarget=ze,n.relativeTargetOrigin=Ue,n.relativeParent=Be)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:De,layoutDelta:Ce,hasLayoutChanged:$e,hasRelativeLayoutChanged:Ve})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function propagateDirtyNodes(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function cleanDirtyNodes(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function clearSnapshot(n){n.clearSnapshot()}function clearMeasurements(n){n.clearMeasurements()}function clearIsLayoutDirty(n){n.isLayoutDirty=!1}function resetTransformStyle(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function finishAnimation(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function resolveTargetDelta(n){n.resolveTargetDelta()}function calcProjection(n){n.calcProjection()}function resetSkewAndRotation(n){n.resetSkewAndRotation()}function removeLeadSnapshots(n){n.removeLeadSnapshot()}function mixAxisDelta(n,e,t){n.translate=mixNumber$1(e.translate,0,t),n.scale=mixNumber$1(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mixAxis(n,e,t,Te){n.min=mixNumber$1(e.min,t.min,Te),n.max=mixNumber$1(e.max,t.max,Te)}function mixBox(n,e,t,Te){mixAxis(n.x,e.x,t.x,Te),mixAxis(n.y,e.y,t.y,Te)}function hasOpacityCrossfade(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(n){n.min=roundPoint(n.min),n.max=roundPoint(n.max)}function roundBox(n){roundAxis(n.x),roundAxis(n.y)}function shouldAnimatePositionOnly(n,e,t){return n==="position"||n==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(t),.2)}function checkNodeWasScrollRoot(n){return n!==n.root&&n.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(n,e)=>addDomEvent(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const n=new DocumentProjectionNode({});n.mount(window),n.setOptions({layoutScroll:!0}),rootProjectionNode.current=n}return rootProjectionNode.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(n,e,t){const{props:Te}=n;n.animationState&&Te.whileHover&&n.animationState.setActive("whileHover",t==="Start");const Ee="onHover"+t,Re=Te[Ee];Re&&frame.postRender(()=>Re(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(t,Te)=>(handleHoverEvent(this.node,Te,"Start"),Ee=>handleHoverEvent(this.node,Ee,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(n,e,t){const{props:Te}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&Te.whileTap&&n.animationState.setActive("whileTap",t==="Start");const Ee="onTap"+(t==="End"?"":t),Re=Te[Ee];Re&&frame.postRender(()=>Re(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(t,Te)=>(handlePressEvent(this.node,Te,"Start"),(Ee,{success:Re})=>handlePressEvent(this.node,Ee,Re?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=n=>{const e=observerCallbacks.get(n.target);e&&e(n)},fireAllObserverCallbacks=n=>{n.forEach(fireObserverCallback)};function initIntersectionObserver({root:n,...e}){const t=n||document;observers.has(t)||observers.set(t,{});const Te=observers.get(t),Ee=JSON.stringify(e);return Te[Ee]||(Te[Ee]=new IntersectionObserver(fireAllObserverCallbacks,{root:n,...e})),Te[Ee]}function observeIntersection(n,e,t){const Te=initIntersectionObserver(e);return observerCallbacks.set(n,t),Te.observe(n),()=>{observerCallbacks.delete(n),Te.unobserve(n)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:Te,amount:Ee="some",once:Re}=e,Ce={root:t?t.current:void 0,rootMargin:Te,threshold:typeof Ee=="number"?Ee:thresholdNames[Ee]},De=$e=>{const{isIntersecting:Ve}=$e;if(this.isInView===Ve||(this.isInView=Ve,Re&&!Ve&&this.hasEnteredView))return;Ve&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",Ve);const{onViewportEnter:Be,onViewportLeave:Me}=this.node.getProps(),Oe=Ve?Be:Me;Oe&&Oe($e)};return observeIntersection(this.node.current,Ce,De)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),maxElapsed=50,createAxisInfo=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),createScrollInfo=()=>({time:0,x:createAxisInfo(),y:createAxisInfo()}),keys$1={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function updateAxisInfo(n,e,t,Te){const Ee=t[e],{length:Re,position:Ce}=keys$1[e],De=Ee.current,$e=t.time;Ee.current=n[`scroll${Ce}`],Ee.scrollLength=n[`scroll${Re}`]-n[`client${Re}`],Ee.offset.length=0,Ee.offset[0]=0,Ee.offset[1]=Ee.scrollLength,Ee.progress=progress(0,Ee.scrollLength,Ee.current);const Ve=Te-$e;Ee.velocity=Ve>maxElapsed?0:velocityPerSecond(Ee.current-De,Ve)}function updateScrollInfo(n,e,t){updateAxisInfo(n,"x",e,t),updateAxisInfo(n,"y",e,t),e.time=t}function calcInset(n,e){const t={x:0,y:0};let Te=n;for(;Te&&Te!==e;)if(isHTMLElement(Te))t.x+=Te.offsetLeft,t.y+=Te.offsetTop,Te=Te.offsetParent;else if(Te.tagName==="svg"){const Ee=Te.getBoundingClientRect();Te=Te.parentElement;const Re=Te.getBoundingClientRect();t.x+=Ee.left-Re.left,t.y+=Ee.top-Re.top}else if(Te instanceof SVGGraphicsElement){const{x:Ee,y:Re}=Te.getBBox();t.x+=Ee,t.y+=Re;let Ce=null,De=Te.parentNode;for(;!Ce;)De.tagName==="svg"&&(Ce=De),De=Te.parentNode;Te=Ce}else break;return t}const namedEdges={start:0,center:.5,end:1};function resolveEdge(n,e,t=0){let Te=0;if(n in namedEdges&&(n=namedEdges[n]),typeof n=="string"){const Ee=parseFloat(n);n.endsWith("px")?Te=Ee:n.endsWith("%")?n=Ee/100:n.endsWith("vw")?Te=Ee/100*document.documentElement.clientWidth:n.endsWith("vh")?Te=Ee/100*document.documentElement.clientHeight:n=Ee}return typeof n=="number"&&(Te=e*n),t+Te}const defaultOffset=[0,0];function resolveOffset(n,e,t,Te){let Ee=Array.isArray(n)?n:defaultOffset,Re=0,Ce=0;return typeof n=="number"?Ee=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?Ee=n.split(" "):Ee=[n,namedEdges[n]?n:"0"]),Re=resolveEdge(Ee[0],t,Te),Ce=resolveEdge(Ee[1],e),Re-Ce}const ScrollOffset={All:[[0,0],[1,1]]},point$3={x:0,y:0};function getTargetSize(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function resolveOffsets(n,e,t){const{offset:Te=ScrollOffset.All}=t,{target:Ee=n,axis:Re="y"}=t,Ce=Re==="y"?"height":"width",De=Ee!==n?calcInset(Ee,n):point$3,$e=Ee===n?{width:n.scrollWidth,height:n.scrollHeight}:getTargetSize(Ee),Ve={width:n.clientWidth,height:n.clientHeight};e[Re].offset.length=0;let Be=!e[Re].interpolate;const Me=Te.length;for(let Oe=0;Oe<Me;Oe++){const Ue=resolveOffset(Te[Oe],Ve[Ce],$e[Ce],De[Re]);!Be&&Ue!==e[Re].interpolatorOffsets[Oe]&&(Be=!0),e[Re].offset[Oe]=Ue}Be&&(e[Re].interpolate=interpolate$1(e[Re].offset,defaultOffset$1(Te),{clamp:!1}),e[Re].interpolatorOffsets=[...e[Re].offset]),e[Re].progress=clamp(0,1,e[Re].interpolate(e[Re].current))}function measure(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let Te=e;for(;Te&&Te!==n;)t.x.targetOffset+=Te.offsetLeft,t.y.targetOffset+=Te.offsetTop,Te=Te.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function createOnScrollHandler(n,e,t,Te={}){return{measure:Ee=>{measure(n,Te.target,t),updateScrollInfo(n,t,Ee),(Te.offset||Te.target)&&resolveOffsets(n,t,Te)},notify:()=>e(t)}}const scrollListeners=new WeakMap,resizeListeners=new WeakMap,onScrollHandlers=new WeakMap,getEventTarget=n=>n===document.scrollingElement?window:n;function scrollInfo(n,{container:e=document.scrollingElement,...t}={}){if(!e)return noop$1;let Te=onScrollHandlers.get(e);Te||(Te=new Set,onScrollHandlers.set(e,Te));const Ee=createScrollInfo(),Re=createOnScrollHandler(e,n,Ee,t);if(Te.add(Re),!scrollListeners.has(e)){const De=()=>{for(const Me of Te)Me.measure(frameData.timestamp);frame.preUpdate($e)},$e=()=>{for(const Me of Te)Me.notify()},Ve=()=>frame.read(De);scrollListeners.set(e,Ve);const Be=getEventTarget(e);window.addEventListener("resize",Ve,{passive:!0}),e!==document.documentElement&&resizeListeners.set(e,resize(e,Ve)),Be.addEventListener("scroll",Ve,{passive:!0}),Ve()}const Ce=scrollListeners.get(e);return frame.read(Ce,!1,!0),()=>{cancelFrame(Ce);const De=onScrollHandlers.get(e);if(!De||(De.delete(Re),De.size))return;const $e=scrollListeners.get(e);scrollListeners.delete(e),$e&&(getEventTarget(e).removeEventListener("scroll",$e),resizeListeners.get(e)?.(),window.removeEventListener("resize",$e))}}const timelineCache=new Map;function scrollTimelineFallback(n){const e={value:0},t=scrollInfo(Te=>{e.value=Te[n.axis].progress*100},n);return{currentTime:e,cancel:t}}function getTimeline({source:n,container:e,...t}){const{axis:Te}=t;n&&(e=n);const Ee=timelineCache.get(e)??new Map;timelineCache.set(e,Ee);const Re=t.target??"self",Ce=Ee.get(Re)??{},De=Te+(t.offset??[]).join(",");return Ce[De]||(Ce[De]=!t.target&&supportsScrollTimeline()?new ScrollTimeline({source:e,axis:Te}):scrollTimelineFallback({container:e,...t})),Ce[De]}function attachToAnimation(n,e){const t=getTimeline(e);return n.attachTimeline({timeline:e.target?void 0:t,observe:Te=>(Te.pause(),observeTimeline(Ee=>{Te.time=Te.duration*Ee},t))})}function isOnScrollWithInfo(n){return n.length===2}function attachToFunction(n,e){return isOnScrollWithInfo(n)?scrollInfo(t=>{n(t[e.axis].progress,t)},e):observeTimeline(n,getTimeline(e))}function scroll(n,{axis:e="y",container:t=document.scrollingElement,...Te}={}){if(!t)return noop$1;const Ee={axis:e,container:t,...Te};return typeof n=="function"?attachToFunction(n,Ee):attachToAnimation(n,Ee)}const createScrollMotionValues=()=>({scrollX:motionValue(0),scrollY:motionValue(0),scrollXProgress:motionValue(0),scrollYProgress:motionValue(0)}),isRefPending=n=>n?!n.current:!1;function useScroll({container:n,target:e,...t}={}){const Te=useConstant(createScrollMotionValues),Ee=reactExports.useRef(null),Re=reactExports.useRef(!1),Ce=reactExports.useCallback(()=>(Ee.current=scroll((De,{x:$e,y:Ve})=>{Te.scrollX.set($e.current),Te.scrollXProgress.set($e.progress),Te.scrollY.set(Ve.current),Te.scrollYProgress.set(Ve.progress)},{...t,container:n?.current||void 0,target:e?.current||void 0}),()=>{Ee.current?.()}),[n,e,JSON.stringify(t.offset)]);return useIsomorphicLayoutEffect(()=>{if(Re.current=!1,isRefPending(n)||isRefPending(e)){Re.current=!0;return}else return Ce()},[Ce]),reactExports.useEffect(()=>{if(Re.current)return invariant(!isRefPending(n)),invariant(!isRefPending(e)),Ce()},[Ce]),Te}function useMotionValue(n){const e=useConstant(()=>motionValue(n)),{isStatic:t}=reactExports.useContext(MotionConfigContext);if(t){const[,Te]=reactExports.useState(n);reactExports.useEffect(()=>e.on("change",Te),[])}return e}function useCombineMotionValues(n,e){const t=useMotionValue(e()),Te=()=>t.set(e());return Te(),useIsomorphicLayoutEffect(()=>{const Ee=()=>frame.preRender(Te,!1,!0),Re=n.map(Ce=>Ce.on("change",Ee));return()=>{Re.forEach(Ce=>Ce()),cancelFrame(Te)}}),t}function useComputed(n){collectMotionValues.current=[],n();const e=useCombineMotionValues(collectMotionValues.current,n);return collectMotionValues.current=void 0,e}function useTransform(n,e,t,Te){if(typeof n=="function")return useComputed(n);const Ee=typeof e=="function"?e:transform(e,t,Te);return Array.isArray(n)?useListTransform(n,Ee):useListTransform([n],([Re])=>Ee(Re))}function useListTransform(n,e){const t=useConstant(()=>[]);return useCombineMotionValues(n,()=>{t.length=0;const Te=n.length;for(let Ee=0;Ee<Te;Ee++)t[Ee]=n[Ee].get();return e(t)})}const containerVariants={initial:{},animate:{transition:{staggerChildren:.2}}},dotVariants={initial:{y:"0%"},animate:{y:"-100%",transition:{duration:.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}}},TypingIndicator=()=>jsxRuntimeExports.jsxs(motion.div,{className:"flex items-center justify-center space-x-1.5 p-2 h-8",variants:containerVariants,initial:"initial",animate:"animate",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Typing..."}),jsxRuntimeExports.jsx(motion.div,{className:"h-2 w-2 bg-gray-500 rounded-full",variants:dotVariants}),jsxRuntimeExports.jsx(motion.div,{className:"h-2 w-2 bg-gray-500 rounded-full",variants:dotVariants}),jsxRuntimeExports.jsx(motion.div,{className:"h-2 w-2 bg-gray-500 rounded-full",variants:dotVariants})]}),ChatBubble=({role:n,text:e})=>{const t=n==="user",Te=e==="__typing__",[Ee,Re]=reactExports.useState("");return reactExports.useEffect(()=>{if(Te){Re("");return}let Ce=0;const De=setInterval(()=>{Re($e=>e.slice(0,Ce+1)),Ce++,Ce>=e.length&&clearInterval(De)},8);return()=>clearInterval(De)},[e,Te]),Te?jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"mt-1",children:jsxRuntimeExports.jsx(FaRobot,{className:"w-6 h-6 text-gray-500 drop-shadow"})}),jsxRuntimeExports.jsx("div",{className:"bg-white/20 border border-white/30 backdrop-blur-lg rounded-2xl rounded-bl-none shadow-inner",children:jsxRuntimeExports.jsx(TypingIndicator,{})})]}):jsxRuntimeExports.jsxs("div",{className:`flex items-start gap-3 mb-4 ${t?"justify-end flex-row-reverse":""}`,children:[jsxRuntimeExports.jsx("div",{className:"mt-1",children:t?jsxRuntimeExports.jsx(FaUserCircle,{className:"w-6 h-6 text-indigo-500 drop-shadow"}):jsxRuntimeExports.jsx(FaRobot,{className:"w-6 h-6 text-gray-500 drop-shadow"})}),jsxRuntimeExports.jsx("div",{className:`max-w-[80%] px-4 py-3 text-sm font-medium whitespace-pre-wrap transition-all duration-300
        ${t?"bg-gradient-to-br from-indigo-500 to-purple-500 text-white rounded-2xl rounded-br-none shadow-lg":"bg-white/20 text-gray-900 dark:text-white border border-white/30 backdrop-blur-lg rounded-2xl rounded-bl-none shadow-inner"}`,children:Ee})]})};function bind(n,e){return function(){return n.apply(e,arguments)}}const{toString:toString$3}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(n=>e=>{const t=toString$3.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),e=>kindOf(e)===n),typeOfTest=n=>e=>typeof e===n,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction$1(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&isArrayBuffer(n.buffer),e}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject$1=n=>{if(kindOf(n)!=="object")return!1;const e=getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(toStringTag in n)&&!(iterator in n)},isEmptyObject=n=>{if(!isObject(n)||isBuffer(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject(n)&&isFunction$1(n.pipe),isFormData=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||isFunction$1(n.append)&&((e=kindOf(n))==="formdata"||e==="object"&&isFunction$1(n.toString)&&n.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let Te,Ee;if(typeof n!="object"&&(n=[n]),isArray(n))for(Te=0,Ee=n.length;Te<Ee;Te++)e.call(null,n[Te],Te,n);else{if(isBuffer(n))return;const Re=t?Object.getOwnPropertyNames(n):Object.keys(n),Ce=Re.length;let De;for(Te=0;Te<Ce;Te++)De=Re[Te],e.call(null,n[De],De,n)}}function findKey(n,e){if(isBuffer(n))return null;e=e.toLowerCase();const t=Object.keys(n);let Te=t.length,Ee;for(;Te-- >0;)if(Ee=t[Te],e===Ee.toLowerCase())return Ee;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge$1(){const{caseless:n,skipUndefined:e}=isContextDefined(this)&&this||{},t={},Te=(Ee,Re)=>{const Ce=n&&findKey(t,Re)||Re;isPlainObject$1(t[Ce])&&isPlainObject$1(Ee)?t[Ce]=merge$1(t[Ce],Ee):isPlainObject$1(Ee)?t[Ce]=merge$1({},Ee):isArray(Ee)?t[Ce]=Ee.slice():(!e||!isUndefined(Ee))&&(t[Ce]=Ee)};for(let Ee=0,Re=arguments.length;Ee<Re;Ee++)arguments[Ee]&&forEach(arguments[Ee],Te);return t}const extend$2=(n,e,t,{allOwnKeys:Te}={})=>(forEach(e,(Ee,Re)=>{t&&isFunction$1(Ee)?n[Re]=bind(Ee,t):n[Re]=Ee},{allOwnKeys:Te}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,e,t,Te)=>{n.prototype=Object.create(e.prototype,Te),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},toFlatObject=(n,e,t,Te)=>{let Ee,Re,Ce;const De={};if(e=e||{},n==null)return e;do{for(Ee=Object.getOwnPropertyNames(n),Re=Ee.length;Re-- >0;)Ce=Ee[Re],(!Te||Te(Ce,n,e))&&!De[Ce]&&(e[Ce]=n[Ce],De[Ce]=!0);n=t!==!1&&getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},endsWith=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const Te=n.indexOf(e,t);return Te!==-1&&Te===t},toArray=n=>{if(!n)return null;if(isArray(n))return n;let e=n.length;if(!isNumber(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},isTypedArray$1=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,e)=>{const Te=(n&&n[iterator]).call(n);let Ee;for(;(Ee=Te.next())&&!Ee.done;){const Re=Ee.value;e.call(n,Re[0],Re[1])}},matchAll=(n,e)=>{let t;const Te=[];for(;(t=n.exec(e))!==null;)Te.push(t);return Te},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,Te,Ee){return Te.toUpperCase()+Ee}),hasOwnProperty$1=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),Te={};forEach(t,(Ee,Re)=>{let Ce;(Ce=e(Ee,Re,n))!==!1&&(Te[Re]=Ce||Ee)}),Object.defineProperties(n,Te)},freezeMethods=n=>{reduceDescriptors(n,(e,t)=>{if(isFunction$1(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const Te=n[t];if(isFunction$1(Te)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(n,e)=>{const t={},Te=Ee=>{Ee.forEach(Re=>{t[Re]=!0})};return isArray(n)?Te(n):Te(String(n).split(e)),t},noop=()=>{},toFiniteNumber=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function isSpecCompliantForm(n){return!!(n&&isFunction$1(n.append)&&n[toStringTag]==="FormData"&&n[iterator])}const toJSONObject=n=>{const e=new Array(10),t=(Te,Ee)=>{if(isObject(Te)){if(e.indexOf(Te)>=0)return;if(isBuffer(Te))return Te;if(!("toJSON"in Te)){e[Ee]=Te;const Re=isArray(Te)?[]:{};return forEach(Te,(Ce,De)=>{const $e=t(Ce,Ee+1);!isUndefined($e)&&(Re[De]=$e)}),e[Ee]=void 0,Re}}return Te};return t(n,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=n=>n&&(isObject(n)||isFunction$1(n))&&isFunction$1(n.then)&&isFunction$1(n.catch),_setImmediate=((n,e)=>n?setImmediate:e?((t,Te)=>(_global.addEventListener("message",({source:Ee,data:Re})=>{Ee===_global&&Re===t&&Te.length&&Te.shift()()},!1),Ee=>{Te.push(Ee),_global.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=n=>n!=null&&isFunction$1(n[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject:isPlainObject$1,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$2,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(n,e,t,Te,Ee){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),Te&&(this.request=Te),Ee&&(this.response=Ee,this.status=Ee.status?Ee.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(n,e,t,Te,Ee,Re)=>{const Ce=Object.create(prototype$1);utils$1.toFlatObject(n,Ce,function(Be){return Be!==Error.prototype},Ve=>Ve!=="isAxiosError");const De=n&&n.message?n.message:"Error",$e=e==null&&n?n.code:e;return AxiosError$1.call(Ce,De,$e,t,Te,Ee),n&&Ce.cause==null&&Object.defineProperty(Ce,"cause",{value:n,configurable:!0}),Ce.name=n&&n.name||"Error",Re&&Object.assign(Ce,Re),Ce};const httpAdapter=null;function isVisitable(n){return utils$1.isPlainObject(n)||utils$1.isArray(n)}function removeBrackets(n){return utils$1.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,e,t){return n?n.concat(e).map(function(Ee,Re){return Ee=removeBrackets(Ee),!t&&Re?"["+Ee+"]":Ee}).join(t?".":""):e}function isFlatArray(n){return utils$1.isArray(n)&&!n.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(n,e,t){if(!utils$1.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=utils$1.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(He,Ge){return!utils$1.isUndefined(Ge[He])});const Te=t.metaTokens,Ee=t.visitor||Be,Re=t.dots,Ce=t.indexes,$e=(t.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(e);if(!utils$1.isFunction(Ee))throw new TypeError("visitor must be a function");function Ve(ze){if(ze===null)return"";if(utils$1.isDate(ze))return ze.toISOString();if(utils$1.isBoolean(ze))return ze.toString();if(!$e&&utils$1.isBlob(ze))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(ze)||utils$1.isTypedArray(ze)?$e&&typeof Blob=="function"?new Blob([ze]):Buffer.from(ze):ze}function Be(ze,He,Ge){let Ke=ze;if(ze&&!Ge&&typeof ze=="object"){if(utils$1.endsWith(He,"{}"))He=Te?He:He.slice(0,-2),ze=JSON.stringify(ze);else if(utils$1.isArray(ze)&&isFlatArray(ze)||(utils$1.isFileList(ze)||utils$1.endsWith(He,"[]"))&&(Ke=utils$1.toArray(ze)))return He=removeBrackets(He),Ke.forEach(function(Je,un){!(utils$1.isUndefined(Je)||Je===null)&&e.append(Ce===!0?renderKey([He],un,Re):Ce===null?He:He+"[]",Ve(Je))}),!1}return isVisitable(ze)?!0:(e.append(renderKey(Ge,He,Re),Ve(ze)),!1)}const Me=[],Oe=Object.assign(predicates,{defaultVisitor:Be,convertValue:Ve,isVisitable});function Ue(ze,He){if(!utils$1.isUndefined(ze)){if(Me.indexOf(ze)!==-1)throw Error("Circular reference detected in "+He.join("."));Me.push(ze),utils$1.forEach(ze,function(Ke,Xe){(!(utils$1.isUndefined(Ke)||Ke===null)&&Ee.call(e,Ke,utils$1.isString(Xe)?Xe.trim():Xe,He,Oe))===!0&&Ue(Ke,He?He.concat(Xe):[Xe])}),Me.pop()}}if(!utils$1.isObject(n))throw new TypeError("data must be an object");return Ue(n),e}function encode$2(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(Te){return e[Te]})}function AxiosURLSearchParams(n,e){this._pairs=[],n&&toFormData$1(n,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,t){this._pairs.push([e,t])};prototype.toString=function(e){const t=e?function(Te){return e.call(this,Te,encode$2)}:encode$2;return this._pairs.map(function(Ee){return t(Ee[0])+"="+t(Ee[1])},"").join("&")};function encode$1(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(n,e,t){if(!e)return n;const Te=t&&t.encode||encode$1;utils$1.isFunction(t)&&(t={serialize:t});const Ee=t&&t.serialize;let Re;if(Ee?Re=Ee(e,t):Re=utils$1.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,t).toString(Te),Re){const Ce=n.indexOf("#");Ce!==-1&&(n=n.slice(0,Ce)),n+=(n.indexOf("?")===-1?"?":"&")+Re}return n}class InterceptorManager{constructor(){this.handlers=[]}use(e,t,Te){return this.handlers.push({fulfilled:e,rejected:t,synchronous:Te?Te.synchronous:!1,runWhen:Te?Te.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,function(Te){Te!==null&&e(Te)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(n,e){return toFormData$1(n,new platform.classes.URLSearchParams,{visitor:function(t,Te,Ee,Re){return platform.isNode&&utils$1.isBuffer(t)?(this.append(Te,t.toString("base64")),!1):Re.defaultVisitor.apply(this,arguments)},...e})}function parsePropPath(n){return utils$1.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(n){const e={},t=Object.keys(n);let Te;const Ee=t.length;let Re;for(Te=0;Te<Ee;Te++)Re=t[Te],e[Re]=n[Re];return e}function formDataToJSON(n){function e(t,Te,Ee,Re){let Ce=t[Re++];if(Ce==="__proto__")return!0;const De=Number.isFinite(+Ce),$e=Re>=t.length;return Ce=!Ce&&utils$1.isArray(Ee)?Ee.length:Ce,$e?(utils$1.hasOwnProp(Ee,Ce)?Ee[Ce]=[Ee[Ce],Te]:Ee[Ce]=Te,!De):((!Ee[Ce]||!utils$1.isObject(Ee[Ce]))&&(Ee[Ce]=[]),e(t,Te,Ee[Ce],Re)&&utils$1.isArray(Ee[Ce])&&(Ee[Ce]=arrayToObject(Ee[Ce])),!De)}if(utils$1.isFormData(n)&&utils$1.isFunction(n.entries)){const t={};return utils$1.forEachEntry(n,(Te,Ee)=>{e(parsePropPath(Te),Ee,t,0)}),t}return null}function stringifySafely(n,e,t){if(utils$1.isString(n))try{return(e||JSON.parse)(n),utils$1.trim(n)}catch(Te){if(Te.name!=="SyntaxError")throw Te}return(t||JSON.stringify)(n)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const Te=t.getContentType()||"",Ee=Te.indexOf("application/json")>-1,Re=utils$1.isObject(e);if(Re&&utils$1.isHTMLForm(e)&&(e=new FormData(e)),utils$1.isFormData(e))return Ee?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let De;if(Re){if(Te.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((De=utils$1.isFileList(e))||Te.indexOf("multipart/form-data")>-1){const $e=this.env&&this.env.FormData;return toFormData$1(De?{"files[]":e}:e,$e&&new $e,this.formSerializer)}}return Re||Ee?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const t=this.transitional||defaults.transitional,Te=t&&t.forcedJSONParsing,Ee=this.responseType==="json";if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(Te&&!this.responseType||Ee)){const Ce=!(t&&t.silentJSONParsing)&&Ee;try{return JSON.parse(e,this.parseReviver)}catch(De){if(Ce)throw De.name==="SyntaxError"?AxiosError$1.from(De,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):De}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],n=>{defaults.headers[n]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=n=>{const e={};let t,Te,Ee;return n&&n.split(`
`).forEach(function(Ce){Ee=Ce.indexOf(":"),t=Ce.substring(0,Ee).trim().toLowerCase(),Te=Ce.substring(Ee+1).trim(),!(!t||e[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?e[t]?e[t].push(Te):e[t]=[Te]:e[t]=e[t]?e[t]+", "+Te:Te)}),e},$internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils$1.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let Te;for(;Te=t.exec(n);)e[Te[1]]=Te[2];return e}const isValidHeaderName=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function matchHeaderValue(n,e,t,Te,Ee){if(utils$1.isFunction(Te))return Te.call(this,e,t);if(Ee&&(e=t),!!utils$1.isString(e)){if(utils$1.isString(Te))return e.indexOf(Te)!==-1;if(utils$1.isRegExp(Te))return Te.test(e)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,Te)=>t.toUpperCase()+Te)}function buildAccessors(n,e){const t=utils$1.toCamelCase(" "+e);["get","set","has"].forEach(Te=>{Object.defineProperty(n,Te+t,{value:function(Ee,Re,Ce){return this[Te].call(this,e,Ee,Re,Ce)},configurable:!0})})}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,t,Te){const Ee=this;function Re(De,$e,Ve){const Be=normalizeHeader($e);if(!Be)throw new Error("header name must be a non-empty string");const Me=utils$1.findKey(Ee,Be);(!Me||Ee[Me]===void 0||Ve===!0||Ve===void 0&&Ee[Me]!==!1)&&(Ee[Me||$e]=normalizeValue(De))}const Ce=(De,$e)=>utils$1.forEach(De,(Ve,Be)=>Re(Ve,Be,$e));if(utils$1.isPlainObject(e)||e instanceof this.constructor)Ce(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))Ce(parseHeaders(e),t);else if(utils$1.isObject(e)&&utils$1.isIterable(e)){let De={},$e,Ve;for(const Be of e){if(!utils$1.isArray(Be))throw TypeError("Object iterator must return a key-value pair");De[Ve=Be[0]]=($e=De[Ve])?utils$1.isArray($e)?[...$e,Be[1]]:[$e,Be[1]]:Be[1]}Ce(De,t)}else e!=null&&Re(t,e,Te);return this}get(e,t){if(e=normalizeHeader(e),e){const Te=utils$1.findKey(this,e);if(Te){const Ee=this[Te];if(!t)return Ee;if(t===!0)return parseTokens(Ee);if(utils$1.isFunction(t))return t.call(this,Ee,Te);if(utils$1.isRegExp(t))return t.exec(Ee);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e),e){const Te=utils$1.findKey(this,e);return!!(Te&&this[Te]!==void 0&&(!t||matchHeaderValue(this,this[Te],Te,t)))}return!1}delete(e,t){const Te=this;let Ee=!1;function Re(Ce){if(Ce=normalizeHeader(Ce),Ce){const De=utils$1.findKey(Te,Ce);De&&(!t||matchHeaderValue(Te,Te[De],De,t))&&(delete Te[De],Ee=!0)}}return utils$1.isArray(e)?e.forEach(Re):Re(e),Ee}clear(e){const t=Object.keys(this);let Te=t.length,Ee=!1;for(;Te--;){const Re=t[Te];(!e||matchHeaderValue(this,this[Re],Re,e,!0))&&(delete this[Re],Ee=!0)}return Ee}normalize(e){const t=this,Te={};return utils$1.forEach(this,(Ee,Re)=>{const Ce=utils$1.findKey(Te,Re);if(Ce){t[Ce]=normalizeValue(Ee),delete t[Re];return}const De=e?formatHeader(Re):String(Re).trim();De!==Re&&delete t[Re],t[De]=normalizeValue(Ee),Te[De]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$1.forEach(this,(Te,Ee)=>{Te!=null&&Te!==!1&&(t[Ee]=e&&utils$1.isArray(Te)?Te.join(", "):Te)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const Te=new this(e);return t.forEach(Ee=>Te.set(Ee)),Te}static accessor(e){const Te=(this[$internals]=this[$internals]={accessors:{}}).accessors,Ee=this.prototype;function Re(Ce){const De=normalizeHeader(Ce);Te[De]||(buildAccessors(Ee,Ce),Te[De]=!0)}return utils$1.isArray(e)?e.forEach(Re):Re(e),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(Te){this[t]=Te}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(n,e){const t=this||defaults,Te=e||t,Ee=AxiosHeaders$1.from(Te.headers);let Re=Te.data;return utils$1.forEach(n,function(De){Re=De.call(t,Re,Ee.normalize(),e?e.status:void 0)}),Ee.normalize(),Re}function isCancel$1(n){return!!(n&&n.__CANCEL__)}function CanceledError$1(n,e,t){AxiosError$1.call(this,n??"canceled",AxiosError$1.ERR_CANCELED,e,t),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(n,e,t){const Te=t.config.validateStatus;!t.status||!Te||Te(t.status)?n(t):e(new AxiosError$1("Request failed with status code "+t.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function parseProtocol(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function speedometer(n,e){n=n||10;const t=new Array(n),Te=new Array(n);let Ee=0,Re=0,Ce;return e=e!==void 0?e:1e3,function($e){const Ve=Date.now(),Be=Te[Re];Ce||(Ce=Ve),t[Ee]=$e,Te[Ee]=Ve;let Me=Re,Oe=0;for(;Me!==Ee;)Oe+=t[Me++],Me=Me%n;if(Ee=(Ee+1)%n,Ee===Re&&(Re=(Re+1)%n),Ve-Ce<e)return;const Ue=Be&&Ve-Be;return Ue?Math.round(Oe*1e3/Ue):void 0}}function throttle(n,e){let t=0,Te=1e3/e,Ee,Re;const Ce=(Ve,Be=Date.now())=>{t=Be,Ee=null,Re&&(clearTimeout(Re),Re=null),n(...Ve)};return[(...Ve)=>{const Be=Date.now(),Me=Be-t;Me>=Te?Ce(Ve,Be):(Ee=Ve,Re||(Re=setTimeout(()=>{Re=null,Ce(Ee)},Te-Me)))},()=>Ee&&Ce(Ee)]}const progressEventReducer=(n,e,t=3)=>{let Te=0;const Ee=speedometer(50,250);return throttle(Re=>{const Ce=Re.loaded,De=Re.lengthComputable?Re.total:void 0,$e=Ce-Te,Ve=Ee($e),Be=Ce<=De;Te=Ce;const Me={loaded:Ce,total:De,progress:De?Ce/De:void 0,bytes:$e,rate:Ve||void 0,estimated:Ve&&De&&Be?(De-Ce)/Ve:void 0,event:Re,lengthComputable:De!=null,[e?"download":"upload"]:!0};n(Me)},t)},progressEventDecorator=(n,e)=>{const t=n!=null;return[Te=>e[0]({lengthComputable:t,total:n,loaded:Te}),e[1]]},asyncDecorator=n=>(...e)=>utils$1.asap(()=>n(...e)),isURLSameOrigin=platform.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,platform.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(n,e,t,Te,Ee,Re){const Ce=[n+"="+encodeURIComponent(e)];utils$1.isNumber(t)&&Ce.push("expires="+new Date(t).toGMTString()),utils$1.isString(Te)&&Ce.push("path="+Te),utils$1.isString(Ee)&&Ce.push("domain="+Ee),Re===!0&&Ce.push("secure"),document.cookie=Ce.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function buildFullPath(n,e,t){let Te=!isAbsoluteURL(e);return n&&(Te||t==!1)?combineURLs(n,e):e}const headersToObject=n=>n instanceof AxiosHeaders$1?{...n}:n;function mergeConfig$1(n,e){e=e||{};const t={};function Te(Ve,Be,Me,Oe){return utils$1.isPlainObject(Ve)&&utils$1.isPlainObject(Be)?utils$1.merge.call({caseless:Oe},Ve,Be):utils$1.isPlainObject(Be)?utils$1.merge({},Be):utils$1.isArray(Be)?Be.slice():Be}function Ee(Ve,Be,Me,Oe){if(utils$1.isUndefined(Be)){if(!utils$1.isUndefined(Ve))return Te(void 0,Ve,Me,Oe)}else return Te(Ve,Be,Me,Oe)}function Re(Ve,Be){if(!utils$1.isUndefined(Be))return Te(void 0,Be)}function Ce(Ve,Be){if(utils$1.isUndefined(Be)){if(!utils$1.isUndefined(Ve))return Te(void 0,Ve)}else return Te(void 0,Be)}function De(Ve,Be,Me){if(Me in e)return Te(Ve,Be);if(Me in n)return Te(void 0,Ve)}const $e={url:Re,method:Re,data:Re,baseURL:Ce,transformRequest:Ce,transformResponse:Ce,paramsSerializer:Ce,timeout:Ce,timeoutMessage:Ce,withCredentials:Ce,withXSRFToken:Ce,adapter:Ce,responseType:Ce,xsrfCookieName:Ce,xsrfHeaderName:Ce,onUploadProgress:Ce,onDownloadProgress:Ce,decompress:Ce,maxContentLength:Ce,maxBodyLength:Ce,beforeRedirect:Ce,transport:Ce,httpAgent:Ce,httpsAgent:Ce,cancelToken:Ce,socketPath:Ce,responseEncoding:Ce,validateStatus:De,headers:(Ve,Be,Me)=>Ee(headersToObject(Ve),headersToObject(Be),Me,!0)};return utils$1.forEach(Object.keys({...n,...e}),function(Be){const Me=$e[Be]||Ee,Oe=Me(n[Be],e[Be],Be);utils$1.isUndefined(Oe)&&Me!==De||(t[Be]=Oe)}),t}const resolveConfig=n=>{const e=mergeConfig$1({},n);let{data:t,withXSRFToken:Te,xsrfHeaderName:Ee,xsrfCookieName:Re,headers:Ce,auth:De}=e;if(e.headers=Ce=AxiosHeaders$1.from(Ce),e.url=buildURL(buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),De&&Ce.set("Authorization","Basic "+btoa((De.username||"")+":"+(De.password?unescape(encodeURIComponent(De.password)):""))),utils$1.isFormData(t)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)Ce.setContentType(void 0);else if(utils$1.isFunction(t.getHeaders)){const $e=t.getHeaders(),Ve=["content-type","content-length"];Object.entries($e).forEach(([Be,Me])=>{Ve.includes(Be.toLowerCase())&&Ce.set(Be,Me)})}}if(platform.hasStandardBrowserEnv&&(Te&&utils$1.isFunction(Te)&&(Te=Te(e)),Te||Te!==!1&&isURLSameOrigin(e.url))){const $e=Ee&&Re&&cookies.read(Re);$e&&Ce.set(Ee,$e)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(t,Te){const Ee=resolveConfig(n);let Re=Ee.data;const Ce=AxiosHeaders$1.from(Ee.headers).normalize();let{responseType:De,onUploadProgress:$e,onDownloadProgress:Ve}=Ee,Be,Me,Oe,Ue,ze;function He(){Ue&&Ue(),ze&&ze(),Ee.cancelToken&&Ee.cancelToken.unsubscribe(Be),Ee.signal&&Ee.signal.removeEventListener("abort",Be)}let Ge=new XMLHttpRequest;Ge.open(Ee.method.toUpperCase(),Ee.url,!0),Ge.timeout=Ee.timeout;function Ke(){if(!Ge)return;const Je=AxiosHeaders$1.from("getAllResponseHeaders"in Ge&&Ge.getAllResponseHeaders()),fn={data:!De||De==="text"||De==="json"?Ge.responseText:Ge.response,status:Ge.status,statusText:Ge.statusText,headers:Je,config:n,request:Ge};settle(function(gn){t(gn),He()},function(gn){Te(gn),He()},fn),Ge=null}"onloadend"in Ge?Ge.onloadend=Ke:Ge.onreadystatechange=function(){!Ge||Ge.readyState!==4||Ge.status===0&&!(Ge.responseURL&&Ge.responseURL.indexOf("file:")===0)||setTimeout(Ke)},Ge.onabort=function(){Ge&&(Te(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,n,Ge)),Ge=null)},Ge.onerror=function(un){const fn=un&&un.message?un.message:"Network Error",yn=new AxiosError$1(fn,AxiosError$1.ERR_NETWORK,n,Ge);yn.event=un||null,Te(yn),Ge=null},Ge.ontimeout=function(){let un=Ee.timeout?"timeout of "+Ee.timeout+"ms exceeded":"timeout exceeded";const fn=Ee.transitional||transitionalDefaults;Ee.timeoutErrorMessage&&(un=Ee.timeoutErrorMessage),Te(new AxiosError$1(un,fn.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,n,Ge)),Ge=null},Re===void 0&&Ce.setContentType(null),"setRequestHeader"in Ge&&utils$1.forEach(Ce.toJSON(),function(un,fn){Ge.setRequestHeader(fn,un)}),utils$1.isUndefined(Ee.withCredentials)||(Ge.withCredentials=!!Ee.withCredentials),De&&De!=="json"&&(Ge.responseType=Ee.responseType),Ve&&([Oe,ze]=progressEventReducer(Ve,!0),Ge.addEventListener("progress",Oe)),$e&&Ge.upload&&([Me,Ue]=progressEventReducer($e),Ge.upload.addEventListener("progress",Me),Ge.upload.addEventListener("loadend",Ue)),(Ee.cancelToken||Ee.signal)&&(Be=Je=>{Ge&&(Te(!Je||Je.type?new CanceledError$1(null,n,Ge):Je),Ge.abort(),Ge=null)},Ee.cancelToken&&Ee.cancelToken.subscribe(Be),Ee.signal&&(Ee.signal.aborted?Be():Ee.signal.addEventListener("abort",Be)));const Xe=parseProtocol(Ee.url);if(Xe&&platform.protocols.indexOf(Xe)===-1){Te(new AxiosError$1("Unsupported protocol "+Xe+":",AxiosError$1.ERR_BAD_REQUEST,n));return}Ge.send(Re||null)})},composeSignals=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let Te=new AbortController,Ee;const Re=function(Ve){if(!Ee){Ee=!0,De();const Be=Ve instanceof Error?Ve:this.reason;Te.abort(Be instanceof AxiosError$1?Be:new CanceledError$1(Be instanceof Error?Be.message:Be))}};let Ce=e&&setTimeout(()=>{Ce=null,Re(new AxiosError$1(`timeout ${e} of ms exceeded`,AxiosError$1.ETIMEDOUT))},e);const De=()=>{n&&(Ce&&clearTimeout(Ce),Ce=null,n.forEach(Ve=>{Ve.unsubscribe?Ve.unsubscribe(Re):Ve.removeEventListener("abort",Re)}),n=null)};n.forEach(Ve=>Ve.addEventListener("abort",Re));const{signal:$e}=Te;return $e.unsubscribe=()=>utils$1.asap(De),$e}},streamChunk=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let Te=0,Ee;for(;Te<t;)Ee=Te+e,yield n.slice(Te,Ee),Te=Ee},readBytes=async function*(n,e){for await(const t of readStream(n))yield*streamChunk(t,e)},readStream=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:Te}=await e.read();if(t)break;yield Te}}finally{await e.cancel()}},trackStream=(n,e,t,Te)=>{const Ee=readBytes(n,e);let Re=0,Ce,De=$e=>{Ce||(Ce=!0,Te&&Te($e))};return new ReadableStream({async pull($e){try{const{done:Ve,value:Be}=await Ee.next();if(Ve){De(),$e.close();return}let Me=Be.byteLength;if(t){let Oe=Re+=Me;t(Oe)}$e.enqueue(new Uint8Array(Be))}catch(Ve){throw De(Ve),Ve}},cancel($e){return De($e),Ee.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request:n,Response:e})=>({Request:n,Response:e}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder:TextEncoder$1}=utils$1.global,test=(n,...e)=>{try{return!!n(...e)}catch{return!1}},factory=n=>{n=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,n);const{fetch:e,Request:t,Response:Te}=n,Ee=e?isFunction(e):typeof fetch=="function",Re=isFunction(t),Ce=isFunction(Te);if(!Ee)return!1;const De=Ee&&isFunction(ReadableStream$1),$e=Ee&&(typeof TextEncoder$1=="function"?(ze=>He=>ze.encode(He))(new TextEncoder$1):async ze=>new Uint8Array(await new t(ze).arrayBuffer())),Ve=Re&&De&&test(()=>{let ze=!1;const He=new t(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return ze=!0,"half"}}).headers.has("Content-Type");return ze&&!He}),Be=Ce&&De&&test(()=>utils$1.isReadableStream(new Te("").body)),Me={stream:Be&&(ze=>ze.body)};Ee&&["text","arrayBuffer","blob","formData","stream"].forEach(ze=>{!Me[ze]&&(Me[ze]=(He,Ge)=>{let Ke=He&&He[ze];if(Ke)return Ke.call(He);throw new AxiosError$1(`Response type '${ze}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,Ge)})});const Oe=async ze=>{if(ze==null)return 0;if(utils$1.isBlob(ze))return ze.size;if(utils$1.isSpecCompliantForm(ze))return(await new t(platform.origin,{method:"POST",body:ze}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(ze)||utils$1.isArrayBuffer(ze))return ze.byteLength;if(utils$1.isURLSearchParams(ze)&&(ze=ze+""),utils$1.isString(ze))return(await $e(ze)).byteLength},Ue=async(ze,He)=>{const Ge=utils$1.toFiniteNumber(ze.getContentLength());return Ge??Oe(He)};return async ze=>{let{url:He,method:Ge,data:Ke,signal:Xe,cancelToken:Je,timeout:un,onDownloadProgress:fn,onUploadProgress:yn,responseType:gn,headers:mn,withCredentials:dn="same-origin",fetchOptions:vn}=resolveConfig(ze),bn=e||fetch;gn=gn?(gn+"").toLowerCase():"text";let Tn=composeSignals([Xe,Je&&Je.toAbortSignal()],un),En=null;const In=Tn&&Tn.unsubscribe&&(()=>{Tn.unsubscribe()});let Nn;try{if(yn&&Ve&&Ge!=="get"&&Ge!=="head"&&(Nn=await Ue(mn,Ke))!==0){let Un=new t(He,{method:"POST",body:Ke,duplex:"half"}),Cn;if(utils$1.isFormData(Ke)&&(Cn=Un.headers.get("content-type"))&&mn.setContentType(Cn),Un.body){const[kn,Yn]=progressEventDecorator(Nn,progressEventReducer(asyncDecorator(yn)));Ke=trackStream(Un.body,DEFAULT_CHUNK_SIZE,kn,Yn)}}utils$1.isString(dn)||(dn=dn?"include":"omit");const On=Re&&"credentials"in t.prototype,Fn={...vn,signal:Tn,method:Ge.toUpperCase(),headers:mn.normalize().toJSON(),body:Ke,duplex:"half",credentials:On?dn:void 0};En=Re&&new t(He,Fn);let $n=await(Re?bn(En,vn):bn(He,Fn));const Hn=Be&&(gn==="stream"||gn==="response");if(Be&&(fn||Hn&&In)){const Un={};["status","statusText","headers"].forEach(Jn=>{Un[Jn]=$n[Jn]});const Cn=utils$1.toFiniteNumber($n.headers.get("content-length")),[kn,Yn]=fn&&progressEventDecorator(Cn,progressEventReducer(asyncDecorator(fn),!0))||[];$n=new Te(trackStream($n.body,DEFAULT_CHUNK_SIZE,kn,()=>{Yn&&Yn(),In&&In()}),Un)}gn=gn||"text";let Dn=await Me[utils$1.findKey(Me,gn)||"text"]($n,ze);return!Hn&&In&&In(),await new Promise((Un,Cn)=>{settle(Un,Cn,{data:Dn,headers:AxiosHeaders$1.from($n.headers),status:$n.status,statusText:$n.statusText,config:ze,request:En})})}catch(On){throw In&&In(),On&&On.name==="TypeError"&&/Load failed|fetch/i.test(On.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,ze,En),{cause:On.cause||On}):AxiosError$1.from(On,On&&On.code,ze,En)}}},seedCache=new Map,getFetch=n=>{let e=n?n.env:{};const{fetch:t,Request:Te,Response:Ee}=e,Re=[Te,Ee,t];let Ce=Re.length,De=Ce,$e,Ve,Be=seedCache;for(;De--;)$e=Re[De],Ve=Be.get($e),Ve===void 0&&Be.set($e,Ve=De?new Map:factory(e)),Be=Ve;return Ve};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const renderReason=n=>`- ${n}`,isResolvedHandle=n=>utils$1.isFunction(n)||n===null||n===!1,adapters={getAdapter:(n,e)=>{n=utils$1.isArray(n)?n:[n];const{length:t}=n;let Te,Ee;const Re={};for(let Ce=0;Ce<t;Ce++){Te=n[Ce];let De;if(Ee=Te,!isResolvedHandle(Te)&&(Ee=knownAdapters[(De=String(Te)).toLowerCase()],Ee===void 0))throw new AxiosError$1(`Unknown adapter '${De}'`);if(Ee&&(utils$1.isFunction(Ee)||(Ee=Ee.get(e))))break;Re[De||"#"+Ce]=Ee}if(!Ee){const Ce=Object.entries(Re).map(([$e,Ve])=>`adapter ${$e} `+(Ve===!1?"is not supported by the environment":"is not available in the build"));let De=t?Ce.length>1?`since :
`+Ce.map(renderReason).join(`
`):" "+renderReason(Ce[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+De,"ERR_NOT_SUPPORT")}return Ee},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError$1(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders$1.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults.adapter,n)(n).then(function(Te){return throwIfCancellationRequested(n),Te.data=transformData.call(n,n.transformResponse,Te),Te.headers=AxiosHeaders$1.from(Te.headers),Te},function(Te){return isCancel$1(Te)||(throwIfCancellationRequested(n),Te&&Te.response&&(Te.response.data=transformData.call(n,n.transformResponse,Te.response),Te.response.headers=AxiosHeaders$1.from(Te.response.headers))),Promise.reject(Te)})}const VERSION$2="1.12.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{validators$1[n]=function(Te){return typeof Te===n||"a"+(e<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function(e,t,Te){function Ee(Re,Ce){return"[Axios v"+VERSION$2+"] Transitional option '"+Re+"'"+Ce+(Te?". "+Te:"")}return(Re,Ce,De)=>{if(e===!1)throw new AxiosError$1(Ee(Ce," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[Ce]&&(deprecatedWarnings[Ce]=!0,console.warn(Ee(Ce," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(Re,Ce,De):!0}};validators$1.spelling=function(e){return(t,Te)=>(console.warn(`${Te} is likely a misspelling of ${e}`),!0)};function assertOptions(n,e,t){if(typeof n!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const Te=Object.keys(n);let Ee=Te.length;for(;Ee-- >0;){const Re=Te[Ee],Ce=e[Re];if(Ce){const De=n[Re],$e=De===void 0||Ce(De,Re,n);if($e!==!0)throw new AxiosError$1("option "+Re+" must be "+$e,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError$1("Unknown option "+Re,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,t){try{return await this._request(e,t)}catch(Te){if(Te instanceof Error){let Ee={};Error.captureStackTrace?Error.captureStackTrace(Ee):Ee=new Error;const Re=Ee.stack?Ee.stack.replace(/^.+\n/,""):"";try{Te.stack?Re&&!String(Te.stack).endsWith(Re.replace(/^.+\n.+\n/,""))&&(Te.stack+=`
`+Re):Te.stack=Re}catch{}}throw Te}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mergeConfig$1(this.defaults,t);const{transitional:Te,paramsSerializer:Ee,headers:Re}=t;Te!==void 0&&validator.assertOptions(Te,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Ee!=null&&(utils$1.isFunction(Ee)?t.paramsSerializer={serialize:Ee}:validator.assertOptions(Ee,{encode:validators.function,serialize:validators.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let Ce=Re&&utils$1.merge(Re.common,Re[t.method]);Re&&utils$1.forEach(["delete","get","head","post","put","patch","common"],ze=>{delete Re[ze]}),t.headers=AxiosHeaders$1.concat(Ce,Re);const De=[];let $e=!0;this.interceptors.request.forEach(function(He){typeof He.runWhen=="function"&&He.runWhen(t)===!1||($e=$e&&He.synchronous,De.unshift(He.fulfilled,He.rejected))});const Ve=[];this.interceptors.response.forEach(function(He){Ve.push(He.fulfilled,He.rejected)});let Be,Me=0,Oe;if(!$e){const ze=[dispatchRequest.bind(this),void 0];for(ze.unshift(...De),ze.push(...Ve),Oe=ze.length,Be=Promise.resolve(t);Me<Oe;)Be=Be.then(ze[Me++],ze[Me++]);return Be}Oe=De.length;let Ue=t;for(;Me<Oe;){const ze=De[Me++],He=De[Me++];try{Ue=ze(Ue)}catch(Ge){He.call(this,Ge);break}}try{Be=dispatchRequest.call(this,Ue)}catch(ze){return Promise.reject(ze)}for(Me=0,Oe=Ve.length;Me<Oe;)Be=Be.then(Ve[Me++],Ve[Me++]);return Be}getUri(e){e=mergeConfig$1(this.defaults,e);const t=buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls);return buildURL(t,e.params,e.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(t,Te){return this.request(mergeConfig$1(Te||{},{method:e,url:t,data:(Te||{}).data}))}});utils$1.forEach(["post","put","patch"],function(e){function t(Te){return function(Re,Ce,De){return this.request(mergeConfig$1(De||{},{method:e,headers:Te?{"Content-Type":"multipart/form-data"}:{},url:Re,data:Ce}))}}Axios$1.prototype[e]=t(),Axios$1.prototype[e+"Form"]=t(!0)});let CancelToken$1=class Of{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(Re){t=Re});const Te=this;this.promise.then(Ee=>{if(!Te._listeners)return;let Re=Te._listeners.length;for(;Re-- >0;)Te._listeners[Re](Ee);Te._listeners=null}),this.promise.then=Ee=>{let Re;const Ce=new Promise(De=>{Te.subscribe(De),Re=De}).then(Ee);return Ce.cancel=function(){Te.unsubscribe(Re)},Ce},e(function(Re,Ce,De){Te.reason||(Te.reason=new CanceledError$1(Re,Ce,De),t(Te.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=Te=>{e.abort(Te)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Of(function(Ee){e=Ee}),cancel:e}}};function spread$1(n){return function(t){return n.apply(null,t)}}function isAxiosError$1(n){return utils$1.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([n,e])=>{HttpStatusCode$1[e]=n});function createInstance(n){const e=new Axios$1(n),t=bind(Axios$1.prototype.request,e);return utils$1.extend(t,Axios$1.prototype,e,{allOwnKeys:!0}),utils$1.extend(t,e,null,{allOwnKeys:!0}),t.create=function(Ee){return createInstance(mergeConfig$1(n,Ee))},t}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=n=>formDataToJSON(utils$1.isHTMLForm(n)?new FormData(n):n);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all:all$1,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios;function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(n)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(n,e){for(var t=new u16(31),Te=0;Te<31;++Te)t[Te]=e+=1<<n[Te-1];for(var Ee=new i32(t[30]),Te=1;Te<30;++Te)for(var Re=t[Te];Re<t[Te+1];++Re)Ee[Re]=Re-t[Te]<<5|Te;return{b:t,r:Ee}},_a$1=freb(fleb,2),fl=_a$1.b,revfl=_a$1.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(n,e,t){for(var Te=n.length,Ee=0,Re=new u16(e);Ee<Te;++Ee)n[Ee]&&++Re[n[Ee]-1];var Ce=new u16(e);for(Ee=1;Ee<e;++Ee)Ce[Ee]=Ce[Ee-1]+Re[Ee-1]<<1;var De;if(t){De=new u16(1<<e);var $e=15-e;for(Ee=0;Ee<Te;++Ee)if(n[Ee])for(var Ve=Ee<<4|n[Ee],Be=e-n[Ee],Me=Ce[n[Ee]-1]++<<Be,Oe=Me|(1<<Be)-1;Me<=Oe;++Me)De[rev[Me]>>$e]=Ve}else for(De=new u16(Te),Ee=0;Ee<Te;++Ee)n[Ee]&&(De[Ee]=rev[Ce[n[Ee]-1]++]>>15-n[Ee]);return De},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),shft=function(n){return(n+7)/8|0},slc=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new u8(n.subarray(e,t))},wbits=function(n,e,t){t<<=e&7;var Te=e/8|0;n[Te]|=t,n[Te+1]|=t>>8},wbits16=function(n,e,t){t<<=e&7;var Te=e/8|0;n[Te]|=t,n[Te+1]|=t>>8,n[Te+2]|=t>>16},hTree=function(n,e){for(var t=[],Te=0;Te<n.length;++Te)n[Te]&&t.push({s:Te,f:n[Te]});var Ee=t.length,Re=t.slice();if(!Ee)return{t:et$1,l:0};if(Ee==1){var Ce=new u8(t[0].s+1);return Ce[t[0].s]=1,{t:Ce,l:1}}t.sort(function(fn,yn){return fn.f-yn.f}),t.push({s:-1,f:25001});var De=t[0],$e=t[1],Ve=0,Be=1,Me=2;for(t[0]={s:-1,f:De.f+$e.f,l:De,r:$e};Be!=Ee-1;)De=t[t[Ve].f<t[Me].f?Ve++:Me++],$e=t[Ve!=Be&&t[Ve].f<t[Me].f?Ve++:Me++],t[Be++]={s:-1,f:De.f+$e.f,l:De,r:$e};for(var Oe=Re[0].s,Te=1;Te<Ee;++Te)Re[Te].s>Oe&&(Oe=Re[Te].s);var Ue=new u16(Oe+1),ze=ln(t[Be-1],Ue,0);if(ze>e){var Te=0,He=0,Ge=ze-e,Ke=1<<Ge;for(Re.sort(function(yn,gn){return Ue[gn.s]-Ue[yn.s]||yn.f-gn.f});Te<Ee;++Te){var Xe=Re[Te].s;if(Ue[Xe]>e)He+=Ke-(1<<ze-Ue[Xe]),Ue[Xe]=e;else break}for(He>>=Ge;He>0;){var Je=Re[Te].s;Ue[Je]<e?He-=1<<e-Ue[Je]++-1:++Te}for(;Te>=0&&He;--Te){var un=Re[Te].s;Ue[un]==e&&(--Ue[un],++He)}ze=e}return{t:new u8(Ue),l:ze}},ln=function(n,e,t){return n.s==-1?Math.max(ln(n.l,e,t+1),ln(n.r,e,t+1)):e[n.s]=t},lc=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new u16(++e),Te=0,Ee=n[0],Re=1,Ce=function($e){t[Te++]=$e},De=1;De<=e;++De)if(n[De]==Ee&&De!=e)++Re;else{if(!Ee&&Re>2){for(;Re>138;Re-=138)Ce(32754);Re>2&&(Ce(Re>10?Re-11<<5|28690:Re-3<<5|12305),Re=0)}else if(Re>3){for(Ce(Ee),--Re;Re>6;Re-=6)Ce(8304);Re>2&&(Ce(Re-3<<5|8208),Re=0)}for(;Re--;)Ce(Ee);Re=1,Ee=n[De]}return{c:t.subarray(0,Te),n:e}},clen=function(n,e){for(var t=0,Te=0;Te<e.length;++Te)t+=n[Te]*e[Te];return t},wfblk=function(n,e,t){var Te=t.length,Ee=shft(e+2);n[Ee]=Te&255,n[Ee+1]=Te>>8,n[Ee+2]=n[Ee]^255,n[Ee+3]=n[Ee+1]^255;for(var Re=0;Re<Te;++Re)n[Ee+Re+4]=t[Re];return(Ee+4+Te)*8},wblk=function(n,e,t,Te,Ee,Re,Ce,De,$e,Ve,Be){wbits(e,Be++,t),++Ee[256];for(var Me=hTree(Ee,15),Oe=Me.t,Ue=Me.l,ze=hTree(Re,15),He=ze.t,Ge=ze.l,Ke=lc(Oe),Xe=Ke.c,Je=Ke.n,un=lc(He),fn=un.c,yn=un.n,gn=new u16(19),mn=0;mn<Xe.length;++mn)++gn[Xe[mn]&31];for(var mn=0;mn<fn.length;++mn)++gn[fn[mn]&31];for(var dn=hTree(gn,7),vn=dn.t,bn=dn.l,Tn=19;Tn>4&&!vn[clim[Tn-1]];--Tn);var En=Ve+5<<3,In=clen(Ee,flt)+clen(Re,fdt)+Ce,Nn=clen(Ee,Oe)+clen(Re,He)+Ce+14+3*Tn+clen(gn,vn)+2*gn[16]+3*gn[17]+7*gn[18];if($e>=0&&En<=In&&En<=Nn)return wfblk(e,Be,n.subarray($e,$e+Ve));var On,Fn,$n,Hn;if(wbits(e,Be,1+(Nn<In)),Be+=2,Nn<In){On=hMap(Oe,Ue,0),Fn=Oe,$n=hMap(He,Ge,0),Hn=He;var Dn=hMap(vn,bn,0);wbits(e,Be,Je-257),wbits(e,Be+5,yn-1),wbits(e,Be+10,Tn-4),Be+=14;for(var mn=0;mn<Tn;++mn)wbits(e,Be+3*mn,vn[clim[mn]]);Be+=3*Tn;for(var Un=[Xe,fn],Cn=0;Cn<2;++Cn)for(var kn=Un[Cn],mn=0;mn<kn.length;++mn){var Yn=kn[mn]&31;wbits(e,Be,Dn[Yn]),Be+=vn[Yn],Yn>15&&(wbits(e,Be,kn[mn]>>5&127),Be+=kn[mn]>>12)}}else On=flm,Fn=flt,$n=fdm,Hn=fdt;for(var mn=0;mn<De;++mn){var Jn=Te[mn];if(Jn>255){var Yn=Jn>>18&31;wbits16(e,Be,On[Yn+257]),Be+=Fn[Yn+257],Yn>7&&(wbits(e,Be,Jn>>23&31),Be+=fleb[Yn]);var sr=Jn&31;wbits16(e,Be,$n[sr]),Be+=Hn[sr],sr>3&&(wbits16(e,Be,Jn>>5&8191),Be+=fdeb[sr])}else wbits16(e,Be,On[Jn]),Be+=Fn[Jn]}return wbits16(e,Be,On[256]),Be+Fn[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(n,e,t,Te,Ee,Re){var Ce=Re.z||n.length,De=new u8(Te+Ce+5*(1+Math.ceil(Ce/7e3))+Ee),$e=De.subarray(Te,De.length-Ee),Ve=Re.l,Be=(Re.r||0)&7;if(e){Be&&($e[0]=Re.r>>3);for(var Me=deo[e-1],Oe=Me>>13,Ue=Me&8191,ze=(1<<t)-1,He=Re.p||new u16(32768),Ge=Re.h||new u16(ze+1),Ke=Math.ceil(t/3),Xe=2*Ke,Je=function(Tr){return(n[Tr]^n[Tr+1]<<Ke^n[Tr+2]<<Xe)&ze},un=new i32(25e3),fn=new u16(288),yn=new u16(32),gn=0,mn=0,dn=Re.i||0,vn=0,bn=Re.w||0,Tn=0;dn+2<Ce;++dn){var En=Je(dn),In=dn&32767,Nn=Ge[En];if(He[In]=Nn,Ge[En]=In,bn<=dn){var On=Ce-dn;if((gn>7e3||vn>24576)&&(On>423||!Ve)){Be=wblk(n,$e,0,un,fn,yn,mn,vn,Tn,dn-Tn,Be),vn=gn=mn=0,Tn=dn;for(var Fn=0;Fn<286;++Fn)fn[Fn]=0;for(var Fn=0;Fn<30;++Fn)yn[Fn]=0}var $n=2,Hn=0,Dn=Ue,Un=In-Nn&32767;if(On>2&&En==Je(dn-Un))for(var Cn=Math.min(Oe,On)-1,kn=Math.min(32767,dn),Yn=Math.min(258,On);Un<=kn&&--Dn&&In!=Nn;){if(n[dn+$n]==n[dn+$n-Un]){for(var Jn=0;Jn<Yn&&n[dn+Jn]==n[dn+Jn-Un];++Jn);if(Jn>$n){if($n=Jn,Hn=Un,Jn>Cn)break;for(var sr=Math.min(Un,Jn-2),lr=0,Fn=0;Fn<sr;++Fn){var mr=dn-Un+Fn&32767,gr=He[mr],Er=mr-gr&32767;Er>lr&&(lr=Er,Nn=mr)}}}In=Nn,Nn=He[In],Un+=In-Nn&32767}if(Hn){un[vn++]=268435456|revfl[$n]<<18|revfd[Hn];var $r=revfl[$n]&31,Yr=revfd[Hn]&31;mn+=fleb[$r]+fdeb[Yr],++fn[257+$r],++yn[Yr],bn=dn+$n,++gn}else un[vn++]=n[dn],++fn[n[dn]]}}for(dn=Math.max(dn,bn);dn<Ce;++dn)un[vn++]=n[dn],++fn[n[dn]];Be=wblk(n,$e,Ve,un,fn,yn,mn,vn,Tn,dn-Tn,Be),Ve||(Re.r=Be&7|$e[Be/8|0]<<3,Be-=7,Re.h=Ge,Re.p=He,Re.i=dn,Re.w=bn)}else{for(var dn=Re.w||0;dn<Ce+Ve;dn+=65535){var Gr=dn+65535;Gr>=Ce&&($e[Be/8|0]=Ve,Gr=Ce),Be=wfblk($e,Be+1,n.subarray(dn,Gr))}Re.i=Ce}return slc(De,0,Te+shft(Be)+Ee)},adler=function(){var n=1,e=0;return{p:function(t){for(var Te=n,Ee=e,Re=t.length|0,Ce=0;Ce!=Re;){for(var De=Math.min(Ce+2655,Re);Ce<De;++Ce)Ee+=Te+=t[Ce];Te=(Te&65535)+15*(Te>>16),Ee=(Ee&65535)+15*(Ee>>16)}n=Te,e=Ee},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(n,e,t,Te,Ee){if(!Ee&&(Ee={l:1},e.dictionary)){var Re=e.dictionary.subarray(-32768),Ce=new u8(Re.length+n.length);Ce.set(Re),Ce.set(n,Re.length),n=Ce,Ee.w=Re.length}return dflt(n,e.level==null?6:e.level,e.mem==null?Ee.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,Te,Ee)},wbytes=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},zlh=function(n,e){var t=e.level,Te=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=Te<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var Ee=adler();Ee.p(e.dictionary),wbytes(n,2,Ee.d())}};function zlibSync(n,e){e||(e={});var t=adler();t.p(n);var Te=dopt(n,e,e.dictionary?6:2,4);return zlh(Te,e),wbytes(Te,Te.length-4,t.d()),Te}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch{}function _arrayWithHoles(n){if(Array.isArray(n))return n}function _iterableToArrayLimit(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var Te,Ee,Re,Ce,De=[],$e=!0,Ve=!1;try{if(Re=(t=t.call(n)).next,e!==0)for(;!($e=(Te=Re.call(t)).done)&&(De.push(Te.value),De.length!==e);$e=!0);}catch(Be){Ve=!0,Ee=Be}finally{try{if(!$e&&t.return!=null&&(Ce=t.return(),Object(Ce)!==Ce))return}finally{if(Ve)throw Ee}}return De}}function _arrayLikeToArray(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,Te=Array(e);t<e;t++)Te[t]=n[t];return Te}function _unsupportedIterableToArray(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(n,e):void 0}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(n,e){return _arrayWithHoles(n)||_iterableToArrayLimit(n,e)||_unsupportedIterableToArray(n,e)||_nonIterableRest()}function decode$1(n,e="utf8"){return new TextDecoder(e).decode(n)}const encoder=new TextEncoder;function encode(n){return encoder.encode(n)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=defaultByteLength,t={}){let Te=!1;typeof e=="number"?e=new ArrayBuffer(e):(Te=!0,this.lastWrittenByte=e.byteLength);const Ee=t.offset?t.offset>>>0:0,Re=e.byteLength-Ee;let Ce=Ee;(ArrayBuffer.isView(e)||e instanceof IOBuffer)&&(e.byteLength!==e.buffer.byteLength&&(Ce=e.byteOffset+Ee),e=e.buffer),Te?this.lastWrittenByte=Re:this.lastWrittenByte=0,this.buffer=e,this.length=Re,this.byteLength=Re,this.byteOffset=Ce,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Ce,Re),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const Te=(this.offset+e)*2,Ee=new Uint8Array(Te);Ee.set(new Uint8Array(this.buffer)),this.buffer=Ee.buffer,this.length=Te,this.byteLength=Te,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const Te=typedArrays[t].BYTES_PER_ELEMENT*e,Ee=this.byteOffset+this.offset,Re=this.buffer.slice(Ee,Ee+Te);if(this.littleEndian===hostBigEndian&&t!=="uint8"&&t!=="int8"){const De=new Uint8Array(this.buffer.slice(Ee,Ee+Te));De.reverse();const $e=new typedArrays[t](De.buffer);return this.offset+=Te,$e.reverse(),$e}const Ce=new typedArrays[t](Re);return this.offset+=Te,Ce}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let Te=0;Te<e;Te++)t+=this.readChar();return t}readUtf8(e=1){return decode$1(this.readBytes(e))}decodeText(e=1,t="utf8"){return decode$1(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(encode(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zero$1(n){let e=n.length;for(;--e>=0;)n[e]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(n,e,t,Te)=>{let Ee=n&65535|0,Re=n>>>16&65535|0,Ce=0;for(;t!==0;){Ce=t>2e3?2e3:t,t-=Ce;do Ee=Ee+e[Te++]|0,Re=Re+Ee|0;while(--Ce);Ee%=65521,Re%=65521}return Ee|Re<<16|0};var adler32_1=adler32;const makeTable=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var Te=0;Te<8;Te++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},crcTable$1=new Uint32Array(makeTable()),crc32=(n,e,t,Te)=>{const Ee=crcTable$1,Re=Te+t;n^=-1;for(let Ce=Te;Ce<Re;Ce++)n=n>>>8^Ee[(n^e[Ce])&255];return n^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var assign$1=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const Te in t)_has(t,Te)&&(n[Te]=t[Te])}}return n},flattenChunks=n=>{let e=0;for(let Te=0,Ee=n.length;Te<Ee;Te++)e+=n[Te].length;const t=new Uint8Array(e);for(let Te=0,Ee=0,Re=n.length;Te<Re;Te++){let Ce=n[Te];t.set(Ce,Ee),Ee+=Ce.length}return t},common={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let n=0;n<256;n++)_utf8len[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,Te,Ee,Re,Ce=n.length,De=0;for(Ee=0;Ee<Ce;Ee++)t=n.charCodeAt(Ee),(t&64512)===55296&&Ee+1<Ce&&(Te=n.charCodeAt(Ee+1),(Te&64512)===56320&&(t=65536+(t-55296<<10)+(Te-56320),Ee++)),De+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(De),Re=0,Ee=0;Re<De;Ee++)t=n.charCodeAt(Ee),(t&64512)===55296&&Ee+1<Ce&&(Te=n.charCodeAt(Ee+1),(Te&64512)===56320&&(t=65536+(t-55296<<10)+(Te-56320),Ee++)),t<128?e[Re++]=t:t<2048?(e[Re++]=192|t>>>6,e[Re++]=128|t&63):t<65536?(e[Re++]=224|t>>>12,e[Re++]=128|t>>>6&63,e[Re++]=128|t&63):(e[Re++]=240|t>>>18,e[Re++]=128|t>>>12&63,e[Re++]=128|t>>>6&63,e[Re++]=128|t&63);return e};const buf2binstring=(n,e)=>{if(e<65534&&n.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let Te=0;Te<e;Te++)t+=String.fromCharCode(n[Te]);return t};var buf2string=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let Te,Ee;const Re=new Array(t*2);for(Ee=0,Te=0;Te<t;){let Ce=n[Te++];if(Ce<128){Re[Ee++]=Ce;continue}let De=_utf8len[Ce];if(De>4){Re[Ee++]=65533,Te+=De-1;continue}for(Ce&=De===2?31:De===3?15:7;De>1&&Te<t;)Ce=Ce<<6|n[Te++]&63,De--;if(De>1){Re[Ee++]=65533;continue}Ce<65536?Re[Ee++]=Ce:(Ce-=65536,Re[Ee++]=55296|Ce>>10&1023,Re[Ee++]=56320|Ce&1023)}return buf2binstring(Re,Ee)},utf8border=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+_utf8len[n[t]]>e?t:e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast=function(e,t){let Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe,Ue,ze,He,Ge,Ke,Xe,Je,un,fn,yn,gn,mn,dn,vn;const bn=e.state;Te=e.next_in,dn=e.input,Ee=Te+(e.avail_in-5),Re=e.next_out,vn=e.output,Ce=Re-(t-e.avail_out),De=Re+(e.avail_out-257),$e=bn.dmax,Ve=bn.wsize,Be=bn.whave,Me=bn.wnext,Oe=bn.window,Ue=bn.hold,ze=bn.bits,He=bn.lencode,Ge=bn.distcode,Ke=(1<<bn.lenbits)-1,Xe=(1<<bn.distbits)-1;e:do{ze<15&&(Ue+=dn[Te++]<<ze,ze+=8,Ue+=dn[Te++]<<ze,ze+=8),Je=He[Ue&Ke];t:for(;;){if(un=Je>>>24,Ue>>>=un,ze-=un,un=Je>>>16&255,un===0)vn[Re++]=Je&65535;else if(un&16){fn=Je&65535,un&=15,un&&(ze<un&&(Ue+=dn[Te++]<<ze,ze+=8),fn+=Ue&(1<<un)-1,Ue>>>=un,ze-=un),ze<15&&(Ue+=dn[Te++]<<ze,ze+=8,Ue+=dn[Te++]<<ze,ze+=8),Je=Ge[Ue&Xe];n:for(;;){if(un=Je>>>24,Ue>>>=un,ze-=un,un=Je>>>16&255,un&16){if(yn=Je&65535,un&=15,ze<un&&(Ue+=dn[Te++]<<ze,ze+=8,ze<un&&(Ue+=dn[Te++]<<ze,ze+=8)),yn+=Ue&(1<<un)-1,yn>$e){e.msg="invalid distance too far back",bn.mode=BAD$1;break e}if(Ue>>>=un,ze-=un,un=Re-Ce,yn>un){if(un=yn-un,un>Be&&bn.sane){e.msg="invalid distance too far back",bn.mode=BAD$1;break e}if(gn=0,mn=Oe,Me===0){if(gn+=Ve-un,un<fn){fn-=un;do vn[Re++]=Oe[gn++];while(--un);gn=Re-yn,mn=vn}}else if(Me<un){if(gn+=Ve+Me-un,un-=Me,un<fn){fn-=un;do vn[Re++]=Oe[gn++];while(--un);if(gn=0,Me<fn){un=Me,fn-=un;do vn[Re++]=Oe[gn++];while(--un);gn=Re-yn,mn=vn}}}else if(gn+=Me-un,un<fn){fn-=un;do vn[Re++]=Oe[gn++];while(--un);gn=Re-yn,mn=vn}for(;fn>2;)vn[Re++]=mn[gn++],vn[Re++]=mn[gn++],vn[Re++]=mn[gn++],fn-=3;fn&&(vn[Re++]=mn[gn++],fn>1&&(vn[Re++]=mn[gn++]))}else{gn=Re-yn;do vn[Re++]=vn[gn++],vn[Re++]=vn[gn++],vn[Re++]=vn[gn++],fn-=3;while(fn>2);fn&&(vn[Re++]=vn[gn++],fn>1&&(vn[Re++]=vn[gn++]))}}else if((un&64)===0){Je=Ge[(Je&65535)+(Ue&(1<<un)-1)];continue n}else{e.msg="invalid distance code",bn.mode=BAD$1;break e}break}}else if((un&64)===0){Je=He[(Je&65535)+(Ue&(1<<un)-1)];continue t}else if(un&32){bn.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",bn.mode=BAD$1;break e}break}}while(Te<Ee&&Re<De);fn=ze>>3,Te-=fn,ze-=fn<<3,Ue&=(1<<ze)-1,e.next_in=Te,e.next_out=Re,e.avail_in=Te<Ee?5+(Ee-Te):5-(Te-Ee),e.avail_out=Re<De?257+(De-Re):257-(Re-De),bn.hold=Ue,bn.bits=ze};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(n,e,t,Te,Ee,Re,Ce,De)=>{const $e=De.bits;let Ve=0,Be=0,Me=0,Oe=0,Ue=0,ze=0,He=0,Ge=0,Ke=0,Xe=0,Je,un,fn,yn,gn,mn=null,dn;const vn=new Uint16Array(MAXBITS+1),bn=new Uint16Array(MAXBITS+1);let Tn=null,En,In,Nn;for(Ve=0;Ve<=MAXBITS;Ve++)vn[Ve]=0;for(Be=0;Be<Te;Be++)vn[e[t+Be]]++;for(Ue=$e,Oe=MAXBITS;Oe>=1&&vn[Oe]===0;Oe--);if(Ue>Oe&&(Ue=Oe),Oe===0)return Ee[Re++]=1<<24|64<<16|0,Ee[Re++]=1<<24|64<<16|0,De.bits=1,0;for(Me=1;Me<Oe&&vn[Me]===0;Me++);for(Ue<Me&&(Ue=Me),Ge=1,Ve=1;Ve<=MAXBITS;Ve++)if(Ge<<=1,Ge-=vn[Ve],Ge<0)return-1;if(Ge>0&&(n===CODES$1||Oe!==1))return-1;for(bn[1]=0,Ve=1;Ve<MAXBITS;Ve++)bn[Ve+1]=bn[Ve]+vn[Ve];for(Be=0;Be<Te;Be++)e[t+Be]!==0&&(Ce[bn[e[t+Be]]++]=Be);if(n===CODES$1?(mn=Tn=Ce,dn=20):n===LENS$1?(mn=lbase,Tn=lext,dn=257):(mn=dbase,Tn=dext,dn=0),Xe=0,Be=0,Ve=Me,gn=Re,ze=Ue,He=0,fn=-1,Ke=1<<Ue,yn=Ke-1,n===LENS$1&&Ke>ENOUGH_LENS$1||n===DISTS$1&&Ke>ENOUGH_DISTS$1)return 1;for(;;){En=Ve-He,Ce[Be]+1<dn?(In=0,Nn=Ce[Be]):Ce[Be]>=dn?(In=Tn[Ce[Be]-dn],Nn=mn[Ce[Be]-dn]):(In=96,Nn=0),Je=1<<Ve-He,un=1<<ze,Me=un;do un-=Je,Ee[gn+(Xe>>He)+un]=En<<24|In<<16|Nn|0;while(un!==0);for(Je=1<<Ve-1;Xe&Je;)Je>>=1;if(Je!==0?(Xe&=Je-1,Xe+=Je):Xe=0,Be++,--vn[Ve]===0){if(Ve===Oe)break;Ve=e[t+Ce[Be]]}if(Ve>Ue&&(Xe&yn)!==fn){for(He===0&&(He=Ue),gn+=Me,ze=Ve-He,Ge=1<<ze;ze+He<Oe&&(Ge-=vn[ze+He],!(Ge<=0));)ze++,Ge<<=1;if(Ke+=1<<ze,n===LENS$1&&Ke>ENOUGH_LENS$1||n===DISTS$1&&Ke>ENOUGH_DISTS$1)return 1;fn=Xe&yn,Ee[fn]=Ue<<24|ze<<16|gn-Re|0}}return Xe!==0&&(Ee[gn+Xe]=Ve-He<<24|64<<16|0),De.bits=Ue,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<HEAD||e.mode>SYNC?1:0},inflateResetKeep=n=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=HEAD,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ENOUGH_LENS),e.distcode=e.distdyn=new Int32Array(ENOUGH_DISTS),e.sane=1,e.back=-1,Z_OK$1},inflateReset=n=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(n)},inflateReset2=(n,e)=>{let t;if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const Te=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Z_STREAM_ERROR$1:(Te.window!==null&&Te.wbits!==e&&(Te.window=null),Te.wrap=t,Te.wbits=e,inflateReset(n))},inflateInit2=(n,e)=>{if(!n)return Z_STREAM_ERROR$1;const t=new InflateState;n.state=t,t.strm=n,t.window=null,t.mode=HEAD;const Te=inflateReset2(n,e);return Te!==Z_OK$1&&(n.state=null),Te},inflateInit=n=>inflateInit2(n,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=n=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(inftrees(LENS,n.lens,0,288,lenfix,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;inftrees(DISTS,n.lens,0,32,distfix,0,n.work,{bits:5}),virgin=!1}n.lencode=lenfix,n.lenbits=9,n.distcode=distfix,n.distbits=5},updatewindow=(n,e,t,Te)=>{let Ee;const Re=n.state;return Re.window===null&&(Re.wsize=1<<Re.wbits,Re.wnext=0,Re.whave=0,Re.window=new Uint8Array(Re.wsize)),Te>=Re.wsize?(Re.window.set(e.subarray(t-Re.wsize,t),0),Re.wnext=0,Re.whave=Re.wsize):(Ee=Re.wsize-Re.wnext,Ee>Te&&(Ee=Te),Re.window.set(e.subarray(t-Te,t-Te+Ee),Re.wnext),Te-=Ee,Te?(Re.window.set(e.subarray(t-Te,t),0),Re.wnext=Te,Re.whave=Re.wsize):(Re.wnext+=Ee,Re.wnext===Re.wsize&&(Re.wnext=0),Re.whave<Re.wsize&&(Re.whave+=Ee))),0},inflate$2=(n,e)=>{let t,Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe,Ue,ze,He,Ge=0,Ke,Xe,Je,un,fn,yn,gn,mn;const dn=new Uint8Array(4);let vn,bn;const Tn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(n)||!n.output||!n.input&&n.avail_in!==0)return Z_STREAM_ERROR$1;t=n.state,t.mode===TYPE&&(t.mode=TYPEDO),Ce=n.next_out,Ee=n.output,$e=n.avail_out,Re=n.next_in,Te=n.input,De=n.avail_in,Ve=t.hold,Be=t.bits,Me=De,Oe=$e,mn=Z_OK$1;e:for(;;)switch(t.mode){case HEAD:if(t.wrap===0){t.mode=TYPEDO;break}for(;Be<16;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(t.wrap&2&&Ve===35615){t.wbits===0&&(t.wbits=15),t.check=0,dn[0]=Ve&255,dn[1]=Ve>>>8&255,t.check=crc32_1(t.check,dn,2,0),Ve=0,Be=0,t.mode=FLAGS;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((Ve&255)<<8)+(Ve>>8))%31){n.msg="incorrect header check",t.mode=BAD;break}if((Ve&15)!==Z_DEFLATED){n.msg="unknown compression method",t.mode=BAD;break}if(Ve>>>=4,Be-=4,gn=(Ve&15)+8,t.wbits===0&&(t.wbits=gn),gn>15||gn>t.wbits){n.msg="invalid window size",t.mode=BAD;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=Ve&512?DICTID:TYPE,Ve=0,Be=0;break;case FLAGS:for(;Be<16;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(t.flags=Ve,(t.flags&255)!==Z_DEFLATED){n.msg="unknown compression method",t.mode=BAD;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=BAD;break}t.head&&(t.head.text=Ve>>8&1),t.flags&512&&t.wrap&4&&(dn[0]=Ve&255,dn[1]=Ve>>>8&255,t.check=crc32_1(t.check,dn,2,0)),Ve=0,Be=0,t.mode=TIME;case TIME:for(;Be<32;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}t.head&&(t.head.time=Ve),t.flags&512&&t.wrap&4&&(dn[0]=Ve&255,dn[1]=Ve>>>8&255,dn[2]=Ve>>>16&255,dn[3]=Ve>>>24&255,t.check=crc32_1(t.check,dn,4,0)),Ve=0,Be=0,t.mode=OS;case OS:for(;Be<16;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}t.head&&(t.head.xflags=Ve&255,t.head.os=Ve>>8),t.flags&512&&t.wrap&4&&(dn[0]=Ve&255,dn[1]=Ve>>>8&255,t.check=crc32_1(t.check,dn,2,0)),Ve=0,Be=0,t.mode=EXLEN;case EXLEN:if(t.flags&1024){for(;Be<16;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}t.length=Ve,t.head&&(t.head.extra_len=Ve),t.flags&512&&t.wrap&4&&(dn[0]=Ve&255,dn[1]=Ve>>>8&255,t.check=crc32_1(t.check,dn,2,0)),Ve=0,Be=0}else t.head&&(t.head.extra=null);t.mode=EXTRA;case EXTRA:if(t.flags&1024&&(Ue=t.length,Ue>De&&(Ue=De),Ue&&(t.head&&(gn=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(Te.subarray(Re,Re+Ue),gn)),t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,Te,Ue,Re)),De-=Ue,Re+=Ue,t.length-=Ue),t.length))break e;t.length=0,t.mode=NAME;case NAME:if(t.flags&2048){if(De===0)break e;Ue=0;do gn=Te[Re+Ue++],t.head&&gn&&t.length<65536&&(t.head.name+=String.fromCharCode(gn));while(gn&&Ue<De);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,Te,Ue,Re)),De-=Ue,Re+=Ue,gn)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=COMMENT;case COMMENT:if(t.flags&4096){if(De===0)break e;Ue=0;do gn=Te[Re+Ue++],t.head&&gn&&t.length<65536&&(t.head.comment+=String.fromCharCode(gn));while(gn&&Ue<De);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,Te,Ue,Re)),De-=Ue,Re+=Ue,gn)break e}else t.head&&(t.head.comment=null);t.mode=HCRC;case HCRC:if(t.flags&512){for(;Be<16;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(t.wrap&4&&Ve!==(t.check&65535)){n.msg="header crc mismatch",t.mode=BAD;break}Ve=0,Be=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=TYPE;break;case DICTID:for(;Be<32;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}n.adler=t.check=zswap32(Ve),Ve=0,Be=0,t.mode=DICT;case DICT:if(t.havedict===0)return n.next_out=Ce,n.avail_out=$e,n.next_in=Re,n.avail_in=De,t.hold=Ve,t.bits=Be,Z_NEED_DICT$1;n.adler=t.check=1,t.mode=TYPE;case TYPE:if(e===Z_BLOCK||e===Z_TREES)break e;case TYPEDO:if(t.last){Ve>>>=Be&7,Be-=Be&7,t.mode=CHECK;break}for(;Be<3;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}switch(t.last=Ve&1,Ve>>>=1,Be-=1,Ve&3){case 0:t.mode=STORED;break;case 1:if(fixedtables(t),t.mode=LEN_,e===Z_TREES){Ve>>>=2,Be-=2;break e}break;case 2:t.mode=TABLE;break;case 3:n.msg="invalid block type",t.mode=BAD}Ve>>>=2,Be-=2;break;case STORED:for(Ve>>>=Be&7,Be-=Be&7;Be<32;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if((Ve&65535)!==(Ve>>>16^65535)){n.msg="invalid stored block lengths",t.mode=BAD;break}if(t.length=Ve&65535,Ve=0,Be=0,t.mode=COPY_,e===Z_TREES)break e;case COPY_:t.mode=COPY;case COPY:if(Ue=t.length,Ue){if(Ue>De&&(Ue=De),Ue>$e&&(Ue=$e),Ue===0)break e;Ee.set(Te.subarray(Re,Re+Ue),Ce),De-=Ue,Re+=Ue,$e-=Ue,Ce+=Ue,t.length-=Ue;break}t.mode=TYPE;break;case TABLE:for(;Be<14;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(t.nlen=(Ve&31)+257,Ve>>>=5,Be-=5,t.ndist=(Ve&31)+1,Ve>>>=5,Be-=5,t.ncode=(Ve&15)+4,Ve>>>=4,Be-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=BAD;break}t.have=0,t.mode=LENLENS;case LENLENS:for(;t.have<t.ncode;){for(;Be<3;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}t.lens[Tn[t.have++]]=Ve&7,Ve>>>=3,Be-=3}for(;t.have<19;)t.lens[Tn[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,vn={bits:t.lenbits},mn=inftrees(CODES,t.lens,0,19,t.lencode,0,t.work,vn),t.lenbits=vn.bits,mn){n.msg="invalid code lengths set",t.mode=BAD;break}t.have=0,t.mode=CODELENS;case CODELENS:for(;t.have<t.nlen+t.ndist;){for(;Ge=t.lencode[Ve&(1<<t.lenbits)-1],Ke=Ge>>>24,Xe=Ge>>>16&255,Je=Ge&65535,!(Ke<=Be);){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(Je<16)Ve>>>=Ke,Be-=Ke,t.lens[t.have++]=Je;else{if(Je===16){for(bn=Ke+2;Be<bn;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(Ve>>>=Ke,Be-=Ke,t.have===0){n.msg="invalid bit length repeat",t.mode=BAD;break}gn=t.lens[t.have-1],Ue=3+(Ve&3),Ve>>>=2,Be-=2}else if(Je===17){for(bn=Ke+3;Be<bn;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}Ve>>>=Ke,Be-=Ke,gn=0,Ue=3+(Ve&7),Ve>>>=3,Be-=3}else{for(bn=Ke+7;Be<bn;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}Ve>>>=Ke,Be-=Ke,gn=0,Ue=11+(Ve&127),Ve>>>=7,Be-=7}if(t.have+Ue>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=BAD;break}for(;Ue--;)t.lens[t.have++]=gn}}if(t.mode===BAD)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=BAD;break}if(t.lenbits=9,vn={bits:t.lenbits},mn=inftrees(LENS,t.lens,0,t.nlen,t.lencode,0,t.work,vn),t.lenbits=vn.bits,mn){n.msg="invalid literal/lengths set",t.mode=BAD;break}if(t.distbits=6,t.distcode=t.distdyn,vn={bits:t.distbits},mn=inftrees(DISTS,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,vn),t.distbits=vn.bits,mn){n.msg="invalid distances set",t.mode=BAD;break}if(t.mode=LEN_,e===Z_TREES)break e;case LEN_:t.mode=LEN;case LEN:if(De>=6&&$e>=258){n.next_out=Ce,n.avail_out=$e,n.next_in=Re,n.avail_in=De,t.hold=Ve,t.bits=Be,inffast(n,Oe),Ce=n.next_out,Ee=n.output,$e=n.avail_out,Re=n.next_in,Te=n.input,De=n.avail_in,Ve=t.hold,Be=t.bits,t.mode===TYPE&&(t.back=-1);break}for(t.back=0;Ge=t.lencode[Ve&(1<<t.lenbits)-1],Ke=Ge>>>24,Xe=Ge>>>16&255,Je=Ge&65535,!(Ke<=Be);){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(Xe&&(Xe&240)===0){for(un=Ke,fn=Xe,yn=Je;Ge=t.lencode[yn+((Ve&(1<<un+fn)-1)>>un)],Ke=Ge>>>24,Xe=Ge>>>16&255,Je=Ge&65535,!(un+Ke<=Be);){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}Ve>>>=un,Be-=un,t.back+=un}if(Ve>>>=Ke,Be-=Ke,t.back+=Ke,t.length=Je,Xe===0){t.mode=LIT;break}if(Xe&32){t.back=-1,t.mode=TYPE;break}if(Xe&64){n.msg="invalid literal/length code",t.mode=BAD;break}t.extra=Xe&15,t.mode=LENEXT;case LENEXT:if(t.extra){for(bn=t.extra;Be<bn;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}t.length+=Ve&(1<<t.extra)-1,Ve>>>=t.extra,Be-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=DIST;case DIST:for(;Ge=t.distcode[Ve&(1<<t.distbits)-1],Ke=Ge>>>24,Xe=Ge>>>16&255,Je=Ge&65535,!(Ke<=Be);){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if((Xe&240)===0){for(un=Ke,fn=Xe,yn=Je;Ge=t.distcode[yn+((Ve&(1<<un+fn)-1)>>un)],Ke=Ge>>>24,Xe=Ge>>>16&255,Je=Ge&65535,!(un+Ke<=Be);){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}Ve>>>=un,Be-=un,t.back+=un}if(Ve>>>=Ke,Be-=Ke,t.back+=Ke,Xe&64){n.msg="invalid distance code",t.mode=BAD;break}t.offset=Je,t.extra=Xe&15,t.mode=DISTEXT;case DISTEXT:if(t.extra){for(bn=t.extra;Be<bn;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}t.offset+=Ve&(1<<t.extra)-1,Ve>>>=t.extra,Be-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=BAD;break}t.mode=MATCH;case MATCH:if($e===0)break e;if(Ue=Oe-$e,t.offset>Ue){if(Ue=t.offset-Ue,Ue>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=BAD;break}Ue>t.wnext?(Ue-=t.wnext,ze=t.wsize-Ue):ze=t.wnext-Ue,Ue>t.length&&(Ue=t.length),He=t.window}else He=Ee,ze=Ce-t.offset,Ue=t.length;Ue>$e&&(Ue=$e),$e-=Ue,t.length-=Ue;do Ee[Ce++]=He[ze++];while(--Ue);t.length===0&&(t.mode=LEN);break;case LIT:if($e===0)break e;Ee[Ce++]=t.length,$e--,t.mode=LEN;break;case CHECK:if(t.wrap){for(;Be<32;){if(De===0)break e;De--,Ve|=Te[Re++]<<Be,Be+=8}if(Oe-=$e,n.total_out+=Oe,t.total+=Oe,t.wrap&4&&Oe&&(n.adler=t.check=t.flags?crc32_1(t.check,Ee,Oe,Ce-Oe):adler32_1(t.check,Ee,Oe,Ce-Oe)),Oe=$e,t.wrap&4&&(t.flags?Ve:zswap32(Ve))!==t.check){n.msg="incorrect data check",t.mode=BAD;break}Ve=0,Be=0}t.mode=LENGTH;case LENGTH:if(t.wrap&&t.flags){for(;Be<32;){if(De===0)break e;De--,Ve+=Te[Re++]<<Be,Be+=8}if(t.wrap&4&&Ve!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=BAD;break}Ve=0,Be=0}t.mode=DONE;case DONE:mn=Z_STREAM_END$1;break e;case BAD:mn=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return n.next_out=Ce,n.avail_out=$e,n.next_in=Re,n.avail_in=De,t.hold=Ve,t.bits=Be,(t.wsize||Oe!==n.avail_out&&t.mode<BAD&&(t.mode<CHECK||e!==Z_FINISH$1))&&updatewindow(n,n.output,n.next_out,Oe-n.avail_out),Me-=n.avail_in,Oe-=n.avail_out,n.total_in+=Me,n.total_out+=Oe,t.total+=Oe,t.wrap&4&&Oe&&(n.adler=t.check=t.flags?crc32_1(t.check,Ee,Oe,n.next_out-Oe):adler32_1(t.check,Ee,Oe,n.next_out-Oe)),n.data_type=t.bits+(t.last?64:0)+(t.mode===TYPE?128:0)+(t.mode===LEN_||t.mode===COPY_?256:0),(Me===0&&Oe===0||e===Z_FINISH$1)&&mn===Z_OK$1&&(mn=Z_BUF_ERROR),mn},inflateEnd=n=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;let e=n.state;return e.window&&(e.window=null),n.state=null,Z_OK$1},inflateGetHeader=(n,e)=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const t=n.state;return(t.wrap&2)===0?Z_STREAM_ERROR$1:(t.head=e,e.done=!1,Z_OK$1)},inflateSetDictionary=(n,e)=>{const t=e.length;let Te,Ee,Re;return inflateStateCheck(n)||(Te=n.state,Te.wrap!==0&&Te.mode!==DICT)?Z_STREAM_ERROR$1:Te.mode===DICT&&(Ee=1,Ee=adler32_1(Ee,e,t,0),Ee!==Te.check)?Z_DATA_ERROR$1:(Re=updatewindow(n,e,t,t),Re?(Te.mode=MEM,Z_MEM_ERROR$1):(Te.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(n){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let t=inflate_1$2.inflateInit2(this.strm,e.windowBits);if(t!==Z_OK)throw new Error(messages[t]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=strings.string2buf(e.dictionary):toString$2.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=inflate_1$2.inflateSetDictionary(this.strm,e.dictionary),t!==Z_OK)))throw new Error(messages[t])}Inflate$1.prototype.push=function(n,e){const t=this.strm,Te=this.options.chunkSize,Ee=this.options.dictionary;let Re,Ce,De;if(this.ended)return!1;for(e===~~e?Ce=e:Ce=e===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(Te),t.next_out=0,t.avail_out=Te),Re=inflate_1$2.inflate(t,Ce),Re===Z_NEED_DICT&&Ee&&(Re=inflate_1$2.inflateSetDictionary(t,Ee),Re===Z_OK?Re=inflate_1$2.inflate(t,Ce):Re===Z_DATA_ERROR&&(Re=Z_NEED_DICT));t.avail_in>0&&Re===Z_STREAM_END&&t.state.wrap>0&&n[t.next_in]!==0;)inflate_1$2.inflateReset(t),Re=inflate_1$2.inflate(t,Ce);switch(Re){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(Re),this.ended=!0,!1}if(De=t.avail_out,t.next_out&&(t.avail_out===0||Re===Z_STREAM_END))if(this.options.to==="string"){let $e=strings.utf8border(t.output,t.next_out),Ve=t.next_out-$e,Be=strings.buf2string(t.output,$e);t.next_out=Ve,t.avail_out=Te-Ve,Ve&&t.output.set(t.output.subarray($e,$e+Ve),0),this.onData(Be)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(Re===Z_OK&&De===0)){if(Re===Z_STREAM_END)return Re=inflate_1$2.inflateEnd(this.strm),this.onEnd(Re),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(n){this.chunks.push(n)};Inflate$1.prototype.onEnd=function(n){n===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function inflate$1(n,e){const t=new Inflate$1(e);if(t.push(n),t.err)throw t.msg||messages[t.err];return t.result}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2};const{Inflate,inflate}=inflate_1$1;var Inflate_1=Inflate,inflate_1=inflate;const crcTable=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;crcTable[n]=e}const initialCrc=4294967295;function updateCrc(n,e,t){let Te=n;for(let Ee=0;Ee<t;Ee++)Te=crcTable[(Te^e[Ee])&255]^Te>>>8;return Te}function crc(n,e){return(updateCrc(initialCrc,n,e)^initialCrc)>>>0}function checkCrc(n,e,t){const Te=n.readUint32(),Ee=crc(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(Ee!==Te)throw new Error(`CRC mismatch for chunk ${t}. Expected ${Te}, found ${Ee}`)}function unfilterNone(n,e,t){for(let Te=0;Te<t;Te++)e[Te]=n[Te]}function unfilterSub(n,e,t,Te){let Ee=0;for(;Ee<Te;Ee++)e[Ee]=n[Ee];for(;Ee<t;Ee++)e[Ee]=n[Ee]+e[Ee-Te]&255}function unfilterUp(n,e,t,Te){let Ee=0;if(t.length===0)for(;Ee<Te;Ee++)e[Ee]=n[Ee];else for(;Ee<Te;Ee++)e[Ee]=n[Ee]+t[Ee]&255}function unfilterAverage(n,e,t,Te,Ee){let Re=0;if(t.length===0){for(;Re<Ee;Re++)e[Re]=n[Re];for(;Re<Te;Re++)e[Re]=n[Re]+(e[Re-Ee]>>1)&255}else{for(;Re<Ee;Re++)e[Re]=n[Re]+(t[Re]>>1)&255;for(;Re<Te;Re++)e[Re]=n[Re]+(e[Re-Ee]+t[Re]>>1)&255}}function unfilterPaeth(n,e,t,Te,Ee){let Re=0;if(t.length===0){for(;Re<Ee;Re++)e[Re]=n[Re];for(;Re<Te;Re++)e[Re]=n[Re]+e[Re-Ee]&255}else{for(;Re<Ee;Re++)e[Re]=n[Re]+t[Re]&255;for(;Re<Te;Re++)e[Re]=n[Re]+paethPredictor(e[Re-Ee],t[Re],t[Re-Ee])&255}}function paethPredictor(n,e,t){const Te=n+e-t,Ee=Math.abs(Te-n),Re=Math.abs(Te-e),Ce=Math.abs(Te-t);return Ee<=Re&&Ee<=Ce?n:Re<=Ce?e:t}function applyUnfilter(n,e,t,Te,Ee,Re){switch(n){case 0:unfilterNone(e,t,Ee);break;case 1:unfilterSub(e,t,Ee,Re);break;case 2:unfilterUp(e,t,Te,Ee);break;case 3:unfilterAverage(e,t,Te,Ee,Re);break;case 4:unfilterPaeth(e,t,Te,Ee,Re);break;default:throw new Error(`Unsupported filter: ${n}`)}}const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer),osIsLittleEndian$1=uint8$1[0]===255;function decodeInterlaceAdam7(n){const{data:e,width:t,height:Te,channels:Ee,depth:Re}=n,Ce=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],De=Math.ceil(Re/8)*Ee,$e=new Uint8Array(Te*t*De);let Ve=0;for(let Be=0;Be<7;Be++){const Me=Ce[Be],Oe=Math.ceil((t-Me.x)/Me.xStep),Ue=Math.ceil((Te-Me.y)/Me.yStep);if(Oe<=0||Ue<=0)continue;const ze=Oe*De,He=new Uint8Array(ze);for(let Ge=0;Ge<Ue;Ge++){const Ke=e[Ve++],Xe=e.subarray(Ve,Ve+ze);Ve+=ze;const Je=new Uint8Array(ze);applyUnfilter(Ke,Xe,Je,He,ze,De),He.set(Je);for(let un=0;un<Oe;un++){const fn=Me.x+un*Me.xStep,yn=Me.y+Ge*Me.yStep;if(!(fn>=t||yn>=Te))for(let gn=0;gn<De;gn++)$e[(yn*t+fn)*De+gn]=Je[un*De+gn]}}}if(Re===16){const Be=new Uint16Array($e.buffer);if(osIsLittleEndian$1)for(let Me=0;Me<Be.length;Me++)Be[Me]=swap16$1(Be[Me]);return Be}else return $e}function swap16$1(n){return(n&255)<<8|n>>8&255}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty$2=new Uint8Array(0);function decodeInterlaceNull(n){const{data:e,width:t,height:Te,channels:Ee,depth:Re}=n,Ce=Math.ceil(Re/8)*Ee,De=Math.ceil(Re/8*Ee*t),$e=new Uint8Array(Te*De);let Ve=empty$2,Be=0,Me,Oe;for(let Ue=0;Ue<Te;Ue++){switch(Me=e.subarray(Be+1,Be+1+De),Oe=$e.subarray(Ue*De,(Ue+1)*De),e[Be]){case 0:unfilterNone(Me,Oe,De);break;case 1:unfilterSub(Me,Oe,De,Ce);break;case 2:unfilterUp(Me,Oe,Ve,De);break;case 3:unfilterAverage(Me,Oe,Ve,De,Ce);break;case 4:unfilterPaeth(Me,Oe,Ve,De,Ce);break;default:throw new Error(`Unsupported filter: ${e[Be]}`)}Ve=Oe,Be+=De+1}if(Re===16){const Ue=new Uint16Array($e.buffer);if(osIsLittleEndian)for(let ze=0;ze<Ue.length;ze++)Ue[ze]=swap16(Ue[ze]);return Ue}else return $e}function swap16(n){return(n&255)<<8|n>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function checkSignature(n){if(!hasPngSignature(n.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(n){if(n.length<pngSignature.length)return!1;for(let e=0;e<pngSignature.length;e++)if(n[e]!==pngSignature[e])return!1;return!0}const textChunkName="tEXt",NULL=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(n){if(validateLatin1(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(n){if(!latin1Regex.test(n))throw new Error("invalid latin1 text")}function decodetEXt(n,e,t){const Te=readKeyword(e);n[Te]=readLatin1(e,t-Te.length-1)}function readKeyword(n){for(n.mark();n.readByte()!==NULL;);const e=n.offset;n.reset();const t=latin1Decoder.decode(n.readBytes(e-n.offset-1));return n.skip(1),validateKeyword(t),t}function readLatin1(n,e){return latin1Decoder.decode(n.readBytes(e))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},DisposeOpType={NONE:0,BACKGROUND:1,PREVIOUS:2},BlendOpType={SOURCE:0,OVER:1};class PngDecoder extends IOBuffer{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:Te=!1}=t;this._checkCrc=Te,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(checkSignature(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const Te=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case textChunkName:decodetEXt(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-Te!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const Te=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=Te+e;break}if(this.offset-Te!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=checkBitDepth(this.readUint8());const t=this.readUint8();this._colorType=t;let Te;switch(t){case ColorType.GREYSCALE:Te=1;break;case ColorType.TRUECOLOUR:Te=3;break;case ColorType.INDEXED_COLOUR:Te=1;break;case ColorType.GREYSCALE_ALPHA:Te=2;break;case ColorType.TRUECOLOUR_ALPHA:Te=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=Te,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const Te=[];this._palette=Te;for(let Ee=0;Ee<t;Ee++)Te.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,Te=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,Te,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,Te=this.offset+this.byteOffset;if(Te+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,Te,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const Te=this.readByte();this._palette[t].push(Te)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=readKeyword(this),Te=this.readUint8();if(Te!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${Te}`);const Ee=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:inflate_1(Ee)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),Te=this.readByte();this._png.resolution={x:e,y:t,unit:Te}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},Te=this._frames.at(e);if(Te){if(Te.data=decodeInterlaceNull({data:Te.data,width:Te.width,height:Te.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||Te.xOffset===0&&Te.yOffset===0&&Te.width===this._png.width&&Te.height===this._png.height)t.data=Te.data;else{const Ee=this._apng.frames.at(e-1);this.disposeFrame(Te,Ee,t),this.addFrameDataToCanvas(t,Te)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,Te){switch(e.disposeOp){case DisposeOpType.NONE:break;case DisposeOpType.BACKGROUND:for(let Ee=0;Ee<this._png.height;Ee++)for(let Re=0;Re<this._png.width;Re++){const Ce=(Ee*e.width+Re)*this._png.channels;for(let De=0;De<this._png.channels;De++)Te.data[Ce+De]=0}break;case DisposeOpType.PREVIOUS:Te.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const Te=1<<this._png.depth,Ee=(Re,Ce)=>{const De=((Re+t.yOffset)*this._png.width+t.xOffset+Ce)*this._png.channels,$e=(Re*t.width+Ce)*this._png.channels;return{index:De,frameIndex:$e}};switch(t.blendOp){case BlendOpType.SOURCE:for(let Re=0;Re<t.height;Re++)for(let Ce=0;Ce<t.width;Ce++){const{index:De,frameIndex:$e}=Ee(Re,Ce);for(let Ve=0;Ve<this._png.channels;Ve++)e.data[De+Ve]=t.data[$e+Ve]}break;case BlendOpType.OVER:for(let Re=0;Re<t.height;Re++)for(let Ce=0;Ce<t.width;Ce++){const{index:De,frameIndex:$e}=Ee(Re,Ce);for(let Ve=0;Ve<this._png.channels;Ve++){const Be=t.data[$e+this._png.channels-1]/Te,Me=Ve%(this._png.channels-1)===0?1:t.data[$e+Ve],Oe=Math.floor(Be*Me+(1-Be)*e.data[De+Ve]);e.data[De+Ve]+=Oe}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===InterlaceMethod.ADAM7)this._png.data=decodeInterlaceAdam7({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:DisposeOpType.NONE,blendOp:BlendOpType.SOURCE,data:e}),this._inflator=new Inflate_1,this._writingDataChunks=!1}}function checkBitDepth(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var ResolutionUnitSpecifier;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(n,e){return new PngDecoder(n,e).decode()}var i=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function a(){i.console&&typeof i.console.log=="function"&&i.console.log.apply(i.console,arguments)}var o={log:a,warn:function(n){i.console&&(typeof i.console.warn=="function"?i.console.warn.apply(i.console,arguments):a.call(null,arguments))},error:function(n){i.console&&(typeof i.console.error=="function"?i.console.error.apply(i.console,arguments):a(n))}};function s(n,e,t){var Te=new XMLHttpRequest;Te.open("GET",n),Te.responseType="blob",Te.onload=function(){l(Te.response,e,t)},Te.onerror=function(){o.error("could not download file")},Te.send()}function u(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var l=i.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==i?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var Te=i.URL||i.webkitURL,Ee=document.createElement("a");e=e||n.name||"download",Ee.download=e,Ee.rel="noopener",typeof n=="string"?(Ee.href=n,Ee.origin!==location.origin?u(Ee.href)?s(n,e,t):c(Ee,Ee.target="_blank"):c(Ee)):(Ee.href=Te.createObjectURL(n),setTimeout(function(){Te.revokeObjectURL(Ee.href)},4e4),setTimeout(function(){c(Ee)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(u(n))s(n,e,t);else{var Te=document.createElement("a");Te.href=n,Te.target="_blank",setTimeout(function(){c(Te)})}else navigator.msSaveOrOpenBlob(function(Ee,Re){return Re===void 0?Re={autoBom:!1}:_typeof(Re)!=="object"&&(o.warn("Deprecated: Expected third argument to be a object"),Re={autoBom:!Re}),Re.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ee.type)?new Blob(["\uFEFF",Ee],{type:Ee.type}):Ee}(n,t),e)}:function(n,e,t,Te){if((Te=Te||open("","_blank"))&&(Te.document.title=Te.document.body.innerText="downloading..."),typeof n=="string")return s(n,e,t);var Ee=n.type==="application/octet-stream",Re=/constructor/i.test(i.HTMLElement)||i.safari,Ce=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ce||Ee&&Re)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var De=new FileReader;De.onloadend=function(){var Be=De.result;Be=Ce?Be:Be.replace(/^data:[^;]*;/,"data:attachment/file;"),Te?Te.location.href=Be:location=Be,Te=null},De.readAsDataURL(n)}else{var $e=i.URL||i.webkitURL,Ve=$e.createObjectURL(n);Te?Te.location=Ve:location.href=Ve,Te=null,setTimeout(function(){$e.revokeObjectURL(Ve)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function h(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(De){return[parseInt(De[1]),parseInt(De[2]),parseInt(De[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(De){return[parseInt(De[1],16),parseInt(De[2],16),parseInt(De[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(De){return[parseInt(De[1]+De[1],16),parseInt(De[2]+De[2],16),parseInt(De[3]+De[3],16)]}}],Te=0;Te<t.length;Te++){var Ee=t[Te].re,Re=t[Te].process,Ce=Ee.exec(n);Ce&&(e=Re(Ce),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var De=this.r.toString(16),$e=this.g.toString(16),Ve=this.b.toString(16);return De.length==1&&(De="0"+De),$e.length==1&&($e="0"+$e),Ve.length==1&&(Ve="0"+Ve),"#"+De+$e+Ve}}var f=i.atob.bind(i),d=i.btoa.bind(i);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function p(n,e){var t=n[0],Te=n[1],Ee=n[2],Re=n[3];t=m(t,Te,Ee,Re,e[0],7,-680876936),Re=m(Re,t,Te,Ee,e[1],12,-389564586),Ee=m(Ee,Re,t,Te,e[2],17,606105819),Te=m(Te,Ee,Re,t,e[3],22,-1044525330),t=m(t,Te,Ee,Re,e[4],7,-176418897),Re=m(Re,t,Te,Ee,e[5],12,1200080426),Ee=m(Ee,Re,t,Te,e[6],17,-1473231341),Te=m(Te,Ee,Re,t,e[7],22,-45705983),t=m(t,Te,Ee,Re,e[8],7,1770035416),Re=m(Re,t,Te,Ee,e[9],12,-1958414417),Ee=m(Ee,Re,t,Te,e[10],17,-42063),Te=m(Te,Ee,Re,t,e[11],22,-1990404162),t=m(t,Te,Ee,Re,e[12],7,1804603682),Re=m(Re,t,Te,Ee,e[13],12,-40341101),Ee=m(Ee,Re,t,Te,e[14],17,-1502002290),t=v(t,Te=m(Te,Ee,Re,t,e[15],22,1236535329),Ee,Re,e[1],5,-165796510),Re=v(Re,t,Te,Ee,e[6],9,-1069501632),Ee=v(Ee,Re,t,Te,e[11],14,643717713),Te=v(Te,Ee,Re,t,e[0],20,-373897302),t=v(t,Te,Ee,Re,e[5],5,-701558691),Re=v(Re,t,Te,Ee,e[10],9,38016083),Ee=v(Ee,Re,t,Te,e[15],14,-660478335),Te=v(Te,Ee,Re,t,e[4],20,-405537848),t=v(t,Te,Ee,Re,e[9],5,568446438),Re=v(Re,t,Te,Ee,e[14],9,-1019803690),Ee=v(Ee,Re,t,Te,e[3],14,-187363961),Te=v(Te,Ee,Re,t,e[8],20,1163531501),t=v(t,Te,Ee,Re,e[13],5,-1444681467),Re=v(Re,t,Te,Ee,e[2],9,-51403784),Ee=v(Ee,Re,t,Te,e[7],14,1735328473),t=b(t,Te=v(Te,Ee,Re,t,e[12],20,-1926607734),Ee,Re,e[5],4,-378558),Re=b(Re,t,Te,Ee,e[8],11,-2022574463),Ee=b(Ee,Re,t,Te,e[11],16,1839030562),Te=b(Te,Ee,Re,t,e[14],23,-35309556),t=b(t,Te,Ee,Re,e[1],4,-1530992060),Re=b(Re,t,Te,Ee,e[4],11,1272893353),Ee=b(Ee,Re,t,Te,e[7],16,-155497632),Te=b(Te,Ee,Re,t,e[10],23,-1094730640),t=b(t,Te,Ee,Re,e[13],4,681279174),Re=b(Re,t,Te,Ee,e[0],11,-358537222),Ee=b(Ee,Re,t,Te,e[3],16,-722521979),Te=b(Te,Ee,Re,t,e[6],23,76029189),t=b(t,Te,Ee,Re,e[9],4,-640364487),Re=b(Re,t,Te,Ee,e[12],11,-421815835),Ee=b(Ee,Re,t,Te,e[15],16,530742520),t=y(t,Te=b(Te,Ee,Re,t,e[2],23,-995338651),Ee,Re,e[0],6,-198630844),Re=y(Re,t,Te,Ee,e[7],10,1126891415),Ee=y(Ee,Re,t,Te,e[14],15,-1416354905),Te=y(Te,Ee,Re,t,e[5],21,-57434055),t=y(t,Te,Ee,Re,e[12],6,1700485571),Re=y(Re,t,Te,Ee,e[3],10,-1894986606),Ee=y(Ee,Re,t,Te,e[10],15,-1051523),Te=y(Te,Ee,Re,t,e[1],21,-2054922799),t=y(t,Te,Ee,Re,e[8],6,1873313359),Re=y(Re,t,Te,Ee,e[15],10,-30611744),Ee=y(Ee,Re,t,Te,e[6],15,-1560198380),Te=y(Te,Ee,Re,t,e[13],21,1309151649),t=y(t,Te,Ee,Re,e[4],6,-145523070),Re=y(Re,t,Te,Ee,e[11],10,-1120210379),Ee=y(Ee,Re,t,Te,e[2],15,718787259),Te=y(Te,Ee,Re,t,e[9],21,-343485551),n[0]=P(t,n[0]),n[1]=P(Te,n[1]),n[2]=P(Ee,n[2]),n[3]=P(Re,n[3])}function g(n,e,t,Te,Ee,Re){return e=P(P(e,n),P(Te,Re)),P(e<<Ee|e>>>32-Ee,t)}function m(n,e,t,Te,Ee,Re,Ce){return g(e&t|~e&Te,n,e,Ee,Re,Ce)}function v(n,e,t,Te,Ee,Re,Ce){return g(e&Te|t&~Te,n,e,Ee,Re,Ce)}function b(n,e,t,Te,Ee,Re,Ce){return g(e^t^Te,n,e,Ee,Re,Ce)}function y(n,e,t,Te,Ee,Re,Ce){return g(t^(e|~Te),n,e,Ee,Re,Ce)}function w(n){var e,t=n.length,Te=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)p(Te,N(n.substring(e-64,e)));n=n.substring(e-64);var Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)Ee[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(Ee[e>>2]|=128<<(e%4<<3),e>55)for(p(Te,Ee),e=0;e<16;e++)Ee[e]=0;return Ee[14]=8*t,p(Te,Ee),Te}function N(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var L="0123456789abcdef".split("");function x(n){for(var e="",t=0;t<4;t++)e+=L[n>>8*t+4&15]+L[n>>8*t&15];return e}function A(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function S(n){return w(n).map(A).join("")}var _=function(n){for(var e=0;e<n.length;e++)n[e]=x(n[e]);return n.join("")}(w("hello"))!="5d41402abc4b2a76b9719d911017c592";function P(n,e){if(_){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function k(n,e){var t,Te,Ee,Re;if(n!==t){for(var Ce=(Ee=n,Re=1+(256/n.length|0),new Array(Re+1).join(Ee)),De=[],$e=0;$e<256;$e++)De[$e]=$e;var Ve=0;for($e=0;$e<256;$e++){var Be=De[$e];Ve=(Ve+Be+Ce.charCodeAt($e))%256,De[$e]=De[Ve],De[Ve]=Be}t=n,Te=De}else De=Te;var Me=e.length,Oe=0,Ue=0,ze="";for($e=0;$e<Me;$e++)Ue=(Ue+(Be=De[Oe=(Oe+1)%256]))%256,De[Oe]=De[Ue],De[Ue]=Be,Ce=De[(De[Oe]+De[Ue])%256],ze+=String.fromCharCode(e.charCodeAt($e)^Ce);return ze}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F={print:4,modify:8,copy:16,"annot-forms":32};function I(n,e,t,Te){this.v=1,this.r=2;var Ee=192;n.forEach(function(De){if(F.perm!==void 0)throw new Error("Invalid permission: "+De);Ee+=F[De]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var Re=(e+this.padding).substr(0,32),Ce=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Re,Ce),this.P=-(1+(255^Ee)),this.encryptionKey=S(Re+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(Te)).substr(0,5),this.U=k(this.encryptionKey,this.padding)}function j(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,Te=0;Te<t;Te++){var Ee=n.charCodeAt(Te);e+=Ee<33||Ee===35||Ee===37||Ee===40||Ee===41||Ee===47||Ee===60||Ee===62||Ee===91||Ee===93||Ee===123||Ee===125||Ee>126?"#"+("0"+Ee.toString(16)).slice(-2):n[Te]}return e}function C(n){if(_typeof(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,Te,Ee){if(Ee=Ee||!1,typeof t!="string"||typeof Te!="function"||typeof Ee!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Re=Math.random().toString(35);return e[t][Re]=[Te,!!Ee],Re},this.unsubscribe=function(t){for(var Te in e)if(e[Te][t])return delete e[Te][t],Object.keys(e[Te]).length===0&&delete e[Te],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var Te=Array.prototype.slice.call(arguments,1),Ee=[];for(var Re in e[t]){var Ce=e[t][Re];try{Ce[0].apply(n,Te)}catch(De){i.console&&o.error("jsPDF PubSub Error",De.message,De)}Ce[1]&&Ee.push(Re)}Ee.length&&Ee.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function O(n){if(!(this instanceof O))return new O(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function B(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function M(n,e,t,Te,Ee){if(!(this instanceof M))return new M(n,e,t,Te,Ee);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,B.call(this,Te,Ee)}function q(n,e,t,Te,Ee){if(!(this instanceof q))return new q(n,e,t,Te,Ee);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,B.call(this,Te,Ee)}function E(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",Te=arguments[1],Ee=arguments[2],Re=arguments[3],Ce=[],De=1,$e=16,Ve="S",Be=null;_typeof(n=n||{})==="object"&&(t=n.orientation,Te=n.unit||Te,Ee=n.format||Ee,Re=n.compress||n.compressPdf||Re,(Be=n.encryption||null)!==null&&(Be.userPassword=Be.userPassword||"",Be.ownerPassword=Be.ownerPassword||"",Be.userPermissions=Be.userPermissions||[]),De=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&($e=n.floatPrecision),Ve=n.defaultPathOperation||"S"),Ce=n.filters||(Re===!0?["FlateEncode"]:Ce),Te=Te||"mm",t=(""+(t||"P")).toLowerCase();var Me=n.putOnlyUsedFonts||!1,Oe={},Ue={internal:{},__private__:{}};Ue.__private__.PubSub=C;var ze="1.3",He=Ue.__private__.getPdfVersion=function(){return ze};Ue.__private__.setPdfVersion=function(xn){ze=xn};var Ge={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Ue.__private__.getPageFormats=function(){return Ge};var Ke=Ue.__private__.getPageFormat=function(xn){return Ge[xn]};Ee=Ee||"a4";var Xe="compat",Je="advanced",un=Xe;function fn(){this.saveGraphicsState(),rr(new Ci(si,0,0,-si,0,Xs()*si).toString()+" cm"),this.setFontSize(this.getFontSize()/si),Ve="n",un=Je}function yn(){this.restoreGraphicsState(),Ve="S",un=Xe}var gn=Ue.__private__.combineFontStyleAndFontWeight=function(xn,Vn){if(xn=="bold"&&Vn=="normal"||xn=="bold"&&Vn==400||xn=="normal"&&Vn=="italic"||xn=="bold"&&Vn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Vn&&(xn=Vn==400||Vn==="normal"?xn==="italic"?"italic":"normal":Vn!=700&&Vn!=="bold"||xn!=="normal"?(Vn==700?"bold":Vn)+""+xn:"bold"),xn};Ue.advancedAPI=function(xn){var Vn=un===Xe;return Vn&&fn.call(this),typeof xn!="function"||(xn(this),Vn&&yn.call(this)),this},Ue.compatAPI=function(xn){var Vn=un===Je;return Vn&&yn.call(this),typeof xn!="function"||(xn(this),Vn&&fn.call(this)),this},Ue.isAdvancedAPI=function(){return un===Je};var mn,dn=function(xn){if(un!==Je)throw new Error(xn+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},vn=Ue.roundToPrecision=Ue.__private__.roundToPrecision=function(xn,Vn){var tr=e||Vn;if(isNaN(xn)||isNaN(tr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return xn.toFixed(tr).replace(/0+$/,"")};mn=Ue.hpf=Ue.__private__.hpf=typeof $e=="number"?function(xn){if(isNaN(xn))throw new Error("Invalid argument passed to jsPDF.hpf");return vn(xn,$e)}:$e==="smart"?function(xn){if(isNaN(xn))throw new Error("Invalid argument passed to jsPDF.hpf");return vn(xn,xn>-1&&xn<1?16:5)}:function(xn){if(isNaN(xn))throw new Error("Invalid argument passed to jsPDF.hpf");return vn(xn,16)};var bn=Ue.f2=Ue.__private__.f2=function(xn){if(isNaN(xn))throw new Error("Invalid argument passed to jsPDF.f2");return vn(xn,2)},Tn=Ue.__private__.f3=function(xn){if(isNaN(xn))throw new Error("Invalid argument passed to jsPDF.f3");return vn(xn,3)},En=Ue.scale=Ue.__private__.scale=function(xn){if(isNaN(xn))throw new Error("Invalid argument passed to jsPDF.scale");return un===Xe?xn*si:un===Je?xn:void 0},In=function(xn){return En(function(Vn){return un===Xe?Xs()-Vn:un===Je?Vn:void 0}(xn))};Ue.__private__.setPrecision=Ue.setPrecision=function(xn){typeof parseInt(xn,10)=="number"&&(e=parseInt(xn,10))};var Nn,On="00000000000000000000000000000000",Fn=Ue.__private__.getFileId=function(){return On},$n=Ue.__private__.setFileId=function(xn){return On=xn!==void 0&&/^[a-fA-F0-9]{32}$/.test(xn)?xn.toUpperCase():On.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Be!==null&&(As=new I(Be.userPermissions,Be.userPassword,Be.ownerPassword,On)),On};Ue.setFileId=function(xn){return $n(xn),this},Ue.getFileId=function(){return Fn()};var Hn=Ue.__private__.convertDateToPDFDate=function(xn){var Vn=xn.getTimezoneOffset(),tr=Vn<0?"+":"-",ur=Math.floor(Math.abs(Vn/60)),br=Math.abs(Vn%60),Br=[tr,Yn(ur),"'",Yn(br),"'"].join("");return["D:",xn.getFullYear(),Yn(xn.getMonth()+1),Yn(xn.getDate()),Yn(xn.getHours()),Yn(xn.getMinutes()),Yn(xn.getSeconds()),Br].join("")},Dn=Ue.__private__.convertPDFDateToDate=function(xn){var Vn=parseInt(xn.substr(2,4),10),tr=parseInt(xn.substr(6,2),10)-1,ur=parseInt(xn.substr(8,2),10),br=parseInt(xn.substr(10,2),10),Br=parseInt(xn.substr(12,2),10),Hr=parseInt(xn.substr(14,2),10);return new Date(Vn,tr,ur,br,Br,Hr,0)},Un=Ue.__private__.setCreationDate=function(xn){var Vn;if(xn===void 0&&(xn=new Date),xn instanceof Date)Vn=Hn(xn);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(xn))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Vn=xn}return Nn=Vn},Cn=Ue.__private__.getCreationDate=function(xn){var Vn=Nn;return xn==="jsDate"&&(Vn=Dn(Nn)),Vn};Ue.setCreationDate=function(xn){return Un(xn),this},Ue.getCreationDate=function(xn){return Cn(xn)};var kn,Yn=Ue.__private__.padd2=function(xn){return("0"+parseInt(xn)).slice(-2)},Jn=Ue.__private__.padd2Hex=function(xn){return("00"+(xn=xn.toString())).substr(xn.length)},sr=0,lr=[],mr=[],gr=0,Er=[],$r=[],Yr=!1,Gr=mr;Ue.__private__.setCustomOutputDestination=function(xn){Yr=!0,Gr=xn};var Tr=function(xn){Yr||(Gr=xn)};Ue.__private__.resetCustomOutputDestination=function(){Yr=!1,Gr=mr};var rr=Ue.__private__.out=function(xn){return xn=xn.toString(),gr+=xn.length+1,Gr.push(xn),Gr},Ni=Ue.__private__.write=function(xn){return rr(arguments.length===1?xn.toString():Array.prototype.join.call(arguments," "))},Ai=Ue.__private__.getArrayBuffer=function(xn){for(var Vn=xn.length,tr=new ArrayBuffer(Vn),ur=new Uint8Array(tr);Vn--;)ur[Vn]=xn.charCodeAt(Vn);return tr},bi=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Ue.__private__.getStandardFonts=function(){return bi};var Wr=n.fontSize||16;Ue.__private__.setFontSize=Ue.setFontSize=function(xn){return Wr=un===Je?xn/si:xn,this};var hi,ei=Ue.__private__.getFontSize=Ue.getFontSize=function(){return un===Xe?Wr:Wr*si},gi=n.R2L||!1;Ue.__private__.setR2L=Ue.setR2L=function(xn){return gi=xn,this},Ue.__private__.getR2L=Ue.getR2L=function(){return gi};var mi,Hi=Ue.__private__.setZoomMode=function(xn){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(xn))hi=xn;else if(isNaN(xn)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(xn)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+xn+'" is not recognized.');hi=xn}else hi=parseInt(xn,10)};Ue.__private__.getZoomMode=function(){return hi};var oi,yr=Ue.__private__.setPageMode=function(xn){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(xn)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+xn+'" is not recognized.');mi=xn};Ue.__private__.getPageMode=function(){return mi};var Fr=Ue.__private__.setLayoutMode=function(xn){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(xn)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+xn+'" is not recognized.');oi=xn};Ue.__private__.getLayoutMode=function(){return oi},Ue.__private__.setDisplayMode=Ue.setDisplayMode=function(xn,Vn,tr){return Hi(xn),Fr(Vn),yr(tr),this};var Qr={title:"",subject:"",author:"",keywords:"",creator:""};Ue.__private__.getDocumentProperty=function(xn){if(Object.keys(Qr).indexOf(xn)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qr[xn]},Ue.__private__.getDocumentProperties=function(){return Qr},Ue.__private__.setDocumentProperties=Ue.setProperties=Ue.setDocumentProperties=function(xn){for(var Vn in Qr)Qr.hasOwnProperty(Vn)&&xn[Vn]&&(Qr[Vn]=xn[Vn]);return this},Ue.__private__.setDocumentProperty=function(xn,Vn){if(Object.keys(Qr).indexOf(xn)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qr[xn]=Vn};var Kr,si,fi,Li,$i,zr={},Ii={},Ui=[],wi={},Ri={},ci={},ws={},hs=null,rs=0,ri=[],ai=new C(Ue),Fi=n.hotfixes||[],Ms={},To={},Zs=[],Ci=function xn(Vn,tr,ur,br,Br,Hr){if(!(this instanceof xn))return new xn(Vn,tr,ur,br,Br,Hr);isNaN(Vn)&&(Vn=1),isNaN(tr)&&(tr=0),isNaN(ur)&&(ur=0),isNaN(br)&&(br=1),isNaN(Br)&&(Br=0),isNaN(Hr)&&(Hr=0),this._matrix=[Vn,tr,ur,br,Br,Hr]};Object.defineProperty(Ci.prototype,"sx",{get:function(){return this._matrix[0]},set:function(xn){this._matrix[0]=xn}}),Object.defineProperty(Ci.prototype,"shy",{get:function(){return this._matrix[1]},set:function(xn){this._matrix[1]=xn}}),Object.defineProperty(Ci.prototype,"shx",{get:function(){return this._matrix[2]},set:function(xn){this._matrix[2]=xn}}),Object.defineProperty(Ci.prototype,"sy",{get:function(){return this._matrix[3]},set:function(xn){this._matrix[3]=xn}}),Object.defineProperty(Ci.prototype,"tx",{get:function(){return this._matrix[4]},set:function(xn){this._matrix[4]=xn}}),Object.defineProperty(Ci.prototype,"ty",{get:function(){return this._matrix[5]},set:function(xn){this._matrix[5]=xn}}),Object.defineProperty(Ci.prototype,"a",{get:function(){return this._matrix[0]},set:function(xn){this._matrix[0]=xn}}),Object.defineProperty(Ci.prototype,"b",{get:function(){return this._matrix[1]},set:function(xn){this._matrix[1]=xn}}),Object.defineProperty(Ci.prototype,"c",{get:function(){return this._matrix[2]},set:function(xn){this._matrix[2]=xn}}),Object.defineProperty(Ci.prototype,"d",{get:function(){return this._matrix[3]},set:function(xn){this._matrix[3]=xn}}),Object.defineProperty(Ci.prototype,"e",{get:function(){return this._matrix[4]},set:function(xn){this._matrix[4]=xn}}),Object.defineProperty(Ci.prototype,"f",{get:function(){return this._matrix[5]},set:function(xn){this._matrix[5]=xn}}),Object.defineProperty(Ci.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ci.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ci.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ci.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ci.prototype.join=function(xn){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(mn).join(xn)},Ci.prototype.multiply=function(xn){var Vn=xn.sx*this.sx+xn.shy*this.shx,tr=xn.sx*this.shy+xn.shy*this.sy,ur=xn.shx*this.sx+xn.sy*this.shx,br=xn.shx*this.shy+xn.sy*this.sy,Br=xn.tx*this.sx+xn.ty*this.shx+this.tx,Hr=xn.tx*this.shy+xn.ty*this.sy+this.ty;return new Ci(Vn,tr,ur,br,Br,Hr)},Ci.prototype.decompose=function(){var xn=this.sx,Vn=this.shy,tr=this.shx,ur=this.sy,br=this.tx,Br=this.ty,Hr=Math.sqrt(xn*xn+Vn*Vn),_i=(xn/=Hr)*tr+(Vn/=Hr)*ur;tr-=xn*_i,ur-=Vn*_i;var xi=Math.sqrt(tr*tr+ur*ur);return _i/=xi,xn*(ur/=xi)<Vn*(tr/=xi)&&(xn=-xn,Vn=-Vn,_i=-_i,Hr=-Hr),{scale:new Ci(Hr,0,0,xi,0,0),translate:new Ci(1,0,0,1,br,Br),rotate:new Ci(xn,Vn,-Vn,xn,0,0),skew:new Ci(1,0,_i,1,0,0)}},Ci.prototype.toString=function(xn){return this.join(" ")},Ci.prototype.inversed=function(){var xn=this.sx,Vn=this.shy,tr=this.shx,ur=this.sy,br=this.tx,Br=this.ty,Hr=1/(xn*ur-Vn*tr),_i=ur*Hr,xi=-Vn*Hr,Bi=-tr*Hr,Ji=xn*Hr;return new Ci(_i,xi,Bi,Ji,-_i*br-Bi*Br,-xi*br-Ji*Br)},Ci.prototype.applyToPoint=function(xn){var Vn=xn.x*this.sx+xn.y*this.shx+this.tx,tr=xn.x*this.shy+xn.y*this.sy+this.ty;return new fs(Vn,tr)},Ci.prototype.applyToRectangle=function(xn){var Vn=this.applyToPoint(xn),tr=this.applyToPoint(new fs(xn.x+xn.w,xn.y+xn.h));return new Ao(Vn.x,Vn.y,tr.x-Vn.x,tr.y-Vn.y)},Ci.prototype.clone=function(){var xn=this.sx,Vn=this.shy,tr=this.shx,ur=this.sy,br=this.tx,Br=this.ty;return new Ci(xn,Vn,tr,ur,br,Br)},Ue.Matrix=Ci;var gs=Ue.matrixMult=function(xn,Vn){return Vn.multiply(xn)},Mo=new Ci(1,0,0,1,0,0);Ue.unitMatrix=Ue.identityMatrix=Mo;var Ls=function(xn,Vn){if(!Ri[xn]){var tr=(Vn instanceof M?"Sh":"P")+(Object.keys(wi).length+1).toString(10);Vn.id=tr,Ri[xn]=tr,wi[tr]=Vn,ai.publish("addPattern",Vn)}};Ue.ShadingPattern=M,Ue.TilingPattern=q,Ue.addShadingPattern=function(xn,Vn){return dn("addShadingPattern()"),Ls(xn,Vn),this},Ue.beginTilingPattern=function(xn){dn("beginTilingPattern()"),Rr(xn.boundingBox[0],xn.boundingBox[1],xn.boundingBox[2]-xn.boundingBox[0],xn.boundingBox[3]-xn.boundingBox[1],xn.matrix)},Ue.endTilingPattern=function(xn,Vn){dn("endTilingPattern()"),Vn.stream=$r[kn].join(`
`),Ls(xn,Vn),ai.publish("endTilingPattern",Vn),Zs.pop().restore()};var eo,xs=Ue.__private__.newObject=function(){var xn=Os();return Ts(xn,!0),xn},Os=Ue.__private__.newObjectDeferred=function(){return sr++,lr[sr]=function(){return gr},sr},Ts=function(xn,Vn){return Vn=typeof Vn=="boolean"&&Vn,lr[xn]=gr,Vn&&rr(xn+" 0 obj"),xn},ra=Ue.__private__.newAdditionalObject=function(){var xn={objId:Os(),content:""};return Er.push(xn),xn},ua=Os(),po=Os(),Gn=Ue.__private__.decodeColorString=function(xn){var Vn=xn.split(" ");if(Vn.length!==2||Vn[1]!=="g"&&Vn[1]!=="G")Vn.length!==5||Vn[4]!=="k"&&Vn[4]!=="K"||(Vn=[(1-Vn[0])*(1-Vn[3]),(1-Vn[1])*(1-Vn[3]),(1-Vn[2])*(1-Vn[3]),"r"]);else{var tr=parseFloat(Vn[0]);Vn=[tr,tr,tr,"r"]}for(var ur="#",br=0;br<3;br++)ur+=("0"+Math.floor(255*parseFloat(Vn[br])).toString(16)).slice(-2);return ur},ir=Ue.__private__.encodeColorString=function(xn){var Vn;typeof xn=="string"&&(xn={ch1:xn});var tr=xn.ch1,ur=xn.ch2,br=xn.ch3,Br=xn.ch4,Hr=xn.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof tr=="string"&&tr.charAt(0)!=="#"){var _i=new h(tr);if(_i.ok)tr=_i.toHex();else if(!/^\d*\.?\d*$/.test(tr))throw new Error('Invalid color "'+tr+'" passed to jsPDF.encodeColorString.')}if(typeof tr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(tr)&&(tr="#"+tr[1]+tr[1]+tr[2]+tr[2]+tr[3]+tr[3]),typeof tr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(tr)){var xi=parseInt(tr.substr(1),16);tr=xi>>16&255,ur=xi>>8&255,br=255&xi}if(ur===void 0||Br===void 0&&tr===ur&&ur===br)Vn=typeof tr=="string"?tr+" "+Hr[0]:xn.precision===2?bn(tr/255)+" "+Hr[0]:Tn(tr/255)+" "+Hr[0];else if(Br===void 0||_typeof(Br)==="object"){if(Br&&!isNaN(Br.a)&&Br.a===0)return["1.","1.","1.",Hr[1]].join(" ");Vn=typeof tr=="string"?[tr,ur,br,Hr[1]].join(" "):xn.precision===2?[bn(tr/255),bn(ur/255),bn(br/255),Hr[1]].join(" "):[Tn(tr/255),Tn(ur/255),Tn(br/255),Hr[1]].join(" ")}else Vn=typeof tr=="string"?[tr,ur,br,Br,Hr[2]].join(" "):xn.precision===2?[bn(tr),bn(ur),bn(br),bn(Br),Hr[2]].join(" "):[Tn(tr),Tn(ur),Tn(br),Tn(Br),Hr[2]].join(" ");return Vn},cr=Ue.__private__.getFilters=function(){return Ce},_r=Ue.__private__.putStream=function(xn){var Vn=(xn=xn||{}).data||"",tr=xn.filters||cr(),ur=xn.alreadyAppliedFilters||[],br=xn.addLength1||!1,Br=Vn.length,Hr=xn.objectId,_i=function(yo){return yo};if(Be!==null&&Hr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Be!==null&&(_i=As.encryptor(Hr,0));var xi={};tr===!0&&(tr=["FlateEncode"]);var Bi=xn.additionalKeyValues||[],Ji=(xi=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Vn,tr):{data:Vn,reverseChain:[]}).reverseChain+(Array.isArray(ur)?ur.join(" "):ur.toString());if(xi.data.length!==0&&(Bi.push({key:"Length",value:xi.data.length}),br===!0&&Bi.push({key:"Length1",value:Br})),Ji.length!=0)if(Ji.split("/").length-1==1)Bi.push({key:"Filter",value:Ji});else{Bi.push({key:"Filter",value:"["+Ji+"]"});for(var bs=0;bs<Bi.length;bs+=1)if(Bi[bs].key==="DecodeParms"){for(var Ws=[],Qs=0;Qs<xi.reverseChain.split("/").length-1;Qs+=1)Ws.push("null");Ws.push(Bi[bs].value),Bi[bs].value="["+Ws.join(" ")+"]"}}rr("<<");for(var Es=0;Es<Bi.length;Es++)rr("/"+Bi[Es].key+" "+Bi[Es].value);rr(">>"),xi.data.length!==0&&(rr("stream"),rr(_i(xi.data)),rr("endstream"))},Ir=Ue.__private__.putPage=function(xn){var Vn=xn.number,tr=xn.data,ur=xn.objId,br=xn.contentsObjId;Ts(ur,!0),rr("<</Type /Page"),rr("/Parent "+xn.rootDictionaryObjId+" 0 R"),rr("/Resources "+xn.resourceDictionaryObjId+" 0 R"),rr("/MediaBox ["+parseFloat(mn(xn.mediaBox.bottomLeftX))+" "+parseFloat(mn(xn.mediaBox.bottomLeftY))+" "+mn(xn.mediaBox.topRightX)+" "+mn(xn.mediaBox.topRightY)+"]"),xn.cropBox!==null&&rr("/CropBox ["+mn(xn.cropBox.bottomLeftX)+" "+mn(xn.cropBox.bottomLeftY)+" "+mn(xn.cropBox.topRightX)+" "+mn(xn.cropBox.topRightY)+"]"),xn.bleedBox!==null&&rr("/BleedBox ["+mn(xn.bleedBox.bottomLeftX)+" "+mn(xn.bleedBox.bottomLeftY)+" "+mn(xn.bleedBox.topRightX)+" "+mn(xn.bleedBox.topRightY)+"]"),xn.trimBox!==null&&rr("/TrimBox ["+mn(xn.trimBox.bottomLeftX)+" "+mn(xn.trimBox.bottomLeftY)+" "+mn(xn.trimBox.topRightX)+" "+mn(xn.trimBox.topRightY)+"]"),xn.artBox!==null&&rr("/ArtBox ["+mn(xn.artBox.bottomLeftX)+" "+mn(xn.artBox.bottomLeftY)+" "+mn(xn.artBox.topRightX)+" "+mn(xn.artBox.topRightY)+"]"),typeof xn.userUnit=="number"&&xn.userUnit!==1&&rr("/UserUnit "+xn.userUnit),ai.publish("putPage",{objId:ur,pageContext:ri[Vn],pageNumber:Vn,page:tr}),rr("/Contents "+br+" 0 R"),rr(">>"),rr("endobj");var Br=tr.join(`
`);return un===Je&&(Br+=`
Q`),Ts(br,!0),_r({data:Br,filters:cr(),objectId:br}),rr("endobj"),ur},Or=Ue.__private__.putPages=function(){var xn,Vn,tr=[];for(xn=1;xn<=rs;xn++)ri[xn].objId=Os(),ri[xn].contentsObjId=Os();for(xn=1;xn<=rs;xn++)tr.push(Ir({number:xn,data:$r[xn],objId:ri[xn].objId,contentsObjId:ri[xn].contentsObjId,mediaBox:ri[xn].mediaBox,cropBox:ri[xn].cropBox,bleedBox:ri[xn].bleedBox,trimBox:ri[xn].trimBox,artBox:ri[xn].artBox,userUnit:ri[xn].userUnit,rootDictionaryObjId:ua,resourceDictionaryObjId:po}));Ts(ua,!0),rr("<</Type /Pages");var ur="/Kids [";for(Vn=0;Vn<rs;Vn++)ur+=tr[Vn]+" 0 R ";rr(ur+"]"),rr("/Count "+rs),rr(">>"),rr("endobj"),ai.publish("postPutPages")},Zr=function(xn){ai.publish("putFont",{font:xn,out:rr,newObject:xs,putStream:_r}),xn.isAlreadyPutted!==!0&&(xn.objectNumber=xs(),rr("<<"),rr("/Type /Font"),rr("/BaseFont /"+j(xn.postScriptName)),rr("/Subtype /Type1"),typeof xn.encoding=="string"&&rr("/Encoding /"+xn.encoding),rr("/FirstChar 32"),rr("/LastChar 255"),rr(">>"),rr("endobj"))},yi=function(xn){xn.objectNumber=xs();var Vn=[];Vn.push({key:"Type",value:"/XObject"}),Vn.push({key:"Subtype",value:"/Form"}),Vn.push({key:"BBox",value:"["+[mn(xn.x),mn(xn.y),mn(xn.x+xn.width),mn(xn.y+xn.height)].join(" ")+"]"}),Vn.push({key:"Matrix",value:"["+xn.matrix.toString()+"]"});var tr=xn.pages[1].join(`
`);_r({data:tr,additionalKeyValues:Vn,objectId:xn.objectNumber}),rr("endobj")},pi=function(xn,Vn){Vn||(Vn=21);var tr=xs(),ur=function(Hr,_i){var xi,Bi=[],Ji=1/(_i-1);for(xi=0;xi<1;xi+=Ji)Bi.push(xi);if(Bi.push(1),Hr[0].offset!=0){var bs={offset:0,color:Hr[0].color};Hr.unshift(bs)}if(Hr[Hr.length-1].offset!=1){var Ws={offset:1,color:Hr[Hr.length-1].color};Hr.push(Ws)}for(var Qs="",Es=0,yo=0;yo<Bi.length;yo++){for(xi=Bi[yo];xi>Hr[Es+1].offset;)Es++;var Ds=Hr[Es].offset,jo=(xi-Ds)/(Hr[Es+1].offset-Ds),nl=Hr[Es].color,cl=Hr[Es+1].color;Qs+=Jn(Math.round((1-jo)*nl[0]+jo*cl[0]).toString(16))+Jn(Math.round((1-jo)*nl[1]+jo*cl[1]).toString(16))+Jn(Math.round((1-jo)*nl[2]+jo*cl[2]).toString(16))}return Qs.trim()}(xn.colors,Vn),br=[];br.push({key:"FunctionType",value:"0"}),br.push({key:"Domain",value:"[0.0 1.0]"}),br.push({key:"Size",value:"["+Vn+"]"}),br.push({key:"BitsPerSample",value:"8"}),br.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),br.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_r({data:ur,additionalKeyValues:br,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:tr}),rr("endobj"),xn.objectNumber=xs(),rr("<< /ShadingType "+xn.type),rr("/ColorSpace /DeviceRGB");var Br="/Coords ["+mn(parseFloat(xn.coords[0]))+" "+mn(parseFloat(xn.coords[1]))+" ";xn.type===2?Br+=mn(parseFloat(xn.coords[2]))+" "+mn(parseFloat(xn.coords[3])):Br+=mn(parseFloat(xn.coords[2]))+" "+mn(parseFloat(xn.coords[3]))+" "+mn(parseFloat(xn.coords[4]))+" "+mn(parseFloat(xn.coords[5])),rr(Br+="]"),xn.matrix&&rr("/Matrix ["+xn.matrix.toString()+"]"),rr("/Function "+tr+" 0 R"),rr("/Extend [true true]"),rr(">>"),rr("endobj")},zi=function(xn,Vn){var tr=Os(),ur=xs();Vn.push({resourcesOid:tr,objectOid:ur}),xn.objectNumber=ur;var br=[];br.push({key:"Type",value:"/Pattern"}),br.push({key:"PatternType",value:"1"}),br.push({key:"PaintType",value:"1"}),br.push({key:"TilingType",value:"1"}),br.push({key:"BBox",value:"["+xn.boundingBox.map(mn).join(" ")+"]"}),br.push({key:"XStep",value:mn(xn.xStep)}),br.push({key:"YStep",value:mn(xn.yStep)}),br.push({key:"Resources",value:tr+" 0 R"}),xn.matrix&&br.push({key:"Matrix",value:"["+xn.matrix.toString()+"]"}),_r({data:xn.stream,additionalKeyValues:br,objectId:xn.objectNumber}),rr("endobj")},_s=function(xn){for(var Vn in xn.objectNumber=xs(),rr("<<"),xn)switch(Vn){case"opacity":rr("/ca "+bn(xn[Vn]));break;case"stroke-opacity":rr("/CA "+bn(xn[Vn]))}rr(">>"),rr("endobj")},Gi=function(xn){Ts(xn.resourcesOid,!0),rr("<<"),rr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Vn in rr("/Font <<"),zr)zr.hasOwnProperty(Vn)&&(Me===!1||Me===!0&&Oe.hasOwnProperty(Vn))&&rr("/"+Vn+" "+zr[Vn].objectNumber+" 0 R");rr(">>")}(),function(){if(Object.keys(wi).length>0){for(var Vn in rr("/Shading <<"),wi)wi.hasOwnProperty(Vn)&&wi[Vn]instanceof M&&wi[Vn].objectNumber>=0&&rr("/"+Vn+" "+wi[Vn].objectNumber+" 0 R");ai.publish("putShadingPatternDict"),rr(">>")}}(),function(Vn){if(Object.keys(wi).length>0){for(var tr in rr("/Pattern <<"),wi)wi.hasOwnProperty(tr)&&wi[tr]instanceof Ue.TilingPattern&&wi[tr].objectNumber>=0&&wi[tr].objectNumber<Vn&&rr("/"+tr+" "+wi[tr].objectNumber+" 0 R");ai.publish("putTilingPatternDict"),rr(">>")}}(xn.objectOid),function(){if(Object.keys(ci).length>0){var Vn;for(Vn in rr("/ExtGState <<"),ci)ci.hasOwnProperty(Vn)&&ci[Vn].objectNumber>=0&&rr("/"+Vn+" "+ci[Vn].objectNumber+" 0 R");ai.publish("putGStateDict"),rr(">>")}}(),function(){for(var Vn in rr("/XObject <<"),Ms)Ms.hasOwnProperty(Vn)&&Ms[Vn].objectNumber>=0&&rr("/"+Vn+" "+Ms[Vn].objectNumber+" 0 R");ai.publish("putXobjectDict"),rr(">>")}(),rr(">>"),rr("endobj")},js=function(xn){Ii[xn.fontName]=Ii[xn.fontName]||{},Ii[xn.fontName][xn.fontStyle]=xn.id},Nr=function(xn,Vn,tr,ur,br){var Br={id:"F"+(Object.keys(zr).length+1).toString(10),postScriptName:xn,fontName:Vn,fontStyle:tr,encoding:ur,isStandardFont:br||!1,metadata:{}};return ai.publish("addFont",{font:Br,instance:this}),zr[Br.id]=Br,js(Br),Br.id},Vi=Ue.__private__.pdfEscape=Ue.pdfEscape=function(xn,Vn){return function(tr,ur){var br,Br,Hr,_i,xi,Bi,Ji,bs,Ws;if(Hr=(ur=ur||{}).sourceEncoding||"Unicode",xi=ur.outputEncoding,(ur.autoencode||xi)&&zr[Kr].metadata&&zr[Kr].metadata[Hr]&&zr[Kr].metadata[Hr].encoding&&(_i=zr[Kr].metadata[Hr].encoding,!xi&&zr[Kr].encoding&&(xi=zr[Kr].encoding),!xi&&_i.codePages&&(xi=_i.codePages[0]),typeof xi=="string"&&(xi=_i[xi]),xi)){for(Ji=!1,Bi=[],br=0,Br=tr.length;br<Br;br++)(bs=xi[tr.charCodeAt(br)])?Bi.push(String.fromCharCode(bs)):Bi.push(tr[br]),Bi[br].charCodeAt(0)>>8&&(Ji=!0);tr=Bi.join("")}for(br=tr.length;Ji===void 0&&br!==0;)tr.charCodeAt(br-1)>>8&&(Ji=!0),br--;if(!Ji)return tr;for(Bi=ur.noBOM?[]:[254,255],br=0,Br=tr.length;br<Br;br++){if((Ws=(bs=tr.charCodeAt(br))>>8)>>8)throw new Error("Character at position "+br+" of string '"+tr+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Bi.push(Ws),Bi.push(bs-(Ws<<8))}return String.fromCharCode.apply(void 0,Bi)}(xn,Vn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},is=Ue.__private__.beginPage=function(xn){$r[++rs]=[],ri[rs]={objId:0,contentsObjId:0,userUnit:Number(De),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(xn[0]),topRightY:Number(xn[1])}},Ca(rs),Tr($r[kn])},Eo=function(xn,Vn){var tr,ur,br;switch(t=Vn||t,typeof xn=="string"&&(tr=Ke(xn.toLowerCase()),Array.isArray(tr)&&(ur=tr[0],br=tr[1])),Array.isArray(xn)&&(ur=xn[0]*si,br=xn[1]*si),isNaN(ur)&&(ur=Ee[0],br=Ee[1]),(ur>14400||br>14400)&&(o.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ur=Math.min(14400,ur),br=Math.min(14400,br)),Ee=[ur,br],t.substr(0,1)){case"l":br>ur&&(Ee=[br,ur]);break;case"p":ur>br&&(Ee=[br,ur])}is(Ee),ia(Jo),rr(qn),ui!==0&&rr(ui+" J"),ts!==0&&rr(ts+" j"),ai.publish("addPage",{pageNumber:rs})},Xo=function(xn){xn>0&&xn<=rs&&($r.splice(xn,1),ri.splice(xn,1),rs--,kn>rs&&(kn=rs),this.setPage(kn))},Ca=function(xn){xn>0&&xn<=rs&&(kn=xn)},Lo=Ue.__private__.getNumberOfPages=Ue.getNumberOfPages=function(){return $r.length-1},vl=function(xn,Vn,tr){var ur,br=void 0;return tr=tr||{},xn=xn!==void 0?xn:zr[Kr].fontName,Vn=Vn!==void 0?Vn:zr[Kr].fontStyle,ur=xn.toLowerCase(),Ii[ur]!==void 0&&Ii[ur][Vn]!==void 0?br=Ii[ur][Vn]:Ii[xn]!==void 0&&Ii[xn][Vn]!==void 0?br=Ii[xn][Vn]:tr.disableWarning===!1&&o.warn("Unable to look up font label for font '"+xn+"', '"+Vn+"'. Refer to getFontList() for available fonts."),br||tr.noFallback||(br=Ii.times[Vn])==null&&(br=Ii.times.normal),br},ys=Ue.__private__.putInfo=function(){var xn=xs(),Vn=function(ur){return ur};for(var tr in Be!==null&&(Vn=As.encryptor(xn,0)),rr("<<"),rr("/Producer ("+Vi(Vn("jsPDF "+E.version))+")"),Qr)Qr.hasOwnProperty(tr)&&Qr[tr]&&rr("/"+tr.substr(0,1).toUpperCase()+tr.substr(1)+" ("+Vi(Vn(Qr[tr]))+")");rr("/CreationDate ("+Vi(Vn(Nn))+")"),rr(">>"),rr("endobj")},Ja=Ue.__private__.putCatalog=function(xn){var Vn=(xn=xn||{}).rootDictionaryObjId||ua;switch(xs(),rr("<<"),rr("/Type /Catalog"),rr("/Pages "+Vn+" 0 R"),hi||(hi="fullwidth"),hi){case"fullwidth":rr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":rr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":rr("/OpenAction [3 0 R /Fit]");break;case"original":rr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var tr=""+hi;tr.substr(tr.length-1)==="%"&&(hi=parseInt(hi)/100),typeof hi=="number"&&rr("/OpenAction [3 0 R /XYZ null null "+bn(hi)+"]")}switch(oi||(oi="continuous"),oi){case"continuous":rr("/PageLayout /OneColumn");break;case"single":rr("/PageLayout /SinglePage");break;case"two":case"twoleft":rr("/PageLayout /TwoColumnLeft");break;case"tworight":rr("/PageLayout /TwoColumnRight")}mi&&rr("/PageMode /"+mi),ai.publish("putCatalog"),rr(">>"),rr("endobj")},qs=Ue.__private__.putTrailer=function(){rr("trailer"),rr("<<"),rr("/Size "+(sr+1)),rr("/Root "+sr+" 0 R"),rr("/Info "+(sr-1)+" 0 R"),Be!==null&&rr("/Encrypt "+As.oid+" 0 R"),rr("/ID [ <"+On+"> <"+On+"> ]"),rr(">>")},wl=Ue.__private__.putHeader=function(){rr("%PDF-"+ze),rr("%")},Za=Ue.__private__.putXRef=function(){var xn="0000000000";rr("xref"),rr("0 "+(sr+1)),rr("0000000000 65535 f ");for(var Vn=1;Vn<=sr;Vn++)typeof lr[Vn]=="function"?rr((xn+lr[Vn]()).slice(-10)+" 00000 n "):lr[Vn]!==void 0?rr((xn+lr[Vn]).slice(-10)+" 00000 n "):rr("0000000000 00000 n ")},ca=Ue.__private__.buildDocument=function(){var xn;sr=0,gr=0,mr=[],lr=[],Er=[],ua=Os(),po=Os(),Tr(mr),ai.publish("buildDocument"),wl(),Or(),function(){ai.publish("putAdditionalObjects");for(var tr=0;tr<Er.length;tr++){var ur=Er[tr];Ts(ur.objId,!0),rr(ur.content),rr("endobj")}ai.publish("postPutAdditionalObjects")}(),xn=[],function(){for(var tr in zr)zr.hasOwnProperty(tr)&&(Me===!1||Me===!0&&Oe.hasOwnProperty(tr))&&Zr(zr[tr])}(),function(){var tr;for(tr in ci)ci.hasOwnProperty(tr)&&_s(ci[tr])}(),function(){for(var tr in Ms)Ms.hasOwnProperty(tr)&&yi(Ms[tr])}(),function(tr){var ur;for(ur in wi)wi.hasOwnProperty(ur)&&(wi[ur]instanceof M?pi(wi[ur]):wi[ur]instanceof q&&zi(wi[ur],tr))}(xn),ai.publish("putResources"),xn.forEach(Gi),Gi({resourcesOid:po,objectOid:Number.MAX_SAFE_INTEGER}),ai.publish("postPutResources"),Be!==null&&(As.oid=xs(),rr("<<"),rr("/Filter /Standard"),rr("/V "+As.v),rr("/R "+As.r),rr("/U <"+As.toHexString(As.U)+">"),rr("/O <"+As.toHexString(As.O)+">"),rr("/P "+As.P),rr(">>"),rr("endobj")),ys(),Ja();var Vn=gr;return Za(),qs(),rr("startxref"),rr(""+Vn),rr("%%EOF"),Tr($r[kn]),mr.join(`
`)},da=Ue.__private__.getBlob=function(xn){return new Blob([Ai(xn)],{type:"application/pdf"})},mo=Ue.output=Ue.__private__.output=(eo=function(xn,Vn){switch(typeof(Vn=Vn||{})=="string"?Vn={filename:Vn}:Vn.filename=Vn.filename||"generated.pdf",xn){case void 0:return ca();case"save":Ue.save(Vn.filename);break;case"arraybuffer":return Ai(ca());case"blob":return da(ca());case"bloburi":case"bloburl":if(i.URL!==void 0&&typeof i.URL.createObjectURL=="function")return i.URL&&i.URL.createObjectURL(da(ca()))||void 0;o.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var tr="",ur=ca();try{tr=d(ur)}catch{tr=d(unescape(encodeURIComponent(ur)))}return"data:application/pdf;filename="+Vn.filename+";base64,"+tr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(i)==="[object Window]"){var br="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Br=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Vn.pdfObjectUrl&&(br=Vn.pdfObjectUrl,Br="");var Hr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+br+'"'+Br+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Vn)+");<\/script></body></html>",_i=i.open();return _i!==null&&_i.document.write(Hr),_i}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(i)==="[object Window]"){var xi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Vn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Vn.filename+'" width="500px" height="400px" /></body></html>',Bi=i.open();if(Bi!==null){Bi.document.write(xi);var Ji=this;Bi.document.documentElement.querySelector("#pdfViewer").onload=function(){Bi.document.title=Vn.filename,Bi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ji.output("bloburl"))}}return Bi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(i)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var bs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Vn)+'"></iframe></body></html>',Ws=i.open();if(Ws!==null&&(Ws.document.write(bs),Ws.document.title=Vn.filename),Ws||typeof safari>"u")return Ws;break;case"datauri":case"dataurl":return i.document.location.href=this.output("datauristring",Vn);default:return null}},eo.foo=function(){try{return eo.apply(this,arguments)}catch(tr){var xn=tr.stack||"";~xn.indexOf(" at ")&&(xn=xn.split(" at ")[1]);var Vn="Error in function "+xn.split(`
`)[0].split("<")[0]+": "+tr.message;if(!i.console)throw new Error(Vn);i.console.error(Vn,tr),i.alert&&alert(Vn)}},eo.foo.bar=eo,eo.foo),Ha=function(xn){return Array.isArray(Fi)===!0&&Fi.indexOf(xn)>-1};switch(Te){case"pt":si=1;break;case"mm":si=72/25.4;break;case"cm":si=72/2.54;break;case"in":si=72;break;case"px":si=Ha("px_scaling")==1?.75:96/72;break;case"pc":case"em":si=12;break;case"ex":si=6;break;default:if(typeof Te!="number")throw new Error("Invalid unit: "+Te);si=Te}var As=null;Un(),$n();var Do=Ue.__private__.getPageInfo=Ue.getPageInfo=function(xn){if(isNaN(xn)||xn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ri[xn].objId,pageNumber:xn,pageContext:ri[xn]}},el=Ue.__private__.getPageInfoByObjId=function(xn){if(isNaN(xn)||xn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Vn in ri)if(ri[Vn].objId===xn)break;return Do(Vn)},Ga=Ue.__private__.getCurrentPageInfo=Ue.getCurrentPageInfo=function(){return{objId:ri[kn].objId,pageNumber:kn,pageContext:ri[kn]}};Ue.addPage=function(){return Eo.apply(this,arguments),this},Ue.setPage=function(){return Ca.apply(this,arguments),Tr.call(this,$r[kn]),this},Ue.insertPage=function(xn){return this.addPage(),this.movePage(kn,xn),this},Ue.movePage=function(xn,Vn){var tr,ur;if(xn>Vn){tr=$r[xn],ur=ri[xn];for(var br=xn;br>Vn;br--)$r[br]=$r[br-1],ri[br]=ri[br-1];$r[Vn]=tr,ri[Vn]=ur,this.setPage(Vn)}else if(xn<Vn){tr=$r[xn],ur=ri[xn];for(var Br=xn;Br<Vn;Br++)$r[Br]=$r[Br+1],ri[Br]=ri[Br+1];$r[Vn]=tr,ri[Vn]=ur,this.setPage(Vn)}return this},Ue.deletePage=function(){return Xo.apply(this,arguments),this},Ue.__private__.text=Ue.text=function(xn,Vn,tr,ur,br){var Br,Hr,_i,xi,Bi,Ji,bs,Ws,Qs,Es=(ur=ur||{}).scope||this;if(typeof xn=="number"&&typeof Vn=="number"&&(typeof tr=="string"||Array.isArray(tr))){var yo=tr;tr=Vn,Vn=xn,xn=yo}if(arguments[3]instanceof Ci==0?(_i=arguments[4],xi=arguments[5],_typeof(bs=arguments[3])==="object"&&bs!==null||(typeof _i=="string"&&(xi=_i,_i=null),typeof bs=="string"&&(xi=bs,bs=null),typeof bs=="number"&&(_i=bs,bs=null),ur={flags:bs,angle:_i,align:xi})):(dn("The transform parameter of text() with a Matrix value"),Qs=br),isNaN(Vn)||isNaN(tr)||xn==null)throw new Error("Invalid arguments passed to jsPDF.text");if(xn.length===0)return Es;var Ds,jo="",nl=typeof ur.lineHeightFactor=="number"?ur.lineHeightFactor:Vo,cl=Es.internal.scaleFactor;function iu(Hs){return Hs=Hs.split("	").join(Array(ur.TabLen||9).join(" ")),Vi(Hs,bs)}function Ml(Hs){for(var Gs,Po=Hs.concat(),Io=[],Ho=Po.length;Ho--;)typeof(Gs=Po.shift())=="string"?Io.push(Gs):Array.isArray(Hs)&&(Gs.length===1||Gs[1]===void 0&&Gs[2]===void 0)?Io.push(Gs[0]):Io.push([Gs[0],Gs[1],Gs[2]]);return Io}function So(Hs,Gs){var Po;if(typeof Hs=="string")Po=Gs(Hs)[0];else if(Array.isArray(Hs)){for(var Io,Ho,El=Hs.concat(),hl=[],wu=El.length;wu--;)typeof(Io=El.shift())=="string"?hl.push(Gs(Io)[0]):Array.isArray(Io)&&typeof Io[0]=="string"&&(Ho=Gs(Io[0],Io[1],Io[2]),hl.push([Ho[0],Ho[1],Ho[2]]));Po=hl}return Po}var Ma=!1,Gl=!0;if(typeof xn=="string")Ma=!0;else if(Array.isArray(xn)){var Ta=xn.concat();Hr=[];for(var Ze,Sn=Ta.length;Sn--;)(typeof(Ze=Ta.shift())!="string"||Array.isArray(Ze)&&typeof Ze[0]!="string")&&(Gl=!1);Ma=Gl}if(Ma===!1)throw new Error('Type of text must be string or Array. "'+xn+'" is not recognized.');typeof xn=="string"&&(xn=xn.match(/[\r?\n]/)?xn.split(/\r\n|\r|\n/g):[xn]);var Mn=Wr/Es.internal.scaleFactor,Xn=Mn*(nl-1);switch(ur.baseline){case"bottom":tr-=Xn;break;case"top":tr+=Mn-Xn;break;case"hanging":tr+=Mn-2*Xn;break;case"middle":tr+=Mn/2-Xn}if((Ji=ur.maxWidth||0)>0&&(typeof xn=="string"?xn=Es.splitTextToSize(xn,Ji):Object.prototype.toString.call(xn)==="[object Array]"&&(xn=xn.reduce(function(Hs,Gs){return Hs.concat(Es.splitTextToSize(Gs,Ji))},[]))),Br={text:xn,x:Vn,y:tr,options:ur,mutex:{pdfEscape:Vi,activeFontKey:Kr,fonts:zr,activeFontSize:Wr}},ai.publish("preProcessText",Br),xn=Br.text,_i=(ur=Br.options).angle,Qs instanceof Ci==0&&_i&&typeof _i=="number"){_i*=Math.PI/180,ur.rotationDirection===0&&(_i=-_i),un===Je&&(_i=-_i);var wr=Math.cos(_i),Lr=Math.sin(_i);Qs=new Ci(wr,Lr,-Lr,wr,0,0)}else _i&&_i instanceof Ci&&(Qs=_i);un!==Je||Qs||(Qs=Mo),(Bi=ur.charSpace||Cr)!==void 0&&(jo+=mn(En(Bi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ws=ur.horizontalScale)!==void 0&&(jo+=mn(100*Ws)+` Tz
`),ur.lang;var ti=-1,Ss=ur.renderingMode!==void 0?ur.renderingMode:ur.stroke,to=Es.internal.getCurrentPageInfo().pageContext;switch(Ss){case 0:case!1:case"fill":ti=0;break;case 1:case!0:case"stroke":ti=1;break;case 2:case"fillThenStroke":ti=2;break;case 3:case"invisible":ti=3;break;case 4:case"fillAndAddForClipping":ti=4;break;case 5:case"strokeAndAddPathForClipping":ti=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ti=6;break;case 7:case"addToPathForClipping":ti=7}var cs=to.usedRenderingMode!==void 0?to.usedRenderingMode:-1;ti!==-1?jo+=ti+` Tr
`:cs!==-1&&(jo+=`0 Tr
`),ti!==-1&&(to.usedRenderingMode=ti),xi=ur.align||"left";var ps,Ps=Wr*nl,fa=Es.internal.pageSize.getWidth(),sa=zr[Kr];Bi=ur.charSpace||Cr,Ji=ur.maxWidth||0,bs=Object.assign({autoencode:!0,noBOM:!0},ur.flags);var La=[],dl=function(Hs){return Es.getStringUnitWidth(Hs,{font:sa,charSpace:Bi,fontSize:Wr,doKerning:!1})*Wr/cl};if(Object.prototype.toString.call(xn)==="[object Array]"){var Ea;Hr=Ml(xn),xi!=="left"&&(ps=Hr.map(dl));var Aa,Kl=0;if(xi==="right"){Vn-=ps[0],xn=[],Sn=Hr.length;for(var Sa=0;Sa<Sn;Sa++)Sa===0?(Aa=Ys(Vn),Ea=Na(tr)):(Aa=En(Kl-ps[Sa]),Ea=-Ps),xn.push([Hr[Sa],Aa,Ea]),Kl=ps[Sa]}else if(xi==="center"){Vn-=ps[0]/2,xn=[],Sn=Hr.length;for(var Yl=0;Yl<Sn;Yl++)Yl===0?(Aa=Ys(Vn),Ea=Na(tr)):(Aa=En((Kl-ps[Yl])/2),Ea=-Ps),xn.push([Hr[Yl],Aa,Ea]),Kl=ps[Yl]}else if(xi==="left"){xn=[],Sn=Hr.length;for(var $u=0;$u<Sn;$u++)xn.push(Hr[$u])}else if(xi==="justify"&&sa.encoding==="Identity-H"){xn=[],Sn=Hr.length,Ji=Ji!==0?Ji:fa;for(var Xl=0,bo=0;bo<Sn;bo++)if(Ea=bo===0?Na(tr):-Ps,Aa=bo===0?Ys(Vn):Xl,bo<Sn-1){var oc=En((Ji-ps[bo])/(Hr[bo].split(" ").length-1)),Da=Hr[bo].split(" ");xn.push([Da[0]+" ",Aa,Ea]),Xl=0;for(var Fa=1;Fa<Da.length;Fa++){var yu=(dl(Da[Fa-1]+" "+Da[Fa])-dl(Da[Fa]))*cl+oc;Fa==Da.length-1?xn.push([Da[Fa],yu,0]):xn.push([Da[Fa]+" ",yu,0]),Xl-=yu}}else xn.push([Hr[bo],Aa,Ea]);xn.push(["",Xl,0])}else{if(xi!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(xn=[],Sn=Hr.length,Ji=Ji!==0?Ji:fa,bo=0;bo<Sn;bo++)Ea=bo===0?Na(tr):-Ps,Aa=bo===0?Ys(Vn):0,bo<Sn-1?La.push(mn(En((Ji-ps[bo])/(Hr[bo].split(" ").length-1)))):La.push(0),xn.push([Hr[bo],Aa,Ea])}}(typeof ur.R2L=="boolean"?ur.R2L:gi)===!0&&(xn=So(xn,function(Hs,Gs,Po){return[Hs.split("").reverse().join(""),Gs,Po]})),Br={text:xn,x:Vn,y:tr,options:ur,mutex:{pdfEscape:Vi,activeFontKey:Kr,fonts:zr,activeFontSize:Wr}},ai.publish("postProcessText",Br),xn=Br.text,Ds=Br.mutex.isHex||!1;var Ql=zr[Kr].encoding;Ql!=="WinAnsiEncoding"&&Ql!=="StandardEncoding"||(xn=So(xn,function(Hs,Gs,Po){return[iu(Hs),Gs,Po]})),Hr=Ml(xn),xn=[];for(var bu,su,Ll,Dl=Array.isArray(Hr[0])?1:0,xl="",vu=function(Hs,Gs,Po){var Io="";return Po instanceof Ci?(Po=typeof ur.angle=="number"?gs(Po,new Ci(1,0,0,1,Hs,Gs)):gs(new Ci(1,0,0,1,Hs,Gs),Po),un===Je&&(Po=gs(new Ci(1,0,0,-1,0,0),Po)),Io=Po.join(" ")+` Tm
`):Io=mn(Hs)+" "+mn(Gs)+` Td
`,Io},Va=0;Va<Hr.length;Va++){switch(xl="",Dl){case 1:Ll=(Ds?"<":"(")+Hr[Va][0]+(Ds?">":")"),bu=parseFloat(Hr[Va][1]),su=parseFloat(Hr[Va][2]);break;case 0:Ll=(Ds?"<":"(")+Hr[Va]+(Ds?">":")"),bu=Ys(Vn),su=Na(tr)}La!==void 0&&La[Va]!==void 0&&(xl=La[Va]+` Tw
`),Va===0?xn.push(xl+vu(bu,su,Qs)+Ll):Dl===0?xn.push(xl+Ll):Dl===1&&xn.push(xl+vu(bu,su,Qs)+Ll)}xn=Dl===0?xn.join(` Tj
T* `):xn.join(` Tj
`),xn+=` Tj
`;var Tl=`BT
/`;return Tl+=Kr+" "+Wr+` Tf
`,Tl+=mn(Wr*nl)+` TL
`,Tl+=ar+`
`,Tl+=jo,Tl+=xn,rr(Tl+="ET"),Oe[Kr]=!0,Es};var wa=Ue.__private__.clip=Ue.clip=function(xn){return rr(xn==="evenodd"?"W*":"W"),this};Ue.clipEvenOdd=function(){return wa("evenodd")},Ue.__private__.discardPath=Ue.discardPath=function(){return rr("n"),this};var us=Ue.__private__.isValidStyle=function(xn){var Vn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(xn)!==-1&&(Vn=!0),Vn};Ue.__private__.setDefaultPathOperation=Ue.setDefaultPathOperation=function(xn){return us(xn)&&(Ve=xn),this};var Oa=Ue.__private__.getStyle=Ue.getStyle=function(xn){var Vn=Ve;switch(xn){case"D":case"S":Vn="S";break;case"F":Vn="f";break;case"FD":case"DF":Vn="B";break;case"f":case"f*":case"B":case"B*":Vn=xn}return Vn},os=Ue.close=function(){return rr("h"),this};Ue.stroke=function(){return rr("S"),this},Ue.fill=function(xn){return Qo("f",xn),this},Ue.fillEvenOdd=function(xn){return Qo("f*",xn),this},Ue.fillStroke=function(xn){return Qo("B",xn),this},Ue.fillStrokeEvenOdd=function(xn){return Qo("B*",xn),this};var Qo=function(xn,Vn){_typeof(Vn)==="object"?es(Vn,xn):rr(xn)},Xi=function(xn){xn===null||un===Je&&xn===void 0||(xn=Oa(xn),rr(xn))};function ul(xn,Vn,tr,ur,br){var Br=new q(Vn||this.boundingBox,tr||this.xStep,ur||this.yStep,this.gState,br||this.matrix);Br.stream=this.stream;var Hr=xn+"$$"+this.cloneIndex+++"$$";return Ls(Hr,Br),Br}var es=function(xn,Vn){var tr=Ri[xn.key],ur=wi[tr];if(ur instanceof M)rr("q"),rr(Qi(Vn)),ur.gState&&Ue.setGState(ur.gState),rr(xn.matrix.toString()+" cm"),rr("/"+tr+" sh"),rr("Q");else if(ur instanceof q){var br=new Ci(1,0,0,-1,0,Xs());xn.matrix&&(br=br.multiply(xn.matrix||Mo),tr=ul.call(ur,xn.key,xn.boundingBox,xn.xStep,xn.yStep,br).id),rr("q"),rr("/Pattern cs"),rr("/"+tr+" scn"),ur.gState&&Ue.setGState(ur.gState),rr(Vn),rr("Q")}},Qi=function(xn){switch(xn){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},tl=Ue.moveTo=function(xn,Vn){return rr(mn(En(xn))+" "+mn(In(Vn))+" m"),this},ha=Ue.lineTo=function(xn,Vn){return rr(mn(En(xn))+" "+mn(In(Vn))+" l"),this},Fo=Ue.curveTo=function(xn,Vn,tr,ur,br,Br){return rr([mn(En(xn)),mn(In(Vn)),mn(En(tr)),mn(In(ur)),mn(En(br)),mn(In(Br)),"c"].join(" ")),this};Ue.__private__.line=Ue.line=function(xn,Vn,tr,ur,br){if(isNaN(xn)||isNaN(Vn)||isNaN(tr)||isNaN(ur)||!us(br))throw new Error("Invalid arguments passed to jsPDF.line");return un===Xe?this.lines([[tr-xn,ur-Vn]],xn,Vn,[1,1],br||"S"):this.lines([[tr-xn,ur-Vn]],xn,Vn,[1,1]).stroke()},Ue.__private__.lines=Ue.lines=function(xn,Vn,tr,ur,br,Br){var Hr,_i,xi,Bi,Ji,bs,Ws,Qs,Es,yo,Ds,jo;if(typeof xn=="number"&&(jo=tr,tr=Vn,Vn=xn,xn=jo),ur=ur||[1,1],Br=Br||!1,isNaN(Vn)||isNaN(tr)||!Array.isArray(xn)||!Array.isArray(ur)||!us(br)||typeof Br!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(tl(Vn,tr),Hr=ur[0],_i=ur[1],Bi=xn.length,yo=Vn,Ds=tr,xi=0;xi<Bi;xi++)(Ji=xn[xi]).length===2?(yo=Ji[0]*Hr+yo,Ds=Ji[1]*_i+Ds,ha(yo,Ds)):(bs=Ji[0]*Hr+yo,Ws=Ji[1]*_i+Ds,Qs=Ji[2]*Hr+yo,Es=Ji[3]*_i+Ds,yo=Ji[4]*Hr+yo,Ds=Ji[5]*_i+Ds,Fo(bs,Ws,Qs,Es,yo,Ds));return Br&&os(),Xi(br),this},Ue.path=function(xn){for(var Vn=0;Vn<xn.length;Vn++){var tr=xn[Vn],ur=tr.c;switch(tr.op){case"m":tl(ur[0],ur[1]);break;case"l":ha(ur[0],ur[1]);break;case"c":Fo.apply(this,ur);break;case"h":os()}}return this},Ue.__private__.rect=Ue.rect=function(xn,Vn,tr,ur,br){if(isNaN(xn)||isNaN(Vn)||isNaN(tr)||isNaN(ur)||!us(br))throw new Error("Invalid arguments passed to jsPDF.rect");return un===Xe&&(ur=-ur),rr([mn(En(xn)),mn(In(Vn)),mn(En(tr)),mn(En(ur)),"re"].join(" ")),Xi(br),this},Ue.__private__.triangle=Ue.triangle=function(xn,Vn,tr,ur,br,Br,Hr){if(isNaN(xn)||isNaN(Vn)||isNaN(tr)||isNaN(ur)||isNaN(br)||isNaN(Br)||!us(Hr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[tr-xn,ur-Vn],[br-tr,Br-ur],[xn-br,Vn-Br]],xn,Vn,[1,1],Hr,!0),this},Ue.__private__.roundedRect=Ue.roundedRect=function(xn,Vn,tr,ur,br,Br,Hr){if(isNaN(xn)||isNaN(Vn)||isNaN(tr)||isNaN(ur)||isNaN(br)||isNaN(Br)||!us(Hr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _i=4/3*(Math.SQRT2-1);return br=Math.min(br,.5*tr),Br=Math.min(Br,.5*ur),this.lines([[tr-2*br,0],[br*_i,0,br,Br-Br*_i,br,Br],[0,ur-2*Br],[0,Br*_i,-br*_i,Br,-br,Br],[2*br-tr,0],[-br*_i,0,-br,-Br*_i,-br,-Br],[0,2*Br-ur],[0,-Br*_i,br*_i,-Br,br,-Br]],xn+br,Vn,[1,1],Hr,!0),this},Ue.__private__.ellipse=Ue.ellipse=function(xn,Vn,tr,ur,br){if(isNaN(xn)||isNaN(Vn)||isNaN(tr)||isNaN(ur)||!us(br))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Br=4/3*(Math.SQRT2-1)*tr,Hr=4/3*(Math.SQRT2-1)*ur;return tl(xn+tr,Vn),Fo(xn+tr,Vn-Hr,xn+Br,Vn-ur,xn,Vn-ur),Fo(xn-Br,Vn-ur,xn-tr,Vn-Hr,xn-tr,Vn),Fo(xn-tr,Vn+Hr,xn-Br,Vn+ur,xn,Vn+ur),Fo(xn+Br,Vn+ur,xn+tr,Vn+Hr,xn+tr,Vn),Xi(br),this},Ue.__private__.circle=Ue.circle=function(xn,Vn,tr,ur){if(isNaN(xn)||isNaN(Vn)||isNaN(tr)||!us(ur))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(xn,Vn,tr,tr,ur)},Ue.setFont=function(xn,Vn,tr){return tr&&(Vn=gn(Vn,tr)),Kr=vl(xn,Vn,{disableWarning:!1}),this};var go=Ue.__private__.getFont=Ue.getFont=function(){return zr[vl.apply(Ue,arguments)]};Ue.__private__.getFontList=Ue.getFontList=function(){var xn,Vn,tr={};for(xn in Ii)if(Ii.hasOwnProperty(xn))for(Vn in tr[xn]=[],Ii[xn])Ii[xn].hasOwnProperty(Vn)&&tr[xn].push(Vn);return tr},Ue.addFont=function(xn,Vn,tr,ur,br){var Br=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Br.indexOf(arguments[3])!==-1?br=arguments[3]:arguments[3]&&Br.indexOf(arguments[3])==-1&&(tr=gn(tr,ur)),Nr.call(this,xn,Vn,tr,br=br||"Identity-H")};var Vo,Jo=n.lineWidth||.200025,ji=Ue.__private__.getLineWidth=Ue.getLineWidth=function(){return Jo},ia=Ue.__private__.setLineWidth=Ue.setLineWidth=function(xn){return Jo=xn,rr(mn(En(xn))+" w"),this};Ue.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(xn,Vn){if(xn=xn||[],Vn=Vn||0,isNaN(Vn)||!Array.isArray(xn))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return xn=xn.map(function(tr){return mn(En(tr))}).join(" "),Vn=mn(En(Vn)),rr("["+xn+"] "+Vn+" d"),this};var xa=Ue.__private__.getLineHeight=Ue.getLineHeight=function(){return Wr*Vo};Ue.__private__.getLineHeight=Ue.getLineHeight=function(){return Wr*Vo};var Hl=Ue.__private__.setLineHeightFactor=Ue.setLineHeightFactor=function(xn){return typeof(xn=xn||1.15)=="number"&&(Vo=xn),this},Ol=Ue.__private__.getLineHeightFactor=Ue.getLineHeightFactor=function(){return Vo};Hl(n.lineHeight);var Ys=Ue.__private__.getHorizontalCoordinate=function(xn){return En(xn)},Na=Ue.__private__.getVerticalCoordinate=function(xn){return un===Je?xn:ri[kn].mediaBox.topRightY-ri[kn].mediaBox.bottomLeftY-En(xn)},Nl=Ue.__private__.getHorizontalCoordinateString=Ue.getHorizontalCoordinateString=function(xn){return mn(Ys(xn))},Ln=Ue.__private__.getVerticalCoordinateString=Ue.getVerticalCoordinateString=function(xn){return mn(Na(xn))},qn=n.strokeColor||"0 G";Ue.__private__.getStrokeColor=Ue.getDrawColor=function(){return Gn(qn)},Ue.__private__.setStrokeColor=Ue.setDrawColor=function(xn,Vn,tr,ur){return qn=ir({ch1:xn,ch2:Vn,ch3:tr,ch4:ur,pdfColorType:"draw",precision:2}),rr(qn),this};var Zn=n.fillColor||"0 g";Ue.__private__.getFillColor=Ue.getFillColor=function(){return Gn(Zn)},Ue.__private__.setFillColor=Ue.setFillColor=function(xn,Vn,tr,ur){return Zn=ir({ch1:xn,ch2:Vn,ch3:tr,ch4:ur,pdfColorType:"fill",precision:2}),rr(Zn),this};var ar=n.textColor||"0 g",vr=Ue.__private__.getTextColor=Ue.getTextColor=function(){return Gn(ar)};Ue.__private__.setTextColor=Ue.setTextColor=function(xn,Vn,tr,ur){return ar=ir({ch1:xn,ch2:Vn,ch3:tr,ch4:ur,pdfColorType:"text",precision:3}),this};var Cr=n.charSpace,ni=Ue.__private__.getCharSpace=Ue.getCharSpace=function(){return parseFloat(Cr||0)};Ue.__private__.setCharSpace=Ue.setCharSpace=function(xn){if(isNaN(xn))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cr=xn,this};var ui=0;Ue.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Ue.__private__.setLineCap=Ue.setLineCap=function(xn){var Vn=Ue.CapJoinStyles[xn];if(Vn===void 0)throw new Error("Line cap style of '"+xn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ui=Vn,rr(Vn+" J"),this};var ts=0;Ue.__private__.setLineJoin=Ue.setLineJoin=function(xn){var Vn=Ue.CapJoinStyles[xn];if(Vn===void 0)throw new Error("Line join style of '"+xn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ts=Vn,rr(Vn+" j"),this},Ue.__private__.setLineMiterLimit=Ue.__private__.setMiterLimit=Ue.setLineMiterLimit=Ue.setMiterLimit=function(xn){if(xn=xn||0,isNaN(xn))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return rr(mn(En(xn))+" M"),this},Ue.GState=O,Ue.setGState=function(xn){(xn=typeof xn=="string"?ci[ws[xn]]:Ki(null,xn)).equals(hs)||(rr("/"+xn.id+" gs"),hs=xn)};var Ki=function(xn,Vn){if(!xn||!ws[xn]){var tr=!1;for(var ur in ci)if(ci.hasOwnProperty(ur)&&ci[ur].equals(Vn)){tr=!0;break}if(tr)Vn=ci[ur];else{var br="GS"+(Object.keys(ci).length+1).toString(10);ci[br]=Vn,Vn.id=br}return xn&&(ws[xn]=Vn.id),ai.publish("addGState",Vn),Vn}};Ue.addGState=function(xn,Vn){return Ki(xn,Vn),this},Ue.saveGraphicsState=function(){return rr("q"),Ui.push({key:Kr,size:Wr,color:ar}),this},Ue.restoreGraphicsState=function(){rr("Q");var xn=Ui.pop();return Kr=xn.key,Wr=xn.size,ar=xn.color,hs=null,this},Ue.setCurrentTransformationMatrix=function(xn){return rr(xn.toString()+" cm"),this},Ue.comment=function(xn){return rr("#"+xn),this};var fs=function(xn,Vn){var tr=xn||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return tr},set:function(Br){isNaN(Br)||(tr=parseFloat(Br))}});var ur=Vn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ur},set:function(Br){isNaN(Br)||(ur=parseFloat(Br))}});var br="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return br},set:function(Br){br=Br.toString()}}),this},Ao=function(xn,Vn,tr,ur){fs.call(this,xn,Vn),this.type="rect";var br=tr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return br},set:function(Hr){isNaN(Hr)||(br=parseFloat(Hr))}});var Br=ur||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Br},set:function(Hr){isNaN(Hr)||(Br=parseFloat(Hr))}}),this},ho=function(){this.page=rs,this.currentPage=kn,this.pages=$r.slice(0),this.pagesContext=ri.slice(0),this.x=fi,this.y=Li,this.matrix=$i,this.width=as(kn),this.height=Xs(kn),this.outputDestination=Gr,this.id="",this.objectNumber=-1};ho.prototype.restore=function(){rs=this.page,kn=this.currentPage,ri=this.pagesContext,$r=this.pages,fi=this.x,Li=this.y,$i=this.matrix,qo(kn,this.width),Wo(kn,this.height),Gr=this.outputDestination};var Rr=function(xn,Vn,tr,ur,br){Zs.push(new ho),rs=kn=0,$r=[],fi=xn,Li=Vn,$i=br,is([tr,ur])};for(var Yi in Ue.beginFormObject=function(xn,Vn,tr,ur,br){return Rr(xn,Vn,tr,ur,br),this},Ue.endFormObject=function(xn){return function(Vn){if(To[Vn])Zs.pop().restore();else{var tr=new ho,ur="Xo"+(Object.keys(Ms).length+1).toString(10);tr.id=ur,To[Vn]=ur,Ms[ur]=tr,ai.publish("addFormObject",tr),Zs.pop().restore()}}(xn),this},Ue.doFormObject=function(xn,Vn){var tr=Ms[To[xn]];return rr("q"),rr(Vn.toString()+" cm"),rr("/"+tr.id+" Do"),rr("Q"),this},Ue.getFormObject=function(xn){var Vn=Ms[To[xn]];return{x:Vn.x,y:Vn.y,width:Vn.width,height:Vn.height,matrix:Vn.matrix}},Ue.save=function(xn,Vn){return xn=xn||"generated.pdf",(Vn=Vn||{}).returnPromise=Vn.returnPromise||!1,Vn.returnPromise===!1?(l(da(ca()),xn),typeof l.unload=="function"&&i.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(tr,ur){try{var br=l(da(ca()),xn);typeof l.unload=="function"&&i.setTimeout&&setTimeout(l.unload,911),tr(br)}catch(Br){ur(Br.message)}})},E.API)E.API.hasOwnProperty(Yi)&&(Yi==="events"&&E.API.events.length?function(xn,Vn){var tr,ur,br;for(br=Vn.length-1;br!==-1;br--)tr=Vn[br][0],ur=Vn[br][1],xn.subscribe.apply(xn,[tr].concat(typeof ur=="function"?[ur]:ur))}(ai,E.API.events):Ue[Yi]=E.API[Yi]);var as=Ue.getPageWidth=function(xn){return(ri[xn=xn||kn].mediaBox.topRightX-ri[xn].mediaBox.bottomLeftX)/si},qo=Ue.setPageWidth=function(xn,Vn){ri[xn].mediaBox.topRightX=Vn*si+ri[xn].mediaBox.bottomLeftX},Xs=Ue.getPageHeight=function(xn){return(ri[xn=xn||kn].mediaBox.topRightY-ri[xn].mediaBox.bottomLeftY)/si},Wo=Ue.setPageHeight=function(xn,Vn){ri[xn].mediaBox.topRightY=Vn*si+ri[xn].mediaBox.bottomLeftY};return Ue.internal={pdfEscape:Vi,getStyle:Oa,getFont:go,getFontSize:ei,getCharSpace:ni,getTextColor:vr,getLineHeight:xa,getLineHeightFactor:Ol,getLineWidth:ji,write:Ni,getHorizontalCoordinate:Ys,getVerticalCoordinate:Na,getCoordinateString:Nl,getVerticalCoordinateString:Ln,collections:{},newObject:xs,newAdditionalObject:ra,newObjectDeferred:Os,newObjectDeferredBegin:Ts,getFilters:cr,putStream:_r,events:ai,scaleFactor:si,pageSize:{getWidth:function(){return as(kn)},setWidth:function(xn){qo(kn,xn)},getHeight:function(){return Xs(kn)},setHeight:function(xn){Wo(kn,xn)}},encryptionOptions:Be,encryption:As,getEncryptor:function(xn){return Be!==null?As.encryptor(xn,0):function(Vn){return Vn}},output:mo,getNumberOfPages:Lo,pages:$r,out:rr,f2:bn,f3:Tn,getPageInfo:Do,getPageInfoByObjId:el,getCurrentPageInfo:Ga,getPDFVersion:He,Point:fs,Rectangle:Ao,Matrix:Ci,hasHotfix:Ha},Object.defineProperty(Ue.internal.pageSize,"width",{get:function(){return as(kn)},set:function(xn){qo(kn,xn)},enumerable:!0,configurable:!0}),Object.defineProperty(Ue.internal.pageSize,"height",{get:function(){return Xs(kn)},set:function(xn){Wo(kn,xn)},enumerable:!0,configurable:!0}),(function(xn){for(var Vn=0,tr=bi.length;Vn<tr;Vn++){var ur=Nr.call(this,xn[Vn][0],xn[Vn][1],xn[Vn][2],bi[Vn][3],!0);Me===!1&&(Oe[ur]=!0);var br=xn[Vn][0].split("-");js({id:ur,fontName:br[0],fontStyle:br[1]||""})}ai.publish("addFonts",{fonts:zr,dictionary:Ii})}).call(Ue,bi),Kr="F1",Eo(Ee,t),ai.publish("initialized"),Ue}I.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},I.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(n,e){return k(S(e).substr(0,5),n)},I.prototype.encryptor=function(n,e){var t=S(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(Te){return k(t,Te)}},O.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||_typeof(n)!==_typeof(this))return!1;var Te=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;Te++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&Te--;return Te===0},E.API={events:[]},E.version="3.0.2";var R=E.API,D=1,T=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},z=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(n){return n.toFixed(2)},H=function(n){return n.toFixed(5)};R.__acroform__={};var W=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},V=function(n){return n*D},G=function(n){var e=new ct,t=xt.internal.getHeight(n)||0,Te=xt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(U(Te)),Number(U(t))],e},Y=R.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},J=R.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},X=R.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},K=R.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return X(n,e-1)},Z=R.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Y(n,e-1)},$=R.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return J(n,e-1)},Q=R.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,Te=e.internal.getVerticalCoordinate,Ee=n[0],Re=n[1],Ce=n[2],De=n[3],$e={};return $e.lowerLeft_X=t(Ee)||0,$e.lowerLeft_Y=Te(Re+De)||0,$e.upperRight_X=t(Ee+Ce)||0,$e.upperRight_Y=Te(Re)||0,[Number(U($e.lowerLeft_X)),Number(U($e.lowerLeft_Y)),Number(U($e.upperRight_X)),Number(U($e.upperRight_Y))]},tt=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,Te=et(n,t),Ee=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+Ee+" "+U(Te.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(Te.text),e.push("ET"),e.push("Q"),e.push("EMC");var Re=G(n);return Re.scope=n.scope,Re.stream=e.join(`
`),Re}},et=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,Te={text:"",fontSize:""},Ee=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Ee=n.multiline?Ee.map(function(bn){return bn.split(`
`)}):Ee.map(function(bn){return[bn]});var Re=t,Ce=xt.internal.getHeight(n)||0;Ce=Ce<0?-Ce:Ce;var De=xt.internal.getWidth(n)||0;De=De<0?-De:De;var $e=function(bn,Tn,En){if(bn+1<Ee.length){var In=Tn+" "+Ee[bn+1][0];return nt(In,n,En).width<=De-4}return!1};Re++;e:for(;Re>0;){e="",Re--;var Ve,Be,Me=nt("3",n,Re).height,Oe=n.multiline?Ce-Re:(Ce-Me)/2,Ue=Oe+=2,ze=0,He=0,Ge=0;if(Re<=0){e=`(...) Tj
`,e+="% Width of Text: "+nt(e,n,Re=12).width+", FieldWidth:"+De+`
`;break}for(var Ke="",Xe=0,Je=0;Je<Ee.length;Je++)if(Ee.hasOwnProperty(Je)){var un=!1;if(Ee[Je].length!==1&&Ge!==Ee[Je].length-1){if((Me+2)*(Xe+2)+2>Ce)continue e;Ke+=Ee[Je][Ge],un=!0,He=Je,Je--}else{Ke=(Ke+=Ee[Je][Ge]+" ").substr(Ke.length-1)==" "?Ke.substr(0,Ke.length-1):Ke;var fn=parseInt(Je),yn=$e(fn,Ke,Re),gn=Je>=Ee.length-1;if(yn&&!gn){Ke+=" ",Ge=0;continue}if(yn||gn){if(gn)He=fn;else if(n.multiline&&(Me+2)*(Xe+2)+2>Ce)continue e}else{if(!n.multiline||(Me+2)*(Xe+2)+2>Ce)continue e;He=fn}}for(var mn="",dn=ze;dn<=He;dn++){var vn=Ee[dn];if(n.multiline){if(dn===He){mn+=vn[Ge]+" ",Ge=(Ge+1)%vn.length;continue}if(dn===ze){mn+=vn[vn.length-1]+" ";continue}}mn+=vn[0]+" "}switch(mn=mn.substr(mn.length-1)==" "?mn.substr(0,mn.length-1):mn,Be=nt(mn,n,Re).width,n.textAlign){case"right":Ve=De-Be-2;break;case"center":Ve=(De-Be)/2;break;default:Ve=2}e+=U(Ve)+" "+U(Ue)+` Td
`,e+="("+T(mn)+`) Tj
`,e+=-U(Ve)+` 0 Td
`,Ue=-(Re+2),Be=0,ze=un?He:He+1,Xe++,Ke=""}break}return Te.text=e,Te.fontSize=Re,Te},nt=function(n,e,t){var Te=e.scope.internal.getFont(e.fontName,e.fontStyle),Ee=e.scope.getStringUnitWidth(n,{font:Te,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:Te,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:Ee}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},it=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(Te){return Te.type===t.type&&Te.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},at=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ht.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new lt,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var Te=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Ee in Te)if(Te.hasOwnProperty(Ee)){var Re=Te[Ee];Re.objId=void 0,Re.hasAnnotation&&it(Re,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(Te,Ee){var Re=!Te;for(var Ce in Te||(Ee.internal.newObjectDeferredBegin(Ee.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Ee.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),Te=Te||Ee.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(Te.hasOwnProperty(Ce)){var De=Te[Ce],$e=[],Ve=De.Rect;if(De.Rect&&(De.Rect=Q(De.Rect,Ee)),Ee.internal.newObjectDeferredBegin(De.objId,!0),De.DA=xt.createDefaultAppearanceStream(De),_typeof(De)==="object"&&typeof De.getKeyValueListForStream=="function"&&($e=De.getKeyValueListForStream()),De.Rect=Ve,De.hasAppearanceStream&&!De.appearanceStreamContent){var Be=tt(De);$e.push({key:"AP",value:"<</N "+Be+">>"}),Ee.internal.acroformPlugin.xForms.push(Be)}if(De.appearanceStreamContent){var Me="";for(var Oe in De.appearanceStreamContent)if(De.appearanceStreamContent.hasOwnProperty(Oe)){var Ue=De.appearanceStreamContent[Oe];if(Me+="/"+Oe+" ",Me+="<<",Object.keys(Ue).length>=1||Array.isArray(Ue)){for(var Ce in Ue)if(Ue.hasOwnProperty(Ce)){var ze=Ue[Ce];typeof ze=="function"&&(ze=ze.call(Ee,De)),Me+="/"+Ce+" "+ze+" ",Ee.internal.acroformPlugin.xForms.indexOf(ze)>=0||Ee.internal.acroformPlugin.xForms.push(ze)}}else typeof(ze=Ue)=="function"&&(ze=ze.call(Ee,De)),Me+="/"+Ce+" "+ze,Ee.internal.acroformPlugin.xForms.indexOf(ze)>=0||Ee.internal.acroformPlugin.xForms.push(ze);Me+=">>"}$e.push({key:"AP",value:`<<
`+Me+">>"})}Ee.internal.putStream({additionalKeyValues:$e,objectId:De.objId}),Ee.internal.out("endobj")}Re&&function(He,Ge){for(var Ke in He)if(He.hasOwnProperty(Ke)){var Xe=Ke,Je=He[Ke];Ge.internal.newObjectDeferredBegin(Je.objId,!0),_typeof(Je)==="object"&&typeof Je.putStream=="function"&&Je.putStream(),delete He[Xe]}}(Ee.internal.acroformPlugin.xForms,Ee)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},ot=R.__acroform__.arrayToPdfArray=function(n,e,t){var Te=function(Ce){return Ce};if(Array.isArray(n)){for(var Ee="[",Re=0;Re<n.length;Re++)switch(Re!==0&&(Ee+=" "),_typeof(n[Re])){case"boolean":case"number":case"object":Ee+=n[Re].toString();break;case"string":n[Re].substr(0,1)!=="/"?(e!==void 0&&t&&(Te=t.internal.getEncryptor(e)),Ee+="("+T(Te(n[Re].toString()))+")"):Ee+=n[Re].toString()}return Ee+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(n,e,t){var Te=function(Ee){return Ee};return e!==void 0&&t&&(Te=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+T(Te(n))+")"},ut=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ut.prototype.toString=function(){return this.objId+" 0 R"},ut.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ut.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(Re){return Re!="content"&&Re!="appearanceStreamContent"&&Re!="scope"&&Re!="objId"&&Re.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var Te=e[t],Ee=this[Te];Ee&&(Array.isArray(Ee)?n.push({key:Te,value:ot(Ee,this.objId,this.scope)}):Ee instanceof ut?(Ee.scope=this.scope,n.push({key:Te,value:Ee.objId+" 0 R"})):typeof Ee!="function"&&n.push({key:Te,value:Ee}))}return n};var ct=function(){ut.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};W(ct,ut);var lt=function(){ut.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(Te){return Te};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+T(t(n))+")"}},set:function(t){n=t}})};W(lt,ut);var ht=function n(){ut.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Ke){if(isNaN(Ke))throw new Error('Invalid value "'+Ke+'" for attribute F supplied.');e=Ke}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!K(e,3)},set:function(Ke){Ke?this.F=Z(e,3):this.F=$(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Ke){if(isNaN(Ke))throw new Error('Invalid value "'+Ke+'" for attribute Ff supplied.');t=Ke}});var Te=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(Te.length!==0)return Te},set:function(Ke){Te=Ke!==void 0?Ke:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!Te||isNaN(Te[0])?0:Te[0]},set:function(Ke){Te[0]=Ke}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!Te||isNaN(Te[1])?0:Te[1]},set:function(Ke){Te[1]=Ke}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!Te||isNaN(Te[2])?0:Te[2]},set:function(Ke){Te[2]=Ke}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!Te||isNaN(Te[3])?0:Te[3]},set:function(Ke){Te[3]=Ke}});var Ee="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Ee},set:function(Ke){switch(Ke){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Ee=Ke;break;default:throw new Error('Invalid value "'+Ke+'" for attribute FT supplied.')}}});var Re=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Re||Re.length<1){if(this instanceof yt)return;Re="FieldObject"+n.FieldNum++}var Ke=function(Xe){return Xe};return this.scope&&(Ke=this.scope.internal.getEncryptor(this.objId)),"("+T(Ke(Re))+")"},set:function(Ke){Re=Ke.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Re},set:function(Ke){Re=Ke}});var Ce="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Ce},set:function(Ke){Ce=Ke}});var De="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return De},set:function(Ke){De=Ke}});var $e=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return $e},set:function(Ke){$e=Ke}});var Ve=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Ve===void 0?50/D:Ve},set:function(Ke){Ve=Ke}});var Be="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Be},set:function(Ke){Be=Ke}});var Me="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Me||this instanceof yt||this instanceof Nt))return st(Me,this.objId,this.scope)},set:function(Ke){Ke=Ke.toString(),Me=Ke}});var Oe=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Oe)return this instanceof mt==0?st(Oe,this.objId,this.scope):Oe},set:function(Ke){Ke=Ke.toString(),Oe=this instanceof mt==0?Ke.substr(0,1)==="("?z(Ke.substr(1,Ke.length-2)):z(Ke):Ke}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z(Oe.substr(1,Oe.length-1)):Oe},set:function(Ke){Ke=Ke.toString(),Oe=this instanceof mt==1?"/"+Ke:Ke}});var Ue=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Ue)return Ue},set:function(Ke){this.V=Ke}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Ue)return this instanceof mt==0?st(Ue,this.objId,this.scope):Ue},set:function(Ke){Ke=Ke.toString(),Ue=this instanceof mt==0?Ke.substr(0,1)==="("?z(Ke.substr(1,Ke.length-2)):z(Ke):Ke}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z(Ue.substr(1,Ue.length-1)):Ue},set:function(Ke){Ke=Ke.toString(),Ue=this instanceof mt==1?"/"+Ke:Ke}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var ze,He=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return He},set:function(Ke){Ke=!!Ke,He=Ke}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(ze)return ze},set:function(Ke){ze=Ke}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,1)},set:function(Ke){Ke?this.Ff=Z(this.Ff,1):this.Ff=$(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,2)},set:function(Ke){Ke?this.Ff=Z(this.Ff,2):this.Ff=$(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,3)},set:function(Ke){Ke?this.Ff=Z(this.Ff,3):this.Ff=$(this.Ff,3)}});var Ge=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ge!==null)return Ge},set:function(Ke){if([0,1,2].indexOf(Ke)===-1)throw new Error('Invalid value "'+Ke+'" for attribute Q supplied.');Ge=Ke}}),Object.defineProperty(this,"textAlign",{get:function(){var Ke;switch(Ge){case 0:default:Ke="left";break;case 1:Ke="center";break;case 2:Ke="right"}return Ke},configurable:!0,enumerable:!0,set:function(Ke){switch(Ke){case"right":case 2:Ge=2;break;case"center":case 1:Ge=1;break;default:Ge=0}}})};W(ht,ut);var ft=function(){ht.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var Te,Ee;Ee=[],typeof(Te=t)=="string"&&(Ee=function(Re,Ce,De){De||(De=1);for(var $e,Ve=[];$e=Ce.exec(Re);)Ve.push($e[De]);return Ve}(Te,/\((.*?)\)/g)),e=Ee}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,Te){for(Te=Te||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),Te!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,18)},set:function(t){t?this.Ff=Z(this.Ff,18):this.Ff=$(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Z(this.Ff,19):this.Ff=$(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,20)},set:function(t){t?(this.Ff=Z(this.Ff,20),e.sort()):this.Ff=$(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,22)},set:function(t){t?this.Ff=Z(this.Ff,22):this.Ff=$(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(t){t?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,27)},set:function(t){t?this.Ff=Z(this.Ff,27):this.Ff=$(this.Ff,27)}}),this.hasAppearanceStream=!1};W(ft,ht);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};W(dt,ft);var pt=function(){dt.call(this),this.combo=!0};W(pt,dt);var gt=function(){pt.call(this),this.edit=!0};W(gt,pt);var mt=function(){ht.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,15)},set:function(t){t?this.Ff=Z(this.Ff,15):this.Ff=$(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,16)},set:function(t){t?this.Ff=Z(this.Ff,16):this.Ff=$(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,17)},set:function(t){t?this.Ff=Z(this.Ff,17):this.Ff=$(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(t){t?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Re){return Re};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var Te,Ee=[];for(Te in Ee.push("<<"),e)Ee.push("/"+Te+" ("+T(t(e[Te]))+")");return Ee.push(">>"),Ee.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};W(mt,ht);var vt=function(){mt.call(this),this.pushButton=!0};W(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};W(bt,mt);var yt=function(){var n,e;ht.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(Ee){n=Ee}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Ee){e=Ee}});var t,Te={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Ee=function(De){return De};this.scope&&(Ee=this.scope.internal.getEncryptor(this.objId));var Re,Ce=[];for(Re in Ce.push("<<"),Te)Ce.push("/"+Re+" ("+T(Ee(Te[Re]))+")");return Ce.push(">>"),Ce.join(`
`)},set:function(Ee){_typeof(Ee)==="object"&&(Te=Ee)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return Te.CA||""},set:function(Ee){typeof Ee=="string"&&(Te.CA=Ee)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Ee){t=Ee}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(Ee){t="/"+Ee}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};W(yt,ht),bt.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},bt.prototype.createOption=function(n){var e=new yt;return e.Parent=this,e.optionName=n,this.Kids.push(e),At.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};W(wt,mt);var Nt=function(){ht.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,13)},set:function(e){e?this.Ff=Z(this.Ff,13):this.Ff=$(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,21)},set:function(e){e?this.Ff=Z(this.Ff,21):this.Ff=$(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(e){e?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,24)},set:function(e){e?this.Ff=Z(this.Ff,24):this.Ff=$(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,25)},set:function(e){e?this.Ff=Z(this.Ff,25):this.Ff=$(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(e){e?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};W(Nt,ht);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,14)},set:function(n){n?this.Ff=Z(this.Ff,14):this.Ff=$(this.Ff,14)}}),this.password=!0};W(Lt,Nt);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[],Te=n.scope.internal.getFont(n.fontName,n.fontStyle).id,Ee=n.scope.__private__.encodeColorString(n.color),Re=et(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+Te+" "+U(Re.fontSize)+" Tf "+Ee),t.push("BT"),t.push(Re.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=G(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,Te=n.scope.__private__.encodeColorString(n.color),Ee=[],Re=xt.internal.getHeight(n),Ce=xt.internal.getWidth(n),De=et(n,n.caption);return Ee.push("1 g"),Ee.push("0 0 "+U(Ce)+" "+U(Re)+" re"),Ee.push("f"),Ee.push("q"),Ee.push("0 0 1 rg"),Ee.push("0 0 "+U(Ce-1)+" "+U(Re-1)+" re"),Ee.push("W"),Ee.push("n"),Ee.push("0 g"),Ee.push("BT"),Ee.push("/"+t+" "+U(De.fontSize)+" Tf "+Te),Ee.push(De.text),Ee.push("ET"),Ee.push("Q"),e.stream=Ee.join(`
`),e},OffPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=xt.RadioButton.Circle.YesNormal,e.D[n]=xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=G(n);e.scope=n.scope;var t=[],Te=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;Te=Number((.9*Te).toFixed(5));var Ee=xt.internal.Bezier_C,Re=Number((Te*Ee).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(Te+" 0 m"),t.push(Te+" "+Re+" "+Re+" "+Te+" 0 "+Te+" c"),t.push("-"+Re+" "+Te+" -"+Te+" "+Re+" -"+Te+" 0 c"),t.push("-"+Te+" -"+Re+" -"+Re+" -"+Te+" 0 -"+Te+" c"),t.push(Re+" -"+Te+" "+Te+" -"+Re+" "+Te+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[],Te=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;Te=Number((.9*Te).toFixed(5));var Ee=Number((2*Te).toFixed(5)),Re=Number((Ee*xt.internal.Bezier_C).toFixed(5)),Ce=Number((Te*xt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(Ee+" 0 m"),t.push(Ee+" "+Re+" "+Re+" "+Ee+" 0 "+Ee+" c"),t.push("-"+Re+" "+Ee+" -"+Ee+" "+Re+" -"+Ee+" 0 c"),t.push("-"+Ee+" -"+Re+" -"+Re+" -"+Ee+" 0 -"+Ee+" c"),t.push(Re+" -"+Ee+" "+Ee+" -"+Re+" "+Ee+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(Te+" 0 m"),t.push(Te+" "+Ce+" "+Ce+" "+Te+" 0 "+Te+" c"),t.push("-"+Ce+" "+Te+" -"+Te+" "+Ce+" -"+Te+" 0 c"),t.push("-"+Te+" -"+Ce+" -"+Ce+" -"+Te+" 0 -"+Te+" c"),t.push(Ce+" -"+Te+" "+Te+" -"+Ce+" "+Te+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[],Te=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;Te=Number((.9*Te).toFixed(5));var Ee=Number((2*Te).toFixed(5)),Re=Number((Ee*xt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(Ee+" 0 m"),t.push(Ee+" "+Re+" "+Re+" "+Ee+" 0 "+Ee+" c"),t.push("-"+Re+" "+Ee+" -"+Ee+" "+Re+" -"+Ee+" 0 c"),t.push("-"+Ee+" -"+Re+" -"+Re+" -"+Ee+" 0 -"+Ee+" c"),t.push(Re+" -"+Ee+" "+Ee+" -"+Re+" "+Ee+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=xt.RadioButton.Cross.YesNormal,e.D[n]=xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=G(n);e.scope=n.scope;var t=[],Te=xt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+U(xt.internal.getWidth(n)-2)+" "+U(xt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(U(Te.x1.x)+" "+U(Te.x1.y)+" m"),t.push(U(Te.x2.x)+" "+U(Te.x2.y)+" l"),t.push(U(Te.x4.x)+" "+U(Te.x4.y)+" m"),t.push(U(Te.x3.x)+" "+U(Te.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=G(n);e.scope=n.scope;var t=xt.internal.calculateCross(n),Te=[];return Te.push("0.749023 g"),Te.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),Te.push("f"),Te.push("q"),Te.push("1 1 "+U(xt.internal.getWidth(n)-2)+" "+U(xt.internal.getHeight(n)-2)+" re"),Te.push("W"),Te.push("n"),Te.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),Te.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),Te.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),Te.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),Te.push("s"),Te.push("Q"),e.stream=Te.join(`
`),e},OffPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};xt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=xt.internal.getWidth(n),t=xt.internal.getHeight(n),Te=Math.min(e,t);return{x1:{x:(e-Te)/2,y:(t-Te)/2+Te},x2:{x:(e-Te)/2+Te,y:(t-Te)/2},x3:{x:(e-Te)/2,y:(t-Te)/2},x4:{x:(e-Te)/2+Te,y:(t-Te)/2+Te}}}},xt.internal.getWidth=function(n){var e=0;return _typeof(n)==="object"&&(e=V(n.Rect[2])),e},xt.internal.getHeight=function(n){var e=0;return _typeof(n)==="object"&&(e=V(n.Rect[3])),e};var At=R.addField=function(n){if(at(this,n),!(n instanceof ht))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};R.AcroFormChoiceField=ft,R.AcroFormListBox=dt,R.AcroFormComboBox=pt,R.AcroFormEditBox=gt,R.AcroFormButton=mt,R.AcroFormPushButton=vt,R.AcroFormRadioButton=bt,R.AcroFormCheckBox=wt,R.AcroFormTextField=Nt,R.AcroFormPasswordField=Lt,R.AcroFormAppearance=xt,R.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt};E.AcroForm;function _t(n){return n.reduce(function(e,t,Te){return e[t]=Te,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",Te={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Ee=n.__addimage__.getImageFileTypeByImageData=function(bn,Tn){var En,In,Nn,On,Fn,$n=t;if((Tn=Tn||t)==="RGBA"||bn.data!==void 0&&bn.data instanceof Uint8ClampedArray&&"height"in bn&&"width"in bn)return"RGBA";if(yn(bn))for(Fn in Te)for(Nn=Te[Fn],En=0;En<Nn.length;En+=1){for(On=!0,In=0;In<Nn[En].length;In+=1)if(Nn[En][In]!==void 0&&Nn[En][In]!==bn[In]){On=!1;break}if(On===!0){$n=Fn;break}}else for(Fn in Te)for(Nn=Te[Fn],En=0;En<Nn.length;En+=1){for(On=!0,In=0;In<Nn[En].length;In+=1)if(Nn[En][In]!==void 0&&Nn[En][In]!==bn.charCodeAt(In)){On=!1;break}if(On===!0){$n=Fn;break}}return $n===t&&Tn!==t&&($n=Tn),$n},Re=function bn(Tn){for(var En=this.internal.write,In=this.internal.putStream,Nn=(0,this.internal.getFilters)();Nn.indexOf("FlateEncode")!==-1;)Nn.splice(Nn.indexOf("FlateEncode"),1);Tn.objectId=this.internal.newObject();var On=[];if(On.push({key:"Type",value:"/XObject"}),On.push({key:"Subtype",value:"/Image"}),On.push({key:"Width",value:Tn.width}),On.push({key:"Height",value:Tn.height}),Tn.colorSpace===Ke.INDEXED?On.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Tn.palette.length/3-1)+" "+("sMask"in Tn&&Tn.sMask!==void 0?Tn.objectId+2:Tn.objectId+1)+" 0 R]"}):(On.push({key:"ColorSpace",value:"/"+Tn.colorSpace}),Tn.colorSpace===Ke.DEVICE_CMYK&&On.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),On.push({key:"BitsPerComponent",value:Tn.bitsPerComponent}),"decodeParameters"in Tn&&Tn.decodeParameters!==void 0&&On.push({key:"DecodeParms",value:"<<"+Tn.decodeParameters+">>"}),"transparency"in Tn&&Array.isArray(Tn.transparency)){for(var Fn="",$n=0,Hn=Tn.transparency.length;$n<Hn;$n++)Fn+=Tn.transparency[$n]+" "+Tn.transparency[$n]+" ";On.push({key:"Mask",value:"["+Fn+"]"})}Tn.sMask!==void 0&&On.push({key:"SMask",value:Tn.objectId+1+" 0 R"});var Dn=Tn.filter!==void 0?["/"+Tn.filter]:void 0;if(In({data:Tn.data,additionalKeyValues:On,alreadyAppliedFilters:Dn,objectId:Tn.objectId}),En("endobj"),"sMask"in Tn&&Tn.sMask!==void 0){var Un=(Tn.predictor!=null?"/Predictor "+Tn.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+Tn.width,Cn={width:Tn.width,height:Tn.height,colorSpace:"DeviceGray",bitsPerComponent:Tn.bitsPerComponent,decodeParameters:Un,data:Tn.sMask};"filter"in Tn&&(Cn.filter=Tn.filter),bn.call(this,Cn)}if(Tn.colorSpace===Ke.INDEXED){var kn=this.internal.newObject();In({data:mn(new Uint8Array(Tn.palette)),objectId:kn}),En("endobj")}},Ce=function(){var bn=this.internal.collections[e+"images"];for(var Tn in bn)Re.call(this,bn[Tn])},De=function(){var bn,Tn=this.internal.collections[e+"images"],En=this.internal.write;for(var In in Tn)En("/I"+(bn=Tn[In]).index,bn.objectId,"0","R")},$e=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",Ce),this.internal.events.subscribe("putXobjectDict",De))},Ve=function(){var bn=this.internal.collections[e+"images"];return $e.call(this),bn},Be=function(){return Object.keys(this.internal.collections[e+"images"]).length},Me=function(bn){return typeof n["process"+bn.toUpperCase()]=="function"},Oe=function(bn){return _typeof(bn)==="object"&&bn.nodeType===1},Ue=function(bn,Tn){if(bn.nodeName==="IMG"&&bn.hasAttribute("src")){var En=""+bn.getAttribute("src");if(En.indexOf("data:image/")===0)return f(unescape(En).split("base64,").pop());var In=n.loadFile(En,!0);if(In!==void 0)return In}if(bn.nodeName==="CANVAS"){if(bn.width===0||bn.height===0)throw new Error("Given canvas must have data. Canvas width: "+bn.width+", height: "+bn.height);var Nn;switch(Tn){case"PNG":Nn="image/png";break;case"WEBP":Nn="image/webp";break;default:Nn="image/jpeg"}return f(bn.toDataURL(Nn,1).split("base64,").pop())}},ze=function(bn){var Tn=this.internal.collections[e+"images"];if(Tn){for(var En in Tn)if(bn===Tn[En].alias)return Tn[En]}},He=function(bn,Tn,En){return bn||Tn||(bn=-96,Tn=-96),bn<0&&(bn=-1*En.width*72/bn/this.internal.scaleFactor),Tn<0&&(Tn=-1*En.height*72/Tn/this.internal.scaleFactor),bn===0&&(bn=Tn*En.width/En.height),Tn===0&&(Tn=bn*En.height/En.width),[bn,Tn]},Ge=function(bn,Tn,En,In,Nn,On){var Fn=He.call(this,En,In,Nn),$n=this.internal.getCoordinateString,Hn=this.internal.getVerticalCoordinateString,Dn=Ve.call(this);if(En=Fn[0],In=Fn[1],Dn[Nn.index]=Nn,On){On*=Math.PI/180;var Un=Math.cos(On),Cn=Math.sin(On),kn=function(Jn){return Jn.toFixed(4)},Yn=[kn(Un),kn(Cn),kn(-1*Cn),kn(Un),0,0,"cm"]}this.internal.write("q"),On?(this.internal.write([1,"0","0",1,$n(bn),Hn(Tn+In),"cm"].join(" ")),this.internal.write(Yn.join(" ")),this.internal.write([$n(En),"0","0",$n(In),"0","0","cm"].join(" "))):this.internal.write([$n(En),"0","0",$n(In),$n(bn),Hn(Tn+In),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Nn.index+" Do"),this.internal.write("Q")},Ke=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Xe=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Je=n.__addimage__.sHashCode=function(bn){var Tn,En,In=0;if(typeof bn=="string")for(En=bn.length,Tn=0;Tn<En;Tn++)In=(In<<5)-In+bn.charCodeAt(Tn),In|=0;else if(yn(bn))for(En=bn.byteLength/2,Tn=0;Tn<En;Tn++)In=(In<<5)-In+bn[Tn],In|=0;return In},un=n.__addimage__.validateStringAsBase64=function(bn){(bn=bn||"").toString().trim();var Tn=!0;return bn.length===0&&(Tn=!1),bn.length%4!=0&&(Tn=!1),/^[A-Za-z0-9+/]+$/.test(bn.substr(0,bn.length-2))===!1&&(Tn=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(bn.substr(-2))===!1&&(Tn=!1),Tn},fn=n.__addimage__.extractImageFromDataUrl=function(bn){if(bn==null||!(bn=bn.trim()).startsWith("data:"))return null;var Tn=bn.indexOf(",");return Tn<0?null:bn.substring(0,Tn).trim().endsWith("base64")?bn.substring(Tn+1):null};n.__addimage__.isArrayBuffer=function(bn){return bn instanceof ArrayBuffer};var yn=n.__addimage__.isArrayBufferView=function(bn){return bn instanceof Int8Array||bn instanceof Uint8Array||bn instanceof Uint8ClampedArray||bn instanceof Int16Array||bn instanceof Uint16Array||bn instanceof Int32Array||bn instanceof Uint32Array||bn instanceof Float32Array||bn instanceof Float64Array},gn=n.__addimage__.binaryStringToUint8Array=function(bn){for(var Tn=bn.length,En=new Uint8Array(Tn),In=0;In<Tn;In++)En[In]=bn.charCodeAt(In);return En},mn=n.__addimage__.arrayBufferToBinaryString=function(bn){for(var Tn="",En=yn(bn)?bn:new Uint8Array(bn),In=0;In<En.length;In+=8192)Tn+=String.fromCharCode.apply(null,En.subarray(In,In+8192));return Tn};n.addImage=function(){var bn,Tn,En,In,Nn,On,Fn,$n,Hn;if(typeof arguments[1]=="number"?(Tn=t,En=arguments[1],In=arguments[2],Nn=arguments[3],On=arguments[4],Fn=arguments[5],$n=arguments[6],Hn=arguments[7]):(Tn=arguments[1],En=arguments[2],In=arguments[3],Nn=arguments[4],On=arguments[5],Fn=arguments[6],$n=arguments[7],Hn=arguments[8]),_typeof(bn=arguments[0])==="object"&&!Oe(bn)&&"imageData"in bn){var Dn=bn;bn=Dn.imageData,Tn=Dn.format||Tn||t,En=Dn.x||En||0,In=Dn.y||In||0,Nn=Dn.w||Dn.width||Nn,On=Dn.h||Dn.height||On,Fn=Dn.alias||Fn,$n=Dn.compression||$n,Hn=Dn.rotation||Dn.angle||Hn}var Un=this.internal.getFilters();if($n===void 0&&Un.indexOf("FlateEncode")!==-1&&($n="SLOW"),isNaN(En)||isNaN(In))throw new Error("Invalid coordinates passed to jsPDF.addImage");$e.call(this);var Cn=dn.call(this,bn,Tn,Fn,$n);return Ge.call(this,En,In,Nn,On,Cn,Hn),this};var dn=function(bn,Tn,En,In){var Nn,On,Fn;if(typeof bn=="string"&&Ee(bn)===t){bn=unescape(bn);var $n=vn(bn,!1);($n!==""||($n=n.loadFile(bn,!0))!==void 0)&&(bn=$n)}if(Oe(bn)&&(bn=Ue(bn,Tn)),Tn=Ee(bn,Tn),!Me(Tn))throw new Error("addImage does not support files of type '"+Tn+"', please ensure that a plugin for '"+Tn+"' support is added.");if(((Fn=En)==null||Fn.length===0)&&(En=function(Hn){return typeof Hn=="string"||yn(Hn)?Je(Hn):yn(Hn.data)?Je(Hn.data):null}(bn)),(Nn=ze.call(this,En))||(bn instanceof Uint8Array||Tn==="RGBA"||(On=bn,bn=gn(bn)),Nn=this["process"+Tn.toUpperCase()](bn,Be.call(this),En,function(Hn){return Hn&&typeof Hn=="string"&&(Hn=Hn.toUpperCase()),Hn in n.image_compression?Hn:Xe.NONE}(In),On)),!Nn)throw new Error("An unknown error occurred whilst processing the image.");return Nn},vn=n.__addimage__.convertBase64ToBinaryString=function(bn,Tn){Tn=typeof Tn!="boolean"||Tn;var En,In="";if(typeof bn=="string"){var Nn;En=(Nn=fn(bn))!==null&&Nn!==void 0?Nn:bn;try{In=f(En)}catch(On){if(Tn)throw un(En)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+On.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return In};n.getImageProperties=function(bn){var Tn,En,In="";if(Oe(bn)&&(bn=Ue(bn)),typeof bn=="string"&&Ee(bn)===t&&((In=vn(bn,!1))===""&&(In=n.loadFile(bn)||""),bn=In),En=Ee(bn),!Me(En))throw new Error("addImage does not support files of type '"+En+"', please ensure that a plugin for '"+En+"' support is added.");if(bn instanceof Uint8Array||(bn=gn(bn)),!(Tn=this["process"+En.toUpperCase()](bn)))throw new Error("An unknown error occurred whilst processing the image");return Tn.fileType=En,Tn}})(E.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var Te,Ee,Re,Ce=this.internal.getCoordinateString,De=this.internal.getVerticalCoordinateString,$e=this.internal.getPageInfoByObjId(t.objId),Ve=t.pageContext.annotations,Be=!1,Me=0;Me<Ve.length&&!Be;Me++)switch((Te=Ve[Me]).type){case"link":(e(Te.options.url)||e(Te.options.pageNumber))&&(Be=!0);break;case"reference":case"text":case"freetext":Be=!0}if(Be!=0){this.internal.write("/Annots [");for(var Oe=0;Oe<Ve.length;Oe++){Te=Ve[Oe];var Ue=this.internal.pdfEscape,ze=this.internal.getEncryptor(t.objId);switch(Te.type){case"reference":this.internal.write(" "+Te.object.objId+" 0 R ");break;case"text":var He=this.internal.newAdditionalObject(),Ge=this.internal.newAdditionalObject(),Ke=this.internal.getEncryptor(He.objId),Xe=Te.title||"Note";Re="<</Type /Annot /Subtype /Text "+(Ee="/Rect ["+Ce(Te.bounds.x)+" "+De(Te.bounds.y+Te.bounds.h)+" "+Ce(Te.bounds.x+Te.bounds.w)+" "+De(Te.bounds.y)+"] ")+"/Contents ("+Ue(Ke(Te.contents))+")",Re+=" /Popup "+Ge.objId+" 0 R",Re+=" /P "+$e.objId+" 0 R",Re+=" /T ("+Ue(Ke(Xe))+") >>",He.content=Re;var Je=He.objId+" 0 R";Re="<</Type /Annot /Subtype /Popup "+(Ee="/Rect ["+Ce(Te.bounds.x+30)+" "+De(Te.bounds.y+Te.bounds.h)+" "+Ce(Te.bounds.x+Te.bounds.w+30)+" "+De(Te.bounds.y)+"] ")+" /Parent "+Je,Te.open&&(Re+=" /Open true"),Re+=" >>",Ge.content=Re,this.internal.write(He.objId,"0 R",Ge.objId,"0 R");break;case"freetext":Ee="/Rect ["+Ce(Te.bounds.x)+" "+De(Te.bounds.y)+" "+Ce(Te.bounds.x+Te.bounds.w)+" "+De(Te.bounds.y+Te.bounds.h)+"] ";var un=Te.color||"#000000";Re="<</Type /Annot /Subtype /FreeText "+Ee+"/Contents ("+Ue(ze(Te.contents))+")",Re+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+un+")",Re+=" /Border [0 0 0]",Re+=" >>",this.internal.write(Re);break;case"link":if(Te.options.name){var fn=this.annotations._nameMap[Te.options.name];Te.options.pageNumber=fn.page,Te.options.top=fn.y}else Te.options.top||(Te.options.top=0);if(Ee="/Rect ["+Te.finalBounds.x+" "+Te.finalBounds.y+" "+Te.finalBounds.w+" "+Te.finalBounds.h+"] ",Re="",Te.options.url)Re="<</Type /Annot /Subtype /Link "+Ee+"/Border [0 0 0] /A <</S /URI /URI ("+Ue(ze(Te.options.url))+") >>";else if(Te.options.pageNumber)switch(Re="<</Type /Annot /Subtype /Link "+Ee+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(Te.options.pageNumber).objId+" 0 R",Te.options.magFactor=Te.options.magFactor||"XYZ",Te.options.magFactor){case"Fit":Re+=" /Fit]";break;case"FitH":Re+=" /FitH "+Te.options.top+"]";break;case"FitV":Te.options.left=Te.options.left||0,Re+=" /FitV "+Te.options.left+"]";break;default:var yn=De(Te.options.top);Te.options.left=Te.options.left||0,Te.options.zoom===void 0&&(Te.options.zoom=0),Re+=" /XYZ "+Te.options.left+" "+yn+" "+Te.options.zoom+"]"}Re!=""&&(Re+=" >>",this.internal.write(Re))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var Te=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":Te.pageContext.annotations.push(t)}},n.link=function(t,Te,Ee,Re,Ce){var De=this.internal.getCurrentPageInfo(),$e=this.internal.getCoordinateString,Ve=this.internal.getVerticalCoordinateString;De.pageContext.annotations.push({finalBounds:{x:$e(t),y:Ve(Te),w:$e(t+Ee),h:Ve(Te+Re)},options:Ce,type:"link"})},n.textWithLink=function(t,Te,Ee,Re){var Ce,De,$e=this.getTextWidth(t),Ve=this.internal.getLineHeight()/this.internal.scaleFactor;if(Re.maxWidth!==void 0){De=Re.maxWidth;var Be=this.splitTextToSize(t,De).length;Ce=Math.ceil(Ve*Be)}else De=$e,Ce=Ve;return this.text(t,Te,Ee,Re),Ee+=.2*Ve,Re.align==="center"&&(Te-=$e/2),Re.align==="right"&&(Te-=$e),this.link(Te,Ee-Ve,De,Ce,Re),$e},n.getTextWidth=function(t){var Te=this.internal.getFontSize();return this.getStringUnitWidth(t)*Te/this.internal.scaleFactor}}(E.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},Te={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Ee=[1570,1571,1573,1575];n.__arabicParser__={};var Re=n.__arabicParser__.isInArabicSubstitutionA=function(He){return e[He.charCodeAt(0)]!==void 0},Ce=n.__arabicParser__.isArabicLetter=function(He){return typeof He=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(He)},De=n.__arabicParser__.isArabicEndLetter=function(He){return Ce(He)&&Re(He)&&e[He.charCodeAt(0)].length<=2},$e=n.__arabicParser__.isArabicAlfLetter=function(He){return Ce(He)&&Ee.indexOf(He.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(He){return Ce(He)&&Re(He)&&e[He.charCodeAt(0)].length>=1};var Ve=n.__arabicParser__.arabicLetterHasFinalForm=function(He){return Ce(He)&&Re(He)&&e[He.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(He){return Ce(He)&&Re(He)&&e[He.charCodeAt(0)].length>=3};var Be=n.__arabicParser__.arabicLetterHasMedialForm=function(He){return Ce(He)&&Re(He)&&e[He.charCodeAt(0)].length==4},Me=n.__arabicParser__.resolveLigatures=function(He){var Ge=0,Ke=t,Xe="",Je=0;for(Ge=0;Ge<He.length;Ge+=1)Ke[He.charCodeAt(Ge)]!==void 0?(Je++,typeof(Ke=Ke[He.charCodeAt(Ge)])=="number"&&(Xe+=String.fromCharCode(Ke),Ke=t,Je=0),Ge===He.length-1&&(Ke=t,Xe+=He.charAt(Ge-(Je-1)),Ge-=Je-1,Je=0)):(Ke=t,Xe+=He.charAt(Ge-Je),Ge-=Je,Je=0);return Xe};n.__arabicParser__.isArabicDiacritic=function(He){return He!==void 0&&Te[He.charCodeAt(0)]!==void 0};var Oe=n.__arabicParser__.getCorrectForm=function(He,Ge,Ke){return Ce(He)?Re(He)===!1?-1:!Ve(He)||!Ce(Ge)&&!Ce(Ke)||!Ce(Ke)&&De(Ge)||De(He)&&!Ce(Ge)||De(He)&&$e(Ge)||De(He)&&De(Ge)?0:Be(He)&&Ce(Ge)&&!De(Ge)&&Ce(Ke)&&Ve(Ke)?3:De(He)||!Ce(Ke)?1:2:-1},Ue=function(He){var Ge=0,Ke=0,Xe=0,Je="",un="",fn="",yn=(He=He||"").split("\\s+"),gn=[];for(Ge=0;Ge<yn.length;Ge+=1){for(gn.push(""),Ke=0;Ke<yn[Ge].length;Ke+=1)Je=yn[Ge][Ke],un=yn[Ge][Ke-1],fn=yn[Ge][Ke+1],Ce(Je)?(Xe=Oe(Je,un,fn),gn[Ge]+=Xe!==-1?String.fromCharCode(e[Je.charCodeAt(0)][Xe]):Je):gn[Ge]+=Je;gn[Ge]=Me(gn[Ge])}return gn.join(" ")},ze=n.__arabicParser__.processArabic=n.processArabic=function(){var He,Ge=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Ke=[];if(Array.isArray(Ge)){var Xe=0;for(Ke=[],Xe=0;Xe<Ge.length;Xe+=1)Array.isArray(Ge[Xe])?Ke.push([Ue(Ge[Xe][0]),Ge[Xe][1],Ge[Xe][2]]):Ke.push([Ue(Ge[Xe])]);He=Ke}else He=Ue(Ge);return typeof arguments[0]=="string"?He:(arguments[0].text=He,arguments[0])};n.events.push(["preProcessText",ze])}(E.API),E.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(De){t=De}});var Te=150;Object.defineProperty(this,"width",{get:function(){return Te},set:function(De){Te=isNaN(De)||Number.isInteger(De)===!1||De<0?150:De,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=Te+1)}});var Ee=300;Object.defineProperty(this,"height",{get:function(){return Ee},set:function(De){Ee=isNaN(De)||Number.isInteger(De)===!1||De<0?300:De,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Ee+1)}});var Re=[];Object.defineProperty(this,"childNodes",{get:function(){return Re},set:function(De){Re=De}});var Ce={};Object.defineProperty(this,"style",{get:function(){return Ce},set:function(De){Ce=De}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,Te){var Ee;if((t=t||"2d")!=="2d")return null;for(Ee in Te)this.pdf.context2d.hasOwnProperty(Ee)&&(this.pdf.context2d[Ee]=Te[Ee]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,Te=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Ee.call(this))},Ee=function(){this.internal.__cell__.lastCell=new Re,this.internal.__cell__.pages=1},Re=function(){var $e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return $e},set:function(He){$e=He}});var Ve=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ve},set:function(He){Ve=He}});var Be=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Be},set:function(He){Be=He}});var Me=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Me},set:function(He){Me=He}});var Oe=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Oe},set:function(He){Oe=He}});var Ue=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Ue},set:function(He){Ue=He}});var ze=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return ze},set:function(He){ze=He}}),this};Re.prototype.clone=function(){return new Re(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Re.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function($e){return Te.call(this),this.internal.__cell__.headerFunction=typeof $e=="function"?$e:void 0,this},n.getTextDimensions=function($e,Ve){Te.call(this);var Be=(Ve=Ve||{}).fontSize||this.getFontSize(),Me=Ve.font||this.getFont(),Oe=Ve.scaleFactor||this.internal.scaleFactor,Ue=0,ze=0,He=0,Ge=this;if(!Array.isArray($e)&&typeof $e!="string"){if(typeof $e!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");$e=String($e)}var Ke=Ve.maxWidth;Ke>0?typeof $e=="string"?$e=this.splitTextToSize($e,Ke):Object.prototype.toString.call($e)==="[object Array]"&&($e=$e.reduce(function(Je,un){return Je.concat(Ge.splitTextToSize(un,Ke))},[])):$e=Array.isArray($e)?$e:[$e];for(var Xe=0;Xe<$e.length;Xe++)Ue<(He=this.getStringUnitWidth($e[Xe],{font:Me})*Be)&&(Ue=He);return Ue!==0&&(ze=$e.length),{w:Ue/=Oe,h:Math.max((ze*Be*this.getLineHeightFactor()-Be*(this.getLineHeightFactor()-1))/Oe,0)}},n.cellAddPage=function(){Te.call(this),this.addPage();var $e=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Re($e.left,$e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Ce=n.cell=function(){var $e;$e=arguments[0]instanceof Re?arguments[0]:new Re(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),Te.call(this);var Ve=this.internal.__cell__.lastCell,Be=this.internal.__cell__.padding,Me=this.internal.__cell__.margins||e,Oe=this.internal.__cell__.tableHeaderRow,Ue=this.internal.__cell__.printHeaders;return Ve.lineNumber!==void 0&&(Ve.lineNumber===$e.lineNumber?($e.x=(Ve.x||0)+(Ve.width||0),$e.y=Ve.y||0):Ve.y+Ve.height+$e.height+Me.bottom>this.getPageHeight()?(this.cellAddPage(),$e.y=Me.top,Ue&&Oe&&(this.printHeaderRow($e.lineNumber,!0),$e.y+=Oe[0].height)):$e.y=Ve.y+Ve.height||$e.y),$e.text[0]!==void 0&&(this.rect($e.x,$e.y,$e.width,$e.height,t===!0?"FD":void 0),$e.align==="right"?this.text($e.text,$e.x+$e.width-Be,$e.y+Be,{align:"right",baseline:"top"}):$e.align==="center"?this.text($e.text,$e.x+$e.width/2,$e.y+Be,{align:"center",baseline:"top",maxWidth:$e.width-Be-Be}):this.text($e.text,$e.x+Be,$e.y+Be,{align:"left",baseline:"top",maxWidth:$e.width-Be-Be})),this.internal.__cell__.lastCell=$e,this};n.table=function($e,Ve,Be,Me,Oe){if(Te.call(this),!Be)throw new Error("No data for PDF table.");var Ue,ze,He,Ge,Ke=[],Xe=[],Je=[],un={},fn={},yn=[],gn=[],mn=(Oe=Oe||{}).autoSize||!1,dn=Oe.printHeaders!==!1,vn=Oe.css&&Oe.css["font-size"]!==void 0?16*Oe.css["font-size"]:Oe.fontSize||12,bn=Oe.margins||Object.assign({width:this.getPageWidth()},e),Tn=typeof Oe.padding=="number"?Oe.padding:3,En=Oe.headerBackgroundColor||"#c8c8c8",In=Oe.headerTextColor||"#000";if(Ee.call(this),this.internal.__cell__.printHeaders=dn,this.internal.__cell__.margins=bn,this.internal.__cell__.table_font_size=vn,this.internal.__cell__.padding=Tn,this.internal.__cell__.headerBackgroundColor=En,this.internal.__cell__.headerTextColor=In,this.setFontSize(vn),Me==null)Xe=Ke=Object.keys(Be[0]),Je=Ke.map(function(){return"left"});else if(Array.isArray(Me)&&_typeof(Me[0])==="object")for(Ke=Me.map(function(Dn){return Dn.name}),Xe=Me.map(function(Dn){return Dn.prompt||Dn.name||""}),Je=Me.map(function(Dn){return Dn.align||"left"}),Ue=0;Ue<Me.length;Ue+=1)fn[Me[Ue].name]=.7499990551181103*Me[Ue].width;else Array.isArray(Me)&&typeof Me[0]=="string"&&(Xe=Ke=Me,Je=Ke.map(function(){return"left"}));if(mn||Array.isArray(Me)&&typeof Me[0]=="string")for(Ue=0;Ue<Ke.length;Ue+=1){for(un[Ge=Ke[Ue]]=Be.map(function(Dn){return Dn[Ge]}),this.setFont(void 0,"bold"),yn.push(this.getTextDimensions(Xe[Ue],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),ze=un[Ge],this.setFont(void 0,"normal"),He=0;He<ze.length;He+=1)yn.push(this.getTextDimensions(ze[He],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);fn[Ge]=Math.max.apply(null,yn)+Tn+Tn,yn=[]}if(dn){var Nn={};for(Ue=0;Ue<Ke.length;Ue+=1)Nn[Ke[Ue]]={},Nn[Ke[Ue]].text=Xe[Ue],Nn[Ke[Ue]].align=Je[Ue];var On=De.call(this,Nn,fn);gn=Ke.map(function(Dn){return new Re($e,Ve,fn[Dn],On,Nn[Dn].text,void 0,Nn[Dn].align)}),this.setTableHeaderRow(gn),this.printHeaderRow(1,!1)}var Fn=Me.reduce(function(Dn,Un){return Dn[Un.name]=Un.align,Dn},{});for(Ue=0;Ue<Be.length;Ue+=1){"rowStart"in Oe&&Oe.rowStart instanceof Function&&Oe.rowStart({row:Ue,data:Be[Ue]},this);var $n=De.call(this,Be[Ue],fn);for(He=0;He<Ke.length;He+=1){var Hn=Be[Ue][Ke[He]];"cellStart"in Oe&&Oe.cellStart instanceof Function&&Oe.cellStart({row:Ue,col:He,data:Hn},this),Ce.call(this,new Re($e,Ve,fn[Ke[He]],$n,Hn,Ue+2,Fn[Ke[He]]))}}return this.internal.__cell__.table_x=$e,this.internal.__cell__.table_y=Ve,this};var De=function($e,Ve){var Be=this.internal.__cell__.padding,Me=this.internal.__cell__.table_font_size,Oe=this.internal.scaleFactor;return Object.keys($e).map(function(Ue){var ze=$e[Ue];return this.splitTextToSize(ze.hasOwnProperty("text")?ze.text:ze,Ve[Ue]-Be-Be)},this).map(function(Ue){return this.getLineHeightFactor()*Ue.length*Me/Oe+Be+Be},this).reduce(function(Ue,ze){return Math.max(Ue,ze)},0)};n.setTableHeaderRow=function($e){Te.call(this),this.internal.__cell__.tableHeaderRow=$e},n.printHeaderRow=function($e,Ve){if(Te.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Be;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var Me=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Re(Me[0],Me[1],Me[2],Me[3],void 0,-1)}this.setFont(void 0,"bold");for(var Oe=[],Ue=0;Ue<this.internal.__cell__.tableHeaderRow.length;Ue+=1){Be=this.internal.__cell__.tableHeaderRow[Ue].clone(),Ve&&(Be.y=this.internal.__cell__.margins.top||0,Oe.push(Be)),Be.lineNumber=$e;var ze=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Ce.call(this,Be),this.setTextColor(ze)}Oe.length>0&&this.setTableHeaderRow(Oe),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ft=_t(kt),It=[100,200,300,400,500,600,700,800,900],jt=_t(It);function Ct(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(Re){return Pt[Re=Re||"normal"]?Re:"normal"}(n.style),Te=function(Re){return Re?typeof Re=="number"?Re>=100&&Re<=900&&Re%100==0?Re:400:/^\d00$/.test(Re)?parseInt(Re):Re==="bold"?700:400:400}(n.weight),Ee=function(Re){return typeof Ft[Re=Re||"normal"]=="number"?Re:"normal"}(n.stretch);return{family:e,style:t,weight:Te,stretch:Ee,src:n.src||[],ref:n.ref||{name:e,style:[Ee,t,Te].join(" ")}}}function Ot(n,e,t,Te){var Ee;for(Ee=t;Ee>=0&&Ee<e.length;Ee+=Te)if(n[e[Ee]])return n[e[Ee]];for(Ee=t;Ee>=0&&Ee<e.length;Ee-=Te)if(n[e[Ee]])return n[e[Ee]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function qt(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Et(n){return n.trimLeft()}function Rt(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Dt(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Tt,zt,Ut,Ht,Wt,Vt,Gt,Yt,Jt=["times"];function Xt(n,e,t,Te){var Ee=4,Re=$t;switch(Te){case E.API.image_compression.FAST:Ee=1,Re=Zt;break;case E.API.image_compression.MEDIUM:Ee=6,Re=Qt;break;case E.API.image_compression.SLOW:Ee=9,Re=te}n=function(De,$e,Ve,Be){for(var Me,Oe=De.length/$e,Ue=new Uint8Array(De.length+Oe),ze=[Kt,Zt,$t,Qt,te],He=0;He<Oe;He+=1){var Ge=He*$e,Ke=De.subarray(Ge,Ge+$e);if(Be)Ue.set(Be(Ke,Ve,Me),Ge+He);else{for(var Xe=ze.length,Je=[],un=0;un<Xe;un+=1)Je[un]=ze[un](Ke,Ve,Me);var fn=ne(Je.concat());Ue.set(Je[fn],Ge+He)}Me=Ke}return Ue}(n,e,t,Re);var Ce=zlibSync(n,{level:Ee});return E.API.__addimage__.arrayBufferToBinaryString(Ce)}function Kt(n){var e=Array.apply([],n);return e.unshift(0),e}function Zt(n,e){var t=n.length,Te=[];Te[0]=1;for(var Ee=0;Ee<t;Ee+=1){var Re=n[Ee-e]||0;Te[Ee+1]=n[Ee]-Re+256&255}return Te}function $t(n,e,t){var Te=n.length,Ee=[];Ee[0]=2;for(var Re=0;Re<Te;Re+=1){var Ce=t&&t[Re]||0;Ee[Re+1]=n[Re]-Ce+256&255}return Ee}function Qt(n,e,t){var Te=n.length,Ee=[];Ee[0]=3;for(var Re=0;Re<Te;Re+=1){var Ce=n[Re-e]||0,De=t&&t[Re]||0;Ee[Re+1]=n[Re]+256-(Ce+De>>>1)&255}return Ee}function te(n,e,t){var Te=n.length,Ee=[];Ee[0]=4;for(var Re=0;Re<Te;Re+=1){var Ce=ee(n[Re-e]||0,t&&t[Re]||0,t&&t[Re-e]||0);Ee[Re+1]=n[Re]-Ce+256&255}return Ee}function ee(n,e,t){if(n===e&&e===t)return n;var Te=Math.abs(e-t),Ee=Math.abs(n-t),Re=Math.abs(n+e-t-t);return Te<=Ee&&Te<=Re?n:Ee<=Re?e:t}function ne(n){var e=n.map(function(t){return t.reduce(function(Te,Ee){return Te+Math.abs(Ee)},0)});return e.indexOf(Math.min.apply(null,e))}function re$1(n,e,t){var Te=e*t,Ee=Math.floor(Te/8),Re=16-(Te-8*Ee+t),Ce=(1<<t)-1;return ae(n,Ee)>>Re&Ce}function ie(n,e,t,Te){var Ee=t*Te,Re=Math.floor(Ee/8),Ce=16-(Ee-8*Re+Te),De=(1<<Te)-1,$e=(e&De)<<Ce;(function(Ve,Be,Me){if(Be+1<Ve.byteLength)Ve.setUint16(Be,Me,!1);else{var Oe=Me>>8&255;Ve.setUint8(Be,Oe)}})(n,Re,ae(n,Re)&~(De<<Ce)&65535|$e)}function ae(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function oe(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,Te=n[e++]|n[e++]<<8,Ee=n[e++],Re=Ee>>7,Ce=1<<1+(7&Ee);n[e++],n[e++];var De=null,$e=null;Re&&(De=e,$e=Ce,e+=3*Ce);var Ve=!0,Be=[],Me=0,Oe=null,Ue=0,ze=null;for(this.width=t,this.height=Te;Ve&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,ze=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((bn=n[e++])>=0))throw Error("Invalid block size");if(bn===0)break;e+=bn}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var He=n[e++];Me=n[e++]|n[e++]<<8,Oe=n[e++],1&He||(Oe=null),Ue=He>>2&7,e++;break;case 254:for(;;){if(!((bn=n[e++])>=0))throw Error("Invalid block size");if(bn===0)break;e+=bn}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var Ge=n[e++]|n[e++]<<8,Ke=n[e++]|n[e++]<<8,Xe=n[e++]|n[e++]<<8,Je=n[e++]|n[e++]<<8,un=n[e++],fn=un>>6&1,yn=1<<1+(7&un),gn=De,mn=$e,dn=!1;un>>7&&(dn=!0,gn=e,mn=yn,e+=3*yn);var vn=e;for(e++;;){var bn;if(!((bn=n[e++])>=0))throw Error("Invalid block size");if(bn===0)break;e+=bn}Be.push({x:Ge,y:Ke,width:Xe,height:Je,has_local_palette:dn,palette_offset:gn,palette_size:mn,data_offset:vn,data_length:e-vn,transparent_index:Oe,interlaced:!!fn,delay:Me,disposal:Ue});break;case 59:Ve=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return Be.length},this.loopCount=function(){return ze},this.frameInfo=function(Tn){if(Tn<0||Tn>=Be.length)throw new Error("Frame index out of range.");return Be[Tn]},this.decodeAndBlitFrameBGRA=function(Tn,En){var In=this.frameInfo(Tn),Nn=In.width*In.height,On=new Uint8Array(Nn);se(n,In.data_offset,On,Nn);var Fn=In.palette_offset,$n=In.transparent_index;$n===null&&($n=256);var Hn=In.width,Dn=t-Hn,Un=Hn,Cn=4*(In.y*t+In.x),kn=4*((In.y+In.height)*t+In.x),Yn=Cn,Jn=4*Dn;In.interlaced===!0&&(Jn+=4*t*7);for(var sr=8,lr=0,mr=On.length;lr<mr;++lr){var gr=On[lr];if(Un===0&&(Un=Hn,(Yn+=Jn)>=kn&&(Jn=4*Dn+4*t*(sr-1),Yn=Cn+(Hn+Dn)*(sr<<1),sr>>=1)),gr===$n)Yn+=4;else{var Er=n[Fn+3*gr],$r=n[Fn+3*gr+1],Yr=n[Fn+3*gr+2];En[Yn++]=Yr,En[Yn++]=$r,En[Yn++]=Er,En[Yn++]=255}--Un}},this.decodeAndBlitFrameRGBA=function(Tn,En){var In=this.frameInfo(Tn),Nn=In.width*In.height,On=new Uint8Array(Nn);se(n,In.data_offset,On,Nn);var Fn=In.palette_offset,$n=In.transparent_index;$n===null&&($n=256);var Hn=In.width,Dn=t-Hn,Un=Hn,Cn=4*(In.y*t+In.x),kn=4*((In.y+In.height)*t+In.x),Yn=Cn,Jn=4*Dn;In.interlaced===!0&&(Jn+=4*t*7);for(var sr=8,lr=0,mr=On.length;lr<mr;++lr){var gr=On[lr];if(Un===0&&(Un=Hn,(Yn+=Jn)>=kn&&(Jn=4*Dn+4*t*(sr-1),Yn=Cn+(Hn+Dn)*(sr<<1),sr>>=1)),gr===$n)Yn+=4;else{var Er=n[Fn+3*gr],$r=n[Fn+3*gr+1],Yr=n[Fn+3*gr+2];En[Yn++]=Er,En[Yn++]=$r,En[Yn++]=Yr,En[Yn++]=255}--Un}}}function se(n,e,t,Te){for(var Ee=n[e++],Re=1<<Ee,Ce=Re+1,De=Ce+1,$e=Ee+1,Ve=(1<<$e)-1,Be=0,Me=0,Oe=0,Ue=n[e++],ze=new Int32Array(4096),He=null;;){for(;Be<16&&Ue!==0;)Me|=n[e++]<<Be,Be+=8,Ue===1?Ue=n[e++]:--Ue;if(Be<$e)break;var Ge=Me&Ve;if(Me>>=$e,Be-=$e,Ge!==Re){if(Ge===Ce)break;for(var Ke=Ge<De?Ge:He,Xe=0,Je=Ke;Je>Re;)Je=ze[Je]>>8,++Xe;var un=Je;if(Oe+Xe+(Ke!==Ge?1:0)>Te)return void o.log("Warning, gif stream longer than expected.");t[Oe++]=un;var fn=Oe+=Xe;for(Ke!==Ge&&(t[Oe++]=un),Je=Ke;Xe--;)Je=ze[Je],t[--fn]=255&Je,Je>>=8;He!==null&&De<4096&&(ze[De++]=He<<8|un,De>=Ve+1&&$e<12&&(++$e,Ve=Ve<<1|1)),He=Ge}else De=Ce+1,Ve=(1<<($e=Ee+1))-1,He=null}return Oe!==Te&&o.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ue(n){var e,t,Te,Ee,Re,Ce=Math.floor,De=new Array(64),$e=new Array(64),Ve=new Array(64),Be=new Array(64),Me=new Array(65535),Oe=new Array(65535),Ue=new Array(64),ze=new Array(64),He=[],Ge=0,Ke=7,Xe=new Array(64),Je=new Array(64),un=new Array(64),fn=new Array(256),yn=new Array(2048),gn=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],mn=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],dn=[0,1,2,3,4,5,6,7,8,9,10,11],vn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],bn=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Tn=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],En=[0,1,2,3,4,5,6,7,8,9,10,11],In=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Nn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function On(Cn,kn){for(var Yn=0,Jn=0,sr=new Array,lr=1;lr<=16;lr++){for(var mr=1;mr<=Cn[lr];mr++)sr[kn[Jn]]=[],sr[kn[Jn]][0]=Yn,sr[kn[Jn]][1]=lr,Jn++,Yn++;Yn*=2}return sr}function Fn(Cn){for(var kn=Cn[0],Yn=Cn[1]-1;Yn>=0;)kn&1<<Yn&&(Ge|=1<<Ke),Yn--,--Ke<0&&(Ge==255?($n(255),$n(0)):$n(Ge),Ke=7,Ge=0)}function $n(Cn){He.push(Cn)}function Hn(Cn){$n(Cn>>8&255),$n(255&Cn)}function Dn(Cn,kn,Yn,Jn,sr){for(var lr,mr=sr[0],gr=sr[240],Er=function(Wr,hi){var ei,gi,mi,Hi,oi,yr,Fr,Qr,Kr,si,fi=0;for(Kr=0;Kr<8;++Kr){ei=Wr[fi],gi=Wr[fi+1],mi=Wr[fi+2],Hi=Wr[fi+3],oi=Wr[fi+4],yr=Wr[fi+5],Fr=Wr[fi+6];var Li=ei+(Qr=Wr[fi+7]),$i=ei-Qr,zr=gi+Fr,Ii=gi-Fr,Ui=mi+yr,wi=mi-yr,Ri=Hi+oi,ci=Hi-oi,ws=Li+Ri,hs=Li-Ri,rs=zr+Ui,ri=zr-Ui;Wr[fi]=ws+rs,Wr[fi+4]=ws-rs;var ai=.707106781*(ri+hs);Wr[fi+2]=hs+ai,Wr[fi+6]=hs-ai;var Fi=.382683433*((ws=ci+wi)-(ri=Ii+$i)),Ms=.5411961*ws+Fi,To=1.306562965*ri+Fi,Zs=.707106781*(rs=wi+Ii),Ci=$i+Zs,gs=$i-Zs;Wr[fi+5]=gs+Ms,Wr[fi+3]=gs-Ms,Wr[fi+1]=Ci+To,Wr[fi+7]=Ci-To,fi+=8}for(fi=0,Kr=0;Kr<8;++Kr){ei=Wr[fi],gi=Wr[fi+8],mi=Wr[fi+16],Hi=Wr[fi+24],oi=Wr[fi+32],yr=Wr[fi+40],Fr=Wr[fi+48];var Mo=ei+(Qr=Wr[fi+56]),Ls=ei-Qr,eo=gi+Fr,xs=gi-Fr,Os=mi+yr,Ts=mi-yr,ra=Hi+oi,ua=Hi-oi,po=Mo+ra,Gn=Mo-ra,ir=eo+Os,cr=eo-Os;Wr[fi]=po+ir,Wr[fi+32]=po-ir;var _r=.707106781*(cr+Gn);Wr[fi+16]=Gn+_r,Wr[fi+48]=Gn-_r;var Ir=.382683433*((po=ua+Ts)-(cr=xs+Ls)),Or=.5411961*po+Ir,Zr=1.306562965*cr+Ir,yi=.707106781*(ir=Ts+xs),pi=Ls+yi,zi=Ls-yi;Wr[fi+40]=zi+Or,Wr[fi+24]=zi-Or,Wr[fi+8]=pi+Zr,Wr[fi+56]=pi-Zr,fi++}for(Kr=0;Kr<64;++Kr)si=Wr[Kr]*hi[Kr],Ue[Kr]=si>0?si+.5|0:si-.5|0;return Ue}(Cn,kn),$r=0;$r<64;++$r)ze[gn[$r]]=Er[$r];var Yr=ze[0]-Yn;Yn=ze[0],Yr==0?Fn(Jn[0]):(Fn(Jn[Oe[lr=32767+Yr]]),Fn(Me[lr]));for(var Gr=63;Gr>0&&ze[Gr]==0;)Gr--;if(Gr==0)return Fn(mr),Yn;for(var Tr,rr=1;rr<=Gr;){for(var Ni=rr;ze[rr]==0&&rr<=Gr;)++rr;var Ai=rr-Ni;if(Ai>=16){Tr=Ai>>4;for(var bi=1;bi<=Tr;++bi)Fn(gr);Ai&=15}lr=32767+ze[rr],Fn(sr[(Ai<<4)+Oe[lr]]),Fn(Me[lr]),rr++}return Gr!=63&&Fn(mr),Yn}function Un(Cn){Cn=Math.min(Math.max(Cn,1),100),Re!=Cn&&(function(kn){for(var Yn=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Jn=0;Jn<64;Jn++){var sr=Ce((Yn[Jn]*kn+50)/100);sr=Math.min(Math.max(sr,1),255),De[gn[Jn]]=sr}for(var lr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],mr=0;mr<64;mr++){var gr=Ce((lr[mr]*kn+50)/100);gr=Math.min(Math.max(gr,1),255),$e[gn[mr]]=gr}for(var Er=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$r=0,Yr=0;Yr<8;Yr++)for(var Gr=0;Gr<8;Gr++)Ve[$r]=1/(De[gn[$r]]*Er[Yr]*Er[Gr]*8),Be[$r]=1/($e[gn[$r]]*Er[Yr]*Er[Gr]*8),$r++}(Cn<50?Math.floor(5e3/Cn):Math.floor(200-2*Cn)),Re=Cn)}this.encode=function(Cn,kn){kn&&Un(kn),He=new Array,Ge=0,Ke=7,Hn(65496),Hn(65504),Hn(16),$n(74),$n(70),$n(73),$n(70),$n(0),$n(1),$n(1),$n(0),Hn(1),Hn(1),$n(0),$n(0),function(){Hn(65499),Hn(132),$n(0);for(var gi=0;gi<64;gi++)$n(De[gi]);$n(1);for(var mi=0;mi<64;mi++)$n($e[mi])}(),function(gi,mi){Hn(65472),Hn(17),$n(8),Hn(mi),Hn(gi),$n(3),$n(1),$n(17),$n(0),$n(2),$n(17),$n(1),$n(3),$n(17),$n(1)}(Cn.width,Cn.height),function(){Hn(65476),Hn(418),$n(0);for(var gi=0;gi<16;gi++)$n(mn[gi+1]);for(var mi=0;mi<=11;mi++)$n(dn[mi]);$n(16);for(var Hi=0;Hi<16;Hi++)$n(vn[Hi+1]);for(var oi=0;oi<=161;oi++)$n(bn[oi]);$n(1);for(var yr=0;yr<16;yr++)$n(Tn[yr+1]);for(var Fr=0;Fr<=11;Fr++)$n(En[Fr]);$n(17);for(var Qr=0;Qr<16;Qr++)$n(In[Qr+1]);for(var Kr=0;Kr<=161;Kr++)$n(Nn[Kr])}(),Hn(65498),Hn(12),$n(3),$n(1),$n(0),$n(2),$n(17),$n(3),$n(17),$n(0),$n(63),$n(0);var Yn=0,Jn=0,sr=0;Ge=0,Ke=7,this.encode.displayName="_encode_";for(var lr,mr,gr,Er,$r,Yr,Gr,Tr,rr,Ni=Cn.data,Ai=Cn.width,bi=Cn.height,Wr=4*Ai,hi=0;hi<bi;){for(lr=0;lr<Wr;){for($r=Wr*hi+lr,Gr=-1,Tr=0,rr=0;rr<64;rr++)Yr=$r+(Tr=rr>>3)*Wr+(Gr=4*(7&rr)),hi+Tr>=bi&&(Yr-=Wr*(hi+1+Tr-bi)),lr+Gr>=Wr&&(Yr-=lr+Gr-Wr+4),mr=Ni[Yr++],gr=Ni[Yr++],Er=Ni[Yr++],Xe[rr]=(yn[mr]+yn[gr+256|0]+yn[Er+512|0]>>16)-128,Je[rr]=(yn[mr+768|0]+yn[gr+1024|0]+yn[Er+1280|0]>>16)-128,un[rr]=(yn[mr+1280|0]+yn[gr+1536|0]+yn[Er+1792|0]>>16)-128;Yn=Dn(Xe,Ve,Yn,e,Te),Jn=Dn(Je,Be,Jn,t,Ee),sr=Dn(un,Be,sr,t,Ee),lr+=32}hi+=8}if(Ke>=0){var ei=[];ei[1]=Ke+1,ei[0]=(1<<Ke+1)-1,Fn(ei)}return Hn(65497),new Uint8Array(He)},n=n||50,function(){for(var Cn=String.fromCharCode,kn=0;kn<256;kn++)fn[kn]=Cn(kn)}(),e=On(mn,dn),t=On(Tn,En),Te=On(vn,bn),Ee=On(In,Nn),function(){for(var Cn=1,kn=2,Yn=1;Yn<=15;Yn++){for(var Jn=Cn;Jn<kn;Jn++)Oe[32767+Jn]=Yn,Me[32767+Jn]=[],Me[32767+Jn][1]=Yn,Me[32767+Jn][0]=Jn;for(var sr=-(kn-1);sr<=-Cn;sr++)Oe[32767+sr]=Yn,Me[32767+sr]=[],Me[32767+sr][1]=Yn,Me[32767+sr][0]=kn-1+sr;Cn<<=1,kn<<=1}}(),function(){for(var Cn=0;Cn<256;Cn++)yn[Cn]=19595*Cn,yn[Cn+256|0]=38470*Cn,yn[Cn+512|0]=7471*Cn+32768,yn[Cn+768|0]=-11059*Cn,yn[Cn+1024|0]=-21709*Cn,yn[Cn+1280|0]=32768*Cn+8421375,yn[Cn+1536|0]=-27439*Cn,yn[Cn+1792|0]=-5329*Cn}(),Un(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ce(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function le(n){function e(dn){if(!dn)throw Error("assert :P")}function t(dn,vn,bn){for(var Tn=0;4>Tn;Tn++)if(dn[vn+Tn]!=bn.charCodeAt(Tn))return!0;return!1}function Te(dn,vn,bn,Tn,En){for(var In=0;In<En;In++)dn[vn+In]=bn[Tn+In]}function Ee(dn,vn,bn,Tn){for(var En=0;En<Tn;En++)dn[vn+En]=bn}function Re(dn){return new Int32Array(dn)}function Ce(dn,vn){for(var bn=[],Tn=0;Tn<dn;Tn++)bn.push(new vn);return bn}function De(dn,vn){var bn=[];return function Tn(En,In,Nn){for(var On=Nn[In],Fn=0;Fn<On&&(En.push(Nn.length>In+1?[]:new vn),!(Nn.length<In+1));Fn++)Tn(En[Fn],In+1,Nn)}(bn,0,dn),bn}var $e=function(){var dn=this;function vn(Qe,pn){for(var An=1<<pn-1>>>0;Qe&An;)An>>>=1;return An?(Qe&An-1)+An:Qe}function bn(Qe,pn,An,Rn,jn){e(!(Rn%An));do Qe[pn+(Rn-=An)]=jn;while(0<Rn)}function Tn(Qe,pn,An,Rn,jn){if(e(2328>=jn),512>=jn)var zn=Re(512);else if((zn=Re(jn))==null)return 0;return function(Wn,Kn,Qn,er,dr,Ar){var nr,fr,xr=Kn,jr=1<<Qn,Pr=Re(16),Dr=Re(16);for(e(dr!=0),e(er!=null),e(Wn!=null),e(0<Qn),fr=0;fr<dr;++fr){if(15<er[fr])return 0;++Pr[er[fr]]}if(Pr[0]==dr)return 0;for(Dr[1]=0,nr=1;15>nr;++nr){if(Pr[nr]>1<<nr)return 0;Dr[nr+1]=Dr[nr]+Pr[nr]}for(fr=0;fr<dr;++fr)nr=er[fr],0<er[fr]&&(Ar[Dr[nr]++]=fr);if(Dr[15]==1)return(er=new En).g=0,er.value=Ar[0],bn(Wn,xr,1,jr,er),jr;var Vr,Ur=-1,qr=jr-1,Mi=0,Ti=1,ss=1,Pi=1<<Qn;for(fr=0,nr=1,dr=2;nr<=Qn;++nr,dr<<=1){if(Ti+=ss<<=1,0>(ss-=Pr[nr]))return 0;for(;0<Pr[nr];--Pr[nr])(er=new En).g=nr,er.value=Ar[fr++],bn(Wn,xr+Mi,dr,Pi,er),Mi=vn(Mi,nr)}for(nr=Qn+1,dr=2;15>=nr;++nr,dr<<=1){if(Ti+=ss<<=1,0>(ss-=Pr[nr]))return 0;for(;0<Pr[nr];--Pr[nr]){if(er=new En,(Mi&qr)!=Ur){for(xr+=Pi,Vr=1<<(Ur=nr)-Qn;15>Ur&&!(0>=(Vr-=Pr[Ur]));)++Ur,Vr<<=1;jr+=Pi=1<<(Vr=Ur-Qn),Wn[Kn+(Ur=Mi&qr)].g=Vr+Qn,Wn[Kn+Ur].value=xr-Kn-Ur}er.g=nr-Qn,er.value=Ar[fr++],bn(Wn,xr+(Mi>>Qn),dr,Pi,er),Mi=vn(Mi,nr)}}return Ti!=2*Dr[15]-1?0:jr}(Qe,pn,An,Rn,jn,zn)}function En(){this.value=this.g=0}function In(){this.value=this.g=0}function Nn(){this.G=Ce(5,En),this.H=Re(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Ce(Sa,In)}function On(Qe,pn,An,Rn){e(Qe!=null),e(pn!=null),e(2147483648>Rn),Qe.Ca=254,Qe.I=0,Qe.b=-8,Qe.Ka=0,Qe.oa=pn,Qe.pa=An,Qe.Jd=pn,Qe.Yc=An+Rn,Qe.Zc=4<=Rn?An+Rn-4+1:An,mr(Qe)}function Fn(Qe,pn){for(var An=0;0<pn--;)An|=Er(Qe,128)<<pn;return An}function $n(Qe,pn){var An=Fn(Qe,pn);return gr(Qe)?-An:An}function Hn(Qe,pn,An,Rn){var jn,zn=0;for(e(Qe!=null),e(pn!=null),e(4294967288>Rn),Qe.Sb=Rn,Qe.Ra=0,Qe.u=0,Qe.h=0,4<Rn&&(Rn=4),jn=0;jn<Rn;++jn)zn+=pn[An+jn]<<8*jn;Qe.Ra=zn,Qe.bb=Rn,Qe.oa=pn,Qe.pa=An}function Dn(Qe){for(;8<=Qe.u&&Qe.bb<Qe.Sb;)Qe.Ra>>>=8,Qe.Ra+=Qe.oa[Qe.pa+Qe.bb]<<Xl-8>>>0,++Qe.bb,Qe.u-=8;Jn(Qe)&&(Qe.h=1,Qe.u=0)}function Un(Qe,pn){if(e(0<=pn),!Qe.h&&pn<=$u){var An=Yn(Qe)&Yl[pn];return Qe.u+=pn,Dn(Qe),An}return Qe.h=1,Qe.u=0}function Cn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function kn(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Yn(Qe){return Qe.Ra>>>(Qe.u&Xl-1)>>>0}function Jn(Qe){return e(Qe.bb<=Qe.Sb),Qe.h||Qe.bb==Qe.Sb&&Qe.u>Xl}function sr(Qe,pn){Qe.u=pn,Qe.h=Jn(Qe)}function lr(Qe){Qe.u>=bo&&(e(Qe.u>=bo),Dn(Qe))}function mr(Qe){e(Qe!=null&&Qe.oa!=null),Qe.pa<Qe.Zc?(Qe.I=(Qe.oa[Qe.pa++]|Qe.I<<8)>>>0,Qe.b+=8):(e(Qe!=null&&Qe.oa!=null),Qe.pa<Qe.Yc?(Qe.b+=8,Qe.I=Qe.oa[Qe.pa++]|Qe.I<<8):Qe.Ka?Qe.b=0:(Qe.I<<=8,Qe.b+=8,Qe.Ka=1))}function gr(Qe){return Fn(Qe,1)}function Er(Qe,pn){var An=Qe.Ca;0>Qe.b&&mr(Qe);var Rn=Qe.b,jn=An*pn>>>8,zn=(Qe.I>>>Rn>jn)+0;for(zn?(An-=jn,Qe.I-=jn+1<<Rn>>>0):An=jn+1,Rn=An,jn=0;256<=Rn;)jn+=8,Rn>>=8;return Rn=7^jn+oc[Rn],Qe.b-=Rn,Qe.Ca=(An<<Rn)-1,zn}function $r(Qe,pn,An){Qe[pn+0]=An>>24&255,Qe[pn+1]=An>>16&255,Qe[pn+2]=An>>8&255,Qe[pn+3]=255&An}function Yr(Qe,pn){return Qe[pn+0]|Qe[pn+1]<<8}function Gr(Qe,pn){return Yr(Qe,pn)|Qe[pn+2]<<16}function Tr(Qe,pn){return Yr(Qe,pn)|Yr(Qe,pn+2)<<16}function rr(Qe,pn){var An=1<<pn;return e(Qe!=null),e(0<pn),Qe.X=Re(An),Qe.X==null?0:(Qe.Mb=32-pn,Qe.Xa=pn,1)}function Ni(Qe,pn){e(Qe!=null),e(pn!=null),e(Qe.Xa==pn.Xa),Te(pn.X,0,Qe.X,0,1<<pn.Xa)}function Ai(){this.X=[],this.Xa=this.Mb=0}function bi(Qe,pn,An,Rn){e(An!=null),e(Rn!=null);var jn=An[0],zn=Rn[0];return jn==0&&(jn=(Qe*zn+pn/2)/pn),zn==0&&(zn=(pn*jn+Qe/2)/Qe),0>=jn||0>=zn?0:(An[0]=jn,Rn[0]=zn,1)}function Wr(Qe,pn){return Qe+(1<<pn)-1>>>pn}function hi(Qe,pn){return((4278255360&Qe)+(4278255360&pn)>>>0&4278255360)+((16711935&Qe)+(16711935&pn)>>>0&16711935)>>>0}function ei(Qe,pn){dn[pn]=function(An,Rn,jn,zn,Wn,Kn,Qn){var er;for(er=0;er<Wn;++er){var dr=dn[Qe](Kn[Qn+er-1],jn,zn+er);Kn[Qn+er]=hi(An[Rn+er],dr)}}}function gi(){this.ud=this.hd=this.jd=0}function mi(Qe,pn){return((4278124286&(Qe^pn))>>>1)+(Qe&pn)>>>0}function Hi(Qe){return 0<=Qe&&256>Qe?Qe:0>Qe?0:255<Qe?255:void 0}function oi(Qe,pn){return Hi(Qe+(Qe-pn+.5>>1))}function yr(Qe,pn,An){return Math.abs(pn-An)-Math.abs(Qe-An)}function Fr(Qe,pn,An,Rn,jn,zn,Wn){for(Rn=zn[Wn-1],An=0;An<jn;++An)zn[Wn+An]=Rn=hi(Qe[pn+An],Rn)}function Qr(Qe,pn,An,Rn,jn){var zn;for(zn=0;zn<An;++zn){var Wn=Qe[pn+zn],Kn=Wn>>8&255,Qn=16711935&(Qn=(Qn=16711935&Wn)+((Kn<<16)+Kn));Rn[jn+zn]=(4278255360&Wn)+Qn>>>0}}function Kr(Qe,pn){pn.jd=255&Qe,pn.hd=Qe>>8&255,pn.ud=Qe>>16&255}function si(Qe,pn,An,Rn,jn,zn){var Wn;for(Wn=0;Wn<Rn;++Wn){var Kn=pn[An+Wn],Qn=Kn>>>8,er=Kn,dr=255&(dr=(dr=Kn>>>16)+((Qe.jd<<24>>24)*(Qn<<24>>24)>>>5));er=255&(er=(er+=(Qe.hd<<24>>24)*(Qn<<24>>24)>>>5)+((Qe.ud<<24>>24)*(dr<<24>>24)>>>5)),jn[zn+Wn]=(4278255360&Kn)+(dr<<16)+er}}function fi(Qe,pn,An,Rn,jn){dn[pn]=function(zn,Wn,Kn,Qn,er,dr,Ar,nr,fr){for(Qn=Ar;Qn<nr;++Qn)for(Ar=0;Ar<fr;++Ar)er[dr++]=jn(Kn[Rn(zn[Wn++])])},dn[Qe]=function(zn,Wn,Kn,Qn,er,dr,Ar){var nr=8>>zn.b,fr=zn.Ea,xr=zn.K[0],jr=zn.w;if(8>nr)for(zn=(1<<zn.b)-1,jr=(1<<nr)-1;Wn<Kn;++Wn){var Pr,Dr=0;for(Pr=0;Pr<fr;++Pr)Pr&zn||(Dr=Rn(Qn[er++])),dr[Ar++]=jn(xr[Dr&jr]),Dr>>=nr}else dn["VP8LMapColor"+An](Qn,er,xr,jr,dr,Ar,Wn,Kn,fr)}}function Li(Qe,pn,An,Rn,jn){for(An=pn+An;pn<An;){var zn=Qe[pn++];Rn[jn++]=zn>>16&255,Rn[jn++]=zn>>8&255,Rn[jn++]=255&zn}}function $i(Qe,pn,An,Rn,jn){for(An=pn+An;pn<An;){var zn=Qe[pn++];Rn[jn++]=zn>>16&255,Rn[jn++]=zn>>8&255,Rn[jn++]=255&zn,Rn[jn++]=zn>>24&255}}function zr(Qe,pn,An,Rn,jn){for(An=pn+An;pn<An;){var zn=(Wn=Qe[pn++])>>16&240|Wn>>12&15,Wn=240&Wn|Wn>>28&15;Rn[jn++]=zn,Rn[jn++]=Wn}}function Ii(Qe,pn,An,Rn,jn){for(An=pn+An;pn<An;){var zn=(Wn=Qe[pn++])>>16&248|Wn>>13&7,Wn=Wn>>5&224|Wn>>3&31;Rn[jn++]=zn,Rn[jn++]=Wn}}function Ui(Qe,pn,An,Rn,jn){for(An=pn+An;pn<An;){var zn=Qe[pn++];Rn[jn++]=255&zn,Rn[jn++]=zn>>8&255,Rn[jn++]=zn>>16&255}}function wi(Qe,pn,An,Rn,jn,zn){if(zn==0)for(An=pn+An;pn<An;)$r(Rn,((zn=Qe[pn++])[0]>>24|zn[1]>>8&65280|zn[2]<<8&16711680|zn[3]<<24)>>>0),jn+=32;else Te(Rn,jn,Qe,pn,An)}function Ri(Qe,pn){dn[pn][0]=dn[Qe+"0"],dn[pn][1]=dn[Qe+"1"],dn[pn][2]=dn[Qe+"2"],dn[pn][3]=dn[Qe+"3"],dn[pn][4]=dn[Qe+"4"],dn[pn][5]=dn[Qe+"5"],dn[pn][6]=dn[Qe+"6"],dn[pn][7]=dn[Qe+"7"],dn[pn][8]=dn[Qe+"8"],dn[pn][9]=dn[Qe+"9"],dn[pn][10]=dn[Qe+"10"],dn[pn][11]=dn[Qe+"11"],dn[pn][12]=dn[Qe+"12"],dn[pn][13]=dn[Qe+"13"],dn[pn][14]=dn[Qe+"0"],dn[pn][15]=dn[Qe+"0"]}function ci(Qe){return Qe==Eu||Qe==uu||Qe==Wu||Qe==Hu}function ws(){this.eb=[],this.size=this.A=this.fb=0}function hs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ws,this.f.kb=new hs,this.sd=null}function ri(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ai(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Fi(Qe){return alert("todo:WebPSamplerProcessPlane"),Qe.T}function Ms(Qe,pn){var An=Qe.T,Rn=pn.ba.f.RGBA,jn=Rn.eb,zn=Rn.fb+Qe.ka*Rn.A,Wn=$a[pn.ba.S],Kn=Qe.y,Qn=Qe.O,er=Qe.f,dr=Qe.N,Ar=Qe.ea,nr=Qe.W,fr=pn.cc,xr=pn.dc,jr=pn.Mc,Pr=pn.Nc,Dr=Qe.ka,Vr=Qe.ka+Qe.T,Ur=Qe.U,qr=Ur+1>>1;for(Dr==0?Wn(Kn,Qn,null,null,er,dr,Ar,nr,er,dr,Ar,nr,jn,zn,null,null,Ur):(Wn(pn.ec,pn.fc,Kn,Qn,fr,xr,jr,Pr,er,dr,Ar,nr,jn,zn-Rn.A,jn,zn,Ur),++An);Dr+2<Vr;Dr+=2)fr=er,xr=dr,jr=Ar,Pr=nr,dr+=Qe.Rc,nr+=Qe.Rc,zn+=2*Rn.A,Wn(Kn,(Qn+=2*Qe.fa)-Qe.fa,Kn,Qn,fr,xr,jr,Pr,er,dr,Ar,nr,jn,zn-Rn.A,jn,zn,Ur);return Qn+=Qe.fa,Qe.j+Vr<Qe.o?(Te(pn.ec,pn.fc,Kn,Qn,Ur),Te(pn.cc,pn.dc,er,dr,qr),Te(pn.Mc,pn.Nc,Ar,nr,qr),An--):1&Vr||Wn(Kn,Qn,null,null,er,dr,Ar,nr,er,dr,Ar,nr,jn,zn+Rn.A,null,null,Ur),An}function To(Qe,pn,An){var Rn=Qe.F,jn=[Qe.J];if(Rn!=null){var zn=Qe.U,Wn=pn.ba.S,Kn=Wn==qu||Wn==Wu;pn=pn.ba.f.RGBA;var Qn=[0],er=Qe.ka;Qn[0]=Qe.T,Qe.Kb&&(er==0?--Qn[0]:(--er,jn[0]-=Qe.width),Qe.j+Qe.ka+Qe.T==Qe.o&&(Qn[0]=Qe.o-Qe.j-er));var dr=pn.eb;er=pn.fb+er*pn.A,Qe=Uu(Rn,jn[0],Qe.width,zn,Qn,dr,er+(Kn?0:3),pn.A),e(An==Qn),Qe&&ci(Wn)&&lu(dr,er,Kn,zn,Qn,pn.A)}return 0}function Zs(Qe){var pn=Qe.ma,An=pn.ba.S,Rn=11>An,jn=An==Jl||An==zu||An==qu||An==$s||An==12||ci(An);if(pn.memory=null,pn.Ib=null,pn.Jb=null,pn.Nd=null,!Ea(pn.Oa,Qe,jn?11:12))return 0;if(jn&&ci(An)&&Gl(),Qe.da)alert("todo:use_scaling");else{if(Rn){if(pn.Ib=Fi,Qe.Kb){if(An=Qe.U+1>>1,pn.memory=Re(Qe.U+2*An),pn.memory==null)return 0;pn.ec=pn.memory,pn.fc=0,pn.cc=pn.ec,pn.dc=pn.fc+Qe.U,pn.Mc=pn.cc,pn.Nc=pn.dc+An,pn.Ib=Ms,Gl()}}else alert("todo:EmitYUV");jn&&(pn.Jb=To,Rn&&So())}if(Rn&&!oa){for(Qe=0;256>Qe;++Qe)Ba[Qe]=89858*(Qe-128)+pl>>Fl,Ua[Qe]=-22014*(Qe-128)+pl,Iu[Qe]=-45773*(Qe-128),fu[Qe]=113618*(Qe-128)+pl>>Fl;for(Qe=Ns;Qe<Fs;++Qe)pn=76283*(Qe-16)+pl>>Fl,mc[Qe-Ns]=ps(pn,255),dd[Qe-Ns]=ps(pn+8>>4,15);oa=1}return 1}function Ci(Qe){var pn=Qe.ma,An=Qe.U,Rn=Qe.T;return e(!(1&Qe.ka)),0>=An||0>=Rn?0:(An=pn.Ib(Qe,pn),pn.Jb!=null&&pn.Jb(Qe,pn,An),pn.Dc+=An,1)}function gs(Qe){Qe.ma.memory=null}function Mo(Qe,pn,An,Rn){return Un(Qe,8)!=47?0:(pn[0]=Un(Qe,14)+1,An[0]=Un(Qe,14)+1,Rn[0]=Un(Qe,1),Un(Qe,3)!=0?0:!Qe.h)}function Ls(Qe,pn){if(4>Qe)return Qe+1;var An=Qe-2>>1;return(2+(1&Qe)<<An)+Un(pn,An)+1}function eo(Qe,pn){return 120<pn?pn-120:1<=(An=((An=Bd[pn-1])>>4)*Qe+(8-(15&An)))?An:1;var An}function xs(Qe,pn,An){var Rn=Yn(An),jn=Qe[pn+=255&Rn].g-8;return 0<jn&&(sr(An,An.u+8),Rn=Yn(An),pn+=Qe[pn].value,pn+=Rn&(1<<jn)-1),sr(An,An.u+Qe[pn].g),Qe[pn].value}function Os(Qe,pn,An){return An.g+=Qe.g,An.value+=Qe.value<<pn>>>0,e(8>=An.g),Qe.g}function Ts(Qe,pn,An){var Rn=Qe.xc;return e((pn=Rn==0?0:Qe.vc[Qe.md*(An>>Rn)+(pn>>Rn)])<Qe.Wb),Qe.Ya[pn]}function ra(Qe,pn,An,Rn){var jn=Qe.ab,zn=Qe.c*pn,Wn=Qe.C;pn=Wn+pn;var Kn=An,Qn=Rn;for(Rn=Qe.Ta,An=Qe.Ua;0<jn--;){var er=Qe.gc[jn],dr=Wn,Ar=pn,nr=Kn,fr=Qn,xr=(Qn=Rn,Kn=An,er.Ea);switch(e(dr<Ar),e(Ar<=er.nc),er.hc){case 2:yu(nr,fr,(Ar-dr)*xr,Qn,Kn);break;case 0:var jr=dr,Pr=Ar,Dr=Qn,Vr=Kn,Ur=(Pi=er).Ea;jr==0&&(Da(nr,fr,null,null,1,Dr,Vr),Fr(nr,fr+1,0,0,Ur-1,Dr,Vr+1),fr+=Ur,Vr+=Ur,++jr);for(var qr=1<<Pi.b,Mi=qr-1,Ti=Wr(Ur,Pi.b),ss=Pi.K,Pi=Pi.w+(jr>>Pi.b)*Ti;jr<Pr;){var ms=ss,vo=Pi,ls=1;for(Fa(nr,fr,Dr,Vr-Ur,1,Dr,Vr);ls<Ur;){var Ei=(ls&~Mi)+qr;Ei>Ur&&(Ei=Ur),(0,Dl[ms[vo++]>>8&15])(nr,fr+ +ls,Dr,Vr+ls-Ur,Ei-ls,Dr,Vr+ls),ls=Ei}fr+=Ur,Vr+=Ur,++jr&Mi||(Pi+=Ti)}Ar!=er.nc&&Te(Qn,Kn-xr,Qn,Kn+(Ar-dr-1)*xr,xr);break;case 1:for(xr=nr,Pr=fr,Ur=(nr=er.Ea)-(Vr=nr&~(Dr=(fr=1<<er.b)-1)),jr=Wr(nr,er.b),qr=er.K,er=er.w+(dr>>er.b)*jr;dr<Ar;){for(Mi=qr,Ti=er,ss=new gi,Pi=Pr+Vr,ms=Pr+nr;Pr<Pi;)Kr(Mi[Ti++],ss),xl(ss,xr,Pr,fr,Qn,Kn),Pr+=fr,Kn+=fr;Pr<ms&&(Kr(Mi[Ti++],ss),xl(ss,xr,Pr,Ur,Qn,Kn),Pr+=Ur,Kn+=Ur),++dr&Dr||(er+=jr)}break;case 3:if(nr==Qn&&fr==Kn&&0<er.b){for(Pr=Qn,nr=xr=Kn+(Ar-dr)*xr-(Vr=(Ar-dr)*Wr(er.Ea,er.b)),fr=Qn,Dr=Kn,jr=[],Vr=(Ur=Vr)-1;0<=Vr;--Vr)jr[Vr]=fr[Dr+Vr];for(Vr=Ur-1;0<=Vr;--Vr)Pr[nr+Vr]=jr[Vr];Ql(er,dr,Ar,Qn,xr,Qn,Kn)}else Ql(er,dr,Ar,nr,fr,Qn,Kn)}Kn=Rn,Qn=An}Qn!=An&&Te(Rn,An,Kn,Qn,zn)}function ua(Qe,pn){var An=Qe.V,Rn=Qe.Ba+Qe.c*Qe.C,jn=pn-Qe.C;if(e(pn<=Qe.l.o),e(16>=jn),0<jn){var zn=Qe.l,Wn=Qe.Ta,Kn=Qe.Ua,Qn=zn.width;if(ra(Qe,jn,An,Rn),jn=Kn=[Kn],e((An=Qe.C)<(Rn=pn)),e(zn.v<zn.va),Rn>zn.o&&(Rn=zn.o),An<zn.j){var er=zn.j-An;An=zn.j,jn[0]+=er*Qn}if(An>=Rn?An=0:(jn[0]+=4*zn.v,zn.ka=An-zn.j,zn.U=zn.va-zn.v,zn.T=Rn-An,An=1),An){if(Kn=Kn[0],11>(An=Qe.ca).S){var dr=An.f.RGBA,Ar=(Rn=An.S,jn=zn.U,zn=zn.T,er=dr.eb,dr.A),nr=zn;for(dr=dr.fb+Qe.Ma*dr.A;0<nr--;){var fr=Wn,xr=Kn,jr=jn,Pr=er,Dr=dr;switch(Rn){case dc:vu(fr,xr,jr,Pr,Dr);break;case Jl:Va(fr,xr,jr,Pr,Dr);break;case Eu:Va(fr,xr,jr,Pr,Dr),lu(Pr,Dr,0,jr,1,0);break;case od:Gs(fr,xr,jr,Pr,Dr);break;case zu:wi(fr,xr,jr,Pr,Dr,1);break;case uu:wi(fr,xr,jr,Pr,Dr,1),lu(Pr,Dr,0,jr,1,0);break;case qu:wi(fr,xr,jr,Pr,Dr,0);break;case Wu:wi(fr,xr,jr,Pr,Dr,0),lu(Pr,Dr,1,jr,1,0);break;case $s:Tl(fr,xr,jr,Pr,Dr);break;case Hu:Tl(fr,xr,jr,Pr,Dr),Nc(Pr,Dr,jr,1,0);break;case hc:Hs(fr,xr,jr,Pr,Dr);break;default:e(0)}Kn+=Qn,dr+=Ar}Qe.Ma+=zn}else alert("todo:EmitRescaledRowsYUVA");e(Qe.Ma<=An.height)}}Qe.C=pn,e(Qe.C<=Qe.i)}function po(Qe){var pn;if(0<Qe.ua)return 0;for(pn=0;pn<Qe.Wb;++pn){var An=Qe.Ya[pn].G,Rn=Qe.Ya[pn].H;if(0<An[1][Rn[1]+0].g||0<An[2][Rn[2]+0].g||0<An[3][Rn[3]+0].g)return 0}return 1}function Gn(Qe,pn,An,Rn,jn,zn){if(Qe.Z!=0){var Wn=Qe.qd,Kn=Qe.rd;for(e(pa[Qe.Z]!=null);pn<An;++pn)pa[Qe.Z](Wn,Kn,Rn,jn,Rn,jn,zn),Wn=Rn,Kn=jn,jn+=zn;Qe.qd=Wn,Qe.rd=Kn}}function ir(Qe,pn){var An=Qe.l.ma,Rn=An.Z==0||An.Z==1?Qe.l.j:Qe.C;if(Rn=Qe.C<Rn?Rn:Qe.C,e(pn<=Qe.l.o),pn>Rn){var jn=Qe.l.width,zn=An.ca,Wn=An.tb+jn*Rn,Kn=Qe.V,Qn=Qe.Ba+Qe.c*Rn,er=Qe.gc;e(Qe.ab==1),e(er[0].hc==3),su(er[0],Rn,pn,Kn,Qn,zn,Wn),Gn(An,Rn,pn,zn,Wn,jn)}Qe.C=Qe.Ma=pn}function cr(Qe,pn,An,Rn,jn,zn,Wn){var Kn=Qe.$/Rn,Qn=Qe.$%Rn,er=Qe.m,dr=Qe.s,Ar=An+Qe.$,nr=Ar;jn=An+Rn*jn;var fr=An+Rn*zn,xr=280+dr.ua,jr=Qe.Pb?Kn:16777216,Pr=0<dr.ua?dr.Wa:null,Dr=dr.wc,Vr=Ar<fr?Ts(dr,Qn,Kn):null;e(Qe.C<zn),e(fr<=jn);var Ur=!1;e:for(;;){for(;Ur||Ar<fr;){var qr=0;if(Kn>=jr){var Mi=Ar-An;e((jr=Qe).Pb),jr.wd=jr.m,jr.xd=Mi,0<jr.s.ua&&Ni(jr.s.Wa,jr.s.vb),jr=Kn+pc}if(Qn&Dr||(Vr=Ts(dr,Qn,Kn)),e(Vr!=null),Vr.Qb&&(pn[Ar]=Vr.qb,Ur=!0),!Ur)if(lr(er),Vr.jc){qr=er,Mi=pn;var Ti=Ar,ss=Vr.pd[Yn(qr)&Sa-1];e(Vr.jc),256>ss.g?(sr(qr,qr.u+ss.g),Mi[Ti]=ss.value,qr=0):(sr(qr,qr.u+ss.g-256),e(256<=ss.value),qr=ss.value),qr==0&&(Ur=!0)}else qr=xs(Vr.G[0],Vr.H[0],er);if(er.h)break;if(Ur||256>qr){if(!Ur)if(Vr.nd)pn[Ar]=(Vr.qb|qr<<8)>>>0;else{if(lr(er),Ur=xs(Vr.G[1],Vr.H[1],er),lr(er),Mi=xs(Vr.G[2],Vr.H[2],er),Ti=xs(Vr.G[3],Vr.H[3],er),er.h)break;pn[Ar]=(Ti<<24|Ur<<16|qr<<8|Mi)>>>0}if(Ur=!1,++Ar,++Qn>=Rn&&(Qn=0,++Kn,Wn!=null&&Kn<=zn&&!(Kn%16)&&Wn(Qe,Kn),Pr!=null))for(;nr<Ar;)qr=pn[nr++],Pr.X[(506832829*qr&4294967295)>>>Pr.Mb]=qr}else if(280>qr){if(qr=Ls(qr-256,er),Mi=xs(Vr.G[4],Vr.H[4],er),lr(er),Mi=eo(Rn,Mi=Ls(Mi,er)),er.h)break;if(Ar-An<Mi||jn-Ar<qr)break e;for(Ti=0;Ti<qr;++Ti)pn[Ar+Ti]=pn[Ar+Ti-Mi];for(Ar+=qr,Qn+=qr;Qn>=Rn;)Qn-=Rn,++Kn,Wn!=null&&Kn<=zn&&!(Kn%16)&&Wn(Qe,Kn);if(e(Ar<=jn),Qn&Dr&&(Vr=Ts(dr,Qn,Kn)),Pr!=null)for(;nr<Ar;)qr=pn[nr++],Pr.X[(506832829*qr&4294967295)>>>Pr.Mb]=qr}else{if(!(qr<xr))break e;for(Ur=qr-280,e(Pr!=null);nr<Ar;)qr=pn[nr++],Pr.X[(506832829*qr&4294967295)>>>Pr.Mb]=qr;qr=Ar,e(!(Ur>>>(Mi=Pr).Xa)),pn[qr]=Mi.X[Ur],Ur=!0}Ur||e(er.h==Jn(er))}if(Qe.Pb&&er.h&&Ar<jn)e(Qe.m.h),Qe.a=5,Qe.m=Qe.wd,Qe.$=Qe.xd,0<Qe.s.ua&&Ni(Qe.s.vb,Qe.s.Wa);else{if(er.h)break e;Wn?.(Qe,Kn>zn?zn:Kn),Qe.a=0,Qe.$=Ar-An}return 1}return Qe.a=3,0}function _r(Qe){e(Qe!=null),Qe.vc=null,Qe.yc=null,Qe.Ya=null;var pn=Qe.Wa;pn!=null&&(pn.X=null),Qe.vb=null,e(Qe!=null)}function Ir(){var Qe=new Ws;return Qe==null?null:(Qe.a=0,Qe.xb=Su,Ri("Predictor","VP8LPredictors"),Ri("Predictor","VP8LPredictors_C"),Ri("PredictorAdd","VP8LPredictorsAdd"),Ri("PredictorAdd","VP8LPredictorsAdd_C"),yu=Qr,xl=si,vu=Li,Va=$i,Tl=zr,Hs=Ii,Gs=Ui,dn.VP8LMapColor32b=bu,dn.VP8LMapColor8b=Ll,Qe)}function Or(Qe,pn,An,Rn,jn){var zn=1,Wn=[Qe],Kn=[pn],Qn=Rn.m,er=Rn.s,dr=null,Ar=0;e:for(;;){if(An)for(;zn&&Un(Qn,1);){var nr=Wn,fr=Kn,xr=Rn,jr=1,Pr=xr.m,Dr=xr.gc[xr.ab],Vr=Un(Pr,2);if(xr.Oc&1<<Vr)zn=0;else{switch(xr.Oc|=1<<Vr,Dr.hc=Vr,Dr.Ea=nr[0],Dr.nc=fr[0],Dr.K=[null],++xr.ab,e(4>=xr.ab),Vr){case 0:case 1:Dr.b=Un(Pr,3)+2,jr=Or(Wr(Dr.Ea,Dr.b),Wr(Dr.nc,Dr.b),0,xr,Dr.K),Dr.K=Dr.K[0];break;case 3:var Ur,qr=Un(Pr,8)+1,Mi=16<qr?0:4<qr?1:2<qr?2:3;if(nr[0]=Wr(Dr.Ea,Mi),Dr.b=Mi,Ur=jr=Or(qr,1,0,xr,Dr.K)){var Ti,ss=qr,Pi=Dr,ms=1<<(8>>Pi.b),vo=Re(ms);if(vo==null)Ur=0;else{var ls=Pi.K[0],Ei=Pi.w;for(vo[0]=Pi.K[0][0],Ti=1;Ti<1*ss;++Ti)vo[Ti]=hi(ls[Ei+Ti],vo[Ti-1]);for(;Ti<4*ms;++Ti)vo[Ti]=0;Pi.K[0]=null,Pi.K[0]=vo,Ur=1}}jr=Ur;break;case 2:break;default:e(0)}zn=jr}}if(Wn=Wn[0],Kn=Kn[0],zn&&Un(Qn,1)&&!(zn=1<=(Ar=Un(Qn,4))&&11>=Ar)){Rn.a=3;break e}var di;if(di=zn)t:{var ko,Zi,ds,Ks=Rn,Zo=Wn,$o=Kn,fo=Ar,Go=An,ea=Ks.m,oo=Ks.s,vs=[null],Is=1,uo=0,ks=ld[fo];n:for(;;){if(Go&&Un(ea,1)){var wo=Un(ea,3)+2,xo=Wr(Zo,wo),Bs=Wr($o,wo),ma=xo*Bs;if(!Or(xo,Bs,0,Ks,vs))break n;for(vs=vs[0],oo.xc=wo,ko=0;ko<ma;++ko){var Vs=vs[ko]>>8&65535;vs[ko]=Vs,Vs>=Is&&(Is=Vs+1)}}if(ea.h)break n;for(Zi=0;5>Zi;++Zi){var Us=cu[Zi];!Zi&&0<fo&&(Us+=1<<fo),uo<Us&&(uo=Us)}var Bo=Ce(Is*ks,En),aa=Is,za=Ce(aa,Nn);if(za==null)var Ro=null;else e(65536>=aa),Ro=za;var Co=Re(uo);if(Ro==null||Co==null||Bo==null){Ks.a=1;break n}var ga=Bo;for(ko=ds=0;ko<Is;++ko){var zs=Ro[ko],ya=zs.G,sl=zs.H,ml=0,ta=1,Oo=0;for(Zi=0;5>Zi;++Zi){Us=cu[Zi],ya[Zi]=ga,sl[Zi]=ds,!Zi&&0<fo&&(Us+=1<<fo);i:{var tu,jl=Us,ku=Ks,Pl=Co,fd=ga,Wc=ds,Js=0,gl=ku.m,Hc=Un(gl,1);if(Ee(Pl,0,0,jl),Hc){var Gc=Un(gl,1)+1,gc=Un(gl,1),_c=Un(gl,gc==0?1:8);Pl[_c]=1,Gc==2&&(Pl[_c=Un(gl,8)]=1);var Il=1}else{var co=Re(19),Uo=Un(gl,4)+4;if(19<Uo){ku.a=3;var No=0;break i}for(tu=0;tu<Uo;++tu)co[$d[tu]]=Un(gl,3);var Ru=void 0,$l=void 0,Cu=ku,Hd=co,Ko=jl,yc=Pl,Qu=0,kl=Cu.m,_l=8,Ka=Ce(128,En);r:for(;Tn(Ka,0,7,Hd,19);){if(Un(kl,1)){var Ju=2+2*Un(kl,3);if((Ru=2+Un(kl,Ju))>Ko)break r}else Ru=Ko;for($l=0;$l<Ko&&Ru--;){lr(kl);var bc=Ka[0+(127&Yn(kl))];sr(kl,kl.u+bc.g);var nu=bc.value;if(16>nu)yc[$l++]=nu,nu!=0&&(_l=nu);else{var pd=nu==16,Kc=nu-16,md=fc[Kc],Yc=Un(kl,Gu[Kc])+md;if($l+Yc>Ko)break r;for(var gd=pd?_l:0;0<Yc--;)yc[$l++]=gd}}Qu=1;break r}Qu||(Cu.a=3),Il=Qu}(Il=Il&&!gl.h)&&(Js=Tn(fd,Wc,8,Pl,jl)),Il&&Js!=0?No=Js:(ku.a=3,No=0)}if(No==0)break n;if(ta&&ad[Zi]==1&&(ta=ga[ds].g==0),ml+=ga[ds].g,ds+=No,3>=Zi){var Ou,vc=Co[0];for(Ou=1;Ou<Us;++Ou)Co[Ou]>vc&&(vc=Co[Ou]);Oo+=vc}}if(zs.nd=ta,zs.Qb=0,ta&&(zs.qb=(ya[3][sl[3]+0].value<<24|ya[1][sl[1]+0].value<<16|ya[2][sl[2]+0].value)>>>0,ml==0&&256>ya[0][sl[0]+0].value&&(zs.Qb=1,zs.qb+=ya[0][sl[0]+0].value<<8)),zs.jc=!zs.Qb&&6>Oo,zs.jc){var Zu,Ya=zs;for(Zu=0;Zu<Sa;++Zu){var Bl=Zu,yl=Ya.pd[Bl],mu=Ya.G[0][Ya.H[0]+Bl];256<=mu.value?(yl.g=mu.g+256,yl.value=mu.value):(yl.g=0,yl.value=0,Bl>>=Os(mu,8,yl),Bl>>=Os(Ya.G[1][Ya.H[1]+Bl],16,yl),Bl>>=Os(Ya.G[2][Ya.H[2]+Bl],0,yl),Os(Ya.G[3][Ya.H[3]+Bl],24,yl))}}}oo.vc=vs,oo.Wb=Is,oo.Ya=Ro,oo.yc=Bo,di=1;break t}di=0}if(!(zn=di)){Rn.a=3;break e}if(0<Ar){if(er.ua=1<<Ar,!rr(er.Wa,Ar)){Rn.a=1,zn=0;break e}}else er.ua=0;var wc=Rn,xc=Wn,_d=Kn,Tc=wc.s,Ec=Tc.xc;if(wc.c=xc,wc.i=_d,Tc.md=Wr(xc,Ec),Tc.wc=Ec==0?-1:(1<<Ec)-1,An){Rn.xb=Sl;break e}if((dr=Re(Wn*Kn))==null){Rn.a=1,zn=0;break e}zn=(zn=cr(Rn,dr,0,Wn,Kn,Kn,null))&&!Qn.h;break e}return zn?(jn!=null?jn[0]=dr:(e(dr==null),e(An)),Rn.$=0,An||_r(er)):_r(er),zn}function Zr(Qe,pn){var An=Qe.c*Qe.i,Rn=An+pn+16*pn;return e(Qe.c<=pn),Qe.V=Re(Rn),Qe.V==null?(Qe.Ta=null,Qe.Ua=0,Qe.a=1,0):(Qe.Ta=Qe.V,Qe.Ua=Qe.Ba+An+pn,1)}function yi(Qe,pn){var An=Qe.C,Rn=pn-An,jn=Qe.V,zn=Qe.Ba+Qe.c*An;for(e(pn<=Qe.l.o);0<Rn;){var Wn=16<Rn?16:Rn,Kn=Qe.l.ma,Qn=Qe.l.width,er=Qn*Wn,dr=Kn.ca,Ar=Kn.tb+Qn*An,nr=Qe.Ta,fr=Qe.Ua;ra(Qe,Wn,jn,zn),Mc(nr,fr,dr,Ar,er),Gn(Kn,An,An+Wn,dr,Ar,Qn),Rn-=Wn,jn+=Wn*Qe.c,An+=Wn}e(An==pn),Qe.C=Qe.Ma=pn}function pi(){this.ub=this.yd=this.td=this.Rb=0}function zi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _s(){this.Fb=this.Bb=this.Cb=0,this.Zb=Re(4),this.Lb=Re(4)}function Gi(){this.Yb=function(){var Qe=[];return function pn(An,Rn,jn){for(var zn=jn[Rn],Wn=0;Wn<zn&&(An.push(jn.length>Rn+1?[]:0),!(jn.length<Rn+1));Wn++)pn(An[Wn],Rn+1,jn)}(Qe,0,[3,11]),Qe}()}function js(){this.jb=Re(3),this.Wc=De([4,8],Gi),this.Xc=De([4,17],Gi)}function Nr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Re(4),this.od=new Re(4)}function Vi(){this.ld=this.La=this.dd=this.tc=0}function is(){this.Na=this.la=0}function Eo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xo(){this.ad=Re(384),this.Za=0,this.Ob=Re(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ca(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vi),this.Y=0,this.ya=Array(new Xo),this.aa=0,this.l=new ys}function Lo(){this.y=Re(16),this.f=Re(8),this.ea=Re(8)}function vl(){this.cb=this.a=0,this.sc="",this.m=new Cn,this.Od=new pi,this.Kc=new zi,this.ed=new Nr,this.Qa=new _s,this.Ic=this.$c=this.Aa=0,this.D=new Ca,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Ce(8,Cn),this.ia=0,this.pb=Ce(4,Eo),this.Pa=new js,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Lo),this.Hd=0,this.rb=Array(new is),this.sb=0,this.wa=Array(new Vi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xo),this.L=this.aa=0,this.gd=De([4,2],Vi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ys(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ja(){var Qe=new vl;return Qe!=null&&(Qe.a=0,Qe.sc="OK",Qe.cb=0,Qe.Xb=0,du||(du=ca)),Qe}function qs(Qe,pn,An){return Qe.a==0&&(Qe.a=pn,Qe.sc=An,Qe.cb=0),0}function wl(Qe,pn,An){return 3<=An&&Qe[pn+0]==157&&Qe[pn+1]==1&&Qe[pn+2]==42}function Za(Qe,pn){if(Qe==null)return 0;if(Qe.a=0,Qe.sc="OK",pn==null)return qs(Qe,2,"null VP8Io passed to VP8GetHeaders()");var An=pn.data,Rn=pn.w,jn=pn.ha;if(4>jn)return qs(Qe,7,"Truncated header.");var zn=An[Rn+0]|An[Rn+1]<<8|An[Rn+2]<<16,Wn=Qe.Od;if(Wn.Rb=!(1&zn),Wn.td=zn>>1&7,Wn.yd=zn>>4&1,Wn.ub=zn>>5,3<Wn.td)return qs(Qe,3,"Incorrect keyframe parameters.");if(!Wn.yd)return qs(Qe,4,"Frame not displayable.");Rn+=3,jn-=3;var Kn=Qe.Kc;if(Wn.Rb){if(7>jn)return qs(Qe,7,"cannot parse picture header");if(!wl(An,Rn,jn))return qs(Qe,3,"Bad code word");Kn.c=16383&(An[Rn+4]<<8|An[Rn+3]),Kn.Td=An[Rn+4]>>6,Kn.i=16383&(An[Rn+6]<<8|An[Rn+5]),Kn.Ud=An[Rn+6]>>6,Rn+=7,jn-=7,Qe.za=Kn.c+15>>4,Qe.Ub=Kn.i+15>>4,pn.width=Kn.c,pn.height=Kn.i,pn.Da=0,pn.j=0,pn.v=0,pn.va=pn.width,pn.o=pn.height,pn.da=0,pn.ib=pn.width,pn.hb=pn.height,pn.U=pn.width,pn.T=pn.height,Ee((zn=Qe.Pa).jb,0,255,zn.jb.length),e((zn=Qe.Qa)!=null),zn.Cb=0,zn.Bb=0,zn.Fb=1,Ee(zn.Zb,0,0,zn.Zb.length),Ee(zn.Lb,0,0,zn.Lb)}if(Wn.ub>jn)return qs(Qe,7,"bad partition length");On(zn=Qe.m,An,Rn,Wn.ub),Rn+=Wn.ub,jn-=Wn.ub,Wn.Rb&&(Kn.Ld=gr(zn),Kn.Kd=gr(zn)),Kn=Qe.Qa;var Qn,er=Qe.Pa;if(e(zn!=null),e(Kn!=null),Kn.Cb=gr(zn),Kn.Cb){if(Kn.Bb=gr(zn),gr(zn)){for(Kn.Fb=gr(zn),Qn=0;4>Qn;++Qn)Kn.Zb[Qn]=gr(zn)?$n(zn,7):0;for(Qn=0;4>Qn;++Qn)Kn.Lb[Qn]=gr(zn)?$n(zn,6):0}if(Kn.Bb)for(Qn=0;3>Qn;++Qn)er.jb[Qn]=gr(zn)?Fn(zn,8):255}else Kn.Bb=0;if(zn.Ka)return qs(Qe,3,"cannot parse segment header");if((Kn=Qe.ed).zd=gr(zn),Kn.Tb=Fn(zn,6),Kn.wb=Fn(zn,3),Kn.Pc=gr(zn),Kn.Pc&&gr(zn)){for(er=0;4>er;++er)gr(zn)&&(Kn.vd[er]=$n(zn,6));for(er=0;4>er;++er)gr(zn)&&(Kn.od[er]=$n(zn,6))}if(Qe.L=Kn.Tb==0?0:Kn.zd?1:2,zn.Ka)return qs(Qe,3,"cannot parse filter header");var dr=jn;if(jn=Qn=Rn,Rn=Qn+dr,Kn=dr,Qe.Xb=(1<<Fn(Qe.m,2))-1,dr<3*(er=Qe.Xb))An=7;else{for(Qn+=3*er,Kn-=3*er,dr=0;dr<er;++dr){var Ar=An[jn+0]|An[jn+1]<<8|An[jn+2]<<16;Ar>Kn&&(Ar=Kn),On(Qe.Jc[+dr],An,Qn,Ar),Qn+=Ar,Kn-=Ar,jn+=3}On(Qe.Jc[+er],An,Qn,Kn),An=Qn<Rn?0:5}if(An!=0)return qs(Qe,An,"cannot parse partitions");for(An=Fn(Qn=Qe.m,7),jn=gr(Qn)?$n(Qn,4):0,Rn=gr(Qn)?$n(Qn,4):0,Kn=gr(Qn)?$n(Qn,4):0,er=gr(Qn)?$n(Qn,4):0,Qn=gr(Qn)?$n(Qn,4):0,dr=Qe.Qa,Ar=0;4>Ar;++Ar){if(dr.Cb){var nr=dr.Zb[Ar];dr.Fb||(nr+=An)}else{if(0<Ar){Qe.pb[Ar]=Qe.pb[0];continue}nr=An}var fr=Qe.pb[Ar];fr.Sc[0]=Au[ps(nr+jn,127)],fr.Sc[1]=Ku[ps(nr+0,127)],fr.Eb[0]=2*Au[ps(nr+Rn,127)],fr.Eb[1]=101581*Ku[ps(nr+Kn,127)]>>16,8>fr.Eb[1]&&(fr.Eb[1]=8),fr.Qc[0]=Au[ps(nr+er,117)],fr.Qc[1]=Ku[ps(nr+Qn,127)],fr.lc=nr+Qn}if(!Wn.Rb)return qs(Qe,4,"Not a key frame.");for(gr(zn),Wn=Qe.Pa,An=0;4>An;++An){for(jn=0;8>jn;++jn)for(Rn=0;3>Rn;++Rn)for(Kn=0;11>Kn;++Kn)er=Er(zn,zd[An][jn][Rn][Kn])?Fn(zn,8):cd[An][jn][Rn][Kn],Wn.Wc[An][jn].Yb[Rn][Kn]=er;for(jn=0;17>jn;++jn)Wn.Xc[An][jn]=Wn.Wc[An][Uc[jn]]}return Qe.kc=gr(zn),Qe.kc&&(Qe.Bd=Fn(zn,8)),Qe.cb=1}function ca(Qe,pn,An,Rn,jn,zn,Wn){var Kn=pn[jn].Yb[An];for(An=0;16>jn;++jn){if(!Er(Qe,Kn[An+0]))return jn;for(;!Er(Qe,Kn[An+1]);)if(Kn=pn[++jn].Yb[0],An=0,jn==16)return 16;var Qn=pn[jn+1].Yb;if(Er(Qe,Kn[An+2])){var er=Qe,dr=0;if(Er(er,(nr=Kn)[(Ar=An)+3]))if(Er(er,nr[Ar+6])){for(Kn=0,Ar=2*(dr=Er(er,nr[Ar+8]))+(nr=Er(er,nr[Ar+9+dr])),dr=0,nr=$c[Ar];nr[Kn];++Kn)dr+=dr+Er(er,nr[Kn]);dr+=3+(8<<Ar)}else Er(er,nr[Ar+7])?(dr=7+2*Er(er,165),dr+=Er(er,145)):dr=5+Er(er,159);else dr=Er(er,nr[Ar+4])?3+Er(er,nr[Ar+5]):2;Kn=Qn[2]}else dr=1,Kn=Qn[1];Qn=Wn+Bc[jn],0>(er=Qe).b&&mr(er);var Ar,nr=er.b,fr=(Ar=er.Ca>>1)-(er.I>>nr)>>31;--er.b,er.Ca+=fr,er.Ca|=1,er.I-=(Ar+1&fr)<<nr,zn[Qn]=((dr^fr)-fr)*Rn[(0<jn)+0]}return 16}function da(Qe){var pn=Qe.rb[Qe.sb-1];pn.la=0,pn.Na=0,Ee(Qe.zc,0,0,Qe.zc.length),Qe.ja=0}function mo(Qe,pn,An,Rn,jn){jn=Qe[pn+An+32*Rn]+(jn>>3),Qe[pn+An+32*Rn]=-256&jn?0>jn?0:255:jn}function Ha(Qe,pn,An,Rn,jn,zn){mo(Qe,pn,0,An,Rn+jn),mo(Qe,pn,1,An,Rn+zn),mo(Qe,pn,2,An,Rn-zn),mo(Qe,pn,3,An,Rn-jn)}function As(Qe){return(20091*Qe>>16)+Qe}function Do(Qe,pn,An,Rn){var jn,zn=0,Wn=Re(16);for(jn=0;4>jn;++jn){var Kn=Qe[pn+0]+Qe[pn+8],Qn=Qe[pn+0]-Qe[pn+8],er=(35468*Qe[pn+4]>>16)-As(Qe[pn+12]),dr=As(Qe[pn+4])+(35468*Qe[pn+12]>>16);Wn[zn+0]=Kn+dr,Wn[zn+1]=Qn+er,Wn[zn+2]=Qn-er,Wn[zn+3]=Kn-dr,zn+=4,pn++}for(jn=zn=0;4>jn;++jn)Kn=(Qe=Wn[zn+0]+4)+Wn[zn+8],Qn=Qe-Wn[zn+8],er=(35468*Wn[zn+4]>>16)-As(Wn[zn+12]),mo(An,Rn,0,0,Kn+(dr=As(Wn[zn+4])+(35468*Wn[zn+12]>>16))),mo(An,Rn,1,0,Qn+er),mo(An,Rn,2,0,Qn-er),mo(An,Rn,3,0,Kn-dr),zn++,Rn+=32}function el(Qe,pn,An,Rn){var jn=Qe[pn+0]+4,zn=35468*Qe[pn+4]>>16,Wn=As(Qe[pn+4]),Kn=35468*Qe[pn+1]>>16;Ha(An,Rn,0,jn+Wn,Qe=As(Qe[pn+1]),Kn),Ha(An,Rn,1,jn+zn,Qe,Kn),Ha(An,Rn,2,jn-zn,Qe,Kn),Ha(An,Rn,3,jn-Wn,Qe,Kn)}function Ga(Qe,pn,An,Rn,jn){Do(Qe,pn,An,Rn),jn&&Do(Qe,pn+16,An,Rn+4)}function wa(Qe,pn,An,Rn){Io(Qe,pn+0,An,Rn,1),Io(Qe,pn+32,An,Rn+128,1)}function us(Qe,pn,An,Rn){var jn;for(Qe=Qe[pn+0]+4,jn=0;4>jn;++jn)for(pn=0;4>pn;++pn)mo(An,Rn,pn,jn,Qe)}function Oa(Qe,pn,An,Rn){Qe[pn+0]&&hl(Qe,pn+0,An,Rn),Qe[pn+16]&&hl(Qe,pn+16,An,Rn+4),Qe[pn+32]&&hl(Qe,pn+32,An,Rn+128),Qe[pn+48]&&hl(Qe,pn+48,An,Rn+128+4)}function os(Qe,pn,An,Rn){var jn,zn=Re(16);for(jn=0;4>jn;++jn){var Wn=Qe[pn+0+jn]+Qe[pn+12+jn],Kn=Qe[pn+4+jn]+Qe[pn+8+jn],Qn=Qe[pn+4+jn]-Qe[pn+8+jn],er=Qe[pn+0+jn]-Qe[pn+12+jn];zn[0+jn]=Wn+Kn,zn[8+jn]=Wn-Kn,zn[4+jn]=er+Qn,zn[12+jn]=er-Qn}for(jn=0;4>jn;++jn)Wn=(Qe=zn[0+4*jn]+3)+zn[3+4*jn],Kn=zn[1+4*jn]+zn[2+4*jn],Qn=zn[1+4*jn]-zn[2+4*jn],er=Qe-zn[3+4*jn],An[Rn+0]=Wn+Kn>>3,An[Rn+16]=er+Qn>>3,An[Rn+32]=Wn-Kn>>3,An[Rn+48]=er-Qn>>3,Rn+=64}function Qo(Qe,pn,An){var Rn,jn=pn-32,zn=Pa,Wn=255-Qe[jn-1];for(Rn=0;Rn<An;++Rn){var Kn,Qn=zn,er=Wn+Qe[pn-1];for(Kn=0;Kn<An;++Kn)Qe[pn+Kn]=Qn[er+Qe[jn+Kn]];pn+=32}}function Xi(Qe,pn){Qo(Qe,pn,4)}function ul(Qe,pn){Qo(Qe,pn,8)}function es(Qe,pn){Qo(Qe,pn,16)}function Qi(Qe,pn){var An;for(An=0;16>An;++An)Te(Qe,pn+32*An,Qe,pn-32,16)}function tl(Qe,pn){var An;for(An=16;0<An;--An)Ee(Qe,pn,Qe[pn-1],16),pn+=32}function ha(Qe,pn,An){var Rn;for(Rn=0;16>Rn;++Rn)Ee(pn,An+32*Rn,Qe,16)}function Fo(Qe,pn){var An,Rn=16;for(An=0;16>An;++An)Rn+=Qe[pn-1+32*An]+Qe[pn+An-32];ha(Rn>>5,Qe,pn)}function go(Qe,pn){var An,Rn=8;for(An=0;16>An;++An)Rn+=Qe[pn-1+32*An];ha(Rn>>4,Qe,pn)}function Vo(Qe,pn){var An,Rn=8;for(An=0;16>An;++An)Rn+=Qe[pn+An-32];ha(Rn>>4,Qe,pn)}function Jo(Qe,pn){ha(128,Qe,pn)}function ji(Qe,pn,An){return Qe+2*pn+An+2>>2}function ia(Qe,pn){var An,Rn=pn-32;for(Rn=new Uint8Array([ji(Qe[Rn-1],Qe[Rn+0],Qe[Rn+1]),ji(Qe[Rn+0],Qe[Rn+1],Qe[Rn+2]),ji(Qe[Rn+1],Qe[Rn+2],Qe[Rn+3]),ji(Qe[Rn+2],Qe[Rn+3],Qe[Rn+4])]),An=0;4>An;++An)Te(Qe,pn+32*An,Rn,0,Rn.length)}function xa(Qe,pn){var An=Qe[pn-1],Rn=Qe[pn-1+32],jn=Qe[pn-1+64],zn=Qe[pn-1+96];$r(Qe,pn+0,16843009*ji(Qe[pn-1-32],An,Rn)),$r(Qe,pn+32,16843009*ji(An,Rn,jn)),$r(Qe,pn+64,16843009*ji(Rn,jn,zn)),$r(Qe,pn+96,16843009*ji(jn,zn,zn))}function Hl(Qe,pn){var An,Rn=4;for(An=0;4>An;++An)Rn+=Qe[pn+An-32]+Qe[pn-1+32*An];for(Rn>>=3,An=0;4>An;++An)Ee(Qe,pn+32*An,Rn,4)}function Ol(Qe,pn){var An=Qe[pn-1+0],Rn=Qe[pn-1+32],jn=Qe[pn-1+64],zn=Qe[pn-1-32],Wn=Qe[pn+0-32],Kn=Qe[pn+1-32],Qn=Qe[pn+2-32],er=Qe[pn+3-32];Qe[pn+0+96]=ji(Rn,jn,Qe[pn-1+96]),Qe[pn+1+96]=Qe[pn+0+64]=ji(An,Rn,jn),Qe[pn+2+96]=Qe[pn+1+64]=Qe[pn+0+32]=ji(zn,An,Rn),Qe[pn+3+96]=Qe[pn+2+64]=Qe[pn+1+32]=Qe[pn+0+0]=ji(Wn,zn,An),Qe[pn+3+64]=Qe[pn+2+32]=Qe[pn+1+0]=ji(Kn,Wn,zn),Qe[pn+3+32]=Qe[pn+2+0]=ji(Qn,Kn,Wn),Qe[pn+3+0]=ji(er,Qn,Kn)}function Ys(Qe,pn){var An=Qe[pn+1-32],Rn=Qe[pn+2-32],jn=Qe[pn+3-32],zn=Qe[pn+4-32],Wn=Qe[pn+5-32],Kn=Qe[pn+6-32],Qn=Qe[pn+7-32];Qe[pn+0+0]=ji(Qe[pn+0-32],An,Rn),Qe[pn+1+0]=Qe[pn+0+32]=ji(An,Rn,jn),Qe[pn+2+0]=Qe[pn+1+32]=Qe[pn+0+64]=ji(Rn,jn,zn),Qe[pn+3+0]=Qe[pn+2+32]=Qe[pn+1+64]=Qe[pn+0+96]=ji(jn,zn,Wn),Qe[pn+3+32]=Qe[pn+2+64]=Qe[pn+1+96]=ji(zn,Wn,Kn),Qe[pn+3+64]=Qe[pn+2+96]=ji(Wn,Kn,Qn),Qe[pn+3+96]=ji(Kn,Qn,Qn)}function Na(Qe,pn){var An=Qe[pn-1+0],Rn=Qe[pn-1+32],jn=Qe[pn-1+64],zn=Qe[pn-1-32],Wn=Qe[pn+0-32],Kn=Qe[pn+1-32],Qn=Qe[pn+2-32],er=Qe[pn+3-32];Qe[pn+0+0]=Qe[pn+1+64]=zn+Wn+1>>1,Qe[pn+1+0]=Qe[pn+2+64]=Wn+Kn+1>>1,Qe[pn+2+0]=Qe[pn+3+64]=Kn+Qn+1>>1,Qe[pn+3+0]=Qn+er+1>>1,Qe[pn+0+96]=ji(jn,Rn,An),Qe[pn+0+64]=ji(Rn,An,zn),Qe[pn+0+32]=Qe[pn+1+96]=ji(An,zn,Wn),Qe[pn+1+32]=Qe[pn+2+96]=ji(zn,Wn,Kn),Qe[pn+2+32]=Qe[pn+3+96]=ji(Wn,Kn,Qn),Qe[pn+3+32]=ji(Kn,Qn,er)}function Nl(Qe,pn){var An=Qe[pn+0-32],Rn=Qe[pn+1-32],jn=Qe[pn+2-32],zn=Qe[pn+3-32],Wn=Qe[pn+4-32],Kn=Qe[pn+5-32],Qn=Qe[pn+6-32],er=Qe[pn+7-32];Qe[pn+0+0]=An+Rn+1>>1,Qe[pn+1+0]=Qe[pn+0+64]=Rn+jn+1>>1,Qe[pn+2+0]=Qe[pn+1+64]=jn+zn+1>>1,Qe[pn+3+0]=Qe[pn+2+64]=zn+Wn+1>>1,Qe[pn+0+32]=ji(An,Rn,jn),Qe[pn+1+32]=Qe[pn+0+96]=ji(Rn,jn,zn),Qe[pn+2+32]=Qe[pn+1+96]=ji(jn,zn,Wn),Qe[pn+3+32]=Qe[pn+2+96]=ji(zn,Wn,Kn),Qe[pn+3+64]=ji(Wn,Kn,Qn),Qe[pn+3+96]=ji(Kn,Qn,er)}function Ln(Qe,pn){var An=Qe[pn-1+0],Rn=Qe[pn-1+32],jn=Qe[pn-1+64],zn=Qe[pn-1+96];Qe[pn+0+0]=An+Rn+1>>1,Qe[pn+2+0]=Qe[pn+0+32]=Rn+jn+1>>1,Qe[pn+2+32]=Qe[pn+0+64]=jn+zn+1>>1,Qe[pn+1+0]=ji(An,Rn,jn),Qe[pn+3+0]=Qe[pn+1+32]=ji(Rn,jn,zn),Qe[pn+3+32]=Qe[pn+1+64]=ji(jn,zn,zn),Qe[pn+3+64]=Qe[pn+2+64]=Qe[pn+0+96]=Qe[pn+1+96]=Qe[pn+2+96]=Qe[pn+3+96]=zn}function qn(Qe,pn){var An=Qe[pn-1+0],Rn=Qe[pn-1+32],jn=Qe[pn-1+64],zn=Qe[pn-1+96],Wn=Qe[pn-1-32],Kn=Qe[pn+0-32],Qn=Qe[pn+1-32],er=Qe[pn+2-32];Qe[pn+0+0]=Qe[pn+2+32]=An+Wn+1>>1,Qe[pn+0+32]=Qe[pn+2+64]=Rn+An+1>>1,Qe[pn+0+64]=Qe[pn+2+96]=jn+Rn+1>>1,Qe[pn+0+96]=zn+jn+1>>1,Qe[pn+3+0]=ji(Kn,Qn,er),Qe[pn+2+0]=ji(Wn,Kn,Qn),Qe[pn+1+0]=Qe[pn+3+32]=ji(An,Wn,Kn),Qe[pn+1+32]=Qe[pn+3+64]=ji(Rn,An,Wn),Qe[pn+1+64]=Qe[pn+3+96]=ji(jn,Rn,An),Qe[pn+1+96]=ji(zn,jn,Rn)}function Zn(Qe,pn){var An;for(An=0;8>An;++An)Te(Qe,pn+32*An,Qe,pn-32,8)}function ar(Qe,pn){var An;for(An=0;8>An;++An)Ee(Qe,pn,Qe[pn-1],8),pn+=32}function vr(Qe,pn,An){var Rn;for(Rn=0;8>Rn;++Rn)Ee(pn,An+32*Rn,Qe,8)}function Cr(Qe,pn){var An,Rn=8;for(An=0;8>An;++An)Rn+=Qe[pn+An-32]+Qe[pn-1+32*An];vr(Rn>>4,Qe,pn)}function ni(Qe,pn){var An,Rn=4;for(An=0;8>An;++An)Rn+=Qe[pn+An-32];vr(Rn>>3,Qe,pn)}function ui(Qe,pn){var An,Rn=4;for(An=0;8>An;++An)Rn+=Qe[pn-1+32*An];vr(Rn>>3,Qe,pn)}function ts(Qe,pn){vr(128,Qe,pn)}function Ki(Qe,pn,An){var Rn=Qe[pn-An],jn=Qe[pn+0],zn=3*(jn-Rn)+Al[1020+Qe[pn-2*An]-Qe[pn+An]],Wn=Tu[112+(zn+4>>3)];Qe[pn-An]=Pa[255+Rn+Tu[112+(zn+3>>3)]],Qe[pn+0]=Pa[255+jn-Wn]}function fs(Qe,pn,An,Rn){var jn=Qe[pn+0],zn=Qe[pn+An];return rl[255+Qe[pn-2*An]-Qe[pn-An]]>Rn||rl[255+zn-jn]>Rn}function Ao(Qe,pn,An,Rn){return 4*rl[255+Qe[pn-An]-Qe[pn+0]]+rl[255+Qe[pn-2*An]-Qe[pn+An]]<=Rn}function ho(Qe,pn,An,Rn,jn){var zn=Qe[pn-3*An],Wn=Qe[pn-2*An],Kn=Qe[pn-An],Qn=Qe[pn+0],er=Qe[pn+An],dr=Qe[pn+2*An],Ar=Qe[pn+3*An];return 4*rl[255+Kn-Qn]+rl[255+Wn-er]>Rn?0:rl[255+Qe[pn-4*An]-zn]<=jn&&rl[255+zn-Wn]<=jn&&rl[255+Wn-Kn]<=jn&&rl[255+Ar-dr]<=jn&&rl[255+dr-er]<=jn&&rl[255+er-Qn]<=jn}function Rr(Qe,pn,An,Rn){var jn=2*Rn+1;for(Rn=0;16>Rn;++Rn)Ao(Qe,pn+Rn,An,jn)&&Ki(Qe,pn+Rn,An)}function Yi(Qe,pn,An,Rn){var jn=2*Rn+1;for(Rn=0;16>Rn;++Rn)Ao(Qe,pn+Rn*An,1,jn)&&Ki(Qe,pn+Rn*An,1)}function as(Qe,pn,An,Rn){var jn;for(jn=3;0<jn;--jn)Rr(Qe,pn+=4*An,An,Rn)}function qo(Qe,pn,An,Rn){var jn;for(jn=3;0<jn;--jn)Yi(Qe,pn+=4,An,Rn)}function Xs(Qe,pn,An,Rn,jn,zn,Wn,Kn){for(zn=2*zn+1;0<jn--;){if(ho(Qe,pn,An,zn,Wn))if(fs(Qe,pn,An,Kn))Ki(Qe,pn,An);else{var Qn=Qe,er=pn,dr=An,Ar=Qn[er-2*dr],nr=Qn[er-dr],fr=Qn[er+0],xr=Qn[er+dr],jr=Qn[er+2*dr],Pr=27*(Vr=Al[1020+3*(fr-nr)+Al[1020+Ar-xr]])+63>>7,Dr=18*Vr+63>>7,Vr=9*Vr+63>>7;Qn[er-3*dr]=Pa[255+Qn[er-3*dr]+Vr],Qn[er-2*dr]=Pa[255+Ar+Dr],Qn[er-dr]=Pa[255+nr+Pr],Qn[er+0]=Pa[255+fr-Pr],Qn[er+dr]=Pa[255+xr-Dr],Qn[er+2*dr]=Pa[255+jr-Vr]}pn+=Rn}}function Wo(Qe,pn,An,Rn,jn,zn,Wn,Kn){for(zn=2*zn+1;0<jn--;){if(ho(Qe,pn,An,zn,Wn))if(fs(Qe,pn,An,Kn))Ki(Qe,pn,An);else{var Qn=Qe,er=pn,dr=An,Ar=Qn[er-dr],nr=Qn[er+0],fr=Qn[er+dr],xr=Tu[112+(4+(jr=3*(nr-Ar))>>3)],jr=Tu[112+(jr+3>>3)],Pr=xr+1>>1;Qn[er-2*dr]=Pa[255+Qn[er-2*dr]+Pr],Qn[er-dr]=Pa[255+Ar+jr],Qn[er+0]=Pa[255+nr-xr],Qn[er+dr]=Pa[255+fr-Pr]}pn+=Rn}}function xn(Qe,pn,An,Rn,jn,zn){Xs(Qe,pn,An,1,16,Rn,jn,zn)}function Vn(Qe,pn,An,Rn,jn,zn){Xs(Qe,pn,1,An,16,Rn,jn,zn)}function tr(Qe,pn,An,Rn,jn,zn){var Wn;for(Wn=3;0<Wn;--Wn)Wo(Qe,pn+=4*An,An,1,16,Rn,jn,zn)}function ur(Qe,pn,An,Rn,jn,zn){var Wn;for(Wn=3;0<Wn;--Wn)Wo(Qe,pn+=4,1,An,16,Rn,jn,zn)}function br(Qe,pn,An,Rn,jn,zn,Wn,Kn){Xs(Qe,pn,jn,1,8,zn,Wn,Kn),Xs(An,Rn,jn,1,8,zn,Wn,Kn)}function Br(Qe,pn,An,Rn,jn,zn,Wn,Kn){Xs(Qe,pn,1,jn,8,zn,Wn,Kn),Xs(An,Rn,1,jn,8,zn,Wn,Kn)}function Hr(Qe,pn,An,Rn,jn,zn,Wn,Kn){Wo(Qe,pn+4*jn,jn,1,8,zn,Wn,Kn),Wo(An,Rn+4*jn,jn,1,8,zn,Wn,Kn)}function _i(Qe,pn,An,Rn,jn,zn,Wn,Kn){Wo(Qe,pn+4,1,jn,8,zn,Wn,Kn),Wo(An,Rn+4,1,jn,8,zn,Wn,Kn)}function xi(){this.ba=new rs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ai,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Bi(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ji(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bs(){this.ua=0,this.Wa=new Ai,this.vb=new Ai,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Nn,this.yc=new En}function Ws(){this.xb=this.a=0,this.l=new ys,this.ca=new rs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new kn,this.Pb=0,this.wd=new kn,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bs,this.ab=0,this.gc=Ce(4,Ji),this.Oc=0}function Qs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ys,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Es(Qe,pn,An,Rn,jn,zn,Wn){for(Qe=Qe==null?0:Qe[pn+0],pn=0;pn<Wn;++pn)jn[zn+pn]=Qe+An[Rn+pn]&255,Qe=jn[zn+pn]}function yo(Qe,pn,An,Rn,jn,zn,Wn){var Kn;if(Qe==null)Es(null,null,An,Rn,jn,zn,Wn);else for(Kn=0;Kn<Wn;++Kn)jn[zn+Kn]=Qe[pn+Kn]+An[Rn+Kn]&255}function Ds(Qe,pn,An,Rn,jn,zn,Wn){if(Qe==null)Es(null,null,An,Rn,jn,zn,Wn);else{var Kn,Qn=Qe[pn+0],er=Qn,dr=Qn;for(Kn=0;Kn<Wn;++Kn)er=dr+(Qn=Qe[pn+Kn])-er,dr=An[Rn+Kn]+(-256&er?0>er?0:255:er)&255,er=Qn,jn[zn+Kn]=dr}}function jo(Qe,pn,An,Rn){var jn=pn.width,zn=pn.o;if(e(Qe!=null&&pn!=null),0>An||0>=Rn||An+Rn>zn)return null;if(!Qe.Cc){if(Qe.ga==null){var Wn;if(Qe.ga=new Qs,(Wn=Qe.ga==null)||(Wn=pn.width*pn.o,e(Qe.Gb.length==0),Qe.Gb=Re(Wn),Qe.Uc=0,Qe.Gb==null?Wn=0:(Qe.mb=Qe.Gb,Qe.nb=Qe.Uc,Qe.rc=null,Wn=1),Wn=!Wn),!Wn){Wn=Qe.ga;var Kn=Qe.Fa,Qn=Qe.P,er=Qe.qc,dr=Qe.mb,Ar=Qe.nb,nr=Qn+1,fr=er-1,xr=Wn.l;if(e(Kn!=null&&dr!=null&&pn!=null),pa[0]=null,pa[1]=Es,pa[2]=yo,pa[3]=Ds,Wn.ca=dr,Wn.tb=Ar,Wn.c=pn.width,Wn.i=pn.height,e(0<Wn.c&&0<Wn.i),1>=er)pn=0;else if(Wn.$a=3&Kn[Qn+0],Wn.Z=Kn[Qn+0]>>2&3,Wn.Lc=Kn[Qn+0]>>4&3,Qn=Kn[Qn+0]>>6&3,0>Wn.$a||1<Wn.$a||4<=Wn.Z||1<Wn.Lc||Qn)pn=0;else if(xr.put=Ci,xr.ac=Zs,xr.bc=gs,xr.ma=Wn,xr.width=pn.width,xr.height=pn.height,xr.Da=pn.Da,xr.v=pn.v,xr.va=pn.va,xr.j=pn.j,xr.o=pn.o,Wn.$a)e:{e(Wn.$a==1),pn=Ir();t:for(;;){if(pn==null){pn=0;break e}if(e(Wn!=null),Wn.mc=pn,pn.c=Wn.c,pn.i=Wn.i,pn.l=Wn.l,pn.l.ma=Wn,pn.l.width=Wn.c,pn.l.height=Wn.i,pn.a=0,Hn(pn.m,Kn,nr,fr),!Or(Wn.c,Wn.i,1,pn,null)||(pn.ab==1&&pn.gc[0].hc==3&&po(pn.s)?(Wn.ic=1,Kn=pn.c*pn.i,pn.Ta=null,pn.Ua=0,pn.V=Re(Kn),pn.Ba=0,pn.V==null?(pn.a=1,pn=0):pn=1):(Wn.ic=0,pn=Zr(pn,Wn.c)),!pn))break t;pn=1;break e}Wn.mc=null,pn=0}else pn=fr>=Wn.c*Wn.i;Wn=!pn}if(Wn)return null;Qe.ga.Lc!=1?Qe.Ga=0:Rn=zn-An}e(Qe.ga!=null),e(An+Rn<=zn);e:{if(pn=(Kn=Qe.ga).c,zn=Kn.l.o,Kn.$a==0){if(nr=Qe.rc,fr=Qe.Vc,xr=Qe.Fa,Qn=Qe.P+1+An*pn,er=Qe.mb,dr=Qe.nb+An*pn,e(Qn<=Qe.P+Qe.qc),Kn.Z!=0)for(e(pa[Kn.Z]!=null),Wn=0;Wn<Rn;++Wn)pa[Kn.Z](nr,fr,xr,Qn,er,dr,pn),nr=er,fr=dr,dr+=pn,Qn+=pn;else for(Wn=0;Wn<Rn;++Wn)Te(er,dr,xr,Qn,pn),nr=er,fr=dr,dr+=pn,Qn+=pn;Qe.rc=nr,Qe.Vc=fr}else{if(e(Kn.mc!=null),pn=An+Rn,e((Wn=Kn.mc)!=null),e(pn<=Wn.i),Wn.C>=pn)pn=1;else if(Kn.ic||So(),Kn.ic){Kn=Wn.V,nr=Wn.Ba,fr=Wn.c;var jr=Wn.i,Pr=(xr=1,Qn=Wn.$/fr,er=Wn.$%fr,dr=Wn.m,Ar=Wn.s,Wn.$),Dr=fr*jr,Vr=fr*pn,Ur=Ar.wc,qr=Pr<Vr?Ts(Ar,er,Qn):null;e(Pr<=Dr),e(pn<=jr),e(po(Ar));t:for(;;){for(;!dr.h&&Pr<Vr;){if(er&Ur||(qr=Ts(Ar,er,Qn)),e(qr!=null),lr(dr),256>(jr=xs(qr.G[0],qr.H[0],dr)))Kn[nr+Pr]=jr,++Pr,++er>=fr&&(er=0,++Qn<=pn&&!(Qn%16)&&ir(Wn,Qn));else{if(!(280>jr)){xr=0;break t}jr=Ls(jr-256,dr);var Mi,Ti=xs(qr.G[4],qr.H[4],dr);if(lr(dr),!(Pr>=(Ti=eo(fr,Ti=Ls(Ti,dr)))&&Dr-Pr>=jr)){xr=0;break t}for(Mi=0;Mi<jr;++Mi)Kn[nr+Pr+Mi]=Kn[nr+Pr+Mi-Ti];for(Pr+=jr,er+=jr;er>=fr;)er-=fr,++Qn<=pn&&!(Qn%16)&&ir(Wn,Qn);Pr<Vr&&er&Ur&&(qr=Ts(Ar,er,Qn))}e(dr.h==Jn(dr))}ir(Wn,Qn>pn?pn:Qn);break t}!xr||dr.h&&Pr<Dr?(xr=0,Wn.a=dr.h?5:3):Wn.$=Pr,pn=xr}else pn=cr(Wn,Wn.V,Wn.Ba,Wn.c,Wn.i,pn,yi);if(!pn){Rn=0;break e}}An+Rn>=zn&&(Qe.Cc=1),Rn=1}if(!Rn)return null;if(Qe.Cc&&((Rn=Qe.ga)!=null&&(Rn.mc=null),Qe.ga=null,0<Qe.Ga))return alert("todo:WebPDequantizeLevels"),null}return Qe.nb+An*jn}function nl(Qe,pn,An,Rn,jn,zn){for(;0<jn--;){var Wn,Kn=Qe,Qn=pn+(An?1:0),er=Qe,dr=pn+(An?0:3);for(Wn=0;Wn<Rn;++Wn){var Ar=er[dr+4*Wn];Ar!=255&&(Ar*=32897,Kn[Qn+4*Wn+0]=Kn[Qn+4*Wn+0]*Ar>>23,Kn[Qn+4*Wn+1]=Kn[Qn+4*Wn+1]*Ar>>23,Kn[Qn+4*Wn+2]=Kn[Qn+4*Wn+2]*Ar>>23)}pn+=zn}}function cl(Qe,pn,An,Rn,jn){for(;0<Rn--;){var zn;for(zn=0;zn<An;++zn){var Wn=Qe[pn+2*zn+0],Kn=15&(er=Qe[pn+2*zn+1]),Qn=4369*Kn,er=(240&er|er>>4)*Qn>>16;Qe[pn+2*zn+0]=(240&Wn|Wn>>4)*Qn>>16&240|(15&Wn|Wn<<4)*Qn>>16>>4&15,Qe[pn+2*zn+1]=240&er|Kn}pn+=jn}}function iu(Qe,pn,An,Rn,jn,zn,Wn,Kn){var Qn,er,dr=255;for(er=0;er<jn;++er){for(Qn=0;Qn<Rn;++Qn){var Ar=Qe[pn+Qn];zn[Wn+4*Qn]=Ar,dr&=Ar}pn+=An,Wn+=Kn}return dr!=255}function Ml(Qe,pn,An,Rn,jn){var zn;for(zn=0;zn<jn;++zn)An[Rn+zn]=Qe[pn+zn]>>8}function So(){lu=nl,Nc=cl,Uu=iu,Mc=Ml}function Ma(Qe,pn,An){dn[Qe]=function(Rn,jn,zn,Wn,Kn,Qn,er,dr,Ar,nr,fr,xr,jr,Pr,Dr,Vr,Ur){var qr,Mi=Ur-1>>1,Ti=Kn[Qn+0]|er[dr+0]<<16,ss=Ar[nr+0]|fr[xr+0]<<16;e(Rn!=null);var Pi=3*Ti+ss+131074>>2;for(pn(Rn[jn+0],255&Pi,Pi>>16,jr,Pr),zn!=null&&(Pi=3*ss+Ti+131074>>2,pn(zn[Wn+0],255&Pi,Pi>>16,Dr,Vr)),qr=1;qr<=Mi;++qr){var ms=Kn[Qn+qr]|er[dr+qr]<<16,vo=Ar[nr+qr]|fr[xr+qr]<<16,ls=Ti+ms+ss+vo+524296,Ei=ls+2*(ms+ss)>>3;Pi=Ei+Ti>>1,Ti=(ls=ls+2*(Ti+vo)>>3)+ms>>1,pn(Rn[jn+2*qr-1],255&Pi,Pi>>16,jr,Pr+(2*qr-1)*An),pn(Rn[jn+2*qr-0],255&Ti,Ti>>16,jr,Pr+(2*qr-0)*An),zn!=null&&(Pi=ls+ss>>1,Ti=Ei+vo>>1,pn(zn[Wn+2*qr-1],255&Pi,Pi>>16,Dr,Vr+(2*qr-1)*An),pn(zn[Wn+2*qr+0],255&Ti,Ti>>16,Dr,Vr+(2*qr+0)*An)),Ti=ms,ss=vo}1&Ur||(Pi=3*Ti+ss+131074>>2,pn(Rn[jn+Ur-1],255&Pi,Pi>>16,jr,Pr+(Ur-1)*An),zn!=null&&(Pi=3*ss+Ti+131074>>2,pn(zn[Wn+Ur-1],255&Pi,Pi>>16,Dr,Vr+(Ur-1)*An)))}}function Gl(){$a[dc]=qd,$a[Jl]=Zl,$a[od]=Wd,$a[zu]=Pu,$a[qu]=hu,$a[$s]=Yu,$a[hc]=zc,$a[Eu]=Zl,$a[uu]=Pu,$a[Wu]=hu,$a[Hu]=Yu}function Ta(Qe){return Qe&-16384?0>Qe?0:255:Qe>>eu}function Ze(Qe,pn){return Ta((19077*Qe>>8)+(26149*pn>>8)-14234)}function Sn(Qe,pn,An){return Ta((19077*Qe>>8)-(6419*pn>>8)-(13320*An>>8)+8708)}function Mn(Qe,pn){return Ta((19077*Qe>>8)+(33050*pn>>8)-17685)}function Xn(Qe,pn,An,Rn,jn){Rn[jn+0]=Ze(Qe,An),Rn[jn+1]=Sn(Qe,pn,An),Rn[jn+2]=Mn(Qe,pn)}function wr(Qe,pn,An,Rn,jn){Rn[jn+0]=Mn(Qe,pn),Rn[jn+1]=Sn(Qe,pn,An),Rn[jn+2]=Ze(Qe,An)}function Lr(Qe,pn,An,Rn,jn){var zn=Sn(Qe,pn,An);pn=zn<<3&224|Mn(Qe,pn)>>3,Rn[jn+0]=248&Ze(Qe,An)|zn>>5,Rn[jn+1]=pn}function ti(Qe,pn,An,Rn,jn){var zn=240&Mn(Qe,pn)|15;Rn[jn+0]=240&Ze(Qe,An)|Sn(Qe,pn,An)>>4,Rn[jn+1]=zn}function Ss(Qe,pn,An,Rn,jn){Rn[jn+0]=255,Xn(Qe,pn,An,Rn,jn+1)}function to(Qe,pn,An,Rn,jn){wr(Qe,pn,An,Rn,jn),Rn[jn+3]=255}function cs(Qe,pn,An,Rn,jn){Xn(Qe,pn,An,Rn,jn),Rn[jn+3]=255}function ps(Qe,pn){return 0>Qe?0:Qe>pn?pn:Qe}function Ps(Qe,pn,An){dn[Qe]=function(Rn,jn,zn,Wn,Kn,Qn,er,dr,Ar){for(var nr=dr+(-2&Ar)*An;dr!=nr;)pn(Rn[jn+0],zn[Wn+0],Kn[Qn+0],er,dr),pn(Rn[jn+1],zn[Wn+0],Kn[Qn+0],er,dr+An),jn+=2,++Wn,++Qn,dr+=2*An;1&Ar&&pn(Rn[jn+0],zn[Wn+0],Kn[Qn+0],er,dr)}}function fa(Qe,pn,An){return An==0?Qe==0?pn==0?6:5:pn==0?4:0:An}function sa(Qe,pn,An,Rn,jn){switch(Qe>>>30){case 3:Io(pn,An,Rn,jn,0);break;case 2:Ho(pn,An,Rn,jn);break;case 1:hl(pn,An,Rn,jn)}}function La(Qe,pn){var An,Rn,jn=pn.M,zn=pn.Nb,Wn=Qe.oc,Kn=Qe.pc+40,Qn=Qe.oc,er=Qe.pc+584,dr=Qe.oc,Ar=Qe.pc+600;for(An=0;16>An;++An)Wn[Kn+32*An-1]=129;for(An=0;8>An;++An)Qn[er+32*An-1]=129,dr[Ar+32*An-1]=129;for(0<jn?Wn[Kn-1-32]=Qn[er-1-32]=dr[Ar-1-32]=129:(Ee(Wn,Kn-32-1,127,21),Ee(Qn,er-32-1,127,9),Ee(dr,Ar-32-1,127,9)),Rn=0;Rn<Qe.za;++Rn){var nr=pn.ya[pn.aa+Rn];if(0<Rn){for(An=-1;16>An;++An)Te(Wn,Kn+32*An-4,Wn,Kn+32*An+12,4);for(An=-1;8>An;++An)Te(Qn,er+32*An-4,Qn,er+32*An+4,4),Te(dr,Ar+32*An-4,dr,Ar+32*An+4,4)}var fr=Qe.Gd,xr=Qe.Hd+Rn,jr=nr.ad,Pr=nr.Hc;if(0<jn&&(Te(Wn,Kn-32,fr[xr].y,0,16),Te(Qn,er-32,fr[xr].f,0,8),Te(dr,Ar-32,fr[xr].ea,0,8)),nr.Za){var Dr=Wn,Vr=Kn-32+16;for(0<jn&&(Rn>=Qe.za-1?Ee(Dr,Vr,fr[xr].y[15],4):Te(Dr,Vr,fr[xr+1].y,0,4)),An=0;4>An;An++)Dr[Vr+128+An]=Dr[Vr+256+An]=Dr[Vr+384+An]=Dr[Vr+0+An];for(An=0;16>An;++An,Pr<<=2)Dr=Wn,Vr=Kn+qc[An],il[nr.Ob[An]](Dr,Vr),sa(Pr,jr,16*+An,Dr,Vr)}else if(Dr=fa(Rn,jn,nr.Ob[0]),Ia[Dr](Wn,Kn),Pr!=0)for(An=0;16>An;++An,Pr<<=2)sa(Pr,jr,16*+An,Wn,Kn+qc[An]);for(An=nr.Gc,Dr=fa(Rn,jn,nr.Dd),ja[Dr](Qn,er),ja[Dr](dr,Ar),Pr=jr,Dr=Qn,Vr=er,255&(nr=0|An)&&(170&nr?El(Pr,256,Dr,Vr):wu(Pr,256,Dr,Vr)),nr=dr,Pr=Ar,255&(An>>=8)&&(170&An?El(jr,320,nr,Pr):wu(jr,320,nr,Pr)),jn<Qe.Ub-1&&(Te(fr[xr].y,0,Wn,Kn+480,16),Te(fr[xr].f,0,Qn,er+224,8),Te(fr[xr].ea,0,dr,Ar+224,8)),An=8*zn*Qe.B,fr=Qe.sa,xr=Qe.ta+16*Rn+16*zn*Qe.R,jr=Qe.qa,nr=Qe.ra+8*Rn+An,Pr=Qe.Ha,Dr=Qe.Ia+8*Rn+An,An=0;16>An;++An)Te(fr,xr+An*Qe.R,Wn,Kn+32*An,16);for(An=0;8>An;++An)Te(jr,nr+An*Qe.B,Qn,er+32*An,8),Te(Pr,Dr+An*Qe.B,dr,Ar+32*An,8)}}function dl(Qe,pn,An,Rn,jn,zn,Wn,Kn,Qn){var er=[0],dr=[0],Ar=0,nr=Qn!=null?Qn.kd:0,fr=Qn??new Bi;if(Qe==null||12>An)return 7;fr.data=Qe,fr.w=pn,fr.ha=An,pn=[pn],An=[An],fr.gb=[fr.gb];e:{var xr=pn,jr=An,Pr=fr.gb;if(e(Qe!=null),e(jr!=null),e(Pr!=null),Pr[0]=0,12<=jr[0]&&!t(Qe,xr[0],"RIFF")){if(t(Qe,xr[0]+8,"WEBP")){Pr=3;break e}var Dr=Tr(Qe,xr[0]+4);if(12>Dr||4294967286<Dr){Pr=3;break e}if(nr&&Dr>jr[0]-8){Pr=7;break e}Pr[0]=Dr,xr[0]+=12,jr[0]-=12}Pr=0}if(Pr!=0)return Pr;for(Dr=0<fr.gb[0],An=An[0];;){e:{var Vr=Qe;jr=pn,Pr=An;var Ur=er,qr=dr,Mi=xr=[0];if((Pi=Ar=[Ar])[0]=0,8>Pr[0])Pr=7;else{if(!t(Vr,jr[0],"VP8X")){if(Tr(Vr,jr[0]+4)!=10){Pr=3;break e}if(18>Pr[0]){Pr=7;break e}var Ti=Tr(Vr,jr[0]+8),ss=1+Gr(Vr,jr[0]+12);if(2147483648<=ss*(Vr=1+Gr(Vr,jr[0]+15))){Pr=3;break e}Mi!=null&&(Mi[0]=Ti),Ur!=null&&(Ur[0]=ss),qr!=null&&(qr[0]=Vr),jr[0]+=18,Pr[0]-=18,Pi[0]=1}Pr=0}}if(Ar=Ar[0],xr=xr[0],Pr!=0)return Pr;if(jr=!!(2&xr),!Dr&&Ar)return 3;if(zn!=null&&(zn[0]=!!(16&xr)),Wn!=null&&(Wn[0]=jr),Kn!=null&&(Kn[0]=0),Wn=er[0],xr=dr[0],Ar&&jr&&Qn==null){Pr=0;break}if(4>An){Pr=7;break}if(Dr&&Ar||!Dr&&!Ar&&!t(Qe,pn[0],"ALPH")){An=[An],fr.na=[fr.na],fr.P=[fr.P],fr.Sa=[fr.Sa];e:{Ti=Qe,Pr=pn,Dr=An;var Pi=fr.gb;Ur=fr.na,qr=fr.P,Mi=fr.Sa,ss=22,e(Ti!=null),e(Dr!=null),Vr=Pr[0];var ms=Dr[0];for(e(Ur!=null),e(Mi!=null),Ur[0]=null,qr[0]=null,Mi[0]=0;;){if(Pr[0]=Vr,Dr[0]=ms,8>ms){Pr=7;break e}var vo=Tr(Ti,Vr+4);if(4294967286<vo){Pr=3;break e}var ls=8+vo+1&-2;if(ss+=ls,0<Pi&&ss>Pi){Pr=3;break e}if(!t(Ti,Vr,"VP8 ")||!t(Ti,Vr,"VP8L")){Pr=0;break e}if(ms[0]<ls){Pr=7;break e}t(Ti,Vr,"ALPH")||(Ur[0]=Ti,qr[0]=Vr+8,Mi[0]=vo),Vr+=ls,ms-=ls}}if(An=An[0],fr.na=fr.na[0],fr.P=fr.P[0],fr.Sa=fr.Sa[0],Pr!=0)break}An=[An],fr.Ja=[fr.Ja],fr.xa=[fr.xa];e:if(Pi=Qe,Pr=pn,Dr=An,Ur=fr.gb[0],qr=fr.Ja,Mi=fr.xa,Ti=Pr[0],Vr=!t(Pi,Ti,"VP8 "),ss=!t(Pi,Ti,"VP8L"),e(Pi!=null),e(Dr!=null),e(qr!=null),e(Mi!=null),8>Dr[0])Pr=7;else{if(Vr||ss){if(Pi=Tr(Pi,Ti+4),12<=Ur&&Pi>Ur-12){Pr=3;break e}if(nr&&Pi>Dr[0]-8){Pr=7;break e}qr[0]=Pi,Pr[0]+=8,Dr[0]-=8,Mi[0]=ss}else Mi[0]=5<=Dr[0]&&Pi[Ti+0]==47&&!(Pi[Ti+4]>>5),qr[0]=Dr[0];Pr=0}if(An=An[0],fr.Ja=fr.Ja[0],fr.xa=fr.xa[0],pn=pn[0],Pr!=0)break;if(4294967286<fr.Ja)return 3;if(Kn==null||jr||(Kn[0]=fr.xa?2:1),Wn=[Wn],xr=[xr],fr.xa){if(5>An){Pr=7;break}Kn=Wn,nr=xr,jr=zn,Qe==null||5>An?Qe=0:5<=An&&Qe[pn+0]==47&&!(Qe[pn+4]>>5)?(Dr=[0],Pi=[0],Ur=[0],Hn(qr=new kn,Qe,pn,An),Mo(qr,Dr,Pi,Ur)?(Kn!=null&&(Kn[0]=Dr[0]),nr!=null&&(nr[0]=Pi[0]),jr!=null&&(jr[0]=Ur[0]),Qe=1):Qe=0):Qe=0}else{if(10>An){Pr=7;break}Kn=xr,Qe==null||10>An||!wl(Qe,pn+3,An-3)?Qe=0:(nr=Qe[pn+0]|Qe[pn+1]<<8|Qe[pn+2]<<16,jr=16383&(Qe[pn+7]<<8|Qe[pn+6]),Qe=16383&(Qe[pn+9]<<8|Qe[pn+8]),1&nr||3<(nr>>1&7)||!(nr>>4&1)||nr>>5>=fr.Ja||!jr||!Qe?Qe=0:(Wn&&(Wn[0]=jr),Kn&&(Kn[0]=Qe),Qe=1))}if(!Qe||(Wn=Wn[0],xr=xr[0],Ar&&(er[0]!=Wn||dr[0]!=xr)))return 3;Qn!=null&&(Qn[0]=fr,Qn.offset=pn-Qn.w,e(4294967286>pn-Qn.w),e(Qn.offset==Qn.ha-An));break}return Pr==0||Pr==7&&Ar&&Qn==null?(zn!=null&&(zn[0]|=fr.na!=null&&0<fr.na.length),Rn!=null&&(Rn[0]=Wn),jn!=null&&(jn[0]=xr),0):Pr}function Ea(Qe,pn,An){var Rn=pn.width,jn=pn.height,zn=0,Wn=0,Kn=Rn,Qn=jn;if(pn.Da=Qe!=null&&0<Qe.Da,pn.Da&&(Kn=Qe.cd,Qn=Qe.bd,zn=Qe.v,Wn=Qe.j,11>An||(zn&=-2,Wn&=-2),0>zn||0>Wn||0>=Kn||0>=Qn||zn+Kn>Rn||Wn+Qn>jn))return 0;if(pn.v=zn,pn.j=Wn,pn.va=zn+Kn,pn.o=Wn+Qn,pn.U=Kn,pn.T=Qn,pn.da=Qe!=null&&0<Qe.da,pn.da){if(!bi(Kn,Qn,An=[Qe.ib],zn=[Qe.hb]))return 0;pn.ib=An[0],pn.hb=zn[0]}return pn.ob=Qe!=null&&Qe.ob,pn.Kb=Qe==null||!Qe.Sd,pn.da&&(pn.ob=pn.ib<3*Rn/4&&pn.hb<3*jn/4,pn.Kb=0),1}function Aa(Qe){if(Qe==null)return 2;if(11>Qe.S){var pn=Qe.f.RGBA;pn.fb+=(Qe.height-1)*pn.A,pn.A=-pn.A}else pn=Qe.f.kb,Qe=Qe.height,pn.O+=(Qe-1)*pn.fa,pn.fa=-pn.fa,pn.N+=(Qe-1>>1)*pn.Ab,pn.Ab=-pn.Ab,pn.W+=(Qe-1>>1)*pn.Db,pn.Db=-pn.Db,pn.F!=null&&(pn.J+=(Qe-1)*pn.lb,pn.lb=-pn.lb);return 0}function Kl(Qe,pn,An,Rn){if(Rn==null||0>=Qe||0>=pn)return 2;if(An!=null){if(An.Da){var jn=An.cd,zn=An.bd,Wn=-2&An.v,Kn=-2&An.j;if(0>Wn||0>Kn||0>=jn||0>=zn||Wn+jn>Qe||Kn+zn>pn)return 2;Qe=jn,pn=zn}if(An.da){if(!bi(Qe,pn,jn=[An.ib],zn=[An.hb]))return 2;Qe=jn[0],pn=zn[0]}}Rn.width=Qe,Rn.height=pn;e:{var Qn=Rn.width,er=Rn.height;if(Qe=Rn.S,0>=Qn||0>=er||!(Qe>=dc&&13>Qe))Qe=2;else{if(0>=Rn.Rd&&Rn.sd==null){Wn=zn=jn=pn=0;var dr=(Kn=Qn*Xu[Qe])*er;if(11>Qe||(zn=(er+1)/2*(pn=(Qn+1)/2),Qe==12&&(Wn=(jn=Qn)*er)),(er=Re(dr+2*zn+Wn))==null){Qe=1;break e}Rn.sd=er,11>Qe?((Qn=Rn.f.RGBA).eb=er,Qn.fb=0,Qn.A=Kn,Qn.size=dr):((Qn=Rn.f.kb).y=er,Qn.O=0,Qn.fa=Kn,Qn.Fd=dr,Qn.f=er,Qn.N=0+dr,Qn.Ab=pn,Qn.Cd=zn,Qn.ea=er,Qn.W=0+dr+zn,Qn.Db=pn,Qn.Ed=zn,Qe==12&&(Qn.F=er,Qn.J=0+dr+2*zn),Qn.Tc=Wn,Qn.lb=jn)}if(pn=1,jn=Rn.S,zn=Rn.width,Wn=Rn.height,jn>=dc&&13>jn)if(11>jn)Qe=Rn.f.RGBA,pn&=(Kn=Math.abs(Qe.A))*(Wn-1)+zn<=Qe.size,pn&=Kn>=zn*Xu[jn],pn&=Qe.eb!=null;else{Qe=Rn.f.kb,Kn=(zn+1)/2,dr=(Wn+1)/2,Qn=Math.abs(Qe.fa),er=Math.abs(Qe.Ab);var Ar=Math.abs(Qe.Db),nr=Math.abs(Qe.lb),fr=nr*(Wn-1)+zn;pn&=Qn*(Wn-1)+zn<=Qe.Fd,pn&=er*(dr-1)+Kn<=Qe.Cd,pn=(pn&=Ar*(dr-1)+Kn<=Qe.Ed)&Qn>=zn&er>=Kn&Ar>=Kn,pn&=Qe.y!=null,pn&=Qe.f!=null,pn&=Qe.ea!=null,jn==12&&(pn&=nr>=zn,pn&=fr<=Qe.Tc,pn&=Qe.F!=null)}else pn=0;Qe=pn?0:2}}return Qe!=0||An!=null&&An.fd&&(Qe=Aa(Rn)),Qe}var Sa=64,Yl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$u=24,Xl=32,bo=8,oc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ei("Predictor0","PredictorAdd0"),dn.Predictor0=function(){return 4278190080},dn.Predictor1=function(Qe){return Qe},dn.Predictor2=function(Qe,pn,An){return pn[An+0]},dn.Predictor3=function(Qe,pn,An){return pn[An+1]},dn.Predictor4=function(Qe,pn,An){return pn[An-1]},dn.Predictor5=function(Qe,pn,An){return mi(mi(Qe,pn[An+1]),pn[An+0])},dn.Predictor6=function(Qe,pn,An){return mi(Qe,pn[An-1])},dn.Predictor7=function(Qe,pn,An){return mi(Qe,pn[An+0])},dn.Predictor8=function(Qe,pn,An){return mi(pn[An-1],pn[An+0])},dn.Predictor9=function(Qe,pn,An){return mi(pn[An+0],pn[An+1])},dn.Predictor10=function(Qe,pn,An){return mi(mi(Qe,pn[An-1]),mi(pn[An+0],pn[An+1]))},dn.Predictor11=function(Qe,pn,An){var Rn=pn[An+0];return 0>=yr(Rn>>24&255,Qe>>24&255,(pn=pn[An-1])>>24&255)+yr(Rn>>16&255,Qe>>16&255,pn>>16&255)+yr(Rn>>8&255,Qe>>8&255,pn>>8&255)+yr(255&Rn,255&Qe,255&pn)?Rn:Qe},dn.Predictor12=function(Qe,pn,An){var Rn=pn[An+0];return(Hi((Qe>>24&255)+(Rn>>24&255)-((pn=pn[An-1])>>24&255))<<24|Hi((Qe>>16&255)+(Rn>>16&255)-(pn>>16&255))<<16|Hi((Qe>>8&255)+(Rn>>8&255)-(pn>>8&255))<<8|Hi((255&Qe)+(255&Rn)-(255&pn)))>>>0},dn.Predictor13=function(Qe,pn,An){var Rn=pn[An-1];return(oi((Qe=mi(Qe,pn[An+0]))>>24&255,Rn>>24&255)<<24|oi(Qe>>16&255,Rn>>16&255)<<16|oi(Qe>>8&255,Rn>>8&255)<<8|oi(255&Qe,255&Rn))>>>0};var Da=dn.PredictorAdd0;dn.PredictorAdd1=Fr,ei("Predictor2","PredictorAdd2"),ei("Predictor3","PredictorAdd3"),ei("Predictor4","PredictorAdd4"),ei("Predictor5","PredictorAdd5"),ei("Predictor6","PredictorAdd6"),ei("Predictor7","PredictorAdd7"),ei("Predictor8","PredictorAdd8"),ei("Predictor9","PredictorAdd9"),ei("Predictor10","PredictorAdd10"),ei("Predictor11","PredictorAdd11"),ei("Predictor12","PredictorAdd12"),ei("Predictor13","PredictorAdd13");var Fa=dn.PredictorAdd2;fi("ColorIndexInverseTransform","MapARGB","32b",function(Qe){return Qe>>8&255},function(Qe){return Qe}),fi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Qe){return Qe},function(Qe){return Qe>>8&255});var yu,Ql=dn.ColorIndexInverseTransform,bu=dn.MapARGB,su=dn.VP8LColorIndexInverseTransformAlpha,Ll=dn.MapAlpha,Dl=dn.VP8LPredictorsAdd=[];Dl.length=16,(dn.VP8LPredictors=[]).length=16,(dn.VP8LPredictorsAdd_C=[]).length=16,(dn.VP8LPredictors_C=[]).length=16;var xl,vu,Va,Tl,Hs,Gs,Po,Io,Ho,El,hl,wu,Rc,Cc,ac,rd,sd,ou,uc,xu,cc,Oc,Bu,au,lu,Nc,Uu,Mc,Lc=Re(511),Dc=Re(2041),Fc=Re(225),Vc=Re(767),jc=0,Al=Dc,Tu=Fc,Pa=Vc,rl=Lc,dc=0,Jl=1,od=2,zu=3,qu=4,$s=5,hc=6,Eu=7,uu=8,Wu=9,Hu=10,Gu=[2,3,7],fc=[3,3,11],cu=[280,256,256,256,40],ad=[0,1,1,1,0],$d=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Bd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ld=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pc=8,Au=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ku=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],du=null,$c=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Bc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ud=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],cd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ud=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],zd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Uc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ia=[],il=[],ja=[],Sl=1,Su=2,pa=[],$a=[];Ma("UpsampleRgbLinePair",Xn,3),Ma("UpsampleBgrLinePair",wr,3),Ma("UpsampleRgbaLinePair",cs,4),Ma("UpsampleBgraLinePair",to,4),Ma("UpsampleArgbLinePair",Ss,4),Ma("UpsampleRgba4444LinePair",ti,2),Ma("UpsampleRgb565LinePair",Lr,2);var qd=dn.UpsampleRgbLinePair,Wd=dn.UpsampleBgrLinePair,Zl=dn.UpsampleRgbaLinePair,Pu=dn.UpsampleBgraLinePair,hu=dn.UpsampleArgbLinePair,Yu=dn.UpsampleRgba4444LinePair,zc=dn.UpsampleRgb565LinePair,Fl=16,pl=1<<Fl-1,Ns=-227,Fs=482,eu=6,oa=0,Ba=Re(256),fu=Re(256),Iu=Re(256),Ua=Re(256),mc=Re(Fs-Ns),dd=Re(Fs-Ns);Ps("YuvToRgbRow",Xn,3),Ps("YuvToBgrRow",wr,3),Ps("YuvToRgbaRow",cs,4),Ps("YuvToBgraRow",to,4),Ps("YuvToArgbRow",Ss,4),Ps("YuvToRgba4444Row",ti,2),Ps("YuvToRgb565Row",Lr,2);var qc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],pu=[0,2,8],hd=[8,7,6,4,4,2,2,2,1,1,1,1],Vl=1;this.WebPDecodeRGBA=function(Qe,pn,An,Rn,jn){var zn=Jl,Wn=new xi,Kn=new rs;Wn.ba=Kn,Kn.S=zn,Kn.width=[Kn.width],Kn.height=[Kn.height];var Qn=Kn.width,er=Kn.height,dr=new ri;if(dr==null||Qe==null)var Ar=2;else e(dr!=null),Ar=dl(Qe,pn,An,dr.width,dr.height,dr.Pd,dr.Qd,dr.format,null);if(Ar!=0?Qn=0:(Qn!=null&&(Qn[0]=dr.width[0]),er!=null&&(er[0]=dr.height[0]),Qn=1),Qn){Kn.width=Kn.width[0],Kn.height=Kn.height[0],Rn!=null&&(Rn[0]=Kn.width),jn!=null&&(jn[0]=Kn.height);e:{if(Rn=new ys,(jn=new Bi).data=Qe,jn.w=pn,jn.ha=An,jn.kd=1,pn=[0],e(jn!=null),((Qe=dl(jn.data,jn.w,jn.ha,null,null,null,pn,null,jn))==0||Qe==7)&&pn[0]&&(Qe=4),(pn=Qe)==0){if(e(Wn!=null),Rn.data=jn.data,Rn.w=jn.w+jn.offset,Rn.ha=jn.ha-jn.offset,Rn.put=Ci,Rn.ac=Zs,Rn.bc=gs,Rn.ma=Wn,jn.xa){if((Qe=Ir())==null){Wn=1;break e}if(function(nr,fr){var xr=[0],jr=[0],Pr=[0];t:for(;;){if(nr==null)return 0;if(fr==null)return nr.a=2,0;if(nr.l=fr,nr.a=0,Hn(nr.m,fr.data,fr.w,fr.ha),!Mo(nr.m,xr,jr,Pr)){nr.a=3;break t}if(nr.xb=Su,fr.width=xr[0],fr.height=jr[0],!Or(xr[0],jr[0],1,nr,null))break t;return 1}return e(nr.a!=0),0}(Qe,Rn)){if(Rn=(pn=Kl(Rn.width,Rn.height,Wn.Oa,Wn.ba))==0){t:{Rn=Qe;n:for(;;){if(Rn==null){Rn=0;break t}if(e(Rn.s.yc!=null),e(Rn.s.Ya!=null),e(0<Rn.s.Wb),e((An=Rn.l)!=null),e((jn=An.ma)!=null),Rn.xb!=0){if(Rn.ca=jn.ba,Rn.tb=jn.tb,e(Rn.ca!=null),!Ea(jn.Oa,An,zu)){Rn.a=2;break n}if(!Zr(Rn,An.width)||An.da)break n;if((An.da||ci(Rn.ca.S))&&So(),11>Rn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Rn.ca.f.kb.F!=null&&So()),Rn.Pb&&0<Rn.s.ua&&Rn.s.vb.X==null&&!rr(Rn.s.vb,Rn.s.Wa.Xa)){Rn.a=1;break n}Rn.xb=0}if(!cr(Rn,Rn.V,Rn.Ba,Rn.c,Rn.i,An.o,ua))break n;jn.Dc=Rn.Ma,Rn=1;break t}e(Rn.a!=0),Rn=0}Rn=!Rn}Rn&&(pn=Qe.a)}else pn=Qe.a}else{if((Qe=new Ja)==null){Wn=1;break e}if(Qe.Fa=jn.na,Qe.P=jn.P,Qe.qc=jn.Sa,Za(Qe,Rn)){if((pn=Kl(Rn.width,Rn.height,Wn.Oa,Wn.ba))==0){if(Qe.Aa=0,An=Wn.Oa,e((jn=Qe)!=null),An!=null){if(0<(Qn=0>(Qn=An.Md)?0:100<Qn?255:255*Qn/100)){for(er=dr=0;4>er;++er)12>(Ar=jn.pb[er]).lc&&(Ar.ia=Qn*hd[0>Ar.lc?0:Ar.lc]>>3),dr|=Ar.ia;dr&&(alert("todo:VP8InitRandom"),jn.ia=1)}jn.Ga=An.Id,100<jn.Ga?jn.Ga=100:0>jn.Ga&&(jn.Ga=0)}(function(nr,fr){if(nr==null)return 0;if(fr==null)return qs(nr,2,"NULL VP8Io parameter in VP8Decode().");if(!nr.cb&&!Za(nr,fr))return 0;if(e(nr.cb),fr.ac==null||fr.ac(fr)){fr.ob&&(nr.L=0);var xr=pu[nr.L];if(nr.L==2?(nr.yb=0,nr.zb=0):(nr.yb=fr.v-xr>>4,nr.zb=fr.j-xr>>4,0>nr.yb&&(nr.yb=0),0>nr.zb&&(nr.zb=0)),nr.Va=fr.o+15+xr>>4,nr.Hb=fr.va+15+xr>>4,nr.Hb>nr.za&&(nr.Hb=nr.za),nr.Va>nr.Ub&&(nr.Va=nr.Ub),0<nr.L){var jr=nr.ed;for(xr=0;4>xr;++xr){var Pr;if(nr.Qa.Cb){var Dr=nr.Qa.Lb[xr];nr.Qa.Fb||(Dr+=jr.Tb)}else Dr=jr.Tb;for(Pr=0;1>=Pr;++Pr){var Vr=nr.gd[xr][Pr],Ur=Dr;if(jr.Pc&&(Ur+=jr.vd[0],Pr&&(Ur+=jr.od[0])),0<(Ur=0>Ur?0:63<Ur?63:Ur)){var qr=Ur;0<jr.wb&&(qr=4<jr.wb?qr>>2:qr>>1)>9-jr.wb&&(qr=9-jr.wb),1>qr&&(qr=1),Vr.dd=qr,Vr.tc=2*Ur+qr,Vr.ld=40<=Ur?2:15<=Ur?1:0}else Vr.tc=0;Vr.La=Pr}}}xr=0}else qs(nr,6,"Frame setup failed"),xr=nr.a;if(xr=xr==0){if(xr){nr.$c=0,0<nr.Aa||(nr.Ic=Vl);t:{xr=nr.Ic,jr=4*(qr=nr.za);var Mi=32*qr,Ti=qr+1,ss=0<nr.L?qr*(0<nr.Aa?2:1):0,Pi=(nr.Aa==2?2:1)*qr;if((Vr=jr+832+(Pr=3*(16*xr+pu[nr.L])/2*Mi)+(Dr=nr.Fa!=null&&0<nr.Fa.length?nr.Kc.c*nr.Kc.i:0))!=Vr)xr=0;else{if(Vr>nr.Vb){if(nr.Vb=0,nr.Ec=Re(Vr),nr.Fc=0,nr.Ec==null){xr=qs(nr,1,"no memory during frame initialization.");break t}nr.Vb=Vr}Vr=nr.Ec,Ur=nr.Fc,nr.Ac=Vr,nr.Bc=Ur,Ur+=jr,nr.Gd=Ce(Mi,Lo),nr.Hd=0,nr.rb=Ce(Ti+1,is),nr.sb=1,nr.wa=ss?Ce(ss,Vi):null,nr.Y=0,nr.D.Nb=0,nr.D.wa=nr.wa,nr.D.Y=nr.Y,0<nr.Aa&&(nr.D.Y+=qr),e(!0),nr.oc=Vr,nr.pc=Ur,Ur+=832,nr.ya=Ce(Pi,Xo),nr.aa=0,nr.D.ya=nr.ya,nr.D.aa=nr.aa,nr.Aa==2&&(nr.D.aa+=qr),nr.R=16*qr,nr.B=8*qr,qr=(Mi=pu[nr.L])*nr.R,Mi=Mi/2*nr.B,nr.sa=Vr,nr.ta=Ur+qr,nr.qa=nr.sa,nr.ra=nr.ta+16*xr*nr.R+Mi,nr.Ha=nr.qa,nr.Ia=nr.ra+8*xr*nr.B+Mi,nr.$c=0,Ur+=Pr,nr.mb=Dr?Vr:null,nr.nb=Dr?Ur:null,e(Ur+Dr<=nr.Fc+nr.Vb),da(nr),Ee(nr.Ac,nr.Bc,0,jr),xr=1}}if(xr){if(fr.ka=0,fr.y=nr.sa,fr.O=nr.ta,fr.f=nr.qa,fr.N=nr.ra,fr.ea=nr.Ha,fr.Vd=nr.Ia,fr.fa=nr.R,fr.Rc=nr.B,fr.F=null,fr.J=0,!jc){for(xr=-255;255>=xr;++xr)Lc[255+xr]=0>xr?-xr:xr;for(xr=-1020;1020>=xr;++xr)Dc[1020+xr]=-128>xr?-128:127<xr?127:xr;for(xr=-112;112>=xr;++xr)Fc[112+xr]=-16>xr?-16:15<xr?15:xr;for(xr=-255;510>=xr;++xr)Vc[255+xr]=0>xr?0:255<xr?255:xr;jc=1}Po=os,Io=Ga,El=wa,hl=us,wu=Oa,Ho=el,Rc=xn,Cc=Vn,ac=br,rd=Br,sd=tr,ou=ur,uc=Hr,xu=_i,cc=Rr,Oc=Yi,Bu=as,au=qo,il[0]=Hl,il[1]=Xi,il[2]=ia,il[3]=xa,il[4]=Ol,il[5]=Na,il[6]=Ys,il[7]=Nl,il[8]=qn,il[9]=Ln,Ia[0]=Fo,Ia[1]=es,Ia[2]=Qi,Ia[3]=tl,Ia[4]=go,Ia[5]=Vo,Ia[6]=Jo,ja[0]=Cr,ja[1]=ul,ja[2]=Zn,ja[3]=ar,ja[4]=ui,ja[5]=ni,ja[6]=ts,xr=1}else xr=0}xr&&(xr=function(ms,vo){for(ms.M=0;ms.M<ms.Va;++ms.M){var ls,Ei=ms.Jc[ms.M&ms.Xb],di=ms.m,ko=ms;for(ls=0;ls<ko.za;++ls){var Zi=di,ds=ko,Ks=ds.Ac,Zo=ds.Bc+4*ls,$o=ds.zc,fo=ds.ya[ds.aa+ls];if(ds.Qa.Bb?fo.$b=Er(Zi,ds.Pa.jb[0])?2+Er(Zi,ds.Pa.jb[2]):Er(Zi,ds.Pa.jb[1]):fo.$b=0,ds.kc&&(fo.Ad=Er(Zi,ds.Bd)),fo.Za=!Er(Zi,145)+0,fo.Za){var Go=fo.Ob,ea=0;for(ds=0;4>ds;++ds){var oo,vs=$o[0+ds];for(oo=0;4>oo;++oo){vs=Ud[Ks[Zo+oo]][vs];for(var Is=ud[Er(Zi,vs[0])];0<Is;)Is=ud[2*Is+Er(Zi,vs[Is])];vs=-Is,Ks[Zo+oo]=vs}Te(Go,ea,Ks,Zo,4),ea+=4,$o[0+ds]=vs}}else vs=Er(Zi,156)?Er(Zi,128)?1:3:Er(Zi,163)?2:0,fo.Ob[0]=vs,Ee(Ks,Zo,vs,4),Ee($o,0,vs,4);fo.Dd=Er(Zi,142)?Er(Zi,114)?Er(Zi,183)?1:3:2:0}if(ko.m.Ka)return qs(ms,7,"Premature end-of-partition0 encountered.");for(;ms.ja<ms.za;++ms.ja){if(ko=Ei,Zi=(di=ms).rb[di.sb-1],Ks=di.rb[di.sb+di.ja],ls=di.ya[di.aa+di.ja],Zo=di.kc?ls.Ad:0)Zi.la=Ks.la=0,ls.Za||(Zi.Na=Ks.Na=0),ls.Hc=0,ls.Gc=0,ls.ia=0;else{var uo,ks;if(Zi=Ks,Ks=ko,Zo=di.Pa.Xc,$o=di.ya[di.aa+di.ja],fo=di.pb[$o.$b],ds=$o.ad,Go=0,ea=di.rb[di.sb-1],vs=oo=0,Ee(ds,Go,0,384),$o.Za)var wo=0,xo=Zo[3];else{Is=Re(16);var Bs=Zi.Na+ea.Na;if(Bs=du(Ks,Zo[1],Bs,fo.Eb,0,Is,0),Zi.Na=ea.Na=(0<Bs)+0,1<Bs)Po(Is,0,ds,Go);else{var ma=Is[0]+3>>3;for(Is=0;256>Is;Is+=16)ds[Go+Is]=ma}wo=1,xo=Zo[0]}var Vs=15&Zi.la,Us=15&ea.la;for(Is=0;4>Is;++Is){var Bo=1&Us;for(ma=ks=0;4>ma;++ma)Vs=Vs>>1|(Bo=(Bs=du(Ks,xo,Bs=Bo+(1&Vs),fo.Sc,wo,ds,Go))>wo)<<7,ks=ks<<2|(3<Bs?3:1<Bs?2:ds[Go+0]!=0),Go+=16;Vs>>=4,Us=Us>>1|Bo<<7,oo=(oo<<8|ks)>>>0}for(xo=Vs,wo=Us>>4,uo=0;4>uo;uo+=2){for(ks=0,Vs=Zi.la>>4+uo,Us=ea.la>>4+uo,Is=0;2>Is;++Is){for(Bo=1&Us,ma=0;2>ma;++ma)Bs=Bo+(1&Vs),Vs=Vs>>1|(Bo=0<(Bs=du(Ks,Zo[2],Bs,fo.Qc,0,ds,Go)))<<3,ks=ks<<2|(3<Bs?3:1<Bs?2:ds[Go+0]!=0),Go+=16;Vs>>=2,Us=Us>>1|Bo<<5}vs|=ks<<4*uo,xo|=Vs<<4<<uo,wo|=(240&Us)<<uo}Zi.la=xo,ea.la=wo,$o.Hc=oo,$o.Gc=vs,$o.ia=43690&vs?0:fo.ia,Zo=!(oo|vs)}if(0<di.L&&(di.wa[di.Y+di.ja]=di.gd[ls.$b][ls.Za],di.wa[di.Y+di.ja].La|=!Zo),ko.Ka)return qs(ms,7,"Premature end-of-file encountered.")}if(da(ms),di=vo,ko=1,ls=(Ei=ms).D,Zi=0<Ei.L&&Ei.M>=Ei.zb&&Ei.M<=Ei.Va,Ei.Aa==0)t:{if(ls.M=Ei.M,ls.uc=Zi,La(Ei,ls),ko=1,ls=(ks=Ei.D).Nb,Zi=(vs=pu[Ei.L])*Ei.R,Ks=vs/2*Ei.B,Is=16*ls*Ei.R,ma=8*ls*Ei.B,Zo=Ei.sa,$o=Ei.ta-Zi+Is,fo=Ei.qa,ds=Ei.ra-Ks+ma,Go=Ei.Ha,ea=Ei.Ia-Ks+ma,Us=(Vs=ks.M)==0,oo=Vs>=Ei.Va-1,Ei.Aa==2&&La(Ei,ks),ks.uc)for(Bo=(Bs=Ei).D.M,e(Bs.D.uc),ks=Bs.yb;ks<Bs.Hb;++ks){wo=ks,xo=Bo;var aa=(za=(Oo=Bs).D).Nb;uo=Oo.R;var za=za.wa[za.Y+wo],Ro=Oo.sa,Co=Oo.ta+16*aa*uo+16*wo,ga=za.dd,zs=za.tc;if(zs!=0)if(e(3<=zs),Oo.L==1)0<wo&&Oc(Ro,Co,uo,zs+4),za.La&&au(Ro,Co,uo,zs),0<xo&&cc(Ro,Co,uo,zs+4),za.La&&Bu(Ro,Co,uo,zs);else{var ya=Oo.B,sl=Oo.qa,ml=Oo.ra+8*aa*ya+8*wo,ta=Oo.Ha,Oo=Oo.Ia+8*aa*ya+8*wo;aa=za.ld,0<wo&&(Cc(Ro,Co,uo,zs+4,ga,aa),rd(sl,ml,ta,Oo,ya,zs+4,ga,aa)),za.La&&(ou(Ro,Co,uo,zs,ga,aa),xu(sl,ml,ta,Oo,ya,zs,ga,aa)),0<xo&&(Rc(Ro,Co,uo,zs+4,ga,aa),ac(sl,ml,ta,Oo,ya,zs+4,ga,aa)),za.La&&(sd(Ro,Co,uo,zs,ga,aa),uc(sl,ml,ta,Oo,ya,zs,ga,aa))}}if(Ei.ia&&alert("todo:DitherRow"),di.put!=null){if(ks=16*Vs,Vs=16*(Vs+1),Us?(di.y=Ei.sa,di.O=Ei.ta+Is,di.f=Ei.qa,di.N=Ei.ra+ma,di.ea=Ei.Ha,di.W=Ei.Ia+ma):(ks-=vs,di.y=Zo,di.O=$o,di.f=fo,di.N=ds,di.ea=Go,di.W=ea),oo||(Vs-=vs),Vs>di.o&&(Vs=di.o),di.F=null,di.J=null,Ei.Fa!=null&&0<Ei.Fa.length&&ks<Vs&&(di.J=jo(Ei,di,ks,Vs-ks),di.F=Ei.mb,di.F==null&&di.F.length==0)){ko=qs(Ei,3,"Could not decode alpha data.");break t}ks<di.j&&(vs=di.j-ks,ks=di.j,e(!(1&vs)),di.O+=Ei.R*vs,di.N+=Ei.B*(vs>>1),di.W+=Ei.B*(vs>>1),di.F!=null&&(di.J+=di.width*vs)),ks<Vs&&(di.O+=di.v,di.N+=di.v>>1,di.W+=di.v>>1,di.F!=null&&(di.J+=di.v),di.ka=ks-di.j,di.U=di.va-di.v,di.T=Vs-ks,ko=di.put(di))}ls+1!=Ei.Ic||oo||(Te(Ei.sa,Ei.ta-Zi,Zo,$o+16*Ei.R,Zi),Te(Ei.qa,Ei.ra-Ks,fo,ds+8*Ei.B,Ks),Te(Ei.Ha,Ei.Ia-Ks,Go,ea+8*Ei.B,Ks))}if(!ko)return qs(ms,6,"Output aborted.")}return 1}(nr,fr)),fr.bc!=null&&fr.bc(fr),xr&=1}return xr?(nr.cb=0,xr):0})(Qe,Rn)||(pn=Qe.a)}}else pn=Qe.a}pn==0&&Wn.Oa!=null&&Wn.Oa.fd&&(pn=Aa(Wn.ba))}Wn=pn}zn=Wn!=0?null:11>zn?Kn.f.RGBA.eb:Kn.f.kb.y}else zn=null;return zn};var Xu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Ve(dn,vn){for(var bn="",Tn=0;Tn<4;Tn++)bn+=String.fromCharCode(dn[vn++]);return bn}function Be(dn,vn){return dn[vn+0]|dn[vn+1]<<8}function Me(dn,vn){return(dn[vn+0]|dn[vn+1]<<8|dn[vn+2]<<16)>>>0}function Oe(dn,vn){return(dn[vn+0]|dn[vn+1]<<8|dn[vn+2]<<16|dn[vn+3]<<24)>>>0}new $e;var Ue=[0],ze=[0],He=[],Ge=new $e,Ke=n,Xe=function(dn,vn){var bn={},Tn=0,En=!1,In=0,Nn=0;if(bn.frames=[],!function(Cn,kn){for(var Yn=0;Yn<4;Yn++)if(Cn[kn+Yn]!="RIFF".charCodeAt(Yn))return!0;return!1}(dn,vn)){for(Oe(dn,vn+=4),vn+=8;vn<dn.length;){var On=Ve(dn,vn),Fn=Oe(dn,vn+=4);vn+=4;var $n=Fn+(1&Fn);switch(On){case"VP8 ":case"VP8L":bn.frames[Tn]===void 0&&(bn.frames[Tn]={}),(Un=bn.frames[Tn]).src_off=En?Nn:vn-8,Un.src_size=In+Fn+8,Tn++,En&&(En=!1,In=0,Nn=0);break;case"VP8X":(Un=bn.header={}).feature_flags=dn[vn];var Hn=vn+4;Un.canvas_width=1+Me(dn,Hn),Hn+=3,Un.canvas_height=1+Me(dn,Hn),Hn+=3;break;case"ALPH":En=!0,In=$n+8,Nn=vn-8;break;case"ANIM":(Un=bn.header).bgcolor=Oe(dn,vn),Hn=vn+4,Un.loop_count=Be(dn,Hn),Hn+=2;break;case"ANMF":var Dn,Un;(Un=bn.frames[Tn]={}).offset_x=2*Me(dn,vn),vn+=3,Un.offset_y=2*Me(dn,vn),vn+=3,Un.width=1+Me(dn,vn),vn+=3,Un.height=1+Me(dn,vn),vn+=3,Un.duration=Me(dn,vn),vn+=3,Dn=dn[vn++],Un.dispose=1&Dn,Un.blend=Dn>>1&1}On!="ANMF"&&(vn+=$n)}return bn}}(Ke,0);Xe.response=Ke,Xe.rgbaoutput=!0,Xe.dataurl=!1;var Je=Xe.header?Xe.header:null,un=Xe.frames?Xe.frames:null;if(Je){Je.loop_counter=Je.loop_count,Ue=[Je.canvas_height],ze=[Je.canvas_width];for(var fn=0;fn<un.length&&un[fn].blend!=0;fn++);}var yn=un[0],gn=Ge.WebPDecodeRGBA(Ke,yn.src_off,yn.src_size,ze,Ue);yn.rgba=gn,yn.imgwidth=ze[0],yn.imgheight=Ue[0];for(var mn=0;mn<ze[0]*Ue[0]*4;mn++)He[mn]=gn[mn];return this.width=ze,this.height=Ue,this.data=He,this}(function(n){var e,t,Te,Ee,Re,Ce,De,$e,Ve,Be=function(Cn){return Cn=Cn||{},this.isStrokeTransparent=Cn.isStrokeTransparent||!1,this.strokeOpacity=Cn.strokeOpacity||1,this.strokeStyle=Cn.strokeStyle||"#000000",this.fillStyle=Cn.fillStyle||"#000000",this.isFillTransparent=Cn.isFillTransparent||!1,this.fillOpacity=Cn.fillOpacity||1,this.font=Cn.font||"10px sans-serif",this.textBaseline=Cn.textBaseline||"alphabetic",this.textAlign=Cn.textAlign||"left",this.lineWidth=Cn.lineWidth||1,this.lineJoin=Cn.lineJoin||"miter",this.lineCap=Cn.lineCap||"butt",this.path=Cn.path||[],this.transform=Cn.transform!==void 0?Cn.transform.clone():new $e,this.globalCompositeOperation=Cn.globalCompositeOperation||"normal",this.globalAlpha=Cn.globalAlpha||1,this.clip_path=Cn.clip_path||[],this.currentPoint=Cn.currentPoint||new Ce,this.miterLimit=Cn.miterLimit||10,this.lastPoint=Cn.lastPoint||new Ce,this.lineDashOffset=Cn.lineDashOffset||0,this.lineDash=Cn.lineDash||[],this.margin=Cn.margin||[0,0,0,0],this.prevPageLastElemOffset=Cn.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Cn.ignoreClearRect!="boolean"||Cn.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new Me(this),e=this.internal.f2,t=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,Ee=this.internal.getHorizontalCoordinate,Re=this.internal.getVerticalCoordinate,Ce=this.internal.Point,De=this.internal.Rectangle,$e=this.internal.Matrix,Ve=new Be}]);var Me=function(Cn){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var kn=Cn;Object.defineProperty(this,"pdf",{get:function(){return kn}});var Yn=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Yn},set:function(Tr){Yn=!!Tr}});var Jn=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Jn},set:function(Tr){Jn=!!Tr}});var sr=0;Object.defineProperty(this,"posX",{get:function(){return sr},set:function(Tr){isNaN(Tr)||(sr=Tr)}});var lr=0;Object.defineProperty(this,"posY",{get:function(){return lr},set:function(Tr){isNaN(Tr)||(lr=Tr)}}),Object.defineProperty(this,"margin",{get:function(){return Ve.margin},set:function(Tr){var rr;typeof Tr=="number"?rr=[Tr,Tr,Tr,Tr]:((rr=new Array(4))[0]=Tr[0],rr[1]=Tr.length>=2?Tr[1]:rr[0],rr[2]=Tr.length>=3?Tr[2]:rr[0],rr[3]=Tr.length>=4?Tr[3]:rr[1]),Ve.margin=rr}});var mr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return mr},set:function(Tr){mr=Tr}});var gr=0;Object.defineProperty(this,"lastBreak",{get:function(){return gr},set:function(Tr){gr=Tr}});var Er=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Er},set:function(Tr){Er=Tr}}),Object.defineProperty(this,"ctx",{get:function(){return Ve},set:function(Tr){Tr instanceof Be&&(Ve=Tr)}}),Object.defineProperty(this,"path",{get:function(){return Ve.path},set:function(Tr){Ve.path=Tr}});var $r=[];Object.defineProperty(this,"ctxStack",{get:function(){return $r},set:function(Tr){$r=Tr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Tr){var rr;rr=Oe(Tr),this.ctx.fillStyle=rr.style,this.ctx.isFillTransparent=rr.a===0,this.ctx.fillOpacity=rr.a,this.pdf.setFillColor(rr.r,rr.g,rr.b,{a:rr.a}),this.pdf.setTextColor(rr.r,rr.g,rr.b,{a:rr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Tr){var rr=Oe(Tr);this.ctx.strokeStyle=rr.style,this.ctx.isStrokeTransparent=rr.a===0,this.ctx.strokeOpacity=rr.a,rr.a===0?this.pdf.setDrawColor(255,255,255):(rr.a,this.pdf.setDrawColor(rr.r,rr.g,rr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Tr){["butt","round","square"].indexOf(Tr)!==-1&&(this.ctx.lineCap=Tr,this.pdf.setLineCap(Tr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Tr){isNaN(Tr)||(this.ctx.lineWidth=Tr,this.pdf.setLineWidth(Tr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Tr){["bevel","round","miter"].indexOf(Tr)!==-1&&(this.ctx.lineJoin=Tr,this.pdf.setLineJoin(Tr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Tr){isNaN(Tr)||(this.ctx.miterLimit=Tr,this.pdf.setMiterLimit(Tr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Tr){this.ctx.textBaseline=Tr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Tr){["right","end","center","left","start"].indexOf(Tr)!==-1&&(this.ctx.textAlign=Tr)}});var Yr=null,Gr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Gr},set:function(Tr){Yr=null,Gr=Tr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Tr){var rr;if(this.ctx.font=Tr,(rr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Tr))!==null){var Ni=rr[1];rr[2];var Ai=rr[3],bi=rr[4];rr[5];var Wr=rr[6],hi=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bi)[2];bi=Math.floor(hi==="px"?parseFloat(bi)*this.pdf.internal.scaleFactor:hi==="em"?parseFloat(bi)*this.pdf.getFontSize():parseFloat(bi)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bi);var ei=function(si){var fi,Li,$i=[],zr=si.trim();if(zr==="")return Jt;if(zr in Mt)return[Mt[zr]];for(;zr!=="";){switch(Li=null,fi=(zr=Et(zr)).charAt(0)){case'"':case"'":Li=Rt(zr.substring(1),fi);break;default:Li=Dt(zr)}if(Li===null||($i.push(Li[0]),(zr=Et(Li[1]))!==""&&zr.charAt(0)!==","))return Jt;zr=zr.replace(/^,/,"")}return $i}(Wr);if(this.fontFaces){var gi=function(si,fi){if(Yr===null){var Li=function($i){var zr=[];return Object.keys($i).forEach(function(Ii){$i[Ii].forEach(function(Ui){var wi=null;switch(Ui){case"bold":wi={family:Ii,weight:"bold"};break;case"italic":wi={family:Ii,style:"italic"};break;case"bolditalic":wi={family:Ii,weight:"bold",style:"italic"};break;case"":case"normal":wi={family:Ii}}wi!==null&&(wi.ref={name:Ii,style:Ui},zr.push(wi))})}),zr}(si.getFontList());Yr=function($i){for(var zr={},Ii=0;Ii<$i.length;++Ii){var Ui=Ct($i[Ii]),wi=Ui.family,Ri=Ui.stretch,ci=Ui.style,ws=Ui.weight;zr[wi]=zr[wi]||{},zr[wi][Ri]=zr[wi][Ri]||{},zr[wi][Ri][ci]=zr[wi][Ri][ci]||{},zr[wi][Ri][ci][ws]=Ui}return zr}(Li.concat(fi))}return Yr}(this.pdf,this.fontFaces),mi=ei.map(function(si){return{family:si,stretch:"normal",weight:Ai,style:Ni}}),Hi=function(si,fi,Li){for(var $i=(Li=Li||{}).defaultFontFamily||"times",zr=Object.assign({},Bt,Li.genericFontFamilies||{}),Ii=null,Ui=null,wi=0;wi<fi.length;++wi)if(zr[(Ii=Ct(fi[wi])).family]&&(Ii.family=zr[Ii.family]),si.hasOwnProperty(Ii.family)){Ui=si[Ii.family];break}if(!(Ui=Ui||si[$i]))throw new Error("Could not find a font-family for the rule '"+qt(Ii)+"' and default family '"+$i+"'.");if(Ui=function(Ri,ci){if(ci[Ri])return ci[Ri];var ws=Ft[Ri],hs=ws<=Ft.normal?-1:1,rs=Ot(ci,kt,ws,hs);if(!rs)throw new Error("Could not find a matching font-stretch value for "+Ri);return rs}(Ii.stretch,Ui),Ui=function(Ri,ci){if(ci[Ri])return ci[Ri];for(var ws=Pt[Ri],hs=0;hs<ws.length;++hs)if(ci[ws[hs]])return ci[ws[hs]];throw new Error("Could not find a matching font-style for "+Ri)}(Ii.style,Ui),!(Ui=function(Ri,ci){if(ci[Ri])return ci[Ri];if(Ri===400&&ci[500])return ci[500];if(Ri===500&&ci[400])return ci[400];var ws=jt[Ri],hs=Ot(ci,It,ws,Ri<400?-1:1);if(!hs)throw new Error("Could not find a matching font-weight for value "+Ri);return hs}(Ii.weight,Ui)))throw new Error("Failed to resolve a font for the rule '"+qt(Ii)+"'.");return Ui}(gi,mi);this.pdf.setFont(Hi.ref.name,Hi.ref.style)}else{var oi="";(Ai==="bold"||parseInt(Ai,10)>=700||Ni==="bold")&&(oi="bold"),Ni==="italic"&&(oi+="italic"),oi.length===0&&(oi="normal");for(var yr="",Fr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qr=0;Qr<ei.length;Qr++){if(this.pdf.internal.getFont(ei[Qr],oi,{noFallback:!0,disableWarning:!0})!==void 0){yr=ei[Qr];break}if(oi==="bolditalic"&&this.pdf.internal.getFont(ei[Qr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)yr=ei[Qr],oi="bold";else if(this.pdf.internal.getFont(ei[Qr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){yr=ei[Qr],oi="normal";break}}if(yr===""){for(var Kr=0;Kr<ei.length;Kr++)if(Fr[ei[Kr]]){yr=Fr[ei[Kr]];break}}yr=yr===""?"Times":yr,this.pdf.setFont(yr,oi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Tr){this.ctx.globalCompositeOperation=Tr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Tr){this.ctx.globalAlpha=Tr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Tr){this.ctx.lineDashOffset=Tr,Un.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Tr){this.ctx.lineDash=Tr,Un.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Tr){this.ctx.ignoreClearRect=!!Tr}})};Me.prototype.setLineDash=function(Cn){this.lineDash=Cn},Me.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Me.prototype.fill=function(){un.call(this,"fill",!1)},Me.prototype.stroke=function(){un.call(this,"stroke",!1)},Me.prototype.beginPath=function(){this.path=[{type:"begin"}]},Me.prototype.moveTo=function(Cn,kn){if(isNaN(Cn)||isNaN(kn))throw o.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Yn=this.ctx.transform.applyToPoint(new Ce(Cn,kn));this.path.push({type:"mt",x:Yn.x,y:Yn.y}),this.ctx.lastPoint=new Ce(Cn,kn)},Me.prototype.closePath=function(){var Cn=new Ce(0,0),kn=0;for(kn=this.path.length-1;kn!==-1;kn--)if(this.path[kn].type==="begin"&&_typeof(this.path[kn+1])==="object"&&typeof this.path[kn+1].x=="number"){Cn=new Ce(this.path[kn+1].x,this.path[kn+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Ce(Cn.x,Cn.y)},Me.prototype.lineTo=function(Cn,kn){if(isNaN(Cn)||isNaN(kn))throw o.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Yn=this.ctx.transform.applyToPoint(new Ce(Cn,kn));this.path.push({type:"lt",x:Yn.x,y:Yn.y}),this.ctx.lastPoint=new Ce(Yn.x,Yn.y)},Me.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),un.call(this,null,!0)},Me.prototype.quadraticCurveTo=function(Cn,kn,Yn,Jn){if(isNaN(Yn)||isNaN(Jn)||isNaN(Cn)||isNaN(kn))throw o.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var sr=this.ctx.transform.applyToPoint(new Ce(Yn,Jn)),lr=this.ctx.transform.applyToPoint(new Ce(Cn,kn));this.path.push({type:"qct",x1:lr.x,y1:lr.y,x:sr.x,y:sr.y}),this.ctx.lastPoint=new Ce(sr.x,sr.y)},Me.prototype.bezierCurveTo=function(Cn,kn,Yn,Jn,sr,lr){if(isNaN(sr)||isNaN(lr)||isNaN(Cn)||isNaN(kn)||isNaN(Yn)||isNaN(Jn))throw o.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var mr=this.ctx.transform.applyToPoint(new Ce(sr,lr)),gr=this.ctx.transform.applyToPoint(new Ce(Cn,kn)),Er=this.ctx.transform.applyToPoint(new Ce(Yn,Jn));this.path.push({type:"bct",x1:gr.x,y1:gr.y,x2:Er.x,y2:Er.y,x:mr.x,y:mr.y}),this.ctx.lastPoint=new Ce(mr.x,mr.y)},Me.prototype.arc=function(Cn,kn,Yn,Jn,sr,lr){if(isNaN(Cn)||isNaN(kn)||isNaN(Yn)||isNaN(Jn)||isNaN(sr))throw o.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(lr=!!lr,!this.ctx.transform.isIdentity){var mr=this.ctx.transform.applyToPoint(new Ce(Cn,kn));Cn=mr.x,kn=mr.y;var gr=this.ctx.transform.applyToPoint(new Ce(0,Yn)),Er=this.ctx.transform.applyToPoint(new Ce(0,0));Yn=Math.sqrt(Math.pow(gr.x-Er.x,2)+Math.pow(gr.y-Er.y,2))}Math.abs(sr-Jn)>=2*Math.PI&&(Jn=0,sr=2*Math.PI),this.path.push({type:"arc",x:Cn,y:kn,radius:Yn,startAngle:Jn,endAngle:sr,counterclockwise:lr})},Me.prototype.arcTo=function(Cn,kn,Yn,Jn,sr){throw new Error("arcTo not implemented.")},Me.prototype.rect=function(Cn,kn,Yn,Jn){if(isNaN(Cn)||isNaN(kn)||isNaN(Yn)||isNaN(Jn))throw o.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Cn,kn),this.lineTo(Cn+Yn,kn),this.lineTo(Cn+Yn,kn+Jn),this.lineTo(Cn,kn+Jn),this.lineTo(Cn,kn),this.lineTo(Cn+Yn,kn),this.lineTo(Cn,kn)},Me.prototype.fillRect=function(Cn,kn,Yn,Jn){if(isNaN(Cn)||isNaN(kn)||isNaN(Yn)||isNaN(Jn))throw o.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Ue.call(this)){var sr={};this.lineCap!=="butt"&&(sr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(sr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Cn,kn,Yn,Jn),this.fill(),sr.hasOwnProperty("lineCap")&&(this.lineCap=sr.lineCap),sr.hasOwnProperty("lineJoin")&&(this.lineJoin=sr.lineJoin)}},Me.prototype.strokeRect=function(Cn,kn,Yn,Jn){if(isNaN(Cn)||isNaN(kn)||isNaN(Yn)||isNaN(Jn))throw o.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");ze.call(this)||(this.beginPath(),this.rect(Cn,kn,Yn,Jn),this.stroke())},Me.prototype.clearRect=function(Cn,kn,Yn,Jn){if(isNaN(Cn)||isNaN(kn)||isNaN(Yn)||isNaN(Jn))throw o.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Cn,kn,Yn,Jn))},Me.prototype.save=function(Cn){Cn=typeof Cn!="boolean"||Cn;for(var kn=this.pdf.internal.getCurrentPageInfo().pageNumber,Yn=0;Yn<this.pdf.internal.getNumberOfPages();Yn++)this.pdf.setPage(Yn+1),this.pdf.internal.out("q");if(this.pdf.setPage(kn),Cn){this.ctx.fontSize=this.pdf.internal.getFontSize();var Jn=new Be(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Jn}},Me.prototype.restore=function(Cn){Cn=typeof Cn!="boolean"||Cn;for(var kn=this.pdf.internal.getCurrentPageInfo().pageNumber,Yn=0;Yn<this.pdf.internal.getNumberOfPages();Yn++)this.pdf.setPage(Yn+1),this.pdf.internal.out("Q");this.pdf.setPage(kn),Cn&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Me.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Oe=function(Cn){var kn,Yn,Jn,sr;if(Cn.isCanvasGradient===!0&&(Cn=Cn.getColor()),!Cn)return{r:0,g:0,b:0,a:0,style:Cn};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Cn))kn=0,Yn=0,Jn=0,sr=0;else{var lr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Cn);if(lr!==null)kn=parseInt(lr[1]),Yn=parseInt(lr[2]),Jn=parseInt(lr[3]),sr=1;else if((lr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Cn))!==null)kn=parseInt(lr[1]),Yn=parseInt(lr[2]),Jn=parseInt(lr[3]),sr=parseFloat(lr[4]);else{if(sr=1,typeof Cn=="string"&&Cn.charAt(0)!=="#"){var mr=new h(Cn);Cn=mr.ok?mr.toHex():"#000000"}Cn.length===4?(kn=Cn.substring(1,2),kn+=kn,Yn=Cn.substring(2,3),Yn+=Yn,Jn=Cn.substring(3,4),Jn+=Jn):(kn=Cn.substring(1,3),Yn=Cn.substring(3,5),Jn=Cn.substring(5,7)),kn=parseInt(kn,16),Yn=parseInt(Yn,16),Jn=parseInt(Jn,16)}}return{r:kn,g:Yn,b:Jn,a:sr,style:Cn}},Ue=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},ze=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Me.prototype.fillText=function(Cn,kn,Yn,Jn){if(isNaN(kn)||isNaN(Yn)||typeof Cn!="string")throw o.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Jn=isNaN(Jn)?void 0:Jn,!Ue.call(this)){var sr=$n(this.ctx.transform.rotation),lr=this.ctx.transform.scaleX;Tn.call(this,{text:Cn,x:kn,y:Yn,scale:lr,angle:sr,align:this.textAlign,maxWidth:Jn})}},Me.prototype.strokeText=function(Cn,kn,Yn,Jn){if(isNaN(kn)||isNaN(Yn)||typeof Cn!="string")throw o.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!ze.call(this)){Jn=isNaN(Jn)?void 0:Jn;var sr=$n(this.ctx.transform.rotation),lr=this.ctx.transform.scaleX;Tn.call(this,{text:Cn,x:kn,y:Yn,scale:lr,renderingMode:"stroke",angle:sr,align:this.textAlign,maxWidth:Jn})}},Me.prototype.measureText=function(Cn){if(typeof Cn!="string")throw o.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var kn=this.pdf,Yn=this.pdf.internal.scaleFactor,Jn=kn.internal.getFontSize(),sr=kn.getStringUnitWidth(Cn)*Jn/kn.internal.scaleFactor;return new function(lr){var mr=(lr=lr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return mr}}),this}({width:sr*=Math.round(96*Yn/72*1e4)/1e4})},Me.prototype.scale=function(Cn,kn){if(isNaN(Cn)||isNaN(kn))throw o.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Yn=new $e(Cn,0,0,kn,0,0);this.ctx.transform=this.ctx.transform.multiply(Yn)},Me.prototype.rotate=function(Cn){if(isNaN(Cn))throw o.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var kn=new $e(Math.cos(Cn),Math.sin(Cn),-Math.sin(Cn),Math.cos(Cn),0,0);this.ctx.transform=this.ctx.transform.multiply(kn)},Me.prototype.translate=function(Cn,kn){if(isNaN(Cn)||isNaN(kn))throw o.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Yn=new $e(1,0,0,1,Cn,kn);this.ctx.transform=this.ctx.transform.multiply(Yn)},Me.prototype.transform=function(Cn,kn,Yn,Jn,sr,lr){if(isNaN(Cn)||isNaN(kn)||isNaN(Yn)||isNaN(Jn)||isNaN(sr)||isNaN(lr))throw o.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var mr=new $e(Cn,kn,Yn,Jn,sr,lr);this.ctx.transform=this.ctx.transform.multiply(mr)},Me.prototype.setTransform=function(Cn,kn,Yn,Jn,sr,lr){Cn=isNaN(Cn)?1:Cn,kn=isNaN(kn)?0:kn,Yn=isNaN(Yn)?0:Yn,Jn=isNaN(Jn)?1:Jn,sr=isNaN(sr)?0:sr,lr=isNaN(lr)?0:lr,this.ctx.transform=new $e(Cn,kn,Yn,Jn,sr,lr)};var He=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Me.prototype.drawImage=function(Cn,kn,Yn,Jn,sr,lr,mr,gr,Er){var $r=this.pdf.getImageProperties(Cn),Yr=1,Gr=1,Tr=1,rr=1;Jn!==void 0&&gr!==void 0&&(Tr=gr/Jn,rr=Er/sr,Yr=$r.width/Jn*gr/Jn,Gr=$r.height/sr*Er/sr),lr===void 0&&(lr=kn,mr=Yn,kn=0,Yn=0),Jn!==void 0&&gr===void 0&&(gr=Jn,Er=sr),Jn===void 0&&gr===void 0&&(gr=$r.width,Er=$r.height);for(var Ni,Ai=this.ctx.transform.decompose(),bi=$n(Ai.rotate.shx),Wr=new $e,hi=(Wr=(Wr=(Wr=Wr.multiply(Ai.translate)).multiply(Ai.skew)).multiply(Ai.scale)).applyToRectangle(new De(lr-kn*Tr,mr-Yn*rr,Jn*Yr,sr*Gr)),ei=Ge.call(this,hi),gi=[],mi=0;mi<ei.length;mi+=1)gi.indexOf(ei[mi])===-1&&gi.push(ei[mi]);if(Je(gi),this.autoPaging)for(var Hi=gi[0],oi=gi[gi.length-1],yr=Hi;yr<oi+1;yr++){this.pdf.setPage(yr);var Fr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qr=yr===1?this.posY+this.margin[0]:this.margin[0],Kr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],si=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fi=yr===1?0:Kr+(yr-2)*si;if(this.ctx.clip_path.length!==0){var Li=this.path;Ni=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Xe(Ni,this.posX+this.margin[3],-fi+Qr+this.ctx.prevPageLastElemOffset),fn.call(this,"fill",!0),this.path=Li}var $i=JSON.parse(JSON.stringify(hi));$i=Xe([$i],this.posX+this.margin[3],-fi+Qr+this.ctx.prevPageLastElemOffset)[0];var zr=(yr>Hi||yr<oi)&&He.call(this);zr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fr,si,null).clip().discardPath()),this.pdf.addImage(Cn,"JPEG",$i.x,$i.y,$i.w,$i.h,null,null,bi),zr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Cn,"JPEG",hi.x,hi.y,hi.w,hi.h,null,null,bi)};var Ge=function(Cn,kn,Yn){var Jn=[];kn=kn||this.pdf.internal.pageSize.width,Yn=Yn||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var sr=this.posY+this.ctx.prevPageLastElemOffset;switch(Cn.type){default:case"mt":case"lt":Jn.push(Math.floor((Cn.y+sr)/Yn)+1);break;case"arc":Jn.push(Math.floor((Cn.y+sr-Cn.radius)/Yn)+1),Jn.push(Math.floor((Cn.y+sr+Cn.radius)/Yn)+1);break;case"qct":var lr=Hn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Cn.x1,Cn.y1,Cn.x,Cn.y);Jn.push(Math.floor((lr.y+sr)/Yn)+1),Jn.push(Math.floor((lr.y+lr.h+sr)/Yn)+1);break;case"bct":var mr=Dn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Cn.x1,Cn.y1,Cn.x2,Cn.y2,Cn.x,Cn.y);Jn.push(Math.floor((mr.y+sr)/Yn)+1),Jn.push(Math.floor((mr.y+mr.h+sr)/Yn)+1);break;case"rect":Jn.push(Math.floor((Cn.y+sr)/Yn)+1),Jn.push(Math.floor((Cn.y+Cn.h+sr)/Yn)+1)}for(var gr=0;gr<Jn.length;gr+=1)for(;this.pdf.internal.getNumberOfPages()<Jn[gr];)Ke.call(this);return Jn},Ke=function(){var Cn=this.fillStyle,kn=this.strokeStyle,Yn=this.font,Jn=this.lineCap,sr=this.lineWidth,lr=this.lineJoin;this.pdf.addPage(),this.fillStyle=Cn,this.strokeStyle=kn,this.font=Yn,this.lineCap=Jn,this.lineWidth=sr,this.lineJoin=lr},Xe=function(Cn,kn,Yn){for(var Jn=0;Jn<Cn.length;Jn++)switch(Cn[Jn].type){case"bct":Cn[Jn].x2+=kn,Cn[Jn].y2+=Yn;case"qct":Cn[Jn].x1+=kn,Cn[Jn].y1+=Yn;default:Cn[Jn].x+=kn,Cn[Jn].y+=Yn}return Cn},Je=function(Cn){return Cn.sort(function(kn,Yn){return kn-Yn})},un=function(Cn,kn){for(var Yn,Jn,sr=this.fillStyle,lr=this.strokeStyle,mr=this.lineCap,gr=this.lineWidth,Er=Math.abs(gr*this.ctx.transform.scaleX),$r=this.lineJoin,Yr=JSON.parse(JSON.stringify(this.path)),Gr=JSON.parse(JSON.stringify(this.path)),Tr=[],rr=0;rr<Gr.length;rr++)if(Gr[rr].x!==void 0)for(var Ni=Ge.call(this,Gr[rr]),Ai=0;Ai<Ni.length;Ai+=1)Tr.indexOf(Ni[Ai])===-1&&Tr.push(Ni[Ai]);for(var bi=0;bi<Tr.length;bi++)for(;this.pdf.internal.getNumberOfPages()<Tr[bi];)Ke.call(this);if(Je(Tr),this.autoPaging)for(var Wr=Tr[0],hi=Tr[Tr.length-1],ei=Wr;ei<hi+1;ei++){this.pdf.setPage(ei),this.fillStyle=sr,this.strokeStyle=lr,this.lineCap=mr,this.lineWidth=Er,this.lineJoin=$r;var gi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mi=ei===1?this.posY+this.margin[0]:this.margin[0],Hi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yr=ei===1?0:Hi+(ei-2)*oi;if(this.ctx.clip_path.length!==0){var Fr=this.path;Yn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Xe(Yn,this.posX+this.margin[3],-yr+mi+this.ctx.prevPageLastElemOffset),fn.call(this,Cn,!0),this.path=Fr}if(Jn=JSON.parse(JSON.stringify(Yr)),this.path=Xe(Jn,this.posX+this.margin[3],-yr+mi+this.ctx.prevPageLastElemOffset),kn===!1||ei===0){var Qr=(ei>Wr||ei<hi)&&He.call(this);Qr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gi,oi,null).clip().discardPath()),fn.call(this,Cn,kn),Qr&&this.pdf.restoreGraphicsState()}this.lineWidth=gr}else this.lineWidth=Er,fn.call(this,Cn,kn),this.lineWidth=gr;this.path=Yr},fn=function(Cn,kn){if((Cn!=="stroke"||kn||!ze.call(this))&&(Cn==="stroke"||kn||!Ue.call(this))){for(var Yn,Jn,sr=[],lr=this.path,mr=0;mr<lr.length;mr++){var gr=lr[mr];switch(gr.type){case"begin":sr.push({begin:!0});break;case"close":sr.push({close:!0});break;case"mt":sr.push({start:gr,deltas:[],abs:[]});break;case"lt":var Er=sr.length;if(lr[mr-1]&&!isNaN(lr[mr-1].x)&&(Yn=[gr.x-lr[mr-1].x,gr.y-lr[mr-1].y],Er>0)){for(;Er>=0;Er--)if(sr[Er-1].close!==!0&&sr[Er-1].begin!==!0){sr[Er-1].deltas.push(Yn),sr[Er-1].abs.push(gr);break}}break;case"bct":Yn=[gr.x1-lr[mr-1].x,gr.y1-lr[mr-1].y,gr.x2-lr[mr-1].x,gr.y2-lr[mr-1].y,gr.x-lr[mr-1].x,gr.y-lr[mr-1].y],sr[sr.length-1].deltas.push(Yn);break;case"qct":var $r=lr[mr-1].x+2/3*(gr.x1-lr[mr-1].x),Yr=lr[mr-1].y+2/3*(gr.y1-lr[mr-1].y),Gr=gr.x+2/3*(gr.x1-gr.x),Tr=gr.y+2/3*(gr.y1-gr.y),rr=gr.x,Ni=gr.y;Yn=[$r-lr[mr-1].x,Yr-lr[mr-1].y,Gr-lr[mr-1].x,Tr-lr[mr-1].y,rr-lr[mr-1].x,Ni-lr[mr-1].y],sr[sr.length-1].deltas.push(Yn);break;case"arc":sr.push({deltas:[],abs:[],arc:!0}),Array.isArray(sr[sr.length-1].abs)&&sr[sr.length-1].abs.push(gr)}}Jn=kn?null:Cn==="stroke"?"stroke":"fill";for(var Ai=!1,bi=0;bi<sr.length;bi++)if(sr[bi].arc)for(var Wr=sr[bi].abs,hi=0;hi<Wr.length;hi++){var ei=Wr[hi];ei.type==="arc"?mn.call(this,ei.x,ei.y,ei.radius,ei.startAngle,ei.endAngle,ei.counterclockwise,void 0,kn,!Ai):En.call(this,ei.x,ei.y),Ai=!0}else if(sr[bi].close===!0)this.pdf.internal.out("h"),Ai=!1;else if(sr[bi].begin!==!0){var gi=sr[bi].start.x,mi=sr[bi].start.y;In.call(this,sr[bi].deltas,gi,mi),Ai=!0}Jn&&dn.call(this,Jn),kn&&vn.call(this)}},yn=function(Cn){var kn=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Yn=kn*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Cn-Yn;case"top":return Cn+kn-Yn;case"hanging":return Cn+kn-2*Yn;case"middle":return Cn+kn/2-Yn;default:return Cn}},gn=function(Cn){return Cn+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Me.prototype.createLinearGradient=function(){var Cn=function(){};return Cn.colorStops=[],Cn.addColorStop=function(kn,Yn){this.colorStops.push([kn,Yn])},Cn.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Cn.isCanvasGradient=!0,Cn},Me.prototype.createPattern=function(){return this.createLinearGradient()},Me.prototype.createRadialGradient=function(){return this.createLinearGradient()};var mn=function(Cn,kn,Yn,Jn,sr,lr,mr,gr,Er){for(var $r=On.call(this,Yn,Jn,sr,lr),Yr=0;Yr<$r.length;Yr++){var Gr=$r[Yr];Yr===0&&(Er?bn.call(this,Gr.x1+Cn,Gr.y1+kn):En.call(this,Gr.x1+Cn,Gr.y1+kn)),Nn.call(this,Cn,kn,Gr.x2,Gr.y2,Gr.x3,Gr.y3,Gr.x4,Gr.y4)}gr?vn.call(this):dn.call(this,mr)},dn=function(Cn){switch(Cn){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},vn=function(){this.pdf.clip(),this.pdf.discardPath()},bn=function(Cn,kn){this.pdf.internal.out(t(Cn)+" "+Te(kn)+" m")},Tn=function(Cn){var kn;switch(Cn.align){case"right":case"end":kn="right";break;case"center":kn="center";break;default:kn="left"}var Yn=this.pdf.getTextDimensions(Cn.text),Jn=yn.call(this,Cn.y),sr=gn.call(this,Jn)-Yn.h,lr=this.ctx.transform.applyToPoint(new Ce(Cn.x,Jn)),mr=this.ctx.transform.decompose(),gr=new $e;gr=(gr=(gr=gr.multiply(mr.translate)).multiply(mr.skew)).multiply(mr.scale);for(var Er,$r,Yr,Gr=this.ctx.transform.applyToRectangle(new De(Cn.x,Jn,Yn.w,Yn.h)),Tr=gr.applyToRectangle(new De(Cn.x,sr,Yn.w,Yn.h)),rr=Ge.call(this,Tr),Ni=[],Ai=0;Ai<rr.length;Ai+=1)Ni.indexOf(rr[Ai])===-1&&Ni.push(rr[Ai]);if(Je(Ni),this.autoPaging)for(var bi=Ni[0],Wr=Ni[Ni.length-1],hi=bi;hi<Wr+1;hi++){this.pdf.setPage(hi);var ei=hi===1?this.posY+this.margin[0]:this.margin[0],gi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mi=this.pdf.internal.pageSize.height-this.margin[2],Hi=mi-this.margin[0],oi=this.pdf.internal.pageSize.width-this.margin[1],yr=oi-this.margin[3],Fr=hi===1?0:gi+(hi-2)*Hi;if(this.ctx.clip_path.length!==0){var Qr=this.path;Er=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Xe(Er,this.posX+this.margin[3],-1*Fr+ei),fn.call(this,"fill",!0),this.path=Qr}var Kr=Xe([JSON.parse(JSON.stringify(Tr))],this.posX+this.margin[3],-Fr+ei+this.ctx.prevPageLastElemOffset)[0];Cn.scale>=.01&&($r=this.pdf.internal.getFontSize(),this.pdf.setFontSize($r*Cn.scale),Yr=this.lineWidth,this.lineWidth=Yr*Cn.scale);var si=this.autoPaging!=="text";if(si||Kr.y+Kr.h<=mi){if(si||Kr.y>=ei&&Kr.x<=oi){var fi=si?Cn.text:this.pdf.splitTextToSize(Cn.text,Cn.maxWidth||oi-Kr.x)[0],Li=Xe([JSON.parse(JSON.stringify(Gr))],this.posX+this.margin[3],-Fr+ei+this.ctx.prevPageLastElemOffset)[0],$i=si&&(hi>bi||hi<Wr)&&He.call(this);$i&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yr,Hi,null).clip().discardPath()),this.pdf.text(fi,Li.x,Li.y,{angle:Cn.angle,align:kn,renderingMode:Cn.renderingMode}),$i&&this.pdf.restoreGraphicsState()}}else Kr.y<mi&&(this.ctx.prevPageLastElemOffset+=mi-Kr.y);Cn.scale>=.01&&(this.pdf.setFontSize($r),this.lineWidth=Yr)}else Cn.scale>=.01&&($r=this.pdf.internal.getFontSize(),this.pdf.setFontSize($r*Cn.scale),Yr=this.lineWidth,this.lineWidth=Yr*Cn.scale),this.pdf.text(Cn.text,lr.x+this.posX,lr.y+this.posY,{angle:Cn.angle,align:kn,renderingMode:Cn.renderingMode,maxWidth:Cn.maxWidth}),Cn.scale>=.01&&(this.pdf.setFontSize($r),this.lineWidth=Yr)},En=function(Cn,kn,Yn,Jn){Yn=Yn||0,Jn=Jn||0,this.pdf.internal.out(t(Cn+Yn)+" "+Te(kn+Jn)+" l")},In=function(Cn,kn,Yn){return this.pdf.lines(Cn,kn,Yn,null,null)},Nn=function(Cn,kn,Yn,Jn,sr,lr,mr,gr){this.pdf.internal.out([e(Ee(Yn+Cn)),e(Re(Jn+kn)),e(Ee(sr+Cn)),e(Re(lr+kn)),e(Ee(mr+Cn)),e(Re(gr+kn)),"c"].join(" "))},On=function(Cn,kn,Yn,Jn){for(var sr=2*Math.PI,lr=Math.PI/2;kn>Yn;)kn-=sr;var mr=Math.abs(Yn-kn);mr<sr&&Jn&&(mr=sr-mr);for(var gr=[],Er=Jn?-1:1,$r=kn;mr>1e-5;){var Yr=$r+Er*Math.min(mr,lr);gr.push(Fn.call(this,Cn,$r,Yr)),mr-=Math.abs(Yr-$r),$r=Yr}return gr},Fn=function(Cn,kn,Yn){var Jn=(Yn-kn)/2,sr=Cn*Math.cos(Jn),lr=Cn*Math.sin(Jn),mr=sr,gr=-lr,Er=mr*mr+gr*gr,$r=Er+mr*sr+gr*lr,Yr=4/3*(Math.sqrt(2*Er*$r)-$r)/(mr*lr-gr*sr),Gr=mr-Yr*gr,Tr=gr+Yr*mr,rr=Gr,Ni=-Tr,Ai=Jn+kn,bi=Math.cos(Ai),Wr=Math.sin(Ai);return{x1:Cn*Math.cos(kn),y1:Cn*Math.sin(kn),x2:Gr*bi-Tr*Wr,y2:Gr*Wr+Tr*bi,x3:rr*bi-Ni*Wr,y3:rr*Wr+Ni*bi,x4:Cn*Math.cos(Yn),y4:Cn*Math.sin(Yn)}},$n=function(Cn){return 180*Cn/Math.PI},Hn=function(Cn,kn,Yn,Jn,sr,lr){var mr=Cn+.5*(Yn-Cn),gr=kn+.5*(Jn-kn),Er=sr+.5*(Yn-sr),$r=lr+.5*(Jn-lr),Yr=Math.min(Cn,sr,mr,Er),Gr=Math.max(Cn,sr,mr,Er),Tr=Math.min(kn,lr,gr,$r),rr=Math.max(kn,lr,gr,$r);return new De(Yr,Tr,Gr-Yr,rr-Tr)},Dn=function(Cn,kn,Yn,Jn,sr,lr,mr,gr){var Er,$r,Yr,Gr,Tr,rr,Ni,Ai,bi,Wr,hi,ei,gi,mi,Hi=Yn-Cn,oi=Jn-kn,yr=sr-Yn,Fr=lr-Jn,Qr=mr-sr,Kr=gr-lr;for($r=0;$r<41;$r++)bi=(Ni=(Yr=Cn+(Er=$r/40)*Hi)+Er*((Tr=Yn+Er*yr)-Yr))+Er*(Tr+Er*(sr+Er*Qr-Tr)-Ni),Wr=(Ai=(Gr=kn+Er*oi)+Er*((rr=Jn+Er*Fr)-Gr))+Er*(rr+Er*(lr+Er*Kr-rr)-Ai),$r==0?(hi=bi,ei=Wr,gi=bi,mi=Wr):(hi=Math.min(hi,bi),ei=Math.min(ei,Wr),gi=Math.max(gi,bi),mi=Math.max(mi,Wr));return new De(Math.round(hi),Math.round(ei),Math.round(gi-hi),Math.round(mi-ei))},Un=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Cn,kn,Yn=(Cn=this.ctx.lineDash,kn=this.ctx.lineDashOffset,JSON.stringify({lineDash:Cn,lineDashOffset:kn}));this.prevLineDash!==Yn&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Yn)}}})(E.API),function(n){var e=function(Ce){var De,$e,Ve,Be,Me,Oe,Ue,ze,He,Ge;for($e=[],Ve=0,Be=(Ce+=De="\0\0\0\0".slice(Ce.length%4||4)).length;Be>Ve;Ve+=4)(Me=(Ce.charCodeAt(Ve)<<24)+(Ce.charCodeAt(Ve+1)<<16)+(Ce.charCodeAt(Ve+2)<<8)+Ce.charCodeAt(Ve+3))!==0?(Oe=(Me=((Me=((Me=((Me=(Me-(Ge=Me%85))/85)-(He=Me%85))/85)-(ze=Me%85))/85)-(Ue=Me%85))/85)%85,$e.push(Oe+33,Ue+33,ze+33,He+33,Ge+33)):$e.push(122);return function(Ke,Xe){for(var Je=Xe;Je>0;Je--)Ke.pop()}($e,De.length),String.fromCharCode.apply(String,$e)+"~>"},t=function(Ce){var De,$e,Ve,Be,Me,Oe=String,Ue="length",ze=255,He="charCodeAt",Ge="slice",Ke="replace";for(Ce[Ge](-2),Ce=Ce[Ge](0,-2)[Ke](/\s/g,"")[Ke]("z","!!!!!"),Ve=[],Be=0,Me=(Ce+=De="uuuuu"[Ge](Ce[Ue]%5||5))[Ue];Me>Be;Be+=5)$e=52200625*(Ce[He](Be)-33)+614125*(Ce[He](Be+1)-33)+7225*(Ce[He](Be+2)-33)+85*(Ce[He](Be+3)-33)+(Ce[He](Be+4)-33),Ve.push(ze&$e>>24,ze&$e>>16,ze&$e>>8,ze&$e);return function(Xe,Je){for(var un=Je;un>0;un--)Xe.pop()}(Ve,De[Ue]),Oe.fromCharCode.apply(Oe,Ve)},Te=function(Ce){return Ce.split("").map(function(De){return("0"+De.charCodeAt().toString(16)).slice(-2)}).join("")+">"},Ee=function(Ce){var De=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ce=Ce.replace(/\s/g,"")).indexOf(">")!==-1&&(Ce=Ce.substr(0,Ce.indexOf(">"))),Ce.length%2&&(Ce+="0"),De.test(Ce)===!1)return"";for(var $e="",Ve=0;Ve<Ce.length;Ve+=2)$e+=String.fromCharCode("0x"+(Ce[Ve]+Ce[Ve+1]));return $e},Re=function(Ce){for(var De=new Uint8Array(Ce.length),$e=Ce.length;$e--;)De[$e]=Ce.charCodeAt($e);return(De=zlibSync(De)).reduce(function(Ve,Be){return Ve+String.fromCharCode(Be)},"")};n.processDataByFilters=function(Ce,De){var $e=0,Ve=Ce||"",Be=[];for(typeof(De=De||[])=="string"&&(De=[De]),$e=0;$e<De.length;$e+=1)switch(De[$e]){case"ASCII85Decode":case"/ASCII85Decode":Ve=t(Ve),Be.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ve=e(Ve),Be.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ve=Ee(Ve),Be.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ve=Te(Ve),Be.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ve=Re(Ve),Be.push("/FlateDecode");break;default:throw new Error('The filter: "'+De[$e]+'" is not implemented')}return{data:Ve,reverseChain:Be.reverse().join(" ")}}}(E.API),function(n){n.loadFile=function(e,t,Te){return function(Ee,Re,Ce){Re=Re!==!1,Ce=typeof Ce=="function"?Ce:function(){};var De=void 0;try{De=function($e,Ve,Be){var Me=new XMLHttpRequest,Oe=0,Ue=function(ze){var He=ze.length,Ge=[],Ke=String.fromCharCode;for(Oe=0;Oe<He;Oe+=1)Ge.push(Ke(255&ze.charCodeAt(Oe)));return Ge.join("")};if(Me.open("GET",$e,!Ve),Me.overrideMimeType("text/plain; charset=x-user-defined"),Ve===!1&&(Me.onload=function(){Me.status===200?Be(Ue(this.responseText)):Be(void 0)}),Me.send(null),Ve&&Me.status===200)return Ue(Me.responseText)}(Ee,Re,Ce)}catch{}return De}(e,t,Te)},n.loadImageFile=n.loadFile}(E.API),function(n){function e(){return(i.html2canvas?Promise.resolve(i.html2canvas):__vitePreload(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(De){return Promise.reject(new Error("Could not load html2canvas: "+De))}).then(function(De){return De.default?De.default:De})}function t(){return(i.DOMPurify?Promise.resolve(i.DOMPurify):__vitePreload(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(De){return Promise.reject(new Error("Could not load dompurify: "+De))}).then(function(De){return De.default?De.default:De})}var Te=function(De){var $e=_typeof(De);return $e==="undefined"?"undefined":$e==="string"||De instanceof String?"string":$e==="number"||De instanceof Number?"number":$e==="function"||De instanceof Function?"function":De&&De.constructor===Array?"array":De&&De.nodeType===1?"element":$e==="object"?"object":"unknown"},Ee=function(De,$e){var Ve=document.createElement(De);for(var Be in $e.className&&(Ve.className=$e.className),$e.innerHTML&&$e.dompurify&&(Ve.innerHTML=$e.dompurify.sanitize($e.innerHTML)),$e.style)Ve.style[Be]=$e.style[Be];return Ve},Re=function De($e,Ve){for(var Be=$e.nodeType===3?document.createTextNode($e.nodeValue):$e.cloneNode(!1),Me=$e.firstChild;Me;Me=Me.nextSibling)Ve!==!0&&Me.nodeType===1&&Me.nodeName==="SCRIPT"||Be.appendChild(De(Me,Ve));return $e.nodeType===1&&($e.nodeName==="CANVAS"?(Be.width=$e.width,Be.height=$e.height,Be.getContext("2d").drawImage($e,0,0)):$e.nodeName!=="TEXTAREA"&&$e.nodeName!=="SELECT"||(Be.value=$e.value),Be.addEventListener("load",function(){Be.scrollTop=$e.scrollTop,Be.scrollLeft=$e.scrollLeft},!0)),Be},Ce=function De($e){var Ve=Object.assign(De.convert(Promise.resolve()),JSON.parse(JSON.stringify(De.template))),Be=De.convert(Promise.resolve(),Ve);return(Be=Be.setProgress(1,De,1,[De])).set($e)};(Ce.prototype=Object.create(Promise.prototype)).constructor=Ce,Ce.convert=function(De,$e){return De.__proto__=$e||Ce.prototype,De},Ce.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ce.prototype.from=function(De,$e){return this.then(function(){switch($e=$e||function(Ve){switch(Te(Ve)){case"string":return"string";case"element":return Ve.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(De),$e){case"string":return this.then(t).then(function(Ve){return this.set({src:Ee("div",{innerHTML:De,dompurify:Ve})})});case"element":return this.set({src:De});case"canvas":return this.set({canvas:De});case"img":return this.set({img:De});default:return this.error("Unknown source type.")}})},Ce.prototype.to=function(De){switch(De){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ce.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var De={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},$e=Re(this.prop.src,this.opt.html2canvas.javascriptEnabled);$e.tagName==="BODY"&&(De.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Ee("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Ee("div",{className:"html2pdf__container",style:De}),this.prop.container.appendChild($e),this.prop.container.firstChild.appendChild(Ee("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Ce.prototype.toCanvas=function(){var De=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(De).then(e).then(function($e){var Ve=Object.assign({},this.opt.html2canvas);return delete Ve.onrendered,$e(this.prop.container,Ve)}).then(function($e){(this.opt.html2canvas.onrendered||function(){})($e),this.prop.canvas=$e,document.body.removeChild(this.prop.overlay)})},Ce.prototype.toContext2d=function(){var De=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(De).then(e).then(function($e){var Ve=this.opt.jsPDF,Be=this.opt.fontFaces,Me=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Oe=Object.assign({async:!0,allowTaint:!0,scale:Me,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Oe.onrendered,Ve.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ve.context2d.posX=this.opt.x,Ve.context2d.posY=this.opt.y,Ve.context2d.margin=this.opt.margin,Ve.context2d.fontFaces=Be,Be)for(var Ue=0;Ue<Be.length;++Ue){var ze=Be[Ue],He=ze.src.find(function(Ge){return Ge.format==="truetype"});He&&Ve.addFont(He.url,ze.ref.name,ze.ref.style)}return Oe.windowHeight=Oe.windowHeight||0,Oe.windowHeight=Oe.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Oe.windowHeight,Ve.context2d.save(!0),$e(this.prop.container,Oe)}).then(function($e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})($e),this.prop.canvas=$e,document.body.removeChild(this.prop.overlay)})},Ce.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var De=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=De})},Ce.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Ce.prototype.output=function(De,$e,Ve){return(Ve=Ve||"pdf").toLowerCase()==="img"||Ve.toLowerCase()==="image"?this.outputImg(De,$e):this.outputPdf(De,$e)},Ce.prototype.outputPdf=function(De,$e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(De,$e)})},Ce.prototype.outputImg=function(De){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(De){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+De+'" is not supported.'}})},Ce.prototype.save=function(De){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(De?{filename:De}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ce.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Ce.prototype.set=function(De){if(Te(De)!=="object")return this;var $e=Object.keys(De||{}).map(function(Ve){if(Ve in Ce.template.prop)return function(){this.prop[Ve]=De[Ve]};switch(Ve){case"margin":return this.setMargin.bind(this,De.margin);case"jsPDF":return function(){return this.opt.jsPDF=De.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,De.pageSize);default:return function(){this.opt[Ve]=De[Ve]}}},this);return this.then(function(){return this.thenList($e)})},Ce.prototype.get=function(De,$e){return this.then(function(){var Ve=De in Ce.template.prop?this.prop[De]:this.opt[De];return $e?$e(Ve):Ve})},Ce.prototype.setMargin=function(De){return this.then(function(){switch(Te(De)){case"number":De=[De,De,De,De];case"array":if(De.length===2&&(De=[De[0],De[1],De[0],De[1]]),De.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=De}).then(this.setPageSize)},Ce.prototype.setPageSize=function(De){function $e(Ve,Be){return Math.floor(Ve*Be/72*96)}return this.then(function(){(De=De||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(De.inner={width:De.width-this.opt.margin[1]-this.opt.margin[3],height:De.height-this.opt.margin[0]-this.opt.margin[2]},De.inner.px={width:$e(De.inner.width,De.k),height:$e(De.inner.height,De.k)},De.inner.ratio=De.inner.height/De.inner.width),this.prop.pageSize=De})},Ce.prototype.setProgress=function(De,$e,Ve,Be){return De!=null&&(this.progress.val=De),$e!=null&&(this.progress.state=$e),Ve!=null&&(this.progress.n=Ve),Be!=null&&(this.progress.stack=Be),this.progress.ratio=this.progress.val/this.progress.state,this},Ce.prototype.updateProgress=function(De,$e,Ve,Be){return this.setProgress(De?this.progress.val+De:null,$e||null,Ve?this.progress.n+Ve:null,Be?this.progress.stack.concat(Be):null)},Ce.prototype.then=function(De,$e){var Ve=this;return this.thenCore(De,$e,function(Be,Me){return Ve.updateProgress(null,null,1,[Be]),Promise.prototype.then.call(this,function(Oe){return Ve.updateProgress(null,Be),Oe}).then(Be,Me).then(function(Oe){return Ve.updateProgress(1),Oe})})},Ce.prototype.thenCore=function(De,$e,Ve){Ve=Ve||Promise.prototype.then;var Be=this;De&&(De=De.bind(Be)),$e&&($e=$e.bind(Be));var Me=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?Be:Ce.convert(Object.assign({},Be),Promise.prototype),Oe=Ve.call(Me,De,$e);return Ce.convert(Oe,Be.__proto__)},Ce.prototype.thenExternal=function(De,$e){return Promise.prototype.then.call(this,De,$e)},Ce.prototype.thenList=function(De){var $e=this;return De.forEach(function(Ve){$e=$e.thenCore(Ve)}),$e},Ce.prototype.catch=function(De){De&&(De=De.bind(this));var $e=Promise.prototype.catch.call(this,De);return Ce.convert($e,this)},Ce.prototype.catchExternal=function(De){return Promise.prototype.catch.call(this,De)},Ce.prototype.error=function(De){return this.then(function(){throw new Error(De)})},Ce.prototype.using=Ce.prototype.set,Ce.prototype.saveAs=Ce.prototype.save,Ce.prototype.export=Ce.prototype.output,Ce.prototype.run=Ce.prototype.then,E.getPageSize=function(De,$e,Ve){if(_typeof(De)==="object"){var Be=De;De=Be.orientation,$e=Be.unit||$e,Ve=Be.format||Ve}$e=$e||"mm",Ve=Ve||"a4",De=(""+(De||"P")).toLowerCase();var Me,Oe=(""+Ve).toLowerCase(),Ue={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch($e){case"pt":Me=1;break;case"mm":Me=72/25.4;break;case"cm":Me=72/2.54;break;case"in":Me=72;break;case"px":Me=.75;break;case"pc":case"em":Me=12;break;case"ex":Me=6;break;default:throw"Invalid unit: "+$e}var ze,He=0,Ge=0;if(Ue.hasOwnProperty(Oe))He=Ue[Oe][1]/Me,Ge=Ue[Oe][0]/Me;else try{He=Ve[1],Ge=Ve[0]}catch{throw new Error("Invalid format: "+Ve)}if(De==="p"||De==="portrait")De="p",Ge>He&&(ze=Ge,Ge=He,He=ze);else{if(De!=="l"&&De!=="landscape")throw"Invalid orientation: "+De;De="l",He>Ge&&(ze=Ge,Ge=He,He=ze)}return{width:Ge,height:He,unit:$e,k:Me,orientation:De}},n.html=function(De,$e){($e=$e||{}).callback=$e.callback||function(){},$e.html2canvas=$e.html2canvas||{},$e.html2canvas.canvas=$e.html2canvas.canvas||this.canvas,$e.jsPDF=$e.jsPDF||this,$e.fontFaces=$e.fontFaces?$e.fontFaces.map(Ct):null;var Ve=new Ce($e);return $e.worker?Ve:Ve.from(De).doCallback()}}(E.API),E.API.addJS=function(n){return Ut=n,this.internal.events.subscribe("postPutResources",function(){Tt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Tt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ut+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Tt!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Tt+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,Te=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Ee=t.outline.render().split(/\r\n/),Re=0;Re<Ee.length;Re++){var Ce=Ee[Re],De=Te.exec(Ce);if(De!=null){var $e=De[1];t.internal.newObjectDeferredBegin($e,!1)}t.internal.write(Ce)}if(this.outline.createNamedDestinations){var Ve=this.internal.pages.length,Be=[];for(Re=0;Re<Ve;Re++){var Me=t.internal.newObject();Be.push(Me);var Oe=t.internal.getPageInfo(Re+1);t.internal.write("<< /D["+Oe.objId+" 0 R /XYZ null null null]>> endobj")}var Ue=t.internal.newObject();for(t.internal.write("<< /Names [ "),Re=0;Re<Be.length;Re++)t.internal.write("(page_"+(Re+1)+")"+Be[Re]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+Ue+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(Te,Ee,Re){var Ce={title:Ee,options:Re,children:[]};return Te==null&&(Te=this.root),Te.children.push(Ce),Ce},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(Te){Te.id=t.internal.newObjectDeferred();for(var Ee=0;Ee<Te.children.length;Ee++)this.genIds_r(Te.children[Ee])},t.outline.renderRoot=function(Te){this.objStart(Te),this.line("/Type /Outlines"),Te.children.length>0&&(this.line("/First "+this.makeRef(Te.children[0])),this.line("/Last "+this.makeRef(Te.children[Te.children.length-1]))),this.line("/Count "+this.count_r({count:0},Te)),this.objEnd()},t.outline.renderItems=function(Te){for(var Ee=this.ctx.pdf.internal.getVerticalCoordinateString,Re=0;Re<Te.children.length;Re++){var Ce=Te.children[Re];this.objStart(Ce),this.line("/Title "+this.makeString(Ce.title)),this.line("/Parent "+this.makeRef(Te)),Re>0&&this.line("/Prev "+this.makeRef(Te.children[Re-1])),Re<Te.children.length-1&&this.line("/Next "+this.makeRef(Te.children[Re+1])),Ce.children.length>0&&(this.line("/First "+this.makeRef(Ce.children[0])),this.line("/Last "+this.makeRef(Ce.children[Ce.children.length-1])));var De=this.count=this.count_r({count:0},Ce);if(De>0&&this.line("/Count "+De),Ce.options&&Ce.options.pageNumber){var $e=t.internal.getPageInfo(Ce.options.pageNumber);this.line("/Dest ["+$e.objId+" 0 R /XYZ 0 "+Ee(0)+" 0]")}this.objEnd()}for(var Ve=0;Ve<Te.children.length;Ve++)this.renderItems(Te.children[Ve])},t.outline.line=function(Te){this.ctx.val+=Te+`\r
`},t.outline.makeRef=function(Te){return Te.id+" 0 R"},t.outline.makeString=function(Te){return"("+t.internal.pdfEscape(Te)+")"},t.outline.objStart=function(Te){this.ctx.val+=`\r
`+Te.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(Te,Ee){for(var Re=0;Re<Ee.children.length;Re++)Te.count++,this.count_r(Te,Ee.children[Re]);return Te.count}}])}(E.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,Te,Ee,Re,Ce,De){var $e,Ve=this.decode.DCT_DECODE,Be=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=Ce||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,$e=function(Me){for(var Oe,Ue=256*Me.charCodeAt(4)+Me.charCodeAt(5),ze=Me.length,He={width:0,height:0,numcomponents:1},Ge=4;Ge<ze;Ge+=2){if(Ge+=Ue,e.indexOf(Me.charCodeAt(Ge+1))!==-1){Oe=256*Me.charCodeAt(Ge+5)+Me.charCodeAt(Ge+6),He={width:256*Me.charCodeAt(Ge+7)+Me.charCodeAt(Ge+8),height:Oe,numcomponents:Me.charCodeAt(Ge+9)};break}Ue=256*Me.charCodeAt(Ge+2)+Me.charCodeAt(Ge+3)}return He}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),$e.numcomponents){case 1:De=this.color_spaces.DEVICE_GRAY;break;case 4:De=this.color_spaces.DEVICE_CMYK;break;case 3:De=this.color_spaces.DEVICE_RGB}Be={data:t,width:$e.width,height:$e.height,colorSpace:De,bitsPerComponent:8,filter:Ve,index:Te,alias:Ee}}return Be}}(E.API),E.API.processPNG=function(n,e,t,Te){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var Ee,Re=decodePng(n,{checkCrc:!0}),Ce=Re.width,De=Re.height,$e=Re.channels,Ve=Re.palette,Be=Re.depth;Ee=Ve&&$e===1?function(gn){for(var mn=gn.width,dn=gn.height,vn=gn.data,bn=gn.palette,Tn=gn.depth,En=!1,In=[],Nn=[],On=void 0,Fn=!1,$n=0,Hn=0;Hn<bn.length;Hn++){var Dn=_slicedToArray(bn[Hn],4),Un=Dn[0],Cn=Dn[1],kn=Dn[2],Yn=Dn[3];In.push(Un,Cn,kn),Yn!=null&&(Yn===0?($n++,Nn.length<1&&Nn.push(Hn)):Yn<255&&(Fn=!0))}if(Fn||$n>1){En=!0,Nn=void 0;var Jn=mn*dn;On=new Uint8Array(Jn);for(var sr=new DataView(vn.buffer),lr=0;lr<Jn;lr++){var mr=re$1(sr,lr,Tn),gr=_slicedToArray(bn[mr],4)[3];On[lr]=gr}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:vn,alphaBytes:On,needSMask:En,palette:In,mask:Nn}}(Re):$e===2||$e===4?function(gn){for(var mn=gn.data,dn=gn.width,vn=gn.height,bn=gn.channels,Tn=gn.depth,En=bn===2?"DeviceGray":"DeviceRGB",In=bn-1,Nn=dn*vn,On=In,Fn=Nn*On,$n=1*Nn,Hn=Math.ceil(Fn*Tn/8),Dn=Math.ceil($n*Tn/8),Un=new Uint8Array(Hn),Cn=new Uint8Array(Dn),kn=new DataView(mn.buffer),Yn=new DataView(Un.buffer),Jn=new DataView(Cn.buffer),sr=!1,lr=0;lr<Nn;lr++){for(var mr=lr*bn,gr=0;gr<On;gr++)ie(Yn,re$1(kn,mr+gr,Tn),lr*On+gr,Tn);var Er=re$1(kn,mr+On,Tn);Er<(1<<Tn)-1&&(sr=!0),ie(Jn,Er,1*lr,Tn)}return{colorSpace:En,colorsPerPixel:In,colorBytes:Un,alphaBytes:Cn,needSMask:sr}}(Re):function(gn){var mn=gn.data,dn=gn.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:dn,colorsPerPixel:dn==="DeviceGray"?1:3,colorBytes:mn instanceof Uint8Array?mn:new Uint8Array(mn.buffer),needSMask:!1}}(Re);var Me,Oe,Ue,ze=Ee,He=ze.colorSpace,Ge=ze.colorsPerPixel,Ke=ze.colorBytes,Xe=ze.alphaBytes,Je=ze.needSMask,un=ze.palette,fn=ze.mask,yn=null;return Te!==E.API.image_compression.NONE&&typeof zlibSync=="function"?(yn=function(gn){var mn;switch(gn){case E.API.image_compression.FAST:mn=11;break;case E.API.image_compression.MEDIUM:mn=13;break;case E.API.image_compression.SLOW:mn=14;break;default:mn=12}return mn}(Te),Me=this.decode.FLATE_DECODE,Oe="/Predictor ".concat(yn," "),n=Xt(Ke,Ce*Ge,Ge,Te),Je&&(Ue=Xt(Xe,Ce,1,Te))):(Me=void 0,Oe="",n=Ke,Je&&(Ue=Xe)),Oe+="/Colors ".concat(Ge," /BitsPerComponent ").concat(Be," /Columns ").concat(Ce),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(Ue&&this.__addimage__.isArrayBuffer(Ue)||this.__addimage__.isArrayBufferView(Ue))&&(Ue=this.__addimage__.arrayBufferToBinaryString(Ue)),{alias:t,data:n,index:e,filter:Me,decodeParameters:Oe,transparency:fn,palette:un,sMask:Ue,predictor:yn,width:Ce,height:De,bitsPerComponent:Be,colorSpace:He}}},function(n){n.processGIF89A=function(e,t,Te,Ee){var Re=new oe(e),Ce=Re.width,De=Re.height,$e=[];Re.decodeAndBlitFrameRGBA(0,$e);var Ve={data:$e,width:Ce,height:De},Be=new ue(100).encode(Ve,100);return n.processJPEG.call(this,Be,t,Te,Ee)},n.processGIF87A=n.processGIF89A}(E.API),ce.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Re=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Ee,green:Te,blue:t,quad:Re}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ce.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){o.log("bit decode error:"+t)}},ce.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var Te=this.bottom_up?n:this.height-1-n,Ee=0;Ee<e;Ee++)for(var Re=this.datav.getUint8(this.pos++,!0),Ce=Te*this.width*4+8*Ee*4,De=0;De<8&&8*Ee+De<this.width;De++){var $e=this.palette[Re>>7-De&1];this.data[Ce+4*De]=$e.blue,this.data[Ce+4*De+1]=$e.green,this.data[Ce+4*De+2]=$e.red,this.data[Ce+4*De+3]=255}t!==0&&(this.pos+=4-t)}},ce.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var Te=this.bottom_up?t:this.height-1-t,Ee=0;Ee<n;Ee++){var Re=this.datav.getUint8(this.pos++,!0),Ce=Te*this.width*4+2*Ee*4,De=Re>>4,$e=15&Re,Ve=this.palette[De];if(this.data[Ce]=Ve.blue,this.data[Ce+1]=Ve.green,this.data[Ce+2]=Ve.red,this.data[Ce+3]=255,2*Ee+1>=this.width)break;Ve=this.palette[$e],this.data[Ce+4]=Ve.blue,this.data[Ce+4+1]=Ve.green,this.data[Ce+4+2]=Ve.red,this.data[Ce+4+3]=255}e!==0&&(this.pos+=4-e)}},ce.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,Te=0;Te<this.width;Te++){var Ee=this.datav.getUint8(this.pos++,!0),Re=t*this.width*4+4*Te;if(Ee<this.palette.length){var Ce=this.palette[Ee];this.data[Re]=Ce.red,this.data[Re+1]=Ce.green,this.data[Re+2]=Ce.blue,this.data[Re+3]=255}else this.data[Re]=255,this.data[Re+1]=255,this.data[Re+2]=255,this.data[Re+3]=255}n!==0&&(this.pos+=4-n)}},ce.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var Te=this.bottom_up?t:this.height-1-t,Ee=0;Ee<this.width;Ee++){var Re=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ce=(Re&e)/e*255|0,De=(Re>>5&e)/e*255|0,$e=(Re>>10&e)/e*255|0,Ve=Re>>15?255:0,Be=Te*this.width*4+4*Ee;this.data[Be]=$e,this.data[Be+1]=De,this.data[Be+2]=Ce,this.data[Be+3]=Ve}this.pos+=n}},ce.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),Te=this.height-1;Te>=0;Te--){for(var Ee=this.bottom_up?Te:this.height-1-Te,Re=0;Re<this.width;Re++){var Ce=this.datav.getUint16(this.pos,!0);this.pos+=2;var De=(Ce&e)/e*255|0,$e=(Ce>>5&t)/t*255|0,Ve=(Ce>>11)/e*255|0,Be=Ee*this.width*4+4*Re;this.data[Be]=Ve,this.data[Be+1]=$e,this.data[Be+2]=De,this.data[Be+3]=255}this.pos+=n}},ce.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var Te=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Re=this.datav.getUint8(this.pos++,!0),Ce=e*this.width*4+4*t;this.data[Ce]=Re,this.data[Ce+1]=Ee,this.data[Ce+2]=Te,this.data[Ce+3]=255}this.pos+=this.width%4}},ce.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var Te=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Re=this.datav.getUint8(this.pos++,!0),Ce=this.datav.getUint8(this.pos++,!0),De=e*this.width*4+4*t;this.data[De]=Re,this.data[De+1]=Ee,this.data[De+2]=Te,this.data[De+3]=Ce}},ce.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,Te,Ee){var Re=new ce(e,!1),Ce=Re.width,De=Re.height,$e={data:Re.getData(),width:Ce,height:De},Ve=new ue(100).encode($e,100);return n.processJPEG.call(this,Ve,t,Te,Ee)}}(E.API),le.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,Te,Ee){var Re=new le(e),Ce=Re.width,De=Re.height,$e={data:Re.getData(),width:Ce,height:De},Ve=new ue(100).encode($e,100);return n.processJPEG.call(this,Ve,t,Te,Ee)}}(E.API),E.API.processRGBA=function(n,e,t){for(var Te=n.data,Ee=Te.length,Re=new Uint8Array(Ee/4*3),Ce=new Uint8Array(Ee/4),De=0,$e=0,Ve=0;Ve<Ee;Ve+=4){var Be=Te[Ve],Me=Te[Ve+1],Oe=Te[Ve+2],Ue=Te[Ve+3];Re[De++]=Be,Re[De++]=Me,Re[De++]=Oe,Ce[$e++]=Ue}var ze=this.__addimage__.arrayBufferToBinaryString(Re);return{alpha:this.__addimage__.arrayBufferToBinaryString(Ce),data:ze,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},E.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ht=E.API,Wt=Ht.getCharWidthsArray=function(n,e){var t,Te,Ee=(e=e||{}).font||this.internal.getFont(),Re=e.fontSize||this.internal.getFontSize(),Ce=e.charSpace||this.internal.getCharSpace(),De=e.widths?e.widths:Ee.metadata.Unicode.widths,$e=De.fof?De.fof:1,Ve=e.kerning?e.kerning:Ee.metadata.Unicode.kerning,Be=Ve.fof?Ve.fof:1,Me=e.doKerning!==!1,Oe=0,Ue=n.length,ze=0,He=De[0]||$e,Ge=[];for(t=0;t<Ue;t++)Te=n.charCodeAt(t),typeof Ee.metadata.widthOfString=="function"?Ge.push((Ee.metadata.widthOfGlyph(Ee.metadata.characterToGlyph(Te))+Ce*(1e3/Re)||0)/1e3):(Oe=Me&&_typeof(Ve[Te])==="object"&&!isNaN(parseInt(Ve[Te][ze],10))?Ve[Te][ze]/Be:0,Ge.push((De[Te]||He)/$e+Oe)),ze=Te;return Ge},Vt=Ht.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),Te=e.font||this.internal.getFont(),Ee=e.charSpace||this.internal.getCharSpace();return Ht.processArabic&&(n=Ht.processArabic(n)),typeof Te.metadata.widthOfString=="function"?Te.metadata.widthOfString(n,t,Ee)/t:Wt.apply(this,arguments).reduce(function(Re,Ce){return Re+Ce},0)},Gt=function(n,e,t,Te){for(var Ee=[],Re=0,Ce=n.length,De=0;Re!==Ce&&De+e[Re]<t;)De+=e[Re],Re++;Ee.push(n.slice(0,Re));var $e=Re;for(De=0;Re!==Ce;)De+e[Re]>Te&&(Ee.push(n.slice($e,Re)),De=0,$e=Re),De+=e[Re],Re++;return $e!==Re&&Ee.push(n.slice($e,Re)),Ee},Yt=function(n,e,t){t||(t={});var Te,Ee,Re,Ce,De,$e,Ve,Be=[],Me=[Be],Oe=t.textIndent||0,Ue=0,ze=0,He=n.split(" "),Ge=Wt.apply(this,[" ",t])[0];if($e=t.lineIndent===-1?He[0].length+2:t.lineIndent||0){var Ke=Array($e).join(" "),Xe=[];He.map(function(un){(un=un.split(/\s*\n/)).length>1?Xe=Xe.concat(un.map(function(fn,yn){return(yn&&fn.length?`
`:"")+fn})):Xe.push(un[0])}),He=Xe,$e=Vt.apply(this,[Ke,t])}for(Re=0,Ce=He.length;Re<Ce;Re++){var Je=0;if(Te=He[Re],$e&&Te[0]==`
`&&(Te=Te.substr(1),Je=1),Oe+Ue+(ze=(Ee=Wt.apply(this,[Te,t])).reduce(function(un,fn){return un+fn},0))>e||Je){if(ze>e){for(De=Gt.apply(this,[Te,Ee,e-(Oe+Ue),e]),Be.push(De.shift()),Be=[De.pop()];De.length;)Me.push([De.shift()]);ze=Ee.slice(Te.length-(Be[0]?Be[0].length:0)).reduce(function(un,fn){return un+fn},0)}else Be=[Te];Me.push(Be),Oe=ze+$e,Ue=Ge}else Be.push(Te),Oe+=Ue+ze,Ue=Ge}return Ve=$e?function(un,fn){return(fn?Ke:"")+un.join(" ")}:function(un){return un.join(" ")},Me.map(Ve)},Ht.splitTextToSize=function(n,e,t){var Te,Ee=(t=t||{}).fontSize||this.internal.getFontSize(),Re=(function(Be){if(Be.widths&&Be.kerning)return{widths:Be.widths,kerning:Be.kerning};var Me=this.internal.getFont(Be.fontName,Be.fontStyle),Oe="Unicode";return Me.metadata[Oe]?{widths:Me.metadata[Oe].widths||{0:1},kerning:Me.metadata[Oe].kerning||{}}:{font:Me.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);Te=Array.isArray(n)?n:String(n).split(/\r?\n/);var Ce=1*this.internal.scaleFactor*e/Ee;Re.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/Ee:0,Re.lineIndent=t.lineIndent;var De,$e,Ve=[];for(De=0,$e=Te.length;De<$e;De++)Ve=Ve.concat(Yt.apply(this,[Te[De],Ce,Re]));return Ve},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",Te={},Ee={},Re=0;Re<16;Re++)Te[t[Re]]=e[Re],Ee[e[Re]]=t[Re];var Ce=function(Oe){return"0x"+parseInt(Oe,10).toString(16)},De=n.__fontmetrics__.compress=function(Oe){var Ue,ze,He,Ge,Ke=["{"];for(var Xe in Oe){if(Ue=Oe[Xe],isNaN(parseInt(Xe,10))?ze="'"+Xe+"'":(Xe=parseInt(Xe,10),ze=(ze=Ce(Xe).slice(2)).slice(0,-1)+Ee[ze.slice(-1)]),typeof Ue=="number")Ue<0?(He=Ce(Ue).slice(3),Ge="-"):(He=Ce(Ue).slice(2),Ge=""),He=Ge+He.slice(0,-1)+Ee[He.slice(-1)];else{if(_typeof(Ue)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Ue)+".");He=De(Ue)}Ke.push(ze+He)}return Ke.push("}"),Ke.join("")},$e=n.__fontmetrics__.uncompress=function(Oe){if(typeof Oe!="string")throw new Error("Invalid argument passed to uncompress.");for(var Ue,ze,He,Ge,Ke={},Xe=1,Je=Ke,un=[],fn="",yn="",gn=Oe.length-1,mn=1;mn<gn;mn+=1)(Ge=Oe[mn])=="'"?Ue?(He=Ue.join(""),Ue=void 0):Ue=[]:Ue?Ue.push(Ge):Ge=="{"?(un.push([Je,He]),Je={},He=void 0):Ge=="}"?((ze=un.pop())[0][ze[1]]=Je,He=void 0,Je=ze[0]):Ge=="-"?Xe=-1:He===void 0?Te.hasOwnProperty(Ge)?(fn+=Te[Ge],He=parseInt(fn,16)*Xe,Xe=1,fn=""):fn+=Ge:Te.hasOwnProperty(Ge)?(yn+=Te[Ge],Je[He]=parseInt(yn,16)*Xe,Xe=1,He=void 0,yn=""):yn+=Ge;return Ke},Ve={codePages:["WinAnsiEncoding"],WinAnsiEncoding:$e("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Be={Unicode:{Courier:Ve,"Courier-Bold":Ve,"Courier-BoldOblique":Ve,"Courier-Oblique":Ve,Helvetica:Ve,"Helvetica-Bold":Ve,"Helvetica-BoldOblique":Ve,"Helvetica-Oblique":Ve,"Times-Roman":Ve,"Times-Bold":Ve,"Times-BoldItalic":Ve,"Times-Italic":Ve}},Me={Unicode:{"Courier-Oblique":$e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":$e("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":$e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:$e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":$e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":$e("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:$e("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:$e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":$e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:$e("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":$e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":$e("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":$e("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":$e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(Oe){var Ue=Oe.font,ze=Me.Unicode[Ue.postScriptName];ze&&(Ue.metadata.Unicode={},Ue.metadata.Unicode.widths=ze.widths,Ue.metadata.Unicode.kerning=ze.kerning);var He=Be.Unicode[Ue.postScriptName];He&&(Ue.metadata.Unicode.encoding=He,Ue.encoding=He.codePages[0])}])}(E.API),function(n){var e=function(t){for(var Te=t.length,Ee=new Uint8Array(Te),Re=0;Re<Te;Re++)Ee[Re]=t.charCodeAt(Re);return Ee};n.API.events.push(["addFont",function(t){var Te=void 0,Ee=t.font,Re=t.instance;if(!Ee.isStandardFont){if(Re===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Ee.postScriptName+"').");if(typeof(Te=Re.existsFileInVFS(Ee.postScriptName)===!1?Re.loadFile(Ee.postScriptName):Re.getFileFromVFS(Ee.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Ee.postScriptName+"').");(function(Ce,De){De=/^\x00\x01\x00\x00/.test(De)?e(De):e(f(De)),Ce.metadata=n.API.TTFFont.open(De),Ce.metadata.Unicode=Ce.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Ce.metadata.glyIdsUsed=[0]})(Ee,Te)}}])}(E),E.API.addSvgAsImage=function(n,e,t,Te,Ee,Re,Ce,De){if(isNaN(e)||isNaN(t))throw o.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Te)||isNaN(Ee))throw o.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var $e=document.createElement("canvas");$e.width=Te,$e.height=Ee;var Ve=$e.getContext("2d");Ve.fillStyle="#fff",Ve.fillRect(0,0,$e.width,$e.height);var Be={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Me=this;return(i.canvg?Promise.resolve(i.canvg):__vitePreload(()=>import("./index.es-D75c2bpj.js"),[])).catch(function(Oe){return Promise.reject(new Error("Could not load canvg: "+Oe))}).then(function(Oe){return Oe.default?Oe.default:Oe}).then(function(Oe){return Oe.fromString(Ve,n,Be)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Oe){return Oe.render(Be)}).then(function(){Me.addImage($e.toDataURL("image/jpeg",1),e,t,Te,Ee,Ce,De)})},E.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var Te=1;Te<=this.internal.getNumberOfPages();Te++)for(var Ee=0;Ee<this.internal.pages[Te].length;Ee++)this.internal.pages[Te][Ee]=this.internal.pages[Te][Ee].replace(e,t);return this},E.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var Te,Ee,Re,Ce={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},De=Object.keys(Ce),$e=[],Ve=0,Be=0,Me=0;function Oe(ze,He){var Ge,Ke=!1;for(Ge=0;Ge<ze.length;Ge+=1)ze[Ge]===He&&(Ke=!0);return Ke}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Ce)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var Ue=De.length;for(Me=0;Me<Ue;Me+=1)t[De[Me]].value=t[De[Me]].defaultValue,t[De[Me]].explicitSet=!1}if(_typeof(n)==="object"){for(Ee in n)if(Re=n[Ee],Oe(De,Ee)&&Re!==void 0){if(t[Ee].type==="boolean"&&typeof Re=="boolean")t[Ee].value=Re;else if(t[Ee].type==="name"&&Oe(t[Ee].valueSet,Re))t[Ee].value=Re;else if(t[Ee].type==="integer"&&Number.isInteger(Re))t[Ee].value=Re;else if(t[Ee].type==="array"){for(Ve=0;Ve<Re.length;Ve+=1)if(Te=!0,Re[Ve].length===1&&typeof Re[Ve][0]=="number")$e.push(String(Re[Ve]-1));else if(Re[Ve].length>1){for(Be=0;Be<Re[Ve].length;Be+=1)typeof Re[Ve][Be]!="number"&&(Te=!1);Te===!0&&$e.push([Re[Ve][0]-1,Re[Ve][1]-1].join(" "))}t[Ee].value="["+$e.join(" ")+"]"}else t[Ee].value=t[Ee].defaultValue;t[Ee].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var ze,He=[];for(ze in t)t[ze].explicitSet===!0&&(t[ze].type==="name"?He.push("/"+ze+" /"+t[ze].value):He.push("/"+ze+" "+t[ze].value));He.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+He.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var Te='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Ee=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Re=unescape(encodeURIComponent(Te)),Ce=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),De=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),$e=unescape(encodeURIComponent("</x:xmpmeta>")),Ve=Re.length+Ce.length+De.length+Ee.length+$e.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Ve+" >>"),this.internal.write("stream"),this.internal.write(Ee+Re+Ce+De+$e),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(Te,Ee){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:Te,namespaceuri:Ee||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(n){var e=n.API,t=e.pdfEscape16=function(Re,Ce){for(var De,$e=Ce.metadata.Unicode.widths,Ve=["","0","00","000","0000"],Be=[""],Me=0,Oe=Re.length;Me<Oe;++Me){if(De=Ce.metadata.characterToGlyph(Re.charCodeAt(Me)),Ce.metadata.glyIdsUsed.push(De),Ce.metadata.toUnicode[De]=Re.charCodeAt(Me),$e.indexOf(De)==-1&&($e.push(De),$e.push([parseInt(Ce.metadata.widthOfGlyph(De),10)])),De=="0")return Be.join("");De=De.toString(16),Be.push(Ve[4-De.length],De)}return Be.join("")},Te=function(Re){var Ce,De,$e,Ve,Be,Me,Oe;for(Be=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,$e=[],Me=0,Oe=(De=Object.keys(Re).sort(function(Ue,ze){return Ue-ze})).length;Me<Oe;Me++)Ce=De[Me],$e.length>=100&&(Be+=`
`+$e.length+` beginbfchar
`+$e.join(`
`)+`
endbfchar`,$e=[]),Re[Ce]!==void 0&&Re[Ce]!==null&&typeof Re[Ce].toString=="function"&&(Ve=("0000"+Re[Ce].toString(16)).slice(-4),Ce=("0000"+(+Ce).toString(16)).slice(-4),$e.push("<"+Ce+"><"+Ve+">"));return $e.length&&(Be+=`
`+$e.length+` beginbfchar
`+$e.join(`
`)+`
endbfchar
`),Be+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Re){(function(Ce){var De=Ce.font,$e=Ce.out,Ve=Ce.newObject,Be=Ce.putStream;if(De.metadata instanceof n.API.TTFFont&&De.encoding==="Identity-H"){for(var Me=De.metadata.Unicode.widths,Oe=De.metadata.subset.encode(De.metadata.glyIdsUsed,1),Ue="",ze=0;ze<Oe.length;ze++)Ue+=String.fromCharCode(Oe[ze]);var He=Ve();Be({data:Ue,addLength1:!0,objectId:He}),$e("endobj");var Ge=Ve();Be({data:Te(De.metadata.toUnicode),addLength1:!0,objectId:Ge}),$e("endobj");var Ke=Ve();$e("<<"),$e("/Type /FontDescriptor"),$e("/FontName /"+j(De.fontName)),$e("/FontFile2 "+He+" 0 R"),$e("/FontBBox "+n.API.PDFObject.convert(De.metadata.bbox)),$e("/Flags "+De.metadata.flags),$e("/StemV "+De.metadata.stemV),$e("/ItalicAngle "+De.metadata.italicAngle),$e("/Ascent "+De.metadata.ascender),$e("/Descent "+De.metadata.decender),$e("/CapHeight "+De.metadata.capHeight),$e(">>"),$e("endobj");var Xe=Ve();$e("<<"),$e("/Type /Font"),$e("/BaseFont /"+j(De.fontName)),$e("/FontDescriptor "+Ke+" 0 R"),$e("/W "+n.API.PDFObject.convert(Me)),$e("/CIDToGIDMap /Identity"),$e("/DW 1000"),$e("/Subtype /CIDFontType2"),$e("/CIDSystemInfo"),$e("<<"),$e("/Supplement 0"),$e("/Registry (Adobe)"),$e("/Ordering ("+De.encoding+")"),$e(">>"),$e(">>"),$e("endobj"),De.objectNumber=Ve(),$e("<<"),$e("/Type /Font"),$e("/Subtype /Type0"),$e("/ToUnicode "+Ge+" 0 R"),$e("/BaseFont /"+j(De.fontName)),$e("/Encoding /"+De.encoding),$e("/DescendantFonts ["+Xe+" 0 R]"),$e(">>"),$e("endobj"),De.isAlreadyPutted=!0}})(Re)}]),e.events.push(["putFont",function(Re){(function(Ce){var De=Ce.font,$e=Ce.out,Ve=Ce.newObject,Be=Ce.putStream;if(De.metadata instanceof n.API.TTFFont&&De.encoding==="WinAnsiEncoding"){for(var Me=De.metadata.rawData,Oe="",Ue=0;Ue<Me.length;Ue++)Oe+=String.fromCharCode(Me[Ue]);var ze=Ve();Be({data:Oe,addLength1:!0,objectId:ze}),$e("endobj");var He=Ve();Be({data:Te(De.metadata.toUnicode),addLength1:!0,objectId:He}),$e("endobj");var Ge=Ve();$e("<<"),$e("/Descent "+De.metadata.decender),$e("/CapHeight "+De.metadata.capHeight),$e("/StemV "+De.metadata.stemV),$e("/Type /FontDescriptor"),$e("/FontFile2 "+ze+" 0 R"),$e("/Flags 96"),$e("/FontBBox "+n.API.PDFObject.convert(De.metadata.bbox)),$e("/FontName /"+j(De.fontName)),$e("/ItalicAngle "+De.metadata.italicAngle),$e("/Ascent "+De.metadata.ascender),$e(">>"),$e("endobj"),De.objectNumber=Ve();for(var Ke=0;Ke<De.metadata.hmtx.widths.length;Ke++)De.metadata.hmtx.widths[Ke]=parseInt(De.metadata.hmtx.widths[Ke]*(1e3/De.metadata.head.unitsPerEm));$e("<</Subtype/TrueType/Type/Font/ToUnicode "+He+" 0 R/BaseFont/"+j(De.fontName)+"/FontDescriptor "+Ge+" 0 R/Encoding/"+De.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(De.metadata.hmtx.widths)+">>"),$e("endobj"),De.isAlreadyPutted=!0}})(Re)}]);var Ee=function(Re){var Ce,De=Re.text||"",$e=Re.x,Ve=Re.y,Be=Re.options||{},Me=Re.mutex||{},Oe=Me.pdfEscape,Ue=Me.activeFontKey,ze=Me.fonts,He=Ue,Ge="",Ke=0,Xe="",Je=ze[He].encoding;if(ze[He].encoding!=="Identity-H")return{text:De,x:$e,y:Ve,options:Be,mutex:Me};for(Xe=De,He=Ue,Array.isArray(De)&&(Xe=De[0]),Ke=0;Ke<Xe.length;Ke+=1)ze[He].metadata.hasOwnProperty("cmap")&&(Ce=ze[He].metadata.cmap.unicode.codeMap[Xe[Ke].charCodeAt(0)]),Ce||Xe[Ke].charCodeAt(0)<256&&ze[He].metadata.hasOwnProperty("Unicode")?Ge+=Xe[Ke]:Ge+="";var un="";return parseInt(He.slice(1))<14||Je==="WinAnsiEncoding"?un=Oe(Ge,He).split("").map(function(fn){return fn.charCodeAt(0).toString(16)}).join(""):Je==="Identity-H"&&(un=t(Ge,ze[He])),Me.isHex=!0,{text:un,x:$e,y:Ve,options:Be,mutex:Me}};e.events.push(["postProcessText",function(Re){var Ce=Re.text||"",De=[],$e={text:Ce,x:Re.x,y:Re.y,options:Re.options,mutex:Re.mutex};if(Array.isArray(Ce)){var Ve=0;for(Ve=0;Ve<Ce.length;Ve+=1)Array.isArray(Ce[Ve])&&Ce[Ve].length===3?De.push([Ee(Object.assign({},$e,{text:Ce[Ve][0]})).text,Ce[Ve][1],Ce[Ve][2]]):De.push(Ee(Object.assign({},$e,{text:Ce[Ve]})).text);Re.text=De}else Re.text=Ee(Object.assign({},$e,{text:Ce})).text}])}(E),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,Te){return e.call(this),this.internal.vFS[t]=Te,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(Te){var Ee,Re,Ce,De,$e,Ve,Be,Me=e,Oe=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ue=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ze={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},He={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ge=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Ke=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Xe=!1,Je=0;this.__bidiEngine__={};var un=function(bn){var Tn=bn.charCodeAt(),En=Tn>>8,In=He[En];return In!==void 0?Me[256*In+(255&Tn)]:En===252||En===253?"AL":Ke.test(En)?"L":En===8?"R":"N"},fn=function(bn){for(var Tn,En=0;En<bn.length;En++){if((Tn=un(bn.charAt(En)))==="L")return!1;if(Tn==="R")return!0}return!1},yn=function(bn,Tn,En,In){var Nn,On,Fn,$n,Hn=Tn[In];switch(Hn){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Xe=!1;break;case"N":case"AN":break;case"EN":Xe&&(Hn="AN");break;case"AL":Xe=!0,Hn="R";break;case"WS":case"BN":Hn="N";break;case"CS":In<1||In+1>=Tn.length||(Nn=En[In-1])!=="EN"&&Nn!=="AN"||(On=Tn[In+1])!=="EN"&&On!=="AN"?Hn="N":Xe&&(On="AN"),Hn=On===Nn?On:"N";break;case"ES":Hn=(Nn=In>0?En[In-1]:"B")==="EN"&&In+1<Tn.length&&Tn[In+1]==="EN"?"EN":"N";break;case"ET":if(In>0&&En[In-1]==="EN"){Hn="EN";break}if(Xe){Hn="N";break}for(Fn=In+1,$n=Tn.length;Fn<$n&&Tn[Fn]==="ET";)Fn++;Hn=Fn<$n&&Tn[Fn]==="EN"?"EN":"N";break;case"NSM":if(Ce&&!De){for($n=Tn.length,Fn=In+1;Fn<$n&&Tn[Fn]==="NSM";)Fn++;if(Fn<$n){var Dn=bn[In],Un=Dn>=1425&&Dn<=2303||Dn===64286;if(Nn=Tn[Fn],Un&&(Nn==="R"||Nn==="AL")){Hn="R";break}}}Hn=In<1||(Nn=Tn[In-1])==="B"?"N":En[In-1];break;case"B":Xe=!1,Ee=!0,Hn=Je;break;case"S":Re=!0,Hn="N"}return Hn},gn=function(bn,Tn,En){var In=bn.split("");return En&&mn(In,En,{hiLevel:Je}),In.reverse(),Tn&&Tn.reverse(),In.join("")},mn=function(bn,Tn,En){var In,Nn,On,Fn,$n,Hn=-1,Dn=bn.length,Un=0,Cn=[],kn=Je?Ue:Oe,Yn=[];for(Xe=!1,Ee=!1,Re=!1,Nn=0;Nn<Dn;Nn++)Yn[Nn]=un(bn[Nn]);for(On=0;On<Dn;On++){if($n=Un,Cn[On]=yn(bn,Yn,Cn,On),In=240&(Un=kn[$n][ze[Cn[On]]]),Un&=15,Tn[On]=Fn=kn[Un][5],In>0)if(In===16){for(Nn=Hn;Nn<On;Nn++)Tn[Nn]=1;Hn=-1}else Hn=-1;if(kn[Un][6])Hn===-1&&(Hn=On);else if(Hn>-1){for(Nn=Hn;Nn<On;Nn++)Tn[Nn]=Fn;Hn=-1}Yn[On]==="B"&&(Tn[On]=0),En.hiLevel|=Fn}Re&&function(Jn,sr,lr){for(var mr=0;mr<lr;mr++)if(Jn[mr]==="S"){sr[mr]=Je;for(var gr=mr-1;gr>=0&&Jn[gr]==="WS";gr--)sr[gr]=Je}}(Yn,Tn,Dn)},dn=function(bn,Tn,En,In,Nn){if(!(Nn.hiLevel<bn)){if(bn===1&&Je===1&&!Ee)return Tn.reverse(),void(En&&En.reverse());for(var On,Fn,$n,Hn,Dn=Tn.length,Un=0;Un<Dn;){if(In[Un]>=bn){for($n=Un+1;$n<Dn&&In[$n]>=bn;)$n++;for(Hn=Un,Fn=$n-1;Hn<Fn;Hn++,Fn--)On=Tn[Hn],Tn[Hn]=Tn[Fn],Tn[Fn]=On,En&&(On=En[Hn],En[Hn]=En[Fn],En[Fn]=On);Un=$n}Un++}}},vn=function(bn,Tn,En){var In=bn.split(""),Nn={hiLevel:Je};return En||(En=[]),mn(In,En,Nn),function(On,Fn,$n){if($n.hiLevel!==0&&Be)for(var Hn,Dn=0;Dn<On.length;Dn++)Fn[Dn]===1&&(Hn=Ge.indexOf(On[Dn]))>=0&&(On[Dn]=Ge[Hn+1])}(In,En,Nn),dn(2,In,Tn,En,Nn),dn(1,In,Tn,En,Nn),In.join("")};return this.__bidiEngine__.doBidiReorder=function(bn,Tn,En){if(function(Nn,On){if(On)for(var Fn=0;Fn<Nn.length;Fn++)On[Fn]=Fn;De===void 0&&(De=fn(Nn)),Ve===void 0&&(Ve=fn(Nn))}(bn,Tn),Ce||!$e||Ve)if(Ce&&$e&&De^Ve)Je=De?1:0,bn=gn(bn,Tn,En);else if(!Ce&&$e&&Ve)Je=De?1:0,bn=vn(bn,Tn,En),bn=gn(bn,Tn);else if(!Ce||De||$e||Ve){if(Ce&&!$e&&De^Ve)bn=gn(bn,Tn),De?(Je=0,bn=vn(bn,Tn,En)):(Je=1,bn=vn(bn,Tn,En),bn=gn(bn,Tn));else if(Ce&&De&&!$e&&Ve)Je=1,bn=vn(bn,Tn,En),bn=gn(bn,Tn);else if(!Ce&&!$e&&De^Ve){var In=Be;De?(Je=1,bn=vn(bn,Tn,En),Je=0,Be=!1,bn=vn(bn,Tn,En),Be=In):(Je=0,bn=vn(bn,Tn,En),bn=gn(bn,Tn),Je=1,Be=!1,bn=vn(bn,Tn,En),Be=In,bn=gn(bn,Tn))}}else Je=0,bn=vn(bn,Tn,En);else Je=De?1:0,bn=vn(bn,Tn,En);return bn},this.__bidiEngine__.setOptions=function(bn){bn&&(Ce=bn.isInputVisual,$e=bn.isOutputVisual,De=bn.isInputRtl,Ve=bn.isOutputRtl,Be=bn.isSymmetricSwapping)},this.__bidiEngine__.setOptions(Te),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(Te){var Ee=Te.text;Te.x,Te.y;var Re=Te.options||{};Te.mutex,Re.lang;var Ce=[];if(Re.isInputVisual=typeof Re.isInputVisual!="boolean"||Re.isInputVisual,t.setOptions(Re),Object.prototype.toString.call(Ee)==="[object Array]"){var De=0;for(Ce=[],De=0;De<Ee.length;De+=1)Object.prototype.toString.call(Ee[De])==="[object Array]"?Ce.push([t.doBidiReorder(Ee[De][0]),Ee[De][1],Ee[De][2]]):Ce.push([t.doBidiReorder(Ee[De])]);Te.text=Ce}else Te.text=t.doBidiReorder(Ee);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new fe(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new je(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new de(this.contents),this.head=new me(this),this.name=new xe(this),this.cmap=new be(this),this.toUnicode={},this.hhea=new ye(this),this.maxp=new Ae(this),this.hmtx=new Se(this),this.post=new Ne(this),this.os2=new we(this),this.loca=new Ie(this),this.glyf=new Pe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,Te,Ee,Re;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Ce,De,$e,Ve;for(Ve=[],Ce=0,De=($e=this.bbox).length;Ce<De;Ce++)e=$e[Ce],Ve.push(Math.round(e*this.scaleFactor));return Ve}).call(this),this.stemV=0,this.post.exists?(Te=255&(Ee=this.post.italic_angle),32768&(t=Ee>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+Te)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Re=this.familyClass)===1||Re===2||Re===3||Re===4||Re===5||Re===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,Te){var Ee,Re,Ce,De;for(Ce=0,Re=0,De=(e=""+e).length;0<=De?Re<De:Re>De;Re=0<=De?++Re:--Re)Ee=e.charCodeAt(Re),Ce+=this.widthOfGlyph(this.characterToGlyph(Ee))+Te*(1e3/t)||0;return Ce*(t/1e3)},n.prototype.lineHeight=function(e,t){var Te;return t==null&&(t=!1),Te=t?this.lineGap:0,(this.ascender+Te-this.decender)/1e3*e},n}();var he,fe=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,Te;for(Te=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)Te[t]=String.fromCharCode(this.readByte());return Te.join("")},n.prototype.writeString=function(e){var t,Te,Ee;for(Ee=[],t=0,Te=e.length;0<=Te?t<Te:t>Te;t=0<=Te?++t:--t)Ee.push(this.writeByte(e.charCodeAt(t)));return Ee},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,Te,Ee,Re,Ce,De,$e;return e=this.readByte(),t=this.readByte(),Te=this.readByte(),Ee=this.readByte(),Re=this.readByte(),Ce=this.readByte(),De=this.readByte(),$e=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^Te)+4294967296*(255^Ee)+16777216*(255^Re)+65536*(255^Ce)+256*(255^De)+(255^$e)+1):72057594037927940*e+281474976710656*t+1099511627776*Te+4294967296*Ee+16777216*Re+65536*Ce+256*De+$e},n.prototype.writeLongLong=function(e){var t,Te;return t=Math.floor(e/4294967296),Te=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(Te>>24&255),this.writeByte(Te>>16&255),this.writeByte(Te>>8&255),this.writeByte(255&Te)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,Te;for(t=[],Te=0;0<=e?Te<e:Te>e;Te=0<=e?++Te:--Te)t.push(this.readByte());return t},n.prototype.write=function(e){var t,Te,Ee,Re;for(Re=[],Te=0,Ee=e.length;Te<Ee;Te++)t=e[Te],Re.push(this.writeByte(t));return Re},n}(),de=function(){var n;function e(t){var Te,Ee,Re;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},Ee=0,Re=this.tableCount;0<=Re?Ee<Re:Ee>Re;Ee=0<=Re?++Ee:--Ee)Te={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[Te.tag]=Te}return e.prototype.encode=function(t){var Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe,Ue,ze,He;for(He in Ue=Object.keys(t).length,$e=Math.log(2),Me=16*Math.floor(Math.log(Ue)/$e),Ce=Math.floor(Me/$e),Be=16*Ue-Me,(Ee=new fe).writeInt(this.scalarType),Ee.writeShort(Ue),Ee.writeShort(Me),Ee.writeShort(Ce),Ee.writeShort(Be),Re=16*Ue,Ve=Ee.pos+Re,De=null,ze=[],t)for(Oe=t[He],Ee.writeString(He),Ee.writeInt(n(Oe)),Ee.writeInt(Ve),Ee.writeInt(Oe.length),ze=ze.concat(Oe),He==="head"&&(De=Ve),Ve+=Oe.length;Ve%4;)ze.push(0),Ve++;return Ee.write(ze),Te=2981146554-n(Ee.data),Ee.pos=De+8,Ee.writeUInt32(Te),Ee.data},n=function(t){var Te,Ee,Re,Ce;for(t=_e.call(t);t.length%4;)t.push(0);for(Re=new fe(t),Ee=0,Te=0,Ce=t.length;Te<Ce;Te=Te+=4)Ee+=Re.readUInt32();return 4294967295&Ee},e}(),pe={}.hasOwnProperty,ge=function(n,e){for(var t in e)pe.call(e,t)&&(n[t]=e[t]);function Te(){this.constructor=n}return Te.prototype=e.prototype,n.prototype=new Te,n.__super__=e.prototype,n};he=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var me=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new fe).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n}(),ve=function(){function n(e,t){var Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe,Ue,ze,He,Ge,Ke,Xe,Je;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),Me=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for($e=0;$e<256;++$e)this.codeMap[$e]=e.readByte();break;case 4:for(Ue=e.readUInt16(),Oe=Ue/2,e.pos+=6,Re=function(){var un,fn;for(fn=[],$e=un=0;0<=Oe?un<Oe:un>Oe;$e=0<=Oe?++un:--un)fn.push(e.readUInt16());return fn}(),e.pos+=2,He=function(){var un,fn;for(fn=[],$e=un=0;0<=Oe?un<Oe:un>Oe;$e=0<=Oe?++un:--un)fn.push(e.readUInt16());return fn}(),Ve=function(){var un,fn;for(fn=[],$e=un=0;0<=Oe?un<Oe:un>Oe;$e=0<=Oe?++un:--un)fn.push(e.readUInt16());return fn}(),Be=function(){var un,fn;for(fn=[],$e=un=0;0<=Oe?un<Oe:un>Oe;$e=0<=Oe?++un:--un)fn.push(e.readUInt16());return fn}(),Ee=(this.length-e.pos+this.offset)/2,De=function(){var un,fn;for(fn=[],$e=un=0;0<=Ee?un<Ee:un>Ee;$e=0<=Ee?++un:--un)fn.push(e.readUInt16());return fn}(),$e=Ke=0,Je=Re.length;Ke<Je;$e=++Ke)for(Ge=Re[$e],Te=Xe=ze=He[$e];ze<=Ge?Xe<=Ge:Xe>=Ge;Te=ze<=Ge?++Xe:--Xe)Be[$e]===0?Ce=Te+Ve[$e]:(Ce=De[Be[$e]/2+(Te-ze)-(Oe-$e)]||0)!==0&&(Ce+=Ve[$e]),this.codeMap[Te]=65535&Ce}e.pos=Me}return n.encode=function(e,t){var Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe,Ue,ze,He,Ge,Ke,Xe,Je,un,fn,yn,gn,mn,dn,vn,bn,Tn,En,In,Nn,On,Fn,$n,Hn,Dn,Un,Cn,kn,Yn,Jn,sr,lr,mr,gr,Er,$r,Yr;switch(In=new fe,Ce=Object.keys(e).sort(function(Gr,Tr){return Gr-Tr}),t){case"macroman":for(He=0,Ge=function(){var Gr=[];for(ze=0;ze<256;++ze)Gr.push(0);return Gr}(),Xe={0:0},Re={},Nn=0,Hn=Ce.length;Nn<Hn;Nn++)Xe[gr=e[Ee=Ce[Nn]]]==null&&(Xe[gr]=++He),Re[Ee]={old:e[Ee],new:Xe[e[Ee]]},Ge[Ee]=Xe[e[Ee]];return In.writeUInt16(1),In.writeUInt16(0),In.writeUInt32(12),In.writeUInt16(0),In.writeUInt16(262),In.writeUInt16(0),In.write(Ge),{charMap:Re,subtable:In.data,maxGlyphID:He+1};case"unicode":for(Tn=[],Me=[],Je=0,Xe={},Te={},Ke=Ve=null,On=0,Dn=Ce.length;On<Dn;On++)Xe[fn=e[Ee=Ce[On]]]==null&&(Xe[fn]=++Je),Te[Ee]={old:fn,new:Xe[fn]},De=Xe[fn]-Ee,Ke!=null&&De===Ve||(Ke&&Me.push(Ke),Tn.push(Ee),Ve=De),Ke=Ee;for(Ke&&Me.push(Ke),Me.push(65535),Tn.push(65535),vn=2*(dn=Tn.length),mn=2*Math.pow(Math.log(dn)/Math.LN2,2),Oe=Math.log(mn/2)/Math.LN2,gn=2*dn-mn,$e=[],yn=[],Ue=[],ze=Fn=0,Un=Tn.length;Fn<Un;ze=++Fn){if(bn=Tn[ze],Be=Me[ze],bn===65535){$e.push(0),yn.push(0);break}if(bn-(En=Te[bn].new)>=32768)for($e.push(0),yn.push(2*(Ue.length+dn-ze)),Ee=$n=bn;bn<=Be?$n<=Be:$n>=Be;Ee=bn<=Be?++$n:--$n)Ue.push(Te[Ee].new);else $e.push(En-bn),yn.push(0)}for(In.writeUInt16(3),In.writeUInt16(1),In.writeUInt32(12),In.writeUInt16(4),In.writeUInt16(16+8*dn+2*Ue.length),In.writeUInt16(0),In.writeUInt16(vn),In.writeUInt16(mn),In.writeUInt16(Oe),In.writeUInt16(gn),lr=0,Cn=Me.length;lr<Cn;lr++)Ee=Me[lr],In.writeUInt16(Ee);for(In.writeUInt16(0),mr=0,kn=Tn.length;mr<kn;mr++)Ee=Tn[mr],In.writeUInt16(Ee);for(Er=0,Yn=$e.length;Er<Yn;Er++)De=$e[Er],In.writeUInt16(De);for($r=0,Jn=yn.length;$r<Jn;$r++)un=yn[$r],In.writeUInt16(un);for(Yr=0,sr=Ue.length;Yr<sr;Yr++)He=Ue[Yr],In.writeUInt16(He);return{charMap:Te,subtable:In.data,maxGlyphID:Je+1}}},n}(),be=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,Te,Ee;for(e.pos=this.offset,this.version=e.readUInt16(),Ee=e.readUInt16(),this.tables=[],this.unicode=null,Te=0;0<=Ee?Te<Ee:Te>Ee;Te=0<=Ee?++Te:--Te)t=new ve(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var Te,Ee;return t==null&&(t="macroman"),Te=ve.encode(e,t),(Ee=new fe).writeUInt16(0),Ee.writeUInt16(1),Te.table=Ee.data.concat(Te.subtable),Te},n}(),ye=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n}(),we=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,Te;for(Te=[],t=0;t<10;++t)Te.push(e.readByte());return Te}(),this.charRange=function(){var t,Te;for(Te=[],t=0;t<4;++t)Te.push(e.readInt());return Te}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,Te;for(Te=[],t=0;t<2;t=++t)Te.push(e.readInt());return Te}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n}(),Ne=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="post",n.prototype.parse=function(e){var t,Te,Ee;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var Re;for(Te=e.readUInt16(),this.glyphNameIndex=[],Re=0;0<=Te?Re<Te:Re>Te;Re=0<=Te?++Re:--Re)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],Ee=[];e.pos<this.offset+this.length;)t=e.readByte(),Ee.push(this.names.push(e.readString(t)));return Ee;case 151552:return Te=e.readUInt16(),this.offsets=e.read(Te);case 262144:return this.map=(function(){var Ce,De,$e;for($e=[],Re=Ce=0,De=this.file.maxp.numGlyphs;0<=De?Ce<De:Ce>De;Re=0<=De?++Ce:--Ce)$e.push(e.readUInt32());return $e}).call(this)}},n}(),Le=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},xe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="name",n.prototype.parse=function(e){var t,Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe;for(e.pos=this.offset,e.readShort(),t=e.readShort(),De=e.readShort(),Te=[],Re=0;0<=t?Re<t:Re>t;Re=0<=t?++Re:--Re)Te.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+De+e.readShort()});for($e={},Re=Be=0,Me=Te.length;Be<Me;Re=++Be)Ee=Te[Re],e.pos=Ee.offset,Ve=e.readString(Ee.length),Ce=new Le(Ve,Ee),$e[Oe=Ee.nameID]==null&&($e[Oe]=[]),$e[Ee.nameID].push(Ce);this.strings=$e,this.copyright=$e[0],this.fontFamily=$e[1],this.fontSubfamily=$e[2],this.uniqueSubfamily=$e[3],this.fontName=$e[4],this.version=$e[5];try{this.postscriptName=$e[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=$e[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=$e[7],this.manufacturer=$e[8],this.designer=$e[9],this.description=$e[10],this.vendorUrl=$e[11],this.designerUrl=$e[12],this.license=$e[13],this.licenseUrl=$e[14],this.preferredFamily=$e[15],this.preferredSubfamily=$e[17],this.compatibleFull=$e[18],this.sampleText=$e[19]},n}(),Ae=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n}(),Se=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,Te,Ee,Re,Ce,De,$e;for(e.pos=this.offset,this.metrics=[],t=0,De=this.file.hhea.numberOfMetrics;0<=De?t<De:t>De;t=0<=De?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(Ee=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Ve,Be;for(Be=[],t=Ve=0;0<=Ee?Ve<Ee:Ve>Ee;t=0<=Ee?++Ve:--Ve)Be.push(e.readInt16());return Be}(),this.widths=(function(){var Ve,Be,Me,Oe;for(Oe=[],Ve=0,Be=(Me=this.metrics).length;Ve<Be;Ve++)Re=Me[Ve],Oe.push(Re.advance);return Oe}).call(this),Te=this.widths[this.widths.length-1],$e=[],t=Ce=0;0<=Ee?Ce<Ee:Ce>Ee;t=0<=Ee?++Ce:--Ce)$e.push(this.widths.push(Te));return $e},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n}(),_e=[].slice,Pe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,Te,Ee,Re,Ce,De,$e,Ve,Be,Me;return e in this.cache?this.cache[e]:(Re=this.file.loca,t=this.file.contents,Te=Re.indexOf(e),(Ee=Re.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+Te,Ce=(De=new fe(t.read(Ee))).readShort(),Ve=De.readShort(),Me=De.readShort(),$e=De.readShort(),Be=De.readShort(),this.cache[e]=Ce===-1?new Fe(De,Ve,Me,$e,Be):new ke(De,Ce,Ve,Me,$e,Be),this.cache[e]))},n.prototype.encode=function(e,t,Te){var Ee,Re,Ce,De,$e;for(Ce=[],Re=[],De=0,$e=t.length;De<$e;De++)Ee=e[t[De]],Re.push(Ce.length),Ee&&(Ce=Ce.concat(Ee.encode(Te)));return Re.push(Ce.length),{table:Ce,offsets:Re}},n}(),ke=function(){function n(e,t,Te,Ee,Re,Ce){this.raw=e,this.numberOfContours=t,this.xMin=Te,this.yMin=Ee,this.xMax=Re,this.yMax=Ce,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Fe=function(){function n(e,t,Te,Ee,Re){var Ce,De;for(this.raw=e,this.xMin=t,this.yMin=Te,this.xMax=Ee,this.yMax=Re,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Ce=this.raw;De=Ce.readShort(),this.glyphOffsets.push(Ce.pos),this.glyphIDs.push(Ce.readUInt16()),32&De;)Ce.pos+=1&De?4:2,128&De?Ce.pos+=8:64&De?Ce.pos+=4:8&De&&(Ce.pos+=2)}return n.prototype.encode=function(){var e,t,Te;for(t=new fe(_e.call(this.raw.data)),e=0,Te=this.glyphIDs.length;e<Te;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Ie=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="loca",n.prototype.parse=function(e){var t,Te;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var Ee,Re;for(Re=[],Te=0,Ee=this.length;Te<Ee;Te+=2)Re.push(2*e.readUInt16());return Re}).call(this):(function(){var Ee,Re;for(Re=[],Te=0,Ee=this.length;Te<Ee;Te+=4)Re.push(e.readUInt32());return Re}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var Te=new Uint32Array(this.offsets.length),Ee=0,Re=0,Ce=0;Ce<Te.length;++Ce)if(Te[Ce]=Ee,Re<t.length&&t[Re]==Ce){++Re,Te[Ce]=Ee;var De=this.offsets[Ce],$e=this.offsets[Ce+1]-De;$e>0&&(Ee+=$e)}for(var Ve=new Array(4*Te.length),Be=0;Be<Te.length;++Be)Ve[4*Be+3]=255&Te[Be],Ve[4*Be+2]=(65280&Te[Be])>>8,Ve[4*Be+1]=(16711680&Te[Be])>>16,Ve[4*Be]=(4278190080&Te[Be])>>24;return Ve},n}(),je=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,Te,Ee,Re;for(t in Ee=this.font.cmap.tables[0].codeMap,e={},Re=this.subset)Te=Re[t],e[t]=Ee[Te];return e},n.prototype.glyphsFor=function(e){var t,Te,Ee,Re,Ce,De,$e;for(Ee={},Ce=0,De=e.length;Ce<De;Ce++)Ee[Re=e[Ce]]=this.font.glyf.glyphFor(Re);for(Re in t=[],Ee)(Te=Ee[Re])!=null&&Te.compound&&t.push.apply(t,Te.glyphIDs);if(t.length>0)for(Re in $e=this.glyphsFor(t))Te=$e[Re],Ee[Re]=Te;return Ee},n.prototype.encode=function(e,t){var Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe,Ue,ze,He,Ge,Ke;for(Ee in Te=be.encode(this.generateCmap(),"unicode"),Ce=this.glyphsFor(e),Ue={0:0},Ke=Te.charMap)Ue[($e=Ke[Ee]).old]=$e.new;for(ze in Oe=Te.maxGlyphID,Ce)ze in Ue||(Ue[ze]=Oe++);return Be=function(Xe){var Je,un;for(Je in un={},Xe)un[Xe[Je]]=Je;return un}(Ue),Me=Object.keys(Be).sort(function(Xe,Je){return Xe-Je}),He=function(){var Xe,Je,un;for(un=[],Xe=0,Je=Me.length;Xe<Je;Xe++)De=Me[Xe],un.push(Be[De]);return un}(),Re=this.font.glyf.encode(Ce,He,Ue),Ve=this.font.loca.encode(Re.offsets,He),Ge={cmap:this.font.cmap.raw(),glyf:Re.table,loca:Ve,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(Ge["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ge)},n}();E.API.PDFObject=function(){var n;function e(){}return n=function(t,Te){return(Array(Te+1).join("0")+t).slice(-Te)},e.convert=function(t){var Te,Ee,Re,Ce;if(Array.isArray(t))return"["+function(){var De,$e,Ve;for(Ve=[],De=0,$e=t.length;De<$e;De++)Te=t[De],Ve.push(e.convert(Te));return Ve}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(Ee in Re=["<<"],t)Ce=t[Ee],Re.push("/"+Ee+" "+e.convert(Ce));return Re.push(">>"),Re.join(`
`)}return""+t},e}();function autoTableText(n,e,t,Te,Ee){Te=Te||{};var Re=1.15,Ce=Ee.internal.scaleFactor,De=Ee.internal.getFontSize()/Ce,$e=Ee.getLineHeightFactor?Ee.getLineHeightFactor():Re,Ve=De*$e,Be=/\r\n|\r|\n/g,Me="",Oe=1;if((Te.valign==="middle"||Te.valign==="bottom"||Te.halign==="center"||Te.halign==="right")&&(Me=typeof n=="string"?n.split(Be):n,Oe=Me.length||1),t+=De*(2-Re),Te.valign==="middle"?t-=Oe/2*Ve:Te.valign==="bottom"&&(t-=Oe*Ve),Te.halign==="center"||Te.halign==="right"){var Ue=De;if(Te.halign==="center"&&(Ue*=.5),Me&&Oe>=1){for(var ze=0;ze<Me.length;ze++)Ee.text(Me[ze],e-Ee.getStringUnitWidth(Me[ze])*Ue,t),t+=Ve;return Ee}e-=Ee.getStringUnitWidth(n)*Ue}return Te.halign==="justify"?Ee.text(n,e,t,{maxWidth:Te.maxWidth||100,align:"justify"}):Ee.text(n,e,t),Ee}var globalDefaults={},DocHandler=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:globalDefaults=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var Te,Ee,Re;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var Ce=this.jsPDFDocument.internal.getFont(),De=Ce.fontStyle,$e=Ce.fontName;if(e.font&&($e=e.font),e.fontStyle){De=e.fontStyle;var Ve=this.getFontList()[$e];Ve&&Ve.indexOf(De)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(Ve[0]),De=Ve[0])}if(this.jsPDFDocument.setFont($e,De),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var Be=n.unifyColor(e.fillColor);Be&&(Te=this.jsPDFDocument).setFillColor.apply(Te,Be),Be=n.unifyColor(e.textColor),Be&&(Ee=this.jsPDFDocument).setTextColor.apply(Ee,Be),Be=n.unifyColor(e.lineColor),Be&&(Re=this.jsPDFDocument).setDrawColor.apply(Re,Be),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,Te){return this.jsPDFDocument.splitTextToSize(e,t,Te)},n.prototype.rect=function(e,t,Te,Ee,Re){return this.jsPDFDocument.rect(e,t,Te,Ee,Re)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return globalDefaults||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),extendStatics=function(n,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,Te){t.__proto__=Te}||function(t,Te){for(var Ee in Te)Object.prototype.hasOwnProperty.call(Te,Ee)&&(t[Ee]=Te[Ee])},extendStatics(n,e)};function __extends(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}typeof SuppressedError=="function"&&SuppressedError;var HtmlRowInput=function(n){__extends(e,n);function e(t){var Te=n.call(this)||this;return Te._element=t,Te}return e}(Array);function defaultStyles(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function getTheme(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function getStringWidth(n,e,t){t.applyStyles(e,!0);var Te=Array.isArray(n)?n:[n],Ee=Te.map(function(Re){return t.getTextWidth(Re)}).reduce(function(Re,Ce){return Math.max(Re,Ce)},0);return Ee}function addTableBorder(n,e,t,Te){var Ee=e.settings.tableLineWidth,Re=e.settings.tableLineColor;n.applyStyles({lineWidth:Ee,lineColor:Re});var Ce=getFillStyle(Ee,!1);Ce&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),Te.y-t.y,Ce)}function getFillStyle(n,e){var t=n>0,Te=e||e===0;return t&&Te?"DF":t?"S":Te?"F":null}function parseSpacing(n,e){var t,Te,Ee,Re;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(Te=n.top)!==null&&Te!==void 0?Te:e,right:(Ee=n.right)!==null&&Ee!==void 0?Ee:e,bottom:(Re=n.bottom)!==null&&Re!==void 0?Re:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function getPageAvailableWidth(n,e){var t=parseSpacing(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function parseCss(n,e,t,Te,Ee){var Re={},Ce=1.3333333333333333,De=parseColor(e,function(Je){return Ee.getComputedStyle(Je).backgroundColor});De!=null&&(Re.fillColor=De);var $e=parseColor(e,function(Je){return Ee.getComputedStyle(Je).color});$e!=null&&(Re.textColor=$e);var Ve=parsePadding(Te,t);Ve&&(Re.cellPadding=Ve);var Be="borderTopColor",Me=Ce*t,Oe=Te.borderTopWidth;if(Te.borderBottomWidth===Oe&&Te.borderRightWidth===Oe&&Te.borderLeftWidth===Oe){var Ue=(parseFloat(Oe)||0)/Me;Ue&&(Re.lineWidth=Ue)}else Re.lineWidth={top:(parseFloat(Te.borderTopWidth)||0)/Me,right:(parseFloat(Te.borderRightWidth)||0)/Me,bottom:(parseFloat(Te.borderBottomWidth)||0)/Me,left:(parseFloat(Te.borderLeftWidth)||0)/Me},Re.lineWidth.top||(Re.lineWidth.right?Be="borderRightColor":Re.lineWidth.bottom?Be="borderBottomColor":Re.lineWidth.left&&(Be="borderLeftColor"));var ze=parseColor(e,function(Je){return Ee.getComputedStyle(Je)[Be]});ze!=null&&(Re.lineColor=ze);var He=["left","right","center","justify"];He.indexOf(Te.textAlign)!==-1&&(Re.halign=Te.textAlign),He=["middle","bottom","top"],He.indexOf(Te.verticalAlign)!==-1&&(Re.valign=Te.verticalAlign);var Ge=parseInt(Te.fontSize||"");isNaN(Ge)||(Re.fontSize=Ge/Ce);var Ke=parseFontStyle(Te);Ke&&(Re.fontStyle=Ke);var Xe=(Te.fontFamily||"").toLowerCase();return n.indexOf(Xe)!==-1&&(Re.font=Xe),Re}function parseFontStyle(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function parseColor(n,e){var t=realColor(n,e);if(!t)return null;var Te=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!Te||!Array.isArray(Te))return null;var Ee=[parseInt(Te[1]),parseInt(Te[2]),parseInt(Te[3])],Re=parseInt(Te[4]);return Re===0||isNaN(Ee[0])||isNaN(Ee[1])||isNaN(Ee[2])?null:Ee}function realColor(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:realColor(n.parentElement,e):t}function parsePadding(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],Te=96/(72/e),Ee=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,Re=t.map(function(De){return parseInt(De||"0")/Te}),Ce=parseSpacing(Re,0);return Ee>Ce.top&&(Ce.top=Ee),Ee>Ce.bottom&&(Ce.bottom=Ee),Ce}function parseHtml(n,e,t,Te,Ee){var Re,Ce;Te===void 0&&(Te=!1),Ee===void 0&&(Ee=!1);var De;typeof e=="string"?De=t.document.querySelector(e):De=e;var $e=Object.keys(n.getFontList()),Ve=n.scaleFactor(),Be=[],Me=[],Oe=[];if(!De)return console.error("Html table could not be found with input: ",e),{head:Be,body:Me,foot:Oe};for(var Ue=0;Ue<De.rows.length;Ue++){var ze=De.rows[Ue],He=(Ce=(Re=ze?.parentElement)===null||Re===void 0?void 0:Re.tagName)===null||Ce===void 0?void 0:Ce.toLowerCase(),Ge=parseRowContent($e,Ve,t,ze,Te,Ee);Ge&&(He==="thead"?Be.push(Ge):He==="tfoot"?Oe.push(Ge):Me.push(Ge))}return{head:Be,body:Me,foot:Oe}}function parseRowContent(n,e,t,Te,Ee,Re){for(var Ce=new HtmlRowInput(Te),De=0;De<Te.cells.length;De++){var $e=Te.cells[De],Ve=t.getComputedStyle($e);if(Ee||Ve.display!=="none"){var Be=void 0;Re&&(Be=parseCss(n,$e,e,Ve,t)),Ce.push({rowSpan:$e.rowSpan,colSpan:$e.colSpan,styles:Be,_element:$e,content:parseCellContent($e)})}}var Me=t.getComputedStyle(Te);if(Ce.length>0&&(Ee||Me.display!=="none"))return Ce}function parseCellContent(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function validateInput(n,e,t){for(var Te=0,Ee=[n,e,t];Te<Ee.length;Te++){var Re=Ee[Te];Re&&typeof Re!="object"&&console.error("The options parameter should be of type object, is: "+typeof Re),Re.startY&&typeof Re.startY!="number"&&(console.error("Invalid value for startY option",Re.startY),delete Re.startY)}}function assign(n,e,t,Te,Ee){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var Re=Object(n),Ce=1;Ce<arguments.length;Ce++){var De=arguments[Ce];if(De!=null)for(var $e in De)Object.prototype.hasOwnProperty.call(De,$e)&&(Re[$e]=De[$e])}return Re}function parseInput(n,e){var t=new DocHandler(n),Te=t.getDocumentOptions(),Ee=t.getGlobalOptions();validateInput(Ee,Te,e);var Re=assign({},Ee,Te,e),Ce;typeof window<"u"&&(Ce=window);var De=parseStyles(Ee,Te,e),$e=parseHooks(Ee,Te,e),Ve=parseSettings(t,Re),Be=parseContent$1(t,Re,Ce);return{id:e.tableId,content:Be,hooks:$e,styles:De,settings:Ve}}function parseStyles(n,e,t){for(var Te={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},Ee=function($e){if($e==="columnStyles"){var Ve=n[$e],Be=e[$e],Me=t[$e];Te.columnStyles=assign({},Ve,Be,Me)}else{var Oe=[n,e,t],Ue=Oe.map(function(ze){return ze[$e]||{}});Te[$e]=assign({},Ue[0],Ue[1],Ue[2])}},Re=0,Ce=Object.keys(Te);Re<Ce.length;Re++){var De=Ce[Re];Ee(De)}return Te}function parseHooks(n,e,t){for(var Te=[n,e,t],Ee={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},Re=0,Ce=Te;Re<Ce.length;Re++){var De=Ce[Re];De.didParseCell&&Ee.didParseCell.push(De.didParseCell),De.willDrawCell&&Ee.willDrawCell.push(De.willDrawCell),De.didDrawCell&&Ee.didDrawCell.push(De.didDrawCell),De.willDrawPage&&Ee.willDrawPage.push(De.willDrawPage),De.didDrawPage&&Ee.didDrawPage.push(De.didDrawPage)}return Ee}function parseSettings(n,e){var t,Te,Ee,Re,Ce,De,$e,Ve,Be,Me,Oe,Ue,ze=parseSpacing(e.margin,40/n.scaleFactor()),He=(t=getStartY(n,e.startY))!==null&&t!==void 0?t:ze.top,Ge;e.showFoot===!0?Ge="everyPage":e.showFoot===!1?Ge="never":Ge=(Te=e.showFoot)!==null&&Te!==void 0?Te:"everyPage";var Ke;e.showHead===!0?Ke="everyPage":e.showHead===!1?Ke="never":Ke=(Ee=e.showHead)!==null&&Ee!==void 0?Ee:"everyPage";var Xe=(Re=e.useCss)!==null&&Re!==void 0?Re:!1,Je=e.theme||(Xe?"plain":"striped"),un=!!e.horizontalPageBreak,fn=(Ce=e.horizontalPageBreakRepeat)!==null&&Ce!==void 0?Ce:null;return{includeHiddenHtml:(De=e.includeHiddenHtml)!==null&&De!==void 0?De:!1,useCss:Xe,theme:Je,startY:He,margin:ze,pageBreak:($e=e.pageBreak)!==null&&$e!==void 0?$e:"auto",rowPageBreak:(Ve=e.rowPageBreak)!==null&&Ve!==void 0?Ve:"auto",tableWidth:(Be=e.tableWidth)!==null&&Be!==void 0?Be:"auto",showHead:Ke,showFoot:Ge,tableLineWidth:(Me=e.tableLineWidth)!==null&&Me!==void 0?Me:0,tableLineColor:(Oe=e.tableLineColor)!==null&&Oe!==void 0?Oe:200,horizontalPageBreak:un,horizontalPageBreakRepeat:fn,horizontalPageBreakBehaviour:(Ue=e.horizontalPageBreakBehaviour)!==null&&Ue!==void 0?Ue:"afterAllRows"}}function getStartY(n,e){var t=n.getLastAutoTable(),Te=n.scaleFactor(),Ee=n.pageNumber(),Re=!1;if(t&&t.startPageNumber){var Ce=t.startPageNumber+t.pageNumber-1;Re=Ce===Ee}return typeof e=="number"?e:(e==null||e===!1)&&Re&&t?.finalY!=null?t.finalY+20/Te:null}function parseContent$1(n,e,t){var Te=e.head||[],Ee=e.body||[],Re=e.foot||[];if(e.html){var Ce=e.includeHiddenHtml;if(t){var De=parseHtml(n,e.html,t,Ce,e.useCss)||{};Te=De.head||Te,Ee=De.body||Te,Re=De.foot||Te}else console.error("Cannot parse html in non browser environment")}var $e=e.columns||parseColumns(Te,Ee,Re);return{columns:$e,head:Te,body:Ee,foot:Re}}function parseColumns(n,e,t){var Te=n[0]||e[0]||t[0]||[],Ee=[];return Object.keys(Te).filter(function(Re){return Re!=="_element"}).forEach(function(Re){var Ce=1,De;Array.isArray(Te)?De=Te[parseInt(Re)]:De=Te[Re],typeof De=="object"&&!Array.isArray(De)&&(Ce=De?.colSpan||1);for(var $e=0;$e<Ce;$e++){var Ve=void 0;Array.isArray(Te)?Ve=Ee.length:Ve=Re+($e>0?"_".concat($e):"");var Be={dataKey:Ve};Ee.push(Be)}}),Ee}var HookData=function(){function n(e,t,Te){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=Te,this.doc=e.getDocument()}return n}(),CellHookData=function(n){__extends(e,n);function e(t,Te,Ee,Re,Ce,De){var $e=n.call(this,t,Te,De)||this;return $e.cell=Ee,$e.row=Re,$e.column=Ce,$e.section=Re.section,$e}return e}(HookData),Table=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,Te){return t+Te.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,Te){return t+Te.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,Te,Ee,Re,Ce){for(var De=0,$e=t;De<$e.length;De++){var Ve=$e[De],Be=new CellHookData(e,this,Te,Ee,Re,Ce),Me=Ve(Be)===!1;if(Te.text=Array.isArray(Te.text)?Te.text:[Te.text],Me)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var Te=0,Ee=this.hooks.didDrawPage;Te<Ee.length;Te++){var Re=Ee[Te];Re(new HookData(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var Te=0,Ee=this.hooks.willDrawPage;Te<Ee.length;Te++){var Re=Ee[Te];Re(new HookData(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(Ee,Re){return Ee+Re.wrappedWidth},0);return t}else{var Te=this.settings.margin;return e-Te.left-Te.right}},n}(),Row=function(){function n(e,t,Te,Ee,Re){Re===void 0&&(Re=!1),this.height=0,this.raw=e,e instanceof HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=Te,this.cells=Ee,this.spansMultiplePages=Re}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(Te,Ee){var Re;return Math.max(Te,((Re=t.cells[Ee.index])===null||Re===void 0?void 0:Re.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(Te){var Ee=t.cells[Te.index];return Ee?Ee.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var Te=this;return e.reduce(function(Ee,Re){var Ce=Te.cells[Re.index];if(!Ce)return 0;var De=t.getLineHeight(Ce.styles.fontSize),$e=Ce.padding("vertical"),Ve=$e+De;return Ve>Ee?Ve:Ee},0)},n}(),Cell=function(){function n(e,t,Te){var Ee;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=Te,this.raw=e;var Re=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,Re=(Ee=e.content)!==null&&Ee!==void 0?Ee:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var Ce=Re!=null?""+Re:"",De=/\r\n|\r|\n/g;this.text=Ce.split(De)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var Te;if(this.styles.halign==="right")Te=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var Ee=this.width-this.padding("horizontal");Te=this.x+Ee/2+this.padding("left")}else Te=this.x+this.padding("left");return{x:Te,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var Te=Array.isArray(this.text)?this.text.length:1,Ee=this.styles.fontSize/e*t,Re=Te*Ee+this.padding("vertical");return Math.max(Re,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=parseSpacing(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),Column=function(){function n(e,t,Te){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=Te}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,Te=0,Ee=e.allRows();Te<Ee.length;Te++){var Re=Ee[Te],Ce=Re.cells[this.index];Ce&&typeof Ce.styles.cellWidth=="number"&&(t=Math.max(t,Ce.styles.cellWidth))}return t},n}();function calculateWidths(n,e){calculate(n,e);var t=[],Te=0;e.columns.forEach(function(Re){var Ce=Re.getMaxCustomCellWidth(e);Ce?Re.width=Ce:(Re.width=Re.wrappedWidth,t.push(Re)),Te+=Re.width});var Ee=e.getWidth(n.pageSize().width)-Te;Ee&&(Ee=resizeColumns(t,Ee,function(Re){return Math.max(Re.minReadableWidth,Re.minWidth)})),Ee&&(Ee=resizeColumns(t,Ee,function(Re){return Re.minWidth})),Ee=Math.abs(Ee),!e.settings.horizontalPageBreak&&Ee>.1/n.scaleFactor()&&(Ee=Ee<1?Ee:Math.round(Ee),console.warn("Of the table content, ".concat(Ee," units width could not fit page"))),applyColSpans(e),fitContent(e,n),applyRowSpans(e)}function calculate(n,e){var t=n.scaleFactor(),Te=e.settings.horizontalPageBreak,Ee=getPageAvailableWidth(n,e);e.allRows().forEach(function(Re){for(var Ce=0,De=e.columns;Ce<De.length;Ce++){var $e=De[Ce],Ve=Re.cells[$e.index];if(Ve){var Be=e.hooks.didParseCell;e.callCellHooks(n,Be,Ve,Re,$e,null);var Me=Ve.padding("horizontal");Ve.contentWidth=getStringWidth(Ve.text,Ve.styles,n)+Me;var Oe=getStringWidth(Ve.text.join(" ").split(/[^\S\u00A0]+/),Ve.styles,n);if(Ve.minReadableWidth=Oe+Ve.padding("horizontal"),typeof Ve.styles.cellWidth=="number")Ve.minWidth=Ve.styles.cellWidth,Ve.wrappedWidth=Ve.styles.cellWidth;else if(Ve.styles.cellWidth==="wrap"||Te===!0)Ve.contentWidth>Ee?(Ve.minWidth=Ee,Ve.wrappedWidth=Ee):(Ve.minWidth=Ve.contentWidth,Ve.wrappedWidth=Ve.contentWidth);else{var Ue=10/t;Ve.minWidth=Ve.styles.minCellWidth||Ue,Ve.wrappedWidth=Ve.contentWidth,Ve.minWidth>Ve.wrappedWidth&&(Ve.wrappedWidth=Ve.minWidth)}}}}),e.allRows().forEach(function(Re){for(var Ce=0,De=e.columns;Ce<De.length;Ce++){var $e=De[Ce],Ve=Re.cells[$e.index];if(Ve&&Ve.colSpan===1)$e.wrappedWidth=Math.max($e.wrappedWidth,Ve.wrappedWidth),$e.minWidth=Math.max($e.minWidth,Ve.minWidth),$e.minReadableWidth=Math.max($e.minReadableWidth,Ve.minReadableWidth);else{var Be=e.styles.columnStyles[$e.dataKey]||e.styles.columnStyles[$e.index]||{},Me=Be.cellWidth||Be.minCellWidth;Me&&typeof Me=="number"&&($e.minWidth=Me,$e.wrappedWidth=Me)}Ve&&(Ve.colSpan>1&&!$e.minWidth&&($e.minWidth=Ve.minWidth),Ve.colSpan>1&&!$e.wrappedWidth&&($e.wrappedWidth=Ve.minWidth))}})}function resizeColumns(n,e,t){for(var Te=e,Ee=n.reduce(function(Ue,ze){return Ue+ze.wrappedWidth},0),Re=0;Re<n.length;Re++){var Ce=n[Re],De=Ce.wrappedWidth/Ee,$e=Te*De,Ve=Ce.width+$e,Be=t(Ce),Me=Ve<Be?Be:Ve;e-=Me-Ce.width,Ce.width=Me}if(e=Math.round(e*1e10)/1e10,e){var Oe=n.filter(function(Ue){return e<0?Ue.width>t(Ue):!0});Oe.length&&(e=resizeColumns(Oe,e,t))}return e}function applyRowSpans(n){for(var e={},t=1,Te=n.allRows(),Ee=0;Ee<Te.length;Ee++)for(var Re=Te[Ee],Ce=0,De=n.columns;Ce<De.length;Ce++){var $e=De[Ce],Ve=e[$e.index];if(t>1)t--,delete Re.cells[$e.index];else if(Ve)Ve.cell.height+=Re.height,t=Ve.cell.colSpan,delete Re.cells[$e.index],Ve.left--,Ve.left<=1&&delete e[$e.index];else{var Be=Re.cells[$e.index];if(!Be)continue;if(Be.height=Re.height,Be.rowSpan>1){var Me=Te.length-Ee,Oe=Be.rowSpan>Me?Me:Be.rowSpan;e[$e.index]={cell:Be,left:Oe,row:Re}}}}}function applyColSpans(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var Te=e[t],Ee=null,Re=0,Ce=0,De=0;De<n.columns.length;De++){var $e=n.columns[De];if(Ce-=1,Ce>1&&n.columns[De+1])Re+=$e.width,delete Te.cells[$e.index];else if(Ee){var Ve=Ee;delete Te.cells[$e.index],Ee=null,Ve.width=$e.width+Re}else{var Ve=Te.cells[$e.index];if(!Ve)continue;if(Ce=Ve.colSpan,Re=0,Ve.colSpan>1){Ee=Ve,Re+=$e.width;continue}Ve.width=$e.width+Re}}}function fitContent(n,e){for(var t={count:0,height:0},Te=0,Ee=n.allRows();Te<Ee.length;Te++){for(var Re=Ee[Te],Ce=0,De=n.columns;Ce<De.length;Ce++){var $e=De[Ce],Ve=Re.cells[$e.index];if(Ve){e.applyStyles(Ve.styles,!0);var Be=Ve.width-Ve.padding("horizontal");if(Ve.styles.overflow==="linebreak")Ve.text=e.splitTextToSize(Ve.text,Be+1/e.scaleFactor(),{fontSize:Ve.styles.fontSize});else if(Ve.styles.overflow==="ellipsize")Ve.text=ellipsize(Ve.text,Be,Ve.styles,e,"...");else if(Ve.styles.overflow==="hidden")Ve.text=ellipsize(Ve.text,Be,Ve.styles,e,"");else if(typeof Ve.styles.overflow=="function"){var Me=Ve.styles.overflow(Ve.text,Be);typeof Me=="string"?Ve.text=[Me]:Ve.text=Me}Ve.contentHeight=Ve.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var Oe=Ve.contentHeight/Ve.rowSpan;Ve.rowSpan>1&&t.count*t.height<Oe*Ve.rowSpan?t={height:Oe,count:Ve.rowSpan}:t&&t.count>0&&t.height>Oe&&(Oe=t.height),Oe>Re.height&&(Re.height=Oe)}}t.count--}}function ellipsize(n,e,t,Te,Ee){return n.map(function(Re){return ellipsizeStr(Re,e,t,Te,Ee)})}function ellipsizeStr(n,e,t,Te,Ee){var Re=1e4*Te.scaleFactor();if(e=Math.ceil(e*Re)/Re,e>=getStringWidth(n,t,Te))return n;for(;e<getStringWidth(n+Ee,t,Te)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+Ee}function createTable(n,e){var t=new DocHandler(n),Te=parseContent(e,t.scaleFactor()),Ee=new Table(e,Te);return calculateWidths(t,Ee),t.applyStyles(t.userStyles),Ee}function parseContent(n,e){var t=n.content,Te=createColumns(t.columns);if(t.head.length===0){var Ee=generateSectionRow(Te,"head");Ee&&t.head.push(Ee)}if(t.foot.length===0){var Ee=generateSectionRow(Te,"foot");Ee&&t.foot.push(Ee)}var Re=n.settings.theme,Ce=n.styles;return{columns:Te,head:parseSection("head",t.head,Te,Ce,Re,e),body:parseSection("body",t.body,Te,Ce,Re,e),foot:parseSection("foot",t.foot,Te,Ce,Re,e)}}function parseSection(n,e,t,Te,Ee,Re){var Ce={},De=e.map(function($e,Ve){for(var Be=0,Me={},Oe=0,Ue=0,ze=0,He=t;ze<He.length;ze++){var Ge=He[ze];if(Ce[Ge.index]==null||Ce[Ge.index].left===0)if(Ue===0){var Ke=void 0;Array.isArray($e)?Ke=$e[Ge.index-Oe-Be]:Ke=$e[Ge.dataKey];var Xe={};typeof Ke=="object"&&!Array.isArray(Ke)&&(Xe=Ke?.styles||{});var Je=cellStyles(n,Ge,Ve,Ee,Te,Re,Xe),un=new Cell(Ke,Je,n);Me[Ge.dataKey]=un,Me[Ge.index]=un,Ue=un.colSpan-1,Ce[Ge.index]={left:un.rowSpan-1,times:Ue}}else Ue--,Oe++;else Ce[Ge.index].left--,Ue=Ce[Ge.index].times,Be++}return new Row($e,Ve,n,Me)});return De}function generateSectionRow(n,e){var t={};return n.forEach(function(Te){if(Te.raw!=null){var Ee=getSectionTitle(e,Te.raw);Ee!=null&&(t[Te.dataKey]=Ee)}}),Object.keys(t).length>0?t:null}function getSectionTitle(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function createColumns(n){return n.map(function(e,t){var Te,Ee;return typeof e=="object"?Ee=(Te=e.dataKey)!==null&&Te!==void 0?Te:t:Ee=t,new Column(Ee,e,t)})}function cellStyles(n,e,t,Te,Ee,Re,Ce){var De=getTheme(Te),$e;n==="head"?$e=Ee.headStyles:n==="body"?$e=Ee.bodyStyles:n==="foot"&&($e=Ee.footStyles);var Ve=assign({},De.table,De[n],Ee.styles,$e),Be=Ee.columnStyles[e.dataKey]||Ee.columnStyles[e.index]||{},Me=n==="body"?Be:{},Oe=n==="body"&&t%2===0?assign({},De.alternateRow,Ee.alternateRowStyles):{},Ue=defaultStyles(Re),ze=assign({},Ue,Ve,Oe,Me);return assign(ze,Ce)}function getColumnsCanFitInPage(n,e,t){var Te;t===void 0&&(t={});var Ee=getPageAvailableWidth(n,e),Re=new Map,Ce=[],De=[],$e=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?$e=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&($e=[e.settings.horizontalPageBreakRepeat]),$e.forEach(function(Oe){var Ue=e.columns.find(function(ze){return ze.dataKey===Oe||ze.index===Oe});Ue&&!Re.has(Ue.index)&&(Re.set(Ue.index,!0),Ce.push(Ue.index),De.push(e.columns[Ue.index]),Ee-=Ue.wrappedWidth)});for(var Ve=!0,Be=(Te=t?.start)!==null&&Te!==void 0?Te:0;Be<e.columns.length;){if(Re.has(Be)){Be++;continue}var Me=e.columns[Be].wrappedWidth;if(Ve||Ee>=Me)Ve=!1,Ce.push(Be),De.push(e.columns[Be]),Ee-=Me;else break;Be++}return{colIndexes:Ce,columns:De,lastIndex:Be-1}}function calculateAllColumnsCanFitInPage(n,e){for(var t=[],Te=0;Te<e.columns.length;Te++){var Ee=getColumnsCanFitInPage(n,e,{start:Te});Ee.columns.length&&(t.push(Ee),Te=Ee.lastIndex)}return t}function drawTable(n,e){var t=e.settings,Te=t.startY,Ee=t.margin,Re={x:Ee.left,y:Te},Ce=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),De=Te+Ee.bottom+Ce;if(t.pageBreak==="avoid"){var $e=e.body,Ve=$e.reduce(function(Oe,Ue){return Oe+Ue.height},0);De+=Ve}var Be=new DocHandler(n);(t.pageBreak==="always"||t.startY!=null&&De>Be.pageSize().height)&&(nextPage(Be),Re.y=Ee.top),e.callWillDrawPageHooks(Be,Re);var Me=assign({},Re);e.startPageNumber=Be.pageNumber(),t.horizontalPageBreak?printTableWithHorizontalPageBreak(Be,e,Me,Re):(Be.applyStyles(Be.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(Oe){return printRow(Be,e,Oe,Re,e.columns)}),Be.applyStyles(Be.userStyles),e.body.forEach(function(Oe,Ue){var ze=Ue===e.body.length-1;printFullRow(Be,e,Oe,ze,Me,Re,e.columns)}),Be.applyStyles(Be.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(Oe){return printRow(Be,e,Oe,Re,e.columns)})),addTableBorder(Be,e,Me,Re),e.callEndPageHooks(Be,Re),e.finalY=Re.y,n.lastAutoTable=e,Be.applyStyles(Be.userStyles)}function printTableWithHorizontalPageBreak(n,e,t,Te){var Ee=calculateAllColumnsCanFitInPage(n,e),Re=e.settings;if(Re.horizontalPageBreakBehaviour==="afterAllRows")Ee.forEach(function(Ve,Be){n.applyStyles(n.userStyles),Be>0?addPage(n,e,t,Te,Ve.columns,!0):printHead(n,e,Te,Ve.columns),printBody(n,e,t,Te,Ve.columns),printFoot(n,e,Te,Ve.columns)});else for(var Ce=-1,De=Ee[0],$e=function(){var Ve=Ce;if(De){n.applyStyles(n.userStyles);var Be=De.columns;Ce>=0?addPage(n,e,t,Te,Be,!0):printHead(n,e,Te,Be),Ve=printBodyWithoutPageBreaks(n,e,Ce+1,Te,Be),printFoot(n,e,Te,Be)}var Me=Ve-Ce;Ee.slice(1).forEach(function(Oe){n.applyStyles(n.userStyles),addPage(n,e,t,Te,Oe.columns,!0),printBodyWithoutPageBreaks(n,e,Ce+1,Te,Oe.columns,Me),printFoot(n,e,Te,Oe.columns)}),Ce=Ve};Ce<e.body.length-1;)$e()}function printHead(n,e,t,Te){var Ee=e.settings;n.applyStyles(n.userStyles),(Ee.showHead==="firstPage"||Ee.showHead==="everyPage")&&e.head.forEach(function(Re){return printRow(n,e,Re,t,Te)})}function printBody(n,e,t,Te,Ee){n.applyStyles(n.userStyles),e.body.forEach(function(Re,Ce){var De=Ce===e.body.length-1;printFullRow(n,e,Re,De,t,Te,Ee)})}function printBodyWithoutPageBreaks(n,e,t,Te,Ee,Re){n.applyStyles(n.userStyles),Re=Re??e.body.length;var Ce=Math.min(t+Re,e.body.length),De=-1;return e.body.slice(t,Ce).forEach(function($e,Ve){var Be=t+Ve===e.body.length-1,Me=getRemainingPageSpace(n,e,Be,Te);$e.canEntireRowFit(Me,Ee)&&(printRow(n,e,$e,Te,Ee),De=t+Ve)}),De}function printFoot(n,e,t,Te){var Ee=e.settings;n.applyStyles(n.userStyles),(Ee.showFoot==="lastPage"||Ee.showFoot==="everyPage")&&e.foot.forEach(function(Re){return printRow(n,e,Re,t,Te)})}function getRemainingLineCount(n,e,t){var Te=t.getLineHeight(n.styles.fontSize),Ee=n.padding("vertical"),Re=Math.floor((e-Ee)/Te);return Math.max(0,Re)}function modifyRowToFit(n,e,t,Te){var Ee={};n.spansMultiplePages=!0,n.height=0;for(var Re=0,Ce=0,De=t.columns;Ce<De.length;Ce++){var $e=De[Ce],Ve=n.cells[$e.index];if(Ve){Array.isArray(Ve.text)||(Ve.text=[Ve.text]);var Be=new Cell(Ve.raw,Ve.styles,Ve.section);Be=assign(Be,Ve),Be.text=[];var Me=getRemainingLineCount(Ve,e,Te);Ve.text.length>Me&&(Be.text=Ve.text.splice(Me,Ve.text.length));var Oe=Te.scaleFactor(),Ue=Te.getLineHeightFactor();Ve.contentHeight=Ve.getContentHeight(Oe,Ue),Ve.contentHeight>=e&&(Ve.contentHeight=e,Be.styles.minCellHeight-=e),Ve.contentHeight>n.height&&(n.height=Ve.contentHeight),Be.contentHeight=Be.getContentHeight(Oe,Ue),Be.contentHeight>Re&&(Re=Be.contentHeight),Ee[$e.index]=Be}}var ze=new Row(n.raw,-1,n.section,Ee,!0);ze.height=Re;for(var He=0,Ge=t.columns;He<Ge.length;He++){var $e=Ge[He],Be=ze.cells[$e.index];Be&&(Be.height=ze.height);var Ve=n.cells[$e.index];Ve&&(Ve.height=n.height)}return ze}function shouldPrintOnCurrentPage(n,e,t,Te){var Ee=n.pageSize().height,Re=Te.settings.margin,Ce=Re.top+Re.bottom,De=Ee-Ce;e.section==="body"&&(De-=Te.getHeadHeight(Te.columns)+Te.getFootHeight(Te.columns));var $e=e.getMinimumRowHeight(Te.columns,n),Ve=$e<t;if($e>De)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!Ve)return!1;var Be=e.hasRowSpan(Te.columns),Me=e.getMaxCellHeight(Te.columns)>De;return Me?(Be&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Be||Te.settings.rowPageBreak==="avoid")}function printFullRow(n,e,t,Te,Ee,Re,Ce){var De=getRemainingPageSpace(n,e,Te,Re);if(t.canEntireRowFit(De,Ce))printRow(n,e,t,Re,Ce);else if(shouldPrintOnCurrentPage(n,t,De,e)){var $e=modifyRowToFit(t,De,e,n);printRow(n,e,t,Re,Ce),addPage(n,e,Ee,Re,Ce),printFullRow(n,e,$e,Te,Ee,Re,Ce)}else addPage(n,e,Ee,Re,Ce),printFullRow(n,e,t,Te,Ee,Re,Ce)}function printRow(n,e,t,Te,Ee){Te.x=e.settings.margin.left;for(var Re=0,Ce=Ee;Re<Ce.length;Re++){var De=Ce[Re],$e=t.cells[De.index];if(!$e){Te.x+=De.width;continue}n.applyStyles($e.styles),$e.x=Te.x,$e.y=Te.y;var Ve=e.callCellHooks(n,e.hooks.willDrawCell,$e,t,De,Te);if(Ve===!1){Te.x+=De.width;continue}drawCellRect(n,$e,Te);var Be=$e.getTextPos();autoTableText($e.text,Be.x,Be.y,{halign:$e.styles.halign,valign:$e.styles.valign,maxWidth:Math.ceil($e.width-$e.padding("left")-$e.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,$e,t,De,Te),Te.x+=De.width}Te.y+=t.height}function drawCellRect(n,e,t){var Te=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof Te.lineWidth=="number"){var Ee=getFillStyle(Te.lineWidth,Te.fillColor);Ee&&n.rect(e.x,t.y,e.width,e.height,Ee)}else typeof Te.lineWidth=="object"&&(Te.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),drawCellBorders(n,e,t,Te.lineWidth))}function drawCellBorders(n,e,t,Te){var Ee,Re,Ce,De;Te.top&&(Ee=t.x,Re=t.y,Ce=t.x+e.width,De=t.y,Te.right&&(Ce+=.5*Te.right),Te.left&&(Ee-=.5*Te.left),$e(Te.top,Ee,Re,Ce,De)),Te.bottom&&(Ee=t.x,Re=t.y+e.height,Ce=t.x+e.width,De=t.y+e.height,Te.right&&(Ce+=.5*Te.right),Te.left&&(Ee-=.5*Te.left),$e(Te.bottom,Ee,Re,Ce,De)),Te.left&&(Ee=t.x,Re=t.y,Ce=t.x,De=t.y+e.height,Te.top&&(Re-=.5*Te.top),Te.bottom&&(De+=.5*Te.bottom),$e(Te.left,Ee,Re,Ce,De)),Te.right&&(Ee=t.x+e.width,Re=t.y,Ce=t.x+e.width,De=t.y+e.height,Te.top&&(Re-=.5*Te.top),Te.bottom&&(De+=.5*Te.bottom),$e(Te.right,Ee,Re,Ce,De));function $e(Ve,Be,Me,Oe,Ue){n.getDocument().setLineWidth(Ve),n.getDocument().line(Be,Me,Oe,Ue,"S")}}function getRemainingPageSpace(n,e,t,Te){var Ee=e.settings.margin.bottom,Re=e.settings.showFoot;return(Re==="everyPage"||Re==="lastPage"&&t)&&(Ee+=e.getFootHeight(e.columns)),n.pageSize().height-Te.y-Ee}function addPage(n,e,t,Te,Ee,Re){Ee===void 0&&(Ee=[]),Re===void 0&&(Re=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!Re&&e.foot.forEach(function(De){return printRow(n,e,De,Te,Ee)}),e.callEndPageHooks(n,Te);var Ce=e.settings.margin;addTableBorder(n,e,t,Te),nextPage(n),e.pageNumber++,Te.x=Ce.left,Te.y=Ce.top,t.y=Ce.top,e.callWillDrawPageHooks(n,Te),e.settings.showHead==="everyPage"&&(e.head.forEach(function(De){return printRow(n,e,De,Te,Ee)}),n.applyStyles(n.userStyles))}function nextPage(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function applyPlugin(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var Te=e[0],Ee=parseInput(this,Te),Re=createTable(this,Ee);return drawTable(this,Re),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,Te,Ee){autoTableText(e,t,Te,Ee,this)},n.API.autoTableSetDefaults=function(e){return DocHandler.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){DocHandler.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var Te;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var Ee=new DocHandler(this),Re=parseHtml(Ee,e,window,t,!1),Ce=Re.head,De=Re.body,$e=((Te=Ce[0])===null||Te===void 0?void 0:Te.map(function(Ve){return Ve.content}))||[];return{columns:$e,rows:De,data:De}}}var _a;function autoTable(n,e){var t=parseInput(n,e),Te=createTable(n,t);drawTable(n,Te)}try{if(typeof window<"u"&&window){var anyWindow=window,jsPDF=anyWindow.jsPDF||((_a=anyWindow.jspdf)===null||_a===void 0?void 0:_a.jsPDF);jsPDF&&applyPlugin(jsPDF)}}catch(n){console.error("Could not apply autoTable plugin",n)}const LoginModal$1=({onClose:n})=>{const[e,t]=reactExports.useState(!1),[Te,Ee]=reactExports.useState(!1),[Re,Ce]=reactExports.useState(!1),[De,$e]=reactExports.useState(!1),[Ve,Be]=reactExports.useState(!1),[Me,Oe]=reactExports.useState(!1),[Ue,ze]=reactExports.useState({fullName:"",email:"",password:"",confirmPassword:"",newPassword:"",confirmNewPassword:""}),[He,Ge]=reactExports.useState(!1),[Ke,Xe]=reactExports.useState(""),[Je,un]=reactExports.useState(""),fn=useNavigate(),yn=reactExports.useRef();reactExports.useEffect(()=>{const In=Nn=>{yn.current&&!yn.current.contains(Nn.target)&&(n?n():fn(-1))};return document.addEventListener("mousedown",In),()=>{document.removeEventListener("mousedown",In)}},[n,fn]);const gn=In=>{ze({...Ue,[In.target.name]:In.target.value})},mn=()=>{const{fullName:In,email:Nn,password:On,confirmPassword:Fn}=Ue;if(Te)return!Nn||!/\S+@\S+\.\S+/.test(Nn)?(y$1.error("Valid email is required."),!1):!0;if(e){if(!In.trim())return y$1.error("Full Name is required."),!1;if(!/^[A-Za-z\s]+$/.test(In))return y$1.error("Full Name can only contain letters and spaces."),!1;if(On!==Fn)return y$1.error("Passwords do not match."),!1}return!Nn||!/\S+@\S+\.\S+/.test(Nn)?(y$1.error("Valid email is required."),!1):!On||On.length<6?(y$1.error("Password must be at least 6 characters."),!1):!0},dn=async In=>{if(In.preventDefault(),!!mn()){Ge(!0);try{await sendPasswordResetEmail(auth,Ue.email),y$1.success("Password reset email sent! Check your inbox and follow the instructions to reset your password."),setTimeout(()=>{Ee(!1),Tn()},3e3)}catch(Nn){Nn.code==="auth/user-not-found"?y$1.error("No account found with this email address."):Nn.code==="auth/invalid-email"?y$1.error("Invalid email address."):y$1.error(Nn.message)}finally{Ge(!1)}}},vn=async In=>{if(In.preventDefault(),!!mn()){Ge(!0);try{let Nn;e?(Nn=await createUserWithEmailAndPassword(auth,Ue.email,Ue.password),await setDoc(doc(db,"users",Nn.user.uid),{fullName:Ue.fullName,email:Ue.email,createdAt:serverTimestamp()}),y$1.success("Account created successfully!")):(Nn=await signInWithEmailAndPassword(auth,Ue.email,Ue.password),y$1.success("Signed in successfully!")),fn("/")}catch(Nn){const On=Nn.code;On==="auth/email-already-in-use"?y$1.error("Email already registered. Try logging in."):On==="auth/invalid-email"?y$1.error("Invalid email format."):On==="auth/weak-password"?y$1.error("Password too weak (min 6 characters)."):On==="auth/user-not-found"||On==="auth/wrong-password"?y$1.error("Wrong email or password."):y$1.error(Nn.message)}finally{Ge(!1)}}},bn=async()=>{Ge(!0),Xe(""),un("");try{const Nn=(await signInWithPopup(auth,googleProvider)).user,On=doc(db,"users",Nn.uid);(await getDoc(On)).exists()?console.log("User already exists, skipping save "):(await setDoc(On,{uid:Nn.uid,name:Nn.displayName,email:Nn.email,photoURL:Nn.photoURL,provider:"google",createdAt:new Date}),console.log("New user saved in Firestore ")),fn("/")}catch(In){console.error("Google Sign-In Error:",In.message),Xe(" "+In.message)}finally{Ge(!1)}},Tn=()=>{ze({fullName:"",email:"",password:"",confirmPassword:"",newPassword:"",confirmNewPassword:""}),Ce(!1),$e(!1),Be(!1),Oe(!1)},En=()=>{n?n():fn(-1)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{ref:yn,className:"bg-gray-900/95 backdrop-blur-md border border-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-md space-y-6 relative overflow-hidden",children:[jsxRuntimeExports.jsx("button",{onClick:En,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors duration-200 cursor-pointer z-40",title:"Go back",children:jsxRuntimeExports.jsx(X$1,{className:"w-6 h-6"})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/20 via-transparent to-purple-600/10 rounded-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-600 to-purple-500 rounded-full mb-4",children:jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-white",children:"E"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:Te?"Reset Password":e?"Join EDGEx":"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:Te?"Enter your email and new password to reset your account":e?"Create your account to start your AI-powered learning journey":"Sign in to continue your learning journey"})]}),jsxRuntimeExports.jsx("form",{onSubmit:Te?dn:vn,className:"space-y-4",children:Te?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Ue.email,onChange:gn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Enter your email address",required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:He,className:"w-full bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white py-3 rounded-lg font-semibold transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:He?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending Reset Email..."]}):"Send Reset Email"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:"text",name:"fullName",value:Ue.fullName,onChange:gn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Full Name",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Ue.email,onChange:gn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Email Address",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:Re?"text":"password",name:"password",value:Ue.password,onChange:gn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 pr-12 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Password",required:!0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ce(!Re),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:Re?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]}),e&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:De?"text":"password",name:"confirmPassword",value:Ue.confirmPassword,onChange:gn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 pr-12 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Confirm Password",required:!0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$e(!De),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:De?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:He,className:"w-full bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white py-3 rounded-lg font-semibold transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:He?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):e?"Create Account":"Sign In"})]})}),jsxRuntimeExports.jsxs("div",{className:"text-center mt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Or continue with"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:bn,disabled:He,className:"flex items-center justify-center gap-2 w-full py-3 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white rounded-lg font-semibold transition-all duration-200 disabled:opacity-50 transform hover:scale-[1.02]",children:[jsxRuntimeExports.jsx("img",{src:"https://www.svgrepo.com/show/355037/google.svg",alt:"Google",className:"w-5 h-5"}),"Continue with Google"]})]}),jsxRuntimeExports.jsx("div",{className:"text-center pt-6 border-t border-gray-700/50 space-y-3",children:Te?jsxRuntimeExports.jsxs("button",{onClick:()=>{Ee(!1),Tn()},className:"flex items-center justify-center gap-2 text-purple-400 font-semibold hover:text-purple-300 transition-colors hover:underline mx-auto",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Sign In"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!e&&jsxRuntimeExports.jsx("button",{onClick:()=>{Ee(!0),Tn()},className:"text-purple-400 font-semibold hover:text-purple-300 transition-colors hover:underline text-sm",children:"Forgot Password?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm",children:[e?"Already have an account?":"New to EDGEx?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>{t(!e),Tn()},className:"text-purple-400 font-semibold hover:text-purple-300 transition-colors hover:underline",children:e?"Sign In":"Create Account"})]})]})})]})]})})};function ChatInput$2({onSend:n,disabled:e}){const[t,Te]=reactExports.useState(""),[Ee,Re]=reactExports.useState(!1),Ce=reactExports.useRef(null),De=()=>{const Ve=t.trim();!Ve||e||(n?.(Ve),Te(""))},$e=Ve=>{(Ve.key==="Enter"||Ve.code==="Enter")&&!Ve.shiftKey&&!Ee&&(Ve.preventDefault(),De())};return reactExports.useEffect(()=>{const Ve=Ce.current;if(Ve){Ve.style.height="auto";const Be=Ve.scrollHeight;Ve.style.height=`${Math.min(Be,200)}px`}},[t]),jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2 bg-white/90 dark:bg-purple-700 border border-gray-300 dark:border-purple-600 rounded-2xl px-4 py-2 shadow-xl backdrop-blur-lg",children:[jsxRuntimeExports.jsx("textarea",{ref:Ce,value:t,onChange:Ve=>Te(Ve.target.value),onKeyDown:$e,onCompositionStart:()=>Re(!0),onCompositionEnd:()=>Re(!1),rows:1,placeholder:" Tell me about your goals, hobbies, dreams...","aria-label":"Message",disabled:e,className:"flex-1 resize-none bg-transparent outline-none text-gray-800 dark:text-white placeholder:text-gray-500 dark:placeholder:text-purple-200"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:De,disabled:e||!t.trim(),className:"p-2 rounded-full hover:scale-110 transition-all text-pink-600 dark:text-pink-300 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Send message",children:jsxRuntimeExports.jsx(SendHorizontal,{className:"w-5 h-5"})})]})}const extractMemory=n=>{const e=n.match(/(?:I am|My name is)\s+(\w+)/i)?.[1],t=n.match(/(?:I like|enjoy|love)\s+(.+?)(?=[.,]|$)/i)?.[1],Te=n.match(/(?:want to be(?:come)?|dream of being)\s+(.+?)(?=[.,]|$)/i)?.[1];return{name:e||"friend",favSubject:t||"design",goal:Te||"a designer"}};function CareerCrack({user:n}){const[e,t]=reactExports.useState([]),[Te,Ee]=reactExports.useState(null),[Re,Ce]=reactExports.useState([]),[De,$e]=reactExports.useState(null),[Ve,Be]=reactExports.useState(!0),[Me,Oe]=reactExports.useState(!1),Ue=reactExports.useRef(null),[ze,He]=reactExports.useState(!1);reactExports.useEffect(()=>{Ue.current?.scrollIntoView({behavior:"smooth"})},[e]),reactExports.useEffect(()=>{n?(Ee(n.uid),Ge(n.uid),un(n.uid),He(!1)):(Ee(null),t([]),Ce([]),He(!0))},[n]);const Ge=async dn=>{const vn=doc(db,"memory",dn),bn=await getDoc(vn);if(bn.exists()){const{name:Tn,favSubject:En,goal:In}=bn.data();t([{role:"ai",text:` Welcome back, ${Tn}! I remember you like ${En} and dream of becoming ${In}.`}])}else t([])},Ke=async dn=>{const vn=extractMemory(dn);Te&&await setDoc(doc(db,"memory",Te),vn)},Xe=async dn=>{if(!Te)return;const vn=dn.find(Tn=>Tn.role==="user")?.text||"Untitled",bn=await addDoc(collection(db,"chats",Te,"history"),{title:vn.slice(0,25),messages:dn,createdAt:serverTimestamp()});$e(bn.id)},Je=async dn=>{if(!dn.trim()||!Te)return;Oe(!0);const vn={role:"user",text:dn},bn={role:"ai",text:"__typing__"},Tn=[...e,vn,bn];t(Tn);const En=`
      You are CareerCrack, an intelligent, empathetic, and professional career guidance assistant designed to help students explore career options, make informed decisions, and plan their academic and professional journeys.

      Your Role & Goals:
        - Act as a career counselor for students.
        - Provide guidance, resources, and advice about career paths, higher education, skill development, internships, and job opportunities.
        - Adapt responses based on the students background, interests, and goals.
        - Help students understand emerging industries, skill demands, and educational pathways.
        - Stay encouraging, supportive, and non-judgmental in tone.

      What You Can Do
      1. Career Exploration
        - Suggest career paths based on students interests, strengths, and aspirations.
        - Explain roles in different industries (engineering, medicine, arts, business, IT, AI/ML, design, etc.).
        - Provide information on future career trends.

      2. Academic Guidance
        - Recommend suitable courses, degrees, and certifications.
        - Explain differences between educational streams (STEM, humanities, commerce, vocational, etc.).
        - Advise on standardized tests, entrance exams, and scholarships.

      3. Skill Development
        - Suggest relevant technical and soft skills.
        - Recommend online learning resources (Coursera, edX, Udemy, free resources, etc.).
        - Provide project or portfolio-building ideas.

      4. Professional Growth
        - Guidance on internships, resume building, networking, LinkedIn usage.
        - Explain workplace skills (communication, teamwork, adaptability).
        - Share strategies for career transitions.

      5. Decision-Making Support
        - Help students compare multiple career options with pros/cons.
        - Provide step-by-step pathways (short-term and long-term).
        - Encourage self-reflection and informed choices rather than giving absolute answers.

      What You Should Avoid
        - Do not write or debug programming code (your role is guidance, not coding).
        - Do not provide medical, financial, or legal advice.
        - Do not guarantee job placement, exam success, or admission results.
        - Do not share misinformationif unsure, clarify or encourage further research.
        - Avoid being dismissive, negative, or judgmental.

      Interaction Style
        - Use simple, student-friendly language (avoid jargon unless explained).
        - Be empathetic and motivational: acknowledge the students concerns and encourage them.
        - Provide step-by-step explanations when guiding.
        - Suggest actionable next steps (e.g., You could start by taking an online course in Python rather than vague advice).

      Extras
        - Maintain a friendly tone.
        - Always stick to your scope of replies, i.e, DO NOT reply to any other queries except those regarding career guidance. You don't have to be helpful for non relevant queries. Just reject the user and ask them to ask valid questions which are related to your field of expertise. You don't need to provide any tips too. Just say that you can't reply to that query and stop.
        - You should NEVER write code at any cost.
        - You shouldn't provide any guidance regarding coding queries
        - You should NOT reply to any queries which are not related to career guidance. (for example, asking questions related to a code.)

      EXAMPLES
      <RELEVANT REQUESTS>
      1. Student: I want to get into Data Science. Where should I start?
        - Chatbot: Thats an exciting field!  A step-by-step path would be:
        - Math & Stats  Brush up on probability, linear algebra, and statistics.
        - Programming  Start with Python (most beginner-friendly).
        - Data Handling  Learn Pandas, NumPy, and SQL for data analysis.
        - Visualization  Tools like Matplotlib, Seaborn, or Tableau.
        - Machine Learning Basics  Understand regression, classification, clustering.

        Free resources you could check:
        - Kaggle (hands-on datasets & competitions)
        - Coursera: Data Science Specialization
        - YouTube: Krish Naik, Data School

        Would you like me to suggest a 3-month learning plan to kickstart your journey?

      2. Student: Im in Class 11 and I really like biology, but Im not sure if I should go for medicine.
        - Chatbot: Thats great! Enjoying biology opens up many possibilities beyond medicine. 
        - If you like research, you could explore biotechnology, genetics, or bioinformatics.
        - If you enjoy helping people directly, medicine, nursing, or physiotherapy could be a fit.
        - If youre curious about environment & sustainability, fields like environmental biology or agricultural sciences are options.
        - Would you like me to give you a roadmap for medical vs. non-medical biology careers so you can compare them clearly?

      <IRRELEVANT REQUESTS>
      3. Student: Can you write me a C++ program for factorial?
        - Chatbot: Im not here to write code for youbut if youre interested in programming, thats a great career skill!
        - Would you like me to guide you on how to start with C++ and the kinds of careers (like Software Engineering, Game Development, AI) where its really useful?

      4. Student: Can you tell me how to win in Valorant?
        - Chatbot: Haha, sounds fun! But I focus only on career and academic guidance.
        - If youre passionate about gaming, though, I can show you career options in Game Design, Esports, and Game Development. Do you want me to share those?

      5. Student: Bro, I dont know how to talk to my girlfriend. Can you give me tips?
        - Chatbot: Relationships are very personal, and I might not be the best fit to guide you there.
        - But if youre asking because youre worried about balancing personal life with studies and career, I can definitely help you with time management and stress balance strategies. Want me to suggest some techniques?
    `;try{let In="";Ve?In=(await axios.post("https://edgex-backend.onrender.com/groq",{model:"llama3-8b-8192",messages:[{role:"system",content:En},{role:"user",content:dn}],temperature:.7})).data.choices[0].message.content:In=(await axios.post("http://127.0.0.1:5000/ask",{prompt:dn})).data.response,await Ke(dn);const Nn=[...Tn.slice(0,-1),{role:"ai",text:In}];t(Nn),await Xe(Nn)}catch(In){console.error("AI error:",In),t(Nn=>[...Nn.slice(0,-1),{role:"ai",text:" Something went wrong. Try again!"}])}finally{Oe(!1)}},un=dn=>{const vn=query(collection(db,"chats",dn,"history"),orderBy("createdAt","desc"));onSnapshot(vn,bn=>{const Tn=bn.docs.map(En=>({id:En.id,...En.data()}));Ce(Tn)})},fn=async(dn,vn)=>{const bn=doc(db,"chats",Te,"history",dn);await updateDoc(bn,{title:vn})},yn=dn=>{const vn=Re.find(bn=>bn.id===dn);vn&&(t(vn.messages||[]),$e(dn))},gn=(dn,vn,bn,Tn,En,In,Nn,On)=>{if(!vn||vn.length===0)return;if(!bn||bn.length!==vn.length){console.error("Chart data and labels must have the same length");return}On<=0&&(On=Math.max(...vn,1));const Fn=In/vn.length*.6,$n=In/vn.length*.4;dn.setFillColor("#7E57C2"),dn.setDrawColor("#5E35B1"),dn.setLineWidth(.8),vn.forEach((Hn,Dn)=>{const Un=Hn/On*Nn,Cn=Tn+Dn*(Fn+$n),kn=En+Nn-Un;dn.roundedRect(Cn,kn,Fn,Un,3,3,"F"),dn.setFontSize(9),dn.setTextColor("#333");const Yn=dn.getTextWidth(bn[Dn]);dn.text(bn[Dn],Cn+Fn/2-Yn/2,En+Nn+12)}),dn.setDrawColor("#AAA"),dn.rect(Tn,En,In,Nn)},mn=async(dn,vn,bn)=>{try{const Tn=vn||{name:"friend",favSubject:"design",goal:"designer"},{recommendedCareers:En=["Software Engineer","Designer"],keySkills:In=["Problem Solving","Collaboration"],nextSteps:Nn=["Take online course","Build projects"],skillFitScores:On=[80,65,90],skillFitLabels:Fn=["Coding","Communication","Creativity"]}=bn||{},$n=new E({unit:"pt",format:"a4",orientation:"portrait"}),Hn=$n.internal.pageSize.getWidth();$n.setFillColor("#7E57C2"),$n.rect(0,0,Hn,60,"F"),$n.setFont("helvetica","bold"),$n.setFontSize(24),$n.setTextColor("#FFFFFF"),$n.text("Your Career Report",40,40),$n.setFontSize(12),$n.setFont("helvetica","normal"),$n.text("powered by Edgex",40,55);let Dn=90;$n.setFillColor("#F3E5F5"),$n.roundedRect(40,Dn-20,Hn-80,80,10,10,"F"),$n.setTextColor("#4A148C"),$n.setFontSize(16),$n.text("User Information",50,Dn),$n.setFont("helvetica","normal"),$n.setFontSize(12),$n.setTextColor("#333333"),$n.text(`Name: ${Tn.name}`,50,Dn+30),$n.text(`Dream Career: ${Tn.goal}`,50,Dn+50),$n.setTextColor("#5E35B1"),$n.text("AI Suggestions",40,Dn),Dn+=10;const Un={startY:Dn,margin:{left:40,right:40},headStyles:{fillColor:"#CE93D8",textColor:"#4A148C",fontStyle:"bold"},styles:{fontSize:11,cellPadding:6}};autoTable($n,{...Un,head:[["Recommended Career Fields"]],body:En.map(Jn=>[Jn])}),Dn=$n.lastAutoTable.finalY+15,autoTable($n,{...Un,startY:Dn,head:[["Key Skills to Learn"]],body:In.map(Jn=>[Jn])}),Dn=$n.lastAutoTable.finalY+15,autoTable($n,{...Un,startY:Dn,head:[["Actionable Next Steps"]],body:Nn.map(Jn=>[Jn])}),Dn=$n.lastAutoTable.finalY+40,$n.setFontSize(14),$n.setFont("helvetica","bold"),$n.setTextColor("#5E35B1"),$n.text("Skill Fit Overview",40,Dn-10);const Cn=Hn-80,kn=100,Yn=Math.max(...On,100);gn($n,On,Fn,40,Dn,Cn,kn,Yn),$n.setFontSize(10),$n.setTextColor("#888888"),$n.text("Dream big! - Team Edgex",40,780),$n.save("Career_Report.pdf")}catch(Tn){console.error("Failed to generate PDF:",Tn),alert("Failed to generate PDF. Please try again.")}};return jsxRuntimeExports.jsxs("div",{children:[ze&&jsxRuntimeExports.jsx(LoginModal$1,{onClose:()=>He(!1)}),jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-[#ffe0ec] via-[#f8bbd0] to-[#f3d1f4] dark:from-[#2a004f] dark:via-[#3c1361] dark:to-[#1b0032] text-gray-900 dark:text-white font-[Poppins] transition-all duration-500 ease-in-out",children:[jsxRuntimeExports.jsxs("div",{className:"w-64 bg-white/60 dark:bg-[#30104d]/60 backdrop-blur-xl border-r border-white/20 p-4 space-y-4 shadow-xl rounded-tr-3xl rounded-br-3xl transition-all duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:" Your Chats"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-pink-100 to-purple-200 dark:from-purple-800 dark:to-fuchsia-900 rounded-xl",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white",children:" AI Mode"}),jsxRuntimeExports.jsx("button",{onClick:()=>Be(!Ve),className:"text-xs bg-white/70 dark:bg-purple-700 px-3 py-1 rounded-full font-bold hover:bg-white dark:hover:bg-purple-600 transition shadow",children:Ve?" Groq":" Local"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{t([]),$e(null)},className:"flex items-center gap-2 text-sm bg-gradient-to-r from-pink-500 via-fuchsia-500 to-purple-500 text-white w-full py-2 px-3 rounded-full hover:scale-105 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx(CirclePlus,{size:16})," New Chat"]}),Re.map(dn=>jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-xl cursor-pointer hover:scale-[1.02] hover:bg-white/40 dark:hover:bg-purple-800 transition-all shadow-sm ${De===dn.id?"bg-white/50 dark:bg-purple-700":""}`,onClick:()=>yn(dn.id),children:[jsxRuntimeExports.jsx("input",{className:"bg-transparent font-medium text-sm w-full",defaultValue:dn.title,onBlur:vn=>fn(dn.id,vn.target.value)}),dn.createdAt?.seconds&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[" ",new Date(dn.createdAt.seconds*1e3).toLocaleString()]})]},dn.id))]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-6 animate-fade-in",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mb-6",children:jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-purple-600 via-pink-500 to-fuchsia-500 bg-clip-text text-transparent drop-shadow-lg",children:"CareerCrack"})}),jsxRuntimeExports.jsxs("div",{className:"h-96 overflow-y-auto space-y-4 p-4 bg-white/70 dark:bg-[#2a004f]/60 backdrop-blur-xl rounded-3xl border border-white/30 shadow-2xl animate-slide-in-up transition-all",children:[e.map((dn,vn)=>jsxRuntimeExports.jsx(ChatBubble,{role:dn.role,text:dn.text},vn)),jsxRuntimeExports.jsx("div",{ref:Ue})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(ChatInput$2,{onSend:Je,disabled:Me})}),jsxRuntimeExports.jsxs("button",{onClick:mn,className:"mt-6 flex items-center gap-2 bg-gradient-to-r from-pink-500 via-fuchsia-500 to-purple-600 text-white px-5 py-3 rounded-full shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300",children:[" Export Chat",jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:"PDF"})]})]})]})]})}function ChatInput$1({onSend:n,disabled:e}){const[t,Te]=reactExports.useState(""),[Ee,Re]=reactExports.useState(!1),Ce=()=>{const $e=t.trim();!$e||e||(n?.($e),Te(""))},De=$e=>{($e.key==="Enter"||$e.code==="Enter")&&!$e.shiftKey&&!Ee&&($e.preventDefault(),Ce())};return jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2",children:[jsxRuntimeExports.jsx("textarea",{value:t,onChange:$e=>Te($e.target.value),onKeyDown:De,onCompositionStart:()=>Re(!0),onCompositionEnd:()=>Re(!1),rows:1,placeholder:"Type a message","aria-label":"Message",className:"flex-1 resize-none rounded-xl border p-3 outline-none"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Ce,disabled:e||!t.trim(),className:"rounded-xl px-4 py-2 border","aria-label":"Send message",children:"Send"})]})}const LoginModal=({onLogin:n})=>{const[e,t]=reactExports.useState(""),[Te,Ee]=reactExports.useState(""),[Re,Ce]=reactExports.useState(""),[De,$e]=reactExports.useState("login"),Ve=async Be=>{Be.preventDefault(),Ce("");try{let Me;De==="signup"?Me=await createUserWithEmailAndPassword(auth,e,Te):Me=await signInWithEmailAndPassword(auth,e,Te),n(Me.user.uid)}catch(Me){const Oe=Me.code;Ce(Oe==="auth/email-already-in-use"?" Email already registered. Try logging in.":Oe==="auth/invalid-email"?" Invalid email address.":Oe==="auth/weak-password"?" Password too weak. Use at least 6 characters.":Oe==="auth/user-not-found"||Oe==="auth/wrong-password"?" Invalid email or password.":" Something went wrong. Try again.")}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-md w-full max-w-md space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-center text-gray-800 dark:text-white",children:De==="signup"?" Create Account":" Login to MoodMirror"}),Re&&jsxRuntimeExports.jsx("p",{className:"text-red-600 text-sm text-center",children:Re}),jsxRuntimeExports.jsxs("form",{onSubmit:Ve,className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email",className:"w-full border px-3 py-2 rounded-lg",value:e,onChange:Be=>t(Be.target.value),required:!0}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password",className:"w-full border px-3 py-2 rounded-lg",value:Te,onChange:Be=>Ee(Be.target.value),required:!0}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition",children:De==="signup"?"Create Account":"Login"})]}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm",children:[De==="signup"?"Already have an account?":"New here?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>$e(De==="signup"?"login":"signup"),className:"text-indigo-600 hover:underline",children:De==="signup"?"Login":"Sign Up"})]})]})})};function MoodMirror(){const[n,e]=reactExports.useState([]),[t,Te]=reactExports.useState(null),[Ee,Re]=reactExports.useState([]),[Ce,De]=reactExports.useState(null),$e=reactExports.useRef(null);reactExports.useEffect(()=>{$e.current?.scrollIntoView({behavior:"smooth"})},[n]),reactExports.useEffect(()=>{const He=onAuthStateChanged(auth,Ge=>{Ge&&(Te(Ge.uid),Me(Ge.uid))});return()=>He()},[]);const Ve=async He=>{if(!He.trim())return;const Ge={role:"user",text:He},Ke={role:"ai",text:"__typing__"},Xe=[...n,Ge,Ke];e(Xe);try{const un=(await axios.post("https://edgex-backend.onrender.com/groq",{model:"llama3-8b-8192",messages:[{role:"system",content:"You are MoodMirror by Mindmorph, a friendly Gen Z AI big sibling who reads chats and gives brutally honest but warm analysis of relationships: flirt, rizz, friendzone, manipulation, or overthinking. End with real advice."},{role:"user",content:He}],temperature:.75})).data.choices[0].message.content,fn=[...Xe.slice(0,-1),{role:"ai",text:un}];e(fn),await Be(fn)}catch(Je){console.error("Groq error:",Je),y$1.error("Failed to get response. Please try again."),e(un=>[...un.slice(0,-1),{role:"ai",text:" Something went wrong. Try again!"}])}},Be=async He=>{if(t)if(Ce){const Ge=doc(db,"moodmirror",t,"history",Ce);await updateDoc(Ge,{messages:He})}else{const Ge=He.find(Xe=>Xe.role==="user")?.text||"Untitled",Ke=await addDoc(collection(db,"moodmirror",t,"history"),{title:Ge.slice(0,25),messages:He,createdAt:serverTimestamp()});De(Ke.id)}},Me=He=>{const Ge=query(collection(db,"moodmirror",He,"history"),orderBy("createdAt","desc"));onSnapshot(Ge,Ke=>{const Xe=Ke.docs.map(Je=>({id:Je.id,...Je.data()}));Re(Xe)})},Oe=async(He,Ge)=>{const Ke=doc(db,"moodmirror",t,"history",He);await updateDoc(Ke,{title:Ge})},Ue=He=>{const Ge=Ee.find(Ke=>Ke.id===He);Ge&&(e(Ge.messages||[]),De(He))},ze=()=>{const He=new E;let Ge=10;n.forEach(({role:Ke,text:Xe})=>{const Je=Ke==="user"?" You:":" MoodMirror:";He.splitTextToSize(`${Je} ${Xe}`,180).forEach(fn=>{Ge>280&&(He.addPage(),Ge=10),He.text(fn,10,Ge),Ge+=8}),Ge+=4}),He.save("MoodMirror_Chat.pdf")};return t?jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-50 dark:from-[#0f1b2e] dark:via-[#1c1a40] dark:to-[#1a0e2e] font-[Poppins] text-gray-900 dark:text-gray-100 transition-all duration-500 ease-in-out",children:[jsxRuntimeExports.jsxs("div",{className:"w-full md:w-64 bg-white/40 dark:bg-white/5 backdrop-blur-md border-r border-white/20 p-4 space-y-4 shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-extrabold bg-gradient-to-r from-indigo-600 via-purple-500 to-blue-400 bg-clip-text text-transparent dark:from-indigo-300 dark:via-purple-300 dark:to-blue-200",children:"MoodMirror"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>{e([]),De(null)},title:"New Chat",className:"text-indigo-600 dark:text-purple-300 hover:text-purple-700 dark:hover:text-blue-200 transition",children:jsxRuntimeExports.jsx(CirclePlus,{size:20})})})]}),Ee.map(He=>jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-md cursor-pointer hover:bg-white/40 dark:hover:bg-white/10 transition ${Ce===He.id?"bg-white/60 dark:bg-white/10":""}`,onClick:()=>Ue(He.id),children:[jsxRuntimeExports.jsx("input",{className:"bg-transparent font-medium text-sm w-full dark:text-white focus:outline-none",defaultValue:He.title,onBlur:Ge=>Oe(He.id,Ge.target.value)}),He.createdAt?.seconds&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[" ",new Date(He.createdAt.seconds*1e3).toLocaleString()]})]},He.id))]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 md:p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-extrabold text-center mb-6 bg-gradient-to-r from-indigo-600 via-purple-500 to-blue-400 bg-clip-text text-transparent dark:from-indigo-300 dark:via-purple-300 dark:to-blue-200",children:"MoodMirror: Decode the Vibe"}),jsxRuntimeExports.jsxs("div",{className:"h-[65vh] overflow-y-auto space-y-4 p-4 bg-white/60 dark:bg-white/5 rounded-2xl border border-white/20 shadow-inner backdrop-blur-md",children:[n.map((He,Ge)=>jsxRuntimeExports.jsx(ChatBubble,{role:He.role,text:He.text},Ge)),jsxRuntimeExports.jsx("div",{ref:$e})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(ChatInput$1,{onSend:Ve})}),jsxRuntimeExports.jsxs("button",{onClick:ze,className:"mt-6 flex items-center gap-2 bg-gradient-to-r from-indigo-600 via-purple-500 to-blue-400 text-white px-4 py-2 rounded-full shadow-xl hover:scale-105 hover:shadow-2xl transition-all duration-300",children:[" Export Chat",jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:"PDF"})]})]})]}):jsxRuntimeExports.jsx(LoginModal,{onLogin:He=>Te(He)})}function ok$1(){}function unreachable(){}function stringify$1(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name$1(n,e){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(n)}const re=/[ \t\n\f\r]/g;function whitespace(n){return typeof n=="object"?n.type==="text"?empty$1(n.value):!1:empty$1(n)}function empty$1(n){return n.replace(re,"")===""}class Schema{constructor(e,t,Te){this.normal=t,this.property=e,Te&&(this.space=Te)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(n,e){const t={},Te={};for(const Ee of n)Object.assign(t,Ee.property),Object.assign(Te,Ee.normal);return new Schema(t,Te,e)}function normalize$1(n){return n.toLowerCase()}class Info{constructor(e,t){this.attribute=t,this.property=e}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,t,Te,Ee){let Re=-1;if(super(e,t),mark(this,"space",Ee),typeof Te=="number")for(;++Re<checks.length;){const Ce=checks[Re];mark(this,checks[Re],(Te&types[Ce])===types[Ce])}}}DefinedInfo.prototype.defined=!0;function mark(n,e,t){t&&(n[e]=t)}function create(n){const e={},t={};for(const[Te,Ee]of Object.entries(n.properties)){const Re=new DefinedInfo(Te,n.transform(n.attributes||{},Te),Ee,n.space);n.mustUseProperty&&n.mustUseProperty.includes(Te)&&(Re.mustUseProperty=!0),e[Te]=Re,t[normalize$1(Te)]=Te,t[normalize$1(Re.attribute)]=Te}return new Schema(e,t,n.space)}const aria=create({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function caseSensitiveTransform(n,e){return e in n?n[e]:e}function caseInsensitiveTransform(n,e){return caseSensitiveTransform(n,e.toLowerCase())}const html$2=create({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:overloadedBoolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),xmlns=create({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(n,e){const t=normalize$1(e);let Te=e,Ee=Info;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const Re=e.slice(5).replace(dash,camelcase);Te="data"+Re.charAt(0).toUpperCase()+Re.slice(1)}else{const Re=e.slice(4);if(!dash.test(Re)){let Ce=Re.replace(cap$1,kebab);Ce.charAt(0)!=="-"&&(Ce="-"+Ce),e="data"+Ce}}Ee=DefinedInfo}return new Ee(Te,e)}function kebab(n){return"-"+n.toLowerCase()}function camelcase(n){return n.charAt(1).toUpperCase()}const html$1=merge([aria,html$2,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(n){return n.join(" ").trim()}var cjs$1={},inlineStyleParser,hasRequiredInlineStyleParser;function requireInlineStyleParser(){if(hasRequiredInlineStyleParser)return inlineStyleParser;hasRequiredInlineStyleParser=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,Te=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ee=/^:\s*/,Re=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Ce=/^[;\s]*/,De=/^\s+|\s+$/g,$e=`
`,Ve="/",Be="*",Me="",Oe="comment",Ue="declaration";inlineStyleParser=function(He,Ge){if(typeof He!="string")throw new TypeError("First argument must be a string");if(!He)return[];Ge=Ge||{};var Ke=1,Xe=1;function Je(En){var In=En.match(e);In&&(Ke+=In.length);var Nn=En.lastIndexOf($e);Xe=~Nn?En.length-Nn:Xe+En.length}function un(){var En={line:Ke,column:Xe};return function(In){return In.position=new fn(En),mn(),In}}function fn(En){this.start=En,this.end={line:Ke,column:Xe},this.source=Ge.source}fn.prototype.content=He;function yn(En){var In=new Error(Ge.source+":"+Ke+":"+Xe+": "+En);if(In.reason=En,In.filename=Ge.source,In.line=Ke,In.column=Xe,In.source=He,!Ge.silent)throw In}function gn(En){var In=En.exec(He);if(In){var Nn=In[0];return Je(Nn),He=He.slice(Nn.length),In}}function mn(){gn(t)}function dn(En){var In;for(En=En||[];In=vn();)In!==!1&&En.push(In);return En}function vn(){var En=un();if(!(Ve!=He.charAt(0)||Be!=He.charAt(1))){for(var In=2;Me!=He.charAt(In)&&(Be!=He.charAt(In)||Ve!=He.charAt(In+1));)++In;if(In+=2,Me===He.charAt(In-1))return yn("End of comment missing");var Nn=He.slice(2,In-2);return Xe+=2,Je(Nn),He=He.slice(In),Xe+=2,En({type:Oe,comment:Nn})}}function bn(){var En=un(),In=gn(Te);if(In){if(vn(),!gn(Ee))return yn("property missing ':'");var Nn=gn(Re),On=En({type:Ue,property:ze(In[0].replace(n,Me)),value:Nn?ze(Nn[0].replace(n,Me)):Me});return gn(Ce),On}}function Tn(){var En=[];dn(En);for(var In;In=bn();)In!==!1&&(En.push(In),dn(En));return En}return mn(),Tn()};function ze(He){return He?He.replace(De,Me):Me}return inlineStyleParser}var hasRequiredCjs$1;function requireCjs$1(){if(hasRequiredCjs$1)return cjs$1;hasRequiredCjs$1=1;var n=cjs$1&&cjs$1.__importDefault||function(Te){return Te&&Te.__esModule?Te:{default:Te}};Object.defineProperty(cjs$1,"__esModule",{value:!0}),cjs$1.default=t;var e=n(requireInlineStyleParser());function t(Te,Ee){var Re=null;if(!Te||typeof Te!="string")return Re;var Ce=(0,e.default)(Te),De=typeof Ee=="function";return Ce.forEach(function($e){if($e.type==="declaration"){var Ve=$e.property,Be=$e.value;De?Ee(Ve,Be,$e):Be&&(Re=Re||{},Re[Ve]=Be)}}),Re}return cjs$1}var utilities={},hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,Te=/^-(webkit|moz|ms|o|khtml)-/,Ee=/^-(ms)-/,Re=function(Ve){return!Ve||t.test(Ve)||n.test(Ve)},Ce=function(Ve,Be){return Be.toUpperCase()},De=function(Ve,Be){return"".concat(Be,"-")},$e=function(Ve,Be){return Be===void 0&&(Be={}),Re(Ve)?Ve:(Ve=Ve.toLowerCase(),Be.reactCompat?Ve=Ve.replace(Ee,De):Ve=Ve.replace(Te,De),Ve.replace(e,Ce))};return utilities.camelCase=$e,utilities}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var n=cjs&&cjs.__importDefault||function(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}},e=n(requireCjs$1()),t=requireUtilities();function Te(Ee,Re){var Ce={};return!Ee||typeof Ee!="string"||(0,e.default)(Ee,function(De,$e){De&&$e&&(Ce[(0,t.camelCase)(De,Re)]=$e)}),Ce}return Te.default=Te,cjs=Te,cjs}var cjsExports=requireCjs();const styleToJs=getDefaultExportFromCjs(cjsExports),pointEnd=point$2("end"),pointStart=point$2("start");function point$2(n){return e;function e(t){const Te=t&&t.position&&t.position[n]||{};if(typeof Te.line=="number"&&Te.line>0&&typeof Te.column=="number"&&Te.column>0)return{line:Te.line,column:Te.column,offset:typeof Te.offset=="number"&&Te.offset>-1?Te.offset:void 0}}}function position$1(n){const e=pointStart(n),t=pointEnd(n);if(e&&t)return{start:e,end:t}}function stringifyPosition(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?position(n.position):"start"in n||"end"in n?position(n):"line"in n||"column"in n?point$1(n):""}function point$1(n){return index(n&&n.line)+":"+index(n&&n.column)}function position(n){return point$1(n&&n.start)+"-"+point$1(n&&n.end)}function index(n){return n&&typeof n=="number"?n:1}class VFileMessage extends Error{constructor(e,t,Te){super(),typeof t=="string"&&(Te=t,t=void 0);let Ee="",Re={},Ce=!1;if(t&&("line"in t&&"column"in t?Re={place:t}:"start"in t&&"end"in t?Re={place:t}:"type"in t?Re={ancestors:[t],place:t.position}:Re={...t}),typeof e=="string"?Ee=e:!Re.cause&&e&&(Ce=!0,Ee=e.message,Re.cause=e),!Re.ruleId&&!Re.source&&typeof Te=="string"){const $e=Te.indexOf(":");$e===-1?Re.ruleId=Te:(Re.source=Te.slice(0,$e),Re.ruleId=Te.slice($e+1))}if(!Re.place&&Re.ancestors&&Re.ancestors){const $e=Re.ancestors[Re.ancestors.length-1];$e&&(Re.place=$e.position)}const De=Re.place&&"start"in Re.place?Re.place.start:Re.place;this.ancestors=Re.ancestors||void 0,this.cause=Re.cause||void 0,this.column=De?De.column:void 0,this.fatal=void 0,this.file="",this.message=Ee,this.line=De?De.line:void 0,this.name=stringifyPosition(Re.place)||"1:1",this.place=Re.place||void 0,this.reason=this.message,this.ruleId=Re.ruleId||void 0,this.source=Re.source||void 0,this.stack=Ce&&Re.cause&&typeof Re.cause.stack=="string"?Re.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let Te;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");Te=developmentCreate(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");Te=productionCreate(t,e.jsx,e.jsxs)}const Ee={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:Te,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$1,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},Re=one$1(Ee,n,void 0);return Re&&typeof Re!="string"?Re:Ee.create(n,Ee.Fragment,{children:Re||void 0},void 0)}function one$1(n,e,t){if(e.type==="element")return element$1(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(n,e,t);if(e.type==="mdxjsEsm")return mdxEsm(n,e);if(e.type==="root")return root$1(n,e,t);if(e.type==="text")return text$3(n,e)}function element$1(n,e,t){const Te=n.schema;let Ee=Te;e.tagName.toLowerCase()==="svg"&&Te.space==="html"&&(Ee=svg,n.schema=Ee),n.ancestors.push(e);const Re=findComponentFromName(n,e.tagName,!1),Ce=createElementProps(n,e);let De=createChildren(n,e);return tableElements.has(e.tagName)&&(De=De.filter(function($e){return typeof $e=="string"?!whitespace($e):!0})),addNode(n,Ce,Re,e),addChildren(Ce,De),n.ancestors.pop(),n.schema=Te,n.create(e,Re,Ce,t)}function mdxExpression(n,e){if(e.data&&e.data.estree&&n.evaluater){const Te=e.data.estree.body[0];return Te.type,n.evaluater.evaluateExpression(Te.expression)}crashEstree(n,e.position)}function mdxEsm(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);crashEstree(n,e.position)}function mdxJsxElement(n,e,t){const Te=n.schema;let Ee=Te;e.name==="svg"&&Te.space==="html"&&(Ee=svg,n.schema=Ee),n.ancestors.push(e);const Re=e.name===null?n.Fragment:findComponentFromName(n,e.name,!0),Ce=createJsxElementProps(n,e),De=createChildren(n,e);return addNode(n,Ce,Re,e),addChildren(Ce,De),n.ancestors.pop(),n.schema=Te,n.create(e,Re,Ce,t)}function root$1(n,e,t){const Te={};return addChildren(Te,createChildren(n,e)),n.create(e,n.Fragment,Te,t)}function text$3(n,e){return e.value}function addNode(n,e,t,Te){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=Te)}function addChildren(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function productionCreate(n,e,t){return Te;function Te(Ee,Re,Ce,De){const Ve=Array.isArray(Ce.children)?t:e;return De?Ve(Re,Ce,De):Ve(Re,Ce)}}function developmentCreate(n,e){return t;function t(Te,Ee,Re,Ce){const De=Array.isArray(Re.children),$e=pointStart(Te);return e(Ee,Re,Ce,De,{columnNumber:$e?$e.column-1:void 0,fileName:n,lineNumber:$e?$e.line:void 0},void 0)}}function createElementProps(n,e){const t={};let Te,Ee;for(Ee in e.properties)if(Ee!=="children"&&own$3.call(e.properties,Ee)){const Re=createProperty(n,Ee,e.properties[Ee]);if(Re){const[Ce,De]=Re;n.tableCellAlignToStyle&&Ce==="align"&&typeof De=="string"&&tableCellElement.has(e.tagName)?Te=De:t[Ce]=De}}if(Te){const Re=t.style||(t.style={});Re[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=Te}return t}function createJsxElementProps(n,e){const t={};for(const Te of e.attributes)if(Te.type==="mdxJsxExpressionAttribute")if(Te.data&&Te.data.estree&&n.evaluater){const Re=Te.data.estree.body[0];Re.type;const Ce=Re.expression;Ce.type;const De=Ce.properties[0];De.type,Object.assign(t,n.evaluater.evaluateExpression(De.argument))}else crashEstree(n,e.position);else{const Ee=Te.name;let Re;if(Te.value&&typeof Te.value=="object")if(Te.value.data&&Te.value.data.estree&&n.evaluater){const De=Te.value.data.estree.body[0];De.type,Re=n.evaluater.evaluateExpression(De.expression)}else crashEstree(n,e.position);else Re=Te.value===null?!0:Te.value;t[Ee]=Re}return t}function createChildren(n,e){const t=[];let Te=-1;const Ee=n.passKeys?new Map:emptyMap;for(;++Te<e.children.length;){const Re=e.children[Te];let Ce;if(n.passKeys){const $e=Re.type==="element"?Re.tagName:Re.type==="mdxJsxFlowElement"||Re.type==="mdxJsxTextElement"?Re.name:void 0;if($e){const Ve=Ee.get($e)||0;Ce=$e+"-"+Ve,Ee.set($e,Ve+1)}}const De=one$1(n,Re,Ce);De!==void 0&&t.push(De)}return t}function createProperty(n,e,t){const Te=find(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=Te.commaSeparated?stringify$1(t):stringify(t)),Te.property==="style"){let Ee=typeof t=="object"?t:parseStyle(n,String(t));return n.stylePropertyNameCase==="css"&&(Ee=transformStylesToCssCasing(Ee)),["style",Ee]}return[n.elementAttributeNameCase==="react"&&Te.space?hastToReact[Te.property]||Te.property:Te.attribute,t]}}function parseStyle(n,e){try{return styleToJs(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const Te=t,Ee=new VFileMessage("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:Te,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw Ee.file=n.filePath||void 0,Ee.url=docs+"#cannot-parse-style-attribute",Ee}}function findComponentFromName(n,e,t){let Te;if(!t)Te={type:"Literal",value:e};else if(e.includes(".")){const Ee=e.split(".");let Re=-1,Ce;for(;++Re<Ee.length;){const De=name$1(Ee[Re])?{type:"Identifier",name:Ee[Re]}:{type:"Literal",value:Ee[Re]};Ce=Ce?{type:"MemberExpression",object:Ce,property:De,computed:!!(Re&&De.type==="Literal"),optional:!1}:De}Te=Ce}else Te=name$1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(Te.type==="Literal"){const Ee=Te.value;return own$3.call(n.components,Ee)?n.components[Ee]:Ee}if(n.evaluater)return n.evaluater.evaluateExpression(Te);crashEstree(n)}function crashEstree(n,e){const t=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",t}function transformStylesToCssCasing(n){const e={};let t;for(t in n)own$3.call(n,t)&&(e[transformStyleToCssCasing(t)]=n[t]);return e}function transformStyleToCssCasing(n){let e=n.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toDash(n){return"-"+n.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$1(n,e){const t=emptyOptions$1,Te=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,Ee=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return one(n,Te,Ee)}function one(n,e,t){if(node(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return all(n.children,e,t)}return Array.isArray(n)?all(n,e,t):""}function all(n,e,t){const Te=[];let Ee=-1;for(;++Ee<n.length;)Te[Ee]=one(n[Ee],e,t);return Te.join("")}function node(n){return!!(n&&typeof n=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(n){const e="&"+n+";";element.innerHTML=e;const t=element.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function splice(n,e,t,Te){const Ee=n.length;let Re=0,Ce;if(e<0?e=-e>Ee?0:Ee+e:e=e>Ee?Ee:e,t=t>0?t:0,Te.length<1e4)Ce=Array.from(Te),Ce.unshift(e,t),n.splice(...Ce);else for(t&&n.splice(e,t);Re<Te.length;)Ce=Te.slice(Re,Re+1e4),Ce.unshift(e,0),n.splice(...Ce),Re+=1e4,e+=1e4}function push(n,e){return n.length>0?(splice(n,n.length,0,e),n):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(n){const e={};let t=-1;for(;++t<n.length;)syntaxExtension(e,n[t]);return e}function syntaxExtension(n,e){let t;for(t in e){const Ee=(hasOwnProperty.call(n,t)?n[t]:void 0)||(n[t]={}),Re=e[t];let Ce;if(Re)for(Ce in Re){hasOwnProperty.call(Ee,Ce)||(Ee[Ce]=[]);const De=Re[Ce];constructs(Ee[Ce],Array.isArray(De)?De:De?[De]:[])}}}function constructs(n,e){let t=-1;const Te=[];for(;++t<e.length;)(e[t].add==="after"?n:Te).push(e[t]);splice(n,0,0,Te)}function decodeNumericCharacterReference(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function normalizeIdentifier(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(n){return n!==null&&(n<32||n===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(n){return n!==null&&n<-2}function markdownLineEndingOrSpace(n){return n!==null&&(n<0||n===32)}function markdownSpace(n){return n===-2||n===-1||n===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function normalizeUri(n){const e=[];let t=-1,Te=0,Ee=0;for(;++t<n.length;){const Re=n.charCodeAt(t);let Ce="";if(Re===37&&asciiAlphanumeric(n.charCodeAt(t+1))&&asciiAlphanumeric(n.charCodeAt(t+2)))Ee=2;else if(Re<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(Re))||(Ce=String.fromCharCode(Re));else if(Re>55295&&Re<57344){const De=n.charCodeAt(t+1);Re<56320&&De>56319&&De<57344?(Ce=String.fromCharCode(Re,De),Ee=1):Ce=""}else Ce=String.fromCharCode(Re);Ce&&(e.push(n.slice(Te,t),encodeURIComponent(Ce)),Te=t+Ee+1,Ce=""),Ee&&(t+=Ee,Ee=0)}return e.join("")+n.slice(Te)}function factorySpace(n,e,t,Te){const Ee=Te?Te-1:Number.POSITIVE_INFINITY;let Re=0;return Ce;function Ce($e){return markdownSpace($e)?(n.enter(t),De($e)):e($e)}function De($e){return markdownSpace($e)&&Re++<Ee?(n.consume($e),De):(n.exit(t),e($e))}}const content$1={tokenize:initializeContent};function initializeContent(n){const e=n.attempt(this.parser.constructs.contentInitial,Te,Ee);let t;return e;function Te(De){if(De===null){n.consume(De);return}return n.enter("lineEnding"),n.consume(De),n.exit("lineEnding"),factorySpace(n,e,"linePrefix")}function Ee(De){return n.enter("paragraph"),Re(De)}function Re(De){const $e=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=$e),t=$e,Ce(De)}function Ce(De){if(De===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(De);return}return markdownLineEnding(De)?(n.consume(De),n.exit("chunkText"),Re):(n.consume(De),Ce)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(n){const e=this,t=[];let Te=0,Ee,Re,Ce;return De;function De(Je){if(Te<t.length){const un=t[Te];return e.containerState=un[1],n.attempt(un[0].continuation,$e,Ve)(Je)}return Ve(Je)}function $e(Je){if(Te++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,Ee&&Xe();const un=e.events.length;let fn=un,yn;for(;fn--;)if(e.events[fn][0]==="exit"&&e.events[fn][1].type==="chunkFlow"){yn=e.events[fn][1].end;break}Ke(Te);let gn=un;for(;gn<e.events.length;)e.events[gn][1].end={...yn},gn++;return splice(e.events,fn+1,0,e.events.slice(un)),e.events.length=gn,Ve(Je)}return De(Je)}function Ve(Je){if(Te===t.length){if(!Ee)return Oe(Je);if(Ee.currentConstruct&&Ee.currentConstruct.concrete)return ze(Je);e.interrupt=!!(Ee.currentConstruct&&!Ee._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(containerConstruct,Be,Me)(Je)}function Be(Je){return Ee&&Xe(),Ke(Te),Oe(Je)}function Me(Je){return e.parser.lazy[e.now().line]=Te!==t.length,Ce=e.now().offset,ze(Je)}function Oe(Je){return e.containerState={},n.attempt(containerConstruct,Ue,ze)(Je)}function Ue(Je){return Te++,t.push([e.currentConstruct,e.containerState]),Oe(Je)}function ze(Je){if(Je===null){Ee&&Xe(),Ke(0),n.consume(Je);return}return Ee=Ee||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:Ee,contentType:"flow",previous:Re}),He(Je)}function He(Je){if(Je===null){Ge(n.exit("chunkFlow"),!0),Ke(0),n.consume(Je);return}return markdownLineEnding(Je)?(n.consume(Je),Ge(n.exit("chunkFlow")),Te=0,e.interrupt=void 0,De):(n.consume(Je),He)}function Ge(Je,un){const fn=e.sliceStream(Je);if(un&&fn.push(null),Je.previous=Re,Re&&(Re.next=Je),Re=Je,Ee.defineSkip(Je.start),Ee.write(fn),e.parser.lazy[Je.start.line]){let yn=Ee.events.length;for(;yn--;)if(Ee.events[yn][1].start.offset<Ce&&(!Ee.events[yn][1].end||Ee.events[yn][1].end.offset>Ce))return;const gn=e.events.length;let mn=gn,dn,vn;for(;mn--;)if(e.events[mn][0]==="exit"&&e.events[mn][1].type==="chunkFlow"){if(dn){vn=e.events[mn][1].end;break}dn=!0}for(Ke(Te),yn=gn;yn<e.events.length;)e.events[yn][1].end={...vn},yn++;splice(e.events,mn+1,0,e.events.slice(gn)),e.events.length=yn}}function Ke(Je){let un=t.length;for(;un-- >Je;){const fn=t[un];e.containerState=fn[1],fn[0].exit.call(e,n)}t.length=Je}function Xe(){Ee.write([null]),Re=void 0,Ee=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(n,e,t){return factorySpace(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(n){if(n===null||markdownLineEndingOrSpace(n)||unicodeWhitespace(n))return 1;if(unicodePunctuation(n))return 2}function resolveAll(n,e,t){const Te=[];let Ee=-1;for(;++Ee<n.length;){const Re=n[Ee].resolveAll;Re&&!Te.includes(Re)&&(e=Re(e,t),Te.push(Re))}return e}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(n,e){let t=-1,Te,Ee,Re,Ce,De,$e,Ve,Be;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(Te=t;Te--;)if(n[Te][0]==="exit"&&n[Te][1].type==="attentionSequence"&&n[Te][1]._open&&e.sliceSerialize(n[Te][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[Te][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[Te][1].end.offset-n[Te][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;$e=n[Te][1].end.offset-n[Te][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const Me={...n[Te][1].end},Oe={...n[t][1].start};movePoint(Me,-$e),movePoint(Oe,$e),Ce={type:$e>1?"strongSequence":"emphasisSequence",start:Me,end:{...n[Te][1].end}},De={type:$e>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:Oe},Re={type:$e>1?"strongText":"emphasisText",start:{...n[Te][1].end},end:{...n[t][1].start}},Ee={type:$e>1?"strong":"emphasis",start:{...Ce.start},end:{...De.end}},n[Te][1].end={...Ce.start},n[t][1].start={...De.end},Ve=[],n[Te][1].end.offset-n[Te][1].start.offset&&(Ve=push(Ve,[["enter",n[Te][1],e],["exit",n[Te][1],e]])),Ve=push(Ve,[["enter",Ee,e],["enter",Ce,e],["exit",Ce,e],["enter",Re,e]]),Ve=push(Ve,resolveAll(e.parser.constructs.insideSpan.null,n.slice(Te+1,t),e)),Ve=push(Ve,[["exit",Re,e],["enter",De,e],["exit",De,e],["exit",Ee,e]]),n[t][1].end.offset-n[t][1].start.offset?(Be=2,Ve=push(Ve,[["enter",n[t][1],e],["exit",n[t][1],e]])):Be=0,splice(n,Te-1,t-Te+3,Ve),t=Te+Ve.length-Be-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function tokenizeAttention(n,e){const t=this.parser.constructs.attentionMarkers.null,Te=this.previous,Ee=classifyCharacter(Te);let Re;return Ce;function Ce($e){return Re=$e,n.enter("attentionSequence"),De($e)}function De($e){if($e===Re)return n.consume($e),De;const Ve=n.exit("attentionSequence"),Be=classifyCharacter($e),Me=!Be||Be===2&&Ee||t.includes($e),Oe=!Ee||Ee===2&&Be||t.includes(Te);return Ve._open=!!(Re===42?Me:Me&&(Ee||!Oe)),Ve._close=!!(Re===42?Oe:Oe&&(Be||!Me)),e($e)}}function movePoint(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(n,e,t){let Te=0;return Ee;function Ee(Ue){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(Ue),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),Re}function Re(Ue){return asciiAlpha(Ue)?(n.consume(Ue),Ce):Ue===64?t(Ue):Ve(Ue)}function Ce(Ue){return Ue===43||Ue===45||Ue===46||asciiAlphanumeric(Ue)?(Te=1,De(Ue)):Ve(Ue)}function De(Ue){return Ue===58?(n.consume(Ue),Te=0,$e):(Ue===43||Ue===45||Ue===46||asciiAlphanumeric(Ue))&&Te++<32?(n.consume(Ue),De):(Te=0,Ve(Ue))}function $e(Ue){return Ue===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(Ue),n.exit("autolinkMarker"),n.exit("autolink"),e):Ue===null||Ue===32||Ue===60||asciiControl(Ue)?t(Ue):(n.consume(Ue),$e)}function Ve(Ue){return Ue===64?(n.consume(Ue),Be):asciiAtext(Ue)?(n.consume(Ue),Ve):t(Ue)}function Be(Ue){return asciiAlphanumeric(Ue)?Me(Ue):t(Ue)}function Me(Ue){return Ue===46?(n.consume(Ue),Te=0,Be):Ue===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(Ue),n.exit("autolinkMarker"),n.exit("autolink"),e):Oe(Ue)}function Oe(Ue){if((Ue===45||asciiAlphanumeric(Ue))&&Te++<63){const ze=Ue===45?Oe:Me;return n.consume(Ue),ze}return t(Ue)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(n,e,t){return Te;function Te(Re){return markdownSpace(Re)?factorySpace(n,Ee,"linePrefix")(Re):Ee(Re)}function Ee(Re){return Re===null||markdownLineEnding(Re)?e(Re):t(Re)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(n,e,t){const Te=this;return Ee;function Ee(Ce){if(Ce===62){const De=Te.containerState;return De.open||(n.enter("blockQuote",{_container:!0}),De.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(Ce),n.exit("blockQuoteMarker"),Re}return t(Ce)}function Re(Ce){return markdownSpace(Ce)?(n.enter("blockQuotePrefixWhitespace"),n.consume(Ce),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(Ce))}}function tokenizeBlockQuoteContinuation(n,e,t){const Te=this;return Ee;function Ee(Ce){return markdownSpace(Ce)?factorySpace(n,Re,"linePrefix",Te.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ce):Re(Ce)}function Re(Ce){return n.attempt(blockQuote,e,t)(Ce)}}function exit(n){n.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(n,e,t){return Te;function Te(Re){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(Re),n.exit("escapeMarker"),Ee}function Ee(Re){return asciiPunctuation(Re)?(n.enter("characterEscapeValue"),n.consume(Re),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(Re)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(n,e,t){const Te=this;let Ee=0,Re,Ce;return De;function De(Me){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(Me),n.exit("characterReferenceMarker"),$e}function $e(Me){return Me===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(Me),n.exit("characterReferenceMarkerNumeric"),Ve):(n.enter("characterReferenceValue"),Re=31,Ce=asciiAlphanumeric,Be(Me))}function Ve(Me){return Me===88||Me===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(Me),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),Re=6,Ce=asciiHexDigit,Be):(n.enter("characterReferenceValue"),Re=7,Ce=asciiDigit,Be(Me))}function Be(Me){if(Me===59&&Ee){const Oe=n.exit("characterReferenceValue");return Ce===asciiAlphanumeric&&!decodeNamedCharacterReference(Te.sliceSerialize(Oe))?t(Me):(n.enter("characterReferenceMarker"),n.consume(Me),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return Ce(Me)&&Ee++<Re?(n.consume(Me),Be):t(Me)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(n,e,t){const Te=this,Ee={partial:!0,tokenize:fn};let Re=0,Ce=0,De;return $e;function $e(yn){return Ve(yn)}function Ve(yn){const gn=Te.events[Te.events.length-1];return Re=gn&&gn[1].type==="linePrefix"?gn[2].sliceSerialize(gn[1],!0).length:0,De=yn,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),Be(yn)}function Be(yn){return yn===De?(Ce++,n.consume(yn),Be):Ce<3?t(yn):(n.exit("codeFencedFenceSequence"),markdownSpace(yn)?factorySpace(n,Me,"whitespace")(yn):Me(yn))}function Me(yn){return yn===null||markdownLineEnding(yn)?(n.exit("codeFencedFence"),Te.interrupt?e(yn):n.check(nonLazyContinuation,He,un)(yn)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),Oe(yn))}function Oe(yn){return yn===null||markdownLineEnding(yn)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Me(yn)):markdownSpace(yn)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),factorySpace(n,Ue,"whitespace")(yn)):yn===96&&yn===De?t(yn):(n.consume(yn),Oe)}function Ue(yn){return yn===null||markdownLineEnding(yn)?Me(yn):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),ze(yn))}function ze(yn){return yn===null||markdownLineEnding(yn)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),Me(yn)):yn===96&&yn===De?t(yn):(n.consume(yn),ze)}function He(yn){return n.attempt(Ee,un,Ge)(yn)}function Ge(yn){return n.enter("lineEnding"),n.consume(yn),n.exit("lineEnding"),Ke}function Ke(yn){return Re>0&&markdownSpace(yn)?factorySpace(n,Xe,"linePrefix",Re+1)(yn):Xe(yn)}function Xe(yn){return yn===null||markdownLineEnding(yn)?n.check(nonLazyContinuation,He,un)(yn):(n.enter("codeFlowValue"),Je(yn))}function Je(yn){return yn===null||markdownLineEnding(yn)?(n.exit("codeFlowValue"),Xe(yn)):(n.consume(yn),Je)}function un(yn){return n.exit("codeFenced"),e(yn)}function fn(yn,gn,mn){let dn=0;return vn;function vn(Nn){return yn.enter("lineEnding"),yn.consume(Nn),yn.exit("lineEnding"),bn}function bn(Nn){return yn.enter("codeFencedFence"),markdownSpace(Nn)?factorySpace(yn,Tn,"linePrefix",Te.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Nn):Tn(Nn)}function Tn(Nn){return Nn===De?(yn.enter("codeFencedFenceSequence"),En(Nn)):mn(Nn)}function En(Nn){return Nn===De?(dn++,yn.consume(Nn),En):dn>=Ce?(yn.exit("codeFencedFenceSequence"),markdownSpace(Nn)?factorySpace(yn,In,"whitespace")(Nn):In(Nn)):mn(Nn)}function In(Nn){return Nn===null||markdownLineEnding(Nn)?(yn.exit("codeFencedFence"),gn(Nn)):mn(Nn)}}}function tokenizeNonLazyContinuation(n,e,t){const Te=this;return Ee;function Ee(Ce){return Ce===null?t(Ce):(n.enter("lineEnding"),n.consume(Ce),n.exit("lineEnding"),Re)}function Re(Ce){return Te.parser.lazy[Te.now().line]?t(Ce):e(Ce)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(n,e,t){const Te=this;return Ee;function Ee(Ve){return n.enter("codeIndented"),factorySpace(n,Re,"linePrefix",5)(Ve)}function Re(Ve){const Be=Te.events[Te.events.length-1];return Be&&Be[1].type==="linePrefix"&&Be[2].sliceSerialize(Be[1],!0).length>=4?Ce(Ve):t(Ve)}function Ce(Ve){return Ve===null?$e(Ve):markdownLineEnding(Ve)?n.attempt(furtherStart,Ce,$e)(Ve):(n.enter("codeFlowValue"),De(Ve))}function De(Ve){return Ve===null||markdownLineEnding(Ve)?(n.exit("codeFlowValue"),Ce(Ve)):(n.consume(Ve),De)}function $e(Ve){return n.exit("codeIndented"),e(Ve)}}function tokenizeFurtherStart(n,e,t){const Te=this;return Ee;function Ee(Ce){return Te.parser.lazy[Te.now().line]?t(Ce):markdownLineEnding(Ce)?(n.enter("lineEnding"),n.consume(Ce),n.exit("lineEnding"),Ee):factorySpace(n,Re,"linePrefix",5)(Ce)}function Re(Ce){const De=Te.events[Te.events.length-1];return De&&De[1].type==="linePrefix"&&De[2].sliceSerialize(De[1],!0).length>=4?e(Ce):markdownLineEnding(Ce)?Ee(Ce):t(Ce)}}const codeText={name:"codeText",previous,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(n){let e=n.length-4,t=3,Te,Ee;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(Te=t;++Te<e;)if(n[Te][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(Te=t-1,e++;++Te<=e;)Ee===void 0?Te!==e&&n[Te][1].type!=="lineEnding"&&(Ee=Te):(Te===e||n[Te][1].type==="lineEnding")&&(n[Ee][1].type="codeTextData",Te!==Ee+2&&(n[Ee][1].end=n[Te-1][1].end,n.splice(Ee+2,Te-Ee-2),e-=Te-Ee-2,Te=Ee+2),Ee=void 0);return n}function previous(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(n,e,t){let Te=0,Ee,Re;return Ce;function Ce(Me){return n.enter("codeText"),n.enter("codeTextSequence"),De(Me)}function De(Me){return Me===96?(n.consume(Me),Te++,De):(n.exit("codeTextSequence"),$e(Me))}function $e(Me){return Me===null?t(Me):Me===32?(n.enter("space"),n.consume(Me),n.exit("space"),$e):Me===96?(Re=n.enter("codeTextSequence"),Ee=0,Be(Me)):markdownLineEnding(Me)?(n.enter("lineEnding"),n.consume(Me),n.exit("lineEnding"),$e):(n.enter("codeTextData"),Ve(Me))}function Ve(Me){return Me===null||Me===32||Me===96||markdownLineEnding(Me)?(n.exit("codeTextData"),$e(Me)):(n.consume(Me),Ve)}function Be(Me){return Me===96?(n.consume(Me),Ee++,Be):Ee===Te?(n.exit("codeTextSequence"),n.exit("codeText"),e(Me)):(Re.type="codeTextData",Ve(Me))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const Te=t??Number.POSITIVE_INFINITY;return Te<this.left.length?this.left.slice(e,Te):e>this.left.length?this.right.slice(this.right.length-Te+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-Te+this.left.length).reverse())}splice(e,t,Te){const Ee=t||0;this.setCursor(Math.trunc(e));const Re=this.right.splice(this.right.length-Ee,Number.POSITIVE_INFINITY);return Te&&chunkedPush(this.left,Te),Re.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,t.reverse())}}}function chunkedPush(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function subtokenize(n){const e={};let t=-1,Te,Ee,Re,Ce,De,$e,Ve;const Be=new SpliceBuffer(n);for(;++t<Be.length;){for(;t in e;)t=e[t];if(Te=Be.get(t),t&&Te[1].type==="chunkFlow"&&Be.get(t-1)[1].type==="listItemPrefix"&&($e=Te[1]._tokenizer.events,Re=0,Re<$e.length&&$e[Re][1].type==="lineEndingBlank"&&(Re+=2),Re<$e.length&&$e[Re][1].type==="content"))for(;++Re<$e.length&&$e[Re][1].type!=="content";)$e[Re][1].type==="chunkText"&&($e[Re][1]._isInFirstContentOfListItem=!0,Re++);if(Te[0]==="enter")Te[1].contentType&&(Object.assign(e,subcontent(Be,t)),t=e[t],Ve=!0);else if(Te[1]._container){for(Re=t,Ee=void 0;Re--;)if(Ce=Be.get(Re),Ce[1].type==="lineEnding"||Ce[1].type==="lineEndingBlank")Ce[0]==="enter"&&(Ee&&(Be.get(Ee)[1].type="lineEndingBlank"),Ce[1].type="lineEnding",Ee=Re);else if(!(Ce[1].type==="linePrefix"||Ce[1].type==="listItemIndent"))break;Ee&&(Te[1].end={...Be.get(Ee)[1].start},De=Be.slice(Ee,t),De.unshift(Te),Be.splice(Ee,t-Ee+1,De))}}return splice(n,0,Number.POSITIVE_INFINITY,Be.slice(0)),!Ve}function subcontent(n,e){const t=n.get(e)[1],Te=n.get(e)[2];let Ee=e-1;const Re=[];let Ce=t._tokenizer;Ce||(Ce=Te.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(Ce._contentTypeTextTrailing=!0));const De=Ce.events,$e=[],Ve={};let Be,Me,Oe=-1,Ue=t,ze=0,He=0;const Ge=[He];for(;Ue;){for(;n.get(++Ee)[1]!==Ue;);Re.push(Ee),Ue._tokenizer||(Be=Te.sliceStream(Ue),Ue.next||Be.push(null),Me&&Ce.defineSkip(Ue.start),Ue._isInFirstContentOfListItem&&(Ce._gfmTasklistFirstContentOfListItem=!0),Ce.write(Be),Ue._isInFirstContentOfListItem&&(Ce._gfmTasklistFirstContentOfListItem=void 0)),Me=Ue,Ue=Ue.next}for(Ue=t;++Oe<De.length;)De[Oe][0]==="exit"&&De[Oe-1][0]==="enter"&&De[Oe][1].type===De[Oe-1][1].type&&De[Oe][1].start.line!==De[Oe][1].end.line&&(He=Oe+1,Ge.push(He),Ue._tokenizer=void 0,Ue.previous=void 0,Ue=Ue.next);for(Ce.events=[],Ue?(Ue._tokenizer=void 0,Ue.previous=void 0):Ge.pop(),Oe=Ge.length;Oe--;){const Ke=De.slice(Ge[Oe],Ge[Oe+1]),Xe=Re.pop();$e.push([Xe,Xe+Ke.length-1]),n.splice(Xe,2,Ke)}for($e.reverse(),Oe=-1;++Oe<$e.length;)Ve[ze+$e[Oe][0]]=ze+$e[Oe][1],ze+=$e[Oe][1]-$e[Oe][0]-1;return Ve}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(n){return subtokenize(n),n}function tokenizeContent(n,e){let t;return Te;function Te(De){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),Ee(De)}function Ee(De){return De===null?Re(De):markdownLineEnding(De)?n.check(continuationConstruct,Ce,Re)(De):(n.consume(De),Ee)}function Re(De){return n.exit("chunkContent"),n.exit("content"),e(De)}function Ce(De){return n.consume(De),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,Ee}}function tokenizeContinuation(n,e,t){const Te=this;return Ee;function Ee(Ce){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(Ce),n.exit("lineEnding"),factorySpace(n,Re,"linePrefix")}function Re(Ce){if(Ce===null||markdownLineEnding(Ce))return t(Ce);const De=Te.events[Te.events.length-1];return!Te.parser.constructs.disable.null.includes("codeIndented")&&De&&De[1].type==="linePrefix"&&De[2].sliceSerialize(De[1],!0).length>=4?e(Ce):n.interrupt(Te.parser.constructs.flow,t,e)(Ce)}}function factoryDestination(n,e,t,Te,Ee,Re,Ce,De,$e){const Ve=$e||Number.POSITIVE_INFINITY;let Be=0;return Me;function Me(Ke){return Ke===60?(n.enter(Te),n.enter(Ee),n.enter(Re),n.consume(Ke),n.exit(Re),Oe):Ke===null||Ke===32||Ke===41||asciiControl(Ke)?t(Ke):(n.enter(Te),n.enter(Ce),n.enter(De),n.enter("chunkString",{contentType:"string"}),He(Ke))}function Oe(Ke){return Ke===62?(n.enter(Re),n.consume(Ke),n.exit(Re),n.exit(Ee),n.exit(Te),e):(n.enter(De),n.enter("chunkString",{contentType:"string"}),Ue(Ke))}function Ue(Ke){return Ke===62?(n.exit("chunkString"),n.exit(De),Oe(Ke)):Ke===null||Ke===60||markdownLineEnding(Ke)?t(Ke):(n.consume(Ke),Ke===92?ze:Ue)}function ze(Ke){return Ke===60||Ke===62||Ke===92?(n.consume(Ke),Ue):Ue(Ke)}function He(Ke){return!Be&&(Ke===null||Ke===41||markdownLineEndingOrSpace(Ke))?(n.exit("chunkString"),n.exit(De),n.exit(Ce),n.exit(Te),e(Ke)):Be<Ve&&Ke===40?(n.consume(Ke),Be++,He):Ke===41?(n.consume(Ke),Be--,He):Ke===null||Ke===32||Ke===40||asciiControl(Ke)?t(Ke):(n.consume(Ke),Ke===92?Ge:He)}function Ge(Ke){return Ke===40||Ke===41||Ke===92?(n.consume(Ke),He):He(Ke)}}function factoryLabel(n,e,t,Te,Ee,Re){const Ce=this;let De=0,$e;return Ve;function Ve(Ue){return n.enter(Te),n.enter(Ee),n.consume(Ue),n.exit(Ee),n.enter(Re),Be}function Be(Ue){return De>999||Ue===null||Ue===91||Ue===93&&!$e||Ue===94&&!De&&"_hiddenFootnoteSupport"in Ce.parser.constructs?t(Ue):Ue===93?(n.exit(Re),n.enter(Ee),n.consume(Ue),n.exit(Ee),n.exit(Te),e):markdownLineEnding(Ue)?(n.enter("lineEnding"),n.consume(Ue),n.exit("lineEnding"),Be):(n.enter("chunkString",{contentType:"string"}),Me(Ue))}function Me(Ue){return Ue===null||Ue===91||Ue===93||markdownLineEnding(Ue)||De++>999?(n.exit("chunkString"),Be(Ue)):(n.consume(Ue),$e||($e=!markdownSpace(Ue)),Ue===92?Oe:Me)}function Oe(Ue){return Ue===91||Ue===92||Ue===93?(n.consume(Ue),De++,Me):Me(Ue)}}function factoryTitle(n,e,t,Te,Ee,Re){let Ce;return De;function De(Oe){return Oe===34||Oe===39||Oe===40?(n.enter(Te),n.enter(Ee),n.consume(Oe),n.exit(Ee),Ce=Oe===40?41:Oe,$e):t(Oe)}function $e(Oe){return Oe===Ce?(n.enter(Ee),n.consume(Oe),n.exit(Ee),n.exit(Te),e):(n.enter(Re),Ve(Oe))}function Ve(Oe){return Oe===Ce?(n.exit(Re),$e(Ce)):Oe===null?t(Oe):markdownLineEnding(Oe)?(n.enter("lineEnding"),n.consume(Oe),n.exit("lineEnding"),factorySpace(n,Ve,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),Be(Oe))}function Be(Oe){return Oe===Ce||Oe===null||markdownLineEnding(Oe)?(n.exit("chunkString"),Ve(Oe)):(n.consume(Oe),Oe===92?Me:Be)}function Me(Oe){return Oe===Ce||Oe===92?(n.consume(Oe),Be):Be(Oe)}}function factoryWhitespace(n,e){let t;return Te;function Te(Ee){return markdownLineEnding(Ee)?(n.enter("lineEnding"),n.consume(Ee),n.exit("lineEnding"),t=!0,Te):markdownSpace(Ee)?factorySpace(n,Te,t?"linePrefix":"lineSuffix")(Ee):e(Ee)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(n,e,t){const Te=this;let Ee;return Re;function Re(Ue){return n.enter("definition"),Ce(Ue)}function Ce(Ue){return factoryLabel.call(Te,n,De,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(Ue)}function De(Ue){return Ee=normalizeIdentifier(Te.sliceSerialize(Te.events[Te.events.length-1][1]).slice(1,-1)),Ue===58?(n.enter("definitionMarker"),n.consume(Ue),n.exit("definitionMarker"),$e):t(Ue)}function $e(Ue){return markdownLineEndingOrSpace(Ue)?factoryWhitespace(n,Ve)(Ue):Ve(Ue)}function Ve(Ue){return factoryDestination(n,Be,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(Ue)}function Be(Ue){return n.attempt(titleBefore,Me,Me)(Ue)}function Me(Ue){return markdownSpace(Ue)?factorySpace(n,Oe,"whitespace")(Ue):Oe(Ue)}function Oe(Ue){return Ue===null||markdownLineEnding(Ue)?(n.exit("definition"),Te.parser.defined.push(Ee),e(Ue)):t(Ue)}}function tokenizeTitleBefore(n,e,t){return Te;function Te(De){return markdownLineEndingOrSpace(De)?factoryWhitespace(n,Ee)(De):t(De)}function Ee(De){return factoryTitle(n,Re,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(De)}function Re(De){return markdownSpace(De)?factorySpace(n,Ce,"whitespace")(De):Ce(De)}function Ce(De){return De===null||markdownLineEnding(De)?e(De):t(De)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(n,e,t){return Te;function Te(Re){return n.enter("hardBreakEscape"),n.consume(Re),Ee}function Ee(Re){return markdownLineEnding(Re)?(n.exit("hardBreakEscape"),e(Re)):t(Re)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(n,e){let t=n.length-2,Te=3,Ee,Re;return n[Te][1].type==="whitespace"&&(Te+=2),t-2>Te&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(Te===t-1||t-4>Te&&n[t-2][1].type==="whitespace")&&(t-=Te+1===t?2:4),t>Te&&(Ee={type:"atxHeadingText",start:n[Te][1].start,end:n[t][1].end},Re={type:"chunkText",start:n[Te][1].start,end:n[t][1].end,contentType:"text"},splice(n,Te,t-Te+1,[["enter",Ee,e],["enter",Re,e],["exit",Re,e],["exit",Ee,e]])),n}function tokenizeHeadingAtx(n,e,t){let Te=0;return Ee;function Ee(Be){return n.enter("atxHeading"),Re(Be)}function Re(Be){return n.enter("atxHeadingSequence"),Ce(Be)}function Ce(Be){return Be===35&&Te++<6?(n.consume(Be),Ce):Be===null||markdownLineEndingOrSpace(Be)?(n.exit("atxHeadingSequence"),De(Be)):t(Be)}function De(Be){return Be===35?(n.enter("atxHeadingSequence"),$e(Be)):Be===null||markdownLineEnding(Be)?(n.exit("atxHeading"),e(Be)):markdownSpace(Be)?factorySpace(n,De,"whitespace")(Be):(n.enter("atxHeadingText"),Ve(Be))}function $e(Be){return Be===35?(n.consume(Be),$e):(n.exit("atxHeadingSequence"),De(Be))}function Ve(Be){return Be===null||Be===35||markdownLineEndingOrSpace(Be)?(n.exit("atxHeadingText"),De(Be)):(n.consume(Be),Ve)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function tokenizeHtmlFlow(n,e,t){const Te=this;let Ee,Re,Ce,De,$e;return Ve;function Ve(kn){return Be(kn)}function Be(kn){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(kn),Me}function Me(kn){return kn===33?(n.consume(kn),Oe):kn===47?(n.consume(kn),Re=!0,He):kn===63?(n.consume(kn),Ee=3,Te.interrupt?e:Dn):asciiAlpha(kn)?(n.consume(kn),Ce=String.fromCharCode(kn),Ge):t(kn)}function Oe(kn){return kn===45?(n.consume(kn),Ee=2,Ue):kn===91?(n.consume(kn),Ee=5,De=0,ze):asciiAlpha(kn)?(n.consume(kn),Ee=4,Te.interrupt?e:Dn):t(kn)}function Ue(kn){return kn===45?(n.consume(kn),Te.interrupt?e:Dn):t(kn)}function ze(kn){const Yn="CDATA[";return kn===Yn.charCodeAt(De++)?(n.consume(kn),De===Yn.length?Te.interrupt?e:Tn:ze):t(kn)}function He(kn){return asciiAlpha(kn)?(n.consume(kn),Ce=String.fromCharCode(kn),Ge):t(kn)}function Ge(kn){if(kn===null||kn===47||kn===62||markdownLineEndingOrSpace(kn)){const Yn=kn===47,Jn=Ce.toLowerCase();return!Yn&&!Re&&htmlRawNames.includes(Jn)?(Ee=1,Te.interrupt?e(kn):Tn(kn)):htmlBlockNames.includes(Ce.toLowerCase())?(Ee=6,Yn?(n.consume(kn),Ke):Te.interrupt?e(kn):Tn(kn)):(Ee=7,Te.interrupt&&!Te.parser.lazy[Te.now().line]?t(kn):Re?Xe(kn):Je(kn))}return kn===45||asciiAlphanumeric(kn)?(n.consume(kn),Ce+=String.fromCharCode(kn),Ge):t(kn)}function Ke(kn){return kn===62?(n.consume(kn),Te.interrupt?e:Tn):t(kn)}function Xe(kn){return markdownSpace(kn)?(n.consume(kn),Xe):vn(kn)}function Je(kn){return kn===47?(n.consume(kn),vn):kn===58||kn===95||asciiAlpha(kn)?(n.consume(kn),un):markdownSpace(kn)?(n.consume(kn),Je):vn(kn)}function un(kn){return kn===45||kn===46||kn===58||kn===95||asciiAlphanumeric(kn)?(n.consume(kn),un):fn(kn)}function fn(kn){return kn===61?(n.consume(kn),yn):markdownSpace(kn)?(n.consume(kn),fn):Je(kn)}function yn(kn){return kn===null||kn===60||kn===61||kn===62||kn===96?t(kn):kn===34||kn===39?(n.consume(kn),$e=kn,gn):markdownSpace(kn)?(n.consume(kn),yn):mn(kn)}function gn(kn){return kn===$e?(n.consume(kn),$e=null,dn):kn===null||markdownLineEnding(kn)?t(kn):(n.consume(kn),gn)}function mn(kn){return kn===null||kn===34||kn===39||kn===47||kn===60||kn===61||kn===62||kn===96||markdownLineEndingOrSpace(kn)?fn(kn):(n.consume(kn),mn)}function dn(kn){return kn===47||kn===62||markdownSpace(kn)?Je(kn):t(kn)}function vn(kn){return kn===62?(n.consume(kn),bn):t(kn)}function bn(kn){return kn===null||markdownLineEnding(kn)?Tn(kn):markdownSpace(kn)?(n.consume(kn),bn):t(kn)}function Tn(kn){return kn===45&&Ee===2?(n.consume(kn),On):kn===60&&Ee===1?(n.consume(kn),Fn):kn===62&&Ee===4?(n.consume(kn),Un):kn===63&&Ee===3?(n.consume(kn),Dn):kn===93&&Ee===5?(n.consume(kn),Hn):markdownLineEnding(kn)&&(Ee===6||Ee===7)?(n.exit("htmlFlowData"),n.check(blankLineBefore,Cn,En)(kn)):kn===null||markdownLineEnding(kn)?(n.exit("htmlFlowData"),En(kn)):(n.consume(kn),Tn)}function En(kn){return n.check(nonLazyContinuationStart,In,Cn)(kn)}function In(kn){return n.enter("lineEnding"),n.consume(kn),n.exit("lineEnding"),Nn}function Nn(kn){return kn===null||markdownLineEnding(kn)?En(kn):(n.enter("htmlFlowData"),Tn(kn))}function On(kn){return kn===45?(n.consume(kn),Dn):Tn(kn)}function Fn(kn){return kn===47?(n.consume(kn),Ce="",$n):Tn(kn)}function $n(kn){if(kn===62){const Yn=Ce.toLowerCase();return htmlRawNames.includes(Yn)?(n.consume(kn),Un):Tn(kn)}return asciiAlpha(kn)&&Ce.length<8?(n.consume(kn),Ce+=String.fromCharCode(kn),$n):Tn(kn)}function Hn(kn){return kn===93?(n.consume(kn),Dn):Tn(kn)}function Dn(kn){return kn===62?(n.consume(kn),Un):kn===45&&Ee===2?(n.consume(kn),Dn):Tn(kn)}function Un(kn){return kn===null||markdownLineEnding(kn)?(n.exit("htmlFlowData"),Cn(kn)):(n.consume(kn),Un)}function Cn(kn){return n.exit("htmlFlow"),e(kn)}}function tokenizeNonLazyContinuationStart(n,e,t){const Te=this;return Ee;function Ee(Ce){return markdownLineEnding(Ce)?(n.enter("lineEnding"),n.consume(Ce),n.exit("lineEnding"),Re):t(Ce)}function Re(Ce){return Te.parser.lazy[Te.now().line]?t(Ce):e(Ce)}}function tokenizeBlankLineBefore(n,e,t){return Te;function Te(Ee){return n.enter("lineEnding"),n.consume(Ee),n.exit("lineEnding"),n.attempt(blankLine,e,t)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(n,e,t){const Te=this;let Ee,Re,Ce;return De;function De(Dn){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(Dn),$e}function $e(Dn){return Dn===33?(n.consume(Dn),Ve):Dn===47?(n.consume(Dn),fn):Dn===63?(n.consume(Dn),Je):asciiAlpha(Dn)?(n.consume(Dn),mn):t(Dn)}function Ve(Dn){return Dn===45?(n.consume(Dn),Be):Dn===91?(n.consume(Dn),Re=0,ze):asciiAlpha(Dn)?(n.consume(Dn),Xe):t(Dn)}function Be(Dn){return Dn===45?(n.consume(Dn),Ue):t(Dn)}function Me(Dn){return Dn===null?t(Dn):Dn===45?(n.consume(Dn),Oe):markdownLineEnding(Dn)?(Ce=Me,Fn(Dn)):(n.consume(Dn),Me)}function Oe(Dn){return Dn===45?(n.consume(Dn),Ue):Me(Dn)}function Ue(Dn){return Dn===62?On(Dn):Dn===45?Oe(Dn):Me(Dn)}function ze(Dn){const Un="CDATA[";return Dn===Un.charCodeAt(Re++)?(n.consume(Dn),Re===Un.length?He:ze):t(Dn)}function He(Dn){return Dn===null?t(Dn):Dn===93?(n.consume(Dn),Ge):markdownLineEnding(Dn)?(Ce=He,Fn(Dn)):(n.consume(Dn),He)}function Ge(Dn){return Dn===93?(n.consume(Dn),Ke):He(Dn)}function Ke(Dn){return Dn===62?On(Dn):Dn===93?(n.consume(Dn),Ke):He(Dn)}function Xe(Dn){return Dn===null||Dn===62?On(Dn):markdownLineEnding(Dn)?(Ce=Xe,Fn(Dn)):(n.consume(Dn),Xe)}function Je(Dn){return Dn===null?t(Dn):Dn===63?(n.consume(Dn),un):markdownLineEnding(Dn)?(Ce=Je,Fn(Dn)):(n.consume(Dn),Je)}function un(Dn){return Dn===62?On(Dn):Je(Dn)}function fn(Dn){return asciiAlpha(Dn)?(n.consume(Dn),yn):t(Dn)}function yn(Dn){return Dn===45||asciiAlphanumeric(Dn)?(n.consume(Dn),yn):gn(Dn)}function gn(Dn){return markdownLineEnding(Dn)?(Ce=gn,Fn(Dn)):markdownSpace(Dn)?(n.consume(Dn),gn):On(Dn)}function mn(Dn){return Dn===45||asciiAlphanumeric(Dn)?(n.consume(Dn),mn):Dn===47||Dn===62||markdownLineEndingOrSpace(Dn)?dn(Dn):t(Dn)}function dn(Dn){return Dn===47?(n.consume(Dn),On):Dn===58||Dn===95||asciiAlpha(Dn)?(n.consume(Dn),vn):markdownLineEnding(Dn)?(Ce=dn,Fn(Dn)):markdownSpace(Dn)?(n.consume(Dn),dn):On(Dn)}function vn(Dn){return Dn===45||Dn===46||Dn===58||Dn===95||asciiAlphanumeric(Dn)?(n.consume(Dn),vn):bn(Dn)}function bn(Dn){return Dn===61?(n.consume(Dn),Tn):markdownLineEnding(Dn)?(Ce=bn,Fn(Dn)):markdownSpace(Dn)?(n.consume(Dn),bn):dn(Dn)}function Tn(Dn){return Dn===null||Dn===60||Dn===61||Dn===62||Dn===96?t(Dn):Dn===34||Dn===39?(n.consume(Dn),Ee=Dn,En):markdownLineEnding(Dn)?(Ce=Tn,Fn(Dn)):markdownSpace(Dn)?(n.consume(Dn),Tn):(n.consume(Dn),In)}function En(Dn){return Dn===Ee?(n.consume(Dn),Ee=void 0,Nn):Dn===null?t(Dn):markdownLineEnding(Dn)?(Ce=En,Fn(Dn)):(n.consume(Dn),En)}function In(Dn){return Dn===null||Dn===34||Dn===39||Dn===60||Dn===61||Dn===96?t(Dn):Dn===47||Dn===62||markdownLineEndingOrSpace(Dn)?dn(Dn):(n.consume(Dn),In)}function Nn(Dn){return Dn===47||Dn===62||markdownLineEndingOrSpace(Dn)?dn(Dn):t(Dn)}function On(Dn){return Dn===62?(n.consume(Dn),n.exit("htmlTextData"),n.exit("htmlText"),e):t(Dn)}function Fn(Dn){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(Dn),n.exit("lineEnding"),$n}function $n(Dn){return markdownSpace(Dn)?factorySpace(n,Hn,"linePrefix",Te.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Dn):Hn(Dn)}function Hn(Dn){return n.enter("htmlTextData"),Ce(Dn)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(n){let e=-1;const t=[];for(;++e<n.length;){const Te=n[e][1];if(t.push(n[e]),Te.type==="labelImage"||Te.type==="labelLink"||Te.type==="labelEnd"){const Ee=Te.type==="labelImage"?4:2;Te.type="data",e+=Ee}}return n.length!==t.length&&splice(n,0,n.length,t),n}function resolveToLabelEnd(n,e){let t=n.length,Te=0,Ee,Re,Ce,De;for(;t--;)if(Ee=n[t][1],Re){if(Ee.type==="link"||Ee.type==="labelLink"&&Ee._inactive)break;n[t][0]==="enter"&&Ee.type==="labelLink"&&(Ee._inactive=!0)}else if(Ce){if(n[t][0]==="enter"&&(Ee.type==="labelImage"||Ee.type==="labelLink")&&!Ee._balanced&&(Re=t,Ee.type!=="labelLink")){Te=2;break}}else Ee.type==="labelEnd"&&(Ce=t);const $e={type:n[Re][1].type==="labelLink"?"link":"image",start:{...n[Re][1].start},end:{...n[n.length-1][1].end}},Ve={type:"label",start:{...n[Re][1].start},end:{...n[Ce][1].end}},Be={type:"labelText",start:{...n[Re+Te+2][1].end},end:{...n[Ce-2][1].start}};return De=[["enter",$e,e],["enter",Ve,e]],De=push(De,n.slice(Re+1,Re+Te+3)),De=push(De,[["enter",Be,e]]),De=push(De,resolveAll(e.parser.constructs.insideSpan.null,n.slice(Re+Te+4,Ce-3),e)),De=push(De,[["exit",Be,e],n[Ce-2],n[Ce-1],["exit",Ve,e]]),De=push(De,n.slice(Ce+1)),De=push(De,[["exit",$e,e]]),splice(n,Re,n.length,De),n}function tokenizeLabelEnd(n,e,t){const Te=this;let Ee=Te.events.length,Re,Ce;for(;Ee--;)if((Te.events[Ee][1].type==="labelImage"||Te.events[Ee][1].type==="labelLink")&&!Te.events[Ee][1]._balanced){Re=Te.events[Ee][1];break}return De;function De(Oe){return Re?Re._inactive?Me(Oe):(Ce=Te.parser.defined.includes(normalizeIdentifier(Te.sliceSerialize({start:Re.end,end:Te.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(Oe),n.exit("labelMarker"),n.exit("labelEnd"),$e):t(Oe)}function $e(Oe){return Oe===40?n.attempt(resourceConstruct,Be,Ce?Be:Me)(Oe):Oe===91?n.attempt(referenceFullConstruct,Be,Ce?Ve:Me)(Oe):Ce?Be(Oe):Me(Oe)}function Ve(Oe){return n.attempt(referenceCollapsedConstruct,Be,Me)(Oe)}function Be(Oe){return e(Oe)}function Me(Oe){return Re._balanced=!0,t(Oe)}}function tokenizeResource(n,e,t){return Te;function Te(Me){return n.enter("resource"),n.enter("resourceMarker"),n.consume(Me),n.exit("resourceMarker"),Ee}function Ee(Me){return markdownLineEndingOrSpace(Me)?factoryWhitespace(n,Re)(Me):Re(Me)}function Re(Me){return Me===41?Be(Me):factoryDestination(n,Ce,De,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(Me)}function Ce(Me){return markdownLineEndingOrSpace(Me)?factoryWhitespace(n,$e)(Me):Be(Me)}function De(Me){return t(Me)}function $e(Me){return Me===34||Me===39||Me===40?factoryTitle(n,Ve,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(Me):Be(Me)}function Ve(Me){return markdownLineEndingOrSpace(Me)?factoryWhitespace(n,Be)(Me):Be(Me)}function Be(Me){return Me===41?(n.enter("resourceMarker"),n.consume(Me),n.exit("resourceMarker"),n.exit("resource"),e):t(Me)}}function tokenizeReferenceFull(n,e,t){const Te=this;return Ee;function Ee(De){return factoryLabel.call(Te,n,Re,Ce,"reference","referenceMarker","referenceString")(De)}function Re(De){return Te.parser.defined.includes(normalizeIdentifier(Te.sliceSerialize(Te.events[Te.events.length-1][1]).slice(1,-1)))?e(De):t(De)}function Ce(De){return t(De)}}function tokenizeReferenceCollapsed(n,e,t){return Te;function Te(Re){return n.enter("reference"),n.enter("referenceMarker"),n.consume(Re),n.exit("referenceMarker"),Ee}function Ee(Re){return Re===93?(n.enter("referenceMarker"),n.consume(Re),n.exit("referenceMarker"),n.exit("reference"),e):t(Re)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(n,e,t){const Te=this;return Ee;function Ee(De){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(De),n.exit("labelImageMarker"),Re}function Re(De){return De===91?(n.enter("labelMarker"),n.consume(De),n.exit("labelMarker"),n.exit("labelImage"),Ce):t(De)}function Ce(De){return De===94&&"_hiddenFootnoteSupport"in Te.parser.constructs?t(De):e(De)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(n,e,t){const Te=this;return Ee;function Ee(Ce){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(Ce),n.exit("labelMarker"),n.exit("labelLink"),Re}function Re(Ce){return Ce===94&&"_hiddenFootnoteSupport"in Te.parser.constructs?t(Ce):e(Ce)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(n,e){return t;function t(Te){return n.enter("lineEnding"),n.consume(Te),n.exit("lineEnding"),factorySpace(n,e,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(n,e,t){let Te=0,Ee;return Re;function Re(Ve){return n.enter("thematicBreak"),Ce(Ve)}function Ce(Ve){return Ee=Ve,De(Ve)}function De(Ve){return Ve===Ee?(n.enter("thematicBreakSequence"),$e(Ve)):Te>=3&&(Ve===null||markdownLineEnding(Ve))?(n.exit("thematicBreak"),e(Ve)):t(Ve)}function $e(Ve){return Ve===Ee?(n.consume(Ve),Te++,$e):(n.exit("thematicBreakSequence"),markdownSpace(Ve)?factorySpace(n,De,"whitespace")(Ve):De(Ve))}}const list$1={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent};function tokenizeListStart(n,e,t){const Te=this,Ee=Te.events[Te.events.length-1];let Re=Ee&&Ee[1].type==="linePrefix"?Ee[2].sliceSerialize(Ee[1],!0).length:0,Ce=0;return De;function De(Ue){const ze=Te.containerState.type||(Ue===42||Ue===43||Ue===45?"listUnordered":"listOrdered");if(ze==="listUnordered"?!Te.containerState.marker||Ue===Te.containerState.marker:asciiDigit(Ue)){if(Te.containerState.type||(Te.containerState.type=ze,n.enter(ze,{_container:!0})),ze==="listUnordered")return n.enter("listItemPrefix"),Ue===42||Ue===45?n.check(thematicBreak$1,t,Ve)(Ue):Ve(Ue);if(!Te.interrupt||Ue===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),$e(Ue)}return t(Ue)}function $e(Ue){return asciiDigit(Ue)&&++Ce<10?(n.consume(Ue),$e):(!Te.interrupt||Ce<2)&&(Te.containerState.marker?Ue===Te.containerState.marker:Ue===41||Ue===46)?(n.exit("listItemValue"),Ve(Ue)):t(Ue)}function Ve(Ue){return n.enter("listItemMarker"),n.consume(Ue),n.exit("listItemMarker"),Te.containerState.marker=Te.containerState.marker||Ue,n.check(blankLine,Te.interrupt?t:Be,n.attempt(listItemPrefixWhitespaceConstruct,Oe,Me))}function Be(Ue){return Te.containerState.initialBlankLine=!0,Re++,Oe(Ue)}function Me(Ue){return markdownSpace(Ue)?(n.enter("listItemPrefixWhitespace"),n.consume(Ue),n.exit("listItemPrefixWhitespace"),Oe):t(Ue)}function Oe(Ue){return Te.containerState.size=Re+Te.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(Ue)}}function tokenizeListContinuation(n,e,t){const Te=this;return Te.containerState._closeFlow=void 0,n.check(blankLine,Ee,Re);function Ee(De){return Te.containerState.furtherBlankLines=Te.containerState.furtherBlankLines||Te.containerState.initialBlankLine,factorySpace(n,e,"listItemIndent",Te.containerState.size+1)(De)}function Re(De){return Te.containerState.furtherBlankLines||!markdownSpace(De)?(Te.containerState.furtherBlankLines=void 0,Te.containerState.initialBlankLine=void 0,Ce(De)):(Te.containerState.furtherBlankLines=void 0,Te.containerState.initialBlankLine=void 0,n.attempt(indentConstruct,e,Ce)(De))}function Ce(De){return Te.containerState._closeFlow=!0,Te.interrupt=void 0,factorySpace(n,n.attempt(list$1,e,t),"linePrefix",Te.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(De)}}function tokenizeIndent(n,e,t){const Te=this;return factorySpace(n,Ee,"listItemIndent",Te.containerState.size+1);function Ee(Re){const Ce=Te.events[Te.events.length-1];return Ce&&Ce[1].type==="listItemIndent"&&Ce[2].sliceSerialize(Ce[1],!0).length===Te.containerState.size?e(Re):t(Re)}}function tokenizeListEnd(n){n.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(n,e,t){const Te=this;return factorySpace(n,Ee,"listItemPrefixWhitespace",Te.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function Ee(Re){const Ce=Te.events[Te.events.length-1];return!markdownSpace(Re)&&Ce&&Ce[1].type==="listItemPrefixWhitespace"?e(Re):t(Re)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(n,e){let t=n.length,Te,Ee,Re;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){Te=t;break}n[t][1].type==="paragraph"&&(Ee=t)}else n[t][1].type==="content"&&n.splice(t,1),!Re&&n[t][1].type==="definition"&&(Re=t);const Ce={type:"setextHeading",start:{...n[Te][1].start},end:{...n[n.length-1][1].end}};return n[Ee][1].type="setextHeadingText",Re?(n.splice(Ee,0,["enter",Ce,e]),n.splice(Re+1,0,["exit",n[Te][1],e]),n[Te][1].end={...n[Re][1].end}):n[Te][1]=Ce,n.push(["exit",Ce,e]),n}function tokenizeSetextUnderline(n,e,t){const Te=this;let Ee;return Re;function Re(Ve){let Be=Te.events.length,Me;for(;Be--;)if(Te.events[Be][1].type!=="lineEnding"&&Te.events[Be][1].type!=="linePrefix"&&Te.events[Be][1].type!=="content"){Me=Te.events[Be][1].type==="paragraph";break}return!Te.parser.lazy[Te.now().line]&&(Te.interrupt||Me)?(n.enter("setextHeadingLine"),Ee=Ve,Ce(Ve)):t(Ve)}function Ce(Ve){return n.enter("setextHeadingLineSequence"),De(Ve)}function De(Ve){return Ve===Ee?(n.consume(Ve),De):(n.exit("setextHeadingLineSequence"),markdownSpace(Ve)?factorySpace(n,$e,"lineSuffix")(Ve):$e(Ve))}function $e(Ve){return Ve===null||markdownLineEnding(Ve)?(n.exit("setextHeadingLine"),e(Ve)):t(Ve)}}const flow$1={tokenize:initializeFlow};function initializeFlow(n){const e=this,t=n.attempt(blankLine,Te,n.attempt(this.parser.constructs.flowInitial,Ee,factorySpace(n,n.attempt(this.parser.constructs.flow,Ee,n.attempt(content,Ee)),"linePrefix")));return t;function Te(Re){if(Re===null){n.consume(Re);return}return n.enter("lineEndingBlank"),n.consume(Re),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function Ee(Re){if(Re===null){n.consume(Re);return}return n.enter("lineEnding"),n.consume(Re),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$2=initializeFactory("text");function initializeFactory(n){return{resolveAll:createResolver(n==="text"?resolveAllLineSuffixes:void 0),tokenize:e};function e(t){const Te=this,Ee=this.parser.constructs[n],Re=t.attempt(Ee,Ce,De);return Ce;function Ce(Be){return Ve(Be)?Re(Be):De(Be)}function De(Be){if(Be===null){t.consume(Be);return}return t.enter("data"),t.consume(Be),$e}function $e(Be){return Ve(Be)?(t.exit("data"),Re(Be)):(t.consume(Be),$e)}function Ve(Be){if(Be===null)return!0;const Me=Ee[Be];let Oe=-1;if(Me)for(;++Oe<Me.length;){const Ue=Me[Oe];if(!Ue.previous||Ue.previous.call(Te,Te.previous))return!0}return!1}}}function createResolver(n){return e;function e(t,Te){let Ee=-1,Re;for(;++Ee<=t.length;)Re===void 0?t[Ee]&&t[Ee][1].type==="data"&&(Re=Ee,Ee++):(!t[Ee]||t[Ee][1].type!=="data")&&(Ee!==Re+2&&(t[Re][1].end=t[Ee-1][1].end,t.splice(Re+2,Ee-Re-2),Ee=Re+2),Re=void 0);return n?n(t,Te):t}}function resolveAllLineSuffixes(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const Te=n[t-1][1],Ee=e.sliceStream(Te);let Re=Ee.length,Ce=-1,De=0,$e;for(;Re--;){const Ve=Ee[Re];if(typeof Ve=="string"){for(Ce=Ve.length;Ve.charCodeAt(Ce-1)===32;)De++,Ce--;if(Ce)break;Ce=-1}else if(Ve===-2)$e=!0,De++;else if(Ve!==-1){Re++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(De=0),De){const Ve={type:t===n.length||$e||De<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:Re?Ce:Te.start._bufferIndex+Ce,_index:Te.start._index+Re,line:Te.end.line,column:Te.end.column-De,offset:Te.end.offset-De},end:{...Te.end}};Te.end={...Ve.start},Te.start.offset===Te.end.offset?Object.assign(Te,Ve):(n.splice(t,0,["enter",Ve,e],["exit",Ve,e]),t+=2)}t++}return n}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$1={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$1},Symbol.toStringTag,{value:"Module"}));function createTokenizer(n,e,t){let Te={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const Ee={},Re=[];let Ce=[],De=[];const $e={attempt:gn(fn),check:gn(yn),consume:Xe,enter:Je,exit:un,interrupt:gn(yn,{interrupt:!0})},Ve={code:null,containerState:{},defineSkip:He,events:[],now:ze,parser:n,previous:null,sliceSerialize:Oe,sliceStream:Ue,write:Me};let Be=e.tokenize.call(Ve,$e);return e.resolveAll&&Re.push(e),Ve;function Me(bn){return Ce=push(Ce,bn),Ge(),Ce[Ce.length-1]!==null?[]:(mn(e,0),Ve.events=resolveAll(Re,Ve.events,Ve),Ve.events)}function Oe(bn,Tn){return serializeChunks(Ue(bn),Tn)}function Ue(bn){return sliceChunks(Ce,bn)}function ze(){const{_bufferIndex:bn,_index:Tn,line:En,column:In,offset:Nn}=Te;return{_bufferIndex:bn,_index:Tn,line:En,column:In,offset:Nn}}function He(bn){Ee[bn.line]=bn.column,vn()}function Ge(){let bn;for(;Te._index<Ce.length;){const Tn=Ce[Te._index];if(typeof Tn=="string")for(bn=Te._index,Te._bufferIndex<0&&(Te._bufferIndex=0);Te._index===bn&&Te._bufferIndex<Tn.length;)Ke(Tn.charCodeAt(Te._bufferIndex));else Ke(Tn)}}function Ke(bn){Be=Be(bn)}function Xe(bn){markdownLineEnding(bn)?(Te.line++,Te.column=1,Te.offset+=bn===-3?2:1,vn()):bn!==-1&&(Te.column++,Te.offset++),Te._bufferIndex<0?Te._index++:(Te._bufferIndex++,Te._bufferIndex===Ce[Te._index].length&&(Te._bufferIndex=-1,Te._index++)),Ve.previous=bn}function Je(bn,Tn){const En=Tn||{};return En.type=bn,En.start=ze(),Ve.events.push(["enter",En,Ve]),De.push(En),En}function un(bn){const Tn=De.pop();return Tn.end=ze(),Ve.events.push(["exit",Tn,Ve]),Tn}function fn(bn,Tn){mn(bn,Tn.from)}function yn(bn,Tn){Tn.restore()}function gn(bn,Tn){return En;function En(In,Nn,On){let Fn,$n,Hn,Dn;return Array.isArray(In)?Cn(In):"tokenize"in In?Cn([In]):Un(In);function Un(sr){return lr;function lr(mr){const gr=mr!==null&&sr[mr],Er=mr!==null&&sr.null,$r=[...Array.isArray(gr)?gr:gr?[gr]:[],...Array.isArray(Er)?Er:Er?[Er]:[]];return Cn($r)(mr)}}function Cn(sr){return Fn=sr,$n=0,sr.length===0?On:kn(sr[$n])}function kn(sr){return lr;function lr(mr){return Dn=dn(),Hn=sr,sr.partial||(Ve.currentConstruct=sr),sr.name&&Ve.parser.constructs.disable.null.includes(sr.name)?Jn():sr.tokenize.call(Tn?Object.assign(Object.create(Ve),Tn):Ve,$e,Yn,Jn)(mr)}}function Yn(sr){return bn(Hn,Dn),Nn}function Jn(sr){return Dn.restore(),++$n<Fn.length?kn(Fn[$n]):On}}}function mn(bn,Tn){bn.resolveAll&&!Re.includes(bn)&&Re.push(bn),bn.resolve&&splice(Ve.events,Tn,Ve.events.length-Tn,bn.resolve(Ve.events.slice(Tn),Ve)),bn.resolveTo&&(Ve.events=bn.resolveTo(Ve.events,Ve))}function dn(){const bn=ze(),Tn=Ve.previous,En=Ve.currentConstruct,In=Ve.events.length,Nn=Array.from(De);return{from:In,restore:On};function On(){Te=bn,Ve.previous=Tn,Ve.currentConstruct=En,Ve.events.length=In,De=Nn,vn()}}function vn(){Te.line in Ee&&Te.column<2&&(Te.column=Ee[Te.line],Te.offset+=Ee[Te.line]-1)}}function sliceChunks(n,e){const t=e.start._index,Te=e.start._bufferIndex,Ee=e.end._index,Re=e.end._bufferIndex;let Ce;if(t===Ee)Ce=[n[t].slice(Te,Re)];else{if(Ce=n.slice(t,Ee),Te>-1){const De=Ce[0];typeof De=="string"?Ce[0]=De.slice(Te):Ce.shift()}Re>0&&Ce.push(n[Ee].slice(0,Re))}return Ce}function serializeChunks(n,e){let t=-1;const Te=[];let Ee;for(;++t<n.length;){const Re=n[t];let Ce;if(typeof Re=="string")Ce=Re;else switch(Re){case-5:{Ce="\r";break}case-4:{Ce=`
`;break}case-3:{Ce=`\r
`;break}case-2:{Ce=e?" ":"	";break}case-1:{if(!e&&Ee)continue;Ce=" ";break}default:Ce=String.fromCharCode(Re)}Ee=Re===-2,Te.push(Ce)}return Te.join("")}function parse$1(n){const Te={constructs:combineExtensions([defaultConstructs,...(n||{}).extensions||[]]),content:Ee(content$1),defined:[],document:Ee(document$2),flow:Ee(flow$1),lazy:{},string:Ee(string$1),text:Ee(text$2)};return Te;function Ee(Re){return Ce;function Ce(De){return createTokenizer(Te,Re,De)}}}function postprocess(n){for(;!subtokenize(n););return n}const search=/[\0\t\n\r]/g;function preprocess$1(){let n=1,e="",t=!0,Te;return Ee;function Ee(Re,Ce,De){const $e=[];let Ve,Be,Me,Oe,Ue;for(Re=e+(typeof Re=="string"?Re.toString():new TextDecoder(Ce||void 0).decode(Re)),Me=0,e="",t&&(Re.charCodeAt(0)===65279&&Me++,t=void 0);Me<Re.length;){if(search.lastIndex=Me,Ve=search.exec(Re),Oe=Ve&&Ve.index!==void 0?Ve.index:Re.length,Ue=Re.charCodeAt(Oe),!Ve){e=Re.slice(Me);break}if(Ue===10&&Me===Oe&&Te)$e.push(-3),Te=void 0;else switch(Te&&($e.push(-5),Te=void 0),Me<Oe&&($e.push(Re.slice(Me,Oe)),n+=Oe-Me),Ue){case 0:{$e.push(65533),n++;break}case 9:{for(Be=Math.ceil(n/4)*4,$e.push(-2);n++<Be;)$e.push(-1);break}case 10:{$e.push(-4),n=1;break}default:Te=!0,n=1}Me=Oe+1}return De&&(Te&&$e.push(-5),e&&$e.push(e),$e.push(null)),$e}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(n){return n.replace(characterEscapeOrReference,decode)}function decode(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const Ee=t.charCodeAt(1),Re=Ee===120||Ee===88;return decodeNumericCharacterReference(t.slice(Re?2:1),Re?16:10)}return decodeNamedCharacterReference(t)||n}const own$2={}.hasOwnProperty;function fromMarkdown(n,e,t){return typeof e!="string"&&(t=e,e=void 0),compiler(t)(postprocess(parse$1(t).document().write(preprocess$1()(n,e,!0))))}function compiler(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:Re(Wr),autolinkProtocol:dn,autolinkEmail:dn,atxHeading:Re(rr),blockQuote:Re(Er),characterEscape:dn,characterReference:dn,codeFenced:Re($r),codeFencedFenceInfo:Ce,codeFencedFenceMeta:Ce,codeIndented:Re($r,Ce),codeText:Re(Yr,Ce),codeTextData:dn,data:dn,codeFlowValue:dn,definition:Re(Gr),definitionDestinationString:Ce,definitionLabelString:Ce,definitionTitleString:Ce,emphasis:Re(Tr),hardBreakEscape:Re(Ni),hardBreakTrailing:Re(Ni),htmlFlow:Re(Ai,Ce),htmlFlowData:dn,htmlText:Re(Ai,Ce),htmlTextData:dn,image:Re(bi),label:Ce,link:Re(Wr),listItem:Re(ei),listItemValue:Oe,listOrdered:Re(hi,Me),listUnordered:Re(hi),paragraph:Re(gi),reference:kn,referenceString:Ce,resourceDestinationString:Ce,resourceTitleString:Ce,setextHeading:Re(rr),strong:Re(mi),thematicBreak:Re(oi)},exit:{atxHeading:$e(),atxHeadingSequence:fn,autolink:$e(),autolinkEmail:gr,autolinkProtocol:mr,blockQuote:$e(),characterEscapeValue:vn,characterReferenceMarkerHexadecimal:Jn,characterReferenceMarkerNumeric:Jn,characterReferenceValue:sr,characterReference:lr,codeFenced:$e(Ge),codeFencedFence:He,codeFencedFenceInfo:Ue,codeFencedFenceMeta:ze,codeFlowValue:vn,codeIndented:$e(Ke),codeText:$e(Nn),codeTextData:vn,data:vn,definition:$e(),definitionDestinationString:un,definitionLabelString:Xe,definitionTitleString:Je,emphasis:$e(),hardBreakEscape:$e(Tn),hardBreakTrailing:$e(Tn),htmlFlow:$e(En),htmlFlowData:vn,htmlText:$e(In),htmlTextData:vn,image:$e(Fn),label:Hn,labelText:$n,lineEnding:bn,link:$e(On),listItem:$e(),listOrdered:$e(),listUnordered:$e(),paragraph:$e(),referenceString:Yn,resourceDestinationString:Dn,resourceTitleString:Un,resource:Cn,setextHeading:$e(mn),setextHeadingLineSequence:gn,setextHeadingText:yn,strong:$e(),thematicBreak:$e()}};configure(e,(n||{}).mdastExtensions||[]);const t={};return Te;function Te(yr){let Fr={type:"root",children:[]};const Qr={stack:[Fr],tokenStack:[],config:e,enter:De,exit:Ve,buffer:Ce,resume:Be,data:t},Kr=[];let si=-1;for(;++si<yr.length;)if(yr[si][1].type==="listOrdered"||yr[si][1].type==="listUnordered")if(yr[si][0]==="enter")Kr.push(si);else{const fi=Kr.pop();si=Ee(yr,fi,si)}for(si=-1;++si<yr.length;){const fi=e[yr[si][0]];own$2.call(fi,yr[si][1].type)&&fi[yr[si][1].type].call(Object.assign({sliceSerialize:yr[si][2].sliceSerialize},Qr),yr[si][1])}if(Qr.tokenStack.length>0){const fi=Qr.tokenStack[Qr.tokenStack.length-1];(fi[1]||defaultOnError).call(Qr,void 0,fi[0])}for(Fr.position={start:point(yr.length>0?yr[0][1].start:{line:1,column:1,offset:0}),end:point(yr.length>0?yr[yr.length-2][1].end:{line:1,column:1,offset:0})},si=-1;++si<e.transforms.length;)Fr=e.transforms[si](Fr)||Fr;return Fr}function Ee(yr,Fr,Qr){let Kr=Fr-1,si=-1,fi=!1,Li,$i,zr,Ii;for(;++Kr<=Qr;){const Ui=yr[Kr];switch(Ui[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ui[0]==="enter"?si++:si--,Ii=void 0;break}case"lineEndingBlank":{Ui[0]==="enter"&&(Li&&!Ii&&!si&&!zr&&(zr=Kr),Ii=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ii=void 0}if(!si&&Ui[0]==="enter"&&Ui[1].type==="listItemPrefix"||si===-1&&Ui[0]==="exit"&&(Ui[1].type==="listUnordered"||Ui[1].type==="listOrdered")){if(Li){let wi=Kr;for($i=void 0;wi--;){const Ri=yr[wi];if(Ri[1].type==="lineEnding"||Ri[1].type==="lineEndingBlank"){if(Ri[0]==="exit")continue;$i&&(yr[$i][1].type="lineEndingBlank",fi=!0),Ri[1].type="lineEnding",$i=wi}else if(!(Ri[1].type==="linePrefix"||Ri[1].type==="blockQuotePrefix"||Ri[1].type==="blockQuotePrefixWhitespace"||Ri[1].type==="blockQuoteMarker"||Ri[1].type==="listItemIndent"))break}zr&&(!$i||zr<$i)&&(Li._spread=!0),Li.end=Object.assign({},$i?yr[$i][1].start:Ui[1].end),yr.splice($i||Kr,0,["exit",Li,Ui[2]]),Kr++,Qr++}if(Ui[1].type==="listItemPrefix"){const wi={type:"listItem",_spread:!1,start:Object.assign({},Ui[1].start),end:void 0};Li=wi,yr.splice(Kr,0,["enter",wi,Ui[2]]),Kr++,Qr++,zr=void 0,Ii=!0}}}return yr[Fr][1]._spread=fi,Qr}function Re(yr,Fr){return Qr;function Qr(Kr){De.call(this,yr(Kr),Kr),Fr&&Fr.call(this,Kr)}}function Ce(){this.stack.push({type:"fragment",children:[]})}function De(yr,Fr,Qr){this.stack[this.stack.length-1].children.push(yr),this.stack.push(yr),this.tokenStack.push([Fr,Qr||void 0]),yr.position={start:point(Fr.start),end:void 0}}function $e(yr){return Fr;function Fr(Qr){yr&&yr.call(this,Qr),Ve.call(this,Qr)}}function Ve(yr,Fr){const Qr=this.stack.pop(),Kr=this.tokenStack.pop();if(Kr)Kr[0].type!==yr.type&&(Fr?Fr.call(this,yr,Kr[0]):(Kr[1]||defaultOnError).call(this,yr,Kr[0]));else throw new Error("Cannot close `"+yr.type+"` ("+stringifyPosition({start:yr.start,end:yr.end})+"): its not open");Qr.position.end=point(yr.end)}function Be(){return toString$1(this.stack.pop())}function Me(){this.data.expectingFirstListItemValue=!0}function Oe(yr){if(this.data.expectingFirstListItemValue){const Fr=this.stack[this.stack.length-2];Fr.start=Number.parseInt(this.sliceSerialize(yr),10),this.data.expectingFirstListItemValue=void 0}}function Ue(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.lang=yr}function ze(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.meta=yr}function He(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function Ge(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.value=yr.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function Ke(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.value=yr.replace(/(\r?\n|\r)$/g,"")}function Xe(yr){const Fr=this.resume(),Qr=this.stack[this.stack.length-1];Qr.label=Fr,Qr.identifier=normalizeIdentifier(this.sliceSerialize(yr)).toLowerCase()}function Je(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.title=yr}function un(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.url=yr}function fn(yr){const Fr=this.stack[this.stack.length-1];if(!Fr.depth){const Qr=this.sliceSerialize(yr).length;Fr.depth=Qr}}function yn(){this.data.setextHeadingSlurpLineEnding=!0}function gn(yr){const Fr=this.stack[this.stack.length-1];Fr.depth=this.sliceSerialize(yr).codePointAt(0)===61?1:2}function mn(){this.data.setextHeadingSlurpLineEnding=void 0}function dn(yr){const Qr=this.stack[this.stack.length-1].children;let Kr=Qr[Qr.length-1];(!Kr||Kr.type!=="text")&&(Kr=Hi(),Kr.position={start:point(yr.start),end:void 0},Qr.push(Kr)),this.stack.push(Kr)}function vn(yr){const Fr=this.stack.pop();Fr.value+=this.sliceSerialize(yr),Fr.position.end=point(yr.end)}function bn(yr){const Fr=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Qr=Fr.children[Fr.children.length-1];Qr.position.end=point(yr.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Fr.type)&&(dn.call(this,yr),vn.call(this,yr))}function Tn(){this.data.atHardBreak=!0}function En(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.value=yr}function In(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.value=yr}function Nn(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.value=yr}function On(){const yr=this.stack[this.stack.length-1];if(this.data.inReference){const Fr=this.data.referenceType||"shortcut";yr.type+="Reference",yr.referenceType=Fr,delete yr.url,delete yr.title}else delete yr.identifier,delete yr.label;this.data.referenceType=void 0}function Fn(){const yr=this.stack[this.stack.length-1];if(this.data.inReference){const Fr=this.data.referenceType||"shortcut";yr.type+="Reference",yr.referenceType=Fr,delete yr.url,delete yr.title}else delete yr.identifier,delete yr.label;this.data.referenceType=void 0}function $n(yr){const Fr=this.sliceSerialize(yr),Qr=this.stack[this.stack.length-2];Qr.label=decodeString(Fr),Qr.identifier=normalizeIdentifier(Fr).toLowerCase()}function Hn(){const yr=this.stack[this.stack.length-1],Fr=this.resume(),Qr=this.stack[this.stack.length-1];if(this.data.inReference=!0,Qr.type==="link"){const Kr=yr.children;Qr.children=Kr}else Qr.alt=Fr}function Dn(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.url=yr}function Un(){const yr=this.resume(),Fr=this.stack[this.stack.length-1];Fr.title=yr}function Cn(){this.data.inReference=void 0}function kn(){this.data.referenceType="collapsed"}function Yn(yr){const Fr=this.resume(),Qr=this.stack[this.stack.length-1];Qr.label=Fr,Qr.identifier=normalizeIdentifier(this.sliceSerialize(yr)).toLowerCase(),this.data.referenceType="full"}function Jn(yr){this.data.characterReferenceType=yr.type}function sr(yr){const Fr=this.sliceSerialize(yr),Qr=this.data.characterReferenceType;let Kr;Qr?(Kr=decodeNumericCharacterReference(Fr,Qr==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Kr=decodeNamedCharacterReference(Fr);const si=this.stack[this.stack.length-1];si.value+=Kr}function lr(yr){const Fr=this.stack.pop();Fr.position.end=point(yr.end)}function mr(yr){vn.call(this,yr);const Fr=this.stack[this.stack.length-1];Fr.url=this.sliceSerialize(yr)}function gr(yr){vn.call(this,yr);const Fr=this.stack[this.stack.length-1];Fr.url="mailto:"+this.sliceSerialize(yr)}function Er(){return{type:"blockquote",children:[]}}function $r(){return{type:"code",lang:null,meta:null,value:""}}function Yr(){return{type:"inlineCode",value:""}}function Gr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Tr(){return{type:"emphasis",children:[]}}function rr(){return{type:"heading",depth:0,children:[]}}function Ni(){return{type:"break"}}function Ai(){return{type:"html",value:""}}function bi(){return{type:"image",title:null,url:"",alt:null}}function Wr(){return{type:"link",title:null,url:"",children:[]}}function hi(yr){return{type:"list",ordered:yr.type==="listOrdered",start:null,spread:yr._spread,children:[]}}function ei(yr){return{type:"listItem",spread:yr._spread,checked:null,children:[]}}function gi(){return{type:"paragraph",children:[]}}function mi(){return{type:"strong",children:[]}}function Hi(){return{type:"text",value:""}}function oi(){return{type:"thematicBreak"}}}function point(n){return{line:n.line,column:n.column,offset:n.offset}}function configure(n,e){let t=-1;for(;++t<e.length;){const Te=e[t];Array.isArray(Te)?configure(n,Te):extension(n,Te)}}function extension(n,e){let t;for(t in e)if(own$2.call(e,t))switch(t){case"canContainEols":{const Te=e[t];Te&&n[t].push(...Te);break}case"transforms":{const Te=e[t];Te&&n[t].push(...Te);break}case"enter":case"exit":{const Te=e[t];Te&&Object.assign(n[t],Te);break}}}function defaultOnError(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+stringifyPosition({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(n){const e=this;e.parser=t;function t(Te){return fromMarkdown(Te,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function hardBreak(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function code(n,e){const t=e.value?e.value+`
`:"",Te={};e.lang&&(Te.className=["language-"+e.lang]);let Ee={type:"element",tagName:"code",properties:Te,children:[{type:"text",value:t}]};return e.meta&&(Ee.data={meta:e.meta}),n.patch(e,Ee),Ee=n.applyData(e,Ee),Ee={type:"element",tagName:"pre",properties:{},children:[Ee]},n.patch(e,Ee),Ee}function strikethrough(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function emphasis(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function footnoteReference(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",Te=String(e.identifier).toUpperCase(),Ee=normalizeUri(Te.toLowerCase()),Re=n.footnoteOrder.indexOf(Te);let Ce,De=n.footnoteCounts.get(Te);De===void 0?(De=0,n.footnoteOrder.push(Te),Ce=n.footnoteOrder.length):Ce=Re+1,De+=1,n.footnoteCounts.set(Te,De);const $e={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+Ee,id:t+"fnref-"+Ee+(De>1?"-"+De:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(Ce)}]};n.patch(e,$e);const Ve={type:"element",tagName:"sup",properties:{},children:[$e]};return n.patch(e,Ve),n.applyData(e,Ve)}function heading(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function html(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function revert(n,e){const t=e.referenceType;let Te="]";if(t==="collapsed"?Te+="[]":t==="full"&&(Te+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+Te}];const Ee=n.all(e),Re=Ee[0];Re&&Re.type==="text"?Re.value="["+Re.value:Ee.unshift({type:"text",value:"["});const Ce=Ee[Ee.length-1];return Ce&&Ce.type==="text"?Ce.value+=Te:Ee.push({type:"text",value:Te}),Ee}function imageReference(n,e){const t=String(e.identifier).toUpperCase(),Te=n.definitionById.get(t);if(!Te)return revert(n,e);const Ee={src:normalizeUri(Te.url||""),alt:e.alt};Te.title!==null&&Te.title!==void 0&&(Ee.title=Te.title);const Re={type:"element",tagName:"img",properties:Ee,children:[]};return n.patch(e,Re),n.applyData(e,Re)}function image(n,e){const t={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const Te={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,Te),n.applyData(e,Te)}function inlineCode(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const Te={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,Te),n.applyData(e,Te)}function linkReference(n,e){const t=String(e.identifier).toUpperCase(),Te=n.definitionById.get(t);if(!Te)return revert(n,e);const Ee={href:normalizeUri(Te.url||"")};Te.title!==null&&Te.title!==void 0&&(Ee.title=Te.title);const Re={type:"element",tagName:"a",properties:Ee,children:n.all(e)};return n.patch(e,Re),n.applyData(e,Re)}function link(n,e){const t={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const Te={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,Te),n.applyData(e,Te)}function listItem(n,e,t){const Te=n.all(e),Ee=t?listLoose(t):listItemLoose(e),Re={},Ce=[];if(typeof e.checked=="boolean"){const Be=Te[0];let Me;Be&&Be.type==="element"&&Be.tagName==="p"?Me=Be:(Me={type:"element",tagName:"p",properties:{},children:[]},Te.unshift(Me)),Me.children.length>0&&Me.children.unshift({type:"text",value:" "}),Me.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),Re.className=["task-list-item"]}let De=-1;for(;++De<Te.length;){const Be=Te[De];(Ee||De!==0||Be.type!=="element"||Be.tagName!=="p")&&Ce.push({type:"text",value:`
`}),Be.type==="element"&&Be.tagName==="p"&&!Ee?Ce.push(...Be.children):Ce.push(Be)}const $e=Te[Te.length-1];$e&&(Ee||$e.type!=="element"||$e.tagName!=="p")&&Ce.push({type:"text",value:`
`});const Ve={type:"element",tagName:"li",properties:Re,children:Ce};return n.patch(e,Ve),n.applyData(e,Ve)}function listLoose(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let Te=-1;for(;!e&&++Te<t.length;)e=listItemLoose(t[Te])}return e}function listItemLoose(n){const e=n.spread;return e??n.children.length>1}function list(n,e){const t={},Te=n.all(e);let Ee=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++Ee<Te.length;){const Ce=Te[Ee];if(Ce.type==="element"&&Ce.tagName==="li"&&Ce.properties&&Array.isArray(Ce.properties.className)&&Ce.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const Re={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(Te,!0)};return n.patch(e,Re),n.applyData(e,Re)}function paragraph(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function root(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function strong(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function table(n,e){const t=n.all(e),Te=t.shift(),Ee=[];if(Te){const Ce={type:"element",tagName:"thead",properties:{},children:n.wrap([Te],!0)};n.patch(e.children[0],Ce),Ee.push(Ce)}if(t.length>0){const Ce={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},De=pointStart(e.children[1]),$e=pointEnd(e.children[e.children.length-1]);De&&$e&&(Ce.position={start:De,end:$e}),Ee.push(Ce)}const Re={type:"element",tagName:"table",properties:{},children:n.wrap(Ee,!0)};return n.patch(e,Re),n.applyData(e,Re)}function tableRow(n,e,t){const Te=t?t.children:void 0,Re=(Te?Te.indexOf(e):1)===0?"th":"td",Ce=t&&t.type==="table"?t.align:void 0,De=Ce?Ce.length:e.children.length;let $e=-1;const Ve=[];for(;++$e<De;){const Me=e.children[$e],Oe={},Ue=Ce?Ce[$e]:void 0;Ue&&(Oe.align=Ue);let ze={type:"element",tagName:Re,properties:Oe,children:[]};Me&&(ze.children=n.all(Me),n.patch(Me,ze),ze=n.applyData(Me,ze)),Ve.push(ze)}const Be={type:"element",tagName:"tr",properties:{},children:n.wrap(Ve,!0)};return n.patch(e,Be),n.applyData(e,Be)}function tableCell(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const tab=9,space=32;function trimLines(n){const e=String(n),t=/\r?\n|\r/g;let Te=t.exec(e),Ee=0;const Re=[];for(;Te;)Re.push(trimLine(e.slice(Ee,Te.index),Ee>0,!0),Te[0]),Ee=Te.index+Te[0].length,Te=t.exec(e);return Re.push(trimLine(e.slice(Ee),Ee>0,!1)),Re.join("")}function trimLine(n,e,t){let Te=0,Ee=n.length;if(e){let Re=n.codePointAt(Te);for(;Re===tab||Re===space;)Te++,Re=n.codePointAt(Te)}if(t){let Re=n.codePointAt(Ee-1);for(;Re===tab||Re===space;)Ee--,Re=n.codePointAt(Ee-1)}return Ee>Te?n.slice(Te,Ee):""}function text(n,e){const t={type:"text",value:trimLines(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function thematicBreak(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root,strong,table,tableCell,tableRow,text,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env$3=typeof self=="object"?self:globalThis,deserializer=(n,e)=>{const t=(Ee,Re)=>(n.set(Re,Ee),Ee),Te=Ee=>{if(n.has(Ee))return n.get(Ee);const[Re,Ce]=e[Ee];switch(Re){case PRIMITIVE:case VOID:return t(Ce,Ee);case ARRAY:{const De=t([],Ee);for(const $e of Ce)De.push(Te($e));return De}case OBJECT:{const De=t({},Ee);for(const[$e,Ve]of Ce)De[Te($e)]=Te(Ve);return De}case DATE:return t(new Date(Ce),Ee);case REGEXP:{const{source:De,flags:$e}=Ce;return t(new RegExp(De,$e),Ee)}case MAP:{const De=t(new Map,Ee);for(const[$e,Ve]of Ce)De.set(Te($e),Te(Ve));return De}case SET:{const De=t(new Set,Ee);for(const $e of Ce)De.add(Te($e));return De}case ERROR:{const{name:De,message:$e}=Ce;return t(new env$3[De]($e),Ee)}case BIGINT:return t(BigInt(Ce),Ee);case"BigInt":return t(Object(BigInt(Ce)),Ee);case"ArrayBuffer":return t(new Uint8Array(Ce).buffer,Ce);case"DataView":{const{buffer:De}=new Uint8Array(Ce);return t(new DataView(De),Ce)}}return t(new env$3[Re](Ce),Ee)};return Te},deserialize=n=>deserializer(new Map,n)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=n=>{const e=typeof n;if(e!=="object"||!n)return[PRIMITIVE,e];const t=toString.call(n).slice(8,-1);switch(t){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,t]}return t.includes("Array")?[ARRAY,t]:t.includes("Error")?[ERROR,t]:[OBJECT,t]},shouldSkip=([n,e])=>n===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(n,e,t,Te)=>{const Ee=(Ce,De)=>{const $e=Te.push(Ce)-1;return t.set(De,$e),$e},Re=Ce=>{if(t.has(Ce))return t.get(Ce);let[De,$e]=typeOf(Ce);switch(De){case PRIMITIVE:{let Be=Ce;switch($e){case"bigint":De=BIGINT,Be=Ce.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+$e);Be=null;break;case"undefined":return Ee([VOID],Ce)}return Ee([De,Be],Ce)}case ARRAY:{if($e){let Oe=Ce;return $e==="DataView"?Oe=new Uint8Array(Ce.buffer):$e==="ArrayBuffer"&&(Oe=new Uint8Array(Ce)),Ee([$e,[...Oe]],Ce)}const Be=[],Me=Ee([De,Be],Ce);for(const Oe of Ce)Be.push(Re(Oe));return Me}case OBJECT:{if($e)switch($e){case"BigInt":return Ee([$e,Ce.toString()],Ce);case"Boolean":case"Number":case"String":return Ee([$e,Ce.valueOf()],Ce)}if(e&&"toJSON"in Ce)return Re(Ce.toJSON());const Be=[],Me=Ee([De,Be],Ce);for(const Oe of keys(Ce))(n||!shouldSkip(typeOf(Ce[Oe])))&&Be.push([Re(Oe),Re(Ce[Oe])]);return Me}case DATE:return Ee([De,Ce.toISOString()],Ce);case REGEXP:{const{source:Be,flags:Me}=Ce;return Ee([De,{source:Be,flags:Me}],Ce)}case MAP:{const Be=[],Me=Ee([De,Be],Ce);for(const[Oe,Ue]of Ce)(n||!(shouldSkip(typeOf(Oe))||shouldSkip(typeOf(Ue))))&&Be.push([Re(Oe),Re(Ue)]);return Me}case SET:{const Be=[],Me=Ee([De,Be],Ce);for(const Oe of Ce)(n||!shouldSkip(typeOf(Oe)))&&Be.push(Re(Oe));return Me}}const{message:Ve}=Ce;return Ee([De,{name:$e,message:Ve}],Ce)};return Re},serialize=(n,{json:e,lossy:t}={})=>{const Te=[];return serializer(!(e||t),!!e,new Map,Te)(n),Te},structuredClone$1=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize(n,e)):structuredClone(n):(n,e)=>deserialize(serialize(n,e));function defaultFootnoteBackContent(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function defaultFootnoteBackLabel(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function footer(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||defaultFootnoteBackContent,Te=n.options.footnoteBackLabel||defaultFootnoteBackLabel,Ee=n.options.footnoteLabel||"Footnotes",Re=n.options.footnoteLabelTagName||"h2",Ce=n.options.footnoteLabelProperties||{className:["sr-only"]},De=[];let $e=-1;for(;++$e<n.footnoteOrder.length;){const Ve=n.footnoteById.get(n.footnoteOrder[$e]);if(!Ve)continue;const Be=n.all(Ve),Me=String(Ve.identifier).toUpperCase(),Oe=normalizeUri(Me.toLowerCase());let Ue=0;const ze=[],He=n.footnoteCounts.get(Me);for(;He!==void 0&&++Ue<=He;){ze.length>0&&ze.push({type:"text",value:" "});let Xe=typeof t=="string"?t:t($e,Ue);typeof Xe=="string"&&(Xe={type:"text",value:Xe}),ze.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+Oe+(Ue>1?"-"+Ue:""),dataFootnoteBackref:"",ariaLabel:typeof Te=="string"?Te:Te($e,Ue),className:["data-footnote-backref"]},children:Array.isArray(Xe)?Xe:[Xe]})}const Ge=Be[Be.length-1];if(Ge&&Ge.type==="element"&&Ge.tagName==="p"){const Xe=Ge.children[Ge.children.length-1];Xe&&Xe.type==="text"?Xe.value+=" ":Ge.children.push({type:"text",value:" "}),Ge.children.push(...ze)}else Be.push(...ze);const Ke={type:"element",tagName:"li",properties:{id:e+"fn-"+Oe},children:n.wrap(Be,!0)};n.patch(Ve,Ke),De.push(Ke)}if(De.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:Re,properties:{...structuredClone$1(Ce),id:"footnote-label"},children:[{type:"text",value:Ee}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(De,!0)},{type:"text",value:`
`}]}}const convert=function(n){if(n==null)return ok;if(typeof n=="function")return castFactory(n);if(typeof n=="object")return Array.isArray(n)?anyFactory(n):propsFactory(n);if(typeof n=="string")return typeFactory(n);throw new Error("Expected function, string, or object as test")};function anyFactory(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=convert(n[t]);return castFactory(Te);function Te(...Ee){let Re=-1;for(;++Re<e.length;)if(e[Re].apply(this,Ee))return!0;return!1}}function propsFactory(n){const e=n;return castFactory(t);function t(Te){const Ee=Te;let Re;for(Re in n)if(Ee[Re]!==e[Re])return!1;return!0}}function typeFactory(n){return castFactory(e);function e(t){return t&&t.type===n}}function castFactory(n){return e;function e(t,Te,Ee){return!!(looksLikeANode(t)&&n.call(this,t,typeof Te=="number"?Te:void 0,Ee||void 0))}}function ok(){return!0}function looksLikeANode(n){return n!==null&&typeof n=="object"&&"type"in n}function color(n){return n}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(n,e,t,Te){let Ee;typeof e=="function"&&typeof t!="function"?(Te=t,t=e):Ee=e;const Re=convert(Ee),Ce=Te?-1:1;De(n,void 0,[])();function De($e,Ve,Be){const Me=$e&&typeof $e=="object"?$e:{};if(typeof Me.type=="string"){const Ue=typeof Me.tagName=="string"?Me.tagName:typeof Me.name=="string"?Me.name:void 0;Object.defineProperty(Oe,"name",{value:"node ("+($e.type+(Ue?"<"+Ue+">":""))+")"})}return Oe;function Oe(){let Ue=empty,ze,He,Ge;if((!e||Re($e,Ve,Be[Be.length-1]||void 0))&&(Ue=toResult(t($e,Be)),Ue[0]===EXIT))return Ue;if("children"in $e&&$e.children){const Ke=$e;if(Ke.children&&Ue[0]!==SKIP)for(He=(Te?Ke.children.length:-1)+Ce,Ge=Be.concat(Ke);He>-1&&He<Ke.children.length;){const Xe=Ke.children[He];if(ze=De(Xe,He,Ge)(),ze[0]===EXIT)return ze;He=typeof ze[1]=="number"?ze[1]:He+Ce}}return Ue}}}function toResult(n){return Array.isArray(n)?n:typeof n=="number"?[CONTINUE,n]:n==null?empty:[n]}function visit(n,e,t,Te){let Ee,Re,Ce;typeof e=="function"&&typeof t!="function"?(Re=void 0,Ce=e,Ee=t):(Re=e,Ce=t,Ee=Te),visitParents(n,Re,De,Ee);function De($e,Ve){const Be=Ve[Ve.length-1],Me=Be?Be.children.indexOf($e):void 0;return Ce($e,Me,Be)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState(n,e){const t=e||emptyOptions,Te=new Map,Ee=new Map,Re=new Map,Ce={...handlers,...t.handlers},De={all:Ve,applyData,definitionById:Te,footnoteById:Ee,footnoteCounts:Re,footnoteOrder:[],handlers:Ce,one:$e,options:t,patch,wrap:wrap$1};return visit(n,function(Be){if(Be.type==="definition"||Be.type==="footnoteDefinition"){const Me=Be.type==="definition"?Te:Ee,Oe=String(Be.identifier).toUpperCase();Me.has(Oe)||Me.set(Oe,Be)}}),De;function $e(Be,Me){const Oe=Be.type,Ue=De.handlers[Oe];if(own$1.call(De.handlers,Oe)&&Ue)return Ue(De,Be,Me);if(De.options.passThrough&&De.options.passThrough.includes(Oe)){if("children"in Be){const{children:He,...Ge}=Be,Ke=structuredClone$1(Ge);return Ke.children=De.all(Be),Ke}return structuredClone$1(Be)}return(De.options.unknownHandler||defaultUnknownHandler)(De,Be,Me)}function Ve(Be){const Me=[];if("children"in Be){const Oe=Be.children;let Ue=-1;for(;++Ue<Oe.length;){const ze=De.one(Oe[Ue],Be);if(ze){if(Ue&&Oe[Ue-1].type==="break"&&(!Array.isArray(ze)&&ze.type==="text"&&(ze.value=trimMarkdownSpaceStart(ze.value)),!Array.isArray(ze)&&ze.type==="element")){const He=ze.children[0];He&&He.type==="text"&&(He.value=trimMarkdownSpaceStart(He.value))}Array.isArray(ze)?Me.push(...ze):Me.push(ze)}}}return Me}}function patch(n,e){n.position&&(e.position=position$1(n))}function applyData(n,e){let t=e;if(n&&n.data){const Te=n.data.hName,Ee=n.data.hChildren,Re=n.data.hProperties;if(typeof Te=="string")if(t.type==="element")t.tagName=Te;else{const Ce="children"in t?t.children:[t];t={type:"element",tagName:Te,properties:{},children:Ce}}t.type==="element"&&Re&&Object.assign(t.properties,structuredClone$1(Re)),"children"in t&&t.children&&Ee!==null&&Ee!==void 0&&(t.children=Ee)}return t}function defaultUnknownHandler(n,e){const t=e.data||{},Te="value"in e&&!(own$1.call(t,"hProperties")||own$1.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,Te),n.applyData(e,Te)}function wrap$1(n,e){const t=[];let Te=-1;for(e&&t.push({type:"text",value:`
`});++Te<n.length;)Te&&t.push({type:"text",value:`
`}),t.push(n[Te]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function trimMarkdownSpaceStart(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function toHast(n,e){const t=createState(n,e),Te=t.one(n,void 0),Ee=footer(t),Re=Array.isArray(Te)?{type:"root",children:Te}:Te||{type:"root",children:[]};return Ee&&Re.children.push({type:"text",value:`
`},Ee),Re}function remarkRehype(n,e){return n&&"run"in n?async function(t,Te){const Ee=toHast(t,{file:Te,...e});await n.run(Ee,Te)}:function(t,Te){return toHast(t,{file:Te,...n||e})}}function bail(n){if(n)throw n}var extend$1,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend$1;hasRequiredExtend=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,Ee=function(Ve){return typeof Array.isArray=="function"?Array.isArray(Ve):e.call(Ve)==="[object Array]"},Re=function(Ve){if(!Ve||e.call(Ve)!=="[object Object]")return!1;var Be=n.call(Ve,"constructor"),Me=Ve.constructor&&Ve.constructor.prototype&&n.call(Ve.constructor.prototype,"isPrototypeOf");if(Ve.constructor&&!Be&&!Me)return!1;var Oe;for(Oe in Ve);return typeof Oe>"u"||n.call(Ve,Oe)},Ce=function(Ve,Be){t&&Be.name==="__proto__"?t(Ve,Be.name,{enumerable:!0,configurable:!0,value:Be.newValue,writable:!0}):Ve[Be.name]=Be.newValue},De=function(Ve,Be){if(Be==="__proto__")if(n.call(Ve,Be)){if(Te)return Te(Ve,Be).value}else return;return Ve[Be]};return extend$1=function $e(){var Ve,Be,Me,Oe,Ue,ze,He=arguments[0],Ge=1,Ke=arguments.length,Xe=!1;for(typeof He=="boolean"&&(Xe=He,He=arguments[1]||{},Ge=2),(He==null||typeof He!="object"&&typeof He!="function")&&(He={});Ge<Ke;++Ge)if(Ve=arguments[Ge],Ve!=null)for(Be in Ve)Me=De(He,Be),Oe=De(Ve,Be),He!==Oe&&(Xe&&Oe&&(Re(Oe)||(Ue=Ee(Oe)))?(Ue?(Ue=!1,ze=Me&&Ee(Me)?Me:[]):ze=Me&&Re(Me)?Me:{},Ce(He,{name:Be,newValue:$e(Xe,ze,Oe)})):typeof Oe<"u"&&Ce(He,{name:Be,newValue:Oe}));return He},extend$1}var extendExports=requireExtend();const extend=getDefaultExportFromCjs(extendExports);function isPlainObject(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function trough(){const n=[],e={run:t,use:Te};return e;function t(...Ee){let Re=-1;const Ce=Ee.pop();if(typeof Ce!="function")throw new TypeError("Expected function as last argument, not "+Ce);De(null,...Ee);function De($e,...Ve){const Be=n[++Re];let Me=-1;if($e){Ce($e);return}for(;++Me<Ee.length;)(Ve[Me]===null||Ve[Me]===void 0)&&(Ve[Me]=Ee[Me]);Ee=Ve,Be?wrap(Be,De)(...Ve):Ce(null,...Ve)}}function Te(Ee){if(typeof Ee!="function")throw new TypeError("Expected `middelware` to be a function, not "+Ee);return n.push(Ee),e}}function wrap(n,e){let t;return Te;function Te(...Ce){const De=n.length>Ce.length;let $e;De&&Ce.push(Ee);try{$e=n.apply(this,Ce)}catch(Ve){const Be=Ve;if(De&&t)throw Be;return Ee(Be)}De||($e&&$e.then&&typeof $e.then=="function"?$e.then(Re,Ee):$e instanceof Error?Ee($e):Re($e))}function Ee(Ce,...De){t||(t=!0,e(Ce,...De))}function Re(Ce){Ee(null,Ce)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(n);let t=0,Te=-1,Ee=n.length,Re;if(e===void 0||e.length===0||e.length>n.length){for(;Ee--;)if(n.codePointAt(Ee)===47){if(Re){t=Ee+1;break}}else Te<0&&(Re=!0,Te=Ee+1);return Te<0?"":n.slice(t,Te)}if(e===n)return"";let Ce=-1,De=e.length-1;for(;Ee--;)if(n.codePointAt(Ee)===47){if(Re){t=Ee+1;break}}else Ce<0&&(Re=!0,Ce=Ee+1),De>-1&&(n.codePointAt(Ee)===e.codePointAt(De--)?De<0&&(Te=Ee):(De=-1,Te=Ce));return t===Te?Te=Ce:Te<0&&(Te=n.length),n.slice(t,Te)}function dirname(n){if(assertPath$1(n),n.length===0)return".";let e=-1,t=n.length,Te;for(;--t;)if(n.codePointAt(t)===47){if(Te){e=t;break}}else Te||(Te=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function extname(n){assertPath$1(n);let e=n.length,t=-1,Te=0,Ee=-1,Re=0,Ce;for(;e--;){const De=n.codePointAt(e);if(De===47){if(Ce){Te=e+1;break}continue}t<0&&(Ce=!0,t=e+1),De===46?Ee<0?Ee=e:Re!==1&&(Re=1):Ee>-1&&(Re=-1)}return Ee<0||t<0||Re===0||Re===1&&Ee===t-1&&Ee===Te+1?"":n.slice(Ee,t)}function join(...n){let e=-1,t;for(;++e<n.length;)assertPath$1(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":normalize(t)}function normalize(n){assertPath$1(n);const e=n.codePointAt(0)===47;let t=normalizeString(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function normalizeString(n,e){let t="",Te=0,Ee=-1,Re=0,Ce=-1,De,$e;for(;++Ce<=n.length;){if(Ce<n.length)De=n.codePointAt(Ce);else{if(De===47)break;De=47}if(De===47){if(!(Ee===Ce-1||Re===1))if(Ee!==Ce-1&&Re===2){if(t.length<2||Te!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if($e=t.lastIndexOf("/"),$e!==t.length-1){$e<0?(t="",Te=0):(t=t.slice(0,$e),Te=t.length-1-t.lastIndexOf("/")),Ee=Ce,Re=0;continue}}else if(t.length>0){t="",Te=0,Ee=Ce,Re=0;continue}}e&&(t=t.length>0?t+"/..":"..",Te=2)}else t.length>0?t+="/"+n.slice(Ee+1,Ce):t=n.slice(Ee+1,Ce),Te=Ce-Ee-1;Ee=Ce,Re=0}else De===46&&Re>-1?Re++:Re=-1}return t}function assertPath$1(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const minproc={cwd};function cwd(){return"/"}function isUrl(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function urlToPath(n){if(typeof n=="string")n=new URL(n);else if(!isUrl(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(n)}function getPathFromURLPosix(n){if(n.hostname!==""){const Te=new TypeError('File URL host must be "localhost" or empty on darwin');throw Te.code="ERR_INVALID_FILE_URL_HOST",Te}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const Te=e.codePointAt(t+2);if(Te===70||Te===102){const Ee=new TypeError("File URL path must not include encoded / characters");throw Ee.code="ERR_INVALID_FILE_URL_PATH",Ee}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let t;e?isUrl(e)?t={path:e}:typeof e=="string"||isUint8Array$1(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let Te=-1;for(;++Te<order.length;){const Re=order[Te];Re in t&&t[Re]!==void 0&&t[Re]!==null&&(this[Re]=Re==="history"?[...t[Re]]:t[Re])}let Ee;for(Ee in t)order.includes(Ee)||(this[Ee]=t[Ee])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,t,Te){const Ee=this.message(e,t,Te);throw Ee.fatal=!0,Ee}info(e,t,Te){const Ee=this.message(e,t,Te);return Ee.fatal=void 0,Ee}message(e,t,Te){const Ee=new VFileMessage(e,t,Te);return this.path&&(Ee.name=this.path+":"+Ee.name,Ee.file=this.path),Ee.fatal=!1,this.messages.push(Ee),Ee}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(n,e){if(n&&n.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function assertPath(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const CallableInstance=function(n){const Te=this.constructor.prototype,Ee=Te[n],Re=function(){return Ee.apply(Re,arguments)};return Object.setPrototypeOf(Re,Te),Re},own={}.hasOwnProperty;let Processor$1=class Nf extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Nf;let t=-1;for(;++t<this.attachers.length;){const Te=this.attachers[t];e.use(...Te)}return e.data(extend(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=t,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...Te]=this.attachers[this.freezeIndex];if(Te[0]===!1)continue;Te[0]===!0&&(Te[0]=void 0);const Ee=t.call(e,...Te);typeof Ee=="function"&&this.transformers.use(Ee)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=vfile(e),Te=this.parser||this.Parser;return assertParser("parse",Te),Te(String(t),t)}process(e,t){const Te=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),t?Ee(void 0,t):new Promise(Ee);function Ee(Re,Ce){const De=vfile(e),$e=Te.parse(De);Te.run($e,De,function(Be,Me,Oe){if(Be||!Me||!Oe)return Ve(Be);const Ue=Me,ze=Te.stringify(Ue,Oe);looksLikeAValue(ze)?Oe.value=ze:Oe.result=ze,Ve(Be,Oe)});function Ve(Be,Me){Be||!Me?Ce(Be):Re?Re(Me):t(void 0,Me)}}}processSync(e){let t=!1,Te;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,Ee),assertDone("processSync","process",t),Te;function Ee(Re,Ce){t=!0,bail(Re),Te=Ce}}run(e,t,Te){assertNode(e),this.freeze();const Ee=this.transformers;return!Te&&typeof t=="function"&&(Te=t,t=void 0),Te?Re(void 0,Te):new Promise(Re);function Re(Ce,De){const $e=vfile(t);Ee.run(e,$e,Ve);function Ve(Be,Me,Oe){const Ue=Me||e;Be?De(Be):Ce?Ce(Ue):Te(void 0,Ue,Oe)}}}runSync(e,t){let Te=!1,Ee;return this.run(e,t,Re),assertDone("runSync","run",Te),Ee;function Re(Ce,De){bail(Ce),Ee=De,Te=!0}}stringify(e,t){this.freeze();const Te=vfile(t),Ee=this.compiler||this.Compiler;return assertCompiler("stringify",Ee),assertNode(e),Ee(e,Te)}use(e,...t){const Te=this.attachers,Ee=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")$e(e,t);else if(typeof e=="object")Array.isArray(e)?De(e):Ce(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function Re(Ve){if(typeof Ve=="function")$e(Ve,[]);else if(typeof Ve=="object")if(Array.isArray(Ve)){const[Be,...Me]=Ve;$e(Be,Me)}else Ce(Ve);else throw new TypeError("Expected usable value, not `"+Ve+"`")}function Ce(Ve){if(!("plugins"in Ve)&&!("settings"in Ve))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");De(Ve.plugins),Ve.settings&&(Ee.settings=extend(!0,Ee.settings,Ve.settings))}function De(Ve){let Be=-1;if(Ve!=null)if(Array.isArray(Ve))for(;++Be<Ve.length;){const Me=Ve[Be];Re(Me)}else throw new TypeError("Expected a list of plugins, not `"+Ve+"`")}function $e(Ve,Be){let Me=-1,Oe=-1;for(;++Me<Te.length;)if(Te[Me][0]===Ve){Oe=Me;break}if(Oe===-1)Te.push([Ve,...Be]);else if(Be.length>0){let[Ue,...ze]=Be;const He=Te[Oe][1];isPlainObject(He)&&isPlainObject(Ue)&&(Ue=extend(!0,He,Ue)),Te[Oe]=[Ve,Ue,...ze]}}}};const unified=new Processor$1().freeze();function assertParser(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function assertCompiler(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function assertUnfrozen(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(n){if(!isPlainObject(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function assertDone(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function vfile(n){return looksLikeAVFile(n)?n:new VFile(n)}function looksLikeAVFile(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function looksLikeAValue(n){return typeof n=="string"||isUint8Array(n)}function isUint8Array(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(n){const e=createProcessor(n),t=createFile(n);return post(e.runSync(e.parse(t),t),n)}function createProcessor(n){const e=n.rehypePlugins||emptyPlugins,t=n.remarkPlugins||emptyPlugins,Te=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(t).use(remarkRehype,Te).use(e)}function createFile(n){const e=n.children||"",t=new VFile;return typeof e=="string"&&(t.value=e),t}function post(n,e){const t=e.allowedElements,Te=e.allowElement,Ee=e.components,Re=e.disallowedElements,Ce=e.skipHtml,De=e.unwrapDisallowed,$e=e.urlTransform||defaultUrlTransform;for(const Be of deprecations)Object.hasOwn(e,Be.from)&&(""+Be.from+(Be.to?"use `"+Be.to+"` instead":"remove it")+changelog+Be.id,void 0);return visit(n,Ve),toJsxRuntime(n,{Fragment:jsxRuntimeExports.Fragment,components:Ee,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function Ve(Be,Me,Oe){if(Be.type==="raw"&&Oe&&typeof Me=="number")return Ce?Oe.children.splice(Me,1):Oe.children[Me]={type:"text",value:Be.value},Me;if(Be.type==="element"){let Ue;for(Ue in urlAttributes)if(Object.hasOwn(urlAttributes,Ue)&&Object.hasOwn(Be.properties,Ue)){const ze=Be.properties[Ue],He=urlAttributes[Ue];(He===null||He.includes(Be.tagName))&&(Be.properties[Ue]=$e(String(ze||""),Ue,Be))}}if(Be.type==="element"){let Ue=t?!t.includes(Be.tagName):Re?Re.includes(Be.tagName):!1;if(!Ue&&Te&&typeof Me=="number"&&(Ue=!Te(Be,Me,Oe)),Ue&&Oe&&typeof Me=="number")return De&&Be.children?Oe.children.splice(Me,1,...Be.children):Oe.children.splice(Me,1),Me}}}function defaultUrlTransform(n){const e=n.indexOf(":"),t=n.indexOf("?"),Te=n.indexOf("#"),Ee=n.indexOf("/");return e===-1||Ee!==-1&&e>Ee||t!==-1&&e>t||Te!==-1&&e>Te||safeProtocol.test(n.slice(0,e))?n:""}const scholarshipsData=[{name:"National Means-Cum-Merit Scholarship (NMMS)",states:["All"],grades:["9","10"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:35e4,deadline:"2025-10-31",url:"https://scholarships.gov.in"},{name:"Inspire Scholarship (DST)",states:["All"],grades:["12","College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:8e5,deadline:"2025-11-30",url:"https://online-inspire.gov.in"},{name:"Kishore Vaigyanik Protsahan Yojana (KVPY)",states:["All"],grades:["11","12","College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:1e6,deadline:"2025-08-15",url:"https://kvpy.iisc.ac.in"},{name:"Maulana Azad National Fellowship (MANF)",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"Minority",income_limit:6e5,deadline:"2025-09-15",url:"https://minorityaffairs.gov.in"},{name:"ONGC Scholarship for SC/ST",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"SC",income_limit:45e4,deadline:"2025-12-01",url:"https://ongcindia.com"},{name:"Buddy4Study - Sardar Patel Scholarship",states:["All"],grades:["11","12"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:6e5,deadline:"2025-09-20",url:"https://www.buddy4study.com"},{name:"Ishan Uday (North Eastern Region)",states:["Assam","Meghalaya","Manipur","Tripura","Nagaland","Arunachal Pradesh","Mizoram","Sikkim"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:45e4,deadline:"2025-10-10",url:"https://scholarships.gov.in"},{name:"Prime Ministers Scholarship Scheme (PMSS)",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:6e5,deadline:"2025-08-30",url:"https://ksb.gov.in"},{name:"NSP Post Matric Scholarship (SC Students)",states:["All"],grades:["11","12","College"],board:["CBSE","ICSE","State Board"],category:"SC",income_limit:25e4,deadline:"2025-10-15",url:"https://scholarships.gov.in"},{name:"NTSE (National Talent Search Exam)",states:["All"],grades:["10"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:1e6,deadline:"2025-07-30",url:"https://ncert.nic.in"}];function ScholarshipScout(){const[n,e]=reactExports.useState({state:"",board:"",grade:"",category:"",income:"",interests:"",achievements:""}),[t,Te]=reactExports.useState(0),[Ee,Re]=reactExports.useState(!1),[Ce,De]=reactExports.useState([]),$e=reactExports.useRef(null),Ve=[{label:"State",key:"state",type:"select",options:["West Bengal","Bihar","Maharashtra","Tamil Nadu","All"]},{label:"Board",key:"board",type:"select",options:["CBSE","ICSE","State Board"]},{label:"Grade",key:"grade",type:"select",options:["9","10","11","12","College"]},{label:"Category",key:"category",type:"select",options:["General","SC","ST","OBC","EWS"]},{label:"Family Income ()",key:"income",type:"number"},{label:"Interests",key:"interests",type:"text",placeholder:"e.g. Science, Arts"},{label:"Achievements",key:"achievements",type:"text",placeholder:"Optional, e.g. Olympiad winner"}],Be=ze=>{e(He=>({...He,[Ve[t].key]:ze.target.value}))},Me=ze=>{try{const He=new URL(ze);return["gov.in","edu.in","ac.in","org","com"].some(Ge=>He.hostname.endsWith(Ge))}catch{return!1}},Oe=async()=>{if(t<Ve.length-1){Te(t+1);return}Re(!0);const ze=scholarshipsData.filter(Ge=>(Ge.states.includes(n.state)||Ge.states.includes("All"))&&Ge.board.includes(n.board)&&Ge.grades.includes(n.grade)&&Number(n.income)<=Ge.income_limit&&(Ge.category==="All"||Ge.category===n.category)&&Me(Ge.url)),He=`
You are ScholarshipScout, an accurate scholarship advisor for Indian students.

Only recommend real, safe, working scholarships. Use only this list to recommend.
Avoid fake or sketchy URLs. Prioritize trusted sources (NSP, UGC, DST, Buddy4Study, KVPY, etc).

Scholarship Data:
${JSON.stringify(ze,null,2)}

Student Profile:
- State: ${n.state}
- Board: ${n.board}
- Grade: ${n.grade}
- Category: ${n.category}
- Family Income: ${n.income}
- Interests: ${n.interests}
- Achievements: ${n.achievements}

Respond with max 5 matches in this format:
1. **Scholarship Name**
Why it's a good match.
 [Apply here](link)
`.trim();try{const Xe=((await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-70b-8192",messages:[{role:"system",content:"You're ScholarshipScout, an AI expert for verified Indian scholarships."},{role:"user",content:He}],temperature:.7},{headers:{Authorization:"Bearer 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"}})).data.choices[0].message.content||"").split(/\n{2,}/).filter(Boolean);De(Xe)}catch(Ge){console.error("AI error, using fallback:",Ge),y$1.error("Failed to fetch scholarship recommendations. Showing fallback data.");const Ke=ze.map(Xe=>`**${Xe.name}**
Deadline: **${Xe.deadline}**
 [Apply here](${Xe.url})`);De(Ke)}finally{Re(!1),$e.current?.scrollIntoView({behavior:"smooth"})}},Ue=Ve[t];return jsxRuntimeExports.jsx("div",{className:"min-h-screen p-6 font-poppins text-gray-900 bg-yellow-50 dark:bg-gray-900 dark:text-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto bg-white/50 backdrop-blur-xl p-8 rounded-3xl border border-orange-200 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold text-center bg-gradient-to-r from-yellow-700 via-orange-500 to-red-500 bg-clip-text text-transparent mb-6 drop-shadow-md",children:" ScholarshipScout"}),Ce.length===0&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 animate-fade-in",children:[jsxRuntimeExports.jsx("label",{className:"block text-lg font-semibold text-orange-800",children:Ue.label}),Ue.type==="select"?jsxRuntimeExports.jsxs("select",{value:n[Ue.key],onChange:Be,className:"w-full p-3 rounded-xl border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-orange-400",children:[jsxRuntimeExports.jsxs("option",{value:"",children:["Select ",Ue.label]}),Ue.options.map(ze=>jsxRuntimeExports.jsx("option",{value:ze,children:ze},ze))]}):jsxRuntimeExports.jsx("input",{type:Ue.type,placeholder:Ue.placeholder||Ue.label,value:n[Ue.key],onChange:Be,className:"w-full p-3 rounded-xl border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-orange-400"}),jsxRuntimeExports.jsxs("button",{onClick:Oe,disabled:!n[Ue.key]||Ee,className:"mt-4 w-full bg-gradient-to-r from-yellow-600 via-orange-500 to-red-400 hover:scale-105 text-white py-3 rounded-full font-semibold flex justify-center items-center gap-2 shadow-md transition-all duration-300 disabled:opacity-50",children:[t<Ve.length-1?"Next":Ee?" Searching":" Find Scholarships",jsxRuntimeExports.jsx(CircleArrowRight,{size:20})]})]}),Ce.length>0&&jsxRuntimeExports.jsxs("div",{ref:$e,className:"mt-8 space-y-4 animate-fade-in",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-3",children:" Top Matches for You:"}),Ce.map((ze,He)=>jsxRuntimeExports.jsx("div",{className:"p-4 bg-yellow-100/80 dark:bg-gray-800/70 rounded-2xl border border-orange-200 dark:border-gray-700 backdrop-blur-md shadow-inner hover:scale-[1.02] transition-transform duration-300",children:jsxRuntimeExports.jsx(Markdown,{components:{p:({node:Ge,...Ke})=>jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-100",...Ke}),strong:({node:Ge,...Ke})=>jsxRuntimeExports.jsx("strong",{className:"text-orange-700 dark:text-orange-300 font-bold",...Ke}),a:({node:Ge,...Ke})=>jsxRuntimeExports.jsx("a",{className:"text-red-600 dark:text-red-400 underline hover:text-red-800 dark:hover:text-red-200 font-medium",target:"_blank",rel:"noopener noreferrer",...Ke})},children:ze})},He))]})]})})}function ChatInput({onSend:n,disabled:e}){const[t,Te]=reactExports.useState(""),[Ee,Re]=reactExports.useState(!1),Ce=reactExports.useRef(null),De=()=>{const Ve=t.trim();!Ve||e||(n?.(Ve),Te(""))},$e=Ve=>{(Ve.key==="Enter"||Ve.code==="Enter")&&!Ve.shiftKey&&!Ee&&(Ve.preventDefault(),De())};return reactExports.useEffect(()=>{const Ve=Ce.current;if(Ve){Ve.style.height="auto";const Be=Ve.scrollHeight;Ve.style.height=`${Math.min(Be,150)}px`}},[t]),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#0e0e1a] flex items-end gap-2 border-t border-gray-200 dark:border-white/10",children:[jsxRuntimeExports.jsx("textarea",{ref:Ce,value:t,onChange:Ve=>Te(Ve.target.value),onKeyDown:$e,onCompositionStart:()=>Re(!0),onCompositionEnd:()=>Re(!1),placeholder:"Paste your class notes or questions...",className:"flex-1 p-3 bg-white dark:bg-gray-800 rounded-lg resize-none text-gray-900 dark:text-white border border-gray-300 dark:border-white/10 outline-none",rows:1,disabled:e}),jsxRuntimeExports.jsx("button",{onClick:De,disabled:e||!t.trim(),className:"bg-purple-600 hover:bg-purple-700 p-3 rounded-lg text-white flex items-center justify-center h-12 w-12 disabled:opacity-50 disabled:cursor-not-allowed",children:jsxRuntimeExports.jsx(ArrowRight,{})})]})}function SmartNotes(){const[n,e]=reactExports.useState([{from:"bot",text:"Hi! Paste your class notes and Ill summarize and tag them for you."}]),[t,Te]=reactExports.useState(!1),Ee=reactExports.useRef(null);reactExports.useEffect(()=>{Ee.current?.scrollIntoView({behavior:"smooth"})},[n]);const Re=async Ce=>{if(!Ce.trim())return;Te(!0);const De={from:"user",text:Ce};e($e=>[...$e,De]),e($e=>[...$e,{from:"bot",text:"Thinking..."}]),setTimeout(()=>{const $e={from:"bot",text:` Summary:
- ${Ce.split(".").slice(0,3).map(Ve=>Ve.trim()).filter(Boolean).join(`
- `)}

 Tags: [Conceptual, Important, Notes]`};e(Ve=>[...Ve.slice(0,-1),$e]),Te(!1)},1e3)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col bg-white text-gray-900 dark:bg-[#0a0a14] dark:text-gray-100",children:[jsxRuntimeExports.jsx("header",{className:"p-4 bg-gray-100 dark:bg-[#12121c] text-center shadow-md text-xl font-bold text-purple-700 dark:text-purple-400",children:" Smart Notes AI"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[n.map((Ce,De)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`max-w-xl p-4 rounded-lg ${Ce.from==="user"?"ml-auto bg-purple-600 text-white":"bg-gray-100 text-gray-900 dark:bg-[#1a1a2e] dark:text-gray-200"}`,children:Ce.text.split(`
`).map(($e,Ve)=>jsxRuntimeExports.jsx("p",{children:$e},Ve))},De)),jsxRuntimeExports.jsx("div",{ref:Ee})]}),jsxRuntimeExports.jsx(ChatInput,{onSend:Re,disabled:t})]})}function dispatchCallback(n,e){n&&n(e)}function reverseDictionary(n){return Object.fromEntries(Object.entries(n).map(([e,t])=>[t,e]))}function escapeRegExp(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let n=function(...e){return n._call(...e)};return Object.setPrototypeOf(n,new.target.prototype)}_call(...n){throw Error("Must implement _call method in subclass")}};function isTypedArray(n){return n?.prototype?.__proto__?.constructor?.name==="TypedArray"}function isIntegralNumber(n){return Number.isInteger(n)||typeof n=="bigint"}function exists(n){return n!=null}function calculateDimensions(n){const e=[];let t=n;for(;Array.isArray(t);)e.push(t.length),t=t[0];return e}function pop(n,e,t=void 0){const Te=n[e];if(Te!==void 0)return delete n[e],Te;if(t===void 0)throw Error(`Key ${e} does not exist in object.`);return t}function mergeArrays(...n){return Array.prototype.concat.apply([],n)}function product(...n){return n.reduce((e,t)=>e.flatMap(Te=>t.map(Ee=>[Te,Ee])))}function calculateReflectOffset(n,e){return Math.abs((n+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(n,e,t)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const Te=backends[n];if(Te===void 0)backends[n]={backend:e,priority:t};else{if(Te.priority>t)return;if(Te.priority===t&&Te.backend!==e)throw new Error(`cannot register backend "${n}" using priority ${t}`)}if(t>=0){const Ee=backendsSortedByPriority.indexOf(n);Ee!==-1&&backendsSortedByPriority.splice(Ee,1);for(let Re=0;Re<backendsSortedByPriority.length;Re++)if(backends[backendsSortedByPriority[Re]].priority<=t){backendsSortedByPriority.splice(Re,0,n);return}backendsSortedByPriority.push(n)}return}throw new TypeError("not a valid backend")},resolveBackend=async n=>{const e=n.length===0?backendsSortedByPriority:n,t=[];for(const Te of e){const Ee=backends[Te];if(Ee){if(Ee.initialized)return Ee.backend;if(Ee.aborted)continue;const Re=!!Ee.initPromise;try{return Re||(Ee.initPromise=Ee.backend.init()),await Ee.initPromise,Ee.initialized=!0,Ee.backend}catch(Ce){Re||t.push({name:Te,err:Ce}),Ee.aborted=!0}finally{delete Ee.initPromise}}}throw new Error(`no available backend found. ERR: ${t.map(Te=>`[${Te.name}] ${Te.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=n=>{let e=1;for(let t=0;t<n.length;t++){const Te=n[t];if(typeof Te!="number"||!Number.isSafeInteger(Te))throw new TypeError(`dims[${t}] must be an integer, got: ${Te}`);if(Te<0)throw new RangeError(`dims[${t}] must be a non-negative integer, got: ${Te}`);e*=Te}return e};let Tensor$2=class sc{constructor(e,t,Te){let Ee,Re,Ce;if(typeof e=="string")if(Ee=e,Ce=Te,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");Re=t}else{const $e=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if($e===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t))Re=$e.from(t);else if(t instanceof $e)Re=t;else throw new TypeError(`A ${Ee} tensor's data must be type of ${$e}`)}else if(Ce=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const $e=typeof e[0];if($e==="string")Ee="string",Re=e;else if($e==="boolean")Ee="bool",Re=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${$e}.`)}else{const $e=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if($e===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);Ee=$e,Re=e}if(Ce===void 0)Ce=[Re.length];else if(!Array.isArray(Ce))throw new TypeError("A tensor's dims must be a number array");const De=calculateSize(Ce);if(De!==Re.length)throw new Error(`Tensor's size(${De}) does not match data length(${Re.length}).`);this.dims=Ce,this.type=Ee,this.data=Re,this.size=De}static bufferToTensor(e,t){if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");const{height:Te,width:Ee}=t,Re=t.norm;let Ce,De;Re===void 0||Re.mean===void 0?Ce=255:Ce=Re.mean,Re===void 0||Re.bias===void 0?De=0:De=Re.bias;const $e=t.bitmapFormat!==void 0?t.bitmapFormat:"RGBA",Ve=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",Be=Te*Ee,Me=Ve==="RGBA"?new Float32Array(Be*4):new Float32Array(Be*3);let Oe=4,Ue=0,ze=1,He=2,Ge=3,Ke=0,Xe=Be,Je=Be*2,un=-1;$e==="RGB"&&(Oe=3,Ue=0,ze=1,He=2,Ge=-1),Ve==="RGBA"?un=Be*3:Ve==="RBG"?(Ke=0,Je=Be,Xe=Be*2):Ve==="BGR"&&(Je=0,Xe=Be,Ke=Be*2);for(let yn=0;yn<Be;yn++,Ue+=Oe,He+=Oe,ze+=Oe,Ge+=Oe)Me[Ke++]=(e[Ue]+De)/Ce,Me[Xe++]=(e[ze]+De)/Ce,Me[Je++]=(e[He]+De)/Ce,un!==-1&&Ge!==-1&&(Me[un++]=(e[Ge]+De)/Ce);return Ve==="RGBA"?new sc("float32",Me,[1,4,Te,Ee]):new sc("float32",Me,[1,3,Te,Ee])}static async fromImage(e,t){const Te=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,Ee=typeof ImageData<"u"&&e instanceof ImageData,Re=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,Ce=typeof String<"u"&&(e instanceof String||typeof e=="string");let De,$e={};if(Te){const Ve=document.createElement("canvas"),Be=Ve.getContext("2d");if(Be!=null){let Me=e.naturalHeight,Oe=e.naturalWidth;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(Me=t.resizedHeight,Oe=t.resizedWidth),t!==void 0){if($e=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if($e.tensorFormat="RGBA",t.height!==void 0&&t.height!==Me)throw new Error("Image input config height doesn't match HTMLImageElement height");if($e.height=Me,t.width!==void 0&&t.width!==Oe)throw new Error("Image input config width doesn't match HTMLImageElement width");$e.width=Oe}else $e.tensorFormat="RGBA",$e.height=Me,$e.width=Oe;Ve.width=Oe,Ve.height=Me,Be.drawImage(e,0,0,Oe,Me),De=Be.getImageData(0,0,Oe,Me).data}else throw new Error("Can not access image data")}else if(Ee){const Ve="RGBA";let Be,Me;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(Be=t.resizedHeight,Me=t.resizedWidth):(Be=e.height,Me=e.width),t!==void 0){if($e=t,t.bitmapFormat!==void 0&&t.bitmapFormat!==Ve)throw new Error("Image input config format must be RGBA for ImageData");$e.bitmapFormat="RGBA"}else $e.bitmapFormat="RGBA";if($e.height=Be,$e.width=Me,t!==void 0){const Oe=document.createElement("canvas");Oe.width=Me,Oe.height=Be;const Ue=Oe.getContext("2d");if(Ue!=null)Ue.putImageData(e,0,0),De=Ue.getImageData(0,0,Me,Be).data;else throw new Error("Can not access image data")}else De=e.data}else if(Re){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(t.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const Ve=document.createElement("canvas").getContext("2d");if(Ve!=null){const Be=e.height,Me=e.width;if(Ve.drawImage(e,0,0,Me,Be),De=Ve.getImageData(0,0,Me,Be).data,t!==void 0){if(t.height!==void 0&&t.height!==Be)throw new Error("Image input config height doesn't match ImageBitmap height");if($e.height=Be,t.width!==void 0&&t.width!==Me)throw new Error("Image input config width doesn't match ImageBitmap width");$e.width=Me}else $e.height=Be,$e.width=Me;return sc.bufferToTensor(De,$e)}else throw new Error("Can not access image data")}else{if(Ce)return new Promise((Ve,Be)=>{const Me=document.createElement("canvas"),Oe=Me.getContext("2d");if(!e||!Oe)return Be();const Ue=new Image;Ue.crossOrigin="Anonymous",Ue.src=e,Ue.onload=()=>{Me.width=Ue.width,Me.height=Ue.height,Oe.drawImage(Ue,0,0,Me.width,Me.height);const ze=Oe.getImageData(0,0,Me.width,Me.height);if(t!==void 0){if(t.height!==void 0&&t.height!==Me.height)throw new Error("Image input config height doesn't match ImageBitmap height");if($e.height=Me.height,t.width!==void 0&&t.width!==Me.width)throw new Error("Image input config width doesn't match ImageBitmap width");$e.width=Me.width}else $e.height=Me.height,$e.width=Me.width;Ve(sc.bufferToTensor(ze.data,$e))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(De!==void 0)return sc.bufferToTensor(De,$e);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var t,Te;const Ee=document.createElement("canvas").getContext("2d");let Re;if(Ee!=null){const Ce=this.dims[3],De=this.dims[2],$e=this.dims[1],Ve=e!==void 0&&e.format!==void 0?e.format:"RGB",Be=e!==void 0&&((t=e.norm)===null||t===void 0?void 0:t.mean)!==void 0?e.norm.mean:255,Me=e!==void 0&&((Te=e.norm)===null||Te===void 0?void 0:Te.bias)!==void 0?e.norm.bias:0,Oe=De*Ce;if(e!==void 0){if(e.height!==void 0&&e.height!==De)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==Ce)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&$e===4&&e.format!=="RGBA"||$e===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const Ue=4;let ze=0,He=1,Ge=2,Ke=3,Xe=0,Je=Oe,un=Oe*2,fn=-1;Ve==="RGBA"?(Xe=0,Je=Oe,un=Oe*2,fn=Oe*3):Ve==="RGB"?(Xe=0,Je=Oe,un=Oe*2):Ve==="RBG"&&(Xe=0,un=Oe,Je=Oe*2),Re=Ee.createImageData(Ce,De);for(let yn=0;yn<De*Ce;ze+=Ue,He+=Ue,Ge+=Ue,Ke+=Ue,yn++)Re.data[ze]=(this.data[Xe++]-Me)*Be,Re.data[He]=(this.data[Je++]-Me)*Be,Re.data[Ge]=(this.data[un++]-Me)*Be,Re.data[Ke]=fn===-1?255:(this.data[fn++]-Me)*Be}else throw new Error("Can not access image data");return Re}reshape(e){return new sc(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Mf{constructor(e){this.handler=e}async run(e,t,Te){const Ee={};let Re={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let Ce=!0;if(typeof t=="object"){if(t===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(t.length===0)throw new TypeError("'fetches' cannot be an empty array.");Ce=!1;for(const Ve of t){if(typeof Ve!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(Ve)===-1)throw new RangeError(`'fetches' contains invalid output name: ${Ve}.`);Ee[Ve]=null}if(typeof Te=="object"&&Te!==null)Re=Te;else if(typeof Te<"u")throw new TypeError("'options' must be an object.")}else{let Ve=!1;const Be=Object.getOwnPropertyNames(t);for(const Me of this.outputNames)if(Be.indexOf(Me)!==-1){const Oe=t[Me];(Oe===null||Oe instanceof Tensor$1)&&(Ve=!0,Ce=!1,Ee[Me]=Oe)}if(Ve){if(typeof Te=="object"&&Te!==null)Re=Te;else if(typeof Te<"u")throw new TypeError("'options' must be an object.")}else Re=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const Ve of this.inputNames)if(typeof e[Ve]>"u")throw new Error(`input '${Ve}' is missing in 'feeds'.`);if(Ce)for(const Ve of this.outputNames)Ee[Ve]=null;const De=await this.handler.run(e,Ee,Re),$e={};for(const Ve in De)Object.hasOwnProperty.call(De,Ve)&&($e[Ve]=new Tensor$1(De[Ve].type,De[Ve].data,De[Ve].dims));return $e}static async create(e,t,Te,Ee){let Re,Ce={};if(typeof e=="string"){if(Re=e,typeof t=="object"&&t!==null)Ce=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(Re=e,typeof t=="object"&&t!==null)Ce=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const Me=e;let Oe=0,Ue=e.byteLength;if(typeof t=="object"&&t!==null)Ce=t;else if(typeof t=="number"){if(Oe=t,!Number.isSafeInteger(Oe))throw new RangeError("'byteOffset' must be an integer.");if(Oe<0||Oe>=Me.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${Me.byteLength}).`);if(Ue=e.byteLength-Oe,typeof Te=="number"){if(Ue=Te,!Number.isSafeInteger(Ue))throw new RangeError("'byteLength' must be an integer.");if(Ue<=0||Oe+Ue>Me.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${Me.byteLength-Oe}].`);if(typeof Ee=="object"&&Ee!==null)Ce=Ee;else if(typeof Ee<"u")throw new TypeError("'options' must be an object.")}else if(typeof Te<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t<"u")throw new TypeError("'options' must be an object.");Re=new Uint8Array(Me,Oe,Ue)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const $e=(Ce.executionProviders||[]).map(Me=>typeof Me=="string"?Me:Me.name),Be=await(await resolveBackend($e)).createSessionHandler(Re,Ce);return new Mf(Be)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/var hasRequiredOrtWeb_min;function requireOrtWeb_min(){return hasRequiredOrtWeb_min||(hasRequiredOrtWeb_min=1,function(module,exports){(function(n,e){module.exports=e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(n,e,t)=>{var Te,Ee=(Te=(Te=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Re){function Ce(){return Hn.buffer!=Un&&Gr(Hn.buffer),Cn}function De(){return Hn.buffer!=Un&&Gr(Hn.buffer),kn}function $e(){return Hn.buffer!=Un&&Gr(Hn.buffer),Yn}function Ve(){return Hn.buffer!=Un&&Gr(Hn.buffer),Jn}function Be(){return Hn.buffer!=Un&&Gr(Hn.buffer),sr}var Me,Oe,Ue;Re=Re||{},Me||(Me=Re!==void 0?Re:{}),Me.ready=new Promise(function(Ln,qn){Oe=Ln,Ue=qn});var ze,He,Ge,Ke,Xe,Je,un=Object.assign({},Me),fn="./this.program",yn=(Ln,qn)=>{throw qn},gn=typeof window=="object",mn=typeof importScripts=="function",dn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",vn=Me.ENVIRONMENT_IS_PTHREAD||!1,bn="";function Tn(Ln){return Me.locateFile?Me.locateFile(Ln,bn):bn+Ln}if(dn){let Ln;bn=mn?t(908).dirname(bn)+"/":"//",Je=()=>{Xe||(Ke=t(1384),Xe=t(908))},ze=function(qn,Zn){return Je(),qn=Xe.normalize(qn),Ke.readFileSync(qn,Zn?void 0:"utf8")},Ge=qn=>((qn=ze(qn,!0)).buffer||(qn=new Uint8Array(qn)),qn),He=(qn,Zn,ar)=>{Je(),qn=Xe.normalize(qn),Ke.readFile(qn,function(vr,Cr){vr?ar(vr):Zn(Cr.buffer)})},1<process.argv.length&&(fn=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(qn){if(!(qn instanceof Kr))throw qn}),process.on("unhandledRejection",function(qn){throw qn}),yn=(qn,Zn)=>{if(hi())throw process.exitCode=qn,Zn;Zn instanceof Kr||Fn("exiting due to exception: "+Zn),process.exit(qn)},Me.inspect=function(){return"[Emscripten Module object]"};try{Ln=t(9925)}catch(qn){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),qn}t.g.Worker=Ln.Worker}else(gn||mn)&&(mn?bn=self.location.href:typeof document<"u"&&document.currentScript&&(bn=document.currentScript.src),Te&&(bn=Te),bn=bn.indexOf("blob:")!==0?bn.substr(0,bn.replace(/[?#].*/,"").lastIndexOf("/")+1):"",dn||(ze=Ln=>{var qn=new XMLHttpRequest;return qn.open("GET",Ln,!1),qn.send(null),qn.responseText},mn&&(Ge=Ln=>{var qn=new XMLHttpRequest;return qn.open("GET",Ln,!1),qn.responseType="arraybuffer",qn.send(null),new Uint8Array(qn.response)}),He=(Ln,qn,Zn)=>{var ar=new XMLHttpRequest;ar.open("GET",Ln,!0),ar.responseType="arraybuffer",ar.onload=()=>{ar.status==200||ar.status==0&&ar.response?qn(ar.response):Zn()},ar.onerror=Zn,ar.send(null)}));dn&&typeof performance>"u"&&(t.g.performance=t(6953).performance);var En=console.log.bind(console),In=console.warn.bind(console);dn&&(Je(),En=Ln=>Ke.writeSync(1,Ln+`
`),In=Ln=>Ke.writeSync(2,Ln+`
`));var Nn,On=Me.print||En,Fn=Me.printErr||In;Object.assign(Me,un),un=null,Me.thisProgram&&(fn=Me.thisProgram),Me.quit&&(yn=Me.quit),Me.wasmBinary&&(Nn=Me.wasmBinary);var $n=Me.noExitRuntime||!1;typeof WebAssembly!="object"&&oi("no native wasm support detected");var Hn,Dn,Un,Cn,kn,Yn,Jn,sr,lr=!1,mr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function gr(Ln,qn,Zn){var ar=(qn>>>=0)+Zn;for(Zn=qn;Ln[Zn]&&!(Zn>=ar);)++Zn;if(16<Zn-qn&&Ln.buffer&&mr)return mr.decode(Ln.buffer instanceof SharedArrayBuffer?Ln.slice(qn,Zn):Ln.subarray(qn,Zn));for(ar="";qn<Zn;){var vr=Ln[qn++];if(128&vr){var Cr=63&Ln[qn++];if((224&vr)==192)ar+=String.fromCharCode((31&vr)<<6|Cr);else{var ni=63&Ln[qn++];65536>(vr=(240&vr)==224?(15&vr)<<12|Cr<<6|ni:(7&vr)<<18|Cr<<12|ni<<6|63&Ln[qn++])?ar+=String.fromCharCode(vr):(vr-=65536,ar+=String.fromCharCode(55296|vr>>10,56320|1023&vr))}}else ar+=String.fromCharCode(vr)}return ar}function Er(Ln,qn){return(Ln>>>=0)?gr(De(),Ln,qn):""}function $r(Ln,qn,Zn,ar){if(!(0<ar))return 0;var vr=Zn>>>=0;ar=Zn+ar-1;for(var Cr=0;Cr<Ln.length;++Cr){var ni=Ln.charCodeAt(Cr);if(55296<=ni&&57343>=ni&&(ni=65536+((1023&ni)<<10)|1023&Ln.charCodeAt(++Cr)),127>=ni){if(Zn>=ar)break;qn[Zn++>>>0]=ni}else{if(2047>=ni){if(Zn+1>=ar)break;qn[Zn++>>>0]=192|ni>>6}else{if(65535>=ni){if(Zn+2>=ar)break;qn[Zn++>>>0]=224|ni>>12}else{if(Zn+3>=ar)break;qn[Zn++>>>0]=240|ni>>18,qn[Zn++>>>0]=128|ni>>12&63}qn[Zn++>>>0]=128|ni>>6&63}qn[Zn++>>>0]=128|63&ni}}return qn[Zn>>>0]=0,Zn-vr}function Yr(Ln){for(var qn=0,Zn=0;Zn<Ln.length;++Zn){var ar=Ln.charCodeAt(Zn);127>=ar?qn++:2047>=ar?qn+=2:55296<=ar&&57343>=ar?(qn+=4,++Zn):qn+=3}return qn}function Gr(Ln){Un=Ln,Me.HEAP8=Cn=new Int8Array(Ln),Me.HEAP16=new Int16Array(Ln),Me.HEAP32=Yn=new Int32Array(Ln),Me.HEAPU8=kn=new Uint8Array(Ln),Me.HEAPU16=new Uint16Array(Ln),Me.HEAPU32=Jn=new Uint32Array(Ln),Me.HEAPF32=new Float32Array(Ln),Me.HEAPF64=sr=new Float64Array(Ln)}vn&&(Un=Me.buffer);var Tr=Me.INITIAL_MEMORY||16777216;if(vn)Hn=Me.wasmMemory,Un=Me.buffer;else if(Me.wasmMemory)Hn=Me.wasmMemory;else if(!((Hn=new WebAssembly.Memory({initial:Tr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Fn("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),dn&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Hn&&(Un=Hn.buffer),Tr=Un.byteLength,Gr(Un);var rr,Ni=[],Ai=[],bi=[],Wr=[];function hi(){return $n||!1}function ei(){var Ln=Me.preRun.shift();Ni.unshift(Ln)}var gi,mi=0,Hi=null;function oi(Ln){throw vn?postMessage({cmd:"onAbort",arg:Ln}):Me.onAbort&&Me.onAbort(Ln),Fn(Ln="Aborted("+Ln+")"),lr=!0,Ln=new WebAssembly.RuntimeError(Ln+". Build with -sASSERTIONS for more info."),Ue(Ln),Ln}function yr(){return gi.startsWith("data:application/octet-stream;base64,")}function Fr(){var Ln=gi;try{if(Ln==gi&&Nn)return new Uint8Array(Nn);if(Ge)return Ge(Ln);throw"both async and sync fetching of the wasm failed"}catch(qn){oi(qn)}}gi="ort-wasm-threaded.wasm",yr()||(gi=Tn(gi));var Qr={};function Kr(Ln){this.name="ExitStatus",this.message="Program terminated with exit("+Ln+")",this.status=Ln}function si(Ln){(Ln=zr.Vb[Ln])||oi(),zr.mc(Ln)}function fi(Ln){var qn=zr.Cc();if(!qn)return 6;zr.ac.push(qn),zr.Vb[Ln.Ub]=qn,qn.Ub=Ln.Ub;var Zn={cmd:"run",start_routine:Ln.Ic,arg:Ln.zc,pthread_ptr:Ln.Ub};return qn.$b=()=>{Zn.time=performance.now(),qn.postMessage(Zn,Ln.Nc)},qn.loaded&&(qn.$b(),delete qn.$b),0}function Li(Ln){if(vn)return pi(1,1,Ln);hi()||(zr.oc(),Me.onExit&&Me.onExit(Ln),lr=!0),yn(Ln,new Kr(Ln))}function $i(Ln,qn){if(!qn&&vn)throw wi(Ln),"unwind";hi()||vn||(el(),Ii(bi),Do(0),Ca[1].length&&Lo(1,10),Ca[2].length&&Lo(2,10),zr.oc()),Li(Ln)}var zr={Yb:[],ac:[],qc:[],Vb:{},fc:function(){vn&&zr.Ec()},Pc:function(){},Ec:function(){zr.receiveObjectTransfer=zr.Gc,zr.threadInitTLS=zr.pc,zr.setExitStatus=zr.nc,$n=!1},nc:function(){},oc:function(){for(var Ln of Object.values(zr.Vb))zr.mc(Ln);for(Ln of zr.Yb)Ln.terminate();zr.Yb=[]},mc:function(Ln){var qn=Ln.Ub;delete zr.Vb[qn],zr.Yb.push(Ln),zr.ac.splice(zr.ac.indexOf(Ln),1),Ln.Ub=0,os(qn)},Gc:function(){},pc:function(){zr.qc.forEach(Ln=>Ln())},Fc:function(Ln,qn){Ln.onmessage=Zn=>{var ar=(Zn=Zn.data).cmd;if(Ln.Ub&&(zr.Bc=Ln.Ub),Zn.targetThread&&Zn.targetThread!=mo()){var vr=zr.Vb[Zn.Qc];vr?vr.postMessage(Zn,Zn.transferList):Fn('Internal error! Worker sent a message "'+ar+'" to target pthread '+Zn.targetThread+", but that thread no longer exists!")}else ar==="processProxyingQueue"?cr(Zn.queue):ar==="spawnThread"?fi(Zn):ar==="cleanupThread"?si(Zn.thread):ar==="killThread"?(Zn=Zn.thread,ar=zr.Vb[Zn],delete zr.Vb[Zn],ar.terminate(),os(Zn),zr.ac.splice(zr.ac.indexOf(ar),1),ar.Ub=0):ar==="cancelThread"?zr.Vb[Zn.thread].postMessage({cmd:"cancel"}):ar==="loaded"?(Ln.loaded=!0,qn&&qn(Ln),Ln.$b&&(Ln.$b(),delete Ln.$b)):ar==="print"?On("Thread "+Zn.threadId+": "+Zn.text):ar==="printErr"?Fn("Thread "+Zn.threadId+": "+Zn.text):ar==="alert"?alert("Thread "+Zn.threadId+": "+Zn.text):Zn.target==="setimmediate"?Ln.postMessage(Zn):ar==="onAbort"?Me.onAbort&&Me.onAbort(Zn.arg):ar&&Fn("worker sent an unknown command "+ar);zr.Bc=void 0},Ln.onerror=Zn=>{throw Fn("worker sent an error! "+Zn.filename+":"+Zn.lineno+": "+Zn.message),Zn},dn&&(Ln.on("message",function(Zn){Ln.onmessage({data:Zn})}),Ln.on("error",function(Zn){Ln.onerror(Zn)}),Ln.on("detachedExit",function(){})),Ln.postMessage({cmd:"load",urlOrBlob:Me.mainScriptUrlOrBlob||Te,wasmMemory:Hn,wasmModule:Dn})},yc:function(){var Ln=Tn("ort-wasm-threaded.worker.js");zr.Yb.push(new Worker(Ln))},Cc:function(){return zr.Yb.length==0&&(zr.yc(),zr.Fc(zr.Yb[0])),zr.Yb.pop()}};function Ii(Ln){for(;0<Ln.length;)Ln.shift()(Me)}function Ui(Ln){var qn=es();return Ln=Ln(),Qi(qn),Ln}function wi(Ln){if(vn)return pi(2,0,Ln);try{$i(Ln)}catch(qn){qn instanceof Kr||qn=="unwind"||yn(1,qn)}}Me.PThread=zr,Me.establishStackSpace=function(){var Ln=mo(),qn=$e()[Ln+44>>2>>>0];Ln=$e()[Ln+48>>2>>>0],ul(qn,qn-Ln),Qi(qn)};var Ri=[];function ci(Ln){var qn=Ri[Ln];return qn||(Ln>=Ri.length&&(Ri.length=Ln+1),Ri[Ln]=qn=rr.get(Ln)),qn}Me.invokeEntryPoint=function(Ln,qn){Ln=ci(Ln)(qn),hi()?zr.nc(Ln):Qo(Ln)};var ws,hs,rs=[],ri=0,ai=0;function Fi(Ln){this.Zb=Ln,this.Sb=Ln-24,this.xc=function(qn){Ve()[this.Sb+4>>2>>>0]=qn},this.bc=function(){return Ve()[this.Sb+4>>2>>>0]},this.wc=function(qn){Ve()[this.Sb+8>>2>>>0]=qn},this.Dc=function(){return Ve()[this.Sb+8>>2>>>0]},this.rc=function(){$e()[this.Sb>>2>>>0]=0},this.hc=function(qn){qn=qn?1:0,Ce()[this.Sb+12>>0>>>0]=qn},this.uc=function(){return Ce()[this.Sb+12>>0>>>0]!=0},this.ic=function(qn){qn=qn?1:0,Ce()[this.Sb+13>>0>>>0]=qn},this.kc=function(){return Ce()[this.Sb+13>>0>>>0]!=0},this.fc=function(qn,Zn){this.cc(0),this.xc(qn),this.wc(Zn),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add($e(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub($e(),this.Sb>>2,1)===1},this.cc=function(qn){Ve()[this.Sb+16>>2>>>0]=qn},this.tc=function(){return Ve()[this.Sb+16>>2>>>0]},this.vc=function(){if(Fo(this.bc()))return Ve()[this.Zb>>2>>>0];var qn=this.tc();return qn!==0?qn:this.Zb}}function Ms(Ln){return As(new Fi(Ln).Sb)}function To(Ln,qn,Zn,ar){return vn?pi(3,1,Ln,qn,Zn,ar):Zs(Ln,qn,Zn,ar)}function Zs(Ln,qn,Zn,ar){if(typeof SharedArrayBuffer>"u")return Fn("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var vr=[];return vn&&vr.length===0?To(Ln,qn,Zn,ar):(Ln={Ic:Zn,Ub:Ln,zc:ar,Nc:vr},vn?(Ln.Oc="spawnThread",postMessage(Ln,vr),0):fi(Ln))}function Ci(Ln,qn,Zn){return vn?pi(4,1,Ln,qn,Zn):0}function gs(Ln,qn){if(vn)return pi(5,1,Ln,qn)}function Mo(Ln,qn){if(vn)return pi(6,1,Ln,qn)}function Ls(Ln,qn,Zn){if(vn)return pi(7,1,Ln,qn,Zn)}function eo(Ln,qn,Zn){return vn?pi(8,1,Ln,qn,Zn):0}function xs(Ln,qn){if(vn)return pi(9,1,Ln,qn)}function Os(Ln,qn,Zn){if(vn)return pi(10,1,Ln,qn,Zn)}function Ts(Ln,qn,Zn,ar){if(vn)return pi(11,1,Ln,qn,Zn,ar)}function ra(Ln,qn,Zn,ar){if(vn)return pi(12,1,Ln,qn,Zn,ar)}function ua(Ln,qn,Zn,ar){if(vn)return pi(13,1,Ln,qn,Zn,ar)}function po(Ln){if(vn)return pi(14,1,Ln)}function Gn(Ln,qn){if(vn)return pi(15,1,Ln,qn)}function ir(Ln,qn,Zn){if(vn)return pi(16,1,Ln,qn,Zn)}function cr(Ln){Atomics.store($e(),Ln>>2,1),mo()&&Oa(Ln),Atomics.compareExchange($e(),Ln>>2,1,0)}function _r(Ln){return Ve()[Ln>>>2]+4294967296*$e()[Ln+4>>>2]}function Ir(Ln,qn,Zn,ar,vr,Cr){return vn?pi(17,1,Ln,qn,Zn,ar,vr,Cr):-52}function Or(Ln,qn,Zn,ar,vr,Cr){if(vn)return pi(18,1,Ln,qn,Zn,ar,vr,Cr)}function Zr(Ln){var qn=Yr(Ln)+1,Zn=Ha(qn);return Zn&&$r(Ln,Ce(),Zn,qn),Zn}function yi(Ln,qn,Zn){function ar(Ki){return(Ki=Ki.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ki[1]:"GMT"}if(vn)return pi(19,1,Ln,qn,Zn);var vr=new Date().getFullYear(),Cr=new Date(vr,0,1),ni=new Date(vr,6,1);vr=Cr.getTimezoneOffset();var ui=ni.getTimezoneOffset(),ts=Math.max(vr,ui);$e()[Ln>>2>>>0]=60*ts,$e()[qn>>2>>>0]=+(vr!=ui),Ln=ar(Cr),qn=ar(ni),Ln=Zr(Ln),qn=Zr(qn),ui<vr?(Ve()[Zn>>2>>>0]=Ln,Ve()[Zn+4>>2>>>0]=qn):(Ve()[Zn>>2>>>0]=qn,Ve()[Zn+4>>2>>>0]=Ln)}function pi(Ln,qn){var Zn=arguments.length-2,ar=arguments;return Ui(()=>{for(var vr=tl(8*Zn),Cr=vr>>3,ni=0;ni<Zn;ni++){var ui=ar[2+ni];Be()[Cr+ni>>>0]=ui}return us(Ln,Zn,vr,qn)})}Me.executeNotifiedProxyingQueue=cr,hs=dn?()=>{var Ln=process.hrtime();return 1e3*Ln[0]+Ln[1]/1e6}:vn?()=>performance.now()-Me.__performance_now_clock_drift:()=>performance.now();var zi,_s=[],Gi={};function js(){if(!zi){var Ln,qn={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:fn||"./this.program"};for(Ln in Gi)Gi[Ln]===void 0?delete qn[Ln]:qn[Ln]=Gi[Ln];var Zn=[];for(Ln in qn)Zn.push(Ln+"="+qn[Ln]);zi=Zn}return zi}function Nr(Ln,qn){if(vn)return pi(20,1,Ln,qn);var Zn=0;return js().forEach(function(ar,vr){var Cr=qn+Zn;for(vr=Ve()[Ln+4*vr>>2>>>0]=Cr,Cr=0;Cr<ar.length;++Cr)Ce()[vr++>>0>>>0]=ar.charCodeAt(Cr);Ce()[vr>>0>>>0]=0,Zn+=ar.length+1}),0}function Vi(Ln,qn){if(vn)return pi(21,1,Ln,qn);var Zn=js();Ve()[Ln>>2>>>0]=Zn.length;var ar=0;return Zn.forEach(function(vr){ar+=vr.length+1}),Ve()[qn>>2>>>0]=ar,0}function is(Ln){return vn?pi(22,1,Ln):52}function Eo(Ln,qn,Zn,ar){return vn?pi(23,1,Ln,qn,Zn,ar):52}function Xo(Ln,qn,Zn,ar,vr){return vn?pi(24,1,Ln,qn,Zn,ar,vr):70}var Ca=[null,[],[]];function Lo(Ln,qn){var Zn=Ca[Ln];qn===0||qn===10?((Ln===1?On:Fn)(gr(Zn,0)),Zn.length=0):Zn.push(qn)}function vl(Ln,qn,Zn,ar){if(vn)return pi(25,1,Ln,qn,Zn,ar);for(var vr=0,Cr=0;Cr<Zn;Cr++){var ni=Ve()[qn>>2>>>0],ui=Ve()[qn+4>>2>>>0];qn+=8;for(var ts=0;ts<ui;ts++)Lo(Ln,De()[ni+ts>>>0]);vr+=ui}return Ve()[ar>>2>>>0]=vr,0}var ys=0;function Ja(Ln){return Ln%4==0&&(Ln%100!=0||Ln%400==0)}var qs=[31,29,31,30,31,30,31,31,30,31,30,31],wl=[31,28,31,30,31,30,31,31,30,31,30,31];function Za(Ln,qn,Zn,ar){function vr(Rr,Yi,as){for(Rr=typeof Rr=="number"?Rr.toString():Rr||"";Rr.length<Yi;)Rr=as[0]+Rr;return Rr}function Cr(Rr,Yi){return vr(Rr,Yi,"0")}function ni(Rr,Yi){function as(Xs){return 0>Xs?-1:0<Xs?1:0}var qo;return(qo=as(Rr.getFullYear()-Yi.getFullYear()))===0&&(qo=as(Rr.getMonth()-Yi.getMonth()))===0&&(qo=as(Rr.getDate()-Yi.getDate())),qo}function ui(Rr){switch(Rr.getDay()){case 0:return new Date(Rr.getFullYear()-1,11,29);case 1:return Rr;case 2:return new Date(Rr.getFullYear(),0,3);case 3:return new Date(Rr.getFullYear(),0,2);case 4:return new Date(Rr.getFullYear(),0,1);case 5:return new Date(Rr.getFullYear()-1,11,31);case 6:return new Date(Rr.getFullYear()-1,11,30)}}function ts(Rr){var Yi=Rr.Wb;for(Rr=new Date(new Date(Rr.Xb+1900,0,1).getTime());0<Yi;){var as=Rr.getMonth(),qo=(Ja(Rr.getFullYear())?qs:wl)[as];if(!(Yi>qo-Rr.getDate())){Rr.setDate(Rr.getDate()+Yi);break}Yi-=qo-Rr.getDate()+1,Rr.setDate(1),11>as?Rr.setMonth(as+1):(Rr.setMonth(0),Rr.setFullYear(Rr.getFullYear()+1))}return as=new Date(Rr.getFullYear()+1,0,4),Yi=ui(new Date(Rr.getFullYear(),0,4)),as=ui(as),0>=ni(Yi,Rr)?0>=ni(as,Rr)?Rr.getFullYear()+1:Rr.getFullYear():Rr.getFullYear()-1}var Ki=$e()[ar+40>>2>>>0];for(var fs in ar={Lc:$e()[ar>>2>>>0],Kc:$e()[ar+4>>2>>>0],dc:$e()[ar+8>>2>>>0],jc:$e()[ar+12>>2>>>0],ec:$e()[ar+16>>2>>>0],Xb:$e()[ar+20>>2>>>0],Tb:$e()[ar+24>>2>>>0],Wb:$e()[ar+28>>2>>>0],Rc:$e()[ar+32>>2>>>0],Jc:$e()[ar+36>>2>>>0],Mc:Ki?Er(Ki):""},Zn=Er(Zn),Ki={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Zn=Zn.replace(new RegExp(fs,"g"),Ki[fs]);var Ao="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ho="January February March April May June July August September October November December".split(" ");for(fs in Ki={"%a":function(Rr){return Ao[Rr.Tb].substring(0,3)},"%A":function(Rr){return Ao[Rr.Tb]},"%b":function(Rr){return ho[Rr.ec].substring(0,3)},"%B":function(Rr){return ho[Rr.ec]},"%C":function(Rr){return Cr((Rr.Xb+1900)/100|0,2)},"%d":function(Rr){return Cr(Rr.jc,2)},"%e":function(Rr){return vr(Rr.jc,2," ")},"%g":function(Rr){return ts(Rr).toString().substring(2)},"%G":function(Rr){return ts(Rr)},"%H":function(Rr){return Cr(Rr.dc,2)},"%I":function(Rr){return(Rr=Rr.dc)==0?Rr=12:12<Rr&&(Rr-=12),Cr(Rr,2)},"%j":function(Rr){for(var Yi=0,as=0;as<=Rr.ec-1;Yi+=(Ja(Rr.Xb+1900)?qs:wl)[as++]);return Cr(Rr.jc+Yi,3)},"%m":function(Rr){return Cr(Rr.ec+1,2)},"%M":function(Rr){return Cr(Rr.Kc,2)},"%n":function(){return`
`},"%p":function(Rr){return 0<=Rr.dc&&12>Rr.dc?"AM":"PM"},"%S":function(Rr){return Cr(Rr.Lc,2)},"%t":function(){return"	"},"%u":function(Rr){return Rr.Tb||7},"%U":function(Rr){return Cr(Math.floor((Rr.Wb+7-Rr.Tb)/7),2)},"%V":function(Rr){var Yi=Math.floor((Rr.Wb+7-(Rr.Tb+6)%7)/7);if(2>=(Rr.Tb+371-Rr.Wb-2)%7&&Yi++,Yi)Yi==53&&((as=(Rr.Tb+371-Rr.Wb)%7)==4||as==3&&Ja(Rr.Xb)||(Yi=1));else{Yi=52;var as=(Rr.Tb+7-Rr.Wb-1)%7;(as==4||as==5&&Ja(Rr.Xb%400-1))&&Yi++}return Cr(Yi,2)},"%w":function(Rr){return Rr.Tb},"%W":function(Rr){return Cr(Math.floor((Rr.Wb+7-(Rr.Tb+6)%7)/7),2)},"%y":function(Rr){return(Rr.Xb+1900).toString().substring(2)},"%Y":function(Rr){return Rr.Xb+1900},"%z":function(Rr){var Yi=0<=(Rr=Rr.Jc);return Rr=Math.abs(Rr)/60,(Yi?"+":"-")+("0000"+(Rr/60*100+Rr%60)).slice(-4)},"%Z":function(Rr){return Rr.Mc},"%%":function(){return"%"}},Zn=Zn.replace(/%%/g,"\0\0"),Ki)Zn.includes(fs)&&(Zn=Zn.replace(new RegExp(fs,"g"),Ki[fs](ar)));return fs=function(Rr){var Yi=Array(Yr(Rr)+1);return $r(Rr,Yi,0,Yi.length),Yi}(Zn=Zn.replace(/\0\0/g,"%")),fs.length>qn?0:(function(Rr,Yi){Ce().set(Rr,Yi>>>0)}(fs,Ln),fs.length-1)}zr.fc();var ca=[null,Li,wi,To,Ci,gs,Mo,Ls,eo,xs,Os,Ts,ra,ua,po,Gn,ir,Ir,Or,yi,Nr,Vi,is,Eo,Xo,vl],da={b:function(Ln){return Ha(Ln+24)+24},n:function(Ln){return(Ln=new Fi(Ln)).uc()||(Ln.hc(!0),ri--),Ln.ic(!1),rs.push(Ln),Ln.sc(),Ln.vc()},ma:function(Ln){throw Fn("Unexpected exception thrown, this is not properly supported - aborting"),lr=!0,Ln},x:function(){Xi(0);var Ln=rs.pop();if(Ln.Hc()&&!Ln.kc()){var qn=Ln.Dc();qn&&ci(qn)(Ln.Zb),Ms(Ln.Zb)}ai=0},e:function(){var Ln=ai;if(!Ln)return ys=0;var qn=new Fi(Ln);qn.cc(Ln);var Zn=qn.bc();if(!Zn)return ys=0,Ln;for(var ar=Array.prototype.slice.call(arguments),vr=0;vr<ar.length;vr++){var Cr=ar[vr];if(Cr===0||Cr===Zn)break;if(ha(Cr,Zn,qn.Sb+16))return ys=Cr,Ln}return ys=Zn,Ln},l:function(){var Ln=ai;if(!Ln)return ys=0;var qn=new Fi(Ln);qn.cc(Ln);var Zn=qn.bc();if(!Zn)return ys=0,Ln;for(var ar=Array.prototype.slice.call(arguments),vr=0;vr<ar.length;vr++){var Cr=ar[vr];if(Cr===0||Cr===Zn)break;if(ha(Cr,Zn,qn.Sb+16))return ys=Cr,Ln}return ys=Zn,Ln},h:function(){var Ln=ai;if(!Ln)return ys=0;var qn=new Fi(Ln);qn.cc(Ln);var Zn=qn.bc();if(!Zn)return ys=0,Ln;for(var ar=Array.prototype.slice.call(arguments),vr=0;vr<ar.length;vr++){var Cr=ar[vr];if(Cr===0||Cr===Zn)break;if(ha(Cr,Zn,qn.Sb+16))return ys=Cr,Ln}return ys=Zn,Ln},t:Ms,M:function(){var Ln=rs.pop();Ln||oi("no exception to throw");var qn=Ln.Zb;throw Ln.kc()||(rs.push(Ln),Ln.ic(!0),Ln.hc(!1),ri++),ai=qn,qn},c:function(Ln,qn,Zn){throw new Fi(Ln).fc(qn,Zn),ai=Ln,ri++,Ln},pa:function(){return ri},Fa:function(Ln){Ga(Ln,!mn,1,!gn),zr.pc()},T:function(Ln){vn?postMessage({cmd:"cleanupThread",thread:Ln}):si(Ln)},xa:Zs,j:function(Ln){throw ai||(ai=Ln),Ln},H:Ci,Ma:gs,ua:Mo,wa:Ls,oa:eo,Ka:xs,Ca:Os,Ja:Ts,V:ra,va:ua,sa:po,La:Gn,ta:ir,Ta:function(){},X:function(){oi("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){oi("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Ln,qn,Zn,ar){if(Ln==qn)setTimeout(()=>cr(ar));else if(vn)postMessage({targetThread:Ln,cmd:"processProxyingQueue",queue:ar});else{if(!(Ln=zr.Vb[Ln]))return;Ln.postMessage({cmd:"processProxyingQueue",queue:ar})}return 1},Ea:function(){return-1},Pa:function(Ln,qn){Ln=new Date(1e3*_r(Ln)),$e()[qn>>2>>>0]=Ln.getUTCSeconds(),$e()[qn+4>>2>>>0]=Ln.getUTCMinutes(),$e()[qn+8>>2>>>0]=Ln.getUTCHours(),$e()[qn+12>>2>>>0]=Ln.getUTCDate(),$e()[qn+16>>2>>>0]=Ln.getUTCMonth(),$e()[qn+20>>2>>>0]=Ln.getUTCFullYear()-1900,$e()[qn+24>>2>>>0]=Ln.getUTCDay(),Ln=(Ln.getTime()-Date.UTC(Ln.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,$e()[qn+28>>2>>>0]=Ln},Qa:function(Ln,qn){Ln=new Date(1e3*_r(Ln)),$e()[qn>>2>>>0]=Ln.getSeconds(),$e()[qn+4>>2>>>0]=Ln.getMinutes(),$e()[qn+8>>2>>>0]=Ln.getHours(),$e()[qn+12>>2>>>0]=Ln.getDate(),$e()[qn+16>>2>>>0]=Ln.getMonth(),$e()[qn+20>>2>>>0]=Ln.getFullYear()-1900,$e()[qn+24>>2>>>0]=Ln.getDay();var Zn=new Date(Ln.getFullYear(),0,1),ar=(Ln.getTime()-Zn.getTime())/864e5|0;$e()[qn+28>>2>>>0]=ar,$e()[qn+36>>2>>>0]=-60*Ln.getTimezoneOffset(),ar=new Date(Ln.getFullYear(),6,1).getTimezoneOffset(),Ln=0|(ar!=(Zn=Zn.getTimezoneOffset())&&Ln.getTimezoneOffset()==Math.min(Zn,ar)),$e()[qn+32>>2>>>0]=Ln},Ra:function(Ln){var qn=new Date($e()[Ln+20>>2>>>0]+1900,$e()[Ln+16>>2>>>0],$e()[Ln+12>>2>>>0],$e()[Ln+8>>2>>>0],$e()[Ln+4>>2>>>0],$e()[Ln>>2>>>0],0),Zn=$e()[Ln+32>>2>>>0],ar=qn.getTimezoneOffset(),vr=new Date(qn.getFullYear(),0,1),Cr=new Date(qn.getFullYear(),6,1).getTimezoneOffset(),ni=vr.getTimezoneOffset(),ui=Math.min(ni,Cr);return 0>Zn?$e()[Ln+32>>2>>>0]=+(Cr!=ni&&ui==ar):0<Zn!=(ui==ar)&&(Cr=Math.max(ni,Cr),qn.setTime(qn.getTime()+6e4*((0<Zn?ui:Cr)-ar))),$e()[Ln+24>>2>>>0]=qn.getDay(),Zn=(qn.getTime()-vr.getTime())/864e5|0,$e()[Ln+28>>2>>>0]=Zn,$e()[Ln>>2>>>0]=qn.getSeconds(),$e()[Ln+4>>2>>>0]=qn.getMinutes(),$e()[Ln+8>>2>>>0]=qn.getHours(),$e()[Ln+12>>2>>>0]=qn.getDate(),$e()[Ln+16>>2>>>0]=qn.getMonth(),qn.getTime()/1e3|0},Aa:Ir,Ba:Or,Sa:function Ln(qn,Zn,ar){Ln.Ac||(Ln.Ac=!0,yi(qn,Zn,ar))},y:function(){oi("")},U:function(){if(!dn&&!mn){var Ln="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";ws||(ws={}),ws[Ln]||(ws[Ln]=1,dn&&(Ln="warning: "+Ln),Fn(Ln))}},ra:function(){return 4294901760},B:hs,Ia:function(Ln,qn,Zn){De().copyWithin(Ln>>>0,qn>>>0,qn+Zn>>>0)},F:function(){return dn?t(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Ln,qn,Zn){_s.length=qn,Zn>>=3;for(var ar=0;ar<qn;ar++)_s[ar]=Be()[Zn+ar>>>0];return(0>Ln?Qr[-Ln-1]:ca[Ln]).apply(null,_s)},qa:function(Ln){var qn=De().length;if((Ln>>>=0)<=qn||4294901760<Ln)return!1;for(var Zn=1;4>=Zn;Zn*=2){var ar=qn*(1+.2/Zn);ar=Math.min(ar,Ln+100663296);var vr=Math;ar=Math.max(Ln,ar),vr=vr.min.call(vr,4294901760,ar+(65536-ar%65536)%65536);e:{try{Hn.grow(vr-Un.byteLength+65535>>>16),Gr(Hn.buffer);var Cr=1;break e}catch{}Cr=void 0}if(Cr)return!0}return!1},Na:function(){throw"unwind"},Ga:Nr,Ha:Vi,J:$i,I:is,S:Eo,ga:Xo,R:vl,d:function(){return ys},na:function Ln(qn,Zn){Ln.lc||(Ln.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var vr=new Uint8Array(1);return()=>(crypto.getRandomValues(vr),vr[0])}if(dn)try{var Cr=t(Object(function(){var ni=new Error("Cannot find module 'crypto'");throw ni.code="MODULE_NOT_FOUND",ni}()));return()=>Cr.randomBytes(1)[0]}catch{}return()=>oi("randomDevice")}());for(var ar=0;ar<Zn;ar++)Ce()[qn+ar>>0>>>0]=Ln.lc();return 0},ia:function(Ln,qn,Zn){var ar=es();try{return ci(Ln)(qn,Zn)}catch(vr){if(Qi(ar),vr!==vr+0)throw vr;Xi(1,0)}},ja:function(Ln,qn,Zn){var ar=es();try{return ci(Ln)(qn,Zn)}catch(vr){if(Qi(ar),vr!==vr+0)throw vr;Xi(1,0)}},K:function(Ln){var qn=es();try{return ci(Ln)()}catch(Zn){if(Qi(qn),Zn!==Zn+0)throw Zn;Xi(1,0)}},f:function(Ln,qn){var Zn=es();try{return ci(Ln)(qn)}catch(ar){if(Qi(Zn),ar!==ar+0)throw ar;Xi(1,0)}},P:function(Ln,qn,Zn){var ar=es();try{return ci(Ln)(qn,Zn)}catch(vr){if(Qi(ar),vr!==vr+0)throw vr;Xi(1,0)}},Q:function(Ln,qn,Zn){var ar=es();try{return ci(Ln)(qn,Zn)}catch(vr){if(Qi(ar),vr!==vr+0)throw vr;Xi(1,0)}},k:function(Ln,qn,Zn){var ar=es();try{return ci(Ln)(qn,Zn)}catch(vr){if(Qi(ar),vr!==vr+0)throw vr;Xi(1,0)}},p:function(Ln,qn,Zn,ar){var vr=es();try{return ci(Ln)(qn,Zn,ar)}catch(Cr){if(Qi(vr),Cr!==Cr+0)throw Cr;Xi(1,0)}},q:function(Ln,qn,Zn,ar,vr){var Cr=es();try{return ci(Ln)(qn,Zn,ar,vr)}catch(ni){if(Qi(Cr),ni!==ni+0)throw ni;Xi(1,0)}},N:function(Ln,qn,Zn,ar,vr,Cr){var ni=es();try{return ci(Ln)(qn,Zn,ar,vr,Cr)}catch(ui){if(Qi(ni),ui!==ui+0)throw ui;Xi(1,0)}},s:function(Ln,qn,Zn,ar,vr,Cr){var ni=es();try{return ci(Ln)(qn,Zn,ar,vr,Cr)}catch(ui){if(Qi(ni),ui!==ui+0)throw ui;Xi(1,0)}},w:function(Ln,qn,Zn,ar,vr,Cr,ni){var ui=es();try{return ci(Ln)(qn,Zn,ar,vr,Cr,ni)}catch(ts){if(Qi(ui),ts!==ts+0)throw ts;Xi(1,0)}},L:function(Ln,qn,Zn,ar,vr,Cr,ni,ui){var ts=es();try{return ci(Ln)(qn,Zn,ar,vr,Cr,ni,ui)}catch(Ki){if(Qi(ts),Ki!==Ki+0)throw Ki;Xi(1,0)}},E:function(Ln,qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs,Ao){var ho=es();try{return ci(Ln)(qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs,Ao)}catch(Rr){if(Qi(ho),Rr!==Rr+0)throw Rr;Xi(1,0)}},aa:function(Ln,qn,Zn,ar,vr,Cr,ni,ui){var ts=es();try{return Ys(Ln,qn,Zn,ar,vr,Cr,ni,ui)}catch(Ki){if(Qi(ts),Ki!==Ki+0)throw Ki;Xi(1,0)}},_:function(Ln,qn,Zn,ar,vr,Cr,ni){var ui=es();try{return Vo(Ln,qn,Zn,ar,vr,Cr,ni)}catch(ts){if(Qi(ui),ts!==ts+0)throw ts;Xi(1,0)}},Z:function(Ln,qn,Zn,ar,vr){var Cr=es();try{return Na(Ln,qn,Zn,ar,vr)}catch(ni){if(Qi(Cr),ni!==ni+0)throw ni;Xi(1,0)}},ca:function(Ln,qn,Zn,ar){var vr=es();try{return Hl(Ln,qn,Zn,ar)}catch(Cr){if(Qi(vr),Cr!==Cr+0)throw Cr;Xi(1,0)}},$:function(Ln){var qn=es();try{return go(Ln)}catch(Zn){if(Qi(qn),Zn!==Zn+0)throw Zn;Xi(1,0)}},ba:function(Ln,qn){var Zn=es();try{return Ol(Ln,qn)}catch(ar){if(Qi(Zn),ar!==ar+0)throw ar;Xi(1,0)}},Y:function(Ln,qn,Zn){var ar=es();try{return Jo(Ln,qn,Zn)}catch(vr){if(Qi(ar),vr!==vr+0)throw vr;Xi(1,0)}},g:function(Ln){var qn=es();try{ci(Ln)()}catch(Zn){if(Qi(qn),Zn!==Zn+0)throw Zn;Xi(1,0)}},r:function(Ln,qn){var Zn=es();try{ci(Ln)(qn)}catch(ar){if(Qi(Zn),ar!==ar+0)throw ar;Xi(1,0)}},i:function(Ln,qn,Zn){var ar=es();try{ci(Ln)(qn,Zn)}catch(vr){if(Qi(ar),vr!==vr+0)throw vr;Xi(1,0)}},ha:function(Ln,qn,Zn,ar){var vr=es();try{ci(Ln)(qn,Zn,ar)}catch(Cr){if(Qi(vr),Cr!==Cr+0)throw Cr;Xi(1,0)}},m:function(Ln,qn,Zn,ar){var vr=es();try{ci(Ln)(qn,Zn,ar)}catch(Cr){if(Qi(vr),Cr!==Cr+0)throw Cr;Xi(1,0)}},v:function(Ln,qn,Zn,ar,vr){var Cr=es();try{ci(Ln)(qn,Zn,ar,vr)}catch(ni){if(Qi(Cr),ni!==ni+0)throw ni;Xi(1,0)}},u:function(Ln,qn,Zn,ar,vr,Cr){var ni=es();try{ci(Ln)(qn,Zn,ar,vr,Cr)}catch(ui){if(Qi(ni),ui!==ui+0)throw ui;Xi(1,0)}},O:function(Ln,qn,Zn,ar,vr,Cr,ni){var ui=es();try{ci(Ln)(qn,Zn,ar,vr,Cr,ni)}catch(ts){if(Qi(ui),ts!==ts+0)throw ts;Xi(1,0)}},A:function(Ln,qn,Zn,ar,vr,Cr,ni,ui){var ts=es();try{ci(Ln)(qn,Zn,ar,vr,Cr,ni,ui)}catch(Ki){if(Qi(ts),Ki!==Ki+0)throw Ki;Xi(1,0)}},ka:function(Ln,qn,Zn,ar,vr,Cr,ni,ui,ts){var Ki=es();try{ci(Ln)(qn,Zn,ar,vr,Cr,ni,ui,ts)}catch(fs){if(Qi(Ki),fs!==fs+0)throw fs;Xi(1,0)}},C:function(Ln,qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs){var Ao=es();try{ci(Ln)(qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs)}catch(ho){if(Qi(Ao),ho!==ho+0)throw ho;Xi(1,0)}},D:function(Ln,qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs,Ao,ho,Rr,Yi,as){var qo=es();try{ci(Ln)(qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs,Ao,ho,Rr,Yi,as)}catch(Xs){if(Qi(qo),Xs!==Xs+0)throw Xs;Xi(1,0)}},fa:function(Ln,qn,Zn,ar,vr,Cr,ni,ui){var ts=es();try{ji(Ln,qn,Zn,ar,vr,Cr,ni,ui)}catch(Ki){if(Qi(ts),Ki!==Ki+0)throw Ki;Xi(1,0)}},da:function(Ln,qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs,Ao){var ho=es();try{xa(Ln,qn,Zn,ar,vr,Cr,ni,ui,ts,Ki,fs,Ao)}catch(Rr){if(Qi(ho),Rr!==Rr+0)throw Rr;Xi(1,0)}},ea:function(Ln,qn,Zn,ar,vr,Cr){var ni=es();try{ia(Ln,qn,Zn,ar,vr,Cr)}catch(ui){if(Qi(ni),ui!==ui+0)throw ui;Xi(1,0)}},o:function(Ln){return Ln},a:Hn||Me.wasmMemory,G:function(Ln){ys=Ln},la:Za,z:function(Ln,qn,Zn,ar){return Za(Ln,qn,Zn,ar)}};(function(){function Ln(vr,Cr){Me.asm=vr.exports,zr.qc.push(Me.asm.sb),rr=Me.asm.ub,Ai.unshift(Me.asm.Va),Dn=Cr,vn||(mi--,Me.monitorRunDependencies&&Me.monitorRunDependencies(mi),mi==0&&Hi&&(vr=Hi,Hi=null,vr()))}function qn(vr){Ln(vr.instance,vr.module)}function Zn(vr){return function(){if(!Nn&&(gn||mn)){if(typeof fetch=="function"&&!gi.startsWith("file://"))return fetch(gi,{credentials:"same-origin"}).then(function(Cr){if(!Cr.ok)throw"failed to load wasm binary file at '"+gi+"'";return Cr.arrayBuffer()}).catch(function(){return Fr()});if(He)return new Promise(function(Cr,ni){He(gi,function(ui){Cr(new Uint8Array(ui))},ni)})}return Promise.resolve().then(function(){return Fr()})}().then(function(Cr){return WebAssembly.instantiate(Cr,ar)}).then(function(Cr){return Cr}).then(vr,function(Cr){Fn("failed to asynchronously prepare wasm: "+Cr),oi(Cr)})}var ar={a:da};if(vn||(mi++,Me.monitorRunDependencies&&Me.monitorRunDependencies(mi)),Me.instantiateWasm)try{return Me.instantiateWasm(ar,Ln)}catch(vr){return Fn("Module.instantiateWasm callback failed with error: "+vr),!1}(Nn||typeof WebAssembly.instantiateStreaming!="function"||yr()||gi.startsWith("file://")||dn||typeof fetch!="function"?Zn(qn):fetch(gi,{credentials:"same-origin"}).then(function(vr){return WebAssembly.instantiateStreaming(vr,ar).then(qn,function(Cr){return Fn("wasm streaming compile failed: "+Cr),Fn("falling back to ArrayBuffer instantiation"),Zn(qn)})})).catch(Ue)})(),Me.___wasm_call_ctors=function(){return(Me.___wasm_call_ctors=Me.asm.Va).apply(null,arguments)},Me._OrtInit=function(){return(Me._OrtInit=Me.asm.Wa).apply(null,arguments)},Me._OrtCreateSessionOptions=function(){return(Me._OrtCreateSessionOptions=Me.asm.Xa).apply(null,arguments)},Me._OrtAppendExecutionProvider=function(){return(Me._OrtAppendExecutionProvider=Me.asm.Ya).apply(null,arguments)},Me._OrtAddSessionConfigEntry=function(){return(Me._OrtAddSessionConfigEntry=Me.asm.Za).apply(null,arguments)},Me._OrtReleaseSessionOptions=function(){return(Me._OrtReleaseSessionOptions=Me.asm._a).apply(null,arguments)},Me._OrtCreateSession=function(){return(Me._OrtCreateSession=Me.asm.$a).apply(null,arguments)},Me._OrtReleaseSession=function(){return(Me._OrtReleaseSession=Me.asm.ab).apply(null,arguments)},Me._OrtGetInputCount=function(){return(Me._OrtGetInputCount=Me.asm.bb).apply(null,arguments)},Me._OrtGetOutputCount=function(){return(Me._OrtGetOutputCount=Me.asm.cb).apply(null,arguments)},Me._OrtGetInputName=function(){return(Me._OrtGetInputName=Me.asm.db).apply(null,arguments)},Me._OrtGetOutputName=function(){return(Me._OrtGetOutputName=Me.asm.eb).apply(null,arguments)},Me._OrtFree=function(){return(Me._OrtFree=Me.asm.fb).apply(null,arguments)},Me._OrtCreateTensor=function(){return(Me._OrtCreateTensor=Me.asm.gb).apply(null,arguments)},Me._OrtGetTensorData=function(){return(Me._OrtGetTensorData=Me.asm.hb).apply(null,arguments)},Me._OrtReleaseTensor=function(){return(Me._OrtReleaseTensor=Me.asm.ib).apply(null,arguments)},Me._OrtCreateRunOptions=function(){return(Me._OrtCreateRunOptions=Me.asm.jb).apply(null,arguments)},Me._OrtAddRunConfigEntry=function(){return(Me._OrtAddRunConfigEntry=Me.asm.kb).apply(null,arguments)},Me._OrtReleaseRunOptions=function(){return(Me._OrtReleaseRunOptions=Me.asm.lb).apply(null,arguments)},Me._OrtRun=function(){return(Me._OrtRun=Me.asm.mb).apply(null,arguments)},Me._OrtEndProfiling=function(){return(Me._OrtEndProfiling=Me.asm.nb).apply(null,arguments)};var mo=Me._pthread_self=function(){return(mo=Me._pthread_self=Me.asm.ob).apply(null,arguments)},Ha=Me._malloc=function(){return(Ha=Me._malloc=Me.asm.pb).apply(null,arguments)},As=Me._free=function(){return(As=Me._free=Me.asm.qb).apply(null,arguments)},Do=Me._fflush=function(){return(Do=Me._fflush=Me.asm.rb).apply(null,arguments)};Me.__emscripten_tls_init=function(){return(Me.__emscripten_tls_init=Me.asm.sb).apply(null,arguments)};var el=Me.___funcs_on_exit=function(){return(el=Me.___funcs_on_exit=Me.asm.tb).apply(null,arguments)},Ga=Me.__emscripten_thread_init=function(){return(Ga=Me.__emscripten_thread_init=Me.asm.vb).apply(null,arguments)};Me.__emscripten_thread_crashed=function(){return(Me.__emscripten_thread_crashed=Me.asm.wb).apply(null,arguments)};var wa,us=Me._emscripten_run_in_main_runtime_thread_js=function(){return(us=Me._emscripten_run_in_main_runtime_thread_js=Me.asm.xb).apply(null,arguments)},Oa=Me.__emscripten_proxy_execute_task_queue=function(){return(Oa=Me.__emscripten_proxy_execute_task_queue=Me.asm.yb).apply(null,arguments)},os=Me.__emscripten_thread_free_data=function(){return(os=Me.__emscripten_thread_free_data=Me.asm.zb).apply(null,arguments)},Qo=Me.__emscripten_thread_exit=function(){return(Qo=Me.__emscripten_thread_exit=Me.asm.Ab).apply(null,arguments)},Xi=Me._setThrew=function(){return(Xi=Me._setThrew=Me.asm.Bb).apply(null,arguments)},ul=Me._emscripten_stack_set_limits=function(){return(ul=Me._emscripten_stack_set_limits=Me.asm.Cb).apply(null,arguments)},es=Me.stackSave=function(){return(es=Me.stackSave=Me.asm.Db).apply(null,arguments)},Qi=Me.stackRestore=function(){return(Qi=Me.stackRestore=Me.asm.Eb).apply(null,arguments)},tl=Me.stackAlloc=function(){return(tl=Me.stackAlloc=Me.asm.Fb).apply(null,arguments)},ha=Me.___cxa_can_catch=function(){return(ha=Me.___cxa_can_catch=Me.asm.Gb).apply(null,arguments)},Fo=Me.___cxa_is_pointer_type=function(){return(Fo=Me.___cxa_is_pointer_type=Me.asm.Hb).apply(null,arguments)},go=Me.dynCall_j=function(){return(go=Me.dynCall_j=Me.asm.Ib).apply(null,arguments)},Vo=Me.dynCall_iiiiij=function(){return(Vo=Me.dynCall_iiiiij=Me.asm.Jb).apply(null,arguments)},Jo=Me.dynCall_jii=function(){return(Jo=Me.dynCall_jii=Me.asm.Kb).apply(null,arguments)},ji=Me.dynCall_viiiiij=function(){return(ji=Me.dynCall_viiiiij=Me.asm.Lb).apply(null,arguments)},ia=Me.dynCall_vjji=function(){return(ia=Me.dynCall_vjji=Me.asm.Mb).apply(null,arguments)},xa=Me.dynCall_viiijjjii=function(){return(xa=Me.dynCall_viiijjjii=Me.asm.Nb).apply(null,arguments)},Hl=Me.dynCall_iij=function(){return(Hl=Me.dynCall_iij=Me.asm.Ob).apply(null,arguments)},Ol=Me.dynCall_ji=function(){return(Ol=Me.dynCall_ji=Me.asm.Pb).apply(null,arguments)},Ys=Me.dynCall_iiiiiij=function(){return(Ys=Me.dynCall_iiiiiij=Me.asm.Qb).apply(null,arguments)},Na=Me.dynCall_iiij=function(){return(Na=Me.dynCall_iiij=Me.asm.Rb).apply(null,arguments)};function Nl(){function Ln(){if(!wa&&(wa=!0,Me.calledRun=!0,!lr)&&(vn||Ii(Ai),Oe(Me),Me.onRuntimeInitialized&&Me.onRuntimeInitialized(),!vn)){if(Me.postRun)for(typeof Me.postRun=="function"&&(Me.postRun=[Me.postRun]);Me.postRun.length;){var qn=Me.postRun.shift();Wr.unshift(qn)}Ii(Wr)}}if(!(0<mi))if(vn)Oe(Me),vn||Ii(Ai),postMessage({cmd:"loaded"});else{if(Me.preRun)for(typeof Me.preRun=="function"&&(Me.preRun=[Me.preRun]);Me.preRun.length;)ei();Ii(Ni),0<mi||(Me.setStatus?(Me.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Me.setStatus("")},1),Ln()},1)):Ln())}}if(Me.UTF8ToString=Er,Me.stringToUTF8=function(Ln,qn,Zn){return $r(Ln,De(),qn,Zn)},Me.lengthBytesUTF8=Yr,Me.keepRuntimeAlive=hi,Me.wasmMemory=Hn,Me.stackSave=es,Me.stackRestore=Qi,Me.stackAlloc=tl,Me.ExitStatus=Kr,Me.PThread=zr,Hi=function Ln(){wa||Nl(),wa||(Hi=Ln)},Me.preInit)for(typeof Me.preInit=="function"&&(Me.preInit=[Me.preInit]);0<Me.preInit.length;)Me.preInit.pop()();return Nl(),Re.ready});n.exports=Ee},932:(n,e,t)=>{var Te,Ee=(Te=(Te=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Re){var Ce,De,$e;Re=Re||{},Ce||(Ce=Re!==void 0?Re:{}),Ce.ready=new Promise(function(Gn,ir){De=Gn,$e=ir});var Ve,Be,Me,Oe,Ue,ze,He=Object.assign({},Ce),Ge="./this.program",Ke=(Gn,ir)=>{throw ir},Xe=typeof window=="object",Je=typeof importScripts=="function",un=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",fn="";un?(fn=Je?t(908).dirname(fn)+"/":"//",ze=()=>{Ue||(Oe=t(1384),Ue=t(908))},Ve=function(Gn,ir){return ze(),Gn=Ue.normalize(Gn),Oe.readFileSync(Gn,ir?void 0:"utf8")},Me=Gn=>((Gn=Ve(Gn,!0)).buffer||(Gn=new Uint8Array(Gn)),Gn),Be=(Gn,ir,cr)=>{ze(),Gn=Ue.normalize(Gn),Oe.readFile(Gn,function(_r,Ir){_r?cr(_r):ir(Ir.buffer)})},1<process.argv.length&&(Ge=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Gn){if(!(Gn instanceof Ai))throw Gn}),process.on("unhandledRejection",function(Gn){throw Gn}),Ke=(Gn,ir)=>{if(dn||0<mr)throw process.exitCode=Gn,ir;ir instanceof Ai||mn("exiting due to exception: "+ir),process.exit(Gn)},Ce.inspect=function(){return"[Emscripten Module object]"}):(Xe||Je)&&(Je?fn=self.location.href:typeof document<"u"&&document.currentScript&&(fn=document.currentScript.src),Te&&(fn=Te),fn=fn.indexOf("blob:")!==0?fn.substr(0,fn.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Ve=Gn=>{var ir=new XMLHttpRequest;return ir.open("GET",Gn,!1),ir.send(null),ir.responseText},Je&&(Me=Gn=>{var ir=new XMLHttpRequest;return ir.open("GET",Gn,!1),ir.responseType="arraybuffer",ir.send(null),new Uint8Array(ir.response)}),Be=(Gn,ir,cr)=>{var _r=new XMLHttpRequest;_r.open("GET",Gn,!0),_r.responseType="arraybuffer",_r.onload=()=>{_r.status==200||_r.status==0&&_r.response?ir(_r.response):cr()},_r.onerror=cr,_r.send(null)});var yn,gn=Ce.print||console.log.bind(console),mn=Ce.printErr||console.warn.bind(console);Object.assign(Ce,He),He=null,Ce.thisProgram&&(Ge=Ce.thisProgram),Ce.quit&&(Ke=Ce.quit),Ce.wasmBinary&&(yn=Ce.wasmBinary);var dn=Ce.noExitRuntime||!1;typeof WebAssembly!="object"&&Gr("no native wasm support detected");var vn,bn,Tn,En,In,Nn,On=!1,Fn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function $n(Gn,ir,cr){var _r=(ir>>>=0)+cr;for(cr=ir;Gn[cr]&&!(cr>=_r);)++cr;if(16<cr-ir&&Gn.buffer&&Fn)return Fn.decode(Gn.subarray(ir,cr));for(_r="";ir<cr;){var Ir=Gn[ir++];if(128&Ir){var Or=63&Gn[ir++];if((224&Ir)==192)_r+=String.fromCharCode((31&Ir)<<6|Or);else{var Zr=63&Gn[ir++];65536>(Ir=(240&Ir)==224?(15&Ir)<<12|Or<<6|Zr:(7&Ir)<<18|Or<<12|Zr<<6|63&Gn[ir++])?_r+=String.fromCharCode(Ir):(Ir-=65536,_r+=String.fromCharCode(55296|Ir>>10,56320|1023&Ir))}}else _r+=String.fromCharCode(Ir)}return _r}function Hn(Gn,ir){return(Gn>>>=0)?$n(En,Gn,ir):""}function Dn(Gn,ir,cr,_r){if(!(0<_r))return 0;var Ir=cr>>>=0;_r=cr+_r-1;for(var Or=0;Or<Gn.length;++Or){var Zr=Gn.charCodeAt(Or);if(55296<=Zr&&57343>=Zr&&(Zr=65536+((1023&Zr)<<10)|1023&Gn.charCodeAt(++Or)),127>=Zr){if(cr>=_r)break;ir[cr++>>>0]=Zr}else{if(2047>=Zr){if(cr+1>=_r)break;ir[cr++>>>0]=192|Zr>>6}else{if(65535>=Zr){if(cr+2>=_r)break;ir[cr++>>>0]=224|Zr>>12}else{if(cr+3>=_r)break;ir[cr++>>>0]=240|Zr>>18,ir[cr++>>>0]=128|Zr>>12&63}ir[cr++>>>0]=128|Zr>>6&63}ir[cr++>>>0]=128|63&Zr}}return ir[cr>>>0]=0,cr-Ir}function Un(Gn){for(var ir=0,cr=0;cr<Gn.length;++cr){var _r=Gn.charCodeAt(cr);127>=_r?ir++:2047>=_r?ir+=2:55296<=_r&&57343>=_r?(ir+=4,++cr):ir+=3}return ir}function Cn(){var Gn=vn.buffer;bn=Gn,Ce.HEAP8=Tn=new Int8Array(Gn),Ce.HEAP16=new Int16Array(Gn),Ce.HEAP32=In=new Int32Array(Gn),Ce.HEAPU8=En=new Uint8Array(Gn),Ce.HEAPU16=new Uint16Array(Gn),Ce.HEAPU32=Nn=new Uint32Array(Gn),Ce.HEAPF32=new Float32Array(Gn),Ce.HEAPF64=new Float64Array(Gn)}var kn,Yn=[],Jn=[],sr=[],lr=[],mr=0;function gr(){var Gn=Ce.preRun.shift();Yn.unshift(Gn)}var Er,$r=0,Yr=null;function Gr(Gn){throw Ce.onAbort&&Ce.onAbort(Gn),mn(Gn="Aborted("+Gn+")"),On=!0,Gn=new WebAssembly.RuntimeError(Gn+". Build with -sASSERTIONS for more info."),$e(Gn),Gn}function Tr(){return Er.startsWith("data:application/octet-stream;base64,")}if(Er="ort-wasm.wasm",!Tr()){var rr=Er;Er=Ce.locateFile?Ce.locateFile(rr,fn):fn+rr}function Ni(){var Gn=Er;try{if(Gn==Er&&yn)return new Uint8Array(yn);if(Me)return Me(Gn);throw"both async and sync fetching of the wasm failed"}catch(ir){Gr(ir)}}function Ai(Gn){this.name="ExitStatus",this.message="Program terminated with exit("+Gn+")",this.status=Gn}function bi(Gn){for(;0<Gn.length;)Gn.shift()(Ce)}var Wr=[],hi=0,ei=0;function gi(Gn){this.Db=Gn,this.zb=Gn-24,this.Ub=function(ir){Nn[this.zb+4>>2>>>0]=ir},this.Eb=function(){return Nn[this.zb+4>>2>>>0]},this.Sb=function(ir){Nn[this.zb+8>>2>>>0]=ir},this.Wb=function(){return Nn[this.zb+8>>2>>>0]},this.Tb=function(){In[this.zb>>2>>>0]=0},this.Ib=function(ir){Tn[this.zb+12>>0>>>0]=ir?1:0},this.Pb=function(){return Tn[this.zb+12>>0>>>0]!=0},this.Jb=function(ir){Tn[this.zb+13>>0>>>0]=ir?1:0},this.Lb=function(){return Tn[this.zb+13>>0>>>0]!=0},this.Rb=function(ir,cr){this.Fb(0),this.Ub(ir),this.Sb(cr),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){In[this.zb>>2>>>0]+=1},this.Xb=function(){var ir=In[this.zb>>2>>>0];return In[this.zb>>2>>>0]=ir-1,ir===1},this.Fb=function(ir){Nn[this.zb+16>>2>>>0]=ir},this.Ob=function(){return Nn[this.zb+16>>2>>>0]},this.Qb=function(){if(Zs(this.Eb()))return Nn[this.Db>>2>>>0];var ir=this.Ob();return ir!==0?ir:this.Db}}function mi(Gn){return ws(new gi(Gn).zb)}var Hi=[];function oi(Gn){var ir=Hi[Gn];return ir||(Gn>=Hi.length&&(Hi.length=Gn+1),Hi[Gn]=ir=kn.get(Gn)),ir}function yr(Gn){var ir=Un(Gn)+1,cr=ci(ir);return cr&&Dn(Gn,Tn,cr,ir),cr}var Fr={};function Qr(){if(!Kr){var Gn,ir={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Ge||"./this.program"};for(Gn in Fr)Fr[Gn]===void 0?delete ir[Gn]:ir[Gn]=Fr[Gn];var cr=[];for(Gn in ir)cr.push(Gn+"="+ir[Gn]);Kr=cr}return Kr}var Kr,si=[null,[],[]];function fi(Gn,ir){var cr=si[Gn];ir===0||ir===10?((Gn===1?gn:mn)($n(cr,0)),cr.length=0):cr.push(ir)}var Li=0;function $i(Gn){return Gn%4==0&&(Gn%100!=0||Gn%400==0)}var zr=[31,29,31,30,31,30,31,31,30,31,30,31],Ii=[31,28,31,30,31,30,31,31,30,31,30,31];function Ui(Gn,ir,cr,_r){function Ir(Nr,Vi,is){for(Nr=typeof Nr=="number"?Nr.toString():Nr||"";Nr.length<Vi;)Nr=is[0]+Nr;return Nr}function Or(Nr,Vi){return Ir(Nr,Vi,"0")}function Zr(Nr,Vi){function is(Xo){return 0>Xo?-1:0<Xo?1:0}var Eo;return(Eo=is(Nr.getFullYear()-Vi.getFullYear()))===0&&(Eo=is(Nr.getMonth()-Vi.getMonth()))===0&&(Eo=is(Nr.getDate()-Vi.getDate())),Eo}function yi(Nr){switch(Nr.getDay()){case 0:return new Date(Nr.getFullYear()-1,11,29);case 1:return Nr;case 2:return new Date(Nr.getFullYear(),0,3);case 3:return new Date(Nr.getFullYear(),0,2);case 4:return new Date(Nr.getFullYear(),0,1);case 5:return new Date(Nr.getFullYear()-1,11,31);case 6:return new Date(Nr.getFullYear()-1,11,30)}}function pi(Nr){var Vi=Nr.Bb;for(Nr=new Date(new Date(Nr.Cb+1900,0,1).getTime());0<Vi;){var is=Nr.getMonth(),Eo=($i(Nr.getFullYear())?zr:Ii)[is];if(!(Vi>Eo-Nr.getDate())){Nr.setDate(Nr.getDate()+Vi);break}Vi-=Eo-Nr.getDate()+1,Nr.setDate(1),11>is?Nr.setMonth(is+1):(Nr.setMonth(0),Nr.setFullYear(Nr.getFullYear()+1))}return is=new Date(Nr.getFullYear()+1,0,4),Vi=yi(new Date(Nr.getFullYear(),0,4)),is=yi(is),0>=Zr(Vi,Nr)?0>=Zr(is,Nr)?Nr.getFullYear()+1:Nr.getFullYear():Nr.getFullYear()-1}var zi=In[_r+40>>2>>>0];for(var _s in _r={$b:In[_r>>2>>>0],Zb:In[_r+4>>2>>>0],Gb:In[_r+8>>2>>>0],Kb:In[_r+12>>2>>>0],Hb:In[_r+16>>2>>>0],Cb:In[_r+20>>2>>>0],Ab:In[_r+24>>2>>>0],Bb:In[_r+28>>2>>>0],bc:In[_r+32>>2>>>0],Yb:In[_r+36>>2>>>0],ac:zi?Hn(zi):""},cr=Hn(cr),zi={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})cr=cr.replace(new RegExp(_s,"g"),zi[_s]);var Gi="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),js="January February March April May June July August September October November December".split(" ");for(_s in zi={"%a":function(Nr){return Gi[Nr.Ab].substring(0,3)},"%A":function(Nr){return Gi[Nr.Ab]},"%b":function(Nr){return js[Nr.Hb].substring(0,3)},"%B":function(Nr){return js[Nr.Hb]},"%C":function(Nr){return Or((Nr.Cb+1900)/100|0,2)},"%d":function(Nr){return Or(Nr.Kb,2)},"%e":function(Nr){return Ir(Nr.Kb,2," ")},"%g":function(Nr){return pi(Nr).toString().substring(2)},"%G":function(Nr){return pi(Nr)},"%H":function(Nr){return Or(Nr.Gb,2)},"%I":function(Nr){return(Nr=Nr.Gb)==0?Nr=12:12<Nr&&(Nr-=12),Or(Nr,2)},"%j":function(Nr){for(var Vi=0,is=0;is<=Nr.Hb-1;Vi+=($i(Nr.Cb+1900)?zr:Ii)[is++]);return Or(Nr.Kb+Vi,3)},"%m":function(Nr){return Or(Nr.Hb+1,2)},"%M":function(Nr){return Or(Nr.Zb,2)},"%n":function(){return`
`},"%p":function(Nr){return 0<=Nr.Gb&&12>Nr.Gb?"AM":"PM"},"%S":function(Nr){return Or(Nr.$b,2)},"%t":function(){return"	"},"%u":function(Nr){return Nr.Ab||7},"%U":function(Nr){return Or(Math.floor((Nr.Bb+7-Nr.Ab)/7),2)},"%V":function(Nr){var Vi=Math.floor((Nr.Bb+7-(Nr.Ab+6)%7)/7);if(2>=(Nr.Ab+371-Nr.Bb-2)%7&&Vi++,Vi)Vi==53&&((is=(Nr.Ab+371-Nr.Bb)%7)==4||is==3&&$i(Nr.Cb)||(Vi=1));else{Vi=52;var is=(Nr.Ab+7-Nr.Bb-1)%7;(is==4||is==5&&$i(Nr.Cb%400-1))&&Vi++}return Or(Vi,2)},"%w":function(Nr){return Nr.Ab},"%W":function(Nr){return Or(Math.floor((Nr.Bb+7-(Nr.Ab+6)%7)/7),2)},"%y":function(Nr){return(Nr.Cb+1900).toString().substring(2)},"%Y":function(Nr){return Nr.Cb+1900},"%z":function(Nr){var Vi=0<=(Nr=Nr.Yb);return Nr=Math.abs(Nr)/60,(Vi?"+":"-")+("0000"+(Nr/60*100+Nr%60)).slice(-4)},"%Z":function(Nr){return Nr.ac},"%%":function(){return"%"}},cr=cr.replace(/%%/g,"\0\0"),zi)cr.includes(_s)&&(cr=cr.replace(new RegExp(_s,"g"),zi[_s](_r)));return _s=function(Nr){var Vi=Array(Un(Nr)+1);return Dn(Nr,Vi,0,Vi.length),Vi}(cr=cr.replace(/\0\0/g,"%")),_s.length>ir?0:(Tn.set(_s,Gn>>>0),_s.length-1)}var wi={a:function(Gn){return ci(Gn+24)+24},m:function(Gn){return(Gn=new gi(Gn)).Pb()||(Gn.Ib(!0),hi--),Gn.Jb(!1),Wr.push(Gn),Gn.Nb(),Gn.Qb()},ia:function(Gn){throw mn("Unexpected exception thrown, this is not properly supported - aborting"),On=!0,Gn},w:function(){ri(0);var Gn=Wr.pop();if(Gn.Xb()&&!Gn.Lb()){var ir=Gn.Wb();ir&&oi(ir)(Gn.Db),mi(Gn.Db)}ei=0},d:function(){var Gn=ei;if(!Gn)return Li=0;var ir=new gi(Gn);ir.Fb(Gn);var cr=ir.Eb();if(!cr)return Li=0,Gn;for(var _r=Array.prototype.slice.call(arguments),Ir=0;Ir<_r.length;Ir++){var Or=_r[Ir];if(Or===0||Or===cr)break;if(To(Or,cr,ir.zb+16))return Li=Or,Gn}return Li=cr,Gn},k:function(){var Gn=ei;if(!Gn)return Li=0;var ir=new gi(Gn);ir.Fb(Gn);var cr=ir.Eb();if(!cr)return Li=0,Gn;for(var _r=Array.prototype.slice.call(arguments),Ir=0;Ir<_r.length;Ir++){var Or=_r[Ir];if(Or===0||Or===cr)break;if(To(Or,cr,ir.zb+16))return Li=Or,Gn}return Li=cr,Gn},g:function(){var Gn=ei;if(!Gn)return Li=0;var ir=new gi(Gn);ir.Fb(Gn);var cr=ir.Eb();if(!cr)return Li=0,Gn;for(var _r=Array.prototype.slice.call(arguments),Ir=0;Ir<_r.length;Ir++){var Or=_r[Ir];if(Or===0||Or===cr)break;if(To(Or,cr,ir.zb+16))return Li=Or,Gn}return Li=cr,Gn},s:mi,L:function(){var Gn=Wr.pop();Gn||Gr("no exception to throw");var ir=Gn.Db;throw Gn.Lb()||(Wr.push(Gn),Gn.Jb(!0),Gn.Ib(!1),hi++),ei=ir,ir},b:function(Gn,ir,cr){throw new gi(Gn).Rb(ir,cr),ei=Gn,hi++,Gn},la:function(){return hi},i:function(Gn){throw ei||(ei=Gn),Gn},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Gr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Gr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Gn,ir){Gn=new Date(1e3*(Nn[Gn>>>2]+4294967296*In[Gn+4>>>2])),In[ir>>2>>>0]=Gn.getUTCSeconds(),In[ir+4>>2>>>0]=Gn.getUTCMinutes(),In[ir+8>>2>>>0]=Gn.getUTCHours(),In[ir+12>>2>>>0]=Gn.getUTCDate(),In[ir+16>>2>>>0]=Gn.getUTCMonth(),In[ir+20>>2>>>0]=Gn.getUTCFullYear()-1900,In[ir+24>>2>>>0]=Gn.getUTCDay(),In[ir+28>>2>>>0]=(Gn.getTime()-Date.UTC(Gn.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Gn,ir){Gn=new Date(1e3*(Nn[Gn>>>2]+4294967296*In[Gn+4>>>2])),In[ir>>2>>>0]=Gn.getSeconds(),In[ir+4>>2>>>0]=Gn.getMinutes(),In[ir+8>>2>>>0]=Gn.getHours(),In[ir+12>>2>>>0]=Gn.getDate(),In[ir+16>>2>>>0]=Gn.getMonth(),In[ir+20>>2>>>0]=Gn.getFullYear()-1900,In[ir+24>>2>>>0]=Gn.getDay();var cr=new Date(Gn.getFullYear(),0,1);In[ir+28>>2>>>0]=(Gn.getTime()-cr.getTime())/864e5|0,In[ir+36>>2>>>0]=-60*Gn.getTimezoneOffset();var _r=new Date(Gn.getFullYear(),6,1).getTimezoneOffset();cr=cr.getTimezoneOffset(),In[ir+32>>2>>>0]=0|(_r!=cr&&Gn.getTimezoneOffset()==Math.min(cr,_r))},Fa:function(Gn){var ir=new Date(In[Gn+20>>2>>>0]+1900,In[Gn+16>>2>>>0],In[Gn+12>>2>>>0],In[Gn+8>>2>>>0],In[Gn+4>>2>>>0],In[Gn>>2>>>0],0),cr=In[Gn+32>>2>>>0],_r=ir.getTimezoneOffset(),Ir=new Date(ir.getFullYear(),0,1),Or=new Date(ir.getFullYear(),6,1).getTimezoneOffset(),Zr=Ir.getTimezoneOffset(),yi=Math.min(Zr,Or);return 0>cr?In[Gn+32>>2>>>0]=+(Or!=Zr&&yi==_r):0<cr!=(yi==_r)&&(Or=Math.max(Zr,Or),ir.setTime(ir.getTime()+6e4*((0<cr?yi:Or)-_r))),In[Gn+24>>2>>>0]=ir.getDay(),In[Gn+28>>2>>>0]=(ir.getTime()-Ir.getTime())/864e5|0,In[Gn>>2>>>0]=ir.getSeconds(),In[Gn+4>>2>>>0]=ir.getMinutes(),In[Gn+8>>2>>>0]=ir.getHours(),In[Gn+12>>2>>>0]=ir.getDate(),In[Gn+16>>2>>>0]=ir.getMonth(),ir.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Gn(ir,cr,_r){Gn.Vb||(Gn.Vb=!0,function(Ir,Or,Zr){function yi(js){return(js=js.toTimeString().match(/\(([A-Za-z ]+)\)$/))?js[1]:"GMT"}var pi=new Date().getFullYear(),zi=new Date(pi,0,1),_s=new Date(pi,6,1);pi=zi.getTimezoneOffset();var Gi=_s.getTimezoneOffset();In[Ir>>2>>>0]=60*Math.max(pi,Gi),In[Or>>2>>>0]=+(pi!=Gi),Ir=yi(zi),Or=yi(_s),Ir=yr(Ir),Or=yr(Or),Gi<pi?(Nn[Zr>>2>>>0]=Ir,Nn[Zr+4>>2>>>0]=Or):(Nn[Zr>>2>>>0]=Or,Nn[Zr+4>>2>>>0]=Ir)}(ir,cr,_r))},B:function(){Gr("")},ma:function(){return 4294901760},I:un?()=>{var Gn=process.hrtime();return 1e3*Gn[0]+Gn[1]/1e6}:()=>performance.now(),xa:function(Gn,ir,cr){En.copyWithin(Gn>>>0,ir>>>0,ir+cr>>>0)},G:function(Gn){var ir=En.length;if(4294901760<(Gn>>>=0))return!1;for(var cr=1;4>=cr;cr*=2){var _r=ir*(1+.2/cr);_r=Math.min(_r,Gn+100663296);var Ir=Math;_r=Math.max(Gn,_r),Ir=Ir.min.call(Ir,4294901760,_r+(65536-_r%65536)%65536);e:{try{vn.grow(Ir-bn.byteLength+65535>>>16),Cn();var Or=1;break e}catch{}Or=void 0}if(Or)return!0}return!1},va:function(Gn,ir){var cr=0;return Qr().forEach(function(_r,Ir){var Or=ir+cr;for(Ir=Nn[Gn+4*Ir>>2>>>0]=Or,Or=0;Or<_r.length;++Or)Tn[Ir++>>0>>>0]=_r.charCodeAt(Or);Tn[Ir>>0>>>0]=0,cr+=_r.length+1}),0},wa:function(Gn,ir){var cr=Qr();Nn[Gn>>2>>>0]=cr.length;var _r=0;return cr.forEach(function(Ir){_r+=Ir.length+1}),Nn[ir>>2>>>0]=_r,0},ba:function(Gn){dn||0<mr||(rs(),bi(sr),hs(0),si[1].length&&fi(1,10),si[2].length&&fi(2,10)),dn||0<mr||(Ce.onExit&&Ce.onExit(Gn),On=!0),Ke(Gn,new Ai(Gn))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Gn,ir,cr,_r){for(var Ir=0,Or=0;Or<cr;Or++){var Zr=Nn[ir>>2>>>0],yi=Nn[ir+4>>2>>>0];ir+=8;for(var pi=0;pi<yi;pi++)fi(Gn,En[Zr+pi>>>0]);Ir+=yi}return Nn[_r>>2>>>0]=Ir,0},c:function(){return Li},ja:function Gn(ir,cr){Gn.Mb||(Gn.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Ir=new Uint8Array(1);return()=>(crypto.getRandomValues(Ir),Ir[0])}if(un)try{var Or=t(Object(function(){var Zr=new Error("Cannot find module 'crypto'");throw Zr.code="MODULE_NOT_FOUND",Zr}()));return()=>Or.randomBytes(1)[0]}catch{}return()=>Gr("randomDevice")}());for(var _r=0;_r<cr;_r++)Tn[ir+_r>>0>>>0]=Gn.Mb();return 0},ea:function(Gn,ir,cr){var _r=ai();try{return oi(Gn)(ir,cr)}catch(Ir){if(Fi(_r),Ir!==Ir+0)throw Ir;ri(1,0)}},fa:function(Gn,ir,cr){var _r=ai();try{return oi(Gn)(ir,cr)}catch(Ir){if(Fi(_r),Ir!==Ir+0)throw Ir;ri(1,0)}},J:function(Gn){var ir=ai();try{return oi(Gn)()}catch(cr){if(Fi(ir),cr!==cr+0)throw cr;ri(1,0)}},e:function(Gn,ir){var cr=ai();try{return oi(Gn)(ir)}catch(_r){if(Fi(cr),_r!==_r+0)throw _r;ri(1,0)}},N:function(Gn,ir,cr){var _r=ai();try{return oi(Gn)(ir,cr)}catch(Ir){if(Fi(_r),Ir!==Ir+0)throw Ir;ri(1,0)}},O:function(Gn,ir,cr){var _r=ai();try{return oi(Gn)(ir,cr)}catch(Ir){if(Fi(_r),Ir!==Ir+0)throw Ir;ri(1,0)}},j:function(Gn,ir,cr){var _r=ai();try{return oi(Gn)(ir,cr)}catch(Ir){if(Fi(_r),Ir!==Ir+0)throw Ir;ri(1,0)}},o:function(Gn,ir,cr,_r){var Ir=ai();try{return oi(Gn)(ir,cr,_r)}catch(Or){if(Fi(Ir),Or!==Or+0)throw Or;ri(1,0)}},p:function(Gn,ir,cr,_r,Ir){var Or=ai();try{return oi(Gn)(ir,cr,_r,Ir)}catch(Zr){if(Fi(Or),Zr!==Zr+0)throw Zr;ri(1,0)}},M:function(Gn,ir,cr,_r,Ir,Or){var Zr=ai();try{return oi(Gn)(ir,cr,_r,Ir,Or)}catch(yi){if(Fi(Zr),yi!==yi+0)throw yi;ri(1,0)}},r:function(Gn,ir,cr,_r,Ir,Or){var Zr=ai();try{return oi(Gn)(ir,cr,_r,Ir,Or)}catch(yi){if(Fi(Zr),yi!==yi+0)throw yi;ri(1,0)}},v:function(Gn,ir,cr,_r,Ir,Or,Zr){var yi=ai();try{return oi(Gn)(ir,cr,_r,Ir,Or,Zr)}catch(pi){if(Fi(yi),pi!==pi+0)throw pi;ri(1,0)}},K:function(Gn,ir,cr,_r,Ir,Or,Zr,yi){var pi=ai();try{return oi(Gn)(ir,cr,_r,Ir,Or,Zr,yi)}catch(zi){if(Fi(pi),zi!==zi+0)throw zi;ri(1,0)}},D:function(Gn,ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s,Gi){var js=ai();try{return oi(Gn)(ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s,Gi)}catch(Nr){if(Fi(js),Nr!==Nr+0)throw Nr;ri(1,0)}},X:function(Gn,ir,cr,_r,Ir,Or,Zr,yi){var pi=ai();try{return ra(Gn,ir,cr,_r,Ir,Or,Zr,yi)}catch(zi){if(Fi(pi),zi!==zi+0)throw zi;ri(1,0)}},V:function(Gn,ir,cr,_r,Ir,Or,Zr){var yi=ai();try{return gs(Gn,ir,cr,_r,Ir,Or,Zr)}catch(pi){if(Fi(yi),pi!==pi+0)throw pi;ri(1,0)}},U:function(Gn,ir,cr,_r,Ir){var Or=ai();try{return ua(Gn,ir,cr,_r,Ir)}catch(Zr){if(Fi(Or),Zr!==Zr+0)throw Zr;ri(1,0)}},Z:function(Gn,ir,cr,_r){var Ir=ai();try{return Os(Gn,ir,cr,_r)}catch(Or){if(Fi(Ir),Or!==Or+0)throw Or;ri(1,0)}},W:function(Gn){var ir=ai();try{return Ci(Gn)}catch(cr){if(Fi(ir),cr!==cr+0)throw cr;ri(1,0)}},Y:function(Gn,ir){var cr=ai();try{return Ts(Gn,ir)}catch(_r){if(Fi(cr),_r!==_r+0)throw _r;ri(1,0)}},T:function(Gn,ir,cr){var _r=ai();try{return Mo(Gn,ir,cr)}catch(Ir){if(Fi(_r),Ir!==Ir+0)throw Ir;ri(1,0)}},f:function(Gn){var ir=ai();try{oi(Gn)()}catch(cr){if(Fi(ir),cr!==cr+0)throw cr;ri(1,0)}},q:function(Gn,ir){var cr=ai();try{oi(Gn)(ir)}catch(_r){if(Fi(cr),_r!==_r+0)throw _r;ri(1,0)}},h:function(Gn,ir,cr){var _r=ai();try{oi(Gn)(ir,cr)}catch(Ir){if(Fi(_r),Ir!==Ir+0)throw Ir;ri(1,0)}},da:function(Gn,ir,cr,_r){var Ir=ai();try{oi(Gn)(ir,cr,_r)}catch(Or){if(Fi(Ir),Or!==Or+0)throw Or;ri(1,0)}},l:function(Gn,ir,cr,_r){var Ir=ai();try{oi(Gn)(ir,cr,_r)}catch(Or){if(Fi(Ir),Or!==Or+0)throw Or;ri(1,0)}},t:function(Gn,ir,cr,_r,Ir){var Or=ai();try{oi(Gn)(ir,cr,_r,Ir)}catch(Zr){if(Fi(Or),Zr!==Zr+0)throw Zr;ri(1,0)}},u:function(Gn,ir,cr,_r,Ir,Or){var Zr=ai();try{oi(Gn)(ir,cr,_r,Ir,Or)}catch(yi){if(Fi(Zr),yi!==yi+0)throw yi;ri(1,0)}},x:function(Gn,ir,cr,_r,Ir,Or,Zr){var yi=ai();try{oi(Gn)(ir,cr,_r,Ir,Or,Zr)}catch(pi){if(Fi(yi),pi!==pi+0)throw pi;ri(1,0)}},z:function(Gn,ir,cr,_r,Ir,Or,Zr,yi){var pi=ai();try{oi(Gn)(ir,cr,_r,Ir,Or,Zr,yi)}catch(zi){if(Fi(pi),zi!==zi+0)throw zi;ri(1,0)}},ga:function(Gn,ir,cr,_r,Ir,Or,Zr,yi,pi){var zi=ai();try{oi(Gn)(ir,cr,_r,Ir,Or,Zr,yi,pi)}catch(_s){if(Fi(zi),_s!==_s+0)throw _s;ri(1,0)}},A:function(Gn,ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s){var Gi=ai();try{oi(Gn)(ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s)}catch(js){if(Fi(Gi),js!==js+0)throw js;ri(1,0)}},C:function(Gn,ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s,Gi,js,Nr,Vi,is){var Eo=ai();try{oi(Gn)(ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s,Gi,js,Nr,Vi,is)}catch(Xo){if(Fi(Eo),Xo!==Xo+0)throw Xo;ri(1,0)}},aa:function(Gn,ir,cr,_r,Ir,Or,Zr,yi){var pi=ai();try{Ls(Gn,ir,cr,_r,Ir,Or,Zr,yi)}catch(zi){if(Fi(pi),zi!==zi+0)throw zi;ri(1,0)}},_:function(Gn,ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s,Gi){var js=ai();try{xs(Gn,ir,cr,_r,Ir,Or,Zr,yi,pi,zi,_s,Gi)}catch(Nr){if(Fi(js),Nr!==Nr+0)throw Nr;ri(1,0)}},$:function(Gn,ir,cr,_r,Ir,Or){var Zr=ai();try{eo(Gn,ir,cr,_r,Ir,Or)}catch(yi){if(Fi(Zr),yi!==yi+0)throw yi;ri(1,0)}},n:function(Gn){return Gn},F:function(Gn){Li=Gn},ha:Ui,y:function(Gn,ir,cr,_r){return Ui(Gn,ir,cr,_r)}};(function(){function Gn(Ir){Ce.asm=Ir.exports,vn=Ce.asm.Ka,Cn(),kn=Ce.asm.ib,Jn.unshift(Ce.asm.La),$r--,Ce.monitorRunDependencies&&Ce.monitorRunDependencies($r),$r==0&&Yr&&(Ir=Yr,Yr=null,Ir())}function ir(Ir){Gn(Ir.instance)}function cr(Ir){return function(){if(!yn&&(Xe||Je)){if(typeof fetch=="function"&&!Er.startsWith("file://"))return fetch(Er,{credentials:"same-origin"}).then(function(Or){if(!Or.ok)throw"failed to load wasm binary file at '"+Er+"'";return Or.arrayBuffer()}).catch(function(){return Ni()});if(Be)return new Promise(function(Or,Zr){Be(Er,function(yi){Or(new Uint8Array(yi))},Zr)})}return Promise.resolve().then(function(){return Ni()})}().then(function(Or){return WebAssembly.instantiate(Or,_r)}).then(function(Or){return Or}).then(Ir,function(Or){mn("failed to asynchronously prepare wasm: "+Or),Gr(Or)})}var _r={a:wi};if($r++,Ce.monitorRunDependencies&&Ce.monitorRunDependencies($r),Ce.instantiateWasm)try{return Ce.instantiateWasm(_r,Gn)}catch(Ir){return mn("Module.instantiateWasm callback failed with error: "+Ir),!1}(yn||typeof WebAssembly.instantiateStreaming!="function"||Tr()||Er.startsWith("file://")||un||typeof fetch!="function"?cr(ir):fetch(Er,{credentials:"same-origin"}).then(function(Ir){return WebAssembly.instantiateStreaming(Ir,_r).then(ir,function(Or){return mn("wasm streaming compile failed: "+Or),mn("falling back to ArrayBuffer instantiation"),cr(ir)})})).catch($e)})(),Ce.___wasm_call_ctors=function(){return(Ce.___wasm_call_ctors=Ce.asm.La).apply(null,arguments)},Ce._OrtInit=function(){return(Ce._OrtInit=Ce.asm.Ma).apply(null,arguments)},Ce._OrtCreateSessionOptions=function(){return(Ce._OrtCreateSessionOptions=Ce.asm.Na).apply(null,arguments)},Ce._OrtAppendExecutionProvider=function(){return(Ce._OrtAppendExecutionProvider=Ce.asm.Oa).apply(null,arguments)},Ce._OrtAddSessionConfigEntry=function(){return(Ce._OrtAddSessionConfigEntry=Ce.asm.Pa).apply(null,arguments)},Ce._OrtReleaseSessionOptions=function(){return(Ce._OrtReleaseSessionOptions=Ce.asm.Qa).apply(null,arguments)},Ce._OrtCreateSession=function(){return(Ce._OrtCreateSession=Ce.asm.Ra).apply(null,arguments)},Ce._OrtReleaseSession=function(){return(Ce._OrtReleaseSession=Ce.asm.Sa).apply(null,arguments)},Ce._OrtGetInputCount=function(){return(Ce._OrtGetInputCount=Ce.asm.Ta).apply(null,arguments)},Ce._OrtGetOutputCount=function(){return(Ce._OrtGetOutputCount=Ce.asm.Ua).apply(null,arguments)},Ce._OrtGetInputName=function(){return(Ce._OrtGetInputName=Ce.asm.Va).apply(null,arguments)},Ce._OrtGetOutputName=function(){return(Ce._OrtGetOutputName=Ce.asm.Wa).apply(null,arguments)},Ce._OrtFree=function(){return(Ce._OrtFree=Ce.asm.Xa).apply(null,arguments)},Ce._OrtCreateTensor=function(){return(Ce._OrtCreateTensor=Ce.asm.Ya).apply(null,arguments)},Ce._OrtGetTensorData=function(){return(Ce._OrtGetTensorData=Ce.asm.Za).apply(null,arguments)},Ce._OrtReleaseTensor=function(){return(Ce._OrtReleaseTensor=Ce.asm._a).apply(null,arguments)},Ce._OrtCreateRunOptions=function(){return(Ce._OrtCreateRunOptions=Ce.asm.$a).apply(null,arguments)},Ce._OrtAddRunConfigEntry=function(){return(Ce._OrtAddRunConfigEntry=Ce.asm.ab).apply(null,arguments)},Ce._OrtReleaseRunOptions=function(){return(Ce._OrtReleaseRunOptions=Ce.asm.bb).apply(null,arguments)},Ce._OrtRun=function(){return(Ce._OrtRun=Ce.asm.cb).apply(null,arguments)},Ce._OrtEndProfiling=function(){return(Ce._OrtEndProfiling=Ce.asm.db).apply(null,arguments)};var Ri,ci=Ce._malloc=function(){return(ci=Ce._malloc=Ce.asm.eb).apply(null,arguments)},ws=Ce._free=function(){return(ws=Ce._free=Ce.asm.fb).apply(null,arguments)},hs=Ce._fflush=function(){return(hs=Ce._fflush=Ce.asm.gb).apply(null,arguments)},rs=Ce.___funcs_on_exit=function(){return(rs=Ce.___funcs_on_exit=Ce.asm.hb).apply(null,arguments)},ri=Ce._setThrew=function(){return(ri=Ce._setThrew=Ce.asm.jb).apply(null,arguments)},ai=Ce.stackSave=function(){return(ai=Ce.stackSave=Ce.asm.kb).apply(null,arguments)},Fi=Ce.stackRestore=function(){return(Fi=Ce.stackRestore=Ce.asm.lb).apply(null,arguments)},Ms=Ce.stackAlloc=function(){return(Ms=Ce.stackAlloc=Ce.asm.mb).apply(null,arguments)},To=Ce.___cxa_can_catch=function(){return(To=Ce.___cxa_can_catch=Ce.asm.nb).apply(null,arguments)},Zs=Ce.___cxa_is_pointer_type=function(){return(Zs=Ce.___cxa_is_pointer_type=Ce.asm.ob).apply(null,arguments)},Ci=Ce.dynCall_j=function(){return(Ci=Ce.dynCall_j=Ce.asm.pb).apply(null,arguments)},gs=Ce.dynCall_iiiiij=function(){return(gs=Ce.dynCall_iiiiij=Ce.asm.qb).apply(null,arguments)},Mo=Ce.dynCall_jii=function(){return(Mo=Ce.dynCall_jii=Ce.asm.rb).apply(null,arguments)},Ls=Ce.dynCall_viiiiij=function(){return(Ls=Ce.dynCall_viiiiij=Ce.asm.sb).apply(null,arguments)},eo=Ce.dynCall_vjji=function(){return(eo=Ce.dynCall_vjji=Ce.asm.tb).apply(null,arguments)},xs=Ce.dynCall_viiijjjii=function(){return(xs=Ce.dynCall_viiijjjii=Ce.asm.ub).apply(null,arguments)},Os=Ce.dynCall_iij=function(){return(Os=Ce.dynCall_iij=Ce.asm.vb).apply(null,arguments)},Ts=Ce.dynCall_ji=function(){return(Ts=Ce.dynCall_ji=Ce.asm.wb).apply(null,arguments)},ra=Ce.dynCall_iiiiiij=function(){return(ra=Ce.dynCall_iiiiiij=Ce.asm.xb).apply(null,arguments)},ua=Ce.dynCall_iiij=function(){return(ua=Ce.dynCall_iiij=Ce.asm.yb).apply(null,arguments)};function po(){function Gn(){if(!Ri&&(Ri=!0,Ce.calledRun=!0,!On)){if(bi(Jn),De(Ce),Ce.onRuntimeInitialized&&Ce.onRuntimeInitialized(),Ce.postRun)for(typeof Ce.postRun=="function"&&(Ce.postRun=[Ce.postRun]);Ce.postRun.length;){var ir=Ce.postRun.shift();lr.unshift(ir)}bi(lr)}}if(!(0<$r)){if(Ce.preRun)for(typeof Ce.preRun=="function"&&(Ce.preRun=[Ce.preRun]);Ce.preRun.length;)gr();bi(Yn),0<$r||(Ce.setStatus?(Ce.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Ce.setStatus("")},1),Gn()},1)):Gn())}}if(Ce.UTF8ToString=Hn,Ce.stringToUTF8=function(Gn,ir,cr){return Dn(Gn,En,ir,cr)},Ce.lengthBytesUTF8=Un,Ce.stackSave=ai,Ce.stackRestore=Fi,Ce.stackAlloc=Ms,Yr=function Gn(){Ri||po(),Ri||(Yr=Gn)},Ce.preInit)for(typeof Ce.preInit=="function"&&(Ce.preInit=[Ce.preInit]);0<Ce.preInit.length;)Ce.preInit.pop()();return po(),Re.ready});n.exports=Ee},4537:n=>{n.exports=function(e,t){for(var Te=new Array(arguments.length-1),Ee=0,Re=2,Ce=!0;Re<arguments.length;)Te[Ee++]=arguments[Re++];return new Promise(function(De,$e){Te[Ee]=function(Ve){if(Ce)if(Ce=!1,Ve)$e(Ve);else{for(var Be=new Array(arguments.length-1),Me=0;Me<Be.length;)Be[Me++]=arguments[Me];De.apply(null,Be)}};try{e.apply(t||null,Te)}catch(Ve){Ce&&(Ce=!1,$e(Ve))}})}},7419:(n,e)=>{var t=e;t.length=function(De){var $e=De.length;if(!$e)return 0;for(var Ve=0;--$e%4>1&&De.charAt($e)==="=";)++Ve;return Math.ceil(3*De.length)/4-Ve};for(var Te=new Array(64),Ee=new Array(123),Re=0;Re<64;)Ee[Te[Re]=Re<26?Re+65:Re<52?Re+71:Re<62?Re-4:Re-59|43]=Re++;t.encode=function(De,$e,Ve){for(var Be,Me=null,Oe=[],Ue=0,ze=0;$e<Ve;){var He=De[$e++];switch(ze){case 0:Oe[Ue++]=Te[He>>2],Be=(3&He)<<4,ze=1;break;case 1:Oe[Ue++]=Te[Be|He>>4],Be=(15&He)<<2,ze=2;break;case 2:Oe[Ue++]=Te[Be|He>>6],Oe[Ue++]=Te[63&He],ze=0}Ue>8191&&((Me||(Me=[])).push(String.fromCharCode.apply(String,Oe)),Ue=0)}return ze&&(Oe[Ue++]=Te[Be],Oe[Ue++]=61,ze===1&&(Oe[Ue++]=61)),Me?(Ue&&Me.push(String.fromCharCode.apply(String,Oe.slice(0,Ue))),Me.join("")):String.fromCharCode.apply(String,Oe.slice(0,Ue))};var Ce="invalid encoding";t.decode=function(De,$e,Ve){for(var Be,Me=Ve,Oe=0,Ue=0;Ue<De.length;){var ze=De.charCodeAt(Ue++);if(ze===61&&Oe>1)break;if((ze=Ee[ze])===void 0)throw Error(Ce);switch(Oe){case 0:Be=ze,Oe=1;break;case 1:$e[Ve++]=Be<<2|(48&ze)>>4,Be=ze,Oe=2;break;case 2:$e[Ve++]=(15&Be)<<4|(60&ze)>>2,Be=ze,Oe=3;break;case 3:$e[Ve++]=(3&Be)<<6|ze,Oe=0}}if(Oe===1)throw Error(Ce);return Ve-Me},t.test=function(De){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(De)}},9211:n=>{function e(){this._listeners={}}n.exports=e,e.prototype.on=function(t,Te,Ee){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:Te,ctx:Ee||this}),this},e.prototype.off=function(t,Te){if(t===void 0)this._listeners={};else if(Te===void 0)this._listeners[t]=[];else for(var Ee=this._listeners[t],Re=0;Re<Ee.length;)Ee[Re].fn===Te?Ee.splice(Re,1):++Re;return this},e.prototype.emit=function(t){var Te=this._listeners[t];if(Te){for(var Ee=[],Re=1;Re<arguments.length;)Ee.push(arguments[Re++]);for(Re=0;Re<Te.length;)Te[Re].fn.apply(Te[Re++].ctx,Ee)}return this}},945:n=>{function e(Ce){return typeof Float32Array<"u"?function(){var De=new Float32Array([-0]),$e=new Uint8Array(De.buffer),Ve=$e[3]===128;function Be(ze,He,Ge){De[0]=ze,He[Ge]=$e[0],He[Ge+1]=$e[1],He[Ge+2]=$e[2],He[Ge+3]=$e[3]}function Me(ze,He,Ge){De[0]=ze,He[Ge]=$e[3],He[Ge+1]=$e[2],He[Ge+2]=$e[1],He[Ge+3]=$e[0]}function Oe(ze,He){return $e[0]=ze[He],$e[1]=ze[He+1],$e[2]=ze[He+2],$e[3]=ze[He+3],De[0]}function Ue(ze,He){return $e[3]=ze[He],$e[2]=ze[He+1],$e[1]=ze[He+2],$e[0]=ze[He+3],De[0]}Ce.writeFloatLE=Ve?Be:Me,Ce.writeFloatBE=Ve?Me:Be,Ce.readFloatLE=Ve?Oe:Ue,Ce.readFloatBE=Ve?Ue:Oe}():function(){function De(Ve,Be,Me,Oe){var Ue=Be<0?1:0;if(Ue&&(Be=-Be),Be===0)Ve(1/Be>0?0:2147483648,Me,Oe);else if(isNaN(Be))Ve(2143289344,Me,Oe);else if(Be>34028234663852886e22)Ve((Ue<<31|2139095040)>>>0,Me,Oe);else if(Be<11754943508222875e-54)Ve((Ue<<31|Math.round(Be/1401298464324817e-60))>>>0,Me,Oe);else{var ze=Math.floor(Math.log(Be)/Math.LN2);Ve((Ue<<31|ze+127<<23|8388607&Math.round(Be*Math.pow(2,-ze)*8388608))>>>0,Me,Oe)}}function $e(Ve,Be,Me){var Oe=Ve(Be,Me),Ue=2*(Oe>>31)+1,ze=Oe>>>23&255,He=8388607&Oe;return ze===255?He?NaN:Ue*(1/0):ze===0?1401298464324817e-60*Ue*He:Ue*Math.pow(2,ze-150)*(He+8388608)}Ce.writeFloatLE=De.bind(null,t),Ce.writeFloatBE=De.bind(null,Te),Ce.readFloatLE=$e.bind(null,Ee),Ce.readFloatBE=$e.bind(null,Re)}(),typeof Float64Array<"u"?function(){var De=new Float64Array([-0]),$e=new Uint8Array(De.buffer),Ve=$e[7]===128;function Be(ze,He,Ge){De[0]=ze,He[Ge]=$e[0],He[Ge+1]=$e[1],He[Ge+2]=$e[2],He[Ge+3]=$e[3],He[Ge+4]=$e[4],He[Ge+5]=$e[5],He[Ge+6]=$e[6],He[Ge+7]=$e[7]}function Me(ze,He,Ge){De[0]=ze,He[Ge]=$e[7],He[Ge+1]=$e[6],He[Ge+2]=$e[5],He[Ge+3]=$e[4],He[Ge+4]=$e[3],He[Ge+5]=$e[2],He[Ge+6]=$e[1],He[Ge+7]=$e[0]}function Oe(ze,He){return $e[0]=ze[He],$e[1]=ze[He+1],$e[2]=ze[He+2],$e[3]=ze[He+3],$e[4]=ze[He+4],$e[5]=ze[He+5],$e[6]=ze[He+6],$e[7]=ze[He+7],De[0]}function Ue(ze,He){return $e[7]=ze[He],$e[6]=ze[He+1],$e[5]=ze[He+2],$e[4]=ze[He+3],$e[3]=ze[He+4],$e[2]=ze[He+5],$e[1]=ze[He+6],$e[0]=ze[He+7],De[0]}Ce.writeDoubleLE=Ve?Be:Me,Ce.writeDoubleBE=Ve?Me:Be,Ce.readDoubleLE=Ve?Oe:Ue,Ce.readDoubleBE=Ve?Ue:Oe}():function(){function De(Ve,Be,Me,Oe,Ue,ze){var He=Oe<0?1:0;if(He&&(Oe=-Oe),Oe===0)Ve(0,Ue,ze+Be),Ve(1/Oe>0?0:2147483648,Ue,ze+Me);else if(isNaN(Oe))Ve(0,Ue,ze+Be),Ve(2146959360,Ue,ze+Me);else if(Oe>17976931348623157e292)Ve(0,Ue,ze+Be),Ve((He<<31|2146435072)>>>0,Ue,ze+Me);else{var Ge;if(Oe<22250738585072014e-324)Ve((Ge=Oe/5e-324)>>>0,Ue,ze+Be),Ve((He<<31|Ge/4294967296)>>>0,Ue,ze+Me);else{var Ke=Math.floor(Math.log(Oe)/Math.LN2);Ke===1024&&(Ke=1023),Ve(4503599627370496*(Ge=Oe*Math.pow(2,-Ke))>>>0,Ue,ze+Be),Ve((He<<31|Ke+1023<<20|1048576*Ge&1048575)>>>0,Ue,ze+Me)}}}function $e(Ve,Be,Me,Oe,Ue){var ze=Ve(Oe,Ue+Be),He=Ve(Oe,Ue+Me),Ge=2*(He>>31)+1,Ke=He>>>20&2047,Xe=4294967296*(1048575&He)+ze;return Ke===2047?Xe?NaN:Ge*(1/0):Ke===0?5e-324*Ge*Xe:Ge*Math.pow(2,Ke-1075)*(Xe+4503599627370496)}Ce.writeDoubleLE=De.bind(null,t,0,4),Ce.writeDoubleBE=De.bind(null,Te,4,0),Ce.readDoubleLE=$e.bind(null,Ee,0,4),Ce.readDoubleBE=$e.bind(null,Re,4,0)}(),Ce}function t(Ce,De,$e){De[$e]=255&Ce,De[$e+1]=Ce>>>8&255,De[$e+2]=Ce>>>16&255,De[$e+3]=Ce>>>24}function Te(Ce,De,$e){De[$e]=Ce>>>24,De[$e+1]=Ce>>>16&255,De[$e+2]=Ce>>>8&255,De[$e+3]=255&Ce}function Ee(Ce,De){return(Ce[De]|Ce[De+1]<<8|Ce[De+2]<<16|Ce[De+3]<<24)>>>0}function Re(Ce,De){return(Ce[De]<<24|Ce[De+1]<<16|Ce[De+2]<<8|Ce[De+3])>>>0}n.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}module.exports=inquire},6662:n=>{n.exports=function(e,t,Te){var Ee=Te||8192,Re=Ee>>>1,Ce=null,De=Ee;return function($e){if($e<1||$e>Re)return e($e);De+$e>Ee&&(Ce=e(Ee),De=0);var Ve=t.call(Ce,De,De+=$e);return 7&De&&(De=1+(7|De)),Ve}}},4997:(n,e)=>{var t=e;t.length=function(Te){for(var Ee=0,Re=0,Ce=0;Ce<Te.length;++Ce)(Re=Te.charCodeAt(Ce))<128?Ee+=1:Re<2048?Ee+=2:(64512&Re)==55296&&(64512&Te.charCodeAt(Ce+1))==56320?(++Ce,Ee+=4):Ee+=3;return Ee},t.read=function(Te,Ee,Re){if(Re-Ee<1)return"";for(var Ce,De=null,$e=[],Ve=0;Ee<Re;)(Ce=Te[Ee++])<128?$e[Ve++]=Ce:Ce>191&&Ce<224?$e[Ve++]=(31&Ce)<<6|63&Te[Ee++]:Ce>239&&Ce<365?(Ce=((7&Ce)<<18|(63&Te[Ee++])<<12|(63&Te[Ee++])<<6|63&Te[Ee++])-65536,$e[Ve++]=55296+(Ce>>10),$e[Ve++]=56320+(1023&Ce)):$e[Ve++]=(15&Ce)<<12|(63&Te[Ee++])<<6|63&Te[Ee++],Ve>8191&&((De||(De=[])).push(String.fromCharCode.apply(String,$e)),Ve=0);return De?(Ve&&De.push(String.fromCharCode.apply(String,$e.slice(0,Ve))),De.join("")):String.fromCharCode.apply(String,$e.slice(0,Ve))},t.write=function(Te,Ee,Re){for(var Ce,De,$e=Re,Ve=0;Ve<Te.length;++Ve)(Ce=Te.charCodeAt(Ve))<128?Ee[Re++]=Ce:Ce<2048?(Ee[Re++]=Ce>>6|192,Ee[Re++]=63&Ce|128):(64512&Ce)==55296&&(64512&(De=Te.charCodeAt(Ve+1)))==56320?(Ce=65536+((1023&Ce)<<10)+(1023&De),++Ve,Ee[Re++]=Ce>>18|240,Ee[Re++]=Ce>>12&63|128,Ee[Re++]=Ce>>6&63|128,Ee[Re++]=63&Ce|128):(Ee[Re++]=Ce>>12|224,Ee[Re++]=Ce>>6&63|128,Ee[Re++]=63&Ce|128);return Re-$e}},3442:(n,e)=>{e.__esModule=!0;var t=function(){function Te(Ee){if(!Ee)throw new TypeError("Invalid argument; `value` has no value.");this.value=Te.EMPTY,Ee&&Te.isGuid(Ee)&&(this.value=Ee)}return Te.isGuid=function(Ee){var Re=Ee.toString();return Ee&&(Ee instanceof Te||Te.validator.test(Re))},Te.create=function(){return new Te([Te.gen(2),Te.gen(1),Te.gen(1),Te.gen(1),Te.gen(3)].join("-"))},Te.createEmpty=function(){return new Te("emptyguid")},Te.parse=function(Ee){return new Te(Ee)},Te.raw=function(){return[Te.gen(2),Te.gen(1),Te.gen(1),Te.gen(1),Te.gen(3)].join("-")},Te.gen=function(Ee){for(var Re="",Ce=0;Ce<Ee;Ce++)Re+=(65536*(1+Math.random())|0).toString(16).substring(1);return Re},Te.prototype.equals=function(Ee){return Te.isGuid(Ee)&&this.value===Ee.toString()},Te.prototype.isEmpty=function(){return this.value===Te.EMPTY},Te.prototype.toString=function(){return this.value},Te.prototype.toJSON=function(){return{value:this.value}},Te.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),Te.EMPTY="00000000-0000-0000-0000-000000000000",Te}();e.Guid=t},3720:n=>{n.exports=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(dn,vn,bn){this.low=0|dn,this.high=0|vn,this.unsigned=!!bn}function Te(dn){return(dn&&dn.__isLong__)===!0}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=Te;var Ee={},Re={};function Ce(dn,vn){var bn,Tn,En;return vn?(En=0<=(dn>>>=0)&&dn<256)&&(Tn=Re[dn])?Tn:(bn=$e(dn,(0|dn)<0?-1:0,!0),En&&(Re[dn]=bn),bn):(En=-128<=(dn|=0)&&dn<128)&&(Tn=Ee[dn])?Tn:(bn=$e(dn,dn<0?-1:0,!1),En&&(Ee[dn]=bn),bn)}function De(dn,vn){if(isNaN(dn))return vn?Ke:Ge;if(vn){if(dn<0)return Ke;if(dn>=Ue)return yn}else{if(dn<=-ze)return gn;if(dn+1>=ze)return fn}return dn<0?De(-dn,vn).neg():$e(dn%Oe|0,dn/Oe|0,vn)}function $e(dn,vn,bn){return new t(dn,vn,bn)}t.fromInt=Ce,t.fromNumber=De,t.fromBits=$e;var Ve=Math.pow;function Be(dn,vn,bn){if(dn.length===0)throw Error("empty string");if(dn==="NaN"||dn==="Infinity"||dn==="+Infinity"||dn==="-Infinity")return Ge;if(typeof vn=="number"?(bn=vn,vn=!1):vn=!!vn,(bn=bn||10)<2||36<bn)throw RangeError("radix");var Tn;if((Tn=dn.indexOf("-"))>0)throw Error("interior hyphen");if(Tn===0)return Be(dn.substring(1),vn,bn).neg();for(var En=De(Ve(bn,8)),In=Ge,Nn=0;Nn<dn.length;Nn+=8){var On=Math.min(8,dn.length-Nn),Fn=parseInt(dn.substring(Nn,Nn+On),bn);if(On<8){var $n=De(Ve(bn,On));In=In.mul($n).add(De(Fn))}else In=(In=In.mul(En)).add(De(Fn))}return In.unsigned=vn,In}function Me(dn,vn){return typeof dn=="number"?De(dn,vn):typeof dn=="string"?Be(dn,vn):$e(dn.low,dn.high,typeof vn=="boolean"?vn:dn.unsigned)}t.fromString=Be,t.fromValue=Me;var Oe=4294967296,Ue=Oe*Oe,ze=Ue/2,He=Ce(1<<24),Ge=Ce(0);t.ZERO=Ge;var Ke=Ce(0,!0);t.UZERO=Ke;var Xe=Ce(1);t.ONE=Xe;var Je=Ce(1,!0);t.UONE=Je;var un=Ce(-1);t.NEG_ONE=un;var fn=$e(-1,2147483647,!1);t.MAX_VALUE=fn;var yn=$e(-1,-1,!0);t.MAX_UNSIGNED_VALUE=yn;var gn=$e(0,-2147483648,!1);t.MIN_VALUE=gn;var mn=t.prototype;mn.toInt=function(){return this.unsigned?this.low>>>0:this.low},mn.toNumber=function(){return this.unsigned?(this.high>>>0)*Oe+(this.low>>>0):this.high*Oe+(this.low>>>0)},mn.toString=function(dn){if((dn=dn||10)<2||36<dn)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(gn)){var vn=De(dn),bn=this.div(vn),Tn=bn.mul(vn).sub(this);return bn.toString(dn)+Tn.toInt().toString(dn)}return"-"+this.neg().toString(dn)}for(var En=De(Ve(dn,6),this.unsigned),In=this,Nn="";;){var On=In.div(En),Fn=(In.sub(On.mul(En)).toInt()>>>0).toString(dn);if((In=On).isZero())return Fn+Nn;for(;Fn.length<6;)Fn="0"+Fn;Nn=""+Fn+Nn}},mn.getHighBits=function(){return this.high},mn.getHighBitsUnsigned=function(){return this.high>>>0},mn.getLowBits=function(){return this.low},mn.getLowBitsUnsigned=function(){return this.low>>>0},mn.getNumBitsAbs=function(){if(this.isNegative())return this.eq(gn)?64:this.neg().getNumBitsAbs();for(var dn=this.high!=0?this.high:this.low,vn=31;vn>0&&(dn&1<<vn)==0;vn--);return this.high!=0?vn+33:vn+1},mn.isZero=function(){return this.high===0&&this.low===0},mn.eqz=mn.isZero,mn.isNegative=function(){return!this.unsigned&&this.high<0},mn.isPositive=function(){return this.unsigned||this.high>=0},mn.isOdd=function(){return(1&this.low)==1},mn.isEven=function(){return(1&this.low)==0},mn.equals=function(dn){return Te(dn)||(dn=Me(dn)),(this.unsigned===dn.unsigned||this.high>>>31!=1||dn.high>>>31!=1)&&this.high===dn.high&&this.low===dn.low},mn.eq=mn.equals,mn.notEquals=function(dn){return!this.eq(dn)},mn.neq=mn.notEquals,mn.ne=mn.notEquals,mn.lessThan=function(dn){return this.comp(dn)<0},mn.lt=mn.lessThan,mn.lessThanOrEqual=function(dn){return this.comp(dn)<=0},mn.lte=mn.lessThanOrEqual,mn.le=mn.lessThanOrEqual,mn.greaterThan=function(dn){return this.comp(dn)>0},mn.gt=mn.greaterThan,mn.greaterThanOrEqual=function(dn){return this.comp(dn)>=0},mn.gte=mn.greaterThanOrEqual,mn.ge=mn.greaterThanOrEqual,mn.compare=function(dn){if(Te(dn)||(dn=Me(dn)),this.eq(dn))return 0;var vn=this.isNegative(),bn=dn.isNegative();return vn&&!bn?-1:!vn&&bn?1:this.unsigned?dn.high>>>0>this.high>>>0||dn.high===this.high&&dn.low>>>0>this.low>>>0?-1:1:this.sub(dn).isNegative()?-1:1},mn.comp=mn.compare,mn.negate=function(){return!this.unsigned&&this.eq(gn)?gn:this.not().add(Xe)},mn.neg=mn.negate,mn.add=function(dn){Te(dn)||(dn=Me(dn));var vn=this.high>>>16,bn=65535&this.high,Tn=this.low>>>16,En=65535&this.low,In=dn.high>>>16,Nn=65535&dn.high,On=dn.low>>>16,Fn=0,$n=0,Hn=0,Dn=0;return Hn+=(Dn+=En+(65535&dn.low))>>>16,$n+=(Hn+=Tn+On)>>>16,Fn+=($n+=bn+Nn)>>>16,Fn+=vn+In,$e((Hn&=65535)<<16|(Dn&=65535),(Fn&=65535)<<16|($n&=65535),this.unsigned)},mn.subtract=function(dn){return Te(dn)||(dn=Me(dn)),this.add(dn.neg())},mn.sub=mn.subtract,mn.multiply=function(dn){if(this.isZero())return Ge;if(Te(dn)||(dn=Me(dn)),e)return $e(e.mul(this.low,this.high,dn.low,dn.high),e.get_high(),this.unsigned);if(dn.isZero())return Ge;if(this.eq(gn))return dn.isOdd()?gn:Ge;if(dn.eq(gn))return this.isOdd()?gn:Ge;if(this.isNegative())return dn.isNegative()?this.neg().mul(dn.neg()):this.neg().mul(dn).neg();if(dn.isNegative())return this.mul(dn.neg()).neg();if(this.lt(He)&&dn.lt(He))return De(this.toNumber()*dn.toNumber(),this.unsigned);var vn=this.high>>>16,bn=65535&this.high,Tn=this.low>>>16,En=65535&this.low,In=dn.high>>>16,Nn=65535&dn.high,On=dn.low>>>16,Fn=65535&dn.low,$n=0,Hn=0,Dn=0,Un=0;return Dn+=(Un+=En*Fn)>>>16,Hn+=(Dn+=Tn*Fn)>>>16,Dn&=65535,Hn+=(Dn+=En*On)>>>16,$n+=(Hn+=bn*Fn)>>>16,Hn&=65535,$n+=(Hn+=Tn*On)>>>16,Hn&=65535,$n+=(Hn+=En*Nn)>>>16,$n+=vn*Fn+bn*On+Tn*Nn+En*In,$e((Dn&=65535)<<16|(Un&=65535),($n&=65535)<<16|(Hn&=65535),this.unsigned)},mn.mul=mn.multiply,mn.divide=function(dn){if(Te(dn)||(dn=Me(dn)),dn.isZero())throw Error("division by zero");var vn,bn,Tn;if(e)return this.unsigned||this.high!==-2147483648||dn.low!==-1||dn.high!==-1?$e((this.unsigned?e.div_u:e.div_s)(this.low,this.high,dn.low,dn.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Ke:Ge;if(this.unsigned){if(dn.unsigned||(dn=dn.toUnsigned()),dn.gt(this))return Ke;if(dn.gt(this.shru(1)))return Je;Tn=Ke}else{if(this.eq(gn))return dn.eq(Xe)||dn.eq(un)?gn:dn.eq(gn)?Xe:(vn=this.shr(1).div(dn).shl(1)).eq(Ge)?dn.isNegative()?Xe:un:(bn=this.sub(dn.mul(vn)),Tn=vn.add(bn.div(dn)));if(dn.eq(gn))return this.unsigned?Ke:Ge;if(this.isNegative())return dn.isNegative()?this.neg().div(dn.neg()):this.neg().div(dn).neg();if(dn.isNegative())return this.div(dn.neg()).neg();Tn=Ge}for(bn=this;bn.gte(dn);){vn=Math.max(1,Math.floor(bn.toNumber()/dn.toNumber()));for(var En=Math.ceil(Math.log(vn)/Math.LN2),In=En<=48?1:Ve(2,En-48),Nn=De(vn),On=Nn.mul(dn);On.isNegative()||On.gt(bn);)On=(Nn=De(vn-=In,this.unsigned)).mul(dn);Nn.isZero()&&(Nn=Xe),Tn=Tn.add(Nn),bn=bn.sub(On)}return Tn},mn.div=mn.divide,mn.modulo=function(dn){return Te(dn)||(dn=Me(dn)),e?$e((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,dn.low,dn.high),e.get_high(),this.unsigned):this.sub(this.div(dn).mul(dn))},mn.mod=mn.modulo,mn.rem=mn.modulo,mn.not=function(){return $e(~this.low,~this.high,this.unsigned)},mn.and=function(dn){return Te(dn)||(dn=Me(dn)),$e(this.low&dn.low,this.high&dn.high,this.unsigned)},mn.or=function(dn){return Te(dn)||(dn=Me(dn)),$e(this.low|dn.low,this.high|dn.high,this.unsigned)},mn.xor=function(dn){return Te(dn)||(dn=Me(dn)),$e(this.low^dn.low,this.high^dn.high,this.unsigned)},mn.shiftLeft=function(dn){return Te(dn)&&(dn=dn.toInt()),(dn&=63)==0?this:dn<32?$e(this.low<<dn,this.high<<dn|this.low>>>32-dn,this.unsigned):$e(0,this.low<<dn-32,this.unsigned)},mn.shl=mn.shiftLeft,mn.shiftRight=function(dn){return Te(dn)&&(dn=dn.toInt()),(dn&=63)==0?this:dn<32?$e(this.low>>>dn|this.high<<32-dn,this.high>>dn,this.unsigned):$e(this.high>>dn-32,this.high>=0?0:-1,this.unsigned)},mn.shr=mn.shiftRight,mn.shiftRightUnsigned=function(dn){if(Te(dn)&&(dn=dn.toInt()),(dn&=63)==0)return this;var vn=this.high;return dn<32?$e(this.low>>>dn|vn<<32-dn,vn>>>dn,this.unsigned):$e(dn===32?vn:vn>>>dn-32,0,this.unsigned)},mn.shru=mn.shiftRightUnsigned,mn.shr_u=mn.shiftRightUnsigned,mn.toSigned=function(){return this.unsigned?$e(this.low,this.high,!1):this},mn.toUnsigned=function(){return this.unsigned?this:$e(this.low,this.high,!0)},mn.toBytes=function(dn){return dn?this.toBytesLE():this.toBytesBE()},mn.toBytesLE=function(){var dn=this.high,vn=this.low;return[255&vn,vn>>>8&255,vn>>>16&255,vn>>>24,255&dn,dn>>>8&255,dn>>>16&255,dn>>>24]},mn.toBytesBE=function(){var dn=this.high,vn=this.low;return[dn>>>24,dn>>>16&255,dn>>>8&255,255&dn,vn>>>24,vn>>>16&255,vn>>>8&255,255&vn]},t.fromBytes=function(dn,vn,bn){return bn?t.fromBytesLE(dn,vn):t.fromBytesBE(dn,vn)},t.fromBytesLE=function(dn,vn){return new t(dn[0]|dn[1]<<8|dn[2]<<16|dn[3]<<24,dn[4]|dn[5]<<8|dn[6]<<16|dn[7]<<24,vn)},t.fromBytesBE=function(dn,vn){return new t(dn[4]<<24|dn[5]<<16|dn[6]<<8|dn[7],dn[0]<<24|dn[1]<<16|dn[2]<<8|dn[3],vn)}},1446:(n,e,t)=>{var Te,Ee,Re,Ce=t(2100),De=Ce.Reader,$e=Ce.Writer,Ve=Ce.util,Be=Ce.roots.default||(Ce.roots.default={});Be.onnx=((Re={}).Version=(Te={},(Ee=Object.create(Te))[Te[0]="_START_VERSION"]=0,Ee[Te[1]="IR_VERSION_2017_10_10"]=1,Ee[Te[2]="IR_VERSION_2017_10_30"]=2,Ee[Te[3]="IR_VERSION_2017_11_3"]=3,Ee[Te[4]="IR_VERSION_2019_1_22"]=4,Ee[Te[5]="IR_VERSION"]=5,Ee),Re.AttributeProto=function(){function Me(Oe){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.name="",Me.prototype.refAttrName="",Me.prototype.docString="",Me.prototype.type=0,Me.prototype.f=0,Me.prototype.i=Ve.Long?Ve.Long.fromBits(0,0,!1):0,Me.prototype.s=Ve.newBuffer([]),Me.prototype.t=null,Me.prototype.g=null,Me.prototype.floats=Ve.emptyArray,Me.prototype.ints=Ve.emptyArray,Me.prototype.strings=Ve.emptyArray,Me.prototype.tensors=Ve.emptyArray,Me.prototype.graphs=Ve.emptyArray,Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){if(Ue||(Ue=$e.create()),Oe.name!=null&&Oe.hasOwnProperty("name")&&Ue.uint32(10).string(Oe.name),Oe.f!=null&&Oe.hasOwnProperty("f")&&Ue.uint32(21).float(Oe.f),Oe.i!=null&&Oe.hasOwnProperty("i")&&Ue.uint32(24).int64(Oe.i),Oe.s!=null&&Oe.hasOwnProperty("s")&&Ue.uint32(34).bytes(Oe.s),Oe.t!=null&&Oe.hasOwnProperty("t")&&Be.onnx.TensorProto.encode(Oe.t,Ue.uint32(42).fork()).ldelim(),Oe.g!=null&&Oe.hasOwnProperty("g")&&Be.onnx.GraphProto.encode(Oe.g,Ue.uint32(50).fork()).ldelim(),Oe.floats!=null&&Oe.floats.length){Ue.uint32(58).fork();for(var ze=0;ze<Oe.floats.length;++ze)Ue.float(Oe.floats[ze]);Ue.ldelim()}if(Oe.ints!=null&&Oe.ints.length){for(Ue.uint32(66).fork(),ze=0;ze<Oe.ints.length;++ze)Ue.int64(Oe.ints[ze]);Ue.ldelim()}if(Oe.strings!=null&&Oe.strings.length)for(ze=0;ze<Oe.strings.length;++ze)Ue.uint32(74).bytes(Oe.strings[ze]);if(Oe.tensors!=null&&Oe.tensors.length)for(ze=0;ze<Oe.tensors.length;++ze)Be.onnx.TensorProto.encode(Oe.tensors[ze],Ue.uint32(82).fork()).ldelim();if(Oe.graphs!=null&&Oe.graphs.length)for(ze=0;ze<Oe.graphs.length;++ze)Be.onnx.GraphProto.encode(Oe.graphs[ze],Ue.uint32(90).fork()).ldelim();return Oe.docString!=null&&Oe.hasOwnProperty("docString")&&Ue.uint32(106).string(Oe.docString),Oe.type!=null&&Oe.hasOwnProperty("type")&&Ue.uint32(160).int32(Oe.type),Oe.refAttrName!=null&&Oe.hasOwnProperty("refAttrName")&&Ue.uint32(170).string(Oe.refAttrName),Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.AttributeProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.name=Oe.string();break;case 21:He.refAttrName=Oe.string();break;case 13:He.docString=Oe.string();break;case 20:He.type=Oe.int32();break;case 2:He.f=Oe.float();break;case 3:He.i=Oe.int64();break;case 4:He.s=Oe.bytes();break;case 5:He.t=Be.onnx.TensorProto.decode(Oe,Oe.uint32());break;case 6:He.g=Be.onnx.GraphProto.decode(Oe,Oe.uint32());break;case 7:if(He.floats&&He.floats.length||(He.floats=[]),(7&Ge)==2)for(var Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.floats.push(Oe.float());else He.floats.push(Oe.float());break;case 8:if(He.ints&&He.ints.length||(He.ints=[]),(7&Ge)==2)for(Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.ints.push(Oe.int64());else He.ints.push(Oe.int64());break;case 9:He.strings&&He.strings.length||(He.strings=[]),He.strings.push(Oe.bytes());break;case 10:He.tensors&&He.tensors.length||(He.tensors=[]),He.tensors.push(Be.onnx.TensorProto.decode(Oe,Oe.uint32()));break;case 11:He.graphs&&He.graphs.length||(He.graphs=[]),He.graphs.push(Be.onnx.GraphProto.decode(Oe,Oe.uint32()));break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.name!=null&&Oe.hasOwnProperty("name")&&!Ve.isString(Oe.name))return"name: string expected";if(Oe.refAttrName!=null&&Oe.hasOwnProperty("refAttrName")&&!Ve.isString(Oe.refAttrName))return"refAttrName: string expected";if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&!Ve.isString(Oe.docString))return"docString: string expected";if(Oe.type!=null&&Oe.hasOwnProperty("type"))switch(Oe.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(Oe.f!=null&&Oe.hasOwnProperty("f")&&typeof Oe.f!="number")return"f: number expected";if(Oe.i!=null&&Oe.hasOwnProperty("i")&&!(Ve.isInteger(Oe.i)||Oe.i&&Ve.isInteger(Oe.i.low)&&Ve.isInteger(Oe.i.high)))return"i: integer|Long expected";if(Oe.s!=null&&Oe.hasOwnProperty("s")&&!(Oe.s&&typeof Oe.s.length=="number"||Ve.isString(Oe.s)))return"s: buffer expected";if(Oe.t!=null&&Oe.hasOwnProperty("t")&&(ze=Be.onnx.TensorProto.verify(Oe.t)))return"t."+ze;if(Oe.g!=null&&Oe.hasOwnProperty("g")&&(ze=Be.onnx.GraphProto.verify(Oe.g)))return"g."+ze;if(Oe.floats!=null&&Oe.hasOwnProperty("floats")){if(!Array.isArray(Oe.floats))return"floats: array expected";for(var Ue=0;Ue<Oe.floats.length;++Ue)if(typeof Oe.floats[Ue]!="number")return"floats: number[] expected"}if(Oe.ints!=null&&Oe.hasOwnProperty("ints")){if(!Array.isArray(Oe.ints))return"ints: array expected";for(Ue=0;Ue<Oe.ints.length;++Ue)if(!(Ve.isInteger(Oe.ints[Ue])||Oe.ints[Ue]&&Ve.isInteger(Oe.ints[Ue].low)&&Ve.isInteger(Oe.ints[Ue].high)))return"ints: integer|Long[] expected"}if(Oe.strings!=null&&Oe.hasOwnProperty("strings")){if(!Array.isArray(Oe.strings))return"strings: array expected";for(Ue=0;Ue<Oe.strings.length;++Ue)if(!(Oe.strings[Ue]&&typeof Oe.strings[Ue].length=="number"||Ve.isString(Oe.strings[Ue])))return"strings: buffer[] expected"}if(Oe.tensors!=null&&Oe.hasOwnProperty("tensors")){if(!Array.isArray(Oe.tensors))return"tensors: array expected";for(Ue=0;Ue<Oe.tensors.length;++Ue)if(ze=Be.onnx.TensorProto.verify(Oe.tensors[Ue]))return"tensors."+ze}if(Oe.graphs!=null&&Oe.hasOwnProperty("graphs")){if(!Array.isArray(Oe.graphs))return"graphs: array expected";for(Ue=0;Ue<Oe.graphs.length;++Ue){var ze;if(ze=Be.onnx.GraphProto.verify(Oe.graphs[Ue]))return"graphs."+ze}}return null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.AttributeProto)return Oe;var Ue=new Be.onnx.AttributeProto;switch(Oe.name!=null&&(Ue.name=String(Oe.name)),Oe.refAttrName!=null&&(Ue.refAttrName=String(Oe.refAttrName)),Oe.docString!=null&&(Ue.docString=String(Oe.docString)),Oe.type){case"UNDEFINED":case 0:Ue.type=0;break;case"FLOAT":case 1:Ue.type=1;break;case"INT":case 2:Ue.type=2;break;case"STRING":case 3:Ue.type=3;break;case"TENSOR":case 4:Ue.type=4;break;case"GRAPH":case 5:Ue.type=5;break;case"FLOATS":case 6:Ue.type=6;break;case"INTS":case 7:Ue.type=7;break;case"STRINGS":case 8:Ue.type=8;break;case"TENSORS":case 9:Ue.type=9;break;case"GRAPHS":case 10:Ue.type=10}if(Oe.f!=null&&(Ue.f=Number(Oe.f)),Oe.i!=null&&(Ve.Long?(Ue.i=Ve.Long.fromValue(Oe.i)).unsigned=!1:typeof Oe.i=="string"?Ue.i=parseInt(Oe.i,10):typeof Oe.i=="number"?Ue.i=Oe.i:typeof Oe.i=="object"&&(Ue.i=new Ve.LongBits(Oe.i.low>>>0,Oe.i.high>>>0).toNumber())),Oe.s!=null&&(typeof Oe.s=="string"?Ve.base64.decode(Oe.s,Ue.s=Ve.newBuffer(Ve.base64.length(Oe.s)),0):Oe.s.length&&(Ue.s=Oe.s)),Oe.t!=null){if(typeof Oe.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");Ue.t=Be.onnx.TensorProto.fromObject(Oe.t)}if(Oe.g!=null){if(typeof Oe.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");Ue.g=Be.onnx.GraphProto.fromObject(Oe.g)}if(Oe.floats){if(!Array.isArray(Oe.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");Ue.floats=[];for(var ze=0;ze<Oe.floats.length;++ze)Ue.floats[ze]=Number(Oe.floats[ze])}if(Oe.ints){if(!Array.isArray(Oe.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(Ue.ints=[],ze=0;ze<Oe.ints.length;++ze)Ve.Long?(Ue.ints[ze]=Ve.Long.fromValue(Oe.ints[ze])).unsigned=!1:typeof Oe.ints[ze]=="string"?Ue.ints[ze]=parseInt(Oe.ints[ze],10):typeof Oe.ints[ze]=="number"?Ue.ints[ze]=Oe.ints[ze]:typeof Oe.ints[ze]=="object"&&(Ue.ints[ze]=new Ve.LongBits(Oe.ints[ze].low>>>0,Oe.ints[ze].high>>>0).toNumber())}if(Oe.strings){if(!Array.isArray(Oe.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(Ue.strings=[],ze=0;ze<Oe.strings.length;++ze)typeof Oe.strings[ze]=="string"?Ve.base64.decode(Oe.strings[ze],Ue.strings[ze]=Ve.newBuffer(Ve.base64.length(Oe.strings[ze])),0):Oe.strings[ze].length&&(Ue.strings[ze]=Oe.strings[ze])}if(Oe.tensors){if(!Array.isArray(Oe.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(Ue.tensors=[],ze=0;ze<Oe.tensors.length;++ze){if(typeof Oe.tensors[ze]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");Ue.tensors[ze]=Be.onnx.TensorProto.fromObject(Oe.tensors[ze])}}if(Oe.graphs){if(!Array.isArray(Oe.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(Ue.graphs=[],ze=0;ze<Oe.graphs.length;++ze){if(typeof Oe.graphs[ze]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");Ue.graphs[ze]=Be.onnx.GraphProto.fromObject(Oe.graphs[ze])}}return Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if((Ue.arrays||Ue.defaults)&&(ze.floats=[],ze.ints=[],ze.strings=[],ze.tensors=[],ze.graphs=[]),Ue.defaults){if(ze.name="",ze.f=0,Ve.Long){var He=new Ve.Long(0,0,!1);ze.i=Ue.longs===String?He.toString():Ue.longs===Number?He.toNumber():He}else ze.i=Ue.longs===String?"0":0;Ue.bytes===String?ze.s="":(ze.s=[],Ue.bytes!==Array&&(ze.s=Ve.newBuffer(ze.s))),ze.t=null,ze.g=null,ze.docString="",ze.type=Ue.enums===String?"UNDEFINED":0,ze.refAttrName=""}if(Oe.name!=null&&Oe.hasOwnProperty("name")&&(ze.name=Oe.name),Oe.f!=null&&Oe.hasOwnProperty("f")&&(ze.f=Ue.json&&!isFinite(Oe.f)?String(Oe.f):Oe.f),Oe.i!=null&&Oe.hasOwnProperty("i")&&(typeof Oe.i=="number"?ze.i=Ue.longs===String?String(Oe.i):Oe.i:ze.i=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.i):Ue.longs===Number?new Ve.LongBits(Oe.i.low>>>0,Oe.i.high>>>0).toNumber():Oe.i),Oe.s!=null&&Oe.hasOwnProperty("s")&&(ze.s=Ue.bytes===String?Ve.base64.encode(Oe.s,0,Oe.s.length):Ue.bytes===Array?Array.prototype.slice.call(Oe.s):Oe.s),Oe.t!=null&&Oe.hasOwnProperty("t")&&(ze.t=Be.onnx.TensorProto.toObject(Oe.t,Ue)),Oe.g!=null&&Oe.hasOwnProperty("g")&&(ze.g=Be.onnx.GraphProto.toObject(Oe.g,Ue)),Oe.floats&&Oe.floats.length){ze.floats=[];for(var Ge=0;Ge<Oe.floats.length;++Ge)ze.floats[Ge]=Ue.json&&!isFinite(Oe.floats[Ge])?String(Oe.floats[Ge]):Oe.floats[Ge]}if(Oe.ints&&Oe.ints.length)for(ze.ints=[],Ge=0;Ge<Oe.ints.length;++Ge)typeof Oe.ints[Ge]=="number"?ze.ints[Ge]=Ue.longs===String?String(Oe.ints[Ge]):Oe.ints[Ge]:ze.ints[Ge]=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.ints[Ge]):Ue.longs===Number?new Ve.LongBits(Oe.ints[Ge].low>>>0,Oe.ints[Ge].high>>>0).toNumber():Oe.ints[Ge];if(Oe.strings&&Oe.strings.length)for(ze.strings=[],Ge=0;Ge<Oe.strings.length;++Ge)ze.strings[Ge]=Ue.bytes===String?Ve.base64.encode(Oe.strings[Ge],0,Oe.strings[Ge].length):Ue.bytes===Array?Array.prototype.slice.call(Oe.strings[Ge]):Oe.strings[Ge];if(Oe.tensors&&Oe.tensors.length)for(ze.tensors=[],Ge=0;Ge<Oe.tensors.length;++Ge)ze.tensors[Ge]=Be.onnx.TensorProto.toObject(Oe.tensors[Ge],Ue);if(Oe.graphs&&Oe.graphs.length)for(ze.graphs=[],Ge=0;Ge<Oe.graphs.length;++Ge)ze.graphs[Ge]=Be.onnx.GraphProto.toObject(Oe.graphs[Ge],Ue);return Oe.docString!=null&&Oe.hasOwnProperty("docString")&&(ze.docString=Oe.docString),Oe.type!=null&&Oe.hasOwnProperty("type")&&(ze.type=Ue.enums===String?Be.onnx.AttributeProto.AttributeType[Oe.type]:Oe.type),Oe.refAttrName!=null&&Oe.hasOwnProperty("refAttrName")&&(ze.refAttrName=Oe.refAttrName),ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me.AttributeType=function(){var Oe={},Ue=Object.create(Oe);return Ue[Oe[0]="UNDEFINED"]=0,Ue[Oe[1]="FLOAT"]=1,Ue[Oe[2]="INT"]=2,Ue[Oe[3]="STRING"]=3,Ue[Oe[4]="TENSOR"]=4,Ue[Oe[5]="GRAPH"]=5,Ue[Oe[6]="FLOATS"]=6,Ue[Oe[7]="INTS"]=7,Ue[Oe[8]="STRINGS"]=8,Ue[Oe[9]="TENSORS"]=9,Ue[Oe[10]="GRAPHS"]=10,Ue}(),Me}(),Re.ValueInfoProto=function(){function Me(Oe){if(Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.name="",Me.prototype.type=null,Me.prototype.docString="",Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){return Ue||(Ue=$e.create()),Oe.name!=null&&Oe.hasOwnProperty("name")&&Ue.uint32(10).string(Oe.name),Oe.type!=null&&Oe.hasOwnProperty("type")&&Be.onnx.TypeProto.encode(Oe.type,Ue.uint32(18).fork()).ldelim(),Oe.docString!=null&&Oe.hasOwnProperty("docString")&&Ue.uint32(26).string(Oe.docString),Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.ValueInfoProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.name=Oe.string();break;case 2:He.type=Be.onnx.TypeProto.decode(Oe,Oe.uint32());break;case 3:He.docString=Oe.string();break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.name!=null&&Oe.hasOwnProperty("name")&&!Ve.isString(Oe.name))return"name: string expected";if(Oe.type!=null&&Oe.hasOwnProperty("type")){var Ue=Be.onnx.TypeProto.verify(Oe.type);if(Ue)return"type."+Ue}return Oe.docString!=null&&Oe.hasOwnProperty("docString")&&!Ve.isString(Oe.docString)?"docString: string expected":null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.ValueInfoProto)return Oe;var Ue=new Be.onnx.ValueInfoProto;if(Oe.name!=null&&(Ue.name=String(Oe.name)),Oe.type!=null){if(typeof Oe.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");Ue.type=Be.onnx.TypeProto.fromObject(Oe.type)}return Oe.docString!=null&&(Ue.docString=String(Oe.docString)),Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};return Ue.defaults&&(ze.name="",ze.type=null,ze.docString=""),Oe.name!=null&&Oe.hasOwnProperty("name")&&(ze.name=Oe.name),Oe.type!=null&&Oe.hasOwnProperty("type")&&(ze.type=Be.onnx.TypeProto.toObject(Oe.type,Ue)),Oe.docString!=null&&Oe.hasOwnProperty("docString")&&(ze.docString=Oe.docString),ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me}(),Re.NodeProto=function(){function Me(Oe){if(this.input=[],this.output=[],this.attribute=[],Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.input=Ve.emptyArray,Me.prototype.output=Ve.emptyArray,Me.prototype.name="",Me.prototype.opType="",Me.prototype.domain="",Me.prototype.attribute=Ve.emptyArray,Me.prototype.docString="",Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){if(Ue||(Ue=$e.create()),Oe.input!=null&&Oe.input.length)for(var ze=0;ze<Oe.input.length;++ze)Ue.uint32(10).string(Oe.input[ze]);if(Oe.output!=null&&Oe.output.length)for(ze=0;ze<Oe.output.length;++ze)Ue.uint32(18).string(Oe.output[ze]);if(Oe.name!=null&&Oe.hasOwnProperty("name")&&Ue.uint32(26).string(Oe.name),Oe.opType!=null&&Oe.hasOwnProperty("opType")&&Ue.uint32(34).string(Oe.opType),Oe.attribute!=null&&Oe.attribute.length)for(ze=0;ze<Oe.attribute.length;++ze)Be.onnx.AttributeProto.encode(Oe.attribute[ze],Ue.uint32(42).fork()).ldelim();return Oe.docString!=null&&Oe.hasOwnProperty("docString")&&Ue.uint32(50).string(Oe.docString),Oe.domain!=null&&Oe.hasOwnProperty("domain")&&Ue.uint32(58).string(Oe.domain),Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.NodeProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.input&&He.input.length||(He.input=[]),He.input.push(Oe.string());break;case 2:He.output&&He.output.length||(He.output=[]),He.output.push(Oe.string());break;case 3:He.name=Oe.string();break;case 4:He.opType=Oe.string();break;case 7:He.domain=Oe.string();break;case 5:He.attribute&&He.attribute.length||(He.attribute=[]),He.attribute.push(Be.onnx.AttributeProto.decode(Oe,Oe.uint32()));break;case 6:He.docString=Oe.string();break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.input!=null&&Oe.hasOwnProperty("input")){if(!Array.isArray(Oe.input))return"input: array expected";for(var Ue=0;Ue<Oe.input.length;++Ue)if(!Ve.isString(Oe.input[Ue]))return"input: string[] expected"}if(Oe.output!=null&&Oe.hasOwnProperty("output")){if(!Array.isArray(Oe.output))return"output: array expected";for(Ue=0;Ue<Oe.output.length;++Ue)if(!Ve.isString(Oe.output[Ue]))return"output: string[] expected"}if(Oe.name!=null&&Oe.hasOwnProperty("name")&&!Ve.isString(Oe.name))return"name: string expected";if(Oe.opType!=null&&Oe.hasOwnProperty("opType")&&!Ve.isString(Oe.opType))return"opType: string expected";if(Oe.domain!=null&&Oe.hasOwnProperty("domain")&&!Ve.isString(Oe.domain))return"domain: string expected";if(Oe.attribute!=null&&Oe.hasOwnProperty("attribute")){if(!Array.isArray(Oe.attribute))return"attribute: array expected";for(Ue=0;Ue<Oe.attribute.length;++Ue){var ze=Be.onnx.AttributeProto.verify(Oe.attribute[Ue]);if(ze)return"attribute."+ze}}return Oe.docString!=null&&Oe.hasOwnProperty("docString")&&!Ve.isString(Oe.docString)?"docString: string expected":null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.NodeProto)return Oe;var Ue=new Be.onnx.NodeProto;if(Oe.input){if(!Array.isArray(Oe.input))throw TypeError(".onnx.NodeProto.input: array expected");Ue.input=[];for(var ze=0;ze<Oe.input.length;++ze)Ue.input[ze]=String(Oe.input[ze])}if(Oe.output){if(!Array.isArray(Oe.output))throw TypeError(".onnx.NodeProto.output: array expected");for(Ue.output=[],ze=0;ze<Oe.output.length;++ze)Ue.output[ze]=String(Oe.output[ze])}if(Oe.name!=null&&(Ue.name=String(Oe.name)),Oe.opType!=null&&(Ue.opType=String(Oe.opType)),Oe.domain!=null&&(Ue.domain=String(Oe.domain)),Oe.attribute){if(!Array.isArray(Oe.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(Ue.attribute=[],ze=0;ze<Oe.attribute.length;++ze){if(typeof Oe.attribute[ze]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");Ue.attribute[ze]=Be.onnx.AttributeProto.fromObject(Oe.attribute[ze])}}return Oe.docString!=null&&(Ue.docString=String(Oe.docString)),Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if((Ue.arrays||Ue.defaults)&&(ze.input=[],ze.output=[],ze.attribute=[]),Ue.defaults&&(ze.name="",ze.opType="",ze.docString="",ze.domain=""),Oe.input&&Oe.input.length){ze.input=[];for(var He=0;He<Oe.input.length;++He)ze.input[He]=Oe.input[He]}if(Oe.output&&Oe.output.length)for(ze.output=[],He=0;He<Oe.output.length;++He)ze.output[He]=Oe.output[He];if(Oe.name!=null&&Oe.hasOwnProperty("name")&&(ze.name=Oe.name),Oe.opType!=null&&Oe.hasOwnProperty("opType")&&(ze.opType=Oe.opType),Oe.attribute&&Oe.attribute.length)for(ze.attribute=[],He=0;He<Oe.attribute.length;++He)ze.attribute[He]=Be.onnx.AttributeProto.toObject(Oe.attribute[He],Ue);return Oe.docString!=null&&Oe.hasOwnProperty("docString")&&(ze.docString=Oe.docString),Oe.domain!=null&&Oe.hasOwnProperty("domain")&&(ze.domain=Oe.domain),ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me}(),Re.ModelProto=function(){function Me(Oe){if(this.opsetImport=[],this.metadataProps=[],Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.irVersion=Ve.Long?Ve.Long.fromBits(0,0,!1):0,Me.prototype.opsetImport=Ve.emptyArray,Me.prototype.producerName="",Me.prototype.producerVersion="",Me.prototype.domain="",Me.prototype.modelVersion=Ve.Long?Ve.Long.fromBits(0,0,!1):0,Me.prototype.docString="",Me.prototype.graph=null,Me.prototype.metadataProps=Ve.emptyArray,Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){if(Ue||(Ue=$e.create()),Oe.irVersion!=null&&Oe.hasOwnProperty("irVersion")&&Ue.uint32(8).int64(Oe.irVersion),Oe.producerName!=null&&Oe.hasOwnProperty("producerName")&&Ue.uint32(18).string(Oe.producerName),Oe.producerVersion!=null&&Oe.hasOwnProperty("producerVersion")&&Ue.uint32(26).string(Oe.producerVersion),Oe.domain!=null&&Oe.hasOwnProperty("domain")&&Ue.uint32(34).string(Oe.domain),Oe.modelVersion!=null&&Oe.hasOwnProperty("modelVersion")&&Ue.uint32(40).int64(Oe.modelVersion),Oe.docString!=null&&Oe.hasOwnProperty("docString")&&Ue.uint32(50).string(Oe.docString),Oe.graph!=null&&Oe.hasOwnProperty("graph")&&Be.onnx.GraphProto.encode(Oe.graph,Ue.uint32(58).fork()).ldelim(),Oe.opsetImport!=null&&Oe.opsetImport.length)for(var ze=0;ze<Oe.opsetImport.length;++ze)Be.onnx.OperatorSetIdProto.encode(Oe.opsetImport[ze],Ue.uint32(66).fork()).ldelim();if(Oe.metadataProps!=null&&Oe.metadataProps.length)for(ze=0;ze<Oe.metadataProps.length;++ze)Be.onnx.StringStringEntryProto.encode(Oe.metadataProps[ze],Ue.uint32(114).fork()).ldelim();return Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.ModelProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.irVersion=Oe.int64();break;case 8:He.opsetImport&&He.opsetImport.length||(He.opsetImport=[]),He.opsetImport.push(Be.onnx.OperatorSetIdProto.decode(Oe,Oe.uint32()));break;case 2:He.producerName=Oe.string();break;case 3:He.producerVersion=Oe.string();break;case 4:He.domain=Oe.string();break;case 5:He.modelVersion=Oe.int64();break;case 6:He.docString=Oe.string();break;case 7:He.graph=Be.onnx.GraphProto.decode(Oe,Oe.uint32());break;case 14:He.metadataProps&&He.metadataProps.length||(He.metadataProps=[]),He.metadataProps.push(Be.onnx.StringStringEntryProto.decode(Oe,Oe.uint32()));break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.irVersion!=null&&Oe.hasOwnProperty("irVersion")&&!(Ve.isInteger(Oe.irVersion)||Oe.irVersion&&Ve.isInteger(Oe.irVersion.low)&&Ve.isInteger(Oe.irVersion.high)))return"irVersion: integer|Long expected";if(Oe.opsetImport!=null&&Oe.hasOwnProperty("opsetImport")){if(!Array.isArray(Oe.opsetImport))return"opsetImport: array expected";for(var Ue=0;Ue<Oe.opsetImport.length;++Ue)if(ze=Be.onnx.OperatorSetIdProto.verify(Oe.opsetImport[Ue]))return"opsetImport."+ze}if(Oe.producerName!=null&&Oe.hasOwnProperty("producerName")&&!Ve.isString(Oe.producerName))return"producerName: string expected";if(Oe.producerVersion!=null&&Oe.hasOwnProperty("producerVersion")&&!Ve.isString(Oe.producerVersion))return"producerVersion: string expected";if(Oe.domain!=null&&Oe.hasOwnProperty("domain")&&!Ve.isString(Oe.domain))return"domain: string expected";if(Oe.modelVersion!=null&&Oe.hasOwnProperty("modelVersion")&&!(Ve.isInteger(Oe.modelVersion)||Oe.modelVersion&&Ve.isInteger(Oe.modelVersion.low)&&Ve.isInteger(Oe.modelVersion.high)))return"modelVersion: integer|Long expected";if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&!Ve.isString(Oe.docString))return"docString: string expected";if(Oe.graph!=null&&Oe.hasOwnProperty("graph")&&(ze=Be.onnx.GraphProto.verify(Oe.graph)))return"graph."+ze;if(Oe.metadataProps!=null&&Oe.hasOwnProperty("metadataProps")){if(!Array.isArray(Oe.metadataProps))return"metadataProps: array expected";for(Ue=0;Ue<Oe.metadataProps.length;++Ue){var ze;if(ze=Be.onnx.StringStringEntryProto.verify(Oe.metadataProps[Ue]))return"metadataProps."+ze}}return null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.ModelProto)return Oe;var Ue=new Be.onnx.ModelProto;if(Oe.irVersion!=null&&(Ve.Long?(Ue.irVersion=Ve.Long.fromValue(Oe.irVersion)).unsigned=!1:typeof Oe.irVersion=="string"?Ue.irVersion=parseInt(Oe.irVersion,10):typeof Oe.irVersion=="number"?Ue.irVersion=Oe.irVersion:typeof Oe.irVersion=="object"&&(Ue.irVersion=new Ve.LongBits(Oe.irVersion.low>>>0,Oe.irVersion.high>>>0).toNumber())),Oe.opsetImport){if(!Array.isArray(Oe.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");Ue.opsetImport=[];for(var ze=0;ze<Oe.opsetImport.length;++ze){if(typeof Oe.opsetImport[ze]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");Ue.opsetImport[ze]=Be.onnx.OperatorSetIdProto.fromObject(Oe.opsetImport[ze])}}if(Oe.producerName!=null&&(Ue.producerName=String(Oe.producerName)),Oe.producerVersion!=null&&(Ue.producerVersion=String(Oe.producerVersion)),Oe.domain!=null&&(Ue.domain=String(Oe.domain)),Oe.modelVersion!=null&&(Ve.Long?(Ue.modelVersion=Ve.Long.fromValue(Oe.modelVersion)).unsigned=!1:typeof Oe.modelVersion=="string"?Ue.modelVersion=parseInt(Oe.modelVersion,10):typeof Oe.modelVersion=="number"?Ue.modelVersion=Oe.modelVersion:typeof Oe.modelVersion=="object"&&(Ue.modelVersion=new Ve.LongBits(Oe.modelVersion.low>>>0,Oe.modelVersion.high>>>0).toNumber())),Oe.docString!=null&&(Ue.docString=String(Oe.docString)),Oe.graph!=null){if(typeof Oe.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");Ue.graph=Be.onnx.GraphProto.fromObject(Oe.graph)}if(Oe.metadataProps){if(!Array.isArray(Oe.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(Ue.metadataProps=[],ze=0;ze<Oe.metadataProps.length;++ze){if(typeof Oe.metadataProps[ze]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");Ue.metadataProps[ze]=Be.onnx.StringStringEntryProto.fromObject(Oe.metadataProps[ze])}}return Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if((Ue.arrays||Ue.defaults)&&(ze.opsetImport=[],ze.metadataProps=[]),Ue.defaults){if(Ve.Long){var He=new Ve.Long(0,0,!1);ze.irVersion=Ue.longs===String?He.toString():Ue.longs===Number?He.toNumber():He}else ze.irVersion=Ue.longs===String?"0":0;ze.producerName="",ze.producerVersion="",ze.domain="",Ve.Long?(He=new Ve.Long(0,0,!1),ze.modelVersion=Ue.longs===String?He.toString():Ue.longs===Number?He.toNumber():He):ze.modelVersion=Ue.longs===String?"0":0,ze.docString="",ze.graph=null}if(Oe.irVersion!=null&&Oe.hasOwnProperty("irVersion")&&(typeof Oe.irVersion=="number"?ze.irVersion=Ue.longs===String?String(Oe.irVersion):Oe.irVersion:ze.irVersion=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.irVersion):Ue.longs===Number?new Ve.LongBits(Oe.irVersion.low>>>0,Oe.irVersion.high>>>0).toNumber():Oe.irVersion),Oe.producerName!=null&&Oe.hasOwnProperty("producerName")&&(ze.producerName=Oe.producerName),Oe.producerVersion!=null&&Oe.hasOwnProperty("producerVersion")&&(ze.producerVersion=Oe.producerVersion),Oe.domain!=null&&Oe.hasOwnProperty("domain")&&(ze.domain=Oe.domain),Oe.modelVersion!=null&&Oe.hasOwnProperty("modelVersion")&&(typeof Oe.modelVersion=="number"?ze.modelVersion=Ue.longs===String?String(Oe.modelVersion):Oe.modelVersion:ze.modelVersion=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.modelVersion):Ue.longs===Number?new Ve.LongBits(Oe.modelVersion.low>>>0,Oe.modelVersion.high>>>0).toNumber():Oe.modelVersion),Oe.docString!=null&&Oe.hasOwnProperty("docString")&&(ze.docString=Oe.docString),Oe.graph!=null&&Oe.hasOwnProperty("graph")&&(ze.graph=Be.onnx.GraphProto.toObject(Oe.graph,Ue)),Oe.opsetImport&&Oe.opsetImport.length){ze.opsetImport=[];for(var Ge=0;Ge<Oe.opsetImport.length;++Ge)ze.opsetImport[Ge]=Be.onnx.OperatorSetIdProto.toObject(Oe.opsetImport[Ge],Ue)}if(Oe.metadataProps&&Oe.metadataProps.length)for(ze.metadataProps=[],Ge=0;Ge<Oe.metadataProps.length;++Ge)ze.metadataProps[Ge]=Be.onnx.StringStringEntryProto.toObject(Oe.metadataProps[Ge],Ue);return ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me}(),Re.StringStringEntryProto=function(){function Me(Oe){if(Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.key="",Me.prototype.value="",Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){return Ue||(Ue=$e.create()),Oe.key!=null&&Oe.hasOwnProperty("key")&&Ue.uint32(10).string(Oe.key),Oe.value!=null&&Oe.hasOwnProperty("value")&&Ue.uint32(18).string(Oe.value),Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.StringStringEntryProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.key=Oe.string();break;case 2:He.value=Oe.string();break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){return typeof Oe!="object"||Oe===null?"object expected":Oe.key!=null&&Oe.hasOwnProperty("key")&&!Ve.isString(Oe.key)?"key: string expected":Oe.value!=null&&Oe.hasOwnProperty("value")&&!Ve.isString(Oe.value)?"value: string expected":null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.StringStringEntryProto)return Oe;var Ue=new Be.onnx.StringStringEntryProto;return Oe.key!=null&&(Ue.key=String(Oe.key)),Oe.value!=null&&(Ue.value=String(Oe.value)),Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};return Ue.defaults&&(ze.key="",ze.value=""),Oe.key!=null&&Oe.hasOwnProperty("key")&&(ze.key=Oe.key),Oe.value!=null&&Oe.hasOwnProperty("value")&&(ze.value=Oe.value),ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me}(),Re.TensorAnnotation=function(){function Me(Oe){if(this.quantParameterTensorNames=[],Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.tensorName="",Me.prototype.quantParameterTensorNames=Ve.emptyArray,Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){if(Ue||(Ue=$e.create()),Oe.tensorName!=null&&Oe.hasOwnProperty("tensorName")&&Ue.uint32(10).string(Oe.tensorName),Oe.quantParameterTensorNames!=null&&Oe.quantParameterTensorNames.length)for(var ze=0;ze<Oe.quantParameterTensorNames.length;++ze)Be.onnx.StringStringEntryProto.encode(Oe.quantParameterTensorNames[ze],Ue.uint32(18).fork()).ldelim();return Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.TensorAnnotation;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.tensorName=Oe.string();break;case 2:He.quantParameterTensorNames&&He.quantParameterTensorNames.length||(He.quantParameterTensorNames=[]),He.quantParameterTensorNames.push(Be.onnx.StringStringEntryProto.decode(Oe,Oe.uint32()));break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.tensorName!=null&&Oe.hasOwnProperty("tensorName")&&!Ve.isString(Oe.tensorName))return"tensorName: string expected";if(Oe.quantParameterTensorNames!=null&&Oe.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(Oe.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var Ue=0;Ue<Oe.quantParameterTensorNames.length;++Ue){var ze=Be.onnx.StringStringEntryProto.verify(Oe.quantParameterTensorNames[Ue]);if(ze)return"quantParameterTensorNames."+ze}}return null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.TensorAnnotation)return Oe;var Ue=new Be.onnx.TensorAnnotation;if(Oe.tensorName!=null&&(Ue.tensorName=String(Oe.tensorName)),Oe.quantParameterTensorNames){if(!Array.isArray(Oe.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");Ue.quantParameterTensorNames=[];for(var ze=0;ze<Oe.quantParameterTensorNames.length;++ze){if(typeof Oe.quantParameterTensorNames[ze]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");Ue.quantParameterTensorNames[ze]=Be.onnx.StringStringEntryProto.fromObject(Oe.quantParameterTensorNames[ze])}}return Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if((Ue.arrays||Ue.defaults)&&(ze.quantParameterTensorNames=[]),Ue.defaults&&(ze.tensorName=""),Oe.tensorName!=null&&Oe.hasOwnProperty("tensorName")&&(ze.tensorName=Oe.tensorName),Oe.quantParameterTensorNames&&Oe.quantParameterTensorNames.length){ze.quantParameterTensorNames=[];for(var He=0;He<Oe.quantParameterTensorNames.length;++He)ze.quantParameterTensorNames[He]=Be.onnx.StringStringEntryProto.toObject(Oe.quantParameterTensorNames[He],Ue)}return ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me}(),Re.GraphProto=function(){function Me(Oe){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.node=Ve.emptyArray,Me.prototype.name="",Me.prototype.initializer=Ve.emptyArray,Me.prototype.docString="",Me.prototype.input=Ve.emptyArray,Me.prototype.output=Ve.emptyArray,Me.prototype.valueInfo=Ve.emptyArray,Me.prototype.quantizationAnnotation=Ve.emptyArray,Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){if(Ue||(Ue=$e.create()),Oe.node!=null&&Oe.node.length)for(var ze=0;ze<Oe.node.length;++ze)Be.onnx.NodeProto.encode(Oe.node[ze],Ue.uint32(10).fork()).ldelim();if(Oe.name!=null&&Oe.hasOwnProperty("name")&&Ue.uint32(18).string(Oe.name),Oe.initializer!=null&&Oe.initializer.length)for(ze=0;ze<Oe.initializer.length;++ze)Be.onnx.TensorProto.encode(Oe.initializer[ze],Ue.uint32(42).fork()).ldelim();if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&Ue.uint32(82).string(Oe.docString),Oe.input!=null&&Oe.input.length)for(ze=0;ze<Oe.input.length;++ze)Be.onnx.ValueInfoProto.encode(Oe.input[ze],Ue.uint32(90).fork()).ldelim();if(Oe.output!=null&&Oe.output.length)for(ze=0;ze<Oe.output.length;++ze)Be.onnx.ValueInfoProto.encode(Oe.output[ze],Ue.uint32(98).fork()).ldelim();if(Oe.valueInfo!=null&&Oe.valueInfo.length)for(ze=0;ze<Oe.valueInfo.length;++ze)Be.onnx.ValueInfoProto.encode(Oe.valueInfo[ze],Ue.uint32(106).fork()).ldelim();if(Oe.quantizationAnnotation!=null&&Oe.quantizationAnnotation.length)for(ze=0;ze<Oe.quantizationAnnotation.length;++ze)Be.onnx.TensorAnnotation.encode(Oe.quantizationAnnotation[ze],Ue.uint32(114).fork()).ldelim();return Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.GraphProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.node&&He.node.length||(He.node=[]),He.node.push(Be.onnx.NodeProto.decode(Oe,Oe.uint32()));break;case 2:He.name=Oe.string();break;case 5:He.initializer&&He.initializer.length||(He.initializer=[]),He.initializer.push(Be.onnx.TensorProto.decode(Oe,Oe.uint32()));break;case 10:He.docString=Oe.string();break;case 11:He.input&&He.input.length||(He.input=[]),He.input.push(Be.onnx.ValueInfoProto.decode(Oe,Oe.uint32()));break;case 12:He.output&&He.output.length||(He.output=[]),He.output.push(Be.onnx.ValueInfoProto.decode(Oe,Oe.uint32()));break;case 13:He.valueInfo&&He.valueInfo.length||(He.valueInfo=[]),He.valueInfo.push(Be.onnx.ValueInfoProto.decode(Oe,Oe.uint32()));break;case 14:He.quantizationAnnotation&&He.quantizationAnnotation.length||(He.quantizationAnnotation=[]),He.quantizationAnnotation.push(Be.onnx.TensorAnnotation.decode(Oe,Oe.uint32()));break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.node!=null&&Oe.hasOwnProperty("node")){if(!Array.isArray(Oe.node))return"node: array expected";for(var Ue=0;Ue<Oe.node.length;++Ue)if(ze=Be.onnx.NodeProto.verify(Oe.node[Ue]))return"node."+ze}if(Oe.name!=null&&Oe.hasOwnProperty("name")&&!Ve.isString(Oe.name))return"name: string expected";if(Oe.initializer!=null&&Oe.hasOwnProperty("initializer")){if(!Array.isArray(Oe.initializer))return"initializer: array expected";for(Ue=0;Ue<Oe.initializer.length;++Ue)if(ze=Be.onnx.TensorProto.verify(Oe.initializer[Ue]))return"initializer."+ze}if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&!Ve.isString(Oe.docString))return"docString: string expected";if(Oe.input!=null&&Oe.hasOwnProperty("input")){if(!Array.isArray(Oe.input))return"input: array expected";for(Ue=0;Ue<Oe.input.length;++Ue)if(ze=Be.onnx.ValueInfoProto.verify(Oe.input[Ue]))return"input."+ze}if(Oe.output!=null&&Oe.hasOwnProperty("output")){if(!Array.isArray(Oe.output))return"output: array expected";for(Ue=0;Ue<Oe.output.length;++Ue)if(ze=Be.onnx.ValueInfoProto.verify(Oe.output[Ue]))return"output."+ze}if(Oe.valueInfo!=null&&Oe.hasOwnProperty("valueInfo")){if(!Array.isArray(Oe.valueInfo))return"valueInfo: array expected";for(Ue=0;Ue<Oe.valueInfo.length;++Ue)if(ze=Be.onnx.ValueInfoProto.verify(Oe.valueInfo[Ue]))return"valueInfo."+ze}if(Oe.quantizationAnnotation!=null&&Oe.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(Oe.quantizationAnnotation))return"quantizationAnnotation: array expected";for(Ue=0;Ue<Oe.quantizationAnnotation.length;++Ue){var ze;if(ze=Be.onnx.TensorAnnotation.verify(Oe.quantizationAnnotation[Ue]))return"quantizationAnnotation."+ze}}return null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.GraphProto)return Oe;var Ue=new Be.onnx.GraphProto;if(Oe.node){if(!Array.isArray(Oe.node))throw TypeError(".onnx.GraphProto.node: array expected");Ue.node=[];for(var ze=0;ze<Oe.node.length;++ze){if(typeof Oe.node[ze]!="object")throw TypeError(".onnx.GraphProto.node: object expected");Ue.node[ze]=Be.onnx.NodeProto.fromObject(Oe.node[ze])}}if(Oe.name!=null&&(Ue.name=String(Oe.name)),Oe.initializer){if(!Array.isArray(Oe.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(Ue.initializer=[],ze=0;ze<Oe.initializer.length;++ze){if(typeof Oe.initializer[ze]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");Ue.initializer[ze]=Be.onnx.TensorProto.fromObject(Oe.initializer[ze])}}if(Oe.docString!=null&&(Ue.docString=String(Oe.docString)),Oe.input){if(!Array.isArray(Oe.input))throw TypeError(".onnx.GraphProto.input: array expected");for(Ue.input=[],ze=0;ze<Oe.input.length;++ze){if(typeof Oe.input[ze]!="object")throw TypeError(".onnx.GraphProto.input: object expected");Ue.input[ze]=Be.onnx.ValueInfoProto.fromObject(Oe.input[ze])}}if(Oe.output){if(!Array.isArray(Oe.output))throw TypeError(".onnx.GraphProto.output: array expected");for(Ue.output=[],ze=0;ze<Oe.output.length;++ze){if(typeof Oe.output[ze]!="object")throw TypeError(".onnx.GraphProto.output: object expected");Ue.output[ze]=Be.onnx.ValueInfoProto.fromObject(Oe.output[ze])}}if(Oe.valueInfo){if(!Array.isArray(Oe.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(Ue.valueInfo=[],ze=0;ze<Oe.valueInfo.length;++ze){if(typeof Oe.valueInfo[ze]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");Ue.valueInfo[ze]=Be.onnx.ValueInfoProto.fromObject(Oe.valueInfo[ze])}}if(Oe.quantizationAnnotation){if(!Array.isArray(Oe.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(Ue.quantizationAnnotation=[],ze=0;ze<Oe.quantizationAnnotation.length;++ze){if(typeof Oe.quantizationAnnotation[ze]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");Ue.quantizationAnnotation[ze]=Be.onnx.TensorAnnotation.fromObject(Oe.quantizationAnnotation[ze])}}return Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if((Ue.arrays||Ue.defaults)&&(ze.node=[],ze.initializer=[],ze.input=[],ze.output=[],ze.valueInfo=[],ze.quantizationAnnotation=[]),Ue.defaults&&(ze.name="",ze.docString=""),Oe.node&&Oe.node.length){ze.node=[];for(var He=0;He<Oe.node.length;++He)ze.node[He]=Be.onnx.NodeProto.toObject(Oe.node[He],Ue)}if(Oe.name!=null&&Oe.hasOwnProperty("name")&&(ze.name=Oe.name),Oe.initializer&&Oe.initializer.length)for(ze.initializer=[],He=0;He<Oe.initializer.length;++He)ze.initializer[He]=Be.onnx.TensorProto.toObject(Oe.initializer[He],Ue);if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&(ze.docString=Oe.docString),Oe.input&&Oe.input.length)for(ze.input=[],He=0;He<Oe.input.length;++He)ze.input[He]=Be.onnx.ValueInfoProto.toObject(Oe.input[He],Ue);if(Oe.output&&Oe.output.length)for(ze.output=[],He=0;He<Oe.output.length;++He)ze.output[He]=Be.onnx.ValueInfoProto.toObject(Oe.output[He],Ue);if(Oe.valueInfo&&Oe.valueInfo.length)for(ze.valueInfo=[],He=0;He<Oe.valueInfo.length;++He)ze.valueInfo[He]=Be.onnx.ValueInfoProto.toObject(Oe.valueInfo[He],Ue);if(Oe.quantizationAnnotation&&Oe.quantizationAnnotation.length)for(ze.quantizationAnnotation=[],He=0;He<Oe.quantizationAnnotation.length;++He)ze.quantizationAnnotation[He]=Be.onnx.TensorAnnotation.toObject(Oe.quantizationAnnotation[He],Ue);return ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me}(),Re.TensorProto=function(){function Me(Oe){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.dims=Ve.emptyArray,Me.prototype.dataType=0,Me.prototype.segment=null,Me.prototype.floatData=Ve.emptyArray,Me.prototype.int32Data=Ve.emptyArray,Me.prototype.stringData=Ve.emptyArray,Me.prototype.int64Data=Ve.emptyArray,Me.prototype.name="",Me.prototype.docString="",Me.prototype.rawData=Ve.newBuffer([]),Me.prototype.externalData=Ve.emptyArray,Me.prototype.dataLocation=0,Me.prototype.doubleData=Ve.emptyArray,Me.prototype.uint64Data=Ve.emptyArray,Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){if(Ue||(Ue=$e.create()),Oe.dims!=null&&Oe.dims.length){Ue.uint32(10).fork();for(var ze=0;ze<Oe.dims.length;++ze)Ue.int64(Oe.dims[ze]);Ue.ldelim()}if(Oe.dataType!=null&&Oe.hasOwnProperty("dataType")&&Ue.uint32(16).int32(Oe.dataType),Oe.segment!=null&&Oe.hasOwnProperty("segment")&&Be.onnx.TensorProto.Segment.encode(Oe.segment,Ue.uint32(26).fork()).ldelim(),Oe.floatData!=null&&Oe.floatData.length){for(Ue.uint32(34).fork(),ze=0;ze<Oe.floatData.length;++ze)Ue.float(Oe.floatData[ze]);Ue.ldelim()}if(Oe.int32Data!=null&&Oe.int32Data.length){for(Ue.uint32(42).fork(),ze=0;ze<Oe.int32Data.length;++ze)Ue.int32(Oe.int32Data[ze]);Ue.ldelim()}if(Oe.stringData!=null&&Oe.stringData.length)for(ze=0;ze<Oe.stringData.length;++ze)Ue.uint32(50).bytes(Oe.stringData[ze]);if(Oe.int64Data!=null&&Oe.int64Data.length){for(Ue.uint32(58).fork(),ze=0;ze<Oe.int64Data.length;++ze)Ue.int64(Oe.int64Data[ze]);Ue.ldelim()}if(Oe.name!=null&&Oe.hasOwnProperty("name")&&Ue.uint32(66).string(Oe.name),Oe.rawData!=null&&Oe.hasOwnProperty("rawData")&&Ue.uint32(74).bytes(Oe.rawData),Oe.doubleData!=null&&Oe.doubleData.length){for(Ue.uint32(82).fork(),ze=0;ze<Oe.doubleData.length;++ze)Ue.double(Oe.doubleData[ze]);Ue.ldelim()}if(Oe.uint64Data!=null&&Oe.uint64Data.length){for(Ue.uint32(90).fork(),ze=0;ze<Oe.uint64Data.length;++ze)Ue.uint64(Oe.uint64Data[ze]);Ue.ldelim()}if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&Ue.uint32(98).string(Oe.docString),Oe.externalData!=null&&Oe.externalData.length)for(ze=0;ze<Oe.externalData.length;++ze)Be.onnx.StringStringEntryProto.encode(Oe.externalData[ze],Ue.uint32(106).fork()).ldelim();return Oe.dataLocation!=null&&Oe.hasOwnProperty("dataLocation")&&Ue.uint32(112).int32(Oe.dataLocation),Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.TensorProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:if(He.dims&&He.dims.length||(He.dims=[]),(7&Ge)==2)for(var Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.dims.push(Oe.int64());else He.dims.push(Oe.int64());break;case 2:He.dataType=Oe.int32();break;case 3:He.segment=Be.onnx.TensorProto.Segment.decode(Oe,Oe.uint32());break;case 4:if(He.floatData&&He.floatData.length||(He.floatData=[]),(7&Ge)==2)for(Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.floatData.push(Oe.float());else He.floatData.push(Oe.float());break;case 5:if(He.int32Data&&He.int32Data.length||(He.int32Data=[]),(7&Ge)==2)for(Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.int32Data.push(Oe.int32());else He.int32Data.push(Oe.int32());break;case 6:He.stringData&&He.stringData.length||(He.stringData=[]),He.stringData.push(Oe.bytes());break;case 7:if(He.int64Data&&He.int64Data.length||(He.int64Data=[]),(7&Ge)==2)for(Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.int64Data.push(Oe.int64());else He.int64Data.push(Oe.int64());break;case 8:He.name=Oe.string();break;case 12:He.docString=Oe.string();break;case 9:He.rawData=Oe.bytes();break;case 13:He.externalData&&He.externalData.length||(He.externalData=[]),He.externalData.push(Be.onnx.StringStringEntryProto.decode(Oe,Oe.uint32()));break;case 14:He.dataLocation=Oe.int32();break;case 10:if(He.doubleData&&He.doubleData.length||(He.doubleData=[]),(7&Ge)==2)for(Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.doubleData.push(Oe.double());else He.doubleData.push(Oe.double());break;case 11:if(He.uint64Data&&He.uint64Data.length||(He.uint64Data=[]),(7&Ge)==2)for(Ke=Oe.uint32()+Oe.pos;Oe.pos<Ke;)He.uint64Data.push(Oe.uint64());else He.uint64Data.push(Oe.uint64());break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.dims!=null&&Oe.hasOwnProperty("dims")){if(!Array.isArray(Oe.dims))return"dims: array expected";for(var Ue=0;Ue<Oe.dims.length;++Ue)if(!(Ve.isInteger(Oe.dims[Ue])||Oe.dims[Ue]&&Ve.isInteger(Oe.dims[Ue].low)&&Ve.isInteger(Oe.dims[Ue].high)))return"dims: integer|Long[] expected"}if(Oe.dataType!=null&&Oe.hasOwnProperty("dataType")&&!Ve.isInteger(Oe.dataType))return"dataType: integer expected";if(Oe.segment!=null&&Oe.hasOwnProperty("segment")&&(ze=Be.onnx.TensorProto.Segment.verify(Oe.segment)))return"segment."+ze;if(Oe.floatData!=null&&Oe.hasOwnProperty("floatData")){if(!Array.isArray(Oe.floatData))return"floatData: array expected";for(Ue=0;Ue<Oe.floatData.length;++Ue)if(typeof Oe.floatData[Ue]!="number")return"floatData: number[] expected"}if(Oe.int32Data!=null&&Oe.hasOwnProperty("int32Data")){if(!Array.isArray(Oe.int32Data))return"int32Data: array expected";for(Ue=0;Ue<Oe.int32Data.length;++Ue)if(!Ve.isInteger(Oe.int32Data[Ue]))return"int32Data: integer[] expected"}if(Oe.stringData!=null&&Oe.hasOwnProperty("stringData")){if(!Array.isArray(Oe.stringData))return"stringData: array expected";for(Ue=0;Ue<Oe.stringData.length;++Ue)if(!(Oe.stringData[Ue]&&typeof Oe.stringData[Ue].length=="number"||Ve.isString(Oe.stringData[Ue])))return"stringData: buffer[] expected"}if(Oe.int64Data!=null&&Oe.hasOwnProperty("int64Data")){if(!Array.isArray(Oe.int64Data))return"int64Data: array expected";for(Ue=0;Ue<Oe.int64Data.length;++Ue)if(!(Ve.isInteger(Oe.int64Data[Ue])||Oe.int64Data[Ue]&&Ve.isInteger(Oe.int64Data[Ue].low)&&Ve.isInteger(Oe.int64Data[Ue].high)))return"int64Data: integer|Long[] expected"}if(Oe.name!=null&&Oe.hasOwnProperty("name")&&!Ve.isString(Oe.name))return"name: string expected";if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&!Ve.isString(Oe.docString))return"docString: string expected";if(Oe.rawData!=null&&Oe.hasOwnProperty("rawData")&&!(Oe.rawData&&typeof Oe.rawData.length=="number"||Ve.isString(Oe.rawData)))return"rawData: buffer expected";if(Oe.externalData!=null&&Oe.hasOwnProperty("externalData")){if(!Array.isArray(Oe.externalData))return"externalData: array expected";for(Ue=0;Ue<Oe.externalData.length;++Ue){var ze;if(ze=Be.onnx.StringStringEntryProto.verify(Oe.externalData[Ue]))return"externalData."+ze}}if(Oe.dataLocation!=null&&Oe.hasOwnProperty("dataLocation"))switch(Oe.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(Oe.doubleData!=null&&Oe.hasOwnProperty("doubleData")){if(!Array.isArray(Oe.doubleData))return"doubleData: array expected";for(Ue=0;Ue<Oe.doubleData.length;++Ue)if(typeof Oe.doubleData[Ue]!="number")return"doubleData: number[] expected"}if(Oe.uint64Data!=null&&Oe.hasOwnProperty("uint64Data")){if(!Array.isArray(Oe.uint64Data))return"uint64Data: array expected";for(Ue=0;Ue<Oe.uint64Data.length;++Ue)if(!(Ve.isInteger(Oe.uint64Data[Ue])||Oe.uint64Data[Ue]&&Ve.isInteger(Oe.uint64Data[Ue].low)&&Ve.isInteger(Oe.uint64Data[Ue].high)))return"uint64Data: integer|Long[] expected"}return null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.TensorProto)return Oe;var Ue=new Be.onnx.TensorProto;if(Oe.dims){if(!Array.isArray(Oe.dims))throw TypeError(".onnx.TensorProto.dims: array expected");Ue.dims=[];for(var ze=0;ze<Oe.dims.length;++ze)Ve.Long?(Ue.dims[ze]=Ve.Long.fromValue(Oe.dims[ze])).unsigned=!1:typeof Oe.dims[ze]=="string"?Ue.dims[ze]=parseInt(Oe.dims[ze],10):typeof Oe.dims[ze]=="number"?Ue.dims[ze]=Oe.dims[ze]:typeof Oe.dims[ze]=="object"&&(Ue.dims[ze]=new Ve.LongBits(Oe.dims[ze].low>>>0,Oe.dims[ze].high>>>0).toNumber())}if(Oe.dataType!=null&&(Ue.dataType=0|Oe.dataType),Oe.segment!=null){if(typeof Oe.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");Ue.segment=Be.onnx.TensorProto.Segment.fromObject(Oe.segment)}if(Oe.floatData){if(!Array.isArray(Oe.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(Ue.floatData=[],ze=0;ze<Oe.floatData.length;++ze)Ue.floatData[ze]=Number(Oe.floatData[ze])}if(Oe.int32Data){if(!Array.isArray(Oe.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(Ue.int32Data=[],ze=0;ze<Oe.int32Data.length;++ze)Ue.int32Data[ze]=0|Oe.int32Data[ze]}if(Oe.stringData){if(!Array.isArray(Oe.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(Ue.stringData=[],ze=0;ze<Oe.stringData.length;++ze)typeof Oe.stringData[ze]=="string"?Ve.base64.decode(Oe.stringData[ze],Ue.stringData[ze]=Ve.newBuffer(Ve.base64.length(Oe.stringData[ze])),0):Oe.stringData[ze].length&&(Ue.stringData[ze]=Oe.stringData[ze])}if(Oe.int64Data){if(!Array.isArray(Oe.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(Ue.int64Data=[],ze=0;ze<Oe.int64Data.length;++ze)Ve.Long?(Ue.int64Data[ze]=Ve.Long.fromValue(Oe.int64Data[ze])).unsigned=!1:typeof Oe.int64Data[ze]=="string"?Ue.int64Data[ze]=parseInt(Oe.int64Data[ze],10):typeof Oe.int64Data[ze]=="number"?Ue.int64Data[ze]=Oe.int64Data[ze]:typeof Oe.int64Data[ze]=="object"&&(Ue.int64Data[ze]=new Ve.LongBits(Oe.int64Data[ze].low>>>0,Oe.int64Data[ze].high>>>0).toNumber())}if(Oe.name!=null&&(Ue.name=String(Oe.name)),Oe.docString!=null&&(Ue.docString=String(Oe.docString)),Oe.rawData!=null&&(typeof Oe.rawData=="string"?Ve.base64.decode(Oe.rawData,Ue.rawData=Ve.newBuffer(Ve.base64.length(Oe.rawData)),0):Oe.rawData.length&&(Ue.rawData=Oe.rawData)),Oe.externalData){if(!Array.isArray(Oe.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(Ue.externalData=[],ze=0;ze<Oe.externalData.length;++ze){if(typeof Oe.externalData[ze]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");Ue.externalData[ze]=Be.onnx.StringStringEntryProto.fromObject(Oe.externalData[ze])}}switch(Oe.dataLocation){case"DEFAULT":case 0:Ue.dataLocation=0;break;case"EXTERNAL":case 1:Ue.dataLocation=1}if(Oe.doubleData){if(!Array.isArray(Oe.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(Ue.doubleData=[],ze=0;ze<Oe.doubleData.length;++ze)Ue.doubleData[ze]=Number(Oe.doubleData[ze])}if(Oe.uint64Data){if(!Array.isArray(Oe.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(Ue.uint64Data=[],ze=0;ze<Oe.uint64Data.length;++ze)Ve.Long?(Ue.uint64Data[ze]=Ve.Long.fromValue(Oe.uint64Data[ze])).unsigned=!0:typeof Oe.uint64Data[ze]=="string"?Ue.uint64Data[ze]=parseInt(Oe.uint64Data[ze],10):typeof Oe.uint64Data[ze]=="number"?Ue.uint64Data[ze]=Oe.uint64Data[ze]:typeof Oe.uint64Data[ze]=="object"&&(Ue.uint64Data[ze]=new Ve.LongBits(Oe.uint64Data[ze].low>>>0,Oe.uint64Data[ze].high>>>0).toNumber(!0))}return Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if((Ue.arrays||Ue.defaults)&&(ze.dims=[],ze.floatData=[],ze.int32Data=[],ze.stringData=[],ze.int64Data=[],ze.doubleData=[],ze.uint64Data=[],ze.externalData=[]),Ue.defaults&&(ze.dataType=0,ze.segment=null,ze.name="",Ue.bytes===String?ze.rawData="":(ze.rawData=[],Ue.bytes!==Array&&(ze.rawData=Ve.newBuffer(ze.rawData))),ze.docString="",ze.dataLocation=Ue.enums===String?"DEFAULT":0),Oe.dims&&Oe.dims.length){ze.dims=[];for(var He=0;He<Oe.dims.length;++He)typeof Oe.dims[He]=="number"?ze.dims[He]=Ue.longs===String?String(Oe.dims[He]):Oe.dims[He]:ze.dims[He]=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.dims[He]):Ue.longs===Number?new Ve.LongBits(Oe.dims[He].low>>>0,Oe.dims[He].high>>>0).toNumber():Oe.dims[He]}if(Oe.dataType!=null&&Oe.hasOwnProperty("dataType")&&(ze.dataType=Oe.dataType),Oe.segment!=null&&Oe.hasOwnProperty("segment")&&(ze.segment=Be.onnx.TensorProto.Segment.toObject(Oe.segment,Ue)),Oe.floatData&&Oe.floatData.length)for(ze.floatData=[],He=0;He<Oe.floatData.length;++He)ze.floatData[He]=Ue.json&&!isFinite(Oe.floatData[He])?String(Oe.floatData[He]):Oe.floatData[He];if(Oe.int32Data&&Oe.int32Data.length)for(ze.int32Data=[],He=0;He<Oe.int32Data.length;++He)ze.int32Data[He]=Oe.int32Data[He];if(Oe.stringData&&Oe.stringData.length)for(ze.stringData=[],He=0;He<Oe.stringData.length;++He)ze.stringData[He]=Ue.bytes===String?Ve.base64.encode(Oe.stringData[He],0,Oe.stringData[He].length):Ue.bytes===Array?Array.prototype.slice.call(Oe.stringData[He]):Oe.stringData[He];if(Oe.int64Data&&Oe.int64Data.length)for(ze.int64Data=[],He=0;He<Oe.int64Data.length;++He)typeof Oe.int64Data[He]=="number"?ze.int64Data[He]=Ue.longs===String?String(Oe.int64Data[He]):Oe.int64Data[He]:ze.int64Data[He]=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.int64Data[He]):Ue.longs===Number?new Ve.LongBits(Oe.int64Data[He].low>>>0,Oe.int64Data[He].high>>>0).toNumber():Oe.int64Data[He];if(Oe.name!=null&&Oe.hasOwnProperty("name")&&(ze.name=Oe.name),Oe.rawData!=null&&Oe.hasOwnProperty("rawData")&&(ze.rawData=Ue.bytes===String?Ve.base64.encode(Oe.rawData,0,Oe.rawData.length):Ue.bytes===Array?Array.prototype.slice.call(Oe.rawData):Oe.rawData),Oe.doubleData&&Oe.doubleData.length)for(ze.doubleData=[],He=0;He<Oe.doubleData.length;++He)ze.doubleData[He]=Ue.json&&!isFinite(Oe.doubleData[He])?String(Oe.doubleData[He]):Oe.doubleData[He];if(Oe.uint64Data&&Oe.uint64Data.length)for(ze.uint64Data=[],He=0;He<Oe.uint64Data.length;++He)typeof Oe.uint64Data[He]=="number"?ze.uint64Data[He]=Ue.longs===String?String(Oe.uint64Data[He]):Oe.uint64Data[He]:ze.uint64Data[He]=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.uint64Data[He]):Ue.longs===Number?new Ve.LongBits(Oe.uint64Data[He].low>>>0,Oe.uint64Data[He].high>>>0).toNumber(!0):Oe.uint64Data[He];if(Oe.docString!=null&&Oe.hasOwnProperty("docString")&&(ze.docString=Oe.docString),Oe.externalData&&Oe.externalData.length)for(ze.externalData=[],He=0;He<Oe.externalData.length;++He)ze.externalData[He]=Be.onnx.StringStringEntryProto.toObject(Oe.externalData[He],Ue);return Oe.dataLocation!=null&&Oe.hasOwnProperty("dataLocation")&&(ze.dataLocation=Ue.enums===String?Be.onnx.TensorProto.DataLocation[Oe.dataLocation]:Oe.dataLocation),ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me.DataType=function(){var Oe={},Ue=Object.create(Oe);return Ue[Oe[0]="UNDEFINED"]=0,Ue[Oe[1]="FLOAT"]=1,Ue[Oe[2]="UINT8"]=2,Ue[Oe[3]="INT8"]=3,Ue[Oe[4]="UINT16"]=4,Ue[Oe[5]="INT16"]=5,Ue[Oe[6]="INT32"]=6,Ue[Oe[7]="INT64"]=7,Ue[Oe[8]="STRING"]=8,Ue[Oe[9]="BOOL"]=9,Ue[Oe[10]="FLOAT16"]=10,Ue[Oe[11]="DOUBLE"]=11,Ue[Oe[12]="UINT32"]=12,Ue[Oe[13]="UINT64"]=13,Ue[Oe[14]="COMPLEX64"]=14,Ue[Oe[15]="COMPLEX128"]=15,Ue[Oe[16]="BFLOAT16"]=16,Ue}(),Me.Segment=function(){function Oe(Ue){if(Ue)for(var ze=Object.keys(Ue),He=0;He<ze.length;++He)Ue[ze[He]]!=null&&(this[ze[He]]=Ue[ze[He]])}return Oe.prototype.begin=Ve.Long?Ve.Long.fromBits(0,0,!1):0,Oe.prototype.end=Ve.Long?Ve.Long.fromBits(0,0,!1):0,Oe.create=function(Ue){return new Oe(Ue)},Oe.encode=function(Ue,ze){return ze||(ze=$e.create()),Ue.begin!=null&&Ue.hasOwnProperty("begin")&&ze.uint32(8).int64(Ue.begin),Ue.end!=null&&Ue.hasOwnProperty("end")&&ze.uint32(16).int64(Ue.end),ze},Oe.encodeDelimited=function(Ue,ze){return this.encode(Ue,ze).ldelim()},Oe.decode=function(Ue,ze){Ue instanceof De||(Ue=De.create(Ue));for(var He=ze===void 0?Ue.len:Ue.pos+ze,Ge=new Be.onnx.TensorProto.Segment;Ue.pos<He;){var Ke=Ue.uint32();switch(Ke>>>3){case 1:Ge.begin=Ue.int64();break;case 2:Ge.end=Ue.int64();break;default:Ue.skipType(7&Ke)}}return Ge},Oe.decodeDelimited=function(Ue){return Ue instanceof De||(Ue=new De(Ue)),this.decode(Ue,Ue.uint32())},Oe.verify=function(Ue){return typeof Ue!="object"||Ue===null?"object expected":Ue.begin!=null&&Ue.hasOwnProperty("begin")&&!(Ve.isInteger(Ue.begin)||Ue.begin&&Ve.isInteger(Ue.begin.low)&&Ve.isInteger(Ue.begin.high))?"begin: integer|Long expected":Ue.end!=null&&Ue.hasOwnProperty("end")&&!(Ve.isInteger(Ue.end)||Ue.end&&Ve.isInteger(Ue.end.low)&&Ve.isInteger(Ue.end.high))?"end: integer|Long expected":null},Oe.fromObject=function(Ue){if(Ue instanceof Be.onnx.TensorProto.Segment)return Ue;var ze=new Be.onnx.TensorProto.Segment;return Ue.begin!=null&&(Ve.Long?(ze.begin=Ve.Long.fromValue(Ue.begin)).unsigned=!1:typeof Ue.begin=="string"?ze.begin=parseInt(Ue.begin,10):typeof Ue.begin=="number"?ze.begin=Ue.begin:typeof Ue.begin=="object"&&(ze.begin=new Ve.LongBits(Ue.begin.low>>>0,Ue.begin.high>>>0).toNumber())),Ue.end!=null&&(Ve.Long?(ze.end=Ve.Long.fromValue(Ue.end)).unsigned=!1:typeof Ue.end=="string"?ze.end=parseInt(Ue.end,10):typeof Ue.end=="number"?ze.end=Ue.end:typeof Ue.end=="object"&&(ze.end=new Ve.LongBits(Ue.end.low>>>0,Ue.end.high>>>0).toNumber())),ze},Oe.toObject=function(Ue,ze){ze||(ze={});var He={};if(ze.defaults){if(Ve.Long){var Ge=new Ve.Long(0,0,!1);He.begin=ze.longs===String?Ge.toString():ze.longs===Number?Ge.toNumber():Ge}else He.begin=ze.longs===String?"0":0;Ve.Long?(Ge=new Ve.Long(0,0,!1),He.end=ze.longs===String?Ge.toString():ze.longs===Number?Ge.toNumber():Ge):He.end=ze.longs===String?"0":0}return Ue.begin!=null&&Ue.hasOwnProperty("begin")&&(typeof Ue.begin=="number"?He.begin=ze.longs===String?String(Ue.begin):Ue.begin:He.begin=ze.longs===String?Ve.Long.prototype.toString.call(Ue.begin):ze.longs===Number?new Ve.LongBits(Ue.begin.low>>>0,Ue.begin.high>>>0).toNumber():Ue.begin),Ue.end!=null&&Ue.hasOwnProperty("end")&&(typeof Ue.end=="number"?He.end=ze.longs===String?String(Ue.end):Ue.end:He.end=ze.longs===String?Ve.Long.prototype.toString.call(Ue.end):ze.longs===Number?new Ve.LongBits(Ue.end.low>>>0,Ue.end.high>>>0).toNumber():Ue.end),He},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Oe}(),Me.DataLocation=function(){var Oe={},Ue=Object.create(Oe);return Ue[Oe[0]="DEFAULT"]=0,Ue[Oe[1]="EXTERNAL"]=1,Ue}(),Me}(),Re.TensorShapeProto=function(){function Me(Oe){if(this.dim=[],Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.dim=Ve.emptyArray,Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){if(Ue||(Ue=$e.create()),Oe.dim!=null&&Oe.dim.length)for(var ze=0;ze<Oe.dim.length;++ze)Be.onnx.TensorShapeProto.Dimension.encode(Oe.dim[ze],Ue.uint32(10).fork()).ldelim();return Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.TensorShapeProto;Oe.pos<ze;){var Ge=Oe.uint32();Ge>>>3==1?(He.dim&&He.dim.length||(He.dim=[]),He.dim.push(Be.onnx.TensorShapeProto.Dimension.decode(Oe,Oe.uint32()))):Oe.skipType(7&Ge)}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){if(typeof Oe!="object"||Oe===null)return"object expected";if(Oe.dim!=null&&Oe.hasOwnProperty("dim")){if(!Array.isArray(Oe.dim))return"dim: array expected";for(var Ue=0;Ue<Oe.dim.length;++Ue){var ze=Be.onnx.TensorShapeProto.Dimension.verify(Oe.dim[Ue]);if(ze)return"dim."+ze}}return null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.TensorShapeProto)return Oe;var Ue=new Be.onnx.TensorShapeProto;if(Oe.dim){if(!Array.isArray(Oe.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");Ue.dim=[];for(var ze=0;ze<Oe.dim.length;++ze){if(typeof Oe.dim[ze]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");Ue.dim[ze]=Be.onnx.TensorShapeProto.Dimension.fromObject(Oe.dim[ze])}}return Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if((Ue.arrays||Ue.defaults)&&(ze.dim=[]),Oe.dim&&Oe.dim.length){ze.dim=[];for(var He=0;He<Oe.dim.length;++He)ze.dim[He]=Be.onnx.TensorShapeProto.Dimension.toObject(Oe.dim[He],Ue)}return ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me.Dimension=function(){function Oe(ze){if(ze)for(var He=Object.keys(ze),Ge=0;Ge<He.length;++Ge)ze[He[Ge]]!=null&&(this[He[Ge]]=ze[He[Ge]])}var Ue;return Oe.prototype.dimValue=Ve.Long?Ve.Long.fromBits(0,0,!1):0,Oe.prototype.dimParam="",Oe.prototype.denotation="",Object.defineProperty(Oe.prototype,"value",{get:Ve.oneOfGetter(Ue=["dimValue","dimParam"]),set:Ve.oneOfSetter(Ue)}),Oe.create=function(ze){return new Oe(ze)},Oe.encode=function(ze,He){return He||(He=$e.create()),ze.dimValue!=null&&ze.hasOwnProperty("dimValue")&&He.uint32(8).int64(ze.dimValue),ze.dimParam!=null&&ze.hasOwnProperty("dimParam")&&He.uint32(18).string(ze.dimParam),ze.denotation!=null&&ze.hasOwnProperty("denotation")&&He.uint32(26).string(ze.denotation),He},Oe.encodeDelimited=function(ze,He){return this.encode(ze,He).ldelim()},Oe.decode=function(ze,He){ze instanceof De||(ze=De.create(ze));for(var Ge=He===void 0?ze.len:ze.pos+He,Ke=new Be.onnx.TensorShapeProto.Dimension;ze.pos<Ge;){var Xe=ze.uint32();switch(Xe>>>3){case 1:Ke.dimValue=ze.int64();break;case 2:Ke.dimParam=ze.string();break;case 3:Ke.denotation=ze.string();break;default:ze.skipType(7&Xe)}}return Ke},Oe.decodeDelimited=function(ze){return ze instanceof De||(ze=new De(ze)),this.decode(ze,ze.uint32())},Oe.verify=function(ze){if(typeof ze!="object"||ze===null)return"object expected";var He={};if(ze.dimValue!=null&&ze.hasOwnProperty("dimValue")&&(He.value=1,!(Ve.isInteger(ze.dimValue)||ze.dimValue&&Ve.isInteger(ze.dimValue.low)&&Ve.isInteger(ze.dimValue.high))))return"dimValue: integer|Long expected";if(ze.dimParam!=null&&ze.hasOwnProperty("dimParam")){if(He.value===1)return"value: multiple values";if(He.value=1,!Ve.isString(ze.dimParam))return"dimParam: string expected"}return ze.denotation!=null&&ze.hasOwnProperty("denotation")&&!Ve.isString(ze.denotation)?"denotation: string expected":null},Oe.fromObject=function(ze){if(ze instanceof Be.onnx.TensorShapeProto.Dimension)return ze;var He=new Be.onnx.TensorShapeProto.Dimension;return ze.dimValue!=null&&(Ve.Long?(He.dimValue=Ve.Long.fromValue(ze.dimValue)).unsigned=!1:typeof ze.dimValue=="string"?He.dimValue=parseInt(ze.dimValue,10):typeof ze.dimValue=="number"?He.dimValue=ze.dimValue:typeof ze.dimValue=="object"&&(He.dimValue=new Ve.LongBits(ze.dimValue.low>>>0,ze.dimValue.high>>>0).toNumber())),ze.dimParam!=null&&(He.dimParam=String(ze.dimParam)),ze.denotation!=null&&(He.denotation=String(ze.denotation)),He},Oe.toObject=function(ze,He){He||(He={});var Ge={};return He.defaults&&(Ge.denotation=""),ze.dimValue!=null&&ze.hasOwnProperty("dimValue")&&(typeof ze.dimValue=="number"?Ge.dimValue=He.longs===String?String(ze.dimValue):ze.dimValue:Ge.dimValue=He.longs===String?Ve.Long.prototype.toString.call(ze.dimValue):He.longs===Number?new Ve.LongBits(ze.dimValue.low>>>0,ze.dimValue.high>>>0).toNumber():ze.dimValue,He.oneofs&&(Ge.value="dimValue")),ze.dimParam!=null&&ze.hasOwnProperty("dimParam")&&(Ge.dimParam=ze.dimParam,He.oneofs&&(Ge.value="dimParam")),ze.denotation!=null&&ze.hasOwnProperty("denotation")&&(Ge.denotation=ze.denotation),Ge},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Oe}(),Me}(),Re.TypeProto=function(){function Me(Ue){if(Ue)for(var ze=Object.keys(Ue),He=0;He<ze.length;++He)Ue[ze[He]]!=null&&(this[ze[He]]=Ue[ze[He]])}var Oe;return Me.prototype.tensorType=null,Me.prototype.denotation="",Object.defineProperty(Me.prototype,"value",{get:Ve.oneOfGetter(Oe=["tensorType"]),set:Ve.oneOfSetter(Oe)}),Me.create=function(Ue){return new Me(Ue)},Me.encode=function(Ue,ze){return ze||(ze=$e.create()),Ue.tensorType!=null&&Ue.hasOwnProperty("tensorType")&&Be.onnx.TypeProto.Tensor.encode(Ue.tensorType,ze.uint32(10).fork()).ldelim(),Ue.denotation!=null&&Ue.hasOwnProperty("denotation")&&ze.uint32(50).string(Ue.denotation),ze},Me.encodeDelimited=function(Ue,ze){return this.encode(Ue,ze).ldelim()},Me.decode=function(Ue,ze){Ue instanceof De||(Ue=De.create(Ue));for(var He=ze===void 0?Ue.len:Ue.pos+ze,Ge=new Be.onnx.TypeProto;Ue.pos<He;){var Ke=Ue.uint32();switch(Ke>>>3){case 1:Ge.tensorType=Be.onnx.TypeProto.Tensor.decode(Ue,Ue.uint32());break;case 6:Ge.denotation=Ue.string();break;default:Ue.skipType(7&Ke)}}return Ge},Me.decodeDelimited=function(Ue){return Ue instanceof De||(Ue=new De(Ue)),this.decode(Ue,Ue.uint32())},Me.verify=function(Ue){if(typeof Ue!="object"||Ue===null)return"object expected";if(Ue.tensorType!=null&&Ue.hasOwnProperty("tensorType")){var ze=Be.onnx.TypeProto.Tensor.verify(Ue.tensorType);if(ze)return"tensorType."+ze}return Ue.denotation!=null&&Ue.hasOwnProperty("denotation")&&!Ve.isString(Ue.denotation)?"denotation: string expected":null},Me.fromObject=function(Ue){if(Ue instanceof Be.onnx.TypeProto)return Ue;var ze=new Be.onnx.TypeProto;if(Ue.tensorType!=null){if(typeof Ue.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");ze.tensorType=Be.onnx.TypeProto.Tensor.fromObject(Ue.tensorType)}return Ue.denotation!=null&&(ze.denotation=String(Ue.denotation)),ze},Me.toObject=function(Ue,ze){ze||(ze={});var He={};return ze.defaults&&(He.denotation=""),Ue.tensorType!=null&&Ue.hasOwnProperty("tensorType")&&(He.tensorType=Be.onnx.TypeProto.Tensor.toObject(Ue.tensorType,ze),ze.oneofs&&(He.value="tensorType")),Ue.denotation!=null&&Ue.hasOwnProperty("denotation")&&(He.denotation=Ue.denotation),He},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me.Tensor=function(){function Ue(ze){if(ze)for(var He=Object.keys(ze),Ge=0;Ge<He.length;++Ge)ze[He[Ge]]!=null&&(this[He[Ge]]=ze[He[Ge]])}return Ue.prototype.elemType=0,Ue.prototype.shape=null,Ue.create=function(ze){return new Ue(ze)},Ue.encode=function(ze,He){return He||(He=$e.create()),ze.elemType!=null&&ze.hasOwnProperty("elemType")&&He.uint32(8).int32(ze.elemType),ze.shape!=null&&ze.hasOwnProperty("shape")&&Be.onnx.TensorShapeProto.encode(ze.shape,He.uint32(18).fork()).ldelim(),He},Ue.encodeDelimited=function(ze,He){return this.encode(ze,He).ldelim()},Ue.decode=function(ze,He){ze instanceof De||(ze=De.create(ze));for(var Ge=He===void 0?ze.len:ze.pos+He,Ke=new Be.onnx.TypeProto.Tensor;ze.pos<Ge;){var Xe=ze.uint32();switch(Xe>>>3){case 1:Ke.elemType=ze.int32();break;case 2:Ke.shape=Be.onnx.TensorShapeProto.decode(ze,ze.uint32());break;default:ze.skipType(7&Xe)}}return Ke},Ue.decodeDelimited=function(ze){return ze instanceof De||(ze=new De(ze)),this.decode(ze,ze.uint32())},Ue.verify=function(ze){if(typeof ze!="object"||ze===null)return"object expected";if(ze.elemType!=null&&ze.hasOwnProperty("elemType")&&!Ve.isInteger(ze.elemType))return"elemType: integer expected";if(ze.shape!=null&&ze.hasOwnProperty("shape")){var He=Be.onnx.TensorShapeProto.verify(ze.shape);if(He)return"shape."+He}return null},Ue.fromObject=function(ze){if(ze instanceof Be.onnx.TypeProto.Tensor)return ze;var He=new Be.onnx.TypeProto.Tensor;if(ze.elemType!=null&&(He.elemType=0|ze.elemType),ze.shape!=null){if(typeof ze.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");He.shape=Be.onnx.TensorShapeProto.fromObject(ze.shape)}return He},Ue.toObject=function(ze,He){He||(He={});var Ge={};return He.defaults&&(Ge.elemType=0,Ge.shape=null),ze.elemType!=null&&ze.hasOwnProperty("elemType")&&(Ge.elemType=ze.elemType),ze.shape!=null&&ze.hasOwnProperty("shape")&&(Ge.shape=Be.onnx.TensorShapeProto.toObject(ze.shape,He)),Ge},Ue.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Ue}(),Me}(),Re.OperatorSetIdProto=function(){function Me(Oe){if(Oe)for(var Ue=Object.keys(Oe),ze=0;ze<Ue.length;++ze)Oe[Ue[ze]]!=null&&(this[Ue[ze]]=Oe[Ue[ze]])}return Me.prototype.domain="",Me.prototype.version=Ve.Long?Ve.Long.fromBits(0,0,!1):0,Me.create=function(Oe){return new Me(Oe)},Me.encode=function(Oe,Ue){return Ue||(Ue=$e.create()),Oe.domain!=null&&Oe.hasOwnProperty("domain")&&Ue.uint32(10).string(Oe.domain),Oe.version!=null&&Oe.hasOwnProperty("version")&&Ue.uint32(16).int64(Oe.version),Ue},Me.encodeDelimited=function(Oe,Ue){return this.encode(Oe,Ue).ldelim()},Me.decode=function(Oe,Ue){Oe instanceof De||(Oe=De.create(Oe));for(var ze=Ue===void 0?Oe.len:Oe.pos+Ue,He=new Be.onnx.OperatorSetIdProto;Oe.pos<ze;){var Ge=Oe.uint32();switch(Ge>>>3){case 1:He.domain=Oe.string();break;case 2:He.version=Oe.int64();break;default:Oe.skipType(7&Ge)}}return He},Me.decodeDelimited=function(Oe){return Oe instanceof De||(Oe=new De(Oe)),this.decode(Oe,Oe.uint32())},Me.verify=function(Oe){return typeof Oe!="object"||Oe===null?"object expected":Oe.domain!=null&&Oe.hasOwnProperty("domain")&&!Ve.isString(Oe.domain)?"domain: string expected":Oe.version!=null&&Oe.hasOwnProperty("version")&&!(Ve.isInteger(Oe.version)||Oe.version&&Ve.isInteger(Oe.version.low)&&Ve.isInteger(Oe.version.high))?"version: integer|Long expected":null},Me.fromObject=function(Oe){if(Oe instanceof Be.onnx.OperatorSetIdProto)return Oe;var Ue=new Be.onnx.OperatorSetIdProto;return Oe.domain!=null&&(Ue.domain=String(Oe.domain)),Oe.version!=null&&(Ve.Long?(Ue.version=Ve.Long.fromValue(Oe.version)).unsigned=!1:typeof Oe.version=="string"?Ue.version=parseInt(Oe.version,10):typeof Oe.version=="number"?Ue.version=Oe.version:typeof Oe.version=="object"&&(Ue.version=new Ve.LongBits(Oe.version.low>>>0,Oe.version.high>>>0).toNumber())),Ue},Me.toObject=function(Oe,Ue){Ue||(Ue={});var ze={};if(Ue.defaults)if(ze.domain="",Ve.Long){var He=new Ve.Long(0,0,!1);ze.version=Ue.longs===String?He.toString():Ue.longs===Number?He.toNumber():He}else ze.version=Ue.longs===String?"0":0;return Oe.domain!=null&&Oe.hasOwnProperty("domain")&&(ze.domain=Oe.domain),Oe.version!=null&&Oe.hasOwnProperty("version")&&(typeof Oe.version=="number"?ze.version=Ue.longs===String?String(Oe.version):Oe.version:ze.version=Ue.longs===String?Ve.Long.prototype.toString.call(Oe.version):Ue.longs===Number?new Ve.LongBits(Oe.version.low>>>0,Oe.version.high>>>0).toNumber():Oe.version),ze},Me.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},Me}(),Re),n.exports=Be},2100:(n,e,t)=>{n.exports=t(9482)},9482:(n,e,t)=>{var Te=e;function Ee(){Te.util._configure(),Te.Writer._configure(Te.BufferWriter),Te.Reader._configure(Te.BufferReader)}Te.build="minimal",Te.Writer=t(1173),Te.BufferWriter=t(3155),Te.Reader=t(1408),Te.BufferReader=t(593),Te.util=t(9693),Te.rpc=t(5994),Te.roots=t(5054),Te.configure=Ee,Ee()},1408:(n,e,t)=>{n.exports=$e;var Te,Ee=t(9693),Re=Ee.LongBits,Ce=Ee.utf8;function De(He,Ge){return RangeError("index out of range: "+He.pos+" + "+(Ge||1)+" > "+He.len)}function $e(He){this.buf=He,this.pos=0,this.len=He.length}var Ve,Be=typeof Uint8Array<"u"?function(He){if(He instanceof Uint8Array||Array.isArray(He))return new $e(He);throw Error("illegal buffer")}:function(He){if(Array.isArray(He))return new $e(He);throw Error("illegal buffer")},Me=function(){return Ee.Buffer?function(He){return($e.create=function(Ge){return Ee.Buffer.isBuffer(Ge)?new Te(Ge):Be(Ge)})(He)}:Be};function Oe(){var He=new Re(0,0),Ge=0;if(!(this.len-this.pos>4)){for(;Ge<3;++Ge){if(this.pos>=this.len)throw De(this);if(He.lo=(He.lo|(127&this.buf[this.pos])<<7*Ge)>>>0,this.buf[this.pos++]<128)return He}return He.lo=(He.lo|(127&this.buf[this.pos++])<<7*Ge)>>>0,He}for(;Ge<4;++Ge)if(He.lo=(He.lo|(127&this.buf[this.pos])<<7*Ge)>>>0,this.buf[this.pos++]<128)return He;if(He.lo=(He.lo|(127&this.buf[this.pos])<<28)>>>0,He.hi=(He.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return He;if(Ge=0,this.len-this.pos>4){for(;Ge<5;++Ge)if(He.hi=(He.hi|(127&this.buf[this.pos])<<7*Ge+3)>>>0,this.buf[this.pos++]<128)return He}else for(;Ge<5;++Ge){if(this.pos>=this.len)throw De(this);if(He.hi=(He.hi|(127&this.buf[this.pos])<<7*Ge+3)>>>0,this.buf[this.pos++]<128)return He}throw Error("invalid varint encoding")}function Ue(He,Ge){return(He[Ge-4]|He[Ge-3]<<8|He[Ge-2]<<16|He[Ge-1]<<24)>>>0}function ze(){if(this.pos+8>this.len)throw De(this,8);return new Re(Ue(this.buf,this.pos+=4),Ue(this.buf,this.pos+=4))}$e.create=Me(),$e.prototype._slice=Ee.Array.prototype.subarray||Ee.Array.prototype.slice,$e.prototype.uint32=(Ve=4294967295,function(){if(Ve=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(Ve=(Ve|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(Ve=(Ve|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(Ve=(Ve|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(Ve=(Ve|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return Ve;if((this.pos+=5)>this.len)throw this.pos=this.len,De(this,10);return Ve}),$e.prototype.int32=function(){return 0|this.uint32()},$e.prototype.sint32=function(){var He=this.uint32();return He>>>1^-(1&He)|0},$e.prototype.bool=function(){return this.uint32()!==0},$e.prototype.fixed32=function(){if(this.pos+4>this.len)throw De(this,4);return Ue(this.buf,this.pos+=4)},$e.prototype.sfixed32=function(){if(this.pos+4>this.len)throw De(this,4);return 0|Ue(this.buf,this.pos+=4)},$e.prototype.float=function(){if(this.pos+4>this.len)throw De(this,4);var He=Ee.float.readFloatLE(this.buf,this.pos);return this.pos+=4,He},$e.prototype.double=function(){if(this.pos+8>this.len)throw De(this,4);var He=Ee.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,He},$e.prototype.bytes=function(){var He=this.uint32(),Ge=this.pos,Ke=this.pos+He;if(Ke>this.len)throw De(this,He);return this.pos+=He,Array.isArray(this.buf)?this.buf.slice(Ge,Ke):Ge===Ke?new this.buf.constructor(0):this._slice.call(this.buf,Ge,Ke)},$e.prototype.string=function(){var He=this.bytes();return Ce.read(He,0,He.length)},$e.prototype.skip=function(He){if(typeof He=="number"){if(this.pos+He>this.len)throw De(this,He);this.pos+=He}else do if(this.pos>=this.len)throw De(this);while(128&this.buf[this.pos++]);return this},$e.prototype.skipType=function(He){switch(He){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(He=7&this.uint32())!=4;)this.skipType(He);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+He+" at offset "+this.pos)}return this},$e._configure=function(He){Te=He,$e.create=Me(),Te._configure();var Ge=Ee.Long?"toLong":"toNumber";Ee.merge($e.prototype,{int64:function(){return Oe.call(this)[Ge](!1)},uint64:function(){return Oe.call(this)[Ge](!0)},sint64:function(){return Oe.call(this).zzDecode()[Ge](!1)},fixed64:function(){return ze.call(this)[Ge](!0)},sfixed64:function(){return ze.call(this)[Ge](!1)}})}},593:(n,e,t)=>{n.exports=Re;var Te=t(1408);(Re.prototype=Object.create(Te.prototype)).constructor=Re;var Ee=t(9693);function Re(Ce){Te.call(this,Ce)}Re._configure=function(){Ee.Buffer&&(Re.prototype._slice=Ee.Buffer.prototype.slice)},Re.prototype.string=function(){var Ce=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+Ce,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+Ce,this.len))},Re._configure()},5054:n=>{n.exports={}},5994:(n,e,t)=>{e.Service=t(7948)},7948:(n,e,t)=>{n.exports=Ee;var Te=t(9693);function Ee(Re,Ce,De){if(typeof Re!="function")throw TypeError("rpcImpl must be a function");Te.EventEmitter.call(this),this.rpcImpl=Re,this.requestDelimited=!!Ce,this.responseDelimited=!!De}(Ee.prototype=Object.create(Te.EventEmitter.prototype)).constructor=Ee,Ee.prototype.rpcCall=function Re(Ce,De,$e,Ve,Be){if(!Ve)throw TypeError("request must be specified");var Me=this;if(!Be)return Te.asPromise(Re,Me,Ce,De,$e,Ve);if(Me.rpcImpl)try{return Me.rpcImpl(Ce,De[Me.requestDelimited?"encodeDelimited":"encode"](Ve).finish(),function(Oe,Ue){if(Oe)return Me.emit("error",Oe,Ce),Be(Oe);if(Ue!==null){if(!(Ue instanceof $e))try{Ue=$e[Me.responseDelimited?"decodeDelimited":"decode"](Ue)}catch(ze){return Me.emit("error",ze,Ce),Be(ze)}return Me.emit("data",Ue,Ce),Be(null,Ue)}Me.end(!0)})}catch(Oe){return Me.emit("error",Oe,Ce),void setTimeout(function(){Be(Oe)},0)}else setTimeout(function(){Be(Error("already ended"))},0)},Ee.prototype.end=function(Re){return this.rpcImpl&&(Re||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(n,e,t)=>{n.exports=Ee;var Te=t(9693);function Ee($e,Ve){this.lo=$e>>>0,this.hi=Ve>>>0}var Re=Ee.zero=new Ee(0,0);Re.toNumber=function(){return 0},Re.zzEncode=Re.zzDecode=function(){return this},Re.length=function(){return 1};var Ce=Ee.zeroHash="\0\0\0\0\0\0\0\0";Ee.fromNumber=function($e){if($e===0)return Re;var Ve=$e<0;Ve&&($e=-$e);var Be=$e>>>0,Me=($e-Be)/4294967296>>>0;return Ve&&(Me=~Me>>>0,Be=~Be>>>0,++Be>4294967295&&(Be=0,++Me>4294967295&&(Me=0))),new Ee(Be,Me)},Ee.from=function($e){if(typeof $e=="number")return Ee.fromNumber($e);if(Te.isString($e)){if(!Te.Long)return Ee.fromNumber(parseInt($e,10));$e=Te.Long.fromString($e)}return $e.low||$e.high?new Ee($e.low>>>0,$e.high>>>0):Re},Ee.prototype.toNumber=function($e){if(!$e&&this.hi>>>31){var Ve=1+~this.lo>>>0,Be=~this.hi>>>0;return Ve||(Be=Be+1>>>0),-(Ve+4294967296*Be)}return this.lo+4294967296*this.hi},Ee.prototype.toLong=function($e){return Te.Long?new Te.Long(0|this.lo,0|this.hi,!!$e):{low:0|this.lo,high:0|this.hi,unsigned:!!$e}};var De=String.prototype.charCodeAt;Ee.fromHash=function($e){return $e===Ce?Re:new Ee((De.call($e,0)|De.call($e,1)<<8|De.call($e,2)<<16|De.call($e,3)<<24)>>>0,(De.call($e,4)|De.call($e,5)<<8|De.call($e,6)<<16|De.call($e,7)<<24)>>>0)},Ee.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Ee.prototype.zzEncode=function(){var $e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$e)>>>0,this.lo=(this.lo<<1^$e)>>>0,this},Ee.prototype.zzDecode=function(){var $e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^$e)>>>0,this.hi=(this.hi>>>1^$e)>>>0,this},Ee.prototype.length=function(){var $e=this.lo,Ve=(this.lo>>>28|this.hi<<4)>>>0,Be=this.hi>>>24;return Be===0?Ve===0?$e<16384?$e<128?1:2:$e<2097152?3:4:Ve<16384?Ve<128?5:6:Ve<2097152?7:8:Be<128?9:10}},9693:function(n,e,t){var Te=e;function Ee(Ce,De,$e){for(var Ve=Object.keys(De),Be=0;Be<Ve.length;++Be)Ce[Ve[Be]]!==void 0&&$e||(Ce[Ve[Be]]=De[Ve[Be]]);return Ce}function Re(Ce){function De($e,Ve){if(!(this instanceof De))return new De($e,Ve);Object.defineProperty(this,"message",{get:function(){return $e}}),Error.captureStackTrace?Error.captureStackTrace(this,De):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Ve&&Ee(this,Ve)}return(De.prototype=Object.create(Error.prototype)).constructor=De,Object.defineProperty(De.prototype,"name",{get:function(){return Ce}}),De.prototype.toString=function(){return this.name+": "+this.message},De}Te.asPromise=t(4537),Te.base64=t(7419),Te.EventEmitter=t(9211),Te.float=t(945),Te.inquire=t(7199),Te.utf8=t(4997),Te.pool=t(6662),Te.LongBits=t(1945),Te.isNode=!!(t.g!==void 0&&t.g&&t.g.process&&t.g.process.versions&&t.g.process.versions.node),Te.global=Te.isNode&&t.g||typeof window<"u"&&window||typeof self<"u"&&self||this,Te.emptyArray=Object.freeze?Object.freeze([]):[],Te.emptyObject=Object.freeze?Object.freeze({}):{},Te.isInteger=Number.isInteger||function(Ce){return typeof Ce=="number"&&isFinite(Ce)&&Math.floor(Ce)===Ce},Te.isString=function(Ce){return typeof Ce=="string"||Ce instanceof String},Te.isObject=function(Ce){return Ce&&typeof Ce=="object"},Te.isset=Te.isSet=function(Ce,De){var $e=Ce[De];return!($e==null||!Ce.hasOwnProperty(De))&&(typeof $e!="object"||(Array.isArray($e)?$e.length:Object.keys($e).length)>0)},Te.Buffer=function(){try{var Ce=Te.inquire("buffer").Buffer;return Ce.prototype.utf8Write?Ce:null}catch{return null}}(),Te._Buffer_from=null,Te._Buffer_allocUnsafe=null,Te.newBuffer=function(Ce){return typeof Ce=="number"?Te.Buffer?Te._Buffer_allocUnsafe(Ce):new Te.Array(Ce):Te.Buffer?Te._Buffer_from(Ce):typeof Uint8Array>"u"?Ce:new Uint8Array(Ce)},Te.Array=typeof Uint8Array<"u"?Uint8Array:Array,Te.Long=Te.global.dcodeIO&&Te.global.dcodeIO.Long||Te.global.Long||Te.inquire("long"),Te.key2Re=/^true|false|0|1$/,Te.key32Re=/^-?(?:0|[1-9][0-9]*)$/,Te.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,Te.longToHash=function(Ce){return Ce?Te.LongBits.from(Ce).toHash():Te.LongBits.zeroHash},Te.longFromHash=function(Ce,De){var $e=Te.LongBits.fromHash(Ce);return Te.Long?Te.Long.fromBits($e.lo,$e.hi,De):$e.toNumber(!!De)},Te.merge=Ee,Te.lcFirst=function(Ce){return Ce.charAt(0).toLowerCase()+Ce.substring(1)},Te.newError=Re,Te.ProtocolError=Re("ProtocolError"),Te.oneOfGetter=function(Ce){for(var De={},$e=0;$e<Ce.length;++$e)De[Ce[$e]]=1;return function(){for(var Ve=Object.keys(this),Be=Ve.length-1;Be>-1;--Be)if(De[Ve[Be]]===1&&this[Ve[Be]]!==void 0&&this[Ve[Be]]!==null)return Ve[Be]}},Te.oneOfSetter=function(Ce){return function(De){for(var $e=0;$e<Ce.length;++$e)Ce[$e]!==De&&delete this[Ce[$e]]}},Te.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},Te._configure=function(){var Ce=Te.Buffer;Ce?(Te._Buffer_from=Ce.from!==Uint8Array.from&&Ce.from||function(De,$e){return new Ce(De,$e)},Te._Buffer_allocUnsafe=Ce.allocUnsafe||function(De){return new Ce(De)}):Te._Buffer_from=Te._Buffer_allocUnsafe=null}},1173:(n,e,t)=>{n.exports=Me;var Te,Ee=t(9693),Re=Ee.LongBits,Ce=Ee.base64,De=Ee.utf8;function $e(Xe,Je,un){this.fn=Xe,this.len=Je,this.next=void 0,this.val=un}function Ve(){}function Be(Xe){this.head=Xe.head,this.tail=Xe.tail,this.len=Xe.len,this.next=Xe.states}function Me(){this.len=0,this.head=new $e(Ve,0,0),this.tail=this.head,this.states=null}var Oe=function(){return Ee.Buffer?function(){return(Me.create=function(){return new Te})()}:function(){return new Me}};function Ue(Xe,Je,un){Je[un]=255&Xe}function ze(Xe,Je){this.len=Xe,this.next=void 0,this.val=Je}function He(Xe,Je,un){for(;Xe.hi;)Je[un++]=127&Xe.lo|128,Xe.lo=(Xe.lo>>>7|Xe.hi<<25)>>>0,Xe.hi>>>=7;for(;Xe.lo>127;)Je[un++]=127&Xe.lo|128,Xe.lo=Xe.lo>>>7;Je[un++]=Xe.lo}function Ge(Xe,Je,un){Je[un]=255&Xe,Je[un+1]=Xe>>>8&255,Je[un+2]=Xe>>>16&255,Je[un+3]=Xe>>>24}Me.create=Oe(),Me.alloc=function(Xe){return new Ee.Array(Xe)},Ee.Array!==Array&&(Me.alloc=Ee.pool(Me.alloc,Ee.Array.prototype.subarray)),Me.prototype._push=function(Xe,Je,un){return this.tail=this.tail.next=new $e(Xe,Je,un),this.len+=Je,this},ze.prototype=Object.create($e.prototype),ze.prototype.fn=function(Xe,Je,un){for(;Xe>127;)Je[un++]=127&Xe|128,Xe>>>=7;Je[un]=Xe},Me.prototype.uint32=function(Xe){return this.len+=(this.tail=this.tail.next=new ze((Xe>>>=0)<128?1:Xe<16384?2:Xe<2097152?3:Xe<268435456?4:5,Xe)).len,this},Me.prototype.int32=function(Xe){return Xe<0?this._push(He,10,Re.fromNumber(Xe)):this.uint32(Xe)},Me.prototype.sint32=function(Xe){return this.uint32((Xe<<1^Xe>>31)>>>0)},Me.prototype.uint64=function(Xe){var Je=Re.from(Xe);return this._push(He,Je.length(),Je)},Me.prototype.int64=Me.prototype.uint64,Me.prototype.sint64=function(Xe){var Je=Re.from(Xe).zzEncode();return this._push(He,Je.length(),Je)},Me.prototype.bool=function(Xe){return this._push(Ue,1,Xe?1:0)},Me.prototype.fixed32=function(Xe){return this._push(Ge,4,Xe>>>0)},Me.prototype.sfixed32=Me.prototype.fixed32,Me.prototype.fixed64=function(Xe){var Je=Re.from(Xe);return this._push(Ge,4,Je.lo)._push(Ge,4,Je.hi)},Me.prototype.sfixed64=Me.prototype.fixed64,Me.prototype.float=function(Xe){return this._push(Ee.float.writeFloatLE,4,Xe)},Me.prototype.double=function(Xe){return this._push(Ee.float.writeDoubleLE,8,Xe)};var Ke=Ee.Array.prototype.set?function(Xe,Je,un){Je.set(Xe,un)}:function(Xe,Je,un){for(var fn=0;fn<Xe.length;++fn)Je[un+fn]=Xe[fn]};Me.prototype.bytes=function(Xe){var Je=Xe.length>>>0;if(!Je)return this._push(Ue,1,0);if(Ee.isString(Xe)){var un=Me.alloc(Je=Ce.length(Xe));Ce.decode(Xe,un,0),Xe=un}return this.uint32(Je)._push(Ke,Je,Xe)},Me.prototype.string=function(Xe){var Je=De.length(Xe);return Je?this.uint32(Je)._push(De.write,Je,Xe):this._push(Ue,1,0)},Me.prototype.fork=function(){return this.states=new Be(this),this.head=this.tail=new $e(Ve,0,0),this.len=0,this},Me.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new $e(Ve,0,0),this.len=0),this},Me.prototype.ldelim=function(){var Xe=this.head,Je=this.tail,un=this.len;return this.reset().uint32(un),un&&(this.tail.next=Xe.next,this.tail=Je,this.len+=un),this},Me.prototype.finish=function(){for(var Xe=this.head.next,Je=this.constructor.alloc(this.len),un=0;Xe;)Xe.fn(Xe.val,Je,un),un+=Xe.len,Xe=Xe.next;return Je},Me._configure=function(Xe){Te=Xe,Me.create=Oe(),Te._configure()}},3155:(n,e,t)=>{n.exports=Re;var Te=t(1173);(Re.prototype=Object.create(Te.prototype)).constructor=Re;var Ee=t(9693);function Re(){Te.call(this)}function Ce(De,$e,Ve){De.length<40?Ee.utf8.write(De,$e,Ve):$e.utf8Write?$e.utf8Write(De,Ve):$e.write(De,Ve)}Re._configure=function(){Re.alloc=Ee._Buffer_allocUnsafe,Re.writeBytesBuffer=Ee.Buffer&&Ee.Buffer.prototype instanceof Uint8Array&&Ee.Buffer.prototype.set.name==="set"?function(De,$e,Ve){$e.set(De,Ve)}:function(De,$e,Ve){if(De.copy)De.copy($e,Ve,0,De.length);else for(var Be=0;Be<De.length;)$e[Ve++]=De[Be++]}},Re.prototype.bytes=function(De){Ee.isString(De)&&(De=Ee._Buffer_from(De,"base64"));var $e=De.length>>>0;return this.uint32($e),$e&&this._push(Re.writeBytesBuffer,$e,De),this},Re.prototype.string=function(De){var $e=Ee.Buffer.byteLength(De);return this.uint32($e),$e&&this._push(Ce,$e,De),this},Re._configure()},7714:(n,e,t)=>{e.R=void 0;const Te=t(6919),Ee=t(7448);e.R=new class{async init(){}async createSessionHandler(Re,Ce){const De=new Te.Session(Ce);return await De.loadModel(Re),new Ee.OnnxjsSessionHandler(De)}}},4200:(n,e,t)=>{e.c8=e.rX=void 0;const Te=t(1670),Ee=t(5381),Re=t(2157),Ce=t(2306);e.rX=()=>{if((typeof Te.env.wasm.initTimeout!="number"||Te.env.wasm.initTimeout<0)&&(Te.env.wasm.initTimeout=0),typeof Te.env.wasm.simd!="boolean"&&(Te.env.wasm.simd=!0),typeof Te.env.wasm.proxy!="boolean"&&(Te.env.wasm.proxy=!1),typeof Te.env.wasm.numThreads!="number"||!Number.isInteger(Te.env.wasm.numThreads)||Te.env.wasm.numThreads<=0){const De=typeof navigator>"u"?(0,Ee.cpus)().length:navigator.hardwareConcurrency;Te.env.wasm.numThreads=Math.min(4,Math.ceil((De||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,Re.initWasm)()}async createSessionHandler(De,$e){const Ve=new Ce.OnnxruntimeWebAssemblySessionHandler;return await Ve.loadModel(De,$e),Promise.resolve(Ve)}}},6018:function(n,e,t){var Te=this&&this.__createBinding||(Object.create?function(Ce,De,$e,Ve){Ve===void 0&&(Ve=$e);var Be=Object.getOwnPropertyDescriptor(De,$e);Be&&!("get"in Be?!De.__esModule:Be.writable||Be.configurable)||(Be={enumerable:!0,get:function(){return De[$e]}}),Object.defineProperty(Ce,Ve,Be)}:function(Ce,De,$e,Ve){Ve===void 0&&(Ve=$e),Ce[Ve]=De[$e]}),Ee=this&&this.__exportStar||function(Ce,De){for(var $e in Ce)$e==="default"||Object.prototype.hasOwnProperty.call(De,$e)||Te(De,Ce,$e)};Object.defineProperty(e,"__esModule",{value:!0}),Ee(t(1670),e);const Re=t(1670);{const Ce=t(7714).R;(0,Re.registerBackend)("webgl",Ce,-10)}{const Ce=t(4200).c8;(0,Re.registerBackend)("cpu",Ce,10),(0,Re.registerBackend)("wasm",Ce,10),(0,Re.registerBackend)("xnnpack",Ce,9)}},246:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class t{constructor(Ee){Object.assign(this,Ee)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(Ee=>`${this[Ee]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=Te=>new t(Te)},7778:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const Te=t(1446),Ee=t(9395),Re=t(9162),Ce=t(2517);var De=Ee.onnxruntime.experimental.fbs;class $e{constructor(Be){if(this._attributes=new Map,Be!=null){for(const Me of Be)Me instanceof Te.onnx.AttributeProto?this._attributes.set(Me.name,[$e.getValue(Me),$e.getType(Me)]):Me instanceof De.Attribute&&this._attributes.set(Me.name(),[$e.getValue(Me),$e.getType(Me)]);if(this._attributes.size<Be.length)throw new Error("duplicated attribute names")}}set(Be,Me,Oe){this._attributes.set(Be,[Oe,Me])}delete(Be){this._attributes.delete(Be)}getFloat(Be,Me){return this.get(Be,"float",Me)}getInt(Be,Me){return this.get(Be,"int",Me)}getString(Be,Me){return this.get(Be,"string",Me)}getTensor(Be,Me){return this.get(Be,"tensor",Me)}getFloats(Be,Me){return this.get(Be,"floats",Me)}getInts(Be,Me){return this.get(Be,"ints",Me)}getStrings(Be,Me){return this.get(Be,"strings",Me)}getTensors(Be,Me){return this.get(Be,"tensors",Me)}get(Be,Me,Oe){const Ue=this._attributes.get(Be);if(Ue===void 0){if(Oe!==void 0)return Oe;throw new Error(`required attribute not found: ${Be}`)}if(Ue[1]!==Me)throw new Error(`type mismatch: expected ${Me} but got ${Ue[1]}`);return Ue[0]}static getType(Be){const Me=Be instanceof Te.onnx.AttributeProto?Be.type:Be.type();switch(Me){case Te.onnx.AttributeProto.AttributeType.FLOAT:return"float";case Te.onnx.AttributeProto.AttributeType.INT:return"int";case Te.onnx.AttributeProto.AttributeType.STRING:return"string";case Te.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case Te.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case Te.onnx.AttributeProto.AttributeType.INTS:return"ints";case Te.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case Te.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${Te.onnx.AttributeProto.AttributeType[Me]}`)}}static getValue(Be){const Me=Be instanceof Te.onnx.AttributeProto?Be.type:Be.type();if(Me===Te.onnx.AttributeProto.AttributeType.GRAPH||Me===Te.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const Oe=this.getValueNoCheck(Be);if(Me===Te.onnx.AttributeProto.AttributeType.INT&&Ce.LongUtil.isLong(Oe))return Ce.LongUtil.longToNumber(Oe);if(Me===Te.onnx.AttributeProto.AttributeType.INTS){const Ue=Oe,ze=new Array(Ue.length);for(let He=0;He<Ue.length;He++){const Ge=Ue[He];ze[He]=Ce.LongUtil.longToNumber(Ge)}return ze}if(Me===Te.onnx.AttributeProto.AttributeType.TENSOR)return Be instanceof Te.onnx.AttributeProto?Re.Tensor.fromProto(Oe):Re.Tensor.fromOrtTensor(Oe);if(Me===Te.onnx.AttributeProto.AttributeType.TENSORS){if(Be instanceof Te.onnx.AttributeProto)return Oe.map(Ue=>Re.Tensor.fromProto(Ue));if(Be instanceof De.Attribute)return Oe.map(Ue=>Re.Tensor.fromOrtTensor(Ue))}if(Me===Te.onnx.AttributeProto.AttributeType.STRING&&Be instanceof Te.onnx.AttributeProto){const Ue=Oe;return(0,Ce.decodeUtf8String)(Ue)}return Me===Te.onnx.AttributeProto.AttributeType.STRINGS&&Be instanceof Te.onnx.AttributeProto?Oe.map(Ce.decodeUtf8String):Oe}static getValueNoCheck(Be){return Be instanceof Te.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(Be):this.getValueNoCheckFromOrtFormat(Be)}static getValueNoCheckFromOnnxFormat(Be){switch(Be.type){case Te.onnx.AttributeProto.AttributeType.FLOAT:return Be.f;case Te.onnx.AttributeProto.AttributeType.INT:return Be.i;case Te.onnx.AttributeProto.AttributeType.STRING:return Be.s;case Te.onnx.AttributeProto.AttributeType.TENSOR:return Be.t;case Te.onnx.AttributeProto.AttributeType.GRAPH:return Be.g;case Te.onnx.AttributeProto.AttributeType.FLOATS:return Be.floats;case Te.onnx.AttributeProto.AttributeType.INTS:return Be.ints;case Te.onnx.AttributeProto.AttributeType.STRINGS:return Be.strings;case Te.onnx.AttributeProto.AttributeType.TENSORS:return Be.tensors;case Te.onnx.AttributeProto.AttributeType.GRAPHS:return Be.graphs;default:throw new Error(`unsupported attribute type: ${Te.onnx.AttributeProto.AttributeType[Be.type]}`)}}static getValueNoCheckFromOrtFormat(Be){switch(Be.type()){case De.AttributeType.FLOAT:return Be.f();case De.AttributeType.INT:return Be.i();case De.AttributeType.STRING:return Be.s();case De.AttributeType.TENSOR:return Be.t();case De.AttributeType.GRAPH:return Be.g();case De.AttributeType.FLOATS:return Be.floatsArray();case De.AttributeType.INTS:{const Me=[];for(let Oe=0;Oe<Be.intsLength();Oe++)Me.push(Be.ints(Oe));return Me}case De.AttributeType.STRINGS:{const Me=[];for(let Oe=0;Oe<Be.stringsLength();Oe++)Me.push(Be.strings(Oe));return Me}case De.AttributeType.TENSORS:{const Me=[];for(let Oe=0;Oe<Be.tensorsLength();Oe++)Me.push(Be.tensors(Oe));return Me}default:throw new Error(`unsupported attribute type: ${De.AttributeType[Be.type()]}`)}}}e.Attribute=$e},7091:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const Te=t(5038),Ee=new Map;async function Re(Ce){const De=e.backend;if(De[Ce]!==void 0&&function($e){const Ve=$e;return"initialize"in Ve&&typeof Ve.initialize=="function"&&"createSessionHandler"in Ve&&typeof Ve.createSessionHandler=="function"&&"dispose"in Ve&&typeof Ve.dispose=="function"}(De[Ce])){const $e=De[Ce];let Ve=$e.initialize();if(typeof Ve=="object"&&"then"in Ve&&(Ve=await Ve),Ve)return Ee.set(Ce,$e),$e}}e.backend={webgl:new Te.WebGLBackend},e.resolveBackend=async function Ce(De){if(!De)return Ce(["webgl"]);{const $e=typeof De=="string"?[De]:De;for(const Ve of $e){const Be=Ee.get(Ve);if(Be)return Be;const Me=await Re(Ve);if(Me)return Me}}throw new Error("no available backend to use")}},5038:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const Te=t(1670),Ee=t(6231),Re=t(6416),Ce=t(7305);e.WebGLBackend=class{get contextId(){return Te.env.webgl.contextId}set contextId(De){Te.env.webgl.contextId=De}get matmulMaxBatchSize(){return Te.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(De){Te.env.webgl.matmulMaxBatchSize=De}get textureCacheMode(){return Te.env.webgl.textureCacheMode}set textureCacheMode(De){Te.env.webgl.textureCacheMode=De}get pack(){return Te.env.webgl.pack}set pack(De){Te.env.webgl.pack=De}get async(){return Te.env.webgl.async}set async(De){Te.env.webgl.async=De}initialize(){try{return this.glContext=(0,Ce.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),Ee.Logger.setWithEnv(Te.env),Ee.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(De){return Ee.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${De}`),!1}}createSessionHandler(De){return new Re.WebGLSessionHandler(this,De)}dispose(){this.glContext.dispose()}}},5107:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const Te=t(2517),Ee=t(8520),Re=t(5060),Ce=t(7859),De=t(9390);class $e extends Ee.GlslLib{constructor(Be){super(Be)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new Ee.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new Ee.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const Be=this.context.outputTextureLayout;return Be.isPacked?this.getPackedOutputSamplingSnippet(Be):this.getUnpackedOutputSamplingSnippet(Be)}getPackedOutputSamplingSnippet(Be){const Me=Be.unpackedShape,Oe=[Be.width,Be.height],Ue={},ze="getOutputCoords";switch(Me.length){case 0:Ue[ze]=this.getOutputScalarCoords();break;case 1:Ue[ze]=this.getOutputPacked1DCoords(Me,Oe);break;case 2:Ue[ze]=this.getOutputPacked2DCoords(Me,Oe);break;case 3:Ue[ze]=this.getOutputPacked3DCoords(Me,Oe);break;default:Ue[ze]=this.getOutputPackedNDCoords(Me,Oe)}const He=`
      void setOutput(vec4 val) {
        ${(0,Re.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return Ue.floatTextureSetRGBA=new Ee.GlslLibRoutine(He),Ue}getUnpackedOutputSamplingSnippet(Be){const Me=Be.unpackedShape,Oe=[Be.width,Be.height],Ue={},ze="getOutputCoords";switch(Me.length){case 0:Ue[ze]=this.getOutputScalarCoords();break;case 1:Ue[ze]=this.getOutputUnpacked1DCoords(Me,Oe);break;case 2:Ue[ze]=this.getOutputUnpacked2DCoords(Me,Oe);break;case 3:Ue[ze]=this.getOutputUnpacked3DCoords(Me,Oe);break;case 4:Ue[ze]=this.getOutputUnpacked4DCoords(Me,Oe);break;case 5:Ue[ze]=this.getOutputUnpacked5DCoords(Me,Oe);break;case 6:Ue[ze]=this.getOutputUnpacked6DCoords(Me,Oe);break;default:throw new Error(`Unsupported output dimensionality: ${Me.length}`)}const He=`
        void setOutput(float val) {
          ${(0,Re.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return Ue.floatTextureSetR=new Ee.GlslLibRoutine(He),Ue}getOutputScalarCoords(){return new Ee.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(Be,Me){const Oe=Me;let Ue="";return Oe[0]===1?(Ue=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${Oe[1]}.0);
          }
        `,new Ee.GlslLibRoutine(Ue)):Oe[1]===1?(Ue=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${Oe[0]}.0);
          }
        `,new Ee.GlslLibRoutine(Ue)):(Ue=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${Oe[0]}, ${Oe[1]}));
          return 2 * (resTexRC.y * ${Oe[0]} + resTexRC.x);
        }
      `,new Ee.GlslLibRoutine(Ue))}getOutputPacked2DCoords(Be,Me){let Oe="";if(Te.ArrayUtil.arraysEqual(Be,Me))return Oe=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${Me[0]}, ${Me[1]}));
        }
      `,new Ee.GlslLibRoutine(Oe);const Ue=Me,ze=Math.ceil(Be[1]/2);return Oe=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Ue[0]}, ${Ue[1]}));

          int index = resTexRC.y * ${Ue[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${ze}) * 2;
          int c = 2 * (index / ${ze});

          return ivec2(r, c);
        }
      `,new Ee.GlslLibRoutine(Oe)}getOutputPacked3DCoords(Be,Me){const Oe=[Me[0],Me[1]],Ue=Math.ceil(Be[2]/2),ze=Ue*Math.ceil(Be[1]/2),He=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Oe[0]}, ${Oe[1]}));
          int index = resTexRC.y * ${Oe[0]} + resTexRC.x;

          int b = index / ${ze};
          index -= b * ${ze};

          // reverse r and c order for packed texture
          int r = imod(index, ${Ue}) * 2;
          int c = 2 * (index / ${Ue});

          return ivec3(b, r, c);
        }
      `;return new Ee.GlslLibRoutine(He)}getOutputPackedNDCoords(Be,Me){const Oe=[Me[0],Me[1]],Ue=Math.ceil(Be[Be.length-1]/2),ze=Ue*Math.ceil(Be[Be.length-2]/2);let He=ze,Ge="",Ke="b, r, c";for(let Je=2;Je<Be.length-1;Je++)He*=Be[Be.length-Je-1],Ge=`
      int b${Je} = index / ${He};
      index -= b${Je} * ${He};
    `+Ge,Ke=`b${Je}, `+Ke;const Xe=`
      ivec${Be.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${Oe[0]}, ${Oe[1]}));
        int index = resTexRC.y * ${Oe[0]} + resTexRC.x;

        ${Ge}

        int b = index / ${ze};
        index -= b * ${ze};

        // reverse r and c order for packed texture
        int r = imod(index, ${Ue}) * 2;
        int c = 2 * (index / ${Ue});

        return ivec${Be.length}(${Ke});
      }
    `;return new Ee.GlslLibRoutine(Xe)}getOutputUnpacked1DCoords(Be,Me){const Oe=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Me[0]}, ${Me[1]}));
          return resTexRC.y * ${Me[0]} + resTexRC.x;
        }
      `;return new Ee.GlslLibRoutine(Oe)}getOutputUnpacked2DCoords(Be,Me){const Oe=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Me[0]}, ${Me[1]}));
          int index = resTexRC.y * ${Me[0]} + resTexRC.x;
          int r = index / ${Be[1]};
          int c = index - r * ${Be[1]};
          return ivec2(r, c);
        }
      `;return new Ee.GlslLibRoutine(Oe)}getOutputUnpacked3DCoords(Be,Me){let Oe="";const Ue=Be.length;let ze=null;Ue<2&&(ze=[]),ze=new Array(Ue-1),ze[Ue-2]=Be[Ue-1];for(let Ke=Ue-3;Ke>=0;--Ke)ze[Ke]=ze[Ke+1]*Be[Ke+1];const He=["r","c","d"],Ge=ze.map((Ke,Xe)=>`int ${He[Xe]} = index / ${Ke}; ${Xe===ze.length-1?`int ${He[Xe+1]} = index - ${He[Xe]} * ${Ke}`:`index -= ${He[Xe]} * ${Ke}`};`).join("");return Oe=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Me[0]}, ${Me[1]}));
          int index = resTexRC.y * ${Me[0]} + resTexRC.x;
          ${Ge}
          return ivec3(r, c, d);
        }
      `,new Ee.GlslLibRoutine(Oe)}getOutputUnpacked4DCoords(Be,Me){let Oe="";const Ue=Be.length;let ze=null;Ue<2&&(ze=[]),ze=new Array(Ue-1),ze[Ue-2]=Be[Ue-1];for(let Ke=Ue-3;Ke>=0;--Ke)ze[Ke]=ze[Ke+1]*Be[Ke+1];const He=["r","c","d","d2"],Ge=ze.map((Ke,Xe)=>`int ${He[Xe]} = index / ${Ke}; ${Xe===ze.length-1?`int ${He[Xe+1]} = index - ${He[Xe]} * ${Ke}`:`index -= ${He[Xe]} * ${Ke}`};`).join("");return Oe=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Me[0]}, ${Me[1]}));
          int index = resTexRC.y * ${Me[0]} + resTexRC.x;
          ${Ge}
          return ivec4(r, c, d, d2);
        }
      `,new Ee.GlslLibRoutine(Oe)}getOutputUnpacked5DCoords(Be,Me){let Oe="";const Ue=Be.length;let ze=null;Ue<2&&(ze=[]),ze=new Array(Ue-1),ze[Ue-2]=Be[Ue-1];for(let Ke=Ue-3;Ke>=0;--Ke)ze[Ke]=ze[Ke+1]*Be[Ke+1];const He=["r","c","d","d2","d3"],Ge=ze.map((Ke,Xe)=>`int ${He[Xe]} = index / ${Ke}; ${Xe===ze.length-1?`int ${He[Xe+1]} = index - ${He[Xe]} * ${Ke}`:`index -= ${He[Xe]} * ${Ke}`};`).join("");return Oe=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Me[0]}, ${Me[1]}));
          int index = resTexRC.y * ${Me[0]} + resTexRC.x;
          ${Ge}
          return ivec5(r, c, d, d2, d3);
        }
      `,new Ee.GlslLibRoutine(Oe)}getOutputUnpacked6DCoords(Be,Me){let Oe="";const Ue=Be.length;let ze=null;Ue<2&&(ze=[]),ze=new Array(Ue-1),ze[Ue-2]=Be[Ue-1];for(let Ke=Ue-3;Ke>=0;--Ke)ze[Ke]=ze[Ke+1]*Be[Ke+1];const He=["r","c","d","d2","d3","d4"],Ge=ze.map((Ke,Xe)=>`int ${He[Xe]} = index / ${Ke}; ${Xe===ze.length-1?`int ${He[Xe+1]} = index - ${He[Xe]} * ${Ke}`:`index -= ${He[Xe]} * ${Ke}`};`).join("");return Oe=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${Me[0]}, ${Me[1]}));
         int index = resTexRC.y * ${Me[0]} + resTexRC.x;
         ${Ge}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new Ee.GlslLibRoutine(Oe)}getCommonUtilFuncs(){const Be={};let Me="uvFromFlat";Be[Me]=new Ee.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),Me="packedUVfrom1D",Be[Me]=new Ee.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Me="packedUVfrom2D",Be[Me]=new Ee.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Me="packedUVfrom3D",Be[Me]=new Ee.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Me="sampleTexture";const Oe=(0,Re.getGlsl)(this.context.glContext.version);return Be[Me]=new Ee.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${Oe.texture2D}(textureSampler, uv).r;
        }`),Be}getInputsSamplingSnippets(){const Be={},Me=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((Oe,Ue)=>{const ze=this.context.inputTextureLayouts[Ue],He=(0,De.generateShaderFuncNameFromInputSamplerName)(Oe);ze.isPacked?Be[He]=this.getPackedSamplerFromInput(He,Oe,ze):Be[He]=this.getUnpackedSamplerFromInput(He,Oe,ze);const Ge=(0,De.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(Oe);ze.unpackedShape.length<=Me.unpackedShape.length&&(ze.isPacked?Be[Ge]=this.getPackedSamplerAtOutputCoords(Ge,ze,Me,Oe):Be[Ge]=this.getUnpackedSamplerAtOutputCoords(Ge,ze,Me,Oe))}),Be}getPackedSamplerAtOutputCoords(Be,Me,Oe,Ue){const ze=Me.unpackedShape,He=Oe.unpackedShape,Ge=Ue,Ke=(0,De.generateShaderFuncNameFromInputSamplerName)(Ge),Xe=ze.length,Je=He.length,un=Te.BroadcastUtil.getBroadcastDims(ze,He),fn=(0,De.getCoordsDataType)(Je),yn=Je-Xe;let gn;const mn=(0,De.getGlChannels)();gn=Xe===0?"":Je<2&&un.length>=1?"coords = 0;":un.map(In=>`coords.${mn[In+yn]} = 0;`).join(`
`);let dn="";dn=Je<2&&Xe>0?"coords":ze.map((In,Nn)=>`coords.${mn[Nn+yn]}`).join(", ");let vn="return outputValue;";const bn=Te.ShapeUtil.size(ze)===1,Tn=Te.ShapeUtil.size(He)===1;if(Xe!==1||bn||Tn){if(bn&&!Tn)vn=Je===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(un.length){const In=Xe-2,Nn=Xe-1;un.indexOf(In)>-1&&un.indexOf(Nn)>-1?vn="return vec4(outputValue.x);":un.indexOf(In)>-1?vn="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":un.indexOf(Nn)>-1&&(vn="return vec4(outputValue.xx, outputValue.zz);")}}else vn=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const En=`
      vec4 ${Be}() {
        ${fn} coords = getOutputCoords();
        
        int lastDim = coords.${mn[Je-1]};
        coords.${mn[Je-1]} = coords.${mn[Je-2]};
        coords.${mn[Je-2]} = lastDim;
      
        ${gn}
        vec4 outputValue = ${Ke}(${dn});
        ${vn}
      }
    `;return new Ee.GlslLibRoutine(En,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(Be,Me,Oe,Ue){const ze=[Oe.width,Oe.height],He=[Me.width,Me.height],Ge=Me.unpackedShape.length,Ke=Oe.unpackedShape.length,Xe=Me.unpackedShape,Je=Oe.unpackedShape,un=(0,De.generateShaderFuncNameFromInputSamplerName)(Ue);if(Ge===Ke&&Te.ArrayUtil.arraysEqual(He,ze)){const Tn=`
          float ${Be}() {
            return sampleTexture(${Ue}, TexCoords);
          }
        `;return new Ee.GlslLibRoutine(Tn,["coordinates.sampleTexture"])}const fn=(0,De.getCoordsDataType)(Ke),yn=Te.BroadcastUtil.getBroadcastDims(Xe,Je),gn=Ke-Ge;let mn;const dn=(0,De.getGlChannels)();mn=Ge===0?"":Ke<2&&yn.length>=1?"coords = 0;":yn.map(Tn=>`coords.${dn[Tn+gn]} = 0;`).join(`
`);let vn="";vn=Ke<2&&Ge>0?"coords":Me.unpackedShape.map((Tn,En)=>`coords.${dn[En+gn]}`).join(", ");const bn=`
        float ${Be}() {
          ${fn} coords = getOutputCoords();
          ${mn}
          return ${un}(${vn});
        }
      `;return new Ee.GlslLibRoutine(bn,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(Be,Me,Oe){switch(Oe.unpackedShape.length){case 0:return this.getPackedSamplerScalar(Be,Me);case 1:return this.getPackedSampler1D(Be,Me,Oe);case 2:return this.getPackedSampler2D(Be,Me,Oe);case 3:return this.getPackedSampler3D(Be,Me,Oe);default:return this.getPackedSamplerND(Be,Me,Oe)}}getUnpackedSamplerFromInput(Be,Me,Oe){const Ue=Oe.unpackedShape;switch(Ue.length){case 0:return this.getUnpackedSamplerScalar(Be,Me,Oe);case 1:return this.getUnpackedSampler1D(Be,Me,Oe);case 2:return this.getUnpackedSampler2D(Be,Me,Oe);case 3:return this.getUnpackedSampler3D(Be,Me,Oe);case 4:return this.getUnpackedSampler4D(Be,Me,Oe);case 5:return this.getUnpackedSampler5D(Be,Me,Oe);case 6:return this.getUnpackedSampler6D(Be,Me,Oe);default:throw new Error(`Unsupported dimension ${Ue.length}-D`)}}getPackedSamplerScalar(Be,Me){const Oe=`
          vec4 ${Be}() {
            return ${(0,Re.getGlsl)(this.context.glContext.version).texture2D}(${Me}, halfCR);
          }
        `;return new Ee.GlslLibRoutine(Oe)}getPackedSampler1D(Be,Me,Oe){const Ue=[Oe.width,Oe.height],ze=[Ue[1],Ue[0]],He=(0,Re.getGlsl)(this.context.glContext.version),Ge=`vec4 ${Be}(int index) {
      vec2 uv = packedUVfrom1D(
      ${ze[0]}, ${ze[1]}, index);
      return ${He.texture2D}(${Me}, uv);
    }`;return new Ee.GlslLibRoutine(Ge,["coordinates.packedUVfrom1D"])}getPackedSampler2D(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=[Oe.width,Oe.height],He=(0,Re.getGlsl)(this.context.glContext.version),Ge=ze[0],Ke=ze[1];if(ze!=null&&Te.ArrayUtil.arraysEqual(Ue,ze)){const fn=`vec4 ${Be}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${Ke}.0, ${Ge}.0);
        return ${He.texture2D}(${Me}, uv);
      }`;return new Ee.GlslLibRoutine(fn)}const Xe=ze,Je=Math.ceil(Ue[1]/2),un=`vec4 ${Be}(int row, int col) {
      vec2 uv = packedUVfrom2D(${Xe[1]}, ${Xe[0]}, ${Je}, row, col);
      return ${He.texture2D}(${Me}, uv);
    }`;return new Ee.GlslLibRoutine(un,["coordinates.packedUVfrom2D"])}getPackedSampler3D(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=[Oe.width,Oe.height],He=[ze[0],ze[1]],Ge=(0,Re.getGlsl)(this.context.glContext.version);if(Ue[0]===1){const fn=Ue.slice(1),yn=[1,2],gn=(0,De.squeezeInputShape)(Ue,fn),mn=["b","row","col"],dn=JSON.parse(JSON.stringify(Oe));dn.unpackedShape=gn;const vn=this.getPackedSamplerFromInput(Be,Me,dn),bn=`${vn.routineBody}
      vec4 ${Be}(int b, int row, int col) {
        return ${Be}(${(0,De.getSqueezedParams)(mn,yn)});
      } `;return new Ee.GlslLibRoutine(bn,vn.dependencies)}const Ke=He[0],Xe=He[1],Je=Math.ceil(Ue[2]/2),un=`vec4 ${Be}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${Xe}, ${Ke}, ${Je*Math.ceil(Ue[1]/2)}, ${Je}, b, row, col);
      return ${Ge.texture2D}(${Me}, uv);}`;return new Ee.GlslLibRoutine(un,["coordinates.packedUVfrom3D"])}getPackedSamplerND(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=Ue.length,He=[Oe.width,Oe.height],Ge=(0,Re.getGlsl)(this.context.glContext.version),Ke=[He[0],He[1]],Xe=Ke[1],Je=Ke[0],un=Math.ceil(Ue[ze-1]/2);let fn=un*Math.ceil(Ue[ze-2]/2),yn="int b, int row, int col",gn=`b * ${fn} + (row / 2) * ${un} + (col / 2)`;for(let dn=2;dn<ze-1;dn++)yn=`int b${dn}, `+yn,fn*=Ue[ze-dn-1],gn=`b${dn} * ${fn} + `+gn;const mn=`vec4 ${Be}(${yn}) {
      int index = ${gn};
      int texR = index / ${Je};
      int texC = index - texR * ${Je};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${Je}, ${Xe});
      return ${Ge.texture2D}(${Me}, uv);
    }`;return new Ee.GlslLibRoutine(mn)}getUnpackedSamplerScalar(Be,Me,Oe){const[Ue,ze]=[Oe.width,Oe.height];if(Ue===1&&ze===1){const Ge=`
          float ${Be}() {
            return sampleTexture(${Me}, halfCR);
          }
        `;return new Ee.GlslLibRoutine(Ge,["coordinates.sampleTexture"])}const He=`
        float ${Be}() {
          int offset_${Me} = coordsToOffset(TexCoords, ${Ue}, ${ze});
          vec2 uv = uvFromFlat(${Ue}, ${ze}, offset_${Me});
          return sampleTexture(${Me}, uv);
        }
      `;return new Ee.GlslLibRoutine(He,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(Be,Me,Oe){const Ue=Oe.width,ze=Oe.height;if(ze===1&&Ue===1){const Ge=`
        float ${Be}(int index) {
          return sampleTexture(${Me}, halfCR);
        }
      `;return new Ee.GlslLibRoutine(Ge,["coordinates.sampleTexture"])}if(ze===1){const Ge=`
          float ${Be}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${Ue}.0, 0.5);
            return sampleTexture(${Me}, uv);
          }
        `;return new Ee.GlslLibRoutine(Ge,["coordinates.sampleTexture"])}if(Ue===1){const Ge=`
          float ${Be}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${ze}.0);
            return sampleTexture(${Me}, uv);
          }
        `;return new Ee.GlslLibRoutine(Ge,["coordinates.sampleTexture"])}const He=`
        float ${Be}(int index) {
          vec2 uv = uvFromFlat(${Ue}, ${ze}, index);
          return sampleTexture(${Me}, uv);
        }
      `;return new Ee.GlslLibRoutine(He,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=[Oe.height,Oe.width];if(ze!=null&&Te.ArrayUtil.arraysEqual(Ue,ze)){const fn=`
          float ${Be}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${ze[1]}.0, ${ze[0]}.0);
            return sampleTexture(${Me}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.sampleTexture"])}const{newShape:He,keptDims:Ge}=(0,Ce.squeezeShape)(Ue),Ke=He;if(Ke.length<Ue.length){const fn=(0,De.squeezeInputShape)(Ue,Ke),yn=JSON.parse(JSON.stringify(Oe));yn.unpackedShape=fn;const gn=["col","row"],mn=`
          ${this.getUnpackedSamplerFromInput(Be,Me,yn).routineBody}
          float ${Be}(int row, int col) {
            return ${Be}(${(0,De.getSqueezedParams)(gn,Ge)});
          }
        `;return new Ee.GlslLibRoutine(mn,["coordinates.sampleTexture"])}const Xe=ze[1],Je=ze[0];if(Je===1){const fn=`
          float ${Be}(int row, int col) {
            int offset_${Me} = coordsToOffset(TexCoords, ${Xe}, ${Je});
            float index = dot(vec3(row, col, offset_${Me}), vec3(${Ue[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${Xe}.0);
            return sampleTexture(${Me}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(Xe===1){const fn=`
          float ${Be}(int row, int col) {
            int offset_${Me} = coordsToOffset(TexCoords, ${Xe}, ${Je});
            float index = dot(vec3(row, col, offset_${Me}), vec3(${Ue[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${Je}.0, 0.5);
            return sampleTexture(${Me}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const un=`
        float ${Be}(int row, int col) {
          int index = col * ${Ue[1]} + row;
          vec2 uv = uvFromFlat(${Xe}, ${Je}, index);
          return sampleTexture(${Me}, uv);
        }
      `;return new Ee.GlslLibRoutine(un,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=Ue[1]*Ue[2],He=Ue[2],{newShape:Ge,keptDims:Ke}=(0,Ce.squeezeShape)(Ue),Xe=Ge;if(Xe.length<Ue.length){const un=(0,De.squeezeInputShape)(Ue,Xe),fn=["batch","col","row"],yn=JSON.parse(JSON.stringify(Oe));yn.unpackedShape=un;const gn=this.getUnpackedSamplerFromInput(Be,Me,yn),mn=Ke.reverse(),dn=`
          ${gn.routineBody}
          float ${Be}(int batch, int row, int col) {
            return ${Be}(${(0,De.getSqueezedParams)(fn,mn)});
          }
        `;return new Ee.GlslLibRoutine(dn,gn.dependencies)}const Je=`
          float ${Be}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${ze} + col * ${He} + row;
            vec2 uv = uvFromFlat(${Oe.width}, ${Oe.height}, index);
            return sampleTexture(${Me}, uv);
          }
      `;return new Ee.GlslLibRoutine(Je,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=Ue[3],He=Ue[2]*ze,Ge=`
        float ${Be}(int row, int col, int depth, int depth2) {
          int index = row * ${Ue[1]*He} + col * ${He} +
              depth2 * ${ze} + depth;
          vec2 uv = uvFromFlat(${Oe.width}, ${Oe.height}, index);
          return sampleTexture(${Me}, uv);
        }
      `;return new Ee.GlslLibRoutine(Ge,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=Ue[4],He=Ue[3]*ze,Ge=Ue[2]*He,Ke=Ue[1]*Ge,{newShape:Xe,keptDims:Je}=(0,Ce.squeezeShape)(Ue);if(Xe.length<Ue.length){const fn=(0,De.squeezeInputShape)(Ue,Xe),yn=["row","col","depth","depth2","depth3"],gn=JSON.parse(JSON.stringify(Oe));gn.unpackedShape=fn;const mn=`
          ${this.getUnpackedSamplerFromInput(Be,Me,gn).routineBody}
          float ${Be}(int row, int col, int depth, int depth2, int depth3) {
            return ${Be}(${(0,De.getSqueezedParams)(yn,Je)});
          }
        `;return new Ee.GlslLibRoutine(mn,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const un=`
        float ${Be}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${Ke} + col * ${Ge} + depth * ${He} +
          depth3 * ${ze} + depth2;
          vec2 uv = uvFromFlat(${Oe.width}, ${Oe.height}, index);
          return sampleTexture(${Me}, uv);
        }
      `;return new Ee.GlslLibRoutine(un,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(Be,Me,Oe){const Ue=Oe.unpackedShape,ze=Ue[5],He=Ue[4]*ze,Ge=Ue[3]*He,Ke=Ue[2]*Ge,Xe=Ue[1]*Ke,{newShape:Je,keptDims:un}=(0,Ce.squeezeShape)(Ue);if(Je.length<Ue.length){const yn=(0,De.squeezeInputShape)(Ue,Je),gn=["row","col","depth","depth2","depth3","depth4"],mn=JSON.parse(JSON.stringify(Oe));mn.unpackedShape=yn;const dn=`
            ${this.getUnpackedSamplerFromInput(Be,Me,mn).routineBody}
            float ${Be}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${Be}(${(0,De.getSqueezedParams)(gn,un)});
            }
          `;return new Ee.GlslLibRoutine(dn,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const fn=`
          float ${Be}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${Xe} + col * ${Ke} + depth * ${Ge} +
            depth2 * ${He} + depth3 * ${ze} + depth4;
            vec2 uv = uvFromFlat(${Oe.width}, ${Oe.height}, index);
            return sampleTexture(${Me}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const Be=this.context.outputTextureLayout,Me=Be.shape.length,Oe=Be.strides,Ue=Be.width,ze=Be.height,He=[];for(let Ke=0;Ke<Me-1;++Ke)He.push(`
        c[${Ke}] = offset / ${Oe[Ke]};`),He.push(`
        offset -= c[${Ke}] * ${Oe[Ke]};`);He.push(`
        c[${Me-1}] = offset;`);const Ge=`
      void toVec(vec2 texCoords, out int c[${Me}]) {
        int offset = coordsToOffset(texCoords, ${Ue}, ${ze});
        ${He.join("")}
      }
      void toVec(int offset, out int c[${Me}]) {
        ${He.join("")}
      }
    `;return{toVec:new Ee.GlslLibRoutine(Ge,["coordinates.coordsToOffset"])}}valueFrom(){const Be={};return this.context.programInfo.inputNames.forEach((Me,Oe)=>{const Ue=this.context.inputTextureLayouts[Oe],ze=(Ue.unpackedShape.length>0?Ue.unpackedShape:Ue.shape).length;let He=`_${Me}`;Be[He]=new Ee.GlslLibRoutine(this.getValueFromSingle(Me,ze,Ue.width,Ue.height,!1),[`shapeUtils.indicesToOffset${He}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),He+="_T",Be[He]=new Ee.GlslLibRoutine(this.getValueFromSingle(Me,ze,Ue.width,Ue.height,!0),[`shapeUtils.indicesToOffset${He}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),Be}getValueFromSingle(Be,Me,Oe,Ue,ze){let He=`_${Be}`;return ze&&(He+="_T"),`
        float ${He}(int m[${Me}]) {
          int offset = indicesToOffset${He}(m);
          vec2 coords = offsetToCoords(offset, ${Oe}, ${Ue});
          float value = getColorAsFloat(${(0,Re.getGlsl)(this.context.glContext.version).texture2D}(${Be}, coords));
          return value;
        }
        `}getPackedValueFrom(Be,Me,Oe,Ue,ze){let He=`_${Be}_Pack`;return ze&&(He+="_T"),`
        vec4 ${He}(int m[${Me}]) {
          int offset = indicesToOffset_${Be}(m);
          vec2 coords = offsetToCoords(offset, ${Oe}, ${Ue});
          return ${(0,Re.getGlsl)(this.context.glContext.version).texture2D}(${Be}, coords);
        }
        `}}e.CoordsGlslLib=$e},8520:(n,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(t=e.FunctionType||(e.FunctionType={}))[t.ValueBased=0]="ValueBased",t[t.Positional=1]="Positional",e.GlslContext=class{constructor(Te,Ee,Re,Ce){this.glContext=Te,this.programInfo=Ee,this.inputTextureLayouts=Re,this.outputTextureLayout=Ce}},e.GlslLib=class{constructor(Te){this.context=Te}},e.GlslLibRoutine=class{constructor(Te,Ee){this.routineBody=Te,this.dependencies=Ee}},e.GlslLibRoutineNode=class{constructor(Te,Ee,Re){this.name=Te,this.dependencies=Re||[],Ee&&(this.routineBody=Ee)}addDependency(Te){Te&&this.dependencies.push(Te)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(Te){if(!Te||Te.length===0)return[];if(Te.length===1)return Te;const Ee=new Set,Re=new Set,Ce=new Array;return this.createOrderedNodes(Te,Ee,Re,Ce),Ce}static createOrderedNodes(Te,Ee,Re,Ce){for(let De=0;De<Te.length;++De)this.dfsTraverse(Te[De],Ee,Re,Ce)}static dfsTraverse(Te,Ee,Re,Ce){if(!Te||Re.has(Te.name))return;if(Ee.has(Te.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");Ee.add(Te.name);const De=Te.dependencies;if(De&&De.length>0)for(let $e=0;$e<De.length;++$e)this.dfsTraverse(De[$e],Ee,Re,Ce);Ce.push(Te),Re.add(Te.name),Ee.delete(Te.name)}}},7341:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const Te=t(8520);class Ee extends Te.GlslLib{constructor(Ce){super(Ce)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new Te.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new Te.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const Ce=Ee.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new Te.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${Ce}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const Ce=Ee.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new Te.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${Ce}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const Ce=new ArrayBuffer(4),De=new Uint32Array(Ce),$e=new Uint8Array(Ce);if(De[0]=3735928559,$e[0]===239)return!0;if($e[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=Ee},9894:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const Te=t(8520),Ee=t(5060);class Re extends Te.GlslLib{constructor(De){super(De)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const De=(0,Ee.getGlsl)(this.context.glContext.version);return{setFragColor:new Te.GlslLibRoutine(`
        void setFragColor(float value) {
            ${De.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new Te.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=Re},2848:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const t=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(Te){const Ee={};let Re;for(;(Re=t.exec(Te))!==null;){const Ce=Re[3].split(",").map(De=>{const $e=De.trim().split(" ");return $e&&$e.length===2?{type:$e[0],name:$e[1]}:null}).filter(De=>De!==null);Ee[Re[2]]={params:Ce,body:Re[4]}}for(const Ce in Ee){const De="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",Ce),$e=new RegExp(De,"gm");for(;(Re=$e.exec(Te))!==null;){const Ve=Re[1],Be=Re[2],Me=Re[3].split(","),Oe=Ve?`${Ve} ${Be};`:"";let Ue=Ee[Ce].body,ze="";Ee[Ce].params.forEach((Ge,Ke)=>{Ge&&(ze+=`${Ge.type} ${Ge.name} = ${Me[Ke]};
`)}),Ue=`${ze}
 ${Ue}`,Ue=Ue.replace("return",`${Be} = `);const He=`
      ${Oe}
      {
        ${Ue}
      }
      `;Te=Te.replace(Re[0],He)}}return Te.replace(t,"")}},8879:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const Te=t(8520),Ee=t(2848),Re=t(5483),Ce=t(5060);e.GlslPreprocessor=class{constructor(De,$e,Ve,Be){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Te.GlslContext(De,$e,Ve,Be),Object.keys(Re.glslRegistry).forEach(Oe=>{const Ue=new Re.glslRegistry[Oe](this.context);this.libs[Oe]=Ue});const Me=this.glslLibRoutineDependencyGraph;for(const Oe in this.libs){const Ue=this.libs[Oe].getFunctions();for(const ze in Ue){const He=Oe+"."+ze;let Ge;Me[He]?(Ge=Me[He],Ge.routineBody=Ue[ze].routineBody):(Ge=new Te.GlslLibRoutineNode(He,Ue[ze].routineBody),Me[He]=Ge);const Ke=Ue[ze].dependencies;if(Ke)for(let Xe=0;Xe<Ke.length;++Xe)if(Me[Ke[Xe]])Ge.addDependency(Me[Ke[Xe]]);else{const Je=new Te.GlslLibRoutineNode(Ke[Xe]);Me[Ke[Xe]]=Je,Ge.addDependency(Je)}}}}preprocess(){const De=this.context.programInfo;let $e=De.shaderSource;return this.context.programInfo.hasMain||($e=`${$e}
      ${(0,Ce.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),$e=(0,Ee.replaceInlines)($e),`${(0,Ce.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(De.inputNames,De.variables)}
    ${this.getImports($e)}
    ${$e}`}getImports(De){const $e=this.selectGlslLibRoutinesToBeIncluded(De);if($e.length===0)return"";let Ve="";for(let Be=0;Be<$e.length;++Be){if(!$e[Be].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${$e[Be].name}`);Ve+=$e[Be].routineBody+`
`}return Ve}selectGlslLibRoutinesToBeIncluded(De){const $e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(Ve=>{const Be=Ve.split(".")[1];De.indexOf(Be)!==-1&&$e.push(this.glslLibRoutineDependencyGraph[Ve])}),Te.TopologicalSortGlslRoutines.returnOrderedNodes($e)}getUniforms(De,$e){const Ve=[];if(De)for(const Be of De)Ve.push(`uniform sampler2D ${Be};`);if($e)for(const Be of $e)Ve.push(`uniform ${Be.type} ${Be.name}${Be.arrayLength?`[${Be.arrayLength}]`:""};`);return Ve.join(`
`)}}},5483:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const Te=t(5107),Ee=t(7341),Re=t(9894),Ce=t(2655),De=t(3891);e.glslRegistry={encoding:Ee.EncodingGlslLib,fragcolor:Re.FragColorGlslLib,vec:De.VecGlslLib,shapeUtils:Ce.ShapeUtilsGlslLib,coordinates:Te.CoordsGlslLib}},2655:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const Te=t(8520);class Ee extends Te.GlslLib{constructor(Ce){super(Ce)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const Ce=this.context.outputTextureLayout.shape.length,De={};return this.context.programInfo.inputNames.forEach(($e,Ve)=>{const Be=this.context.inputTextureLayouts[Ve].unpackedShape;if(Be.length<=Ce){const Me=Be.length,Oe=Ce-Me,Ue=`bcastIndices_${$e}`;let ze="";for(let Ge=0;Ge<Me;++Ge)ze+=`
          realIndices[${Ge}] = int( mod(float(bcastedIndices[${Oe+Ge}]), ${Be[Ge]}.0) );
          `;const He=`
        void ${Ue} (int bcastedIndices[${Ce}], out int realIndices[${Me}]) {
          ${ze}
        }
        `;De[Ue]=new Te.GlslLibRoutine(He)}}),De}bcastMatmulIndex(){const Ce=this.context.outputTextureLayout.shape.length,De={};return this.context.programInfo.inputNames.forEach(($e,Ve)=>{const Be=this.context.inputTextureLayouts[Ve].shape;if(!(Be.length<2||Be.length>Ce)){const Me=Be.length,Oe=Ce-Me,Ue=`bcastMatmulIndices_${$e}`;let ze="";for(let Ge=0;Ge<Me-2;++Ge)ze+=`
          realIndices[${Ge}] = int( mod(float(bcastedIndices[${Oe+Ge}]), ${Be[Ge]}.0) );
          `;const He=`
        void ${Ue}(int bcastedIndices[${Ce}], out int realIndices[${Me}]) {
          ${ze}
          realIndices[${Me-1}] = bcastedIndices[${Ce-1}];
          realIndices[${Me-2}] = bcastedIndices[${Ce-2}];
        }
        `;De[Ue]=new Te.GlslLibRoutine(He)}}),De}indicesToOffset(){const Ce={};return this.context.programInfo.inputNames.forEach((De,$e)=>{const Ve=this.context.inputTextureLayouts[$e].shape,Be=this.context.inputTextureLayouts[$e].strides,Me=Ve.length;let Oe=`indicesToOffset_${De}`;Ce[Oe]=new Te.GlslLibRoutine(Ee.indexToOffsetSingle(Oe,Me,Be)),Oe=`indicesToOffset_${De}_T`,Ce[Oe]=new Te.GlslLibRoutine(Ee.indexToOffsetSingle(Oe,Me,Be.slice().reverse()))}),Ce}static indexToOffsetSingle(Ce,De,$e){let Ve="";for(let Be=De-1;Be>=0;--Be)Ve+=`
        offset += indices[${Be}] * ${$e[Be]};
        `;return`
      int ${Ce}(int indices[${De}]) {
        int offset = 0;
        ${Ve}
        return offset;
      }
      `}offsetToIndices(){const Ce={};return this.context.programInfo.inputNames.forEach((De,$e)=>{const Ve=this.context.inputTextureLayouts[$e].shape,Be=this.context.inputTextureLayouts[$e].strides,Me=Ve.length;let Oe=`offsetToIndices_${De}`;Ce[Oe]=new Te.GlslLibRoutine(Ee.offsetToIndicesSingle(Oe,Me,Be)),Oe=`offsetToIndices_${De}_T`,Ce[Oe]=new Te.GlslLibRoutine(Ee.offsetToIndicesSingle(Oe,Me,Be.slice().reverse()))}),Ce}static offsetToIndicesSingle(Ce,De,$e){const Ve=[];for(let Be=0;Be<De-1;++Be)Ve.push(`
      indices[${Be}] = offset / ${$e[Be]};`),Ve.push(`
        offset -= indices[${Be}] * ${$e[Be]};`);return Ve.push(`
      indices[${De-1}] = offset;`),`
      void ${Ce}(int offset, out int indices[${De}]) {
        ${Ve.join("")}
      }
      `}incrementIndices(){const Ce={};return this.context.programInfo.inputNames.forEach((De,$e)=>{const Ve=this.context.inputTextureLayouts[$e].shape,Be=Ve.length,Me=`incrementIndices_${De}`;let Oe="";for(let ze=0;ze<Be;++ze)Oe+=`
        shape[${ze}] = ${Ve[ze]};`;const Ue=`
        void ${Me}(int axis, out int indices[${Be}]) {
          int shape[${Be}];
          ${Oe};
          for(int i = ${Be} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;Ce[Me]=new Te.GlslLibRoutine(Ue)}),Ce}}e.ShapeUtilsGlslLib=Ee},5060:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const t={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Te={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function Ee(Re){return Re===1?t:Te}e.getGlsl=Ee,e.getVertexShaderSource=function(Re){const Ce=Ee(Re);return`${Ce.version}
      precision highp float;
      ${Ce.attribute} vec3 position;
      ${Ce.attribute} vec2 textureCoord;

      ${Ce.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(Re){const Ce=Ee(Re);return`${Ce.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${Ce.varyingFrag} vec2 TexCoords;
    ${Ce.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(Re,Ce){return`
  void main() {
    int indices[${Ce}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${Ee(Re).output} = result;
  }
  `}},3891:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const Te=t(8520);class Ee extends Te.GlslLib{constructor(Ce){super(Ce)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const Ce=this.context.outputTextureLayout.shape.length,De={add:"+=",sub:"-=",mul:"*=",div:"/="},$e={};for(const Ve in De){const Be=`${Ve}Vec`;let Me="";for(let Ue=0;Ue<Ce;++Ue)Me+=`
          dest[${Ue}] ${De[Ve]} src[${Ue}];
          `;const Oe=`
        void ${Be}(int src[${Ce}], out int dest[${Ce}]) {
          ${Me}
        }
        `;$e[Be]=new Te.GlslLibRoutine(Oe)}return $e}copyVec(){const Ce=this.context.outputTextureLayout.shape.length;let De="";for(let Ve=0;Ve<Ce;++Ve)De+=`
        dest[${Ve}] = src[${Ve}];
        `;const $e=`
      void copyVec(int src[${Ce}], out int dest[${Ce}]) {
        ${De}
      }
      `;return{copyVec:new Te.GlslLibRoutine($e)}}setVecItem(){const Ce=this.context.outputTextureLayout.shape.length;let De=`
        if(index < 0)
            index =${Ce} + index;
        if (index == 0)
            m[0] = value;
        `;for(let Ve=1;Ve<Ce-1;++Ve)De+=`
        else if (index == ${Ve})
            m[${Ve}] = value;
            `;De+=`
        else
            m[${Ce-1}] = value;
        `;const $e=`
      void setVecItem(out int m[${Ce}], int index, int value) {
        ${De}
      }
        `;return{setVecItem:new Te.GlslLibRoutine($e)}}getVecItem(){const Ce=this.context.outputTextureLayout.shape.length;let De=`
        if(index < 0)
            index = ${Ce} + index;
        if (index == 0)
            return m[0];
      `;for(let Ve=1;Ve<Ce-1;++Ve)De+=`
        else if (index == ${Ve})
            return m[${Ve}];
      `;De+=`
        else
            return m[${Ce-1}];
        `;const $e=`
      int getVecItem(int m[${Ce}], int index) {
        ${De}
      }
    `;return{getVecItem:new Te.GlslLibRoutine($e)}}}e.VecGlslLib=Ee},8316:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const Te=t(6231),Ee=t(9162),Re=t(2517),Ce=t(2403),De=t(7019),$e=t(8710),Ve=t(5611),Be=t(4057),Me=t(2039);e.WebGLInferenceHandler=class{constructor(Oe){this.session=Oe,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(Oe,Ue){return(0,Be.calculateTextureWidthAndHeight)(this.session.layoutStrategy,Oe,Ue)}executeProgram(Oe,Ue){if(Ue.length<Oe.inputNames.length)throw new Error(`Input size mustn't be less than ${Oe.inputNames.length}.`);if(Oe.inputNames.length!==Oe.inputTypes.length)throw new Error("input names size does not match input types");const ze=[];for(let un=0;un<Oe.inputNames.length;++un)ze[un]=this.getOrCreateTextureData(Ue[un],Oe.inputTypes[un]);const He=((un,fn)=>{const yn=fn.map(mn=>`${mn.unpackedShape.join(",")};${mn.width}x${mn.height}`).join("_");let gn=un.name;return un.cacheHint&&(gn+="["+un.cacheHint+"]"),gn+=":"+yn,gn})(Oe,ze);let Ge=this.session.programManager.getArtifact(He);const Ke=Ge?Ge.programInfo:typeof Oe.get=="function"?Oe.get():Oe,Xe=(0,Be.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Ke.output.dims,Ke.output.textureType),Je=this.createTextureData(Xe,Ke.output.type);return Ge||(Ge=this.session.programManager.build(Ke,ze,Je),this.session.programManager.setArtifact(He,Ge)),this.runProgram(Ge,ze,Je),Je}run(Oe,Ue){return this.executeProgram(Oe,Ue).tensor}runProgram(Oe,Ue,ze){for(let He=0;He<Ue.length;++He)if(!!Ue[He].isPacked!=(Oe.programInfo.inputTypes[He]===Me.TextureType.packed))throw new Error(`input[${He}] property packed inconsistent`);if(!!ze.isPacked!=(Oe.programInfo.output.textureType===Me.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(Oe,Ue,ze)}getOrCreateTextureData(Oe,Ue){let ze=this.getTextureData(Oe.dataId,Ue===Me.TextureType.packed);if(!ze&&(ze=this.getTextureData(Oe.dataId,Ue!==Me.TextureType.packed),ze))return Ue===Me.TextureType.packed?this.pack(ze):this.unpack(ze);if(!ze){const He=(0,Be.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Oe.dims,Ue);if(Ue===Me.TextureType.packedLastDimension){const Xe=Oe.dims;if(Xe.length===4){const Je=[Xe[0],Math.ceil(Xe[1]*Xe[2]*Xe[3]/4)],un=(0,Be.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Je,Ue);let fn=Oe.numberData;if(Xe[1]*Xe[2]*Xe[3]%4!=0){const yn=Xe[0],gn=Xe[1]*Xe[2]*Xe[3],mn=Math.ceil(gn*1/4)*4;fn=new Float32Array(yn*mn);for(let dn=0;dn<yn;++dn){const vn=dn*gn,bn=dn*mn+dn%1*gn;fn.set(Oe.numberData.subarray(vn,vn+gn),bn)}}return this.createTextureData(un,Oe.type,fn,Oe,1)}}if(Ue===Me.TextureType.packed){const Ge=(0,Be.createTextureLayoutFromShape)(this.session.layoutStrategy,Oe.dims,1,[],{reverseWH:!0}),Ke=this.createTextureData(Ge,Oe.type,Oe.numberData,Oe,1);ze=this.pack(Ke)}else ze=this.createTextureData(He,Oe.type,Oe.numberData,Oe,1)}return ze}createTextureDataFromLayoutBindTensor(Oe,Ue,ze,He){return this.createTextureData(Oe,Ue,ze,He,1)}createTextureData(Oe,Ue,ze,He,Ge){Te.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(Oe)}]`);const Ke=this.session.textureManager.createTextureFromLayout(Ue,Oe,ze,Ge);return this.createTextureDataFromTexture(Oe,Ue,Ke,He)}reshapeUnpacked(Oe,Ue){const ze=this.getOrCreateTextureData(Oe,Me.TextureType.unpacked),He={channels:ze.channels,height:ze.height,width:ze.width,shape:Ue.length!==0?Ue:[1],strides:Re.ShapeUtil.computeStrides(Ue),unpackedShape:Ue};return this.createTextureDataFromTexture(He,Oe.type,ze.texture).tensor}reshapePacked(Oe,Ue){const ze=this.getOrCreateTextureData(Oe,Me.TextureType.packed);if((0,De.isReshapeCheap)(Oe.dims,Ue)){const Je={channels:ze.channels,height:ze.height,width:ze.width,shape:Ue.length!==0?Ue:[1],strides:Re.ShapeUtil.computeStrides(Ue),unpackedShape:Ue,isPacked:!0};return this.createTextureDataFromTexture(Je,Oe.type,ze.texture).tensor}const He=(0,De.processDims3D)(Oe.dims),Ge=(0,De.processDims3D)(Ue),Ke=this.reshapePacked(Oe,He),Xe=this.run((0,De.createPackedReshape3DProgramInfoLoader)(this,Ke,Ge),[Ke]);return this.reshapePacked(Xe,Ue)}cast(Oe,Ue){const ze=this.getOrCreateTextureData(Oe,Me.TextureType.unpacked);return this.createTextureDataFromTexture(ze,Ue,ze.texture).tensor}createTextureDataFromTexture(Oe,Ue,ze,He,Ge){const Ke=Object.assign(Object.assign({},Oe),{tensor:He||new Ee.Tensor(Oe.unpackedShape,Ue,Xe=>this.readTexture(Ke),async Xe=>this.readTextureAsync(Ke),void 0,Ge),texture:ze});return this.setTextureData(Ke.tensor.dataId,Ke,Oe.isPacked),Ke}getTextureData(Oe,Ue=!1){return this.session.isInitializer(Oe)?this.session.getTextureData(Oe,Ue):Ue?this.packedTextureDataCache.get(Oe):this.unpackedTextureDataCache.get(Oe)}setTextureData(Oe,Ue,ze=!1){this.session.isInitializer(Oe)?this.session.setTextureData(Oe,Ue,ze):(ze?this.packedTextureDataCache:this.unpackedTextureDataCache).set(Oe,Ue)}isTextureLayoutCached(Oe,Ue=!1){return!!this.getTextureData(Oe.dataId,Ue)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(Oe=>this.session.textureManager.releaseTexture(Oe)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(Oe=>this.session.textureManager.releaseTexture(Oe)),this.unpackedTextureDataCache=new Map}readTexture(Oe){return Oe.isPacked?this.readTexture(this.unpack(Oe)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(Oe,Oe.tensor.type,Oe.channels):this.session.textureManager.readUint8TextureAsFloat((0,$e.encodeAsUint8)(this,Oe))}async readTextureAsync(Oe){return Oe.isPacked?this.readTextureAsync(this.unpack(Oe)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(Oe,Oe.tensor.type,Oe.channels):this.session.textureManager.readUint8TextureAsFloat((0,$e.encodeAsUint8)(this,Oe))}pack(Oe){return this.executeProgram((0,Ce.createPackProgramInfoLoader)(this,Oe.tensor),[Oe.tensor])}unpack(Oe){return this.executeProgram((0,Ve.createUnpackProgramInfoLoader)(this,Oe.tensor),[Oe.tensor])}}},1640:function(n,e,t){var Te=this&&this.__createBinding||(Object.create?function(Hn,Dn,Un,Cn){Cn===void 0&&(Cn=Un);var kn=Object.getOwnPropertyDescriptor(Dn,Un);kn&&!("get"in kn?!Dn.__esModule:kn.writable||kn.configurable)||(kn={enumerable:!0,get:function(){return Dn[Un]}}),Object.defineProperty(Hn,Cn,kn)}:function(Hn,Dn,Un,Cn){Cn===void 0&&(Cn=Un),Hn[Cn]=Dn[Un]}),Ee=this&&this.__setModuleDefault||(Object.create?function(Hn,Dn){Object.defineProperty(Hn,"default",{enumerable:!0,value:Dn})}:function(Hn,Dn){Hn.default=Dn}),Re=this&&this.__importStar||function(Hn){if(Hn&&Hn.__esModule)return Hn;var Dn={};if(Hn!=null)for(var Un in Hn)Un!=="default"&&Object.prototype.hasOwnProperty.call(Hn,Un)&&Te(Dn,Hn,Un);return Ee(Dn,Hn),Dn};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const Ce=t(2898),De=Re(t(7839)),$e=t(4196),Ve=t(2069),Be=t(8138),Me=t(9663),Oe=t(5193),Ue=t(7992),ze=t(1253),He=t(4776),Ge=t(6572),Ke=t(3346),Xe=t(5623),Je=t(2870),un=t(2143),fn=t(4939),yn=t(718),gn=t(2268),mn=t(8117),dn=t(2278),vn=t(5524),bn=t(5975),Tn=t(3933),En=t(6558),In=t(5723),Nn=t(3738),On=Re(t(4909)),Fn=t(8428),$n=t(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",On.abs],["Acos","","7+",On.acos],["Add","","7+",De.add],["And","","7+",De.and],["Asin","","7+",On.asin],["Atan","","7+",On.atan],["AveragePool","","7+",un.averagePool,un.parseAveragePoolAttributes],["BatchNormalization","","7+",Ce.batchNormalization,Ce.parseBatchNormalizationAttributes],["Cast","","6+",$e.cast,$e.parseCastAttributes],["Ceil","","6+",On.ceil],["Clip","","6-10",On.clip,On.parseClipAttributes],["Clip","","11+",On.clipV11],["Concat","","4+",Ve.concat,Ve.parseConcatAttributes],["Conv","","1+",Be.conv,Be.parseConvAttributes],["ConvTranspose","","1+",Me.convTranspose,Me.parseConvTransposeAttributes],["Cos","","7+",On.cos],["Div","","7+",De.div],["Dropout","","7+",On.identity],["DepthToSpace","","1+",Oe.depthToSpace,Oe.parseDepthToSpaceAttributes],["Equal","","7+",De.equal],["Elu","","6+",On.elu,On.parseEluAttributes],["Exp","","6+",On.exp],["Flatten","","1+",Ue.flatten,Ue.parseFlattenAttributes],["Floor","","6+",On.floor],["FusedConv","com.microsoft","1+",Be.conv,Be.parseConvAttributes],["Gather","","1+",ze.gather,ze.parseGatherAttributes],["Gemm","","7-10",He.gemm,He.parseGemmAttributesV7],["Gemm","","11+",He.gemm,He.parseGemmAttributesV11],["GlobalAveragePool","","1+",un.globalAveragePool,un.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",un.globalMaxPool],["Greater","","7+",De.greater],["Identity","","1+",On.identity],["ImageScaler","","1+",Ge.imageScaler,Ge.parseImageScalerAttributes],["InstanceNormalization","","6+",Ke.instanceNormalization,Ke.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",On.leakyRelu,On.parseLeakyReluAttributes],["Less","","7+",De.less],["Log","","6+",On.log],["MatMul","","1+",Xe.matMul,Xe.parseMatMulAttributes],["MaxPool","","1+",un.maxPool,un.parseMaxPoolAttributes],["Mul","","7+",De.mul],["Neg","","6+",On.neg],["Not","","1+",On.not],["Or","","7+",De.or],["Pad","","2-10",Je.padV2,Je.parsePadAttributesV2],["Pad","","11+",Je.padV11,Je.parsePadAttributesV11],["Pow","","7+",De.pow],["PRelu","","7+",De.pRelu],["ReduceLogSum","","1+",fn.reduceLogSum,fn.parseReduceAttributes],["ReduceMax","","1+",fn.reduceMax,fn.parseReduceAttributes],["ReduceMean","","1+",fn.reduceMean,fn.parseReduceAttributes],["ReduceMin","","1+",fn.reduceMin,fn.parseReduceAttributes],["ReduceProd","","1+",fn.reduceProd,fn.parseReduceAttributes],["ReduceSum","","1-12",fn.reduceSum,fn.parseReduceAttributes],["ReduceSumSquare","","1+",fn.reduceLogSumSquare,fn.parseReduceAttributes],["Relu","","6+",On.relu],["Reshape","","5+",yn.reshape],["Resize","","10",gn.resize,gn.parseResizeAttributesV10],["Resize","","11+",gn.resize,gn.parseResizeAttributesV11],["Shape","","1+",mn.shape],["Sigmoid","","6+",On.sigmoid],["Sin","","7+",On.sin],["Slice","","10+",dn.sliceV10],["Slice","","1-9",dn.slice,dn.parseSliceAttributes],["Softmax","","1-12",vn.softmax,vn.parseSoftmaxAttributes],["Softmax","","13+",vn.softmaxV13,vn.parseSoftmaxAttributesV13],["Split","","2-12",bn.split,bn.parseSplitAttributes],["Sqrt","","6+",On.sqrt],["Squeeze","","1-12",Tn.squeeze,Tn.parseSqueezeAttributes],["Squeeze","","13+",Tn.squeezeV13],["Sub","","7+",De.sub],["Sum","","6+",En.sum],["Tan","","7+",On.tan],["Tanh","","6+",On.tanh],["Tile","","6+",In.tile],["Transpose","","1+",Nn.transpose,Nn.parseTransposeAttributes],["Upsample","","7-8",$n.upsample,$n.parseUpsampleAttributesV7],["Upsample","","9",$n.upsample,$n.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Fn.unsqueeze,Fn.parseUnsqueezeAttributes],["Unsqueeze","","13+",Fn.unsqueezeV13],["Xor","","7+",De.xor]]},2898:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const Te=t(246),Ee=t(5060),Re=t(2039),Ce={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[Re.TextureType.unpacked,Re.TextureType.unpacked,Re.TextureType.unpacked,Re.TextureType.unpacked,Re.TextureType.unpacked]};e.batchNormalization=(Ve,Be,Me)=>($e(Be),[Ve.run(Object.assign(Object.assign({},Ce),{cacheHint:Me.cacheKey,get:()=>De(Ve,Be,Me)}),Be)]),e.parseBatchNormalizationAttributes=Ve=>{const Be=Ve.attributes.getFloat("epsilon",1e-5),Me=Ve.attributes.getFloat("momentum",.9),Oe=Ve.attributes.getInt("spatial",1);return(0,Te.createAttributeWithCacheKey)({epsilon:Be,momentum:Me,spatial:Oe})};const De=(Ve,Be,Me)=>{const Oe=(0,Ee.getGlsl)(Ve.session.backend.glContext.version),Ue=Be[0].dims.length,[ze,He]=Ve.calculateTextureWidthAndHeight(Be[1].dims,Re.TextureType.unpacked),Ge=`
  float process(int[${Ue}] indices) {
    vec2 position = offsetToCoords(indices[1], ${ze}, ${He});
    float scale = getColorAsFloat(${Oe.texture2D}(Scale, position));
    float mean = getColorAsFloat(${Oe.texture2D}(Mean, position));
    float variance = getColorAsFloat(${Oe.texture2D}(Variance, position));
    float b = getColorAsFloat(${Oe.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${Me.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},Ce),{output:{dims:Be[0].dims,type:Be[0].type,textureType:Re.TextureType.unpacked},shaderSource:Ge})},$e=Ve=>{if(!Ve||Ve.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const Be=Ve[0],Me=Ve[1],Oe=Ve[2],Ue=Ve[3],ze=Ve[4];if(Be.dims.length<3||Me.dims.length!==1||Oe.dims.length!==1||Ue.dims.length!==1||ze.dims.length!==1)throw new Error("invalid input shape.");if(Me.dims[0]!==Be.dims[1]||Oe.dims[0]!==Be.dims[1]||Ue.dims[0]!==Be.dims[1]||ze.dims[0]!==Be.dims[1])throw new Error("invalid input shape.");if(Be.type!=="float32"&&Be.type!=="float64"||Me.type!=="float32"&&Me.type!=="float64"||Oe.type!=="float32"&&Oe.type!=="float64"||Ue.type!=="float32"&&Ue.type!=="float64"||ze.type!=="float32"&&ze.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const Te=t(2517),Ee=t(8520),Re=t(5060),Ce=t(2039);function De(){const fn="add_";return{body:`
  float ${fn}(float a, float b) {
    return a + b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function $e(){const fn="div_";return{body:`
  float ${fn}(float a, float b) {
    return a / b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Ve(){const fn="mul_";return{body:`
  float ${fn}(float a, float b) {
    return a * b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Be(){const fn="sub_";return{body:`
  float ${fn}(float a, float b) {
    return a - b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Me(){const fn="equal_";return{body:`
  float ${fn}(float a, float b) {
    return float(a == b);
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Oe(){const fn="greater_";return{body:`
  float ${fn}(float a, float b) {
    return float(a > b);
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Ue(){const fn="less_";return{body:`
  float ${fn}(float a, float b) {
    return float(a < b);
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function ze(){const fn="and_";return{body:`
  float ${fn}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function He(){return{body:`
  float or_(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 or_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:"or_",type:Ee.FunctionType.ValueBased}}function Ge(){const fn="xor_";return{body:`
  float ${fn}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Ke(){return function(fn){const yn=`${fn}_`;return{body:`
  float ${yn}(float a, float b) {
    return ${fn}(a, b);
  }
  vec4 ${yn}(vec4 v1, vec4 v2) {
    return ${fn}(v1, v2);
  }
  `,name:yn,type:Ee.FunctionType.ValueBased}}("pow")}function Xe(){const fn="prelu_";return{body:`
  float ${fn}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}e.glslAdd=De,e.glslDiv=$e,e.glslMul=Ve,e.glslSub=Be,e.glslEqual=Me,e.glslGreater=Oe,e.glslLess=Ue,e.glslAnd=ze,e.glslOr=He,e.glslXor=Ge,e.glslPow=Ke,e.glslPRelu=Xe;const Je=(fn,yn,gn,mn=yn[0].type,dn)=>{const vn=fn.session.pack?Ce.TextureType.packed:Ce.TextureType.unpacked;return{name:gn.name,inputNames:["A","B"],inputTypes:[vn,vn],cacheHint:dn,get:()=>un(fn,yn,gn,mn)}},un=(fn,yn,gn,mn=yn[0].type)=>{const dn=fn.session.pack?Ce.TextureType.packed:Ce.TextureType.unpacked,vn=!Te.ShapeUtil.areEqual(yn[0].dims,yn[1].dims);let bn=yn[0].dims;const Tn=fn.session.pack;if(vn){const Nn=Te.BroadcastUtil.calcShape(yn[0].dims,yn[1].dims,!1);if(!Nn)throw new Error("Can't perform binary op on the given tensors");bn=Nn;const On=bn.length,Fn=yn[0].dims.length!==0?yn[0].dims.length:1,$n=yn[1].dims.length!==0?yn[1].dims.length:1,Hn=yn[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Dn=yn[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Un=(0,Re.getGlsl)(fn.session.backend.glContext.version),Cn=Tn?`
      ${gn.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${gn.name}(a, b);
        ${Un.output} = result;
      }`:`
      ${gn.body}
      float process(int indices[${On}]) {
        int aindices[${Fn}];
        int bindices[${$n}];
        ${Hn}
        ${Dn}
        return ${gn.name}(_A(aindices), _B(bindices));
      }`;return{name:gn.name,inputNames:["A","B"],inputTypes:[dn,dn],output:{dims:bn,type:mn,textureType:dn},shaderSource:Cn,hasMain:Tn}}const En=(0,Re.getGlsl)(fn.session.backend.glContext.version),In=`
    ${gn.body}
    void main() {
      vec4 v1 = ${En.texture2D}(A, TexCoords);
      vec4 v2 = ${En.texture2D}(B, TexCoords);
      vec4 result = ${gn.name}(v1, v2);
      ${En.output} = result;
    }
    `;return{name:gn.name,inputNames:["A","B"],inputTypes:[dn,dn],output:{dims:yn[0].dims,type:mn,textureType:dn},shaderSource:In,hasMain:!0}};e.add=(fn,yn)=>[fn.run(Je(fn,yn,De()),yn)],e.and=(fn,yn)=>[fn.run(Je(fn,yn,ze(),"bool"),yn)],e.div=(fn,yn)=>[fn.run(Je(fn,yn,$e()),yn)],e.equal=(fn,yn)=>[fn.run(Je(fn,yn,Me(),"bool"),yn)],e.greater=(fn,yn)=>[fn.run(Je(fn,yn,Oe(),"bool"),yn)],e.less=(fn,yn)=>[fn.run(Je(fn,yn,Ue(),"bool"),yn)],e.mul=(fn,yn)=>[fn.run(Je(fn,yn,Ve()),yn)],e.or=(fn,yn)=>[fn.run(Je(fn,yn,He(),"bool"),yn)],e.pow=(fn,yn)=>[fn.run(Je(fn,yn,Ke()),yn)],e.pRelu=(fn,yn)=>[fn.run(Je(fn,yn,Xe()),yn)],e.sub=(fn,yn)=>[fn.run(Je(fn,yn,Be()),yn)],e.xor=(fn,yn)=>[fn.run(Je(fn,yn,Ge(),"bool"),yn)]},4196:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const Te=t(2517);e.cast=(Re,Ce,De)=>(Ee(Ce),[Re.cast(Ce[0],De)]),e.parseCastAttributes=Re=>Te.ProtoUtil.tensorDataTypeFromProto(Re.attributes.getInt("to"));const Ee=Re=>{if(!Re||Re.length!==1)throw new Error("Cast requires 1 input.");if(Re[0].type==="string")throw new Error("Invalid input type.")}},1163:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const Te=t(5060),Ee=t(2039),Re=t(9390),Ce=t(2827);e.createPackedConcatProgramInfoLoader=($e,Ve,Be)=>{const Me=(Oe=Ve.length,Ue=Be.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:Oe},(ze,He)=>`X${He}`),inputTypes:Array(Oe).fill(Ee.TextureType.packed),cacheHint:Ue});var Oe,Ue;return Object.assign(Object.assign({},Me),{get:()=>((ze,He,Ge,Ke)=>{const Xe=Ge[0].dims.slice();if(Ke>=Xe.length||Ke<-1*Xe.length)throw new Error("axis specified for concat doesn't match input dimensionality");Ke<0&&(Ke=Xe.length+Ke);const Je=Xe.slice(0);for(let Hn=1;Hn<Ge.length;Hn++){const Dn=Ge[Hn].dims.slice();for(let Un=0;Un<Xe.length;Un++)if(Un===Ke)Je[Ke]+=Dn[Un];else if(Xe[Un]!==Dn[Un])throw new Error("non concat dimensions must match")}const un=Je.length,fn=(0,Ce.getChannels)("coords",un),yn=(0,Re.getCoordsDataType)(un),gn=(0,Ce.unpackFromChannel)(),mn=Ge.map(Hn=>Hn.dims),dn=(0,Re.getGlChannels)(un),vn=new Array(mn.length-1);vn[0]=mn[0][Ke];for(let Hn=1;Hn<vn.length;Hn++)vn[Hn]=vn[Hn-1]+mn[Hn][Ke];const bn=dn[Ke],Tn=dn.slice(-2),En=dn.join();let In=`if (${bn} < ${vn[0]}) {
        return getChannel(
            getX0(${En}), vec2(${Tn.join()}));
        }`;for(let Hn=1;Hn<vn.length;Hn++){const Dn=vn[Hn-1];In+=`
            if (${bn} < ${vn[Hn]}  && ${bn} >= ${vn[Hn-1]}) {
              return getChannel(
                getX${Hn}(${De(dn,bn,Dn)}),
                vec2(${De(Tn,bn,Dn)}));
            }`}const Nn=vn.length,On=vn[vn.length-1];In+=`
            return getChannel(
              getX${Nn}(${De(dn,bn,On)}),
              vec2(${De(Tn,bn,On)}));`;const Fn=(0,Te.getGlsl)(ze.session.backend.glContext.version),$n=`
          ${gn}
          float getValue(${dn.map(Hn=>"int "+Hn)}) {
            ${In}
          }

          void main() {
            ${yn} coords = getOutputCoords();
            int lastDim = coords.${dn[un-1]};
            coords.${dn[un-1]} = coords.${dn[un-2]};
            coords.${dn[un-2]} = lastDim;

            vec4 result = vec4(getValue(${fn}), 0., 0., 0.);

            ${fn[un-1]} = ${fn[un-1]} + 1;
            if (${fn[un-1]} < ${Je[un-1]}) {
              result.g = getValue(${fn});
            }

            ${fn[un-2]} = ${fn[un-2]} + 1;
            if (${fn[un-2]} < ${Je[un-2]}) {
              result.a = getValue(${fn});
            }

            ${fn[un-1]} = ${fn[un-1]} - 1;
            if (${fn[un-2]} < ${Je[un-2]} &&
                ${fn[un-1]} < ${Je[un-1]}) {
              result.b = getValue(${fn});
            }
            ${Fn.output} = result;
          }
        `;return Object.assign(Object.assign({},He),{output:{dims:Je,type:Ge[0].type,textureType:Ee.TextureType.packed},shaderSource:$n,hasMain:!0})})($e,Me,Ve,Be.axis)})};const De=($e,Ve,Be)=>{const Me=$e.indexOf(Ve);return $e.map((Oe,Ue)=>Ue===Me?`${Oe} - ${Be}`:Oe).join()}},2069:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const Te=t(246),Ee=t(2039),Re=t(1163);e.concat=(Oe,Ue,ze)=>(Me(Ue),Oe.session.pack&&Ue[0].dims.length>1?[Oe.run((0,Re.createPackedConcatProgramInfoLoader)(Oe,Ue,ze),Ue)]:[Oe.run(Ce(Oe,Ue,ze),Ue)]);const Ce=(Oe,Ue,ze)=>{const He=(Ge=Ue.length,Ke=ze.cacheKey,{name:"Concat",inputNames:Array.from({length:Ge},(Xe,Je)=>`X${Je}`),inputTypes:Array(Ge).fill(Ee.TextureType.unpacked),cacheHint:Ke});var Ge,Ke;return Object.assign(Object.assign({},He),{get:()=>((Xe,Je,un,fn)=>{const yn=un[0].dims.slice();if(fn>=yn.length||fn<-1*yn.length)throw new Error("axis specified for concat doesn't match input dimensionality");fn<0&&(fn=yn.length+fn);const gn=yn.slice(0);for(let En=1;En<un.length;En++){const In=un[En].dims.slice();for(let Nn=0;Nn<yn.length;Nn++)if(Nn===fn)gn[fn]+=In[Nn];else if(yn[Nn]!==In[Nn])throw new Error("non concat dimensions must match")}const mn=gn.length,dn=new Array(un.length);let vn=0;for(let En=0;En<dn.length;++En)vn+=un[En].dims[fn],dn[En]=vn;let bn="";bn=un.length<5?De(dn):$e(dn);const Tn=`
        ${Ve(un.length,mn)}
        ${Be(dn)}
        ${bn}
        float process(int indices[${mn}]) {
          int textureIndex = getTextureWhereDataResides (indices[${fn}]);

          if(textureIndex != 0) {
            indices[${fn}] = indices[${fn}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},Je),{output:{dims:gn,type:un[0].type,textureType:Ee.TextureType.unpacked},shaderSource:Tn})})(0,He,Ue,ze.axis)})},De=Oe=>`int getTextureWhereDataResides(int index) {
      ${Oe.map((Ue,ze)=>`if(index<${Ue}) {return ${ze};}
`).join("")}
    }`,$e=Oe=>De(Oe),Ve=(Oe,Ue)=>{const ze=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${Ue}]) {`];for(let He=0;He<Oe;++He)He===0?ze.push(`	if (textureIndex == ${He}) { return _X${He}(indices); }`):He===Oe-1?ze.push(`	else { return _X${He}(indices); }`):ze.push(`	else if (textureIndex == ${He}) { return _X${He}(indices); }`);return ze.push("	}"),ze.join(`
`)},Be=Oe=>{const Ue=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let ze=0;ze<Oe.length;++ze)ze===0?Ue.push(`	if (index == ${ze}) { return ${Oe[ze]}; }`):ze===Oe.length-1?Ue.push(`	else { return ${Oe[ze]}; }`):Ue.push(`	else if (index == ${ze}) { return ${Oe[ze]}; }`);return Ue.push("	}"),Ue.join(`
`)};e.parseConcatAttributes=Oe=>(0,Te.createAttributeWithCacheKey)({axis:Oe.attributes.getInt("axis")});const Me=Oe=>{if(!Oe||Oe.length<1)throw new Error("too few inputs");const Ue=Oe[0].type,ze=Oe[0].dims.length;if(Ue==="string")throw new Error("string tensor is not supported yet");for(const He of Oe){if(He.type!==Ue)throw new Error("input tensors should be one type");if(He.dims.length!==ze)throw new Error("input tensors should have the same shape")}}},4770:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const Te=t(6231),Ee=t(5060),Re=t(2039),Ce=t(8138),De=t(2823);e.createUnpackedGroupedConvProgramInfoLoader=($e,Ve,Be)=>{const Me=(Oe=Ve.length>2,Ue=Be.cacheKey,{name:"GroupedConv",inputNames:Oe?["X","W","Bias"]:["X","W"],inputTypes:Oe?[Re.TextureType.unpacked,Re.TextureType.unpacked,Re.TextureType.unpacked]:[Re.TextureType.unpacked,Re.TextureType.unpacked],cacheHint:Ue});var Oe,Ue;return Object.assign(Object.assign({},Me),{get:()=>((ze,He,Ge,Ke)=>{const Xe=He.length>2?"value += getBias(output_channel);":"",Je=He[0].dims.slice(),un=He[1].dims.slice(),fn=un[0]/Ke.group;Te.Logger.verbose("GroupedConv",`autpPad:${Ke.autoPad}, dilations:${Ke.dilations}, group:${Ke.group}, kernelShape:${Ke.kernelShape}, pads:${Ke.pads}, strides:${Ke.strides}`);const yn=(0,Ce.calculateOutputShape)(Je,un,Ke.dilations,Ke.pads,Ke.strides),gn=(0,Ee.getGlsl)(ze.session.backend.glContext.version),{activationFunction:mn,applyActivation:dn}=(0,De.getActivationSnippet)(Ke),vn=`
  const ivec2 strides = ivec2(${Ke.strides[0]}, ${Ke.strides[1]});
  const ivec2 pads = ivec2(${Ke.pads[0]}, ${Ke.pads[1]});
  ${mn}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${fn};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${un[1]}; wInChannel++) {
      int input_channel = group_id * ${un[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${un[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${Ke.dilations[0]};

        if (xHeight < 0 || xHeight >= ${Je[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${un[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${Ke.dilations[1]};
          if (xWidth < 0 || xWidth >= ${Je[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${Xe}
    ${dn}
    ${gn.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Ge),{output:{dims:yn,type:He[0].type,textureType:Re.TextureType.unpacked},shaderSource:vn,hasMain:!0})})($e,Ve,Me,Be)})}},1386:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const Te=t(8138),Ee=t(8555),Re=t(708);e.conv2DPackedPointwise=(Ce,De,$e)=>{const Ve=De[0].dims,Be=De[1].dims,Me=(0,Te.calculateOutputShape)(Ve,Be,$e.dilations,$e.pads,$e.strides),Oe=Ce.reshapePacked(De[0],[Ve[1],Ve[2]*Ve[3]]),Ue=Ce.reshapePacked(De[1],[Be[0],Be[1]]),ze=De.length>2?[Ue,Oe,De[2]]:[Ue,Oe],He=Ce.run((0,Re.createPackedMatmulProgramInfoLoader)(Ce,ze,$e),ze);return Ce.reshapePacked(He,Me)},e.conv2DPacked=(Ce,De,$e)=>{const Ve=De[0].dims,Be=De[1].dims,Me=(0,Te.calculateOutputShape)(Ve,Be,$e.dilations,$e.pads,$e.strides),Oe=Ce.run((0,Ee.createPackedIm2ColProgramInfoLoader)(Ce,De[0],De[1],Me,$e),[De[0]]),Ue=Ce.reshapePacked(De[1],[Be[0],Be[1]*Be[2]*Be[3]]),ze=De.length===3?[Ue,Oe,De[2]]:[Ue,Oe],He=Ce.run((0,Re.createPackedMatmulProgramInfoLoader)(Ce,ze,$e),ze);return Ce.reshapePacked(He,Me)}},9663:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const Te=t(246),Ee=t(5060),Re=t(2039),Ce=t(2823),De=(Ue,ze,He,Ge,Ke,Xe)=>(Ue-1)*ze+He+(Ge-1)*Ke+1-Xe,$e=(Ue,ze,He,Ge,Ke)=>{const Xe=Math.floor(Ue/2);ze==="SAME_UPPER"?(He[Ge]=Xe,He[Ke]=Ue-Xe):ze==="SAME_LOWER"&&(He[Ge]=Ue-Xe,He[Ke]=Xe)};e.convTranspose=(Ue,ze,He)=>(Oe(ze,He),Ve(Ue,ze,He));const Ve=(Ue,ze,He)=>{const Ge=Me(He,ze);return[Be(Ue,ze,Ge)]},Be=(Ue,ze,He)=>Ue.run(((Ge,Ke,Xe)=>{const Je=(un=Ke.length>2,fn=Xe.cacheKey,{name:"ConvTranspose",inputNames:un?["X","W","B"]:["X","W"],inputTypes:un?[Re.TextureType.unpacked,Re.TextureType.unpacked,Re.TextureType.unpacked]:[Re.TextureType.unpacked,Re.TextureType.unpacked],cacheHint:fn});var un,fn;return Object.assign(Object.assign({},Je),{get:()=>((yn,gn,mn,dn)=>{const vn=gn.length>2?"getB(output_channel)":"0.0",bn=gn[0].dims,Tn=gn[1].dims,En=Tn[1],In=Tn[0]/dn.group,Nn=[gn[0].dims[0],gn[1].dims[1]*dn.group,...dn.outputShape],On=(0,Ee.getGlsl)(yn.session.backend.glContext.version),{activationFunction:Fn,applyActivation:$n}=(0,Ce.getActivationSnippet)(dn),Hn=`
  const ivec2 strides = ivec2(${dn.strides[0]}, ${dn.strides[1]});
  const ivec2 pads = ivec2(${dn.pads[0]}, ${dn.pads[1]});
  ${Fn}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${En};
    int wOutChannel = output_channel - group_id * ${En};

    float value = ${vn};
    for (int inChannelOffset = 0; inChannelOffset < ${In}; inChannelOffset++) {
      int input_channel = group_id * ${In} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Tn[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Tn[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${dn.dilations[0]}, wHOff * ${dn.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${bn[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${bn[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${$n}
    ${On.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},mn),{output:{dims:Nn,type:gn[0].type,textureType:Re.TextureType.unpacked},shaderSource:Hn,hasMain:!0})})(Ge,Ke,Je,Xe)})})(Ue,ze,He),ze),Me=(Ue,ze)=>{const He=Ue.kernelShape.slice();if(Ue.kernelShape.length===0)for(let Je=2;Je<ze[1].dims.length;++Je)He.push(ze[1].dims[Je]);const Ge=Ue.pads.slice(),Ke=Ue.outputShape.slice();((Je,un,fn,yn,gn,mn,dn,vn)=>{const bn=Je.length-2,Tn=vn.length===0;for(let En=0;En<bn;++En){const In=Tn?Je[En+2]*mn[En]:vn[En],Nn=De(Je[En+2],mn[En],gn[En],un[En],fn[En],In);$e(Nn,yn,gn,En,En+bn),Tn&&vn.push(mn[En]*(Je[En+2]-1)+dn[En]+(un[En]-1)*fn[En]+1-gn[En]-gn[En+bn])}})(ze[0].dims,He,Ue.dilations,Ue.autoPad,Ge,Ue.strides,Ue.outputPadding,Ke);const Xe=Object.assign({},Ue);return Object.assign(Xe,{kernelShape:He,pads:Ge,outputShape:Ke,cacheKey:Ue.cacheKey}),Xe};e.parseConvTransposeAttributes=Ue=>{const ze=Ue.attributes,He=(0,Ce.parseInternalActivationAttributes)(ze),Ge=ze.getString("auto_pad","NOTSET"),Ke=ze.getInts("dilations",[1,1]),Xe=ze.getInt("group",1),Je=ze.getInts("kernel_shape",[]),un=ze.getInts("output_padding",[0,0]),fn=ze.getInts("output_shape",[]),yn=ze.getInts("pads",[0,0,0,0]),gn=ze.getInts("strides",[1,1]);return(0,Te.createAttributeWithCacheKey)(Object.assign({autoPad:Ge,dilations:Ke,group:Xe,kernelShape:Je,outputPadding:un,outputShape:fn,pads:yn,strides:gn},He))};const Oe=(Ue,ze)=>{if(!Ue||Ue.length!==2&&Ue.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(Ue[0].dims.length!==4||Ue[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(Ue[0].dims[1]!==Ue[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const He=Ue[1].dims[1]*ze.group;if(Ue.length===3&&(Ue[2].dims.length!==1||Ue[2].dims[0]!==He))throw new Error("invalid bias");const Ge=Ue[0].dims.length-2;if(ze.dilations.length!==Ge)throw new Error(`dilations should be ${Ge}D`);if(ze.strides.length!==Ge)throw new Error(`strides should be ${Ge}D`);if(ze.pads.length!==2*Ge)throw new Error(`pads should be ${2*Ge}D`);if(ze.outputPadding.length!==Ge)throw new Error(`output_padding should be ${Ge}D`);if(ze.kernelShape.length!==0&&ze.kernelShape.length!==Ue[1].dims.length-2)throw new Error("invalid kernel shape");if(ze.outputShape.length!==0&&ze.outputShape.length!==Ue[0].dims.length-2)throw new Error("invalid output shape");if(Ue[0].type!=="float32"||Ue[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(Ue.length===3&&Ue[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const Te=t(246),Ee=t(2517),Re=t(4770),Ce=t(1386),De=t(9828),$e=t(2823),Ve=t(3248),Be=t(5623);e.calculateOutputShape=(Ge,Ke,Xe,Je,un)=>{const fn=Ge[0],yn=Ge.slice(2),gn=yn.length,mn=Ke[0],dn=Ke.slice(2).map((bn,Tn)=>bn+(bn-1)*(Xe[Tn]-1)),vn=yn.map((bn,Tn)=>bn+Je[Tn]+Je[Tn+gn]).map((bn,Tn)=>Math.floor((bn-dn[Tn]+un[Tn])/un[Tn]));return[fn,mn].concat(...vn)},e.conv=(Ge,Ke,Xe)=>(He(Ke,Xe),Me(Ge,Ke,Xe));const Me=(Ge,Ke,Xe)=>{const Je=ze(Xe,Ke),un=Ge.session.pack,fn=Je.kernelShape[0]===1&&Je.kernelShape[1]===1;return Je.group>1?[Ge.run((0,Re.createUnpackedGroupedConvProgramInfoLoader)(Ge,Ke,Je),Ke)]:fn&&un?[Oe(Ge,Ke,Je)]:un&&Ke[0].dims.length===4&&Ke[0].dims[0]===1&&!fn?[(0,Ce.conv2DPacked)(Ge,Ke,Je)]:[Ue(Ge,Ke,Je)]},Oe=(Ge,Ke,Xe)=>{const Je=Ke[0].dims,un=Ke[1].dims,fn=(0,e.calculateOutputShape)(Je,un,Xe.dilations,Xe.pads,Xe.strides),yn=Ge.reshapeUnpacked(Ke[0],[Je[1],Je[2]*Je[3]]),gn=Ge.reshapeUnpacked(Ke[1],[un[0],un[1]]),mn=Ke.length>2?[gn,yn,Ke[2]]:[gn,yn],dn=Ge.run((0,Be.createMatmulProgramInfoLoader)(mn,Xe),mn);return Ge.reshapeUnpacked(dn,fn)},Ue=(Ge,Ke,Xe)=>{const Je=Ke[0].dims,un=Ke[1].dims,fn=(0,e.calculateOutputShape)(Je,un,Xe.dilations,Xe.pads,Xe.strides),yn=Ge.run((0,Ve.createIm2ColProgramInfoLoader)(Ge,Ke[0],Ke[1],fn,Xe),[Ke[0]]),gn=Ke.length===3?[yn,Ke[1],Ke[2]]:[yn,Ke[1]];return Ge.run((0,De.createDotProductProgramInfoLoader)(Ge,Ke,fn,Xe),gn)},ze=(Ge,Ke)=>{const Xe=Ge.kernelShape.slice();if(Ge.kernelShape.length===0)for(let fn=2;fn<Ke[1].dims.length;++fn)Xe.push(Ke[1].dims[fn]);const Je=Ge.pads.slice();Ee.PoolConvUtil.adjustPadsBasedOnAutoPad(Ke[0].dims,Ge.strides,Ge.dilations,Xe,Je,Ge.autoPad);const un=Object.assign({},Ge);return Object.assign(un,{kernelShape:Xe,pads:Je,cacheKey:Ge.cacheKey}),un};e.parseConvAttributes=Ge=>{const Ke=Ge.attributes,Xe=(0,$e.parseInternalActivationAttributes)(Ke),Je=Ke.getString("auto_pad","NOTSET"),un=Ke.getInts("dilations",[1,1]),fn=Ke.getInt("group",1),yn=Ke.getInts("kernel_shape",[]),gn=Ke.getInts("pads",[0,0,0,0]),mn=Ke.getInts("strides",[1,1]);return(0,Te.createAttributeWithCacheKey)(Object.assign({autoPad:Je,dilations:un,group:fn,kernelShape:yn,pads:gn,strides:mn},Xe))};const He=(Ge,Ke)=>{if(!Ge||Ge.length!==2&&Ge.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(Ge[0].dims.length!==4||Ge[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(Ge[0].dims[1]!==Ge[1].dims[1]*Ke.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(Ge.length===3&&(Ge[2].dims.length!==1||Ge[1].dims[0]!==Ge[2].dims[0]))throw new Error("invalid bias");const Xe=Ge[0].dims.length-2;if(Ke.dilations.length!==Xe)throw new Error(`dilations should be ${Xe}D`);if(Ke.strides.length!==Xe)throw new Error(`strides should be ${Xe}D`);if(Ke.pads.length!==2*Xe)throw new Error(`pads should be ${2*Xe}D`);if(Ke.kernelShape.length!==0&&Ke.kernelShape.length!==Ge[1].dims.length-2)throw new Error("invalid kernel shape");if(Ge[0].type!=="float32"||Ge[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(Ge.length===3&&Ge[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const Te=t(3738);e.depthToSpace=(Re,Ce,De)=>{Ee(Ce);const $e=De.blocksize,Ve=$e*$e,Be=De.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],Me=De.mode==="DCR"?[Ce[0].dims[0],$e,$e,Ce[0].dims[1]/Ve,Ce[0].dims[2],Ce[0].dims[3]]:[Ce[0].dims[0],Ce[0].dims[1]/Ve,$e,$e,Ce[0].dims[2],Ce[0].dims[3]],Oe=Re.reshapeUnpacked(Ce[0],Me),Ue={perm:Be,cacheKey:`${Be}`},[ze]=(0,Te.transpose)(Re,[Oe],Ue),He=[Ce[0].dims[0],Ce[0].dims[1]/Ve,Ce[0].dims[2]*$e,Ce[0].dims[3]*$e];return[Re.reshapeUnpacked(ze,He)]},e.parseDepthToSpaceAttributes=Re=>{const Ce=Re.attributes.getInt("blocksize");if(Ce<1)throw new Error(`blocksize must be >= 1, but got : ${Ce} for DepthToSpace`);const De=Re.attributes.getString("mode","DCR");if(De!=="DCR"&&De!=="CRD")throw new Error(`unrecognized mode: ${De} for DepthToSpace`);return{mode:De,blocksize:Ce}};const Ee=Re=>{if(Re.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${Re.length}`);if(Re[0].type==="string"||Re[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const Te=t(2517),Ee=t(5060),Re=t(2039),Ce=t(2823),De=t(3248);e.createDotProductProgramInfoLoader=($e,Ve,Be,Me)=>{const Oe=((Ue,ze)=>({name:"ConvDotProduct",inputNames:Ue?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:Ue?[Re.TextureType.unpacked,Re.TextureType.packedLastDimension,Re.TextureType.unpacked]:[Re.TextureType.unpacked,Re.TextureType.packedLastDimension],cacheKey:ze.activationCacheKey}))(Ve.length>2,Me);return Object.assign(Object.assign({},Oe),{get:()=>((Ue,ze,He,Ge,Ke)=>{const Xe=He[0].dims,Je=He[1].dims,un=[Je[0],Math.ceil(Xe[1]*Je[2]*Je[3]/4)],fn=(0,De.calculateIm2ColDims)(Xe,Je,Ge),[yn,gn]=Ue.calculateTextureWidthAndHeight(un,Re.TextureType.packedLastDimension),mn=Te.ShapeUtil.computeStrides(fn),[dn,vn]=Ue.calculateTextureWidthAndHeight(fn,Re.TextureType.packedLastDimension),bn=Ge.length,Tn=He.length<3?"0.0":"_B(b)",En=Math.ceil(Xe[1]*Je[2]*Je[3]/4),{activationFunction:In,applyActivation:Nn}=(0,Ce.getActivationSnippet)(Ke),On=(0,Ee.getGlsl)(Ue.session.backend.glContext.version),Fn=`
${In}
float process(int indices[${bn}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${mn[0]} + im2col[1] * ${mn[1]} + im2col[2] * ${mn[2]};
  int kernelOffset = indices[1] * ${un[1]};
  float value = ${Tn};
  for (int i = 0; i < ${En}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${dn}, ${vn});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${yn}, ${gn});
    value += dot(${On.texture2D}(Im2Col, im2colCoords), ${On.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Nn}
  return value;
}`;return Object.assign(Object.assign({},ze),{output:{dims:Ge,type:He[0].type,textureType:Re.TextureType.unpacked},shaderSource:Fn})})($e,Oe,Ve,Be,Me)})}},7992:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const Te=t(2517);e.flatten=(Re,Ce,De)=>{Ee(Ce,De);const $e=Te.ShapeUtil.flattenShape(Ce[0].dims,De);return[Re.reshapeUnpacked(Ce[0],$e)]},e.parseFlattenAttributes=Re=>Re.attributes.getInt("axis",1);const Ee=(Re,Ce)=>{if(!Re||Re.length!==1)throw new Error("Flatten requires 1 input.");const De=Re[0].dims.length;if(De===0)throw new Error("scalar tensor is not supported.");if(Ce<-De||Ce>De)throw new Error("Invalid axis");if(Re[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const Te=t(2517),Ee=t(4909);e.getActivationSnippet=function(Re){let Ce;switch(Re.activation){case"Relu":Ce=(0,Ee.glslRelu)();break;case"Sigmoid":Ce=(0,Ee.glslSigmoid)();break;case"Clip":Ce=(0,Ee.glslClip)(Re.clipMin,Re.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const De=Ce.name;return{activationFunction:Ce.body,applyActivation:`value = ${De}_(value);`}},e.parseInternalActivationAttributes=Re=>{const Ce=Re.getString("activation","");if(Ce==="Clip"){const[De,$e]=Re.getFloats("activation_params",[Te.MIN_CLIP,Te.MAX_CLIP]);return{activation:Ce,clipMax:$e,clipMin:De,activationCacheKey:`${Ce}:${De},${$e}`}}return{activation:Ce,activationCacheKey:Ce}}},1253:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const Te=t(246),Ee=t(782),Re=t(2517),Ce=t(2039);e.gather=(Be,Me,Oe)=>(Ve(Me,Oe.axis),[Be.run($e(Be,Me,Oe),Me)]),e.parseGatherAttributes=Be=>(0,Te.createAttributeWithCacheKey)({axis:Be.attributes.getInt("axis",0)});const De={name:"Gather",inputNames:["A","B"],inputTypes:[Ce.TextureType.unpacked,Ce.TextureType.unpacked]},$e=(Be,Me,Oe)=>{const Ue=Object.assign(Object.assign({},De),{cacheHint:Oe.cacheKey});return Object.assign(Object.assign({},Ue),{get:()=>((ze,He,Ge,Ke)=>{const Xe=Ge[0].dims.slice(),Je=Ge[1].dims.slice(),un=new Array(Xe.length+Je.length-1);Ke=Re.ShapeUtil.normalizeAxis(Ke,Xe.length);const fn=[];for(let gn=0;gn<un.length;gn++)gn<Ke?(un[gn]=Xe[gn],fn.push(`inputIdx[${gn}] = outputIdx[${gn}];`)):gn<Ke+Je.length?(un[gn]=Je[gn-Ke],fn.push(`indexDataIdx[${gn-Ke}] = outputIdx[${gn}];`)):(un[gn]=Xe[gn-Je.length+1],fn.push(`inputIdx[${gn-Je.length+1}] = outputIdx[${gn}];`));const yn=`
      float process(int outputIdx[${un.length||1}]) {
        int inputIdx[${Xe.length}];
        int indexDataIdx[${Je.length||1}];
        indexDataIdx[0] = 0;
        ${fn.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${Ke}] = idx < 0 ? idx + ${Xe[Ke]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},He),{output:{dims:un,type:Ge[0].type,textureType:Ce.TextureType.unpacked},shaderSource:yn})})(0,Ue,Me,Oe.axis)})},Ve=(Be,Me)=>{if(!Be||Be.length!==2)throw new Error("Gather requires 2 inputs.");const Oe=Be[0].dims.length;if(Oe<1)throw new Error("Invalid input shape.");if(Me<-Oe||Me>Oe-1)throw new Error("Invalid axis.");if(Ee.NUMBER_TYPES.indexOf(Be[0].type)===-1)throw new Error("Invaid input type.");if(Be[1].type!=="int32"&&Be[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const Te=t(246),Ee=t(2517),Re=t(2039);e.gemm=(Be,Me,Oe)=>(Ve(Me,Oe),[Be.run(De(Me,Oe),Me)]);const Ce=(Be,Me)=>{const Oe=Be.attributes.getInt("transA",0)!==0,Ue=Be.attributes.getInt("transB",0)!==0,ze=Be.attributes.getFloat("alpha",1),He=Be.attributes.getFloat("beta",1);return(0,Te.createAttributeWithCacheKey)({transA:Oe,transB:Ue,alpha:ze,beta:He,isOptionalC:Me})};e.parseGemmAttributesV7=Be=>Ce(Be,!1),e.parseGemmAttributesV11=Be=>Ce(Be,!0);const De=(Be,Me)=>{const Oe={name:"Gemm",inputNames:Be.length===3?["A","B","C"]:["A","B"],inputTypes:Be.length===3?[Re.TextureType.unpacked,Re.TextureType.unpacked,Re.TextureType.unpacked]:[Re.TextureType.unpacked,Re.TextureType.unpacked],key:Me.cacheKey};return Object.assign(Object.assign({},Oe),{get:()=>$e(Oe,Be,Me)})},$e=(Be,Me,Oe)=>{const Ue=Me[0].dims.slice(),ze=Me[1].dims.slice(),[He,Ge]=Ee.GemmUtil.getShapeOfGemmResult(Ue,Oe.transA,ze,Oe.transB,Me.length===3?Me[2].dims:void 0),Ke=[He,Ge];if(!Ke)throw new Error("Can't use gemm on the given tensors");let Xe=Ue[Ue.length-1],Je="";Oe.transA&&(Xe=Ue[0]),Oe.transA&&Oe.transB?Je="value += _A_T(a) * _B_T(b);":Oe.transA&&!Oe.transB?Je="value += _A_T(a) * _B(b);":!Oe.transA&&Oe.transB?Je="value += _A(a) * _B_T(b);":Oe.transA||Oe.transB||(Je="value += _A(a) * _B(b);");const un=Ke.length,fn=`
      float process(int indices[${un}]) {
          int a[${un}];
          int b[${un}];
          ${Me.length===3?`int c[${Me[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${Me.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${Xe}; ++k) {
              a[${un-1}] = k;
              b[${un-2}] = k;
              ${Je}
          }

          value = value * alpha;
          ${Me.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},Be),{output:{dims:Ke,type:Me[0].type,textureType:Re.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:Oe.alpha},{name:"beta",type:"float",data:Oe.beta}],shaderSource:fn})},Ve=(Be,Me)=>{if(!Be)throw new Error("Input is missing");if(Me.isOptionalC&&(Be.length<2||Be.length>3))throw new Error("Invaid input shape.");if(!Me.isOptionalC&&Be.length!==3)throw new Error("Gemm requires 3 inputs");if(Be.length===3&&Be[2].dims.length!==1&&Be[2].dims.length!==2)throw new Error("Invalid input shape of C");if(Be[0].type!=="float32"&&Be[0].type!=="float64"||Be[1].type!=="float32"&&Be[1].type!=="float64"||Be.length===3&&Be[2].type!=="float32"&&Be[2].type!=="float64")throw new Error("Invalid input type.");if(Be[0].type!==Be[1].type||Be.length===3&&Be[0].type!==Be[2].type)throw new Error("Input types are mismatched")}},8555:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const Te=t(5060),Ee=t(2039),Re=t(2827);e.createPackedIm2ColProgramInfoLoader=(Ce,De,$e,Ve,Be)=>{const Me=(Oe=Be.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[Ee.TextureType.packed],cacheHint:Oe});var Oe;return Object.assign(Object.assign({},Me),{get:()=>((Ue,ze,He,Ge,Ke,Xe)=>{const Je=He.dims,un=Ge.dims,fn=Ke.length,yn=[un[1]*un[2]*un[3],Ke[2]*Ke[3]],gn=un[2]*un[3],mn=(0,Re.unpackFromChannel)(),dn=(0,Te.getGlsl)(Ue.session.backend.glContext.version);let vn="";for(let Tn=0;Tn<=1;Tn++)for(let En=0;En<=1;En++)vn+=`
            blockIndex = rc.x + ${En};
            pos = rc.y + ${Tn};

            if(blockIndex < ${yn[1]} && pos < ${yn[0]}) {
              offsetY = int(blockIndex / (${Ke[fn-1]})) * ${Xe.strides[0]} -
                ${Xe.pads[0]};
              d0 = offsetY + ${Xe.dilations[0]} * (imod(pos, ${gn}) / ${un[2]});

              if(d0 < ${Je[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${Ke[fn-1]}) * ${Xe.strides[1]} -
                  ${Xe.pads[1]};
                d1 = offsetX + ${Xe.dilations[1]} * imod(imod(pos, ${gn}), ${un[2]});

                if(d1 < ${Je[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${gn}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Tn+En}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const bn=`
      ${mn}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${vn}
          ${dn.output} = result;
      }
            `;return Object.assign(Object.assign({},ze),{output:{dims:yn,type:He.type,textureType:Ee.TextureType.packed},shaderSource:bn,hasMain:!0})})(Ce,Me,De,$e,Ve,Be)})}},3248:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const Te=t(2039);e.createIm2ColProgramInfoLoader=(Ee,Re,Ce,De,$e)=>{const Ve=(Be=$e.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[Te.TextureType.unpacked],cacheHint:Be});var Be;return Object.assign(Object.assign({},Ve),{get:()=>((Me,Oe,Ue,ze,He,Ge)=>{const Ke=Ue.dims,Xe=ze.dims,Je=He.length,un=(0,e.calculateIm2ColDims)(Ke,Xe,He,4),fn=`
        const int XC = ${Ke[1]};
        const int XH = ${Ke[2]};
        const int XW = ${Ke[3]};
        const int KH = ${Ge.kernelShape[0]};
        const int KW = ${Ge.kernelShape[1]};
        const int dilationH = ${Ge.dilations[0]};
        const int dilationW = ${Ge.dilations[1]};
        const int strideH = ${Ge.strides[0]};
        const int strideW = ${Ge.strides[1]};
        const int padH = ${Ge.pads[0]};
        const int padW = ${Ge.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${Je}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${Ke.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},Oe),{output:{dims:un,type:Ue.type,textureType:Te.TextureType.packedLastDimension},shaderSource:fn})})(0,Ve,Re,Ce,De,$e)})},e.calculateIm2ColDims=(Ee,Re,Ce,De=4)=>[Ce[0],Ce[2],Ce[3],Math.ceil(Ee[1]*Re[2]*Re[3]/De)]},6572:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const Te=t(246),Ee=t(2039);e.imageScaler=(Ve,Be,Me)=>($e(Be),[Ve.run(Ce(Ve,Be,Me),Be)]),e.parseImageScalerAttributes=Ve=>{const Be=Ve.attributes.getFloat("scale"),Me=Ve.attributes.getFloats("bias");return(0,Te.createAttributeWithCacheKey)({scale:Be,bias:Me})};const Re={name:"ImageScaler",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked]},Ce=(Ve,Be,Me)=>{const Oe=Object.assign(Object.assign({},Re),{cacheHint:Me.cacheKey});return Object.assign(Object.assign({},Oe),{get:()=>((Ue,ze,He,Ge)=>{const Ke=He[0].dims.slice(),Xe=Ke.length,Je=`
      ${De(Ge.bias.length)}
      float process(int indices[${Xe}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},ze),{output:{dims:Ke,type:He[0].type,textureType:Ee.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:Ge.bias.length,data:Ge.bias},{name:"scale",type:"float",data:Ge.scale}],shaderSource:Je})})(0,Oe,Be,Me)})},De=Ve=>{const Be=[`float getBias(float bias[${Ve}], int channel) {`];for(let Me=0;Me<Ve;++Me)Me===0?Be.push(`	if (channel == ${Me}) { return bias[${Me}]; }`):Me===Ve-1?Be.push(`	else { return bias[${Me}]; }`):Be.push(`	else if (channel == ${Me}) { return bias[${Me}]; }`);return Be.push("	}"),Be.join(`
`)},$e=Ve=>{if(!Ve||Ve.length!==1)throw new Error("ImageScaler requires 1 input.");if(Ve[0].dims.length!==4)throw new Error("Invalid input shape.");if(Ve[0].type!=="float32"&&Ve[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const Te=t(5060),Ee=t(2039);e.instanceNormalization=(Be,Me,Oe)=>{Ve(Me);const Ue=Be.run(Ce(Me[0]),Me);return[Be.run($e(Be,Me[0],Oe,Ue.dims),[Me[0],Ue,Me[1],Me[2]])]},e.parseInstanceNormalizationAttributes=Be=>Be.attributes.getFloat("epsilon",1e-5);const Re={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked]},Ce=Be=>Object.assign(Object.assign({},Re),{get:()=>((Me,Oe)=>{const Ue=Oe.dims.slice(),ze=Ue[1],He=Ue[2]*Ue[3],Ge=[Ue[0],ze],Ke=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${Ue[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${Ue[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${He});
        temp = 0.0;
        for(int a2=0; a2<${Ue[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${Ue[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${He});

        return v;
      }`;return Object.assign(Object.assign({},Me),{output:{dims:Ge,type:Oe.type,textureType:Ee.TextureType.packedLastDimension},shaderSource:Ke})})(Re,Be)}),De={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[Ee.TextureType.unpacked,Ee.TextureType.packedLastDimension,Ee.TextureType.unpacked,Ee.TextureType.unpacked]},$e=(Be,Me,Oe,Ue)=>{const ze=Object.assign(Object.assign({},De),{cacheHint:`${Oe}`});return Object.assign(Object.assign({},ze),{get:()=>((He,Ge,Ke,Xe,Je)=>{const un=(0,Te.getGlsl)(He.session.backend.glContext.version),[fn,yn]=He.calculateTextureWidthAndHeight(Je,Ee.TextureType.packedLastDimension),[gn,mn]=[fn/4,yn],dn=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${gn}, ${mn});
        return ${un.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},Ge),{output:{dims:Ke.dims,type:Ke.type,textureType:Ee.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:Xe}],shaderSource:dn})})(Be,ze,Me,Oe,Ue)})},Ve=Be=>{if(!Be||Be.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const Me=Be[0],Oe=Be[1],Ue=Be[2];if(Me.dims.length<3||Oe.dims.length!==1||Ue.dims.length!==1)throw new Error("Invalid input shape.");if(Oe.dims[0]!==Me.dims[1]||Ue.dims[0]!==Me.dims[1])throw new Error("Input shapes are mismatched.");if(Me.type!=="float32"&&Me.type!=="float64"||Oe.type!=="float32"&&Oe.type!=="float64"||Ue.type!=="float32"&&Ue.type!=="float64")throw new Error("Invalid input type.");if(Be[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const Te=t(2517),Ee=t(5060),Re=t(2039),Ce=t(9390),De=t(2823),$e=t(5623);e.createPackedMatmulProgramInfoLoader=(Ve,Be,Me)=>{const Oe=(Ue=Be.length>2,ze=Me.activationCacheKey,{name:"MatMul (packed)",inputNames:Ue?["A","B","Bias"]:["A","B"],inputTypes:Ue?[Re.TextureType.packed,Re.TextureType.packed,Re.TextureType.packed]:[Re.TextureType.packed,Re.TextureType.packed],cacheHint:ze});var Ue,ze;return Object.assign(Object.assign({},Oe),{get:()=>((He,Ge,Ke,Xe)=>{const Je=Ke.length>2,un=Je?"value += getBiasForMatmul();":"",fn=Ke[0].dims,yn=Ke[1].dims,gn=Te.BroadcastUtil.calcShape(fn,yn,!0),mn=!Te.ShapeUtil.areEqual(Ke[0].dims,Ke[1].dims);if(!gn)throw new Error("Can't use matmul on the given tensors");const dn=fn[fn.length-1],vn=Math.ceil(dn/2),bn=fn.length,Tn=yn.length,En=(0,Ee.getGlsl)(He.session.backend.glContext.version),In=(0,Ce.getCoordsDataType)(gn.length),Nn=gn.length,On=(0,Ce.getGlChannels)(),{activationFunction:Fn,applyActivation:$n}=(0,De.getActivationSnippet)(Xe),Hn=Je?`${(0,$e.getBiasForMatmul)(In,On,Ke[2].dims,gn,!0)}`:"",Dn=mn?`${function(Yn,Jn,sr,lr){let mr=[],gr=[];const Er=sr[0].dims,$r=sr[1].dims,Yr=Er.length,Gr=$r.length,Tr=lr.length,rr=Tr-Yr,Ni=Tr-Gr;mr=Er.map((gi,mi)=>`coords.${Jn[mi+rr]}`),mr[Yr-1]="i*2",mr.join(", "),gr=$r.map((gi,mi)=>`coords.${Jn[mi+Ni]}`),gr[Gr-2]="i*2",gr.join(", ");const Ai=Te.BroadcastUtil.getBroadcastDims(Er,lr),bi=Te.BroadcastUtil.getBroadcastDims($r,lr),Wr=Ai.map(gi=>`coords.${Jn[gi+rr]} = 0;`).join(`
`),hi=bi.map(gi=>`coords.${Jn[gi+Ni]} = 0;`).join(`
`),ei=`int lastDim = coords.${Jn[Tr-1]};
  coords.${Jn[Tr-1]} = coords.${Jn[Tr-2]};
  coords.${Jn[Tr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Yn} coords = getOutputCoords();
  ${ei}
  ${Wr}
  vec4 outputValue = getA(${mr});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Yn} coords = getOutputCoords();
  ${ei}
  ${hi}
  vec4 outputValue = getB(${gr});
  return outputValue;
}`}(In,On,Ke,gn)}`:"",Un=mn?"getAAtOutCoordsMatmul(i)":`getA(${function(Yn,Jn){let sr="";for(let lr=0;lr<Jn-2;lr++)sr+=`rc.${Yn[lr]}, `;return sr+=`rc.${Yn[Jn-2]}, i*2`,sr}(On,bn)})`,Cn=mn?"getBAtOutCoordsMatmul(i)":`getB(${function(Yn,Jn){let sr="";for(let lr=0;lr<Jn-2;lr++)sr+=`rc.${Yn[lr]}, `;return sr+=`i*2, rc.${Yn[Jn-1]}`,sr}(On,Tn)})`,kn=`
            ${Dn}
            ${Hn}
            ${Fn}
            void main() {
              ${mn?"":`${In} rc =
          getOutputCoords(); int lastDim = rc.${On[Nn-1]}; rc.${On[Nn-1]} =
          rc.${On[Nn-2]}; rc.${On[Nn-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${vn}; i++) {
                vec4 a = ${Un};
                vec4 b = ${Cn};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${un}
              ${$n}
              ${En.output} = value;
            }`;return Object.assign(Object.assign({},Ge),{output:{dims:gn,type:Ke[0].type,textureType:Re.TextureType.packed},shaderSource:kn,hasMain:!0})})(Ve,Oe,Be,Me)})}},5623:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const Te=t(2517),Ee=t(2039),Re=t(9390),Ce=t(2823),De=t(708);function $e(Me,Oe){const Ue=(ze=Me.length>2,He=Oe.activationCacheKey,{name:"MatMul",inputNames:ze?["A","B","Bias"]:["A","B"],inputTypes:ze?[Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked]:[Ee.TextureType.unpacked,Ee.TextureType.unpacked],cacheHint:He});var ze,He;return Object.assign(Object.assign({},Ue),{get:()=>function(Ge,Ke,Xe){const Je=Ke[0].dims,un=Ke[1].dims,fn=Te.BroadcastUtil.calcShape(Je,un,!0);if(!fn)throw new Error("Can't use matmul on the given tensors");const yn=(0,Re.getCoordsDataType)(fn.length),gn=(0,Re.getGlChannels)(),{activationFunction:mn,applyActivation:dn}=(0,Ce.getActivationSnippet)(Xe),vn=Ke.length>2,bn=vn?"value += getBiasForMatmul();":"",Tn=vn?`${Be(yn,gn,Ke[2].dims,fn,!1)}`:"",En=fn.length,In=Je.length,Nn=un.length,On=`
    ${mn}
    ${Tn}
    float process(int indices[${En}]) {
        int a[${In}];
        int b[${Nn}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${Je[Je.length-1]}; ++k) {
            a[${In-1}] = k;
            b[${Nn-2}] = k;
            value += _A(a) * _B(b);
        }
        ${bn}
        ${dn}
        return value;
    }`;return Object.assign(Object.assign({},Ge),{output:{dims:fn,type:Ke[0].type,textureType:Ee.TextureType.unpacked},shaderSource:On})}(Ue,Me,Oe)})}e.matMul=(Me,Oe,Ue)=>(Ve(Oe),Me.session.pack?[Me.run((0,De.createPackedMatmulProgramInfoLoader)(Me,Oe,Ue),Oe)]:[Me.run($e(Oe,Ue),Oe)]),e.parseMatMulAttributes=Me=>(0,Ce.parseInternalActivationAttributes)(Me.attributes),e.createMatmulProgramInfoLoader=$e;const Ve=Me=>{if(!Me||Me.length!==2)throw new Error("MatMul requires 2 inputs.");if(Me[0].dims[Me[0].dims.length-1]!==Me[1].dims[Me[1].dims.length-2])throw new Error("shared dimension does not match.");if(Me[0].type!=="float32"&&Me[0].type!=="float64"||Me[1].type!=="float32"&&Me[1].type!=="float64")throw new Error("inputs should be float type");if(Me[0].type!==Me[1].type)throw new Error("inputs types should match")};function Be(Me,Oe,Ue,ze,He){let Ge="";const Ke=Ue.length,Xe=ze.length,Je=Xe-Ke;Ge=Xe<2&&Ke>0?"coords":Ue.map((yn,gn)=>`coords.${Oe[gn+Je]}`).join(", ");const un=Te.BroadcastUtil.getBroadcastDims(Ue,ze).map(yn=>`coords.${Oe[yn+Je]} = 0;`).join(`
`);let fn="vec4(outputValue.xx, outputValue.yy)";return Te.ShapeUtil.size(Ue)===1&&(fn="vec4(outputValue.x)"),He?`
vec4 getBiasForMatmul() {
  ${Me} coords = getOutputCoords();
  ${un}
  vec4 outputValue = getBias(${Ge});
  return ${fn};
}`:`
float getBiasForMatmul() {
  ${Me} coords = getOutputCoords();
  ${un}
  return getBias(coords.x);
}`}e.getBiasForMatmul=Be},2403:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const Te=t(5060),Ee=t(2039),Re=t(9390),Ce=t(2827),De={name:"pack",inputNames:["A"],inputTypes:[Ee.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=($e,Ve)=>Object.assign(Object.assign({},De),{get:()=>((Be,Me)=>{const Oe=(0,Te.getGlsl)(Be.session.backend.glContext.version),Ue=Me.dims,ze=Ue.length,He=Me.dims.length,Ge=(0,Re.getCoordsDataType)(He),Ke=(0,Ce.getChannels)("rc",He),Xe=(Je=He,un=Ke,fn=Ue[Ue.length-2],yn=Ue[Ue.length-1],Je===0||Je===1?"":`
    int r = ${un[Je-2]};
    int c = ${un[Je-1]};
    int rp1 = ${un[Je-2]} + 1;
    int cp1 = ${un[Je-1]} + 1;
    bool rEdge = rp1 >= ${yn};
    bool cEdge = cp1 >= ${fn};
    `);var Je,un,fn,yn;let gn;gn=ze===0?[1,1]:ze===1?[Ue[0],1]:[Ue[He-1],Ue[He-2]];const mn=function(bn,Tn,En){if(bn===0)return"false";if(bn===1)return`rc > ${Tn[0]}`;let In="";for(let Nn=bn-2;Nn<bn;Nn++)In+=`${En[Nn]} >= ${Tn[Nn-bn+2]}`,Nn<bn-1&&(In+="||");return In}(He,gn,Ke),dn=function(bn,Tn){const En=bn.length;if(En===0)return"getA(), 0, 0, 0";if(En===1)return`getA(rc),
            rc + 1 >= ${bn[0]} ? 0. : getA(rc + 1),
            0, 0`;let In="";if(En>2)for(let Nn=0;Nn<En-2;++Nn)In+=`${Tn[Nn]},`;return`getA(${In}r, c),
          rEdge ? 0. : getA(${In}rp1, c),
          cEdge ? 0. : getA(${In}r, cp1),
          rEdge || cEdge ? 0. : getA(${In}rp1, cp1)`}(Ue,Ke),vn=`
        void main() {
          ${Ge} rc = getOutputCoords();

          if(${mn}) {
            ${Oe.output} = vec4(0);
          } else {
            ${Xe}

            ${Oe.output} = vec4(${dn});
          }
        }
      `;return Object.assign(Object.assign({},De),{hasMain:!0,output:{dims:Me.dims,type:Me.type,textureType:Ee.TextureType.packed},shaderSource:vn})})($e,Ve)})},2827:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const Te=t(9390);function Ee(Re,Ce){return(0,Te.getGlChannels)(Ce).map(De=>`${Re}.${De}`)}e.getVecChannels=Ee,e.getChannels=function(Re,Ce){return Ce===1?[Re]:Ee(Re,Ce)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const Te=t(246),Ee=t(2517),Re=t(5060),Ce=t(2039),De={name:"Pad",inputNames:["A"],inputTypes:[Ce.TextureType.unpacked]};e.padV2=(Ge,Ke,Xe)=>(Be(Ke),[Ge.run(Object.assign(Object.assign({},De),{cacheHint:Xe.cacheKey,get:()=>Ve(Ge,Ke[0],Xe)}),Ke)]),e.parsePadAttributesV2=Ge=>{const Ke=Ge.attributes.getString("mode","constant"),Xe=Ge.attributes.getFloat("value",0),Je=Ge.attributes.getInts("pads");return(0,Te.createAttributeWithCacheKey)({mode:Ke,value:Xe,pads:Je})},e.padV11=(Ge,Ke,Xe)=>{Me(Ke);const Je=$e(Ge,Ke,Xe);return(0,e.padV2)(Ge,[Ke[0]],Je)},e.parsePadAttributesV11=Ge=>Ge.attributes.getString("mode","constant");const $e=(Ge,Ke,Xe)=>{if(!Ge.session.isInitializer(Ke[1].dataId)||Ke.length>=3&&!Ge.session.isInitializer(Ke[2].dataId))throw new Error("dynamic pad attributes are not allowed");const Je=Array.from(Ke[1].integerData),un=Ke.length>=3?Ke[2].floatData[0]:0;return(0,Te.createAttributeWithCacheKey)({mode:Xe,pads:Je,value:un})},Ve=(Ge,Ke,Xe)=>{const Je=Ee.ShapeUtil.padShape(Ke.dims.slice(),Xe.pads),un=Je.length,fn=`
      ${Oe(Ge,Ke,Xe)}
      float process(int[${un}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[Ce.TextureType.unpacked],output:{dims:Je,type:Ke.type,textureType:Ce.TextureType.unpacked},shaderSource:fn}},Be=Ge=>{if(!Ge||Ge.length!==1)throw new Error("Pad requires 1 input");if(Ge[0].type!=="float32"&&Ge[0].type!=="float64")throw new Error("Invalid input type.")},Me=Ge=>{if(!Ge||Ge.length!==2&&Ge.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(Ge[1].type!=="int32")throw new Error("Invalid input type.");if(Ge.length>=3&&Ge[2].type==="string")throw new Error("Invalid input type.")},Oe=(Ge,Ke,Xe)=>{const Je=(0,Re.getGlsl)(Ge.session.backend.glContext.version),[un,fn]=Ge.calculateTextureWidthAndHeight(Ke.dims,Ce.TextureType.unpacked),yn=Ee.ShapeUtil.computeStrides(Ke.dims);switch(Xe.mode){case"constant":return Ue(Je,Ke.dims,yn,un,fn,Xe.pads,Xe.value);case"reflect":return ze(Je,Ke.dims,yn,un,fn,Xe.pads);case"edge":return He(Je,Ke.dims,yn,un,fn,Xe.pads);default:throw new Error("Invalid mode")}},Ue=(Ge,Ke,Xe,Je,un,fn,yn)=>{const gn=Ke.length;let mn="";for(let dn=gn-1;dn>=0;--dn)mn+=`
        k = m[${dn}] - ${fn[dn]};
        if (k < 0)  return constant;
        if (k >= ${Ke[dn]}) return constant;
        offset += k * ${Xe[dn]};
        `;return`
      float padA(int m[${gn}]) {
        const float constant = float(${yn});
        int offset = 0;
        int k = 0;
        ${mn}
        vec2 coords = offsetToCoords(offset, ${Je}, ${un});
        float value = getColorAsFloat(${Ge.texture2D}(A, coords));
        return value;
      }
      `},ze=(Ge,Ke,Xe,Je,un,fn)=>{const yn=Ke.length;let gn="";for(let mn=yn-1;mn>=0;--mn)gn+=`
        k = m[${mn}] - ${fn[mn]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(Ke[mn]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${Ke[mn]}) { k = _2n_1 - k; }
        }
        offset += k * ${Xe[mn]};
        `;return`
      float padA(int m[${yn}]) {
        int offset = 0;
        int k = 0;
        ${gn}
        vec2 coords = offsetToCoords(offset, ${Je}, ${un});
        float value = getColorAsFloat(${Ge.texture2D}(A, coords));
        return value;
      }
      `},He=(Ge,Ke,Xe,Je,un,fn)=>{const yn=Ke.length;let gn="";for(let mn=yn-1;mn>=0;--mn)gn+=`
        k = m[${mn}] - ${fn[mn]};
        if (k < 0)  k = 0;
        if (k >= ${Ke[mn]}) k = ${Ke[mn]-1};
        offset += k * ${Xe[mn]};
      `;return`
      float padA(int m[${yn}]) {
        int offset = 0;
        int k = 0;
        ${gn}
        vec2 coords = offsetToCoords(offset, ${Je}, ${un});
        float value = getColorAsFloat(${Ge.texture2D}(A, coords));
        return value;
      }
      `}},2143:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const Te=t(246),Ee=t(2517),Re=t(2039);e.averagePool=(He,Ge,Ke)=>{Me(Ge);const Xe={name:"AveragePool",inputNames:["X"],inputTypes:[Re.TextureType.unpacked],cacheHint:Ke.cacheKey};return[He.run(Object.assign(Object.assign({},Xe),{get:()=>Ce(Ge,Xe,!1,Ke)}),Ge)]},e.parseAveragePoolAttributes=He=>{const Ge=He.attributes.getString("auto_pad","NOTSET"),Ke=He.attributes.getInt("ceil_mode",0),Xe=He.attributes.getInt("count_include_pad",0)!==0,Je=He.attributes.getInts("kernel_shape"),un=He.attributes.getInts("strides",[]),fn=He.attributes.getInts("pads",[]);if(Ke!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,Te.createAttributeWithCacheKey)({autoPad:Ge,ceilMode:Ke,countIncludePad:Xe,kernelShape:Je,strides:un,pads:fn})};const Ce=(He,Ge,Ke,Xe)=>{const[Je,un]=$e(He,Xe,Ke),fn=Ee.ShapeUtil.size(Je.kernelShape);let yn="";Je.countIncludePad?yn+=`value /= float(${fn});`:yn+=`value /= float(${fn} - pad);`;const gn=`
        ${Oe(He[0].dims,Je,"value += _X(x);",yn,"0.0")}
      `;return Object.assign(Object.assign({},Ge),{output:{dims:un,type:He[0].type,textureType:Re.TextureType.unpacked},shaderSource:gn})};e.globalAveragePool=(He,Ge,Ke)=>{Me(Ge);const Xe={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[Re.TextureType.unpacked],cacheHint:`${Ke.countIncludePad}`};return[He.run(Object.assign(Object.assign({},Xe),{get:()=>Ce(Ge,Xe,!0,Ke)}),Ge)]},e.parseGlobalAveragePoolAttributes=He=>{const Ge=He.attributes.getInt("count_include_pad",0)!==0;return(0,Te.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:Ge,kernelShape:[],strides:[],pads:[]})},e.maxPool=(He,Ge,Ke)=>{Me(Ge);const Xe={name:"MaxPool",inputNames:["X"],inputTypes:[Re.TextureType.unpacked],cacheHint:Ke.cacheKey};return[He.run(Object.assign(Object.assign({},Xe),{get:()=>De(Ge,Xe,!1,Ke)}),Ge)]},e.parseMaxPoolAttributes=He=>{const Ge=He.attributes.getString("auto_pad","NOTSET"),Ke=He.attributes.getInt("ceil_mode",0),Xe=He.attributes.getInts("kernel_shape"),Je=He.attributes.getInts("strides",[]),un=He.attributes.getInts("pads",[]),fn=He.attributes.getInt("storage_order",0),yn=He.attributes.getInts("dilations",[]);if(fn!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(Ke!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,Te.createAttributeWithCacheKey)({autoPad:Ge,ceilMode:Ke,countIncludePad:!1,kernelShape:Xe,strides:Je,pads:un,storageOrder:fn,dilations:yn})};const De=(He,Ge,Ke,Xe)=>{const[Je,un]=$e(He,Xe,Ke),fn=`
      ${Oe(He[0].dims,Je,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},Ge),{output:{dims:un,type:He[0].type,textureType:Re.TextureType.unpacked},shaderSource:fn})},$e=(He,Ge,Ke)=>{const Xe=He[0].dims.slice(),Je=Object.hasOwnProperty.call(Ge,"dilations"),un=Ge.kernelShape.slice(),fn=Ge.strides.slice(),yn=Je?Ge.dilations.slice():[],gn=Ge.pads.slice();Ee.PoolConvUtil.adjustPoolAttributes(Ke,Xe,un,fn,yn,gn);const mn=Ee.PoolConvUtil.computePoolOutputShape(Ke,Xe,fn,yn,un,gn,Ge.autoPad),dn=Object.assign({},Ge);return Je?Object.assign(dn,{kernelShape:un,strides:fn,pads:gn,dilations:yn,cacheKey:Ge.cacheKey}):Object.assign(dn,{kernelShape:un,strides:fn,pads:gn,cacheKey:Ge.cacheKey}),[dn,mn]},Ve={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Be={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[Re.TextureType.unpacked]};e.globalMaxPool=(He,Ge)=>(Me(Ge),[He.run(Object.assign(Object.assign({},Be),{get:()=>De(Ge,Be,!0,Ve)}),Ge)]);const Me=He=>{if(!He||He.length!==1)throw new Error("Pool ops requires 1 input.");if(He[0].type!=="float32"&&He[0].type!=="float64")throw new Error("Invalid input type.")},Oe=(He,Ge,Ke,Xe,Je)=>{const un=He.length;if(Ge.kernelShape.length<=2){const fn=Ge.kernelShape[Ge.kernelShape.length-1],yn=Ge.strides[Ge.strides.length-1],gn=Ge.pads[Ge.pads.length/2-1],mn=Ge.pads[Ge.pads.length-1],dn=He[un-1];let vn="",bn="",Tn="";if(vn=gn+mn!==0?`
          for (int i = 0; i < ${fn}; i++) {
            x[${un} - 1] = indices[${un} - 1] * ${yn} - ${gn} + i;
            if (x[${un} - 1] < 0 || x[${un} - 1] >= ${dn}) {
              pad++;
              continue;
            }
            ${Ke}
          }`:`
          for (int i = 0; i < ${fn}; i++) {
            x[${un} - 1] = indices[${un} - 1] * ${yn} - ${gn} + i;
            ${Ke}
          }`,Ge.kernelShape.length===2){const En=Ge.kernelShape[Ge.kernelShape.length-2],In=Ge.strides[Ge.strides.length-2],Nn=Ge.pads[Ge.pads.length/2-2],On=Ge.pads[Ge.pads.length-2],Fn=He[un-2];bn=Nn+On!==0?`
            for (int j = 0; j < ${En}; j++) {
              x[${un} - 2] = indices[${un} - 2] * ${In} - ${Nn} + j;
              if (x[${un} - 2] < 0 || x[${un} - 2] >= ${Fn}) {
                pad+= ${fn};
                continue;
              }
          `:`
            for (int j = 0; j < ${En}; j++) {
              x[${un} - 2] = indices[${un} - 2] * ${In} - ${Nn} + j;
            `,Tn=`
          }
        `}return`
        float process(int indices[${un}]) {
          int x[${un}];
          copyVec(indices, x);

          float value = ${Je};
          int pad = 0;
          ${bn}
          ${vn}
          ${Tn}
          ${Xe}
          return value;
        }
      `}{const fn=Ee.ShapeUtil.size(Ge.kernelShape),yn=Ee.ShapeUtil.computeStrides(Ge.kernelShape),gn=yn.length,mn=Ge.pads.length,dn=ze(gn),vn=Ue(He,"inputDims"),bn=Ue(Ge.pads,"pads"),Tn=Ue(yn,"kernelStrides"),En=Ue(Ge.strides,"strides");let In="";return In=Ge.pads.reduce((Nn,On)=>Nn+On)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${Ke}
          }`:`
          }
          ${Ke}
        `,`
        ${dn}
        float process(int indices[${un}]) {
          int x[${un}];
          copyVec(indices, x);
          int offset[${gn}];
          int pads[${mn}];
          int inputDims[${un}];
          int kernelStrides[${gn}];
          int strides[${gn}];
          ${bn}
          ${vn}
          ${En}
          ${Tn}

          float value = ${Je};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${fn}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${un} - ${gn}; j < ${un}; j++) {
              x[j] = indices[j] * strides[j - ${un} + ${gn}]
                + offset[j - ${un} + ${gn}] - pads[j - 2];
              ${In}
          }
          ${Xe}

          return value;
        }
      `}},Ue=(He,Ge)=>{let Ke="";for(let Xe=0;Xe<He.length;Xe++)Ke+=`
      ${Ge}[${Xe}] = ${He[Xe]};
    `;return Ke},ze=He=>`
  void offsetToIndices(int offset, int[${He}] strides, out int[${He}] indices) {
    if (${He} == 0) {
      return;
    }
    for (int i = 0; i < ${He} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${He} - 1] = offset;
  }`},4939:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const Te=t(246),Ee=t(782),Re=t(2517),Ce=t(2039),De=(Be,Me,Oe,Ue,ze)=>{Ve(Me);const He={name:Ue,inputNames:["A"],inputTypes:[Ce.TextureType.unpacked]};return[Be.run(Object.assign(Object.assign({},He),{cacheHint:Oe.cacheKey,get:()=>$e(Be,Me,Oe,Ue,ze,He)}),Me)]};e.parseReduceAttributes=Be=>{const Me=Be.attributes.getInts("axes",[]),Oe=Be.attributes.getInt("keepdims",1)===1;return(0,Te.createAttributeWithCacheKey)({axes:Me,keepDims:Oe})};const $e=(Be,Me,Oe,Ue,ze,He)=>{const Ge=[],Ke=Me[0].dims.length||1,Xe=[],Je=Re.ShapeUtil.normalizeAxes(Oe.axes,Me[0].dims.length),un=ze(Me,Je);let fn=un[1];for(let gn=0;gn<Me[0].dims.length;gn++)Je.indexOf(gn)>=0||Je.length===0?(Oe.keepDims&&Ge.push(1),fn=`
          for(int j${gn} = 0; j${gn} < ${Me[0].dims[gn]}; j${gn}++) {
            inputIdx[${gn}] = j${gn};
            ${fn}
          }`):(Xe.push(`inputIdx[${gn}] = outputIdx[${Ge.length}];`),Ge.push(Me[0].dims[gn]));const yn=`
      float process(int outputIdx[${Ge.length||1}]) {
        float value;                 // final result
        int inputIdx[${Ke}];      // addressing input data
        ${Xe.join(`
`)}
        ${un[0]}       // init ops for reduce max/min
        ${fn}
        ${un[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},He),{output:{dims:Ge,type:Me[0].type,textureType:Ce.TextureType.unpacked},shaderSource:yn})},Ve=Be=>{if(!Be||Be.length!==1)throw new Error("Reduce op requires 1 input.");if(Ee.NUMBER_TYPES.indexOf(Be[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(Be,Me,Oe)=>De(Be,Me,Oe,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(Be,Me,Oe)=>De(Be,Me,Oe,"ReduceMean",(Ue,ze)=>{let He=1;for(let Ge=0;Ge<Ue[0].dims.length;Ge++)(ze.indexOf(Ge)>=0||ze.length===0)&&(He*=Ue[0].dims[Ge]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${He}.;`]}),e.reduceMax=(Be,Me,Oe)=>De(Be,Me,Oe,"ReduceMax",(Ue,ze)=>{const He=[];for(let Ge=0;Ge<Ue[0].dims.length;Ge++)(ze.indexOf(Ge)>=0||ze.length===0)&&He.push(`inputIdx[${Ge}] = 0;`);return[`${He.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=(Be,Me,Oe)=>De(Be,Me,Oe,"ReduceMin",(Ue,ze)=>{const He=[];for(let Ge=0;Ge<Ue[0].dims.length;Ge++)(ze.indexOf(Ge)>=0||ze.length===0)&&He.push(`inputIdx[${Ge}] = 0;`);return[`${He.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=(Be,Me,Oe)=>De(Be,Me,Oe,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(Be,Me,Oe)=>De(Be,Me,Oe,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(Be,Me,Oe)=>De(Be,Me,Oe,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const Te=t(2517),Ee=t(5060),Re=t(2039),Ce=t(2827);e.createPackedReshape3DProgramInfoLoader=(De,$e,Ve)=>{const Be=(Me=>({name:"Reshape (packed)",inputTypes:[Re.TextureType.packed],inputNames:["A"],cacheHint:`${Me}`}))(Ve);return Object.assign(Object.assign({},Be),{get:()=>((Me,Oe,Ue,ze)=>{const He=Oe.dims,Ge=ze;let Ke="";for(let un=0;un<4;un++){let fn="";switch(un){case 0:fn="outputCoords = rc;";break;case 1:fn="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:fn="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:fn="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}Ke+=`
        ${fn}
        ${un>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${un}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${un>0?"}":""}
      `}const Xe=(0,Ee.getGlsl)(Me.session.backend.glContext.version),Je=`
      ${function(un){const fn=Te.ShapeUtil.computeStrides(un),yn=["b","r","c"],gn="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${fn.map((mn,dn)=>`int ${yn[dn]} = ${gn} / ${mn}; ${dn===fn.length-1?`int ${yn[dn+1]} = ${gn} - ${yn[dn]} * ${mn}`:`index -= ${yn[dn]} * ${mn}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(He)}
      ${function(un){const fn=Te.ShapeUtil.computeStrides(un);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${fn[0]} + coords.z * ${fn[1]} + coords.y;
  }
`}(Ge)}
      ${(0,Ce.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${Ge[2]};
        int cols = ${Ge[1]};

        ${Ke}
        ${Xe.output} = result;
      }
    `;return Object.assign(Object.assign({},Ue),{output:{dims:Ge,type:Oe.type,textureType:Re.TextureType.packed},shaderSource:Je,hasMain:!0})})(De,$e,Be,Ve)})},e.processDims3D=function(De){if(De.length===0)return[1,1,1];let $e=1;for(let Ve=0;Ve<De.length-2;++Ve)$e*=De[Ve];return[$e,De.length>1?De[De.length-2]:1,De[De.length-1]]},e.isReshapeCheap=function(De,$e){let Ve=!1;return Ve=De.length===0||$e.length===0||(De.length<2||$e.length<2?De[De.length-1]===$e[$e.length-1]:De[De.length-1]===$e[$e.length-1]&&De[De.length-2]===$e[$e.length-2]),Ve}},718:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const Te=t(2517);e.reshape=(Ee,Re)=>{const Ce=Te.ShapeUtil.calculateReshapedDims(Re[0].dims,Re[1].integerData);return Ee.session.pack?[Ee.reshapePacked(Re[0],Ce)]:[Ee.reshapeUnpacked(Re[0],Ce)]}},2268:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const Te=t(5060),Ee=t(2039),Re=t(9390),Ce=t(2827),De=t(9793),$e={name:"Resize",inputNames:["A"],inputTypes:[Ee.TextureType.packed]};e.resize=(Ue,ze,He)=>((0,De.validateInputs)(ze,He),[Ue.run(Object.assign(Object.assign({},$e),{cacheHint:He.cacheKey,get:()=>Ve(Ue,ze,He)}),ze)]),e.parseResizeAttributesV10=Ue=>(0,De.parseUpsampleAttributes)(Ue,10),e.parseResizeAttributesV11=Ue=>(0,De.parseUpsampleAttributes)(Ue,11);const Ve=(Ue,ze,He)=>{const Ge=(0,Te.getGlsl)(Ue.session.backend.glContext.version),[Ke,Xe]=Be(ze,He);if(Ke.every(In=>In===1)&&He.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},$e),{output:{dims:Xe,type:ze[0].type,textureType:Ee.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${Ge.texture2D}(X, TexCoords);
                    ${Ge.output} = v;
                }`});const Je=Xe.length;if(Je<2)throw new Error(`output dimension should be at least 2, but got ${Je}`);const un=Xe[Je-2],fn=Xe[Je-1],yn=ze[0].dims;if(Je!==yn.length)throw new Error(`output dimension should match input ${yn.length}, but got ${Je}`);const gn=yn[Je-2],mn=yn[Je-1],dn=Ke[Je-2],vn=Ke[Je-1];let bn="";if(He.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${He.mode}'`);switch(He.coordinateTransformMode){case"asymmetric":bn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":bn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":bn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${fn}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${un}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${fn}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${un}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":bn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${fn}.0 - 1.0, ${un}.0 - 1.0, ${fn}.0 - 1.0,
                            ${un}.0 - 1.0);
                        vec4 original = vec4(${mn}.0 - 1.0, ${gn}.0 - 1.0, ${mn}.0 - 1.0,
                            ${gn}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${He.coordinateTransformMode}'`)}const Tn=(0,Re.getCoordsDataType)(Je),En=`
            const vec2 inputWH = vec2(${gn}.0, ${mn}.0);
            const vec4 scaleWHWH = vec4(float(${dn}), float(${vn}), float(${dn}), float(${vn}));
            ${(0,Ce.unpackFromChannel)()}
            ${bn}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Tn} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${un-1};
                bool hasNextCol = rc.z < ${fn-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${Ge.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},$e),{output:{dims:Xe,type:ze[0].type,textureType:Ee.TextureType.packed},hasMain:!0,shaderSource:En})},Be=(Ue,ze)=>{const He=Ue[0].dims;let Ge,Ke=ze.scales;if(Ke.length===0){const Je=Ue[ze.scalesInputIdx];if(Je&&Je.size!==0){if(Ue[ze.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");Ke=Me(Je,ze.mode,ze.isResize)}else{const un=Ue[ze.sizesInputIdx];if(!un||un.size===0)throw new Error("Either scales or sizes MUST be provided as input.");Ge=Array.from(un.integerData),Ke=Oe(Ge,He,ze.mode,ze.isResize)}}else if(Ue[ze.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const Xe=Ge||He.map((Je,un)=>Math.floor(Je*Ke[un]));return[Ke,Xe]},Me=(Ue,ze,He)=>{const Ge=Array.from(Ue.floatData);return(0,De.scalesValidation)(Ge,ze,He),Ge},Oe=(Ue,ze,He,Ge)=>{const Ke=ze.length,Xe=new Array(Ke);for(let Je=0,un=Ke;Je<un;Je++)if(ze[Je]===0){if(Ue[Je]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");Xe[Je]=1}else Xe[Je]=Ue[Je]/ze[Je];return(0,De.scalesValidation)(Xe,He,Ge),Xe}},8117:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const Te=t(9162);e.shape=(Re,Ce)=>(Ee(Ce),[new Te.Tensor([Ce[0].dims.length],"int32",void 0,void 0,new Int32Array(Ce[0].dims))]);const Ee=Re=>{if(!Re||Re.length!==1)throw new Error("Shape requires 1 input.")}},2278:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const Te=t(246),Ee=t(782),Re=t(2517),Ce=t(2039),De={name:"Slice",inputNames:["A"],inputTypes:[Ce.TextureType.unpacked]};e.slice=(Oe,Ue,ze)=>(Ve(Ue),[Oe.run(Object.assign(Object.assign({},De),{cacheHint:ze.cacheKey,get:()=>$e(Oe,Ue[0],ze)}),Ue)]),e.parseSliceAttributes=Oe=>{const Ue=Oe.attributes.getInts("starts"),ze=Oe.attributes.getInts("ends"),He=Oe.attributes.getInts("axes",[]);return(0,Te.createAttributeWithCacheKey)({starts:Ue,ends:ze,axes:He})};const $e=(Oe,Ue,ze)=>{const He=ze.axes.length===0?Ue.dims.slice(0).map((yn,gn)=>gn):ze.axes,Ge=Re.ShapeUtil.normalizeAxes(He,Ue.dims.length),Ke=ze.starts.map((yn,gn)=>yn>Ue.dims[Ge[gn]]-1?Ue.dims[Ge[gn]]:Re.ShapeUtil.normalizeAxis(yn,Ue.dims[Ge[gn]])),Xe=ze.ends.map((yn,gn)=>yn>Ue.dims[Ge[gn]]-1?Ue.dims[Ge[gn]]:Re.ShapeUtil.normalizeAxis(yn,Ue.dims[Ge[gn]])),Je=Ue.dims.slice(),un=[];for(let yn=0;yn<Ge.length;yn++)Je[Ge[yn]]=Xe[yn]-Ke[yn],Ke[yn]>0&&un.push(`outputIdx[${Ge[yn]}] += ${Ke[yn]};`);const fn=`
      float process(int outputIdx[${Je.length}]) {
        ${un.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},De),{output:{dims:Je,type:Ue.type,textureType:Ce.TextureType.unpacked},shaderSource:fn})},Ve=Oe=>{if(!Oe||Oe.length!==1)throw new Error("Slice requires 1 input.");if(Ee.NUMBER_TYPES.indexOf(Oe[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(Oe,Ue)=>{Me(Ue);const ze=Be(Oe,Ue);return[Oe.run(Object.assign(Object.assign({},De),{cacheHint:ze.cacheKey,get:()=>$e(Oe,Ue[0],ze)}),[Ue[0]])]};const Be=(Oe,Ue)=>{if(!Oe.session.isInitializer(Ue[1].dataId)||!Oe.session.isInitializer(Ue[2].dataId)||Ue.length>=4&&!Oe.session.isInitializer(Ue[3].dataId)||Ue.length>=5&&!Oe.session.isInitializer(Ue[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(Ue.length>=5&&Ue[4].integerData.some(Ke=>Ke!==1))throw new Error("currently non-1 steps is not supported for Slice");const ze=Array.from(Ue[1].integerData),He=Array.from(Ue[2].integerData),Ge=Ue.length>=4?Array.from(Ue[3].integerData):[];return{starts:ze,ends:He,axes:Ge,cacheKey:`${Ge};${ze};${He}`}},Me=Oe=>{if(!Oe||Oe.length<3||Oe.length>5)throw new Error("Invalid input number.");if(Oe[1].type!=="int32"||Oe[1].dims.length!==1)throw new Error("Invalid input type.");if(Oe[2].type!=="int32"||Oe[2].dims.length!==1)throw new Error("Invalid input type.");if(Oe.length>=4&&(Oe[3].type!=="int32"||Oe[3].dims.length!==1))throw new Error("Invalid input type.");if(Oe.length>=5&&(Oe[4].type!=="int32"||Oe[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const Te=t(246),Ee=t(2517),Re=t(5060),Ce=t(2039),De=t(3738),$e={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[Ce.TextureType.unpacked]},Ve={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[Ce.TextureType.unpacked,Ce.TextureType.unpacked]},Be={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[Ce.TextureType.unpacked,Ce.TextureType.unpacked,Ce.TextureType.unpacked]};e.softmax=(Ge,Ke,Xe)=>{He(Ke);const Je=Ke[0].dims.slice(),un=Ee.ShapeUtil.normalizeAxis(Xe.axis,Je.length),fn=Ee.ShapeUtil.sizeToDimension(Je,un),yn=Ee.ShapeUtil.sizeFromDimension(Je,un);return Me(Ge,Ke,Xe,fn,yn)},e.parseSoftmaxAttributes=Ge=>(0,Te.createAttributeWithCacheKey)({axis:Ge.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=Ge=>(0,Te.createAttributeWithCacheKey)({axis:Ge.attributes.getInt("axis",-1)}),e.softmaxV13=(Ge,Ke,Xe)=>{He(Ke);const Je=Ke[0].dims.slice(),un=Ee.ShapeUtil.normalizeAxis(Xe.axis,Je.length),fn=Je.length,yn=un!==fn-1,gn=[];let mn,dn=[],vn=[];yn&&(dn=Array.from({length:fn}).map((In,Nn)=>Nn),dn[un]=fn-1,dn[fn-1]=un,dn.map(In=>gn.push(Je[In])),mn=(0,Te.createAttributeWithCacheKey)({perm:dn}),vn=(0,De.transpose)(Ge,Ke,mn));const bn=yn?Ee.ShapeUtil.sizeToDimension(gn,fn-1):Ee.ShapeUtil.sizeToDimension(Je,fn-1),Tn=yn?Ee.ShapeUtil.sizeFromDimension(gn,fn-1):Ee.ShapeUtil.sizeFromDimension(Je,fn-1),En=Me(Ge,yn?vn:Ke,Xe,bn,Tn);return yn?(0,De.transpose)(Ge,En,mn):En};const Me=(Ge,Ke,Xe,Je,un)=>{const fn=Oe(Ge,Ke[0],Je,un,[Je]),yn=Ge.run(Object.assign(Object.assign({},$e),{cacheHint:Xe.cacheKey,get:()=>fn}),Ke),gn=Ue(Ge,Ke[0],Je,un,fn.output.dims,[Je]),mn=Ge.run(Object.assign(Object.assign({},Ve),{cacheHint:Xe.cacheKey,get:()=>gn}),[Ke[0],yn]),dn=ze(Ge,Ke[0],Je,un,fn.output.dims,gn.output.dims);return[Ge.run(Object.assign(Object.assign({},Be),{cacheHint:Xe.cacheKey,get:()=>dn}),[Ke[0],yn,mn])]},Oe=(Ge,Ke,Xe,Je,un)=>{const[fn,yn]=Ge.calculateTextureWidthAndHeight(Ke.dims,Ce.TextureType.unpacked),gn=un.length;if(Xe<1||Je<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(un.length!==1)throw new Error("Dimensionality of the output should be 1");if(un[0]!==Xe)throw new Error("Shape of the output should be equal to logical row count");const mn=(0,Re.getGlsl)(Ge.session.backend.glContext.version),dn=`
      float process(int[${gn}] indices) {
        int logical_row_start_offset = indices[0] * ${Je};

        float max = getColorAsFloat(${mn.texture2D}(A, offsetToCoords(logical_row_start_offset, ${fn},
        ${yn} )));
        for(int i=1; i<${Je}; ++i)
        {
          float current = getColorAsFloat(${mn.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${fn}, ${yn})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},$e),{output:{dims:un,type:Ke.type,textureType:Ce.TextureType.unpacked},shaderSource:dn})},Ue=(Ge,Ke,Xe,Je,un,fn)=>{const[yn,gn]=Ge.calculateTextureWidthAndHeight(Ke.dims,Ce.TextureType.unpacked),mn=fn.length;if(Xe<1||Je<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(fn.length!==1)throw new Error("Dimensionality of the output should be 1");if(fn[0]!==Xe)throw new Error("Shape of the output should be equal to logical row count");if(un.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(un[0]!==Xe)throw new Error("Shape of the intermediate results should be equal to logical row count");const dn=`
      float process(int[${mn}] indices) {
        int logical_row_start_offset = indices[0] * ${Je};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${Je}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,Re.getGlsl)(Ge.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${yn}, ${gn}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},Ve),{output:{dims:fn,type:Ke.type,textureType:Ce.TextureType.unpacked},shaderSource:dn})},ze=(Ge,Ke,Xe,Je,un,fn)=>{const[yn,gn]=Ge.calculateTextureWidthAndHeight(Ke.dims,Ce.TextureType.unpacked),mn=Ke.dims.length;if(Xe<1||Je<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(un.length!==1||fn.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(un[0]!==Xe||fn[0]!==Xe)throw new Error("Shape of the intermediate results should be equal to logical row count");const dn=`
      float process(int[${mn}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${yn}, ${gn});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${Je};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},Be),{output:{dims:Ke.dims,type:Ke.type,textureType:Ce.TextureType.unpacked},shaderSource:dn})},He=Ge=>{if(!Ge||Ge.length!==1)throw new Error("Softmax requires 1 input.");if(Ge[0].type!=="float32"&&Ge[0].type!=="float64")throw new Error("Invalid input type")}},5975:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const Te=t(246),Ee=t(2517),Re=t(2039),Ce={name:"Split",inputNames:["A"],inputTypes:[Re.TextureType.unpacked]};e.split=(Be,Me,Oe)=>{Ve(Me);const Ue=Ee.ShapeUtil.normalizeAxis(Oe.axis,Me[0].dims.length),ze=De(Be,Me,Ue,Oe),He=[];for(let Ge=0;Ge<ze;++Ge)He.push(Be.run(Object.assign(Object.assign({},Ce),{cacheHint:`${Oe.cacheKey};${Ge}`,get:()=>$e(Be,Me[0],Oe,Ue,Ge)}),Me));return He},e.parseSplitAttributes=Be=>{const Me=Be.attributes.getInt("axis",0),Oe=Be.attributes.getInts("split",[]),Ue=Be.outputs.length;return(0,Te.createAttributeWithCacheKey)({axis:Me,split:Oe,numOutputs:Ue})};const De=(Be,Me,Oe,Ue)=>{const[,ze]=Ee.SplitUtil.splitShape(Me[0].dims,Oe,Ue.split,Ue.numOutputs);return ze.length},$e=(Be,Me,Oe,Ue,ze)=>{const[He,Ge]=Ee.SplitUtil.splitShape(Me.dims,Ue,Oe.split,Oe.numOutputs),Ke=Ge[ze],Xe=He[ze],Je=`
      float process(int indices[${Xe.length}]) {
        indices[${Ue}] += ${Ke};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},Ce),{cacheHint:`${Oe.cacheKey}:${ze}`,output:{dims:Xe,type:Me.type,textureType:Re.TextureType.unpacked},shaderSource:Je})},Ve=Be=>{if(!Be||Be.length!==1)throw new Error("Split requires one input.");if(Be[0].type!=="int8"&&Be[0].type!=="uint8"&&Be[0].type!=="int16"&&Be[0].type!=="uint16"&&Be[0].type!=="int32"&&Be[0].type!=="uint32"&&Be[0].type!=="float32"&&Be[0].type!=="float64"&&Be[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const Te=t(2517);e.squeeze=(Ce,De,$e)=>{Ee(De);const Ve=Te.ShapeUtil.squeezeShape(De[0].dims,$e);return[Ce.reshapeUnpacked(De[0],Ve)]},e.squeezeV13=(Ce,De)=>(Re(De),(0,e.squeeze)(Ce,[De[0]],Array.from(De[1].integerData))),e.parseSqueezeAttributes=Ce=>Ce.attributes.getInts("axes");const Ee=Ce=>{if(!Ce||Ce.length!==1)throw new Error("Squeeze requires 1 input.");if(Ce[0].type==="string")throw new Error("invalid input tensor types.")},Re=Ce=>{if(!Ce||Ce.length!==2)throw new Error("Squeeze requires 2 inputs.");if(Ce[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const Te=t(5060),Ee=t(2039);e.sum=(De,$e)=>{Ce($e);const Ve={name:"Sum",inputNames:$e.map((Be,Me)=>`X${Me}`),inputTypes:new Array($e.length).fill(Ee.TextureType.unpacked)};return[De.run(Object.assign(Object.assign({},Ve),{get:()=>Re(De,$e,Ve)}),$e)]};const Re=(De,$e,Ve)=>{const Be=(0,Te.getGlsl)(De.session.backend.glContext.version),Me=$e[0].dims.slice(),Oe=`
      void main() {
        vec4 result = ${$e.map((Ue,ze)=>`${Be.texture2D}(X${ze},TexCoords)`).join(" + ")};
        ${Be.output} = result;
      }
    `;return Object.assign(Object.assign({},Ve),{output:{dims:Me,type:$e[0].type,textureType:Ee.TextureType.unpacked},hasMain:!0,shaderSource:Oe})},Ce=De=>{if(!De||De.length===0)throw new Error("Sum requires inputs.");const $e=De[0].dims.length;for(let Ve=1;Ve<De.length;Ve++){if($e!==De[Ve].dims.length)throw new Error("Input shapes are mismatched.");for(let Be=0;Be<$e;Be++)if(De[0].dims[Be]!==De[Ve].dims[Be])throw new Error("Input shapes are not matched.")}if(De[0].type!=="float32"&&De[0].type!=="float64")throw new Error("Invalid input type.");for(let Ve=1;Ve<De.length;Ve++)if(De[0].type!==De[Ve].type)throw new Error("Input types are not matched.")}},5723:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const Te=t(782),Ee=t(2039);e.tile=(De,$e)=>{Ce($e);const Ve={name:"Tile",inputNames:["A"],inputTypes:[Ee.TextureType.unpacked]};return[De.run(Object.assign(Object.assign({},Ve),{get:()=>Re(De,$e,Ve)}),$e)]};const Re=(De,$e,Ve)=>{const Be=$e[0].dims.slice(),Me=new Array(Be.length),Oe=[];for(let He=0;He<Be.length;He++)Me[He]=Be[He]*$e[1].numberData[He],Oe.push(`inputIdx[${He}] = int(mod(float(outputIdx[${He}]), ${Be[He]}.));`);const Ue=Me.length,ze=`
      float process(int outputIdx[${Ue}]) {
        int inputIdx[${Ue}];
        ${Oe.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},Ve),{output:{dims:Me,type:$e[0].type,textureType:Ee.TextureType.unpacked},shaderSource:ze})},Ce=De=>{if(!De||De.length!==2)throw new Error("Tile requires 2 input.");if(De[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(De[1].dims[0]!==De[0].dims.length)throw new Error("Invalid input shape.");if(Te.NUMBER_TYPES.indexOf(De[0].type)===-1)throw new Error("Invalid input type.");if(De[1].type!=="int32"&&De[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const Te=t(246),Ee=t(2517),Re=t(2039),Ce={name:"Transpose",inputNames:["A"],inputTypes:[Re.TextureType.unpacked]};e.transpose=(Oe,Ue,ze)=>(Me(Ue),[Oe.run(Object.assign(Object.assign({},Ce),{cacheHint:ze.cacheKey,get:()=>De(Oe,Ue[0],ze.perm)}),Ue)]),e.parseTransposeAttributes=Oe=>(0,Te.createAttributeWithCacheKey)({perm:Oe.attributes.getInts("perm",[])});const De=(Oe,Ue,ze)=>{const He=Ue.dims;ze=$e(He,ze);const Ge=Ve(He,ze),Ke=He.length,Xe=`
      ${Be("perm",ze,Ke)}
      float process(int indices[${Ke}]) {
        int a[${Ke}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},Ce),{output:{dims:Ge,type:Ue.type,textureType:Re.TextureType.unpacked},shaderSource:Xe})},$e=(Oe,Ue)=>(Ue&&Ue.length!==Oe.length&&(Ue=[...Oe.keys()].reverse()),Ue),Ve=(Oe,Ue)=>(Ue=$e(Oe,Ue),Ee.ShapeUtil.sortBasedOnPerm(Oe,Ue)),Be=(Oe,Ue,ze)=>{const He=[];He.push(`void ${Oe}(out int a[${ze}], int src[${ze}]) {`);for(let Ge=0;Ge<ze;++Ge)He.push(`	a[${Ue[Ge]}]=src[${Ge}];`);return He.push("	}"),He.join(`
`)},Me=Oe=>{if(!Oe||Oe.length!==1)throw new Error("Transpose requires 1 input.");if(Oe[0].type!=="float32"&&Oe[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const Te=t(5060),Ee=t(2039);e.encodeAsUint8=(Re,Ce)=>{const De=Ce.shape,$e=(0,Te.getGlsl)(Re.session.backend.glContext.version),Ve=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${$e.texture2D}(X,TexCoords).r;
      ${$e.output} = encodeAsUint8(value);
    }`,Be={name:"Uint8Encode",inputTypes:[Ee.TextureType.unpacked],inputNames:["X"],output:{dims:De,type:Ce.tensor.type,textureType:Ee.TextureType.downloadUint8AsFloat},shaderSource:Ve,hasMain:!0};return Re.executeProgram(Be,[Ce.tensor])}},4909:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const Te=t(246),Ee=t(2517),Re=t(8520),Ce=t(5060),De=t(2039);function $e(){return En("abs")}function Ve(){return En("acos")}function Be(){return En("asin")}function Me(){return En("atan")}function Oe(){return En("ceil")}function Ue(){return En("cos")}function ze(On){return{body:`
  const float alpha = float(${On});

  float elu_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 elu_(vec4 v) {
    return vec4(elu_(v.x), elu_(v.y), elu_(v.z), elu_(v.w));
  }
  `,name:"elu",type:Re.FunctionType.ValueBased}}function He(){return En("exp")}function Ge(){return En("floor")}function Ke(On,Fn){const $n="clip";return{body:`
  const float min = float(${On});
  const float max = float(${Fn});

  float ${$n}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${$n}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:$n,type:Re.FunctionType.ValueBased}}function Xe(){const On="indentity";return{body:`
  float ${On}_(float a) {
    return a;
  }
  vec4 ${On}_(vec4 v) {
    return v;
  }
  `,name:On,type:Re.FunctionType.ValueBased}}function Je(On){const Fn="leakyRelu";return{body:`
  const float alpha = float(${On});

  float ${Fn}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Fn}_(vec4 v) {
    return vec4(${Fn}_(v.x), ${Fn}_(v.y), ${Fn}_(v.z), ${Fn}_(v.w));
  }
  `,name:Fn,type:Re.FunctionType.ValueBased}}function un(){return En("log")}function fn(){return{body:`
  float neg_(float a) {
    return -a;
  }
  vec4 neg_(vec4 v) {
    return -v;
  }
  `,name:"neg",type:Re.FunctionType.ValueBased}}function yn(){return{body:`
  float not_(float a) {
    return float( ! bool(a) );
  }
  bool not_(bool a) {
    return !a;
  }
  vec4 not_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 not_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:"not",type:Re.FunctionType.ValueBased}}function gn(){return En("sin")}function mn(){const On="relu";return{body:`
  float ${On}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${On}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:On,type:Re.FunctionType.ValueBased}}function dn(){const On="sigmoid";return{body:`
  float ${On}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${On}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:On,type:Re.FunctionType.ValueBased}}function vn(){return En("sqrt")}function bn(){return En("tan")}function Tn(){const On="tanh";return{body:`
  float ${On}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${On}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:On,type:Re.FunctionType.ValueBased}}function En(On){return{body:`
  float ${On}_(float a) {
    return ${On}(a);
  }
  vec4 ${On}_(vec4 v) {
    return ${On}(v);
  }
  `,name:On,type:Re.FunctionType.ValueBased}}e.glslAbs=$e,e.glslAcos=Ve,e.glslAsin=Be,e.glslAtan=Me,e.glslCeil=Oe,e.glslCos=Ue,e.glslElu=ze,e.glslExp=He,e.glslFloor=Ge,e.glslClip=Ke,e.glslIdentity=Xe,e.glslLeakyRelu=Je,e.glslLog=un,e.glslNeg=fn,e.glslNot=yn,e.glslSin=gn,e.glslRelu=mn,e.glslSigmoid=dn,e.glslSqrt=vn,e.glslTan=bn,e.glslTanh=Tn;const In=(On,Fn,$n,Hn)=>{const Dn=On.session.pack?De.TextureType.packed:De.TextureType.unpacked,Un={name:$n.name,inputTypes:[Dn],inputNames:["A"],cacheHint:Hn};return Object.assign(Object.assign({},Un),{get:()=>((Cn,kn,Yn,Jn)=>{const sr=Cn.session.pack?De.TextureType.packed:De.TextureType.unpacked,lr=(0,Ce.getGlsl)(Cn.session.backend.glContext.version);return Object.assign(Object.assign({},kn),{output:{dims:Yn.dims,type:Yn.type,textureType:sr},shaderSource:`
     ${Jn.body}
     void main() {
       vec4 v = ${lr.texture2D}(A, TexCoords);
       v = ${Jn.name}_(v);
       ${lr.output} = v;
     }
     `,hasMain:!0})})(On,Un,Fn,$n)})};e.abs=(On,Fn)=>[On.run(In(On,Fn[0],$e()),Fn)],e.acos=(On,Fn)=>[On.run(In(On,Fn[0],Ve()),Fn)],e.asin=(On,Fn)=>[On.run(In(On,Fn[0],Be()),Fn)],e.atan=(On,Fn)=>[On.run(In(On,Fn[0],Me()),Fn)],e.clip=(On,Fn,$n)=>[On.run(In(On,Fn[0],Ke($n.min,$n.max),$n.cacheKey),Fn)],e.parseClipAttributes=On=>(0,Te.createAttributeWithCacheKey)({min:On.attributes.getFloat("min",Ee.MIN_CLIP),max:On.attributes.getFloat("max",Ee.MAX_CLIP)}),e.clipV11=(On,Fn)=>{const $n=Nn(On,Fn);return(0,e.clip)(On,[Fn[0]],$n)};const Nn=(On,Fn)=>{if(Fn.length>=3&&(!On.session.isInitializer(Fn[1].dataId)||!On.session.isInitializer(Fn[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const $n=Fn.length>=3?Fn[1].numberData[0]:Ee.MIN_CLIP,Hn=Fn.length>=3?Fn[2].numberData[0]:Ee.MAX_CLIP;return(0,Te.createAttributeWithCacheKey)({min:$n,max:Hn})};e.ceil=(On,Fn)=>[On.run(In(On,Fn[0],Oe()),Fn)],e.cos=(On,Fn)=>[On.run(In(On,Fn[0],Ue()),Fn)],e.elu=(On,Fn,$n)=>[On.run(In(On,Fn[0],ze($n.alpha),$n.cacheKey),Fn)],e.parseEluAttributes=On=>(0,Te.createAttributeWithCacheKey)({alpha:On.attributes.getFloat("alpha",1)}),e.exp=(On,Fn)=>[On.run(In(On,Fn[0],He()),Fn)],e.floor=(On,Fn)=>[On.run(In(On,Fn[0],Ge()),Fn)],e.identity=(On,Fn)=>[On.run(In(On,Fn[0],Xe()),Fn)],e.leakyRelu=(On,Fn,$n)=>[On.run(In(On,Fn[0],Je($n.alpha),$n.cacheKey),Fn)],e.parseLeakyReluAttributes=On=>(0,Te.createAttributeWithCacheKey)({alpha:On.attributes.getFloat("alpha",.01)}),e.log=(On,Fn)=>[On.run(In(On,Fn[0],un()),Fn)],e.neg=(On,Fn)=>[On.run(In(On,Fn[0],fn()),Fn)],e.not=(On,Fn)=>[On.run(In(On,Fn[0],yn()),Fn)],e.relu=(On,Fn)=>[On.run(In(On,Fn[0],mn()),Fn)],e.sigmoid=(On,Fn)=>[On.run(In(On,Fn[0],dn()),Fn)],e.sin=(On,Fn)=>[On.run(In(On,Fn[0],gn()),Fn)],e.sqrt=(On,Fn)=>[On.run(In(On,Fn[0],vn()),Fn)],e.tan=(On,Fn)=>[On.run(In(On,Fn[0],bn()),Fn)],e.tanh=(On,Fn)=>[On.run(In(On,Fn[0],Tn()),Fn)]},5611:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const Te=t(5060),Ee=t(2039),Re=t(9390),Ce=t(2827),De={name:"unpack",inputNames:["A"],inputTypes:[Ee.TextureType.packed]};e.createUnpackProgramInfo=($e,Ve)=>{const Be=Ve.dims.length,Me=(0,Ce.getChannels)("rc",Be),Oe=Me.slice(-2),Ue=(0,Re.getCoordsDataType)(Be),ze=(0,Ce.unpackFromChannel)(),He=Ve.dims.length===0?"":function(Xe,Je){if(Xe===1)return"rc";let un="";for(let fn=0;fn<Xe;fn++)un+=Je[fn],fn<Xe-1&&(un+=",");return un}(Be,Me),Ge=Be<=1?"rc":`vec2(${Oe.join(",")})`,Ke=`
    ${ze}
    void main() {
      ${Ue} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${He});

       ${(0,Te.getGlsl)($e.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${Ge}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},De),{hasMain:!0,output:{dims:Ve.dims,type:Ve.type,textureType:Ee.TextureType.unpacked},shaderSource:Ke})},e.createUnpackProgramInfoLoader=($e,Ve)=>Object.assign(Object.assign({},De),{get:()=>(0,e.createUnpackProgramInfo)($e,Ve)})},8428:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const Te=t(2517);e.unsqueeze=(Ce,De,$e)=>{Ee(De);const Ve=Te.ShapeUtil.unsqueezeShape(De[0].dims,$e);return[Ce.reshapeUnpacked(De[0],Ve)]},e.unsqueezeV13=(Ce,De)=>(Re(De),(0,e.unsqueeze)(Ce,[De[0]],Array.from(De[1].integerData))),e.parseUnsqueezeAttributes=Ce=>Ce.attributes.getInts("axes");const Ee=Ce=>{if(!Ce||Ce.length!==1)throw new Error("Unsqueeze requires 1 input.");if(Ce[0].type==="string")throw new Error("invalid input tensor types.")},Re=Ce=>{if(!Ce||Ce.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(Ce[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const Te=t(246),Ee=t(5060),Re=t(2039),Ce={name:"Upsample",inputNames:["X"],inputTypes:[Re.TextureType.unpacked]};e.upsample=($e,Ve,Be)=>((0,e.validateInputs)(Ve,Be),[$e.run(Object.assign(Object.assign({},Ce),{cacheHint:Be.cacheKey,get:()=>De($e,Ve,Be)}),Ve)]),e.parseUpsampleAttributesV7=$e=>(0,e.parseUpsampleAttributes)($e,7),e.parseUpsampleAttributesV9=$e=>(0,e.parseUpsampleAttributes)($e,9),e.parseUpsampleAttributes=($e,Ve)=>{const Be=Ve>=10,Me=$e.attributes.getString("mode","nearest");if(Me!=="nearest"&&Me!=="linear"&&(Ve<11||Me!=="cubic"))throw new Error(`unrecognized mode: ${Me}`);let Oe=[];Ve<9&&(Oe=$e.attributes.getFloats("scales"),(0,e.scalesValidation)(Oe,Me,Be));const Ue=$e.attributes.getFloat("extrapolation_value",0),ze=Ve>10?$e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(ze)===-1)throw new Error(`coordinate_transform_mode '${ze}' is not supported`);const He=ze==="tf_crop_and_resize",Ge=He,Ke=Me==="nearest"&&Ve>=11?$e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(Ke)===-1)throw new Error(`nearest_mode '${Ke}' is not supported`);const Xe=$e.attributes.getFloat("cubic_coeff_a",-.75),Je=$e.attributes.getInt("exclude_outside",0)!==0;if(Je&&Me!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const un=Ve<11||Me==="nearest"&&ze==="asymmetric"&&Ke==="floor";let fn=0,yn=0,gn=0;return Ve>10?$e.inputs.length>2?(fn=1,yn=2,gn=3):(yn=1,gn=2):Ve===9&&(yn=1),(0,Te.createAttributeWithCacheKey)({opset:Ve,isResize:Be,mode:Me,scales:Oe,extrapolationValue:Ue,coordinateTransformMode:ze,useExtrapolation:Ge,needRoiInput:He,nearestMode:Ke,cubicCoefficientA:Xe,excludeOutside:Je,useNearest2xOptimization:un,roiInputIdx:fn,scalesInputIdx:yn,sizesInputIdx:gn})};const De=($e,Ve,Be)=>{const Me=(0,Ee.getGlsl)($e.session.backend.glContext.version),[Oe,Ue]=$e.calculateTextureWidthAndHeight(Ve[0].dims,Re.TextureType.unpacked),ze=Ve[0].dims.map((gn,mn)=>Math.floor(gn*Be.scales[mn])),[He,Ge]=$e.calculateTextureWidthAndHeight(ze,Re.TextureType.unpacked),Ke=ze.length,Xe=new Array(Ke),Je=new Array(Ke);let un=`
      int output_pitches[${Ke}];
      int input_pitches[${Ke}];
      `;for(let gn=Ke-1;gn>=0;gn--)Xe[gn]=gn===Ke-1?1:Xe[gn+1]*ze[gn+1],Je[gn]=gn===Ke-1?1:Je[gn+1]*Ve[0].dims[gn+1],un+=`
        output_pitches[${gn}] = ${Xe[gn]};
        input_pitches[${gn}] = ${Je[gn]};
        `;const fn=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${Oe}, ${Ue});
        float value = getColorAsFloat(${Me.texture2D}(X, coords));
        return value;
      }
      `,yn=Be.mode==="nearest"?`
    ${fn}
    float process(int indices[${Ke}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${He}, ${Ge});

      ${un}

      int d, m;
      for (int dim = 0; dim < ${Ke}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:Ke===4?`
    ${fn}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${He}, ${Ge});

      ${un}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${Ve[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${fn}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${He}, ${Ge});

      ${un}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${Ve[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},Ce),{output:{dims:ze,type:Ve[0].type,textureType:Re.TextureType.unpacked},shaderSource:yn,variables:[{name:"scales",type:"int",arrayLength:Be.scales.length,data:Be.scales.map(gn=>Math.ceil(gn))}]})};e.validateInputs=($e,Ve)=>{if(!$e||Ve.opset<9&&$e.length!==1||Ve.opset>=9&&Ve.opset<11&&$e.length!==2||Ve.opset>=11&&$e.length<2)throw new Error("invalid inputs.");if(Ve.scales.length>0&&$e[0].dims.length!==Ve.scales.length)throw new Error("Invalid input shape.");if($e[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=($e,Ve,Be)=>{if(Be){for(const Me of $e)if(Me<=0)throw new Error("Scale value should be greater than 0.")}else for(const Me of $e)if(Me<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(Ve!=="linear"&&Ve!=="cubic"||$e.length===2||$e.length===4&&$e[0]===1&&$e[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${Be?"Resize":"Upsample"} opeartor.`)}},1958:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const Te=t(1670),Ee=t(6231),Re=t(8879),Ce=t(5060);e.ProgramManager=class{constructor(De,$e,Ve){this.profiler=De,this.glContext=$e,this.textureLayoutStrategy=Ve,this.repo=new Map,this.attributesBound=!1}getArtifact(De){return this.repo.get(De)}setArtifact(De,$e){this.repo.set(De,$e)}run(De,$e,Ve){var Be;this.profiler.event("op",`ProgramManager.run ${(Be=De.programInfo.name)!==null&&Be!==void 0?Be:"unknown kernel"}`,()=>{var Me;const Oe=this.glContext.gl,Ue=De.program;Oe.useProgram(Ue);try{this.bindOutput(Ve),this.attributesBound||this.bindAttributes(De.attribLocations),this.bindUniforms(De.uniformLocations,(Me=De.programInfo.variables)!==null&&Me!==void 0?Me:[],$e)}catch(ze){throw Ee.Logger.error("ProgramManager",De.programInfo.shaderSource),ze}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(De=>this.glContext.deleteProgram(De.program))}build(De,$e,Ve){return this.profiler.event("backend","ProgramManager.build",()=>{const Be=new Re.GlslPreprocessor(this.glContext,De,$e,Ve),Me=Be.preprocess(),Oe=this.compile(Me);return{programInfo:De,program:Oe,uniformLocations:this.getUniformLocations(Oe,Be.context.programInfo.inputNames,Be.context.programInfo.variables),attribLocations:this.getAttribLocations(Oe)}})}compile(De){if(!this.vertexShader){Ee.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const Be=(0,Ce.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(Be,this.glContext.gl.VERTEX_SHADER)}Te.env.debug&&Ee.Logger.verbose("ProrgramManager",`FragShader:
${De}
`);const $e=this.glContext.compileShader(De,this.glContext.gl.FRAGMENT_SHADER),Ve=this.glContext.createProgram(this.vertexShader,$e);return this.glContext.deleteShader($e),Ve}bindOutput(De){const $e=De.width,Ve=De.height;Ee.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${$e}/${Ve}, shape=${De.shape}, type=${De.tensor.type}`),this.glContext.attachFramebuffer(De.texture,$e,Ve)}bindAttributes(De){const $e=De.position,Ve=De.textureCoord;this.glContext.setVertexAttributes($e,Ve),this.attributesBound=!0}bindUniforms(De,$e,Ve){var Be;const Me=this.glContext.gl;let Oe=0;for(const{name:Ue,type:ze,location:He,arrayLength:Ge}of De){const Ke=(Be=$e.find(Xe=>Xe.name===Ue))===null||Be===void 0?void 0:Be.data;if(ze!=="sampler2D"&&!Ke)throw new Error(`variable '${Ue}' does not have data defined in program info`);switch(ze){case"sampler2D":this.bindTexture(Ve[Oe],He,Oe),Oe++;break;case"float":Ge?Me.uniform1fv(He,Ke):Me.uniform1f(He,Ke);break;case"int":Ge?Me.uniform1iv(He,Ke):Me.uniform1i(He,Ke);break;default:throw new Error(`Uniform not implemented: ${ze}`)}}}bindTexture(De,$e,Ve){this.glContext.bindTextureToUniform(De.texture,Ve,$e)}getAttribLocations(De){return{position:this.getAttribLocation(De,"position"),textureCoord:this.getAttribLocation(De,"textureCoord")}}getUniformLocations(De,$e,Ve){const Be=[];if($e)for(const Me of $e)Be.push({name:Me,type:"sampler2D",location:this.getUniformLocation(De,Me)});if(Ve)for(const Me of Ve)Be.push(Object.assign(Object.assign({},Me),{location:this.getUniformLocation(De,Me.name)}));return Be}getUniformLocation(De,$e){const Ve=this.glContext.gl.getUniformLocation(De,$e);if(Ve===null)throw new Error(`Uniform ${$e} not found.`);return Ve}getAttribLocation(De,$e){return this.glContext.gl.getAttribLocation(De,$e)}}},6416:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const Te=t(6231),Ee=t(1047),Re=t(8316),Ce=t(1640),De=t(1958),$e=t(7859),Ve=t(5702);e.WebGLSessionHandler=class{constructor(Be,Me){this.backend=Be,this.context=Me,this.layoutStrategy=new $e.PreferLogicalStrategy(Be.glContext.maxTextureSize),this.programManager=new De.ProgramManager(this.context.profiler,Be.glContext,this.layoutStrategy),this.textureManager=new Ve.TextureManager(Be.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:Be.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=Be.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Re.WebGLInferenceHandler(this)}onGraphInitialized(Be){const Me=Be.getValues().filter(Oe=>Oe.from===-1&&Oe.tensor).map(Oe=>Oe.tensor.dataId);this.initializers=new Set(Me)}isInitializer(Be){return!!this.initializers&&this.initializers.has(Be)}addInitializer(Be){this.initializers.add(Be)}getTextureData(Be,Me){return Me?this.packedTextureDataCache.get(Be):this.unpackedTextureDataCache.get(Be)}setTextureData(Be,Me,Oe=!1){Te.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),Oe?this.packedTextureDataCache.set(Be,Me):this.unpackedTextureDataCache.set(Be,Me)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(Be=>this.textureManager.releaseTexture(Be,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(Be=>this.textureManager.releaseTexture(Be,!0)),this.unpackedTextureDataCache=new Map}resolve(Be,Me,Oe){const Ue=(0,Ee.resolveOperator)(Be,Me,Ce.WEBGL_OP_RESOLVE_RULES);return{impl:Ue.opImpl,context:Ue.opInit?Ue.opInit(Be,Oe):Be}}}},7769:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const Te=t(6231);e.RedFloat32DataEncoder=class{constructor(Ee,Re=1){if(Re===1)this.internalFormat=Ee.R32F,this.format=Ee.RED,this.textureType=Ee.FLOAT,this.channelSize=Re;else{if(Re!==4)throw new Error(`Invalid number of channels: ${Re}`);this.internalFormat=Ee.RGBA32F,this.format=Ee.RGBA,this.textureType=Ee.FLOAT,this.channelSize=Re}}encode(Ee,Re){let Ce,De;return Ee.constructor!==Float32Array&&(Te.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),De=new Float32Array(Ee)),Re*this.channelSize>Ee.length?(Te.Logger.warning("Encoder","Source data too small. Allocating larger array"),De=Ee,Ce=this.allocate(Re*this.channelSize),De.forEach(($e,Ve)=>Ce[Ve]=$e)):(De=Ee,Ce=De),Ce}allocate(Ee){return new Float32Array(4*Ee)}decode(Ee,Re){return this.channelSize===1?Ee.filter((Ce,De)=>De%4==0).subarray(0,Re):Ee.subarray(0,Re)}},e.RGBAFloatDataEncoder=class{constructor(Ee,Re=1,Ce){if(Re!==1&&Re!==4)throw new Error(`Invalid number of channels: ${Re}`);this.internalFormat=Ee.RGBA,this.format=Ee.RGBA,this.channelSize=Re,this.textureType=Ce||Ee.FLOAT}encode(Ee,Re){let Ce=Ee;return this.channelSize===1&&(Te.Logger.verbose("Encoder","Exploding into a larger array"),Ce=this.allocate(Re),Ee.forEach((De,$e)=>Ce[4*$e]=De)),Ce}allocate(Ee){return new Float32Array(4*Ee)}decode(Ee,Re){return this.channelSize===1?Ee.filter((Ce,De)=>De%4==0).subarray(0,Re):Ee.subarray(0,Re)}},e.Uint8DataEncoder=class{constructor(Ee,Re=1){if(this.channelSize=4,Re===1)this.internalFormat=Ee.ALPHA,this.format=Ee.ALPHA,this.textureType=Ee.UNSIGNED_BYTE,this.channelSize=Re;else{if(Re!==4)throw new Error(`Invalid number of channels: ${Re}`);this.internalFormat=Ee.RGBA,this.format=Ee.RGBA,this.textureType=Ee.UNSIGNED_BYTE,this.channelSize=Re}}encode(Ee,Re){return new Uint8Array(Ee.buffer,Ee.byteOffset,Ee.byteLength)}allocate(Ee){return new Uint8Array(Ee*this.channelSize)}decode(Ee,Re){if(Ee instanceof Uint8Array)return Ee.subarray(0,Re);throw new Error(`Invalid array type: ${Ee.constructor}`)}}},7859:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const Te=t(6231),Ee=t(2517);function Re(Be,Me){const Oe=[],Ue=[],ze=Me!=null&&Array.isArray(Me)&&Me.length===0,He=Me==null||ze?null:Ce(Me,Be).sort();let Ge=0;for(let Ke=0;Ke<Be.length;++Ke){if(He!=null){if(He[Ge]===Ke&&Be[Ke]!==1)throw new Error(`Can't squeeze axis ${Ke} since its dim '${Be[Ke]}' is not 1`);(He[Ge]==null||He[Ge]>Ke)&&Be[Ke]===1&&(Oe.push(Be[Ke]),Ue.push(Ke)),He[Ge]<=Ke&&Ge++}Be[Ke]!==1&&(Oe.push(Be[Ke]),Ue.push(Ke))}return{newShape:Oe,keptDims:Ue}}function Ce(Be,Me){const Oe=Me.length;return Be=Be==null?Me.map((Ue,ze)=>ze):[].concat(Be),(0,Ee.assert)(Be.every(Ue=>Ue>=-Oe&&Ue<Oe),()=>`All values in axis param must be in range [-${Oe}, ${Oe}) but got axis ${Be}`),(0,Ee.assert)(Be.every(De),()=>`All values in axis param must be integers but got axis ${Be}`),Be.map(Ue=>Ue<0?Oe+Ue:Ue)}function De(Be){return Be%1==0}function $e(Be){if(Be.length===0)return 1;let Me=Be[0];for(let Oe=1;Oe<Be.length;Oe++)Me*=Be[Oe];return Me}function Ve(Be){const Me=Math.ceil(Math.sqrt(Be));return[Me,Math.ceil(Be/Me)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(Be){this.maxTextureSize=Be}computeTextureWH(Be,Me){if(Be.length===0)return[1,1];const Oe=this.maxTextureSize;if(Me&&Me.breakAxis!==void 0){const He=Me.breakAxis>=Be.length?1:Be.slice(Me.breakAxis).reduce((Ke,Xe)=>Ke*Xe),Ge=Me.breakAxis<=0?1:Be.slice(0,Me.breakAxis).reduce((Ke,Xe)=>Ke*Xe);if(!(He>Oe||Ge>Oe))return[He,Ge];Te.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${Be}, breakAxis:${Me.breakAxis}`)}const Ue=Be.reduce((He,Ge)=>He*Ge);let ze=Math.floor(Math.sqrt(Ue));for(;ze<Oe&&ze<Ue&&Ue%ze!=0;ze++);if(ze>=Oe||Ue%ze!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${Be}`);return[ze,Ue/ze]}},e.PreferLogicalStrategy=class{constructor(Be){this.maxTextureSize=Be}computeTextureWH(Be,Me){const Oe=this.computeTexture(Be,Me);return Me&&Me.isPacked&&(Oe[0]/=2,Oe[1]/=2),Me&&Me.reverseWH?[Oe[1],Oe[0]]:Oe}computeTexture(Be,Me){const Oe=Me&&Me.isPacked;if(Be.length===0)return Oe?[2,2]:[1,1];let Ue=this.maxTextureSize;if(Me&&Me.breakAxis!==void 0){const Ge=Me.breakAxis>=Be.length?1:Be.slice(Me.breakAxis).reduce((Xe,Je)=>Xe*Je),Ke=Me.breakAxis<=0?1:Be.slice(0,Me.breakAxis).reduce((Xe,Je)=>Xe*Je);if(!(Ge>Ue||Ke>Ue))return[Ge,Ke];Te.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${Be}, breakAxis:${Me.breakAxis}`)}let ze=Be.slice(0);Oe&&(Ue*=2,ze=ze.map((Ge,Ke)=>Ke>=ze.length-2?ze[Ke]%2==0?ze[Ke]:ze[Ke]+1:ze[Ke]),ze.length===1&&(ze=[2,ze[0]])),ze.length!==2&&(ze=Re(ze).newShape);const He=$e(ze);return ze.length<=1&&He<=Ue?[1,He]:ze.length===2&&ze[0]<=Ue&&ze[1]<=Ue?ze:ze.length===3&&ze[0]*ze[1]<=Ue&&ze[2]<=Ue?[ze[0]*ze[1],ze[2]]:ze.length===3&&ze[0]<=Ue&&ze[1]*ze[2]<=Ue?[ze[0],ze[1]*ze[2]]:ze.length===4&&ze[0]*ze[1]*ze[2]<=Ue&&ze[3]<=Ue?[ze[0]*ze[1]*ze[2],ze[3]]:ze.length===4&&ze[0]<=Ue&&ze[1]*ze[2]*ze[3]<=Ue?[ze[0],ze[1]*ze[2]*ze[3]]:Oe?Ve(He/4).map(Ge=>2*Ge):Ve(He)}},e.squeezeShape=Re,e.parseAxisParam=Ce,e.isInt=De,e.sizeFromShape=$e,e.getRowsCols=function(Be){if(Be.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[Be.length>1?Be[Be.length-2]:1,Be[Be.length-1]]},e.sizeToSquarishShape=Ve,e.getBatchDim=function(Be,Me=2){return $e(Be.slice(0,Be.length-Me))}},4057:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const Te=t(2517),Ee=t(2039);e.createTextureLayoutFromTextureType=(Re,Ce,De)=>{const $e=De===Ee.TextureType.unpacked||De===Ee.TextureType.unpackedReversed?1:4,Ve=De===Ee.TextureType.packed,Be=De===Ee.TextureType.unpackedReversed||De===Ee.TextureType.packed,Me=De===Ee.TextureType.packedLastDimension?Ce.length-1:void 0,Oe=De===Ee.TextureType.packedLastDimension?Ce.map((Ue,ze)=>ze===Ce.length-1?4*Ue:Ue):void 0;return(0,e.createTextureLayoutFromShape)(Re,Ce,$e,Oe,{isPacked:Ve,reverseWH:Be,breakAxis:Me})},e.calculateTextureWidthAndHeight=(Re,Ce,De)=>{const $e=(0,e.createTextureLayoutFromTextureType)(Re,Ce,De);return[$e.width,$e.height]},e.createTextureLayoutFromShape=(Re,Ce,De=1,$e,Ve)=>{const Be=!(!Ve||!Ve.isPacked),[Me,Oe]=Re.computeTextureWH(Be&&$e||Ce,Ve),Ue=Ce.length;let ze=Ce.slice(0);if(Ue===0&&(ze=[1]),De===1)$e=Ce;else if(Be){if(De!==4)throw new Error("a packed texture must be 4-channel");$e=Ce,Ue>0&&(ze[Ue-1]=Math.ceil(ze[Ue-1]/2)),Ue>1&&(ze[Ue-2]=Math.ceil(ze[Ue-2]/2))}else if(!$e)throw new Error("Unpacked shape is needed when using channels > 1");return{width:Me,height:Oe,channels:De,isPacked:Be,shape:ze,strides:Te.ShapeUtil.computeStrides(ze),unpackedShape:$e,reversedWH:Ve&&Ve.reverseWH}}},5702:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const Te=t(6231);e.TextureManager=class{constructor(Ee,Re,Ce,De){this.glContext=Ee,this.layoutStrategy=Re,this.profiler=Ce,this.config=De,this.pendingRead=new Map,De.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(Ee,Re,Ce,De){const $e=this.toEncoderType(Ee),Ve=this.glContext.getEncoder($e,Re.channels||1,De);if(Re.isPacked&&De===1)throw new Error("not implemented");const Be=Re.width,Me=Re.height;let Oe,Ue;if(this.config.reuseTextures){Oe=`${Be}x${Me}_${Ve.format}_${Ve.internalFormat}_${Ve.textureType}`,Ue=this.inUseTextures.get(Oe),Ue||(Ue=[],this.inUseTextures.set(Oe,Ue));const He=this.idleTextures.get(Oe);if(He&&He.length>0){const Ge=He.pop();return Ue.push(Ge),De===1&&this.glContext.updateTexture(Ge,Be,Me,Ve,this.toTextureData(Ee,Ce)),Ge}}Te.Logger.verbose("TextureManager",`Creating new texture of size ${Re.width}x${Re.height}`);const ze=this.glContext.allocateTexture(Be,Me,Ve,this.toTextureData(Ee,Ce));return this.config.reuseTextures&&(Ue.push(ze),this.textureLookup.set(ze,Oe)),ze}readTexture(Ee,Re,Ce){return Ce||(Ce=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const De=Ee.shape.reduce((Ve,Be)=>Ve*Be)*Ce,$e=this.glContext.readTexture(Ee.texture,Ee.width,Ee.height,De,this.toEncoderType(Re),Ce);return this.toTensorData(Re,$e)})}async readTextureAsync(Ee,Re,Ce){const De=Ee.tensor.dataId;if(Ce||(Ce=1),this.pendingRead.has(De)){const $e=this.pendingRead.get(De);return new Promise(Ve=>$e?.push(Ve))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(De,[]);const $e=Ee.shape.reduce((Oe,Ue)=>Oe*Ue)*Ce;await this.glContext.createAndWaitForFence();const Ve=this.glContext.readTexture(Ee.texture,Ee.width,Ee.height,$e,this.toEncoderType(Re),Ce),Be=this.toTensorData(Re,Ve),Me=this.pendingRead.get(De);return this.pendingRead.delete(De),Me?.forEach(Oe=>Oe(Be)),Be})}readUint8TextureAsFloat(Ee){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const Re=Ee.shape.reduce((De,$e)=>De*$e),Ce=this.glContext.readTexture(Ee.texture,Ee.width,Ee.height,4*Re,"byte",4);return new Float32Array(Ce.buffer,Ce.byteOffset,Re)})}releaseTexture(Ee,Re){let Ce;if(this.config.reuseTextures&&(Ce=this.textureLookup.get(Ee.texture),Ce)){Re&&this.textureLookup.delete(Ce);const De=this.inUseTextures.get(Ce);if(De){const $e=De.indexOf(Ee.texture);if($e!==-1){De.splice($e,1);let Ve=this.idleTextures.get(Ce);Ve||(Ve=[],this.idleTextures.set(Ce,Ve)),Ve.push(Ee.texture)}}}Ce&&!Re||(Te.Logger.verbose("TextureManager",`Deleting texture of size ${Ee.width}x${Ee.height}`),this.glContext.deleteTexture(Ee.texture))}toTensorData(Ee,Re){switch(Ee){case"int16":return Re instanceof Int16Array?Re:Int16Array.from(Re);case"int32":return Re instanceof Int32Array?Re:Int32Array.from(Re);case"int8":return Re instanceof Int8Array?Re:Int8Array.from(Re);case"uint16":return Re instanceof Uint16Array?Re:Uint16Array.from(Re);case"uint32":return Re instanceof Uint32Array?Re:Uint32Array.from(Re);case"uint8":case"bool":return Re instanceof Uint8Array?Re:Uint8Array.from(Re);case"float32":return Re instanceof Float32Array?Re:Float32Array.from(Re);case"float64":return Re instanceof Float64Array?Re:Float64Array.from(Re);default:throw new Error(`TensorData type ${Ee} is not supported`)}}toTextureData(Ee,Re){if(Re)return Re instanceof Float32Array?Re:new Float32Array(Re)}toEncoderType(Ee){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(n,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(t=e.TextureType||(e.TextureType={}))[t.unpacked=0]="unpacked",t[t.unpackedReversed=1]="unpackedReversed",t[t.packed=2]="packed",t[t.downloadUint8AsFloat=3]="downloadUint8AsFloat",t[t.packedLastDimension=4]="packedLastDimension"},9390:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const Te=t(2517);e.getPackedShape=function(Ee){const Re=Ee.length;return Ee.slice(0,Re-1).concat(Ee[Re-1]/4)},e.repeatedTry=async function(Ee,Re=De=>0,Ce){return new Promise((De,$e)=>{let Ve=0;const Be=()=>{if(Ee())return void De();Ve++;const Me=Re(Ve);Ce!=null&&Ve>=Ce?$e():setTimeout(Be,Me)};Be()})},e.generateShaderFuncNameFromInputSamplerName=function(Ee){return(0,Te.assert)(Ee!==void 0&&Ee.length!==0,()=>"empty string found for sampler name"),"get"+Ee.charAt(0).toUpperCase()+Ee.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(Ee){return(0,Te.assert)(Ee!==void 0&&Ee.length!==0,()=>"empty string found for sampler name"),"get"+Ee.charAt(0).toUpperCase()+Ee.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(Ee,Re){let Ce=JSON.parse(JSON.stringify(Ee));return Ce=Re,Ce},e.getSqueezedParams=function(Ee,Re){return Re.map(Ce=>Ee[Ce]).join(", ")},e.getCoordsDataType=function(Ee){if(Ee<=1)return"int";if(Ee===2)return"ivec2";if(Ee===3)return"ivec3";if(Ee===4)return"ivec4";if(Ee===5)return"ivec5";if(Ee===6)return"ivec6";throw Error(`GPU for rank ${Ee} is not yet supported`)},e.getGlChannels=function(Ee=6){return["x","y","z","w","u","v"].slice(0,Ee)}},7305:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const Te=t(6231),Ee=t(1713),Re={};function Ce(De){const $e=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const Me=document.createElement("canvas");return Me.width=1,Me.height=1,Me}();let Ve;const Be={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!De||De==="webgl2")&&(Ve=$e.getContext("webgl2",Be),Ve))try{return new Ee.WebGLContext(Ve,2)}catch(Me){Te.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${Me}`)}if((!De||De==="webgl")&&(Ve=$e.getContext("webgl",Be)||$e.getContext("experimental-webgl",Be),Ve))try{return new Ee.WebGLContext(Ve,1)}catch(Me){Te.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${Me}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function De($e){let Ve;$e&&$e!=="webgl2"||!("webgl2"in Re)?$e&&$e!=="webgl"||!("webgl"in Re)||(Ve=Re.webgl):Ve=Re.webgl2,Ve=Ve||Ce($e),$e=$e||Ve.version===1?"webgl":"webgl2";const Be=Ve.gl;return Re[$e]=Ve,Be.isContextLost()?(delete Re[$e],De($e)):(Be.disable(Be.DEPTH_TEST),Be.disable(Be.STENCIL_TEST),Be.disable(Be.BLEND),Be.disable(Be.DITHER),Be.disable(Be.POLYGON_OFFSET_FILL),Be.disable(Be.SAMPLE_COVERAGE),Be.enable(Be.SCISSOR_TEST),Be.enable(Be.CULL_FACE),Be.cullFace(Be.BACK),Ve)},e.createNewWebGLContext=Ce},1713:function(n,e,t){var Te=this&&this.__createBinding||(Object.create?function(Be,Me,Oe,Ue){Ue===void 0&&(Ue=Oe);var ze=Object.getOwnPropertyDescriptor(Me,Oe);ze&&!("get"in ze?!Me.__esModule:ze.writable||ze.configurable)||(ze={enumerable:!0,get:function(){return Me[Oe]}}),Object.defineProperty(Be,Ue,ze)}:function(Be,Me,Oe,Ue){Ue===void 0&&(Ue=Oe),Be[Ue]=Me[Oe]}),Ee=this&&this.__setModuleDefault||(Object.create?function(Be,Me){Object.defineProperty(Be,"default",{enumerable:!0,value:Me})}:function(Be,Me){Be.default=Me}),Re=this&&this.__importStar||function(Be){if(Be&&Be.__esModule)return Be;var Me={};if(Be!=null)for(var Oe in Be)Oe!=="default"&&Object.prototype.hasOwnProperty.call(Be,Oe)&&Te(Me,Be,Oe);return Ee(Me,Be),Me};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const Ce=t(1670),De=Re(t(7769)),$e=t(9390);function Ve(Be){let Me=0;for(;Me<Be.length&&Be[Me]();++Me);return Me-1}e.linearSearchLastTrue=Ve,e.WebGLContext=class{constructor(Be,Me){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=Be,this.version=Me,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(Be,Me,Oe,Ue){const ze=this.gl,He=ze.createTexture();ze.bindTexture(ze.TEXTURE_2D,He),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_MIN_FILTER,ze.NEAREST),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_MAG_FILTER,ze.NEAREST),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_WRAP_S,ze.CLAMP_TO_EDGE),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_WRAP_T,ze.CLAMP_TO_EDGE);const Ge=Ue?Oe.encode(Ue,Be*Me):null;return ze.texImage2D(ze.TEXTURE_2D,0,Oe.internalFormat,Be,Me,0,Oe.format,Oe.textureType,Ge),this.checkError(),He}updateTexture(Be,Me,Oe,Ue,ze){const He=this.gl;He.bindTexture(He.TEXTURE_2D,Be);const Ge=Ue.encode(ze,Me*Oe);He.texSubImage2D(He.TEXTURE_2D,0,0,0,Me,Oe,Ue.format,Ue.textureType,Ge),this.checkError()}attachFramebuffer(Be,Me,Oe){const Ue=this.gl;Ue.bindTexture(Ue.TEXTURE_2D,Be),Ue.bindFramebuffer(Ue.FRAMEBUFFER,this.framebuffer),Ue.framebufferTexture2D(Ue.FRAMEBUFFER,Ue.COLOR_ATTACHMENT0,Ue.TEXTURE_2D,Be,0),this.checkError(),Ue.viewport(0,0,Me,Oe),Ue.scissor(0,0,Me,Oe)}readTexture(Be,Me,Oe,Ue,ze,He){const Ge=this.gl;He||(He=1),this.frameBufferBound||this.attachFramebuffer(Be,Me,Oe);const Ke=this.getEncoder(ze,He),Xe=Ke.allocate(Me*Oe);return Ge.bindTexture(Ge.TEXTURE_2D,Be),Ge.framebufferTexture2D(Ge.FRAMEBUFFER,Ge.COLOR_ATTACHMENT0,Ge.TEXTURE_2D,Be,0),Ge.readPixels(0,0,Me,Oe,Ge.RGBA,Ke.textureType,Xe),this.checkError(),Ke.decode(Xe,Ue)}isFramebufferReady(){return!0}getActiveTexture(){const Be=this.gl;return"TEXTURE"+(Be.getParameter(this.gl.ACTIVE_TEXTURE)-Be.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(Be,Me){const Oe=this.gl;Oe.vertexAttribPointer(Be,3,Oe.FLOAT,!1,20,0),Oe.enableVertexAttribArray(Be),Me!==-1&&(Oe.vertexAttribPointer(Me,2,Oe.FLOAT,!1,20,12),Oe.enableVertexAttribArray(Me)),this.checkError()}createProgram(Be,Me){const Oe=this.gl,Ue=Oe.createProgram();return Oe.attachShader(Ue,Be),Oe.attachShader(Ue,Me),Oe.linkProgram(Ue),Ue}compileShader(Be,Me){const Oe=this.gl,Ue=Oe.createShader(Me);if(!Ue)throw new Error(`createShader() returned null with type ${Me}`);if(Oe.shaderSource(Ue,Be),Oe.compileShader(Ue),Oe.getShaderParameter(Ue,Oe.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${Oe.getShaderInfoLog(Ue)}
Shader source:
${Be}`);return Ue}deleteShader(Be){this.gl.deleteShader(Be)}bindTextureToUniform(Be,Me,Oe){const Ue=this.gl;Ue.activeTexture(Ue.TEXTURE0+Me),this.checkError(),Ue.bindTexture(Ue.TEXTURE_2D,Be),this.checkError(),Ue.uniform1i(Oe,Me),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Ce.env.debug){const Be=this.gl,Me=Be.getError();let Oe="";switch(Me){case Be.NO_ERROR:return;case Be.INVALID_ENUM:Oe="INVALID_ENUM";break;case Be.INVALID_VALUE:Oe="INVALID_VALUE";break;case Be.INVALID_OPERATION:Oe="INVALID_OPERATION";break;case Be.INVALID_FRAMEBUFFER_OPERATION:Oe="INVALID_FRAMEBUFFER_OPERATION";break;case Be.OUT_OF_MEMORY:Oe="OUT_OF_MEMORY";break;case Be.CONTEXT_LOST_WEBGL:Oe="CONTEXT_LOST_WEBGL";break;default:Oe=`Unknown WebGL Error: ${Me.toString(16)}`}throw new Error(Oe)}}deleteTexture(Be){this.gl.deleteTexture(Be)}deleteProgram(Be){this.gl.deleteProgram(Be)}getEncoder(Be,Me,Oe=0){if(this.version===2)return new De.RedFloat32DataEncoder(this.gl,Me);switch(Be){case"float":return Oe===1||this.isRenderFloat32Supported?new De.RGBAFloatDataEncoder(this.gl,Me):new De.RGBAFloatDataEncoder(this.gl,Me,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new De.Uint8DataEncoder(this.gl,Me);default:throw new Error(`Invalid dataType: ${Be}`)}}clearActiveTextures(){const Be=this.gl;for(let Me=0;Me<this.maxTextureImageUnits;++Me)Be.activeTexture(Be.TEXTURE0+Me),Be.bindTexture(Be.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const Be=this.gl;Be.bindFramebuffer(Be.FRAMEBUFFER,null),Be.deleteFramebuffer(this.framebuffer),Be.bindBuffer(Be.ARRAY_BUFFER,null),Be.deleteBuffer(this.vertexbuffer),Be.bindBuffer(Be.ELEMENT_ARRAY_BUFFER,null),Be.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const Be=this.gl,Me=Be.createBuffer();if(!Me)throw new Error("createBuffer() returned null");const Oe=this.createDefaultGeometry();return Be.bindBuffer(Be.ARRAY_BUFFER,Me),Be.bufferData(Be.ARRAY_BUFFER,Oe,Be.STATIC_DRAW),this.checkError(),Me}createFramebuffer(){const Be=this.gl.createFramebuffer();if(!Be)throw new Error("createFramebuffer returned null");return Be}queryVitalParameters(){const Be=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=Be.getParameter(Be.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=Be.getParameter(Be.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const Be=this.gl,Me=Be.createTexture();Be.bindTexture(Be.TEXTURE_2D,Me);const Oe=this.version===2?Be.RGBA32F:Be.RGBA;Be.texImage2D(Be.TEXTURE_2D,0,Oe,1,1,0,Be.RGBA,Be.FLOAT,null);const Ue=Be.createFramebuffer();Be.bindFramebuffer(Be.FRAMEBUFFER,Ue),Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_2D,Me,0);const ze=Be.checkFramebufferStatus(Be.FRAMEBUFFER)===Be.FRAMEBUFFER_COMPLETE;return Be.bindTexture(Be.TEXTURE_2D,null),Be.bindFramebuffer(Be.FRAMEBUFFER,null),Be.deleteTexture(Me),Be.deleteFramebuffer(Ue),ze}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const Be=this.gl;let Me,Oe,Ue,ze,He;try{Me=Be.createTexture(),Oe=Be.createFramebuffer(),Be.bindTexture(Be.TEXTURE_2D,Me);const Ge=this.version===2?Be.RGBA32F:Be.RGBA;return Be.texImage2D(Be.TEXTURE_2D,0,Ge,1,1,0,Be.RGBA,Be.FLOAT,null),Be.bindFramebuffer(Be.FRAMEBUFFER,Oe),Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_2D,Me,0),Be.enable(Be.BLEND),Ue=Be.createShader(Be.VERTEX_SHADER),!!Ue&&(Be.shaderSource(Ue,"void main(){}"),Be.compileShader(Ue),ze=Be.createShader(Be.FRAGMENT_SHADER),!!ze&&(Be.shaderSource(ze,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),Be.compileShader(ze),He=Be.createProgram(),!!He&&(Be.attachShader(He,Ue),Be.attachShader(He,ze),Be.linkProgram(He),Be.useProgram(He),Be.drawArrays(Be.POINTS,0,1),Be.getError()===Be.NO_ERROR)))}finally{Be.disable(Be.BLEND),He&&Be.deleteProgram(He),Ue&&Be.deleteShader(Ue),ze&&Be.deleteShader(ze),Oe&&(Be.bindFramebuffer(Be.FRAMEBUFFER,null),Be.deleteFramebuffer(Oe)),Me&&(Be.bindTexture(Be.TEXTURE_2D,null),Be.deleteTexture(Me))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const Be=this.gl,Me=this.disjointTimerQueryWebgl2Extension,Oe=Be.createQuery();return Be.beginQuery(Me.TIME_ELAPSED_EXT,Oe),Oe}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const Be=this.gl,Me=this.disjointTimerQueryWebgl2Extension;Be.endQuery(Me.TIME_ELAPSED_EXT)}}isTimerResultAvailable(Be){let Me=!1,Oe=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const Ue=this.gl,ze=this.disjointTimerQueryWebgl2Extension;Me=Ue.getQueryParameter(Be,Ue.QUERY_RESULT_AVAILABLE),Oe=Ue.getParameter(ze.GPU_DISJOINT_EXT)}return Me&&!Oe}getTimerResult(Be){let Me=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const Oe=this.gl;Me=Oe.getQueryParameter(Be,Oe.QUERY_RESULT),Oe.deleteQuery(Be)}return Me/1e6}async waitForQueryAndGetTime(Be){return await(0,$e.repeatedTry)(()=>this.isTimerResultAvailable(Be)),this.getTimerResult(Be)}async createAndWaitForFence(){const Be=this.createFence(this.gl);return this.pollFence(Be)}createFence(Be){let Me;const Oe=Be,Ue=Oe.fenceSync(Oe.SYNC_GPU_COMMANDS_COMPLETE,0);return Be.flush(),Me=Ue===null?()=>!0:()=>{const ze=Oe.clientWaitSync(Ue,0,0);return ze===Oe.ALREADY_SIGNALED||ze===Oe.CONDITION_SATISFIED},{query:Ue,isFencePassed:Me}}async pollFence(Be){return new Promise(Me=>{this.addItemToPoll(()=>Be.isFencePassed(),()=>Me())})}pollItems(){const Be=Ve(this.itemsToPoll.map(Me=>Me.isDoneFn));for(let Me=0;Me<=Be;++Me){const{resolveFn:Oe}=this.itemsToPoll[Me];Oe()}this.itemsToPoll=this.itemsToPoll.slice(Be+1)}async addItemToPoll(Be,Me){this.itemsToPoll.push({isDoneFn:Be,resolveFn:Me}),this.itemsToPoll.length>1||await(0,$e.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const Te=t(6231);class Ee{constructor(Ce,De){this.op=Ce,this.node=De}}e.ExecutionPlan=class{constructor(Re,Ce,De){this.graph=Re,this.profiler=De,this.initialize(Ce)}initialize(Re){this.profiler.event("session","ExecutionPlan.initialize",()=>{const Ce=this.graph.getNodes();if(Ce.length!==Re.length)throw new Error("The size of nodes and OPs do not match.");this._ops=Re.map((De,$e)=>new Ee(De,Ce[$e])),this.reset(),this._starter=[],this._ops.forEach((De,$e)=>{let Ve=!0;for(const Be of De.node.inputs)if(!this._values[Be]&&this.graph.getInputIndices().indexOf(Be)===-1){Ve=!1;break}Ve&&this._starter.push($e)})})}reset(){this._values=this.graph.getValues().map(Re=>Re.tensor)}async execute(Re,Ce){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const De=Re.createInferenceHandler(),$e=this.graph.getInputIndices();if(Ce.length!==$e.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${Ce.length} expected: ${$e.length}`);Ce.forEach((ze,He)=>{const Ge=$e[He];this._values[Ge]=ze});const Ve=this._starter.slice(0),Be=this.graph.getValues(),Me=this.graph.getNodes();let Oe=0;for(;Oe<Ve.length;){const ze=Ve[Oe++],He=this._ops[ze],Ge=He.node.inputs.map(un=>this._values[un]);if(Ge.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${He.node}`);const Ke=Ge;Te.Logger.verbose("ExecPlan",`Runing op:${He.node.name} (${Ke.map((un,fn)=>`'${He.node.inputs[fn]}': ${un.type}[${un.dims.join(",")}]`).join(", ")})`);const Xe=await this.profiler.event("node",He.node.name,async()=>He.op.impl(De,Ke,He.op.context));if(Xe.length!==He.node.outputs.length)throw new Error("the size of output does not match model definition.");Xe.forEach((un,fn)=>{const yn=He.node.outputs[fn];if(this._values[yn])throw new Error(`output [${yn}] already has value: op:${He.node.name}`);this._values[yn]=un});const Je=new Set;Xe.forEach((un,fn)=>{const yn=He.node.outputs[fn];for(const gn of Be[yn].to){const mn=Me[gn];let dn=!0;for(const vn of mn.inputs)if(!this._values[vn]){dn=!1;break}dn&&Je.add(gn)}}),Ve.push(...Je)}const Ue=[];for(let ze=0;ze<this.graph.getOutputIndices().length;ze++){const He=this.graph.getOutputIndices()[ze],Ge=this._values[He];if(Ge===void 0)throw new Error(`required output [${He}] does not have value`);He===0?await Ge.getData():Ge.data,Ue.push(Ge)}return Te.Logger.verbose("ExecPlan","disposing of inferenceHandler"),De.dispose(),Ue})}}},7070:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const Te=t(1446),Ee=t(7778),Re=t(9395),Ce=t(9162),De=t(2517);var $e=Re.onnxruntime.experimental.fbs;e.Graph={from:(Oe,Ue)=>new Me(Oe,Ue)};class Ve{constructor(Ue){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,Ue&&(this.type=De.ProtoUtil.tensorValueTypeFromProto(Ue.type.tensorType))}get from(){return this._from}get to(){return this._to}}class Be{constructor(Ue,ze){Ue instanceof Te.onnx.NodeProto?(this.name=Ue.name,this.opType=Ue.opType,this.attributes=new Ee.Attribute(Ue.attribute)):Ue instanceof $e.Node&&(this.name=ze??Ue.name(),this.opType=Ue.opType(),this.attributes=new Ee.Attribute(De.ProtoUtil.tensorAttributesFromORTFormat(Ue))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class Me{constructor(Ue,ze){if(!Ue)throw new TypeError("graph is empty");this.buildGraph(Ue),this.transformGraph(ze),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(Ue){if(Ue instanceof Te.onnx.GraphProto)this.buildGraphFromOnnxFormat(Ue);else{if(!(Ue instanceof $e.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(Ue)}}buildGraphFromOnnxFormat(Ue){const ze=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const He=new Map;if(!Ue.input)throw new Error("missing information in graph: input");const Ge=[];for(const Ke of Ue.input){if(ze.has(Ke.name))throw new Error(`duplicated input name: ${Ke.name}`);const Xe=this._allData.push(new Ve(Ke))-1;ze.set(Ke.name,Xe),Ge.push(Ke.name)}if(!Ue.initializer)throw new Error("missing information in graph: initializer");for(const Ke of Ue.initializer){let Xe=ze.get(Ke.name);if(Xe===void 0){const Je=new Ve;Je.type={shape:{dims:De.ProtoUtil.tensorDimsFromProto(Ke.dims)},tensorType:De.ProtoUtil.tensorDataTypeFromProto(Ke.dataType)},Xe=this._allData.push(Je)-1,ze.set(Ke.name,Xe)}this._allData[Xe]._from=-1,this._allData[Xe].tensor=Ce.Tensor.fromProto(Ke)}for(let Ke=0;Ke<this._allData.length;Ke++)this._allData[Ke].tensor||(this._allInputIndices.push(Ke),this._allInputNames.push(Ge[Ke]));if(!Ue.output)throw new Error("missing information in graph: output");for(const Ke of Ue.output){if(ze.has(Ke.name))throw new Error(`duplicated output name: ${Ke.name}`);const Xe=this._allData.push(new Ve(Ke))-1;ze.set(Ke.name,Xe),this._allOutputIndices.push(Xe),this._allOutputNames.push(Ke.name)}if(!Ue.node)throw new Error("missing information in graph: node");for(const Ke of Ue.node){if(!Ke.name)for(let Je=0;;Je++){const un=`unnamed_${Ke.opType}_${Je}`;if(!He.has(un)){Ke.name=un;break}}if(He.has(Ke.name))throw new Error(`duplicated node name: ${Ke.name}`);const Xe=this._nodes.push(new Be(Ke))-1;He.set(Ke.name,Xe)}for(let Ke=0;Ke<this._nodes.length;Ke++){const Xe=this._nodes[Ke],Je=Ue.node[Ke];if(!Je.output)throw new Error(`missing output for node: ${Je.name}`);for(const un of Je.output){let fn=ze.get(un);if(fn===void 0&&(fn=this._allData.push(new Ve)-1,ze.set(un,fn)),Xe.outputs.push(fn),this._allData[fn]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${fn}`);if(this._allData[fn]._from=Ke,Je.opType==="Constant"){if(!Je.attribute||Je.attribute.length!==1||!Je.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!Je.output||Je.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");Xe.outputs.pop(),Xe.executeNode=!1,this._allData[fn]._from=-1,this._allData[fn].tensor=Ce.Tensor.fromProto(Je.attribute[0].t)}}}for(let Ke=0;Ke<this._nodes.length;Ke++){const Xe=this._nodes[Ke],Je=Ue.node[Ke];if(!Je.input)throw new Error(`missing input for node: ${Je.name}`);for(const un of Je.input){const fn=ze.get(un);if(fn===void 0){if(un===""&&Je.input.length===3&&Je.opType==="Resize")continue;throw new Error(`unrecognized input '${un}' for node: ${Je.name}`)}Xe.inputs.push(fn),this._allData[fn]._to.push(Ke)}}return!0}buildGraphFromOrtFormat(Ue){var ze,He,Ge;const Ke=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const Xe=new Map,Je=[];for(let un=0;un<Ue.inputsLength();un++){const fn=Ue.inputs(un);if(Ke.has(fn))throw new Error(`duplicated input name: ${fn}`);for(let yn=0;yn<Ue.nodeArgsLength();yn++)if(((ze=Ue.nodeArgs(yn))===null||ze===void 0?void 0:ze.name())===fn){const gn=new Ve;if(((Ge=(He=Ue.nodeArgs(yn))===null||He===void 0?void 0:He.type())===null||Ge===void 0?void 0:Ge.valueType())!==$e.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const mn=Ue.nodeArgs(yn).type().value(new $e.TensorTypeAndShape),dn=De.ProtoUtil.tensorDataTypeFromProto(mn.elemType()),vn=mn.shape(),bn=[];for(let En=0;En<vn.dimLength();En++)bn.push(De.LongUtil.longToNumber(vn.dim(En).value().dimValue()));gn.type={shape:{dims:bn},tensorType:dn};const Tn=this._allData.push(gn)-1;Ke.set(fn,Tn),Je.push(fn)}}for(let un=0;un<Ue.initializersLength();un++){const fn=Ue.initializers(un);let yn=Ke.get(fn.name());if(yn===void 0){const gn=new Ve,mn=De.ProtoUtil.tensorDimsFromORTFormat(fn),dn=De.ProtoUtil.tensorDataTypeFromProto(fn.dataType());gn.type={shape:{dims:mn},tensorType:dn},yn=this._allData.push(gn)-1,Ke.set(fn.name(),yn)}this._allData[yn]._from=-1,this._allData[yn].tensor=Ce.Tensor.fromOrtTensor(fn)}for(let un=0;un<this._allData.length;un++)this._allData[un].tensor||(this._allInputIndices.push(un),this._allInputNames.push(Je[un]));for(let un=0;un<Ue.outputsLength();un++){const fn=Ue.outputs(un);if(Ke.has(fn))throw new Error(`duplicated output name: ${fn}`);const yn=this._allData.push(new Ve)-1;Ke.set(fn,yn),this._allOutputIndices.push(yn),this._allOutputNames.push(fn)}if(!Ue.nodes)throw new Error("missing information in graph: node");for(let un=0;un<Ue.nodesLength();un++){const fn=Ue.nodes(un);let yn=fn.name();if(!yn)for(let mn=0;yn=`unnamed_${fn.opType()}_${mn}`,Xe.has(yn);mn++);if(Xe.has(yn))throw new Error(`duplicated node name: ${yn}`);const gn=this._nodes.push(new Be(fn,yn))-1;Xe.set(yn,gn)}for(let un=0;un<this._nodes.length;un++){const fn=this._nodes[un],yn=Ue.nodes(un);if(yn==null)throw new Error(`No node exists at index ${un}`);if(yn?.outputsLength()===0)throw new Error(`missing output for node: ${yn.name}`);for(let gn=0;gn<yn?.outputsLength();gn++){const mn=yn?.outputs(gn);let dn=Ke.get(mn);if(dn===void 0&&(dn=this._allData.push(new Ve)-1,Ke.set(mn,dn)),fn.outputs.push(dn),this._allData[dn]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${dn}`);if(this._allData[dn]._from=un,yn.opType()==="Constant"){if(yn.attributesLength()!==1||!yn.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(yn.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");fn.outputs.pop(),fn.executeNode=!1,this._allData[dn]._from=-1,this._allData[dn].tensor=Ce.Tensor.fromOrtTensor(yn.attributes(0).t())}}}for(let un=0;un<this._nodes.length;un++){const fn=this._nodes[un],yn=Ue.nodes(un);if(yn.inputsLength()===0)throw new Error(`missing input for node: ${yn.name}`);for(let gn=0;gn<yn.inputsLength();gn++){const mn=yn.inputs(gn),dn=Ke.get(mn);if(dn===void 0)throw new Error(`unrecognized input '${mn}' for node: ${yn.name()}`);fn.inputs.push(dn),this._allData[dn]._to.push(un)}}}checkIsAcyclic(){const Ue=new Set;this._allInputIndices.forEach(Ge=>{this._allData[Ge]._to.forEach(Ke=>{Ue.add(Ke)})});const ze=Array.from(Ue),He=new Array(this._nodes.length).fill("white");for(;ze.length>0;){const Ge=ze.pop();He[Ge]==="gray"?He[Ge]="black":(ze.push(Ge),He[Ge]="gray",this._nodes[Ge].outputs.forEach(Ke=>{const Xe=this._allData[Ke];if(Xe.tensor!==void 0)throw new Error("node outputs should not be initialized");if(Xe._from!==Ge)throw new Error("from property of the Value object doesn't match index of Node being processed");Xe._to.forEach(Je=>{if(He[Je]==="gray")throw new Error("model graph is cyclic");He[Je]==="white"&&ze.push(Je)})}))}}transformGraph(Ue){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),Ue&&Ue.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let Ue=0;for(let ze=0;ze<this._nodes.length;ze++)this._nodes[ze].executeNode?Ue>0&&(this._nodes[ze].inputs.forEach(He=>{const Ge=this._allData[He]._to.indexOf(ze+Ue);Ge!==-1&&(this._allData[He]._to[Ge]=ze)}),this._nodes[ze].outputs.forEach(He=>{this._allData[He]._from&&this._allData[He]._from===ze+Ue&&(this._allData[He]._from=ze)})):(Ue++,this._nodes[ze].outputs.forEach(He=>{this._allData[He]._from=-2}),this._nodes.splice(ze,1),ze--);Ue=0;for(let ze=0;ze<this._allData.length;ze++)if(this._allData[ze].from!==-2||this._allOutputIndices.indexOf(ze+Ue)!==-1){if(Ue>0){let He=-1;this._allData[ze].from!==void 0&&this._allData[ze].from!==-1?(He=this._nodes[this._allData[ze].from].outputs.indexOf(ze+Ue),He!==-1&&(this._nodes[this._allData[ze].from].outputs[He]=ze)):(He=this._allInputIndices.indexOf(ze+Ue),He!==-1&&(this._allInputIndices[He]=ze)),this._allData[ze].to.forEach(Ge=>{He=this._nodes[Ge].inputs.indexOf(ze+Ue),He!==-1&&(this._nodes[Ge].inputs[He]=ze)}),this._allData[ze].to.length===0&&(He=this._allOutputIndices.indexOf(ze+Ue),He!==-1&&(this._allOutputIndices[He]=ze))}}else Ue++,this._allData.splice(ze,1),ze--}deleteNode(Ue){const ze=this._nodes[Ue];if(ze.outputs.length>1){for(let un=1;un<ze.outputs.length;un++)if(this._allData[ze.outputs[un]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}ze.executeNode=!1;const He=ze.inputs[0],Ge=ze.outputs[0],Ke=this._allData[Ge].to,Xe=this._allData[He].to.indexOf(Ue);if(Xe===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[He].to.splice(Xe,1),this._allData[Ge]._to=[];const Je=this._allOutputIndices.indexOf(Ge);if(Je!==-1&&(this._allOutputIndices[Je]=He),Ke&&Ke.length>0)for(const un of Ke){const fn=this._nodes[un].inputs.indexOf(Ge);if(fn===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[un].inputs[fn]=He,this._allData[He].to.push(un)}}removeAllDropoutNodes(){let Ue=0;for(const ze of this._nodes){if(ze.opType==="Dropout"){if(ze.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(ze.outputs.length!==1&&ze.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(ze.outputs.length===2&&this._allData[ze.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(Ue)}Ue++}}removeAllIdentityNodes(){let Ue=0;for(const ze of this._nodes)ze.opType==="Identity"&&this.deleteNode(Ue),Ue++}isActivation(Ue){switch(Ue.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const Ue of this._nodes)if(Ue.opType==="Conv"){const ze=this._allData[Ue.outputs[0]]._to;if(ze.length===1&&this.isActivation(this._nodes[ze[0]])){const He=this._nodes[ze[0]];if(He.opType==="Clip")if(He.inputs.length===1)try{Ue.attributes.set("activation_params","floats",[He.attributes.getFloat("min"),He.attributes.getFloat("max")])}catch{Ue.attributes.set("activation_params","floats",[De.MIN_CLIP,De.MAX_CLIP])}else{if(!(He.inputs.length>=3&&this._allData[He.inputs[1]].tensor!==void 0&&this._allData[He.inputs[2]].tensor!==void 0))continue;Ue.attributes.set("activation_params","floats",[this._allData[He.inputs[1]].tensor.floatData[0],this._allData[He.inputs[2]].tensor.floatData[0]])}Ue.attributes.set("activation","string",He.opType),this.deleteNode(ze[0])}}}}},6231:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const t={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Te={none:new class{log(Be,Me,Oe){}},console:new class{log(Be,Me,Oe){console.log(`${this.color(Be)} ${Oe?"\x1B[35m"+Oe+"\x1B[0m ":""}${Me}`)}color(Be){switch(Be){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${Be}`)}}}},Ee={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let Re={"":Ee};function Ce(Be,Me,Oe,Ue){if(Me===void 0)return ze=Be,{verbose:Ce.verbose.bind(null,ze),info:Ce.info.bind(null,ze),warning:Ce.warning.bind(null,ze),error:Ce.error.bind(null,ze),fatal:Ce.fatal.bind(null,ze)};if(Oe===void 0)De(Be,Me);else if(typeof Oe=="number"&&Ue===void 0)De(Be,Me);else if(typeof Oe=="string"&&Ue===void 0)De(Be,Oe,0,Me);else{if(typeof Oe!="string"||typeof Ue!="number")throw new TypeError("input is valid");De(Be,Oe,0,Me)}var ze}function De(Be,Me,Oe,Ue){const ze=Re[Ue||""]||Re[""];t[Be]<t[ze.minimalSeverity]||(ze.logDateTime&&(Me=`${new Date().toISOString()}|${Me}`),ze.logSourceLocation,Te[ze.provider].log(Be,Me,Ue))}(function(Be){function Me(Ue){Re={},Oe("",Ue||{})}function Oe(Ue,ze){if(Ue==="*")Me(ze);else{const He=Re[Ue]||Ee;Re[Ue]={provider:ze.provider||He.provider,minimalSeverity:ze.minimalSeverity||He.minimalSeverity,logDateTime:ze.logDateTime===void 0?He.logDateTime:ze.logDateTime,logSourceLocation:ze.logSourceLocation===void 0?He.logSourceLocation:ze.logSourceLocation}}}Be.verbose=function(Ue,ze){Be("verbose",Ue,ze)},Be.info=function(Ue,ze){Be("info",Ue,ze)},Be.warning=function(Ue,ze){Be("warning",Ue,ze)},Be.error=function(Ue,ze){Be("error",Ue,ze)},Be.fatal=function(Ue,ze){Be("fatal",Ue,ze)},Be.reset=Me,Be.set=Oe,Be.setWithEnv=function(Ue){const ze={};Ue.logLevel&&(ze.minimalSeverity=Ue.logLevel),Oe("",ze)}})(Ce||(Ce={})),e.Logger=Ce;class $e{constructor(Me,Oe,Ue,ze,He,Ge){this.category=Me,this.name=Oe,this.startTime=Ue,this.endCallback=ze,this.timer=He,this.ctx=Ge}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class Ve{constructor(Me,Oe,Ue,ze){this.category=Me,this.name=Oe,this.startTime=Ue,this.endTime=ze}}e.Profiler=class{static create(Be){return Be===void 0?new this:new this(Be.maxNumberEvents,Be.flushBatchSize,Be.flushIntervalInMilliseconds)}constructor(Be,Me,Oe){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=Be===void 0?1e4:Be,this._flushBatchSize=Me===void 0?10:Me,this._flushIntervalInMilliseconds=Oe===void 0?5e3:Oe}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(Be,Me,Oe,Ue){const ze=this._started?this.begin(Be,Me,Ue):void 0;let He=!1;const Ge=Oe();if(Ge&&typeof Ge.then=="function")return He=!0,new Promise((Ke,Xe)=>{Ge.then(async Je=>{ze&&await ze.end(),Ke(Je)},async Je=>{ze&&await ze.end(),Xe(Je)})});if(!He&&ze){const Ke=ze.end();if(Ke&&typeof Ke.then=="function")return new Promise((Xe,Je)=>{Ke.then(()=>{Xe(Ge)},un=>{Je(un)})})}return Ge}begin(Be,Me,Oe){if(!this._started)throw new Error("profiler is not started yet");if(Oe===void 0){const Ue=(0,e.now)();return this.flush(Ue),new $e(Be,Me,Ue,ze=>this.endSync(ze))}{const Ue=Oe.beginTimer();return new $e(Be,Me,0,async ze=>this.end(ze),Ue,Oe)}}async end(Be){const Me=await Be.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Ve(Be.category,Be.name,Be.startTime,Me)),this.flush(Me))}endSync(Be){const Me=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Ve(Be.category,Be.name,Be.startTime,Me)),this.flush(Me))}logOneEvent(Be){e.Logger.verbose(`Profiler.${Be.category}`,`${(Be.endTime-Be.startTime).toFixed(2)}ms on event '${Be.name}' at ${Be.endTime.toFixed(2)}`)}flush(Be){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||Be-this._flushTime>=this._flushIntervalInMilliseconds){for(const Me=this._flushPointer;this._flushPointer<Me+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const Te=t(5686),Ee=t(1446),Re=t(7070),Ce=t(9395),De=t(2517);var $e=Ce.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(Ve,Be,Me){if(!Me)try{return void this.loadFromOnnxFormat(Ve,Be)}catch(Oe){if(Me!==void 0)throw Oe}this.loadFromOrtFormat(Ve,Be)}loadFromOnnxFormat(Ve,Be){const Me=Ee.onnx.ModelProto.decode(Ve);if(De.LongUtil.longToNumber(Me.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=Me.opsetImport.map(Oe=>({domain:Oe.domain,version:De.LongUtil.longToNumber(Oe.version)})),this._graph=Re.Graph.from(Me.graph,Be)}loadFromOrtFormat(Ve,Be){const Me=new Te.flatbuffers.ByteBuffer(Ve),Oe=$e.InferenceSession.getRootAsInferenceSession(Me).model();if(De.LongUtil.longToNumber(Oe.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let Ue=0;Ue<Oe.opsetImportLength();Ue++){const ze=Oe.opsetImport(Ue);this._opsets.push({domain:ze?.domain(),version:De.LongUtil.longToNumber(ze.version())})}this._graph=Re.Graph.from(Oe.graph(),Be)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(n,e)=>{function t(Te,Ee){if(Ee.endsWith("+")){const Re=Number.parseInt(Ee.substring(0,Ee.length-1),10);return!isNaN(Re)&&Re<=Te}if(Ee.split("-").length===2){const Re=Ee.split("-"),Ce=Number.parseInt(Re[0],10),De=Number.parseInt(Re[1],10);return!isNaN(Ce)&&!isNaN(De)&&Ce<=Te&&Te<=De}return Number.parseInt(Ee,10)===Te}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(Te,Ee,Re){for(const Ce of Re){const De=Ce[0],$e=Ce[1],Ve=Ce[2],Be=Ce[3],Me=Ce[4];if(Te.opType===De){for(const Oe of Ee)if((Oe.domain===$e||Oe.domain==="ai.onnx"&&$e==="")&&t(Oe.version,Ve))return{opImpl:Be,opInit:Me}}}throw new TypeError(`cannot resolve operator '${Te.opType}' with opsets: ${Ee.map(Ce=>`${Ce.domain||"ai.onnx"} v${Ce.version}`).join(", ")}`)}},9395:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const Te=t(5686);var Ee,Re;Ee=e.onnxruntime||(e.onnxruntime={}),function(Ce){(function(De){De[De.UNDEFINED=0]="UNDEFINED",De[De.FLOAT=1]="FLOAT",De[De.INT=2]="INT",De[De.STRING=3]="STRING",De[De.TENSOR=4]="TENSOR",De[De.GRAPH=5]="GRAPH",De[De.FLOATS=6]="FLOATS",De[De.INTS=7]="INTS",De[De.STRINGS=8]="STRINGS",De[De.TENSORS=9]="TENSORS",De[De.GRAPHS=10]="GRAPHS",De[De.SPARSE_TENSOR=11]="SPARSE_TENSOR",De[De.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(Ce.AttributeType||(Ce.AttributeType={}))}((Re=Ee.experimental||(Ee.experimental={})).fbs||(Re.fbs={})),function(Ce){(function(De){(function($e){(function(Ve){Ve[Ve.UNKNOWN=0]="UNKNOWN",Ve[Ve.VALUE=1]="VALUE",Ve[Ve.PARAM=2]="PARAM"})($e.DimensionValueType||($e.DimensionValueType={}))})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){(function(Ve){Ve[Ve.UNDEFINED=0]="UNDEFINED",Ve[Ve.FLOAT=1]="FLOAT",Ve[Ve.UINT8=2]="UINT8",Ve[Ve.INT8=3]="INT8",Ve[Ve.UINT16=4]="UINT16",Ve[Ve.INT16=5]="INT16",Ve[Ve.INT32=6]="INT32",Ve[Ve.INT64=7]="INT64",Ve[Ve.STRING=8]="STRING",Ve[Ve.BOOL=9]="BOOL",Ve[Ve.FLOAT16=10]="FLOAT16",Ve[Ve.DOUBLE=11]="DOUBLE",Ve[Ve.UINT32=12]="UINT32",Ve[Ve.UINT64=13]="UINT64",Ve[Ve.COMPLEX64=14]="COMPLEX64",Ve[Ve.COMPLEX128=15]="COMPLEX128",Ve[Ve.BFLOAT16=16]="BFLOAT16"})($e.TensorDataType||($e.TensorDataType={}))})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){(function(Ve){Ve[Ve.Primitive=0]="Primitive",Ve[Ve.Fused=1]="Fused"})($e.NodeType||($e.NodeType={}))})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){(function(Ve){Ve[Ve.NONE=0]="NONE",Ve[Ve.tensor_type=1]="tensor_type",Ve[Ve.sequence_type=2]="sequence_type",Ve[Ve.map_type=3]="map_type"})($e.TypeInfoValue||($e.TypeInfoValue={}))})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsShape(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsShape(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}dim(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,4);return Ue?(Oe||new Ce.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}dimLength(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startShape(Me){Me.startObject(1)}static addDim(Me,Oe){Me.addFieldOffset(0,Oe,0)}static createDimVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startDimVector(Me,Oe){Me.startVector(4,Oe,4)}static endShape(Me){return Me.endObject()}static createShape(Me,Oe){return Ve.startShape(Me),Ve.addDim(Me,Oe),Ve.endShape(Me)}}$e.Shape=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsDimension(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsDimension(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}value(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?(Me||new Ce.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}denotation(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}static startDimension(Me){Me.startObject(2)}static addValue(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addDenotation(Me,Oe){Me.addFieldOffset(1,Oe,0)}static endDimension(Me){return Me.endObject()}static createDimension(Me,Oe,Ue){return Ve.startDimension(Me),Ve.addValue(Me,Oe),Ve.addDenotation(Me,Ue),Ve.endDimension(Me)}}$e.Dimension=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsDimensionValue(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsDimensionValue(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}dimType(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.readInt8(this.bb_pos+Me):Ce.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.readInt64(this.bb_pos+Me):this.bb.createLong(0,0)}dimParam(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}static startDimensionValue(Me){Me.startObject(3)}static addDimType(Me,Oe){Me.addFieldInt8(0,Oe,Ce.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(Me,Oe){Me.addFieldInt64(1,Oe,Me.createLong(0,0))}static addDimParam(Me,Oe){Me.addFieldOffset(2,Oe,0)}static endDimensionValue(Me){return Me.endObject()}static createDimensionValue(Me,Oe,Ue,ze){return Ve.startDimensionValue(Me),Ve.addDimType(Me,Oe),Ve.addDimValue(Me,Ue),Ve.addDimParam(Me,ze),Ve.endDimensionValue(Me)}}$e.DimensionValue=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsTensorTypeAndShape(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsTensorTypeAndShape(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}elemType(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.readInt32(this.bb_pos+Me):Ce.experimental.fbs.TensorDataType.UNDEFINED}shape(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?(Me||new Ce.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}static startTensorTypeAndShape(Me){Me.startObject(2)}static addElemType(Me,Oe){Me.addFieldInt32(0,Oe,Ce.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(Me,Oe){Me.addFieldOffset(1,Oe,0)}static endTensorTypeAndShape(Me){return Me.endObject()}static createTensorTypeAndShape(Me,Oe,Ue){return Ve.startTensorTypeAndShape(Me),Ve.addElemType(Me,Oe),Ve.addShape(Me,Ue),Ve.endTensorTypeAndShape(Me)}}$e.TensorTypeAndShape=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsMapType(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsMapType(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}keyType(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.readInt32(this.bb_pos+Me):Ce.experimental.fbs.TensorDataType.UNDEFINED}valueType(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?(Me||new Ce.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}static startMapType(Me){Me.startObject(2)}static addKeyType(Me,Oe){Me.addFieldInt32(0,Oe,Ce.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(Me,Oe){Me.addFieldOffset(1,Oe,0)}static endMapType(Me){return Me.endObject()}static createMapType(Me,Oe,Ue){return Ve.startMapType(Me),Ve.addKeyType(Me,Oe),Ve.addValueType(Me,Ue),Ve.endMapType(Me)}}$e.MapType=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsSequenceType(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsSequenceType(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}elemType(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?(Me||new Ce.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}static startSequenceType(Me){Me.startObject(1)}static addElemType(Me,Oe){Me.addFieldOffset(0,Oe,0)}static endSequenceType(Me){return Me.endObject()}static createSequenceType(Me,Oe){return Ve.startSequenceType(Me),Ve.addElemType(Me,Oe),Ve.endSequenceType(Me)}}$e.SequenceType=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(De.fbs||(De.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init($e,Ve){return this.bb_pos=$e,this.bb=Ve,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd($e,Ve,Be,Me){return $e.prep(4,12),$e.writeInt32(Me),$e.writeInt32(Be),$e.writeInt32(Ve),$e.offset()}}})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsNodeEdge(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsNodeEdge(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}nodeIndex(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.readUint32(this.bb_pos+Me):0}inputEdges(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,6);return Ue?(Oe||new Ce.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+Ue)+12*Me,this.bb):null}inputEdgesLength(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.__vector_len(this.bb_pos+Me):0}outputEdges(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,8);return Ue?(Oe||new Ce.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+Ue)+12*Me,this.bb):null}outputEdgesLength(){let Me=this.bb.__offset(this.bb_pos,8);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startNodeEdge(Me){Me.startObject(3)}static addNodeIndex(Me,Oe){Me.addFieldInt32(0,Oe,0)}static addInputEdges(Me,Oe){Me.addFieldOffset(1,Oe,0)}static startInputEdgesVector(Me,Oe){Me.startVector(12,Oe,4)}static addOutputEdges(Me,Oe){Me.addFieldOffset(2,Oe,0)}static startOutputEdgesVector(Me,Oe){Me.startVector(12,Oe,4)}static endNodeEdge(Me){return Me.endObject()}static createNodeEdge(Me,Oe,Ue,ze){return Ve.startNodeEdge(Me),Ve.addNodeIndex(Me,Oe),Ve.addInputEdges(Me,Ue),Ve.addOutputEdges(Me,ze),Ve.endNodeEdge(Me)}}$e.NodeEdge=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsNode(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsNode(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}name(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}docString(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}domain(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}sinceVersion(){let Me=this.bb.__offset(this.bb_pos,10);return Me?this.bb.readInt32(this.bb_pos+Me):0}index(){let Me=this.bb.__offset(this.bb_pos,12);return Me?this.bb.readUint32(this.bb_pos+Me):0}opType(Me){let Oe=this.bb.__offset(this.bb_pos,14);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}type(){let Me=this.bb.__offset(this.bb_pos,16);return Me?this.bb.readInt32(this.bb_pos+Me):Ce.experimental.fbs.NodeType.Primitive}executionProviderType(Me){let Oe=this.bb.__offset(this.bb_pos,18);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}inputs(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,20);return Ue?this.bb.__string(this.bb.__vector(this.bb_pos+Ue)+4*Me,Oe):null}inputsLength(){let Me=this.bb.__offset(this.bb_pos,20);return Me?this.bb.__vector_len(this.bb_pos+Me):0}outputs(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,22);return Ue?this.bb.__string(this.bb.__vector(this.bb_pos+Ue)+4*Me,Oe):null}outputsLength(){let Me=this.bb.__offset(this.bb_pos,22);return Me?this.bb.__vector_len(this.bb_pos+Me):0}attributes(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,24);return Ue?(Oe||new Ce.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}attributesLength(){let Me=this.bb.__offset(this.bb_pos,24);return Me?this.bb.__vector_len(this.bb_pos+Me):0}inputArgCounts(Me){let Oe=this.bb.__offset(this.bb_pos,26);return Oe?this.bb.readInt32(this.bb.__vector(this.bb_pos+Oe)+4*Me):0}inputArgCountsLength(){let Me=this.bb.__offset(this.bb_pos,26);return Me?this.bb.__vector_len(this.bb_pos+Me):0}inputArgCountsArray(){let Me=this.bb.__offset(this.bb_pos,26);return Me?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Me),this.bb.__vector_len(this.bb_pos+Me)):null}implicitInputs(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,28);return Ue?this.bb.__string(this.bb.__vector(this.bb_pos+Ue)+4*Me,Oe):null}implicitInputsLength(){let Me=this.bb.__offset(this.bb_pos,28);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startNode(Me){Me.startObject(13)}static addName(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addDocString(Me,Oe){Me.addFieldOffset(1,Oe,0)}static addDomain(Me,Oe){Me.addFieldOffset(2,Oe,0)}static addSinceVersion(Me,Oe){Me.addFieldInt32(3,Oe,0)}static addIndex(Me,Oe){Me.addFieldInt32(4,Oe,0)}static addOpType(Me,Oe){Me.addFieldOffset(5,Oe,0)}static addType(Me,Oe){Me.addFieldInt32(6,Oe,Ce.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(Me,Oe){Me.addFieldOffset(7,Oe,0)}static addInputs(Me,Oe){Me.addFieldOffset(8,Oe,0)}static createInputsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startInputsVector(Me,Oe){Me.startVector(4,Oe,4)}static addOutputs(Me,Oe){Me.addFieldOffset(9,Oe,0)}static createOutputsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startOutputsVector(Me,Oe){Me.startVector(4,Oe,4)}static addAttributes(Me,Oe){Me.addFieldOffset(10,Oe,0)}static createAttributesVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startAttributesVector(Me,Oe){Me.startVector(4,Oe,4)}static addInputArgCounts(Me,Oe){Me.addFieldOffset(11,Oe,0)}static createInputArgCountsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addInt32(Oe[Ue]);return Me.endVector()}static startInputArgCountsVector(Me,Oe){Me.startVector(4,Oe,4)}static addImplicitInputs(Me,Oe){Me.addFieldOffset(12,Oe,0)}static createImplicitInputsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startImplicitInputsVector(Me,Oe){Me.startVector(4,Oe,4)}static endNode(Me){return Me.endObject()}static createNode(Me,Oe,Ue,ze,He,Ge,Ke,Xe,Je,un,fn,yn,gn,mn){return Ve.startNode(Me),Ve.addName(Me,Oe),Ve.addDocString(Me,Ue),Ve.addDomain(Me,ze),Ve.addSinceVersion(Me,He),Ve.addIndex(Me,Ge),Ve.addOpType(Me,Ke),Ve.addType(Me,Xe),Ve.addExecutionProviderType(Me,Je),Ve.addInputs(Me,un),Ve.addOutputs(Me,fn),Ve.addAttributes(Me,yn),Ve.addInputArgCounts(Me,gn),Ve.addImplicitInputs(Me,mn),Ve.endNode(Me)}}$e.Node=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsValueInfo(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsValueInfo(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}name(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}docString(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}type(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?(Me||new Ce.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}static startValueInfo(Me){Me.startObject(3)}static addName(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addDocString(Me,Oe){Me.addFieldOffset(1,Oe,0)}static addType(Me,Oe){Me.addFieldOffset(2,Oe,0)}static endValueInfo(Me){return Me.endObject()}static createValueInfo(Me,Oe,Ue,ze){return Ve.startValueInfo(Me),Ve.addName(Me,Oe),Ve.addDocString(Me,Ue),Ve.addType(Me,ze),Ve.endValueInfo(Me)}}$e.ValueInfo=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsTypeInfo(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsTypeInfo(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}denotation(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}valueType(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.readUint8(this.bb_pos+Me):Ce.experimental.fbs.TypeInfoValue.NONE}value(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__union(Me,this.bb_pos+Oe):null}static startTypeInfo(Me){Me.startObject(3)}static addDenotation(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addValueType(Me,Oe){Me.addFieldInt8(1,Oe,Ce.experimental.fbs.TypeInfoValue.NONE)}static addValue(Me,Oe){Me.addFieldOffset(2,Oe,0)}static endTypeInfo(Me){return Me.endObject()}static createTypeInfo(Me,Oe,Ue,ze){return Ve.startTypeInfo(Me),Ve.addDenotation(Me,Oe),Ve.addValueType(Me,Ue),Ve.addValue(Me,ze),Ve.endTypeInfo(Me)}}$e.TypeInfo=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsOperatorSetId(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsOperatorSetId(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}domain(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}version(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.readInt64(this.bb_pos+Me):this.bb.createLong(0,0)}static startOperatorSetId(Me){Me.startObject(2)}static addDomain(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addVersion(Me,Oe){Me.addFieldInt64(1,Oe,Me.createLong(0,0))}static endOperatorSetId(Me){return Me.endObject()}static createOperatorSetId(Me,Oe,Ue){return Ve.startOperatorSetId(Me),Ve.addDomain(Me,Oe),Ve.addVersion(Me,Ue),Ve.endOperatorSetId(Me)}}$e.OperatorSetId=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsTensor(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsTensor(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}name(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}docString(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}dims(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.readInt64(this.bb.__vector(this.bb_pos+Oe)+8*Me):this.bb.createLong(0,0)}dimsLength(){let Me=this.bb.__offset(this.bb_pos,8);return Me?this.bb.__vector_len(this.bb_pos+Me):0}dataType(){let Me=this.bb.__offset(this.bb_pos,10);return Me?this.bb.readInt32(this.bb_pos+Me):Ce.experimental.fbs.TensorDataType.UNDEFINED}rawData(Me){let Oe=this.bb.__offset(this.bb_pos,12);return Oe?this.bb.readUint8(this.bb.__vector(this.bb_pos+Oe)+Me):0}rawDataLength(){let Me=this.bb.__offset(this.bb_pos,12);return Me?this.bb.__vector_len(this.bb_pos+Me):0}rawDataArray(){let Me=this.bb.__offset(this.bb_pos,12);return Me?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Me),this.bb.__vector_len(this.bb_pos+Me)):null}stringData(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,14);return Ue?this.bb.__string(this.bb.__vector(this.bb_pos+Ue)+4*Me,Oe):null}stringDataLength(){let Me=this.bb.__offset(this.bb_pos,14);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startTensor(Me){Me.startObject(6)}static addName(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addDocString(Me,Oe){Me.addFieldOffset(1,Oe,0)}static addDims(Me,Oe){Me.addFieldOffset(2,Oe,0)}static createDimsVector(Me,Oe){Me.startVector(8,Oe.length,8);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addInt64(Oe[Ue]);return Me.endVector()}static startDimsVector(Me,Oe){Me.startVector(8,Oe,8)}static addDataType(Me,Oe){Me.addFieldInt32(3,Oe,Ce.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(Me,Oe){Me.addFieldOffset(4,Oe,0)}static createRawDataVector(Me,Oe){Me.startVector(1,Oe.length,1);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addInt8(Oe[Ue]);return Me.endVector()}static startRawDataVector(Me,Oe){Me.startVector(1,Oe,1)}static addStringData(Me,Oe){Me.addFieldOffset(5,Oe,0)}static createStringDataVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startStringDataVector(Me,Oe){Me.startVector(4,Oe,4)}static endTensor(Me){return Me.endObject()}static createTensor(Me,Oe,Ue,ze,He,Ge,Ke){return Ve.startTensor(Me),Ve.addName(Me,Oe),Ve.addDocString(Me,Ue),Ve.addDims(Me,ze),Ve.addDataType(Me,He),Ve.addRawData(Me,Ge),Ve.addStringData(Me,Ke),Ve.endTensor(Me)}}$e.Tensor=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsSparseTensor(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsSparseTensor(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}values(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?(Me||new Ce.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}indices(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?(Me||new Ce.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}dims(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.readInt64(this.bb.__vector(this.bb_pos+Oe)+8*Me):this.bb.createLong(0,0)}dimsLength(){let Me=this.bb.__offset(this.bb_pos,8);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startSparseTensor(Me){Me.startObject(3)}static addValues(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addIndices(Me,Oe){Me.addFieldOffset(1,Oe,0)}static addDims(Me,Oe){Me.addFieldOffset(2,Oe,0)}static createDimsVector(Me,Oe){Me.startVector(8,Oe.length,8);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addInt64(Oe[Ue]);return Me.endVector()}static startDimsVector(Me,Oe){Me.startVector(8,Oe,8)}static endSparseTensor(Me){return Me.endObject()}static createSparseTensor(Me,Oe,Ue,ze){return Ve.startSparseTensor(Me),Ve.addValues(Me,Oe),Ve.addIndices(Me,Ue),Ve.addDims(Me,ze),Ve.endSparseTensor(Me)}}$e.SparseTensor=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsAttribute(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsAttribute(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}name(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}docString(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}type(){let Me=this.bb.__offset(this.bb_pos,8);return Me?this.bb.readInt32(this.bb_pos+Me):Ce.experimental.fbs.AttributeType.UNDEFINED}f(){let Me=this.bb.__offset(this.bb_pos,10);return Me?this.bb.readFloat32(this.bb_pos+Me):0}i(){let Me=this.bb.__offset(this.bb_pos,12);return Me?this.bb.readInt64(this.bb_pos+Me):this.bb.createLong(0,0)}s(Me){let Oe=this.bb.__offset(this.bb_pos,14);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}t(Me){let Oe=this.bb.__offset(this.bb_pos,16);return Oe?(Me||new Ce.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}g(Me){let Oe=this.bb.__offset(this.bb_pos,18);return Oe?(Me||new Ce.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}floats(Me){let Oe=this.bb.__offset(this.bb_pos,20);return Oe?this.bb.readFloat32(this.bb.__vector(this.bb_pos+Oe)+4*Me):0}floatsLength(){let Me=this.bb.__offset(this.bb_pos,20);return Me?this.bb.__vector_len(this.bb_pos+Me):0}floatsArray(){let Me=this.bb.__offset(this.bb_pos,20);return Me?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Me),this.bb.__vector_len(this.bb_pos+Me)):null}ints(Me){let Oe=this.bb.__offset(this.bb_pos,22);return Oe?this.bb.readInt64(this.bb.__vector(this.bb_pos+Oe)+8*Me):this.bb.createLong(0,0)}intsLength(){let Me=this.bb.__offset(this.bb_pos,22);return Me?this.bb.__vector_len(this.bb_pos+Me):0}strings(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,24);return Ue?this.bb.__string(this.bb.__vector(this.bb_pos+Ue)+4*Me,Oe):null}stringsLength(){let Me=this.bb.__offset(this.bb_pos,24);return Me?this.bb.__vector_len(this.bb_pos+Me):0}tensors(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,26);return Ue?(Oe||new Ce.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}tensorsLength(){let Me=this.bb.__offset(this.bb_pos,26);return Me?this.bb.__vector_len(this.bb_pos+Me):0}graphs(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,28);return Ue?(Oe||new Ce.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}graphsLength(){let Me=this.bb.__offset(this.bb_pos,28);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startAttribute(Me){Me.startObject(13)}static addName(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addDocString(Me,Oe){Me.addFieldOffset(1,Oe,0)}static addType(Me,Oe){Me.addFieldInt32(2,Oe,Ce.experimental.fbs.AttributeType.UNDEFINED)}static addF(Me,Oe){Me.addFieldFloat32(3,Oe,0)}static addI(Me,Oe){Me.addFieldInt64(4,Oe,Me.createLong(0,0))}static addS(Me,Oe){Me.addFieldOffset(5,Oe,0)}static addT(Me,Oe){Me.addFieldOffset(6,Oe,0)}static addG(Me,Oe){Me.addFieldOffset(7,Oe,0)}static addFloats(Me,Oe){Me.addFieldOffset(8,Oe,0)}static createFloatsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addFloat32(Oe[Ue]);return Me.endVector()}static startFloatsVector(Me,Oe){Me.startVector(4,Oe,4)}static addInts(Me,Oe){Me.addFieldOffset(9,Oe,0)}static createIntsVector(Me,Oe){Me.startVector(8,Oe.length,8);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addInt64(Oe[Ue]);return Me.endVector()}static startIntsVector(Me,Oe){Me.startVector(8,Oe,8)}static addStrings(Me,Oe){Me.addFieldOffset(10,Oe,0)}static createStringsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startStringsVector(Me,Oe){Me.startVector(4,Oe,4)}static addTensors(Me,Oe){Me.addFieldOffset(11,Oe,0)}static createTensorsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startTensorsVector(Me,Oe){Me.startVector(4,Oe,4)}static addGraphs(Me,Oe){Me.addFieldOffset(12,Oe,0)}static createGraphsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startGraphsVector(Me,Oe){Me.startVector(4,Oe,4)}static endAttribute(Me){return Me.endObject()}static createAttribute(Me,Oe,Ue,ze,He,Ge,Ke,Xe,Je,un,fn,yn,gn,mn){return Ve.startAttribute(Me),Ve.addName(Me,Oe),Ve.addDocString(Me,Ue),Ve.addType(Me,ze),Ve.addF(Me,He),Ve.addI(Me,Ge),Ve.addS(Me,Ke),Ve.addT(Me,Xe),Ve.addG(Me,Je),Ve.addFloats(Me,un),Ve.addInts(Me,fn),Ve.addStrings(Me,yn),Ve.addTensors(Me,gn),Ve.addGraphs(Me,mn),Ve.endAttribute(Me)}}$e.Attribute=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsGraph(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsGraph(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}initializers(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,4);return Ue?(Oe||new Ce.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}initializersLength(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.__vector_len(this.bb_pos+Me):0}nodeArgs(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,6);return Ue?(Oe||new Ce.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}nodeArgsLength(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.__vector_len(this.bb_pos+Me):0}nodes(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,8);return Ue?(Oe||new Ce.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}nodesLength(){let Me=this.bb.__offset(this.bb_pos,8);return Me?this.bb.__vector_len(this.bb_pos+Me):0}maxNodeIndex(){let Me=this.bb.__offset(this.bb_pos,10);return Me?this.bb.readUint32(this.bb_pos+Me):0}nodeEdges(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,12);return Ue?(Oe||new Ce.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}nodeEdgesLength(){let Me=this.bb.__offset(this.bb_pos,12);return Me?this.bb.__vector_len(this.bb_pos+Me):0}inputs(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,14);return Ue?this.bb.__string(this.bb.__vector(this.bb_pos+Ue)+4*Me,Oe):null}inputsLength(){let Me=this.bb.__offset(this.bb_pos,14);return Me?this.bb.__vector_len(this.bb_pos+Me):0}outputs(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,16);return Ue?this.bb.__string(this.bb.__vector(this.bb_pos+Ue)+4*Me,Oe):null}outputsLength(){let Me=this.bb.__offset(this.bb_pos,16);return Me?this.bb.__vector_len(this.bb_pos+Me):0}sparseInitializers(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,18);return Ue?(Oe||new Ce.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}sparseInitializersLength(){let Me=this.bb.__offset(this.bb_pos,18);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startGraph(Me){Me.startObject(8)}static addInitializers(Me,Oe){Me.addFieldOffset(0,Oe,0)}static createInitializersVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startInitializersVector(Me,Oe){Me.startVector(4,Oe,4)}static addNodeArgs(Me,Oe){Me.addFieldOffset(1,Oe,0)}static createNodeArgsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startNodeArgsVector(Me,Oe){Me.startVector(4,Oe,4)}static addNodes(Me,Oe){Me.addFieldOffset(2,Oe,0)}static createNodesVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startNodesVector(Me,Oe){Me.startVector(4,Oe,4)}static addMaxNodeIndex(Me,Oe){Me.addFieldInt32(3,Oe,0)}static addNodeEdges(Me,Oe){Me.addFieldOffset(4,Oe,0)}static createNodeEdgesVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startNodeEdgesVector(Me,Oe){Me.startVector(4,Oe,4)}static addInputs(Me,Oe){Me.addFieldOffset(5,Oe,0)}static createInputsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startInputsVector(Me,Oe){Me.startVector(4,Oe,4)}static addOutputs(Me,Oe){Me.addFieldOffset(6,Oe,0)}static createOutputsVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startOutputsVector(Me,Oe){Me.startVector(4,Oe,4)}static addSparseInitializers(Me,Oe){Me.addFieldOffset(7,Oe,0)}static createSparseInitializersVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startSparseInitializersVector(Me,Oe){Me.startVector(4,Oe,4)}static endGraph(Me){return Me.endObject()}static createGraph(Me,Oe,Ue,ze,He,Ge,Ke,Xe,Je){return Ve.startGraph(Me),Ve.addInitializers(Me,Oe),Ve.addNodeArgs(Me,Ue),Ve.addNodes(Me,ze),Ve.addMaxNodeIndex(Me,He),Ve.addNodeEdges(Me,Ge),Ve.addInputs(Me,Ke),Ve.addOutputs(Me,Xe),Ve.addSparseInitializers(Me,Je),Ve.endGraph(Me)}}$e.Graph=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsModel(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsModel(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}irVersion(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.readInt64(this.bb_pos+Me):this.bb.createLong(0,0)}opsetImport(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,6);return Ue?(Oe||new Ce.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}opsetImportLength(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.__vector_len(this.bb_pos+Me):0}producerName(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}producerVersion(Me){let Oe=this.bb.__offset(this.bb_pos,10);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}domain(Me){let Oe=this.bb.__offset(this.bb_pos,12);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}modelVersion(){let Me=this.bb.__offset(this.bb_pos,14);return Me?this.bb.readInt64(this.bb_pos+Me):this.bb.createLong(0,0)}docString(Me){let Oe=this.bb.__offset(this.bb_pos,16);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}graph(Me){let Oe=this.bb.__offset(this.bb_pos,18);return Oe?(Me||new Ce.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}graphDocString(Me){let Oe=this.bb.__offset(this.bb_pos,20);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}static startModel(Me){Me.startObject(9)}static addIrVersion(Me,Oe){Me.addFieldInt64(0,Oe,Me.createLong(0,0))}static addOpsetImport(Me,Oe){Me.addFieldOffset(1,Oe,0)}static createOpsetImportVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startOpsetImportVector(Me,Oe){Me.startVector(4,Oe,4)}static addProducerName(Me,Oe){Me.addFieldOffset(2,Oe,0)}static addProducerVersion(Me,Oe){Me.addFieldOffset(3,Oe,0)}static addDomain(Me,Oe){Me.addFieldOffset(4,Oe,0)}static addModelVersion(Me,Oe){Me.addFieldInt64(5,Oe,Me.createLong(0,0))}static addDocString(Me,Oe){Me.addFieldOffset(6,Oe,0)}static addGraph(Me,Oe){Me.addFieldOffset(7,Oe,0)}static addGraphDocString(Me,Oe){Me.addFieldOffset(8,Oe,0)}static endModel(Me){return Me.endObject()}static createModel(Me,Oe,Ue,ze,He,Ge,Ke,Xe,Je,un){return Ve.startModel(Me),Ve.addIrVersion(Me,Oe),Ve.addOpsetImport(Me,Ue),Ve.addProducerName(Me,ze),Ve.addProducerVersion(Me,He),Ve.addDomain(Me,Ge),Ve.addModelVersion(Me,Ke),Ve.addDocString(Me,Xe),Ve.addGraph(Me,Je),Ve.addGraphDocString(Me,un),Ve.endModel(Me)}}$e.Model=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsKernelCreateInfos(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsKernelCreateInfos(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}nodeIndices(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.readUint32(this.bb.__vector(this.bb_pos+Oe)+4*Me):0}nodeIndicesLength(){let Me=this.bb.__offset(this.bb_pos,4);return Me?this.bb.__vector_len(this.bb_pos+Me):0}nodeIndicesArray(){let Me=this.bb.__offset(this.bb_pos,4);return Me?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Me),this.bb.__vector_len(this.bb_pos+Me)):null}kernelDefHashes(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.readUint64(this.bb.__vector(this.bb_pos+Oe)+8*Me):this.bb.createLong(0,0)}kernelDefHashesLength(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startKernelCreateInfos(Me){Me.startObject(2)}static addNodeIndices(Me,Oe){Me.addFieldOffset(0,Oe,0)}static createNodeIndicesVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addInt32(Oe[Ue]);return Me.endVector()}static startNodeIndicesVector(Me,Oe){Me.startVector(4,Oe,4)}static addKernelDefHashes(Me,Oe){Me.addFieldOffset(1,Oe,0)}static createKernelDefHashesVector(Me,Oe){Me.startVector(8,Oe.length,8);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addInt64(Oe[Ue]);return Me.endVector()}static startKernelDefHashesVector(Me,Oe){Me.startVector(8,Oe,8)}static endKernelCreateInfos(Me){return Me.endObject()}static createKernelCreateInfos(Me,Oe,Ue){return Ve.startKernelCreateInfos(Me),Ve.addNodeIndices(Me,Oe),Ve.addKernelDefHashes(Me,Ue),Ve.endKernelCreateInfos(Me)}}$e.KernelCreateInfos=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsSubGraphSessionState(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsSubGraphSessionState(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}graphId(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}sessionState(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?(Me||new Ce.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}static startSubGraphSessionState(Me){Me.startObject(2)}static addGraphId(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addSessionState(Me,Oe){Me.addFieldOffset(1,Oe,0)}static endSubGraphSessionState(Me){let Oe=Me.endObject();return Me.requiredField(Oe,4),Oe}static createSubGraphSessionState(Me,Oe,Ue){return Ve.startSubGraphSessionState(Me),Ve.addGraphId(Me,Oe),Ve.addSessionState(Me,Ue),Ve.endSubGraphSessionState(Me)}}$e.SubGraphSessionState=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsSessionState(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsSessionState(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}kernels(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?(Me||new Ce.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}subGraphSessionStates(Me,Oe){let Ue=this.bb.__offset(this.bb_pos,6);return Ue?(Oe||new Ce.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Ue)+4*Me),this.bb):null}subGraphSessionStatesLength(){let Me=this.bb.__offset(this.bb_pos,6);return Me?this.bb.__vector_len(this.bb_pos+Me):0}static startSessionState(Me){Me.startObject(2)}static addKernels(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addSubGraphSessionStates(Me,Oe){Me.addFieldOffset(1,Oe,0)}static createSubGraphSessionStatesVector(Me,Oe){Me.startVector(4,Oe.length,4);for(let Ue=Oe.length-1;Ue>=0;Ue--)Me.addOffset(Oe[Ue]);return Me.endVector()}static startSubGraphSessionStatesVector(Me,Oe){Me.startVector(4,Oe,4)}static endSessionState(Me){return Me.endObject()}static createSessionState(Me,Oe,Ue){return Ve.startSessionState(Me),Ve.addKernels(Me,Oe),Ve.addSubGraphSessionStates(Me,Ue),Ve.endSessionState(Me)}}$e.SessionState=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Ce){(function(De){(function($e){class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(Me,Oe){return this.bb_pos=Me,this.bb=Oe,this}static getRootAsInferenceSession(Me,Oe){return(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static getSizePrefixedRootAsInferenceSession(Me,Oe){return Me.setPosition(Me.position()+Te.flatbuffers.SIZE_PREFIX_LENGTH),(Oe||new Ve).__init(Me.readInt32(Me.position())+Me.position(),Me)}static bufferHasIdentifier(Me){return Me.__has_identifier("ORTM")}ortVersion(Me){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__string(this.bb_pos+Oe,Me):null}model(Me){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?(Me||new Ce.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}sessionState(Me){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?(Me||new Ce.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Oe),this.bb):null}static startInferenceSession(Me){Me.startObject(3)}static addOrtVersion(Me,Oe){Me.addFieldOffset(0,Oe,0)}static addModel(Me,Oe){Me.addFieldOffset(1,Oe,0)}static addSessionState(Me,Oe){Me.addFieldOffset(2,Oe,0)}static endInferenceSession(Me){return Me.endObject()}static finishInferenceSessionBuffer(Me,Oe){Me.finish(Oe,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(Me,Oe){Me.finish(Oe,"ORTM",!0)}static createInferenceSession(Me,Oe,Ue,ze){return Ve.startInferenceSession(Me),Ve.addOrtVersion(Me,Oe),Ve.addModel(Me,Ue),Ve.addSessionState(Me,ze),Ve.endInferenceSession(Me)}}$e.InferenceSession=Ve})(De.fbs||(De.fbs={}))})(Ce.experimental||(Ce.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const Te=t(1670),Ee=t(9162);e.OnnxjsSessionHandler=class{constructor(Re){this.session=Re,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(Re,Ce,De){const $e=new Map;for(const Me in Re)if(Object.hasOwnProperty.call(Re,Me)){const Oe=Re[Me];$e.set(Me,new Ee.Tensor(Oe.dims,Oe.type,void 0,void 0,Oe.data))}const Ve=await this.session.run($e),Be={};return Ve.forEach((Me,Oe)=>{Be[Oe]=new Te.Tensor(Me.type,Me.data,Me.dims)}),Be}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const Te=t(7067),Ee=t(1296),Re=t(7091),Ce=t(1036),De=t(6231),$e=t(2644);e.Session=class{constructor(Ve={}){this._initialized=!1,this.backendHint=Ve.backendHint,this.profiler=De.Profiler.create(Ve.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(Ve,Be,Me){await this.profiler.event("session","Session.loadModel",async()=>{const Oe=await(0,Re.resolveBackend)(this.backendHint);if(this.sessionHandler=Oe.createSessionHandler(this.context),this._model=new $e.Model,typeof Ve=="string"){const Ue=Ve.endsWith(".ort");if(typeof fetch>"u"){const ze=await(0,Ee.promisify)(Te.readFile)(Ve);this.initialize(ze,Ue)}else{const ze=await fetch(Ve),He=await ze.arrayBuffer();this.initialize(new Uint8Array(He),Ue)}}else if(ArrayBuffer.isView(Ve))this.initialize(Ve);else{const Ue=new Uint8Array(Ve,Be||0,Me||Ve.byteLength);this.initialize(Ue)}})}initialize(Ve,Be){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const Me=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(Ve,Me,Be),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new Ce.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(Ve){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const Be=this.normalizeAndValidateInputs(Ve),Me=await this._executionPlan.execute(this.sessionHandler,Be);return this.createOutput(Me)})}normalizeAndValidateInputs(Ve){const Be=this._model.graph.getInputNames();if(Array.isArray(Ve)){if(Ve.length!==Be.length)throw new Error(`incorrect input array length: expected ${Be.length} but got ${Ve.length}`)}else{if(Ve.size!==Be.length)throw new Error(`incorrect input map size: expected ${Be.length} but got ${Ve.size}`);const Me=new Array(Ve.size);let Oe=0;for(let Ue=0;Ue<Be.length;++Ue){const ze=Ve.get(Be[Ue]);if(!ze)throw new Error(`missing input tensor for: '${name}'`);Me[Oe++]=ze}Ve=Me}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,Ve,!1);else{const Me=this._model.graph.getInputIndices(),Oe=this._model.graph.getValues(),Ue=new Array(Me.length);for(let ze=0;ze<Me.length;++ze){const He=Oe[Me[ze]];Ue[ze]=He.type.shape.dims,this.context.graphInputTypes.push(He.type.tensorType),this.context.graphInputDims.push(Ve[ze].dims)}this.validateInputTensorDims(Ue,Ve,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,Ve),Ve}validateInputTensorTypes(Ve,Be){for(let Me=0;Me<Be.length;Me++){const Oe=Ve[Me],Ue=Be[Me].type;if(Oe!==Ue)throw new Error(`input tensor[${Me}] check failed: expected type '${Oe}' but got ${Ue}`)}}validateInputTensorDims(Ve,Be,Me){for(let Oe=0;Oe<Be.length;Oe++){const Ue=Ve[Oe],ze=Be[Oe].dims;if(!this.compareTensorDims(Ue,ze,Me))throw new Error(`input tensor[${Oe}] check failed: expected shape '[${Ue.join(",")}]' but got [${ze.join(",")}]`)}}compareTensorDims(Ve,Be,Me){if(Ve.length!==Be.length)return!1;for(let Oe=0;Oe<Ve.length;++Oe)if(Ve[Oe]!==Be[Oe]&&(!Me||Ve[Oe]!==0))return!1;return!0}createOutput(Ve){const Be=this._model.graph.getOutputNames();if(Ve.length!==Be.length)throw new Error("expected number of outputs do not match number of generated outputs");const Me=new Map;for(let Oe=0;Oe<Be.length;++Oe)Me.set(Be[Oe],Ve[Oe]);return Me}initializeOps(Ve){const Be=Ve.getNodes();this._ops=new Array(Be.length);for(let Me=0;Me<Be.length;Me++)this._ops[Me]=this.sessionHandler.resolve(Be[Me],this._model.opsets,Ve)}}},9162:function(n,e,t){var Te=this&&this.__importDefault||function(He){return He&&He.__esModule?He:{default:He}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const Ee=t(3442),Re=Te(t(3720)),Ce=t(1446),De=t(9395),$e=t(2517);var Ve=De.onnxruntime.experimental.fbs;class Be{get data(){if(this.cache===void 0){const Ge=this.dataProvider(this.dataId);if(Ge.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=Ge}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(Ge){return this.data[$e.ShapeUtil.indicesToOffset(Ge,this.strides)]}set(Ge,Ke){this.data[$e.ShapeUtil.indicesToOffset(Ge,this.strides)]=Ke}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=$e.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(Ge,Ke,Xe,Je,un,fn=Ee.Guid.create()){this.dims=Ge,this.type=Ke,this.dataProvider=Xe,this.asyncDataProvider=Je,this.cache=un,this.dataId=fn,this.size=$e.ShapeUtil.validateDimsAndCalcSize(Ge);const yn=this.size,gn=Xe===void 0&&Je===void 0&&un===void 0;if(un!==void 0&&un.length!==yn)throw new RangeError("Input dims doesn't match data length.");if(Ke==="string"){if(!(un===void 0||Array.isArray(un)&&un.every(mn=>typeof mn=="string")))throw new TypeError("cache should be a string array");gn&&(this.cache=new Array(yn))}else{if(un!==void 0){const mn=Oe(Ke);if(!(un instanceof mn))throw new TypeError(`cache should be type ${mn.name}`)}if(gn){const mn=new ArrayBuffer(yn*function(dn){switch(dn){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${dn}`)}}(Ke));this.cache=function(dn,vn){return new(Oe(vn))(dn)}(mn,Ke)}}}static fromProto(Ge){if(!Ge)throw new Error("cannot construct Value from an empty tensor");const Ke=$e.ProtoUtil.tensorDataTypeFromProto(Ge.dataType),Xe=$e.ProtoUtil.tensorDimsFromProto(Ge.dims),Je=new Be(Xe,Ke);if(Ke==="string")Ge.stringData.forEach((un,fn)=>{Je.data[fn]=(0,$e.decodeUtf8String)(un)});else if(Ge.rawData&&typeof Ge.rawData.byteLength=="number"&&Ge.rawData.byteLength>0){const un=Je.data,fn=new DataView(Ge.rawData.buffer,Ge.rawData.byteOffset,Ge.rawData.byteLength),yn=Me(Ge.dataType),gn=Ge.rawData.byteLength/yn;if(Ge.rawData.byteLength%yn!=0)throw new Error("invalid buffer length");if(un.length!==gn)throw new Error("buffer length mismatch");for(let mn=0;mn<gn;mn++){const dn=ze(fn,Ge.dataType,mn*yn);un[mn]=dn}}else{let un;switch(Ge.dataType){case Ce.onnx.TensorProto.DataType.FLOAT:un=Ge.floatData;break;case Ce.onnx.TensorProto.DataType.INT32:case Ce.onnx.TensorProto.DataType.INT16:case Ce.onnx.TensorProto.DataType.UINT16:case Ce.onnx.TensorProto.DataType.INT8:case Ce.onnx.TensorProto.DataType.UINT8:case Ce.onnx.TensorProto.DataType.BOOL:un=Ge.int32Data;break;case Ce.onnx.TensorProto.DataType.INT64:un=Ge.int64Data;break;case Ce.onnx.TensorProto.DataType.DOUBLE:un=Ge.doubleData;break;case Ce.onnx.TensorProto.DataType.UINT32:case Ce.onnx.TensorProto.DataType.UINT64:un=Ge.uint64Data;break;default:throw new Error("unspecific error")}if(un==null)throw new Error("failed to populate data from a tensorproto value");const fn=Je.data;if(fn.length!==un.length)throw new Error("array length mismatch");for(let yn=0;yn<un.length;yn++){const gn=un[yn];Re.default.isLong(gn)?fn[yn]=Ue(gn,Ge.dataType):fn[yn]=gn}}return Je}static fromData(Ge,Ke,Xe){return new Be(Ke,Xe,void 0,void 0,Ge)}static fromOrtTensor(Ge){if(!Ge)throw new Error("cannot construct Value from an empty tensor");const Ke=$e.ProtoUtil.tensorDimsFromORTFormat(Ge),Xe=$e.ProtoUtil.tensorDataTypeFromProto(Ge.dataType()),Je=new Be(Ke,Xe);if(Xe==="string")for(let un=0;un<Ge.stringDataLength();un++)Je.data[un]=Ge.stringData(un);else if(Ge.rawDataArray()&&typeof Ge.rawDataLength()=="number"&&Ge.rawDataLength()>0){const un=Je.data,fn=new DataView(Ge.rawDataArray().buffer,Ge.rawDataArray().byteOffset,Ge.rawDataLength()),yn=Me(Ge.dataType()),gn=Ge.rawDataLength()/yn;if(Ge.rawDataLength()%yn!=0)throw new Error("invalid buffer length");if(un.length!==gn)throw new Error("buffer length mismatch");for(let mn=0;mn<gn;mn++){const dn=ze(fn,Ge.dataType(),mn*yn);un[mn]=dn}}return Je}}function Me(He){switch(He){case Ce.onnx.TensorProto.DataType.UINT8:case Ce.onnx.TensorProto.DataType.INT8:case Ce.onnx.TensorProto.DataType.BOOL:return 1;case Ce.onnx.TensorProto.DataType.UINT16:case Ce.onnx.TensorProto.DataType.INT16:return 2;case Ce.onnx.TensorProto.DataType.FLOAT:case Ce.onnx.TensorProto.DataType.INT32:case Ce.onnx.TensorProto.DataType.UINT32:return 4;case Ce.onnx.TensorProto.DataType.INT64:case Ce.onnx.TensorProto.DataType.DOUBLE:case Ce.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${Ce.onnx.TensorProto.DataType[He]}`)}}function Oe(He){switch(He){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function Ue(He,Ge){if(Ge===Ce.onnx.TensorProto.DataType.INT64||Ge===Ve.TensorDataType.INT64){if(He.greaterThanOrEqual(2147483648)||He.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(Ge!==Ce.onnx.TensorProto.DataType.UINT32&&Ge!==Ve.TensorDataType.UINT32&&Ge!==Ce.onnx.TensorProto.DataType.UINT64&&Ge!==Ve.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${Ce.onnx.TensorProto.DataType[Ge]}`);if(He.greaterThanOrEqual(4294967296)||He.lessThan(0))throw new TypeError("uint64 is not supported")}return He.toNumber()}function ze(He,Ge,Ke){switch(Ge){case Ce.onnx.TensorProto.DataType.BOOL:case Ce.onnx.TensorProto.DataType.UINT8:return He.getUint8(Ke);case Ce.onnx.TensorProto.DataType.INT8:return He.getInt8(Ke);case Ce.onnx.TensorProto.DataType.UINT16:return He.getUint16(Ke,!0);case Ce.onnx.TensorProto.DataType.INT16:return He.getInt16(Ke,!0);case Ce.onnx.TensorProto.DataType.FLOAT:return He.getFloat32(Ke,!0);case Ce.onnx.TensorProto.DataType.INT32:return He.getInt32(Ke,!0);case Ce.onnx.TensorProto.DataType.UINT32:return He.getUint32(Ke,!0);case Ce.onnx.TensorProto.DataType.INT64:return Ue(Re.default.fromBits(He.getUint32(Ke,!0),He.getUint32(Ke+4,!0),!1),Ge);case Ce.onnx.TensorProto.DataType.DOUBLE:return He.getFloat64(Ke,!0);case Ce.onnx.TensorProto.DataType.UINT64:return Ue(Re.default.fromBits(He.getUint32(Ke,!0),He.getUint32(Ke+4,!0),!0),Ge);default:throw new Error(`cannot read from DataView for type ${Ce.onnx.TensorProto.DataType[Ge]}`)}}e.Tensor=Be},2517:function(n,e,t){var Te=this&&this.__importDefault||function(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const Ee=t(5686),Re=Te(t(3720)),Ce=t(1446),De=t(9162);e.checkInputsShape=function(Ge,...Ke){if(!Ge||Ge.length!==Ke.length)return!1;for(let Xe=0;Xe<Ge.length;Xe++)if(!Ge[Xe].dims||Ge[Xe].dims.length!==Ke[Xe])return!1;return!0},e.assert=function(Ge,Ke){if(!Ge)throw new Error(typeof Ke=="string"?Ke:Ke())},e.ArrayUtil=class{static arraysEqual(Ge,Ke){if(Ge.length!==Ke.length)return!1;for(let Xe=0;Xe<Ge.length;Xe++)if(Ge[Xe]!==Ke[Xe])return!1;return!0}};class $e{static preprocessInputShapes(Ke,Xe){return[Ke.length===1?[1,Ke[0]]:Ke,Xe.length===1?[Xe[0],1]:Xe]}static postprocessOutputShape(Ke,Xe,Je){Xe===1&&Ke.splice(Ke.length-2,1),Je===1&&Ke.pop()}static calcMatMulShape(Ke,Xe){return Ke[1]!==Xe[0]?void 0:[Ke[0],Xe[1]]}}e.MatMulUtil=$e;class Ve{static calcShape(Ke,Xe,Je=!1){const un=Ke.length,fn=Xe.length;if(un===0)return Xe;if(fn===0)return Ke;const yn=Math.max(Ke.length,Xe.length),gn=new Array(yn);if(Je){if(un<2||fn<2)return;const mn=$e.calcMatMulShape([Ke[un-2],Ke[un-1]],[Xe[fn-2],Xe[fn-1]]);if(mn===void 0)return;[gn[yn-2],gn[yn-1]]=mn}for(let mn=Je?3:1;mn<=yn;mn++){const dn=un-mn<0?1:Ke[un-mn],vn=fn-mn<0?1:Xe[fn-mn];if(dn!==vn&&dn>1&&vn>1)return;gn[yn-mn]=Math.max(dn,vn)}return gn}static index(Ke,Xe){const Je=new Array(Xe.length);return Ve.fillIndex(Ke,Xe,Je),Je}static fillIndex(Ke,Xe,Je){const un=Ke.length-Xe.length;for(let fn=0;fn<Xe.length;fn++)Je[fn]=Ke[un+fn]%Xe[fn]}static calc(Ke,Xe,Je,un,fn){const yn=Ve.calcShape(Ke.dims,Xe.dims);if(yn){if(un&&!Oe.areEqual(yn,Ke.dims))return;const gn=Oe.size(yn),mn=un?Ke:new De.Tensor(yn,fn||Ke.type);if(yn.length===0)mn.set([],Je(Ke.get([]),Xe.get([])));else{const dn=new Array(yn.length),vn=new Array(Ke.dims.length),bn=new Array(Xe.dims.length);let Tn,En=0,In=0,Nn=!1,On=!1;Ke.dims.length===0&&(En=Ke.get([]),Nn=!0),Xe.dims.length===0&&(In=Xe.get([]),On=!0);for(let Fn=0;Fn<gn;Fn++){Tn=Fn;for(let $n=yn.length-1;$n>=0;$n--)dn[$n]=Tn%yn[$n],Tn=Math.floor(Tn/yn[$n]);Nn||(Ve.fillIndex(dn,Ke.dims,vn),En=Ke.get(vn)),On||(Ve.fillIndex(dn,Xe.dims,bn),In=Xe.get(bn)),mn.set(dn,Je(En,In))}}return mn}}static isValidBroadcast(Ke,Xe){const Je=Ke.length,un=Xe.length;if(Je>un)return!1;for(let fn=1;fn<=Je;fn++)if(Ke[Je-fn]!==1&&Ke[Je-fn]!==Xe[un-fn])return!1;return!0}static getBroadcastDims(Ke,Xe){const Je=Ke.length,un=[];for(let fn=0;fn<Je;fn++){const yn=Je-1-fn,gn=Ke[yn]||1;(Xe[Xe.length-1-fn]||1)>1&&gn===1&&un.unshift(yn)}return un}}e.BroadcastUtil=Ve,e.arrayCopyHelper=function(Ge,Ke,Xe,Je,un){if(Je<0||Je>=Ke.length)throw new Error("sourceIndex out of bounds");if(Xe<0||Xe>=Ge.length)throw new Error("targetIndex out of bounds");if(Je+un>Ke.length)throw new Error("source indices to be copied are outside bounds");if(Xe+un>Ge.length)throw new Error("target array is too small to hold result");for(let fn=0;fn<un;fn++)Ge[Xe+fn]=Ke[Je+fn]},e.GemmUtil=class{static getShapeOfGemmResult(Ge,Ke,Xe,Je,un){if(Ge.length!==2||Xe.length!==2)throw new Error("shape need to be of size 2");let fn,yn,gn;Ke?(fn=Ge[1],yn=Ge[0]):(fn=Ge[0],yn=Ge[1]);let mn=-1;if(Je?(gn=Xe[0],mn=1):(gn=Xe[1],mn=0),Xe[mn]!==yn)throw new Error("dimension mismatch");if(fn<=0||gn<=0||yn<=0)throw new Error("invalid shape specified");if(un&&!Ve.isValidBroadcast(un,[fn,gn]))throw new Error("gemm: invalid bias shape for broadcast");return[fn,gn,yn]}};class Be{static tensorDataTypeFromProto(Ke){switch(Ke){case Ce.onnx.TensorProto.DataType.INT8:return"int8";case Ce.onnx.TensorProto.DataType.UINT8:return"uint8";case Ce.onnx.TensorProto.DataType.BOOL:return"bool";case Ce.onnx.TensorProto.DataType.INT16:return"int16";case Ce.onnx.TensorProto.DataType.UINT16:return"uint16";case Ce.onnx.TensorProto.DataType.INT32:return"int32";case Ce.onnx.TensorProto.DataType.UINT32:return"uint32";case Ce.onnx.TensorProto.DataType.FLOAT:return"float32";case Ce.onnx.TensorProto.DataType.DOUBLE:return"float64";case Ce.onnx.TensorProto.DataType.STRING:return"string";case Ce.onnx.TensorProto.DataType.INT64:return"int32";case Ce.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Ce.onnx.TensorProto.DataType[Ke]}`)}}static tensorDataTypeStringToEnum(Ke){switch(Ke){case"int8":return Ce.onnx.TensorProto.DataType.INT8;case"uint8":return Ce.onnx.TensorProto.DataType.UINT8;case"bool":return Ce.onnx.TensorProto.DataType.BOOL;case"int16":return Ce.onnx.TensorProto.DataType.INT16;case"uint16":return Ce.onnx.TensorProto.DataType.UINT16;case"int32":return Ce.onnx.TensorProto.DataType.INT32;case"uint32":return Ce.onnx.TensorProto.DataType.UINT32;case"float32":return Ce.onnx.TensorProto.DataType.FLOAT;case"float64":return Ce.onnx.TensorProto.DataType.DOUBLE;case"string":return Ce.onnx.TensorProto.DataType.STRING;case"int64":return Ce.onnx.TensorProto.DataType.INT64;case"uint64":return Ce.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${Ke}`)}}static tensorDimsFromProto(Ke){return Ke.map(Xe=>Re.default.isLong(Xe)?Xe.toNumber():Xe)}static tensorValueTypeFromProto(Ke){return{tensorType:Be.tensorDataTypeFromProto(Ke.elemType),shape:{dims:Be.tensorDimsFromProto(Ke.shape.dim.map(Xe=>Xe.dimValue))}}}static tensorDimsFromORTFormat(Ke){const Xe=[];for(let Je=0;Je<Ke.dimsLength();Je++)Xe.push(Me.longToNumber(Ke.dims(Je)));return Xe}static tensorAttributesFromORTFormat(Ke){const Xe=[];for(let Je=0;Je<Ke.attributesLength();Je++)Xe.push(Ke.attributes(Je));return Xe}}e.ProtoUtil=Be;class Me{static longToNumber(Ke,Xe){return Re.default.isLong(Ke)?Ke.toNumber():Ke instanceof Ee.flatbuffers.Long?Re.default.fromValue({low:Ke.low,high:Ke.high,unsigned:Xe!=null&&Xe}).toNumber():Ke}static isLong(Ke){return Re.default.isLong(Ke)||Ke instanceof Ee.flatbuffers.Long}}e.LongUtil=Me;class Oe{static size(Ke){return Oe.getSizeFromDimensionRange(Ke,0,Ke.length)}static sizeFromDimension(Ke,Xe){if(Xe<0||Xe>Ke.length)throw new Error(`invalid dimension of ${Xe} for sizeFromDimension as Tensor has ${Ke.length} dimensions.`);return Oe.getSizeFromDimensionRange(Ke,Xe,Ke.length)}static sizeToDimension(Ke,Xe){if(Xe<0||Xe>Ke.length)throw new Error(`invalid dimension of ${Xe} for sizeToDimension as Tensor has ${Ke.length} dimensions.`);return Oe.getSizeFromDimensionRange(Ke,0,Xe)}static getSizeFromDimensionRange(Ke,Xe,Je){let un=1;for(let fn=Xe;fn<Je;fn++){if(Ke[fn]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");un*=Ke[fn]}return un}static computeStrides(Ke){const Xe=Ke.length;if(Xe===0)return[];if(Xe===1)return[1];const Je=new Array(Xe);Je[Xe-1]=1,Je[Xe-2]=Ke[Xe-1];for(let un=Xe-3;un>=0;--un)Je[un]=Je[un+1]*Ke[un+1];return Je}static transpose(Ke){return Ke.slice().reverse()}static indicesToOffset(Ke,Xe,Je){Je===void 0&&(Je=Ke.length);let un=0;for(let fn=0;fn<Je;++fn)un+=Xe[fn]*Ke[fn];return un}static offsetToIndices(Ke,Xe){const Je=Xe.length;if(Je===0)return[];if(Je===1)return[Ke*Xe[0]];const un=new Array(Xe.length);for(let fn=0;fn<un.length-1;++fn)un[fn]=Math.floor(Ke/Xe[fn]),Ke-=un[fn]*Xe[fn];return un[un.length-1]=Ke,un}static normalizeAxis(Ke,Xe){if(Ke<-Xe&&Ke>=Xe)throw new Error("unsupported axis for this operation.");return Ke<0?Ke+Xe:Ke}static normalizeAxes(Ke,Xe){return Ke.map(Je=>this.normalizeAxis(Je,Xe))}static incrementIndex(Ke,Xe,Je){if(Xe.length===0||Ke.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(Je===void 0)Je=Xe.length;else if(Je<=0||Je>Xe.length)throw new Error("Incorrect axis to increment on");for(let un=Je-1;un>=0&&(Ke[un]++,!(Ke[un]<Xe[un]));--un)Ke[un]=0}static calculateReshapedDims(Ke,Xe){if(Xe.length===0){if(Ke.length===0||Oe.size(Ke)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const Je=Xe.length,un=new Array(Je);let fn=-1,yn=1;for(let mn=0;mn<Je;mn++){if(Xe[mn]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(Xe[mn]===-1){if(fn!==-1)throw new Error("at most one dimension in shape hints can be -1");fn=mn}else{if(Xe[mn]===0){if(mn>=Ke.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");un[mn]=Ke[mn]}else un[mn]=Xe[mn];yn*=un[mn]}}const gn=Oe.size(Ke);if(fn!==-1){if(gn%yn!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${Ke}] Output shape: [${Xe}]`);un[fn]=gn/yn}else if(yn!==gn)throw new Error("reshapedDims and originalDims don't have matching sizes");return un}static sortBasedOnPerm(Ke,Xe){return Xe?Xe.map(Je=>Ke[Je]):Ke.slice().reverse()}static padShape(Ke,Xe){const Je=Ke.length;return Ke.map((un,fn)=>un+Xe[fn]+Xe[fn+Je])}static areEqual(Ke,Xe){return Ke.length===Xe.length&&Ke.every((Je,un)=>Je===Xe[un])}static validateDimsAndCalcSize(Ke){if(Ke.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let Xe=1;for(const Je of Ke){if(!Number.isInteger(Je))throw new TypeError(`Invalid shape: ${Je} is not an integer`);if(Je<0||Je>2147483647)throw new TypeError(`Invalid shape: length ${Je} is not allowed`);Xe*=Je}return Xe}static flattenShape(Ke,Xe){Xe<0&&(Xe+=Ke.length);const Je=Ke.reduce((fn,yn)=>fn*yn,1),un=Ke.slice(Xe).reduce((fn,yn)=>fn*yn,1);return[Je/un,un]}static squeezeShape(Ke,Xe){const Je=new Array;Xe=Oe.normalizeAxes(Xe,Ke.length);for(let un=0;un<Ke.length;un++){const fn=Xe.indexOf(un)>=0;if(fn&&Ke[un]!==1)throw new Error("squeeze an axis of size different than 1");(Xe.length===0&&Ke[un]>1||Xe.length>0&&!fn)&&Je.push(Ke[un])}return Je}static unsqueezeShape(Ke,Xe){const Je=new Array(Ke.length+Xe.length);Je.fill(0);for(let fn=0;fn<Xe.length;fn++){const yn=Oe.normalizeAxis(Xe[fn],Je.length);if(yn>=Je.length)throw new Error("'axes' has an out of range axis");if(Je[yn]!==0)throw new Error("'axes' has a duplicate axis");Je[yn]=1}let un=0;for(let fn=0;fn<Je.length;fn++)Je[fn]===0&&(Je[fn]=Ke[un++]);if(un!==Ke.length)throw new Error("the unsqueezed dimension could not be established");return Je}}e.ShapeUtil=Oe,e.MathUtil=class{static sqr(Ge,Ke,Xe,Je,un){if(Je<0||Je>=Ke.length)throw new Error("sourceIndex out of bounds");if(Xe<0||Xe>=Ge.length)throw new Error("targetIndex out of bounds");if(Je+un>Ke.length)throw new Error("source indices to be copied are outside bounds");if(Xe+un>Ge.length)throw new Error("target array is too small to hold result");for(let fn=0;fn<un;fn++)Ge[Xe+fn]+=Math.pow(Ke[Je+fn],2)}static axpy(Ge,Ke,Xe,Je,un,fn){if(Je<0||Je>=Ke.length)throw new Error("sourceIndex out of bounds");if(Xe<0||Xe>=Ge.length)throw new Error("targetIndex out of bounds");if(Je+un>Ke.length)throw new Error("source indices to be copied are outside bounds");if(Xe+un>Ge.length)throw new Error("target array is too small to hold result");for(let yn=0;yn<un;yn++)Ge[Xe+yn]+=fn*Ke[Je+yn]}static powx(Ge,Ke,Xe,Je,un,fn){if(Je<0||Je>=Ke.length)throw new Error("sourceIndex out of bounds");if(Xe<0||Xe>=Ge.length)throw new Error("targetIndex out of bounds");if(Je+un>Ke.length)throw new Error("source indices to be copied are outside bounds");if(Xe+un>Ge.length)throw new Error("target array is too small to hold result");for(let yn=0;yn<un;yn++)Ge[Xe+yn]=Math.pow(Ke[Je+yn],fn)}static mul(Ge,Ke,Xe,Je,un){if(Je<0||Je>=Ke.length)throw new Error("sourceIndex out of bounds");if(Xe<0||Xe>=Ge.length)throw new Error("targetIndex out of bounds");if(Je+un>Ke.length)throw new Error("source indices to be copied are outside bounds");if(Xe+un>Ge.length)throw new Error("target array is too small to hold result");for(let fn=0;fn<un;fn++)Ge[Xe+fn]=Ke[Je+fn]*Ge[Xe+fn]}};class Ue{static splitShape(Ke,Xe,Je,un){if(Je.length===0){if(!un)throw new Error("need to know number of outputs when the 'split' attribute is not specified");Ue.determineSplit(Ke[Xe],un,Je)}const fn=[],yn=[0];for(let gn=0;gn<Je.length;++gn){gn!==0&&yn.push(yn[gn-1]+Je[gn-1]);const mn=Ke.slice();mn[Xe]=Je[gn],fn.push(mn)}return[fn,yn]}static determineSplit(Ke,Xe,Je){if(Ke%Xe!=0)throw new Error("cannot split tensor to equal sized parts");for(let un=0;un<Xe;++un)Je.push(Ke/Xe)}}e.SplitUtil=Ue;class ze{static calcReduce(Ke,Xe,Je,un,fn){const yn=Ke.dims.slice(0);Xe.length===0&&yn.forEach((En,In)=>Xe.push(In));const gn=ze.calcReduceShape(yn,Xe,!0),mn=Oe.size(gn),dn=new De.Tensor(gn,Ke.type),vn=Oe.computeStrides(gn),bn=Oe.computeStrides(yn),Tn=new Array(yn.length);for(let En=0;En<mn;En++){const In=Oe.offsetToIndices(En,vn);Ve.fillIndex(In,yn,Tn),dn.set(In,ze.calcReduceByAxis(Ke.numberData,Xe,yn,0,Oe.indicesToOffset(Tn,bn),un,fn))}return Je?dn:new De.Tensor(ze.calcReduceShape(yn,Xe,Je),dn.type,void 0,void 0,dn.data,dn.dataId)}static calcReduceByAxis(Ke,Xe,Je,un,fn,yn,gn){let mn=0;if(un>=Xe.length)return yn(Ke[fn]);const dn=Xe[un],vn=dn>=Je.length?1:Oe.size(Je.slice(dn+1));for(let bn=0;bn<Je[dn];bn++)mn=bn===0?ze.calcReduceByAxis(Ke,Xe,Je,un+1,fn,yn,gn):gn(mn,ze.calcReduceByAxis(Ke,Xe,Je,un+1,fn,yn,gn)),fn+=vn;return mn}static calcReduceShape(Ke,Xe,Je){const un=Ke.slice();for(let fn=0;fn<Xe.length;fn++)un[Xe[fn]]=Je?1:0;return un.filter(fn=>fn!==0)}}e.ReduceUtil=ze;class He{static adjustPoolAttributes(Ke,Xe,Je,un,fn,yn){if(!Ke&&Je.length!==Xe.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(Ke)for(let gn=0;gn<Xe.length-2;gn++)gn>=Je.length?Je.push(Xe[gn+2]):Je[gn]=Xe[gn+2];for(let gn=0;gn<Je.length;gn++)if(gn<un.length){if(un[gn]<0)throw new Error("strides should be greater than or equal to 1")}else un.push(1);for(let gn=0;gn<Je.length;gn++)if(gn<fn.length){if(fn[gn]<0)throw new Error("dilations should be greater than or equal to 1")}else fn.push(1);for(let gn=0;gn<2*Je.length;gn++)if(gn<yn.length){if(yn[gn]<0)throw new Error("pad should be greater than or equal to 1")}else yn.push(0);for(let gn=0;gn<Je.length;gn++){if(Je[gn]<=0)throw new Error("kernel shapes need to be greater than 0");if(yn[gn]>=Je[gn]||yn[gn+Je.length]>=Je[gn])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(Ke,Xe,Je,un,fn,yn){if(yn){if(fn.length!==2*(Ke.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(Xe.length!==Ke.length-2)throw new Error("length of strides should be the length of data dimensions");if(un.length!==Ke.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let gn=0;gn<Ke.length-2;gn++)He.adjustPadAndReturnShape(Ke[gn+2],Xe[gn],Je[gn],un[gn],fn,gn,gn+Ke.length-2,yn)}}static computePoolOutputShape(Ke,Xe,Je,un,fn,yn,gn){if(Xe.length<=0)throw new Error("input shape must be of size greater than 0");const mn=[Xe[0],Xe[1]];return He.computeShapeHelper(Ke,Xe,mn,Je,un,fn,yn,gn),mn}static computeConvOutputShape(Ke,Xe,Je,un,fn,yn,gn){if(Ke.length<=0||Xe.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const mn=[Ke[0],Xe[0]];return He.computeShapeHelper(!1,Ke,mn,Je,un,fn,yn,gn),mn}static computeShapeHelper(Ke,Xe,Je,un,fn,yn,gn,mn){if(Ke)for(let dn=0;dn<Xe.length-2;dn++)Je.push(1);else for(let dn=0;dn<Xe.length-2;dn++)Je.push(He.adjustPadAndReturnShape(Xe[dn+2],un[dn],fn[dn],yn[dn],gn,dn,dn+Xe.length-2,mn))}static adjustPadAndReturnShape(Ke,Xe,Je,un,fn,yn,gn,mn){const dn=Je*(un-1)+1;if(!mn||mn==="NOTSET")return Math.floor((Ke+fn[yn]+fn[gn]-dn)/Xe+1);switch(mn){case"VALID":return fn[yn]=0,fn[gn]=0,Math.floor((Ke-dn)/Xe+1);case"SAME_LOWER":case"SAME_UPPER":if(Je!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const vn=((Ke+Xe-1)/Xe-1)*Xe+un-Ke;return fn[yn]=Math.floor(mn==="SAME_LOWER"?(vn+1)/2:vn/2),fn[gn]=vn-fn[yn],Math.floor((Ke+vn-un)/Xe+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=He,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(Ge){return new TextDecoder().decode(Ge)}},7967:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,Te,Ee,Re)=>{if(typeof t=="object"&&t!==null){if(Ee.has(t))throw new Error("Circular reference in options");Ee.add(t)}Object.entries(t).forEach(([Ce,De])=>{const $e=Te?Te+Ce:Ce;if(typeof De=="object")(0,e.iterateExtraOptions)(De,$e+".",Ee,Re);else if(typeof De=="string"||typeof De=="number")Re($e,De.toString());else{if(typeof De!="boolean")throw new Error("Can't handle extra config type: "+typeof De);Re($e,De?"1":"0")}})}},2157:function(n,e,t){var Te,Ee=this&&this.__createBinding||(Object.create?function(vn,bn,Tn,En){En===void 0&&(En=Tn);var In=Object.getOwnPropertyDescriptor(bn,Tn);In&&!("get"in In?!bn.__esModule:In.writable||In.configurable)||(In={enumerable:!0,get:function(){return bn[Tn]}}),Object.defineProperty(vn,En,In)}:function(vn,bn,Tn,En){En===void 0&&(En=Tn),vn[En]=bn[Tn]}),Re=this&&this.__setModuleDefault||(Object.create?function(vn,bn){Object.defineProperty(vn,"default",{enumerable:!0,value:bn})}:function(vn,bn){vn.default=bn}),Ce=this&&this.__importStar||function(vn){if(vn&&vn.__esModule)return vn;var bn={};if(vn!=null)for(var Tn in vn)Tn!=="default"&&Object.prototype.hasOwnProperty.call(vn,Tn)&&Ee(bn,vn,Tn);return Re(bn,vn),bn};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const De=t(1670),$e=Ce(t(349)),Ve=t(6361),Be=()=>!!De.env.wasm.proxy&&typeof document<"u";let Me,Oe,Ue,ze=!1,He=!1,Ge=!1;const Ke=[],Xe=[],Je=[],un=[],fn=[],yn=[],gn=()=>{if(ze||!He||Ge||!Me)throw new Error("worker not ready")},mn=vn=>{switch(vn.data.type){case"init-wasm":ze=!1,vn.data.err?(Ge=!0,Oe[1](vn.data.err)):(He=!0,Oe[0]());break;case"init-ort":vn.data.err?Ue[1](vn.data.err):Ue[0]();break;case"create_allocate":vn.data.err?Ke.shift()[1](vn.data.err):Ke.shift()[0](vn.data.out);break;case"create_finalize":vn.data.err?Xe.shift()[1](vn.data.err):Xe.shift()[0](vn.data.out);break;case"create":vn.data.err?Je.shift()[1](vn.data.err):Je.shift()[0](vn.data.out);break;case"release":vn.data.err?un.shift()[1](vn.data.err):un.shift()[0]();break;case"run":vn.data.err?fn.shift()[1](vn.data.err):fn.shift()[0](vn.data.out);break;case"end-profiling":vn.data.err?yn.shift()[1](vn.data.err):yn.shift()[0]()}},dn=typeof document<"u"?(Te=document?.currentScript)===null||Te===void 0?void 0:Te.src:void 0;e.initWasm=async()=>{if(Be()){if(He)return;if(ze)throw new Error("multiple calls to 'initWasm()' detected.");if(Ge)throw new Error("previous call to 'initWasm()' failed.");return ze=!0,De.env.wasm.wasmPaths===void 0&&dn&&dn.indexOf("blob:")!==0&&(De.env.wasm.wasmPaths=dn.substr(0,+dn.lastIndexOf("/")+1)),new Promise((vn,bn)=>{Me?.terminate(),Me=t(9710).Z(),Me.onmessage=mn,Oe=[vn,bn];const Tn={type:"init-wasm",in:De.env.wasm};Me.postMessage(Tn)})}return(0,Ve.initializeWebAssembly)(De.env.wasm)},e.initOrt=async(vn,bn)=>{if(Be())return gn(),new Promise((Tn,En)=>{Ue=[Tn,En];const In={type:"init-ort",in:{numThreads:vn,loggingLevel:bn}};Me.postMessage(In)});$e.initOrt(vn,bn)},e.createSessionAllocate=async vn=>Be()?(gn(),new Promise((bn,Tn)=>{Ke.push([bn,Tn]);const En={type:"create_allocate",in:{model:vn}};Me.postMessage(En,[vn.buffer])})):$e.createSessionAllocate(vn),e.createSessionFinalize=async(vn,bn)=>Be()?(gn(),new Promise((Tn,En)=>{Xe.push([Tn,En]);const In={type:"create_finalize",in:{modeldata:vn,options:bn}};Me.postMessage(In)})):$e.createSessionFinalize(vn,bn),e.createSession=async(vn,bn)=>Be()?(gn(),new Promise((Tn,En)=>{Je.push([Tn,En]);const In={type:"create",in:{model:vn,options:bn}};Me.postMessage(In,[vn.buffer])})):$e.createSession(vn,bn),e.releaseSession=async vn=>{if(Be())return gn(),new Promise((bn,Tn)=>{un.push([bn,Tn]);const En={type:"release",in:vn};Me.postMessage(En)});$e.releaseSession(vn)},e.run=async(vn,bn,Tn,En,In)=>Be()?(gn(),new Promise((Nn,On)=>{fn.push([Nn,On]);const Fn={type:"run",in:{sessionId:vn,inputIndices:bn,inputs:Tn,outputIndices:En,options:In}};Me.postMessage(Fn,$e.extractTransferableBuffers(Tn))})):$e.run(vn,bn,Tn,En,In),e.endProfiling=async vn=>{if(Be())return gn(),new Promise((bn,Tn)=>{yn.push([bn,Tn]);const En={type:"end-profiling",in:vn};Me.postMessage(En)});$e.endProfiling(vn)}},586:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const Te=t(7967),Ee=t(4983),Re=t(6361);e.setRunOptions=Ce=>{const De=(0,Re.getInstance)();let $e=0;const Ve=[],Be=Ce||{};try{if(Ce?.logSeverityLevel===void 0)Be.logSeverityLevel=2;else if(typeof Ce.logSeverityLevel!="number"||!Number.isInteger(Ce.logSeverityLevel)||Ce.logSeverityLevel<0||Ce.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${Ce.logSeverityLevel}`);if(Ce?.logVerbosityLevel===void 0)Be.logVerbosityLevel=0;else if(typeof Ce.logVerbosityLevel!="number"||!Number.isInteger(Ce.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${Ce.logVerbosityLevel}`);Ce?.terminate===void 0&&(Be.terminate=!1);let Me=0;if(Ce?.tag!==void 0&&(Me=(0,Ee.allocWasmString)(Ce.tag,Ve)),$e=De._OrtCreateRunOptions(Be.logSeverityLevel,Be.logVerbosityLevel,!!Be.terminate,Me),$e===0)throw new Error("Can't create run options");return Ce?.extra!==void 0&&(0,Te.iterateExtraOptions)(Ce.extra,"",new WeakSet,(Oe,Ue)=>{const ze=(0,Ee.allocWasmString)(Oe,Ve),He=(0,Ee.allocWasmString)(Ue,Ve);if(De._OrtAddRunConfigEntry($e,ze,He)!==0)throw new Error(`Can't set a run config entry: ${Oe} - ${Ue}`)}),[$e,Ve]}catch(Me){throw $e!==0&&De._OrtReleaseRunOptions($e),Ve.forEach(De._free),Me}}},2306:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const Te=t(2806),Ee=t(1670),Re=t(2850),Ce=t(2157);let De;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate($e){const Ve=await fetch($e),Be=await Ve.arrayBuffer();return(0,Ce.createSessionAllocate)(new Uint8Array(Be))}async loadModel($e,Ve){if(De||(await(0,Ce.initOrt)(Ee.env.wasm.numThreads,(Be=>{switch(Be){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${Be}`)}})(Ee.env.logLevel)),De=!0),typeof $e=="string")if(typeof fetch>"u"){const Be=await(0,Re.promisify)(Te.readFile)($e);[this.sessionId,this.inputNames,this.outputNames]=await(0,Ce.createSession)(Be,Ve)}else{const Be=await this.createSessionAllocate($e);[this.sessionId,this.inputNames,this.outputNames]=await(0,Ce.createSessionFinalize)(Be,Ve)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,Ce.createSession)($e,Ve)}async dispose(){return(0,Ce.releaseSession)(this.sessionId)}async run($e,Ve,Be){const Me=[],Oe=[];Object.entries($e).forEach(Ge=>{const Ke=Ge[0],Xe=Ge[1],Je=this.inputNames.indexOf(Ke);if(Je===-1)throw new Error(`invalid input '${Ke}'`);Me.push(Xe),Oe.push(Je)});const Ue=[];Object.entries(Ve).forEach(Ge=>{const Ke=Ge[0],Xe=this.outputNames.indexOf(Ke);if(Xe===-1)throw new Error(`invalid output '${Ke}'`);Ue.push(Xe)});const ze=await(0,Ce.run)(this.sessionId,Oe,Me.map(Ge=>[Ge.type,Ge.dims,Ge.data]),Ue,Be),He={};for(let Ge=0;Ge<ze.length;Ge++)He[this.outputNames[Ue[Ge]]]=new Ee.Tensor(ze[Ge][0],ze[Ge][2],ze[Ge][1]);return He}startProfiling(){}endProfiling(){(0,Ce.endProfiling)(this.sessionId)}}},4919:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const Te=t(7967),Ee=t(4983),Re=t(6361);e.setSessionOptions=Ce=>{const De=(0,Re.getInstance)();let $e=0;const Ve=[],Be=Ce||{};(Me=>{Me.extra||(Me.extra={}),Me.extra.session||(Me.extra.session={});const Oe=Me.extra.session;Oe.use_ort_model_bytes_directly||(Oe.use_ort_model_bytes_directly="1")})(Be);try{Ce?.graphOptimizationLevel===void 0&&(Be.graphOptimizationLevel="all");const Me=(ze=>{switch(ze){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${ze}`)}})(Be.graphOptimizationLevel);Ce?.enableCpuMemArena===void 0&&(Be.enableCpuMemArena=!0),Ce?.enableMemPattern===void 0&&(Be.enableMemPattern=!0),Ce?.executionMode===void 0&&(Be.executionMode="sequential");const Oe=(ze=>{switch(ze){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${ze}`)}})(Be.executionMode);let Ue=0;if(Ce?.logId!==void 0&&(Ue=(0,Ee.allocWasmString)(Ce.logId,Ve)),Ce?.logSeverityLevel===void 0)Be.logSeverityLevel=2;else if(typeof Ce.logSeverityLevel!="number"||!Number.isInteger(Ce.logSeverityLevel)||Ce.logSeverityLevel<0||Ce.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${Ce.logSeverityLevel}`);if(Ce?.logVerbosityLevel===void 0)Be.logVerbosityLevel=0;else if(typeof Ce.logVerbosityLevel!="number"||!Number.isInteger(Ce.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${Ce.logVerbosityLevel}`);if(Ce?.enableProfiling===void 0&&(Be.enableProfiling=!1),$e=De._OrtCreateSessionOptions(Me,!!Be.enableCpuMemArena,!!Be.enableMemPattern,Oe,!!Be.enableProfiling,0,Ue,Be.logSeverityLevel,Be.logVerbosityLevel),$e===0)throw new Error("Can't create session options");return Ce?.executionProviders&&((ze,He,Ge)=>{for(const Ke of He){let Xe=typeof Ke=="string"?Ke:Ke.name;switch(Xe){case"xnnpack":Xe="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${Xe}`)}const Je=(0,Ee.allocWasmString)(Xe,Ge);if((0,Re.getInstance)()._OrtAppendExecutionProvider(ze,Je)!==0)throw new Error(`Can't append execution provider: ${Xe}`)}})($e,Ce.executionProviders,Ve),Ce?.extra!==void 0&&(0,Te.iterateExtraOptions)(Ce.extra,"",new WeakSet,(ze,He)=>{const Ge=(0,Ee.allocWasmString)(ze,Ve),Ke=(0,Ee.allocWasmString)(He,Ve);if(De._OrtAddSessionConfigEntry($e,Ge,Ke)!==0)throw new Error(`Can't set a session config entry: ${ze} - ${He}`)}),[$e,Ve]}catch(Me){throw $e!==0&&De._OrtReleaseSessionOptions($e),Ve.forEach(De._free),Me}}},4983:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const Te=t(6361);e.allocWasmString=(Ee,Re)=>{const Ce=(0,Te.getInstance)(),De=Ce.lengthBytesUTF8(Ee)+1,$e=Ce._malloc(De);return Ce.stringToUTF8(Ee,$e,De),Re.push($e),$e}},349:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const Te=t(586),Ee=t(4919),Re=t(4983),Ce=t(6361);e.initOrt=(Me,Oe)=>{const Ue=(0,Ce.getInstance)()._OrtInit(Me,Oe);if(Ue!==0)throw new Error(`Can't initialize onnxruntime. error code = ${Ue}`)};const De=new Map;e.createSessionAllocate=Me=>{const Oe=(0,Ce.getInstance)(),Ue=Oe._malloc(Me.byteLength);return Oe.HEAPU8.set(Me,Ue),[Ue,Me.byteLength]},e.createSessionFinalize=(Me,Oe)=>{const Ue=(0,Ce.getInstance)();let ze=0,He=0,Ge=[];try{if([He,Ge]=(0,Ee.setSessionOptions)(Oe),ze=Ue._OrtCreateSession(Me[0],Me[1],He),ze===0)throw new Error("Can't create a session")}finally{Ue._free(Me[0]),Ue._OrtReleaseSessionOptions(He),Ge.forEach(Ue._free)}const Ke=Ue._OrtGetInputCount(ze),Xe=Ue._OrtGetOutputCount(ze),Je=[],un=[],fn=[],yn=[];for(let gn=0;gn<Ke;gn++){const mn=Ue._OrtGetInputName(ze,gn);if(mn===0)throw new Error("Can't get an input name");un.push(mn),Je.push(Ue.UTF8ToString(mn))}for(let gn=0;gn<Xe;gn++){const mn=Ue._OrtGetOutputName(ze,gn);if(mn===0)throw new Error("Can't get an output name");yn.push(mn),fn.push(Ue.UTF8ToString(mn))}return De.set(ze,[ze,un,yn]),[ze,Je,fn]},e.createSession=(Me,Oe)=>{const Ue=(0,e.createSessionAllocate)(Me);return(0,e.createSessionFinalize)(Ue,Oe)},e.releaseSession=Me=>{const Oe=(0,Ce.getInstance)(),Ue=De.get(Me);if(!Ue)throw new Error("invalid session id");const ze=Ue[0],He=Ue[1],Ge=Ue[2];He.forEach(Oe._OrtFree),Ge.forEach(Oe._OrtFree),Oe._OrtReleaseSession(ze),De.delete(Me)};const $e=Me=>{switch(Me){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${Me}`)}},Ve=Me=>{switch(Me){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${Me}`)}},Be=Me=>{switch(Me){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${Me}`)}};e.run=(Me,Oe,Ue,ze,He)=>{const Ge=(0,Ce.getInstance)(),Ke=De.get(Me);if(!Ke)throw new Error("invalid session id");const Xe=Ke[0],Je=Ke[1],un=Ke[2],fn=Oe.length,yn=ze.length;let gn=0,mn=[];const dn=[],vn=[];try{[gn,mn]=(0,Te.setRunOptions)(He);for(let On=0;On<fn;On++){const Fn=Ue[On][0],$n=Ue[On][1],Hn=Ue[On][2];let Dn,Un;if(Array.isArray(Hn)){Un=4*Hn.length,Dn=Ge._malloc(Un),vn.push(Dn);let Yn=Dn/4;for(let Jn=0;Jn<Hn.length;Jn++){if(typeof Hn[Jn]!="string")throw new TypeError(`tensor data at index ${Jn} is not a string`);Ge.HEAPU32[Yn++]=(0,Re.allocWasmString)(Hn[Jn],vn)}}else Un=Hn.byteLength,Dn=Ge._malloc(Un),vn.push(Dn),Ge.HEAPU8.set(new Uint8Array(Hn.buffer,Hn.byteOffset,Un),Dn);const Cn=Ge.stackSave(),kn=Ge.stackAlloc(4*$n.length);try{let Yn=kn/4;$n.forEach(sr=>Ge.HEAP32[Yn++]=sr);const Jn=Ge._OrtCreateTensor($e(Fn),Dn,Un,kn,$n.length);if(Jn===0)throw new Error("Can't create a tensor");dn.push(Jn)}finally{Ge.stackRestore(Cn)}}const bn=Ge.stackSave(),Tn=Ge.stackAlloc(4*fn),En=Ge.stackAlloc(4*fn),In=Ge.stackAlloc(4*yn),Nn=Ge.stackAlloc(4*yn);try{let On=Tn/4,Fn=En/4,$n=In/4,Hn=Nn/4;for(let Cn=0;Cn<fn;Cn++)Ge.HEAPU32[On++]=dn[Cn],Ge.HEAPU32[Fn++]=Je[Oe[Cn]];for(let Cn=0;Cn<yn;Cn++)Ge.HEAPU32[$n++]=0,Ge.HEAPU32[Hn++]=un[ze[Cn]];let Dn=Ge._OrtRun(Xe,En,Tn,fn,Nn,yn,In,gn);const Un=[];if(Dn===0)for(let Cn=0;Cn<yn;Cn++){const kn=Ge.HEAPU32[In/4+Cn],Yn=Ge.stackSave(),Jn=Ge.stackAlloc(16);let sr,lr=0;try{if(Dn=Ge._OrtGetTensorData(kn,Jn,Jn+4,Jn+8,Jn+12),Dn!==0)throw new Error(`Can't access output tensor data. error code = ${Dn}`);let mr=Jn/4;const gr=Ge.HEAPU32[mr++];lr=Ge.HEAPU32[mr++];const Er=Ge.HEAPU32[mr++],$r=Ge.HEAPU32[mr++],Yr=[];for(let Tr=0;Tr<$r;Tr++)Yr.push(Ge.HEAPU32[Er/4+Tr]);Ge._OrtFree(Er);const Gr=Yr.length===0?1:Yr.reduce((Tr,rr)=>Tr*rr);if(sr=Ve(gr),sr==="string"){const Tr=[];let rr=lr/4;for(let Ni=0;Ni<Gr;Ni++){const Ai=Ge.HEAPU32[rr++],bi=Ni===Gr-1?void 0:Ge.HEAPU32[rr]-Ai;Tr.push(Ge.UTF8ToString(Ai,bi))}Un.push([sr,Yr,Tr])}else{const Tr=new(Be(sr))(Gr);new Uint8Array(Tr.buffer,Tr.byteOffset,Tr.byteLength).set(Ge.HEAPU8.subarray(lr,lr+Tr.byteLength)),Un.push([sr,Yr,Tr])}}finally{Ge.stackRestore(Yn),sr==="string"&&lr&&Ge._free(lr),Ge._OrtReleaseTensor(kn)}}if(Dn===0)return Un;throw new Error(`failed to call OrtRun(). error code = ${Dn}.`)}finally{Ge.stackRestore(bn)}}finally{dn.forEach(Ge._OrtReleaseTensor),vn.forEach(Ge._free),Ge._OrtReleaseRunOptions(gn),mn.forEach(Ge._free)}},e.endProfiling=Me=>{const Oe=(0,Ce.getInstance)(),Ue=De.get(Me);if(!Ue)throw new Error("invalid session id");const ze=Ue[0],He=Oe._OrtEndProfiling(ze);if(He===0)throw new Error("Can't get an profile file name");Oe._OrtFree(He)},e.extractTransferableBuffers=Me=>{const Oe=[];for(const Ue of Me){const ze=Ue[2];!Array.isArray(ze)&&ze.buffer&&Oe.push(ze.buffer)}return Oe}},6361:function(n,e,t){var Te=this&&this.__createBinding||(Object.create?function(He,Ge,Ke,Xe){Xe===void 0&&(Xe=Ke);var Je=Object.getOwnPropertyDescriptor(Ge,Ke);Je&&!("get"in Je?!Ge.__esModule:Je.writable||Je.configurable)||(Je={enumerable:!0,get:function(){return Ge[Ke]}}),Object.defineProperty(He,Xe,Je)}:function(He,Ge,Ke,Xe){Xe===void 0&&(Xe=Ke),He[Xe]=Ge[Ke]}),Ee=this&&this.__setModuleDefault||(Object.create?function(He,Ge){Object.defineProperty(He,"default",{enumerable:!0,value:Ge})}:function(He,Ge){He.default=Ge}),Re=this&&this.__importStar||function(He){if(He&&He.__esModule)return He;var Ge={};if(He!=null)for(var Ke in He)Ke!=="default"&&Object.prototype.hasOwnProperty.call(He,Ke)&&Te(Ge,He,Ke);return Ee(Ge,He),Ge},Ce=this&&this.__importDefault||function(He){return He&&He.__esModule?He:{default:He}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const De=Re(t(6449)),$e=Ce(t(932)),Ve=t(3474);let Be,Me=!1,Oe=!1,Ue=!1;const ze=(He,Ge)=>Ge?He?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":He?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async He=>{if(Me)return Promise.resolve();if(Oe)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ue)throw new Error("previous call to 'initializeWebAssembly()' failed.");Oe=!0;const Ge=He.initTimeout,Ke=He.numThreads,Xe=He.simd,Je=Ke>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),un=Xe&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),fn=typeof He.wasmPaths=="string"?He.wasmPaths:void 0,yn=ze(!1,Je),gn=ze(un,Je),mn=typeof He.wasmPaths=="object"?He.wasmPaths[gn]:void 0;let dn=!1;const vn=[];if(Ge>0&&vn.push(new Promise(bn=>{setTimeout(()=>{dn=!0,bn()},Ge)})),vn.push(new Promise((bn,Tn)=>{const En=Je?Ve:$e.default,In={locateFile:(Nn,On)=>Je&&Nn.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([t(4154)],{type:"text/javascript"})):Nn===yn?mn??(fn??On)+gn:On+Nn};if(Je)if(typeof Blob>"u")In.mainScriptUrlOrBlob=De.join("/","ort-wasm-threaded.js");else{const Nn=`var ortWasmThreaded=(function(){var _scriptDir;return ${En.toString()}})();`;In.mainScriptUrlOrBlob=new Blob([Nn],{type:"text/javascript"})}En(In).then(Nn=>{Oe=!1,Me=!0,Be=Nn,bn()},Nn=>{Oe=!1,Ue=!0,Tn(Nn)})})),await Promise.race(vn),dn)throw new Error(`WebAssembly backend initializing failed due to timeout: ${Ge}ms`)},e.getInstance=()=>{if(Me&&Be)return Be;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var He;!Me||Oe||Ue||(Oe=!0,(He=Be.PThread)===null||He===void 0||He.terminateAllThreads(),Be=void 0,Oe=!1,Me=!1,Ue=!0)}},9710:(n,e,t)=>{t.d(e,{Z:()=>Re});var Te=t(477),Ee=t.n(Te);function Re(){return Ee()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:n=>{n.exports=function(e,t,Te,Ee){var Re=self||window;try{try{var Ce;try{Ce=new Re.Blob([e])}catch{(Ce=new(Re.BlobBuilder||Re.WebKitBlobBuilder||Re.MozBlobBuilder||Re.MSBlobBuilder)).append(e),Ce=Ce.getBlob()}var De=Re.URL||Re.webkitURL,$e=De.createObjectURL(Ce),Ve=new Re[t]($e,Te);return De.revokeObjectURL($e),Ve}catch{return new Re[t]("data:application/javascript,".concat(encodeURIComponent(e)),Te)}}catch{if(!Ee)throw Error("Inline worker is not supported");return new Re[t](Ee,Te)}}},4154:n=>{n.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:n=>{n.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(n,e,t)=>{t.r(e),t.d(e,{flatbuffers:()=>Te});var Te={};Te.Offset,Te.Table,Te.SIZEOF_SHORT=2,Te.SIZEOF_INT=4,Te.FILE_IDENTIFIER_LENGTH=4,Te.SIZE_PREFIX_LENGTH=4,Te.Encoding={UTF8_BYTES:1,UTF16_STRING:2},Te.int32=new Int32Array(2),Te.float32=new Float32Array(Te.int32.buffer),Te.float64=new Float64Array(Te.int32.buffer),Te.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,Te.Long=function(Ee,Re){this.low=0|Ee,this.high=0|Re},Te.Long.create=function(Ee,Re){return Ee==0&&Re==0?Te.Long.ZERO:new Te.Long(Ee,Re)},Te.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},Te.Long.prototype.equals=function(Ee){return this.low==Ee.low&&this.high==Ee.high},Te.Long.ZERO=new Te.Long(0,0),Te.Builder=function(Ee){if(Ee)Re=Ee;else var Re=1024;this.bb=Te.ByteBuffer.allocate(Re),this.space=Re,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Te.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Te.Builder.prototype.forceDefaults=function(Ee){this.force_defaults=Ee},Te.Builder.prototype.dataBuffer=function(){return this.bb},Te.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},Te.Builder.prototype.prep=function(Ee,Re){Ee>this.minalign&&(this.minalign=Ee);for(var Ce=1+~(this.bb.capacity()-this.space+Re)&Ee-1;this.space<Ce+Ee+Re;){var De=this.bb.capacity();this.bb=Te.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-De}this.pad(Ce)},Te.Builder.prototype.pad=function(Ee){for(var Re=0;Re<Ee;Re++)this.bb.writeInt8(--this.space,0)},Te.Builder.prototype.writeInt8=function(Ee){this.bb.writeInt8(this.space-=1,Ee)},Te.Builder.prototype.writeInt16=function(Ee){this.bb.writeInt16(this.space-=2,Ee)},Te.Builder.prototype.writeInt32=function(Ee){this.bb.writeInt32(this.space-=4,Ee)},Te.Builder.prototype.writeInt64=function(Ee){this.bb.writeInt64(this.space-=8,Ee)},Te.Builder.prototype.writeFloat32=function(Ee){this.bb.writeFloat32(this.space-=4,Ee)},Te.Builder.prototype.writeFloat64=function(Ee){this.bb.writeFloat64(this.space-=8,Ee)},Te.Builder.prototype.addInt8=function(Ee){this.prep(1,0),this.writeInt8(Ee)},Te.Builder.prototype.addInt16=function(Ee){this.prep(2,0),this.writeInt16(Ee)},Te.Builder.prototype.addInt32=function(Ee){this.prep(4,0),this.writeInt32(Ee)},Te.Builder.prototype.addInt64=function(Ee){this.prep(8,0),this.writeInt64(Ee)},Te.Builder.prototype.addFloat32=function(Ee){this.prep(4,0),this.writeFloat32(Ee)},Te.Builder.prototype.addFloat64=function(Ee){this.prep(8,0),this.writeFloat64(Ee)},Te.Builder.prototype.addFieldInt8=function(Ee,Re,Ce){(this.force_defaults||Re!=Ce)&&(this.addInt8(Re),this.slot(Ee))},Te.Builder.prototype.addFieldInt16=function(Ee,Re,Ce){(this.force_defaults||Re!=Ce)&&(this.addInt16(Re),this.slot(Ee))},Te.Builder.prototype.addFieldInt32=function(Ee,Re,Ce){(this.force_defaults||Re!=Ce)&&(this.addInt32(Re),this.slot(Ee))},Te.Builder.prototype.addFieldInt64=function(Ee,Re,Ce){!this.force_defaults&&Re.equals(Ce)||(this.addInt64(Re),this.slot(Ee))},Te.Builder.prototype.addFieldFloat32=function(Ee,Re,Ce){(this.force_defaults||Re!=Ce)&&(this.addFloat32(Re),this.slot(Ee))},Te.Builder.prototype.addFieldFloat64=function(Ee,Re,Ce){(this.force_defaults||Re!=Ce)&&(this.addFloat64(Re),this.slot(Ee))},Te.Builder.prototype.addFieldOffset=function(Ee,Re,Ce){(this.force_defaults||Re!=Ce)&&(this.addOffset(Re),this.slot(Ee))},Te.Builder.prototype.addFieldStruct=function(Ee,Re,Ce){Re!=Ce&&(this.nested(Re),this.slot(Ee))},Te.Builder.prototype.nested=function(Ee){if(Ee!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},Te.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},Te.Builder.prototype.slot=function(Ee){this.vtable[Ee]=this.offset()},Te.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},Te.Builder.growByteBuffer=function(Ee){var Re=Ee.capacity();if(3221225472&Re)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var Ce=Re<<1,De=Te.ByteBuffer.allocate(Ce);return De.setPosition(Ce-Re),De.bytes().set(Ee.bytes(),Ce-Re),De},Te.Builder.prototype.addOffset=function(Ee){this.prep(Te.SIZEOF_INT,0),this.writeInt32(this.offset()-Ee+Te.SIZEOF_INT)},Te.Builder.prototype.startObject=function(Ee){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=Ee;for(var Re=0;Re<Ee;Re++)this.vtable[Re]=0;this.isNested=!0,this.object_start=this.offset()},Te.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var Ee=this.offset(),Re=this.vtable_in_use-1;Re>=0&&this.vtable[Re]==0;Re--);for(var Ce=Re+1;Re>=0;Re--)this.addInt16(this.vtable[Re]!=0?Ee-this.vtable[Re]:0);this.addInt16(Ee-this.object_start);var De=(Ce+2)*Te.SIZEOF_SHORT;this.addInt16(De);var $e=0,Ve=this.space;e:for(Re=0;Re<this.vtables.length;Re++){var Be=this.bb.capacity()-this.vtables[Re];if(De==this.bb.readInt16(Be)){for(var Me=Te.SIZEOF_SHORT;Me<De;Me+=Te.SIZEOF_SHORT)if(this.bb.readInt16(Ve+Me)!=this.bb.readInt16(Be+Me))continue e;$e=this.vtables[Re];break}}return $e?(this.space=this.bb.capacity()-Ee,this.bb.writeInt32(this.space,$e-Ee)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-Ee,this.offset()-Ee)),this.isNested=!1,Ee},Te.Builder.prototype.finish=function(Ee,Re,Ce){var De=Ce?Te.SIZE_PREFIX_LENGTH:0;if(Re){var $e=Re;if(this.prep(this.minalign,Te.SIZEOF_INT+Te.FILE_IDENTIFIER_LENGTH+De),$e.length!=Te.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Te.FILE_IDENTIFIER_LENGTH);for(var Ve=Te.FILE_IDENTIFIER_LENGTH-1;Ve>=0;Ve--)this.writeInt8($e.charCodeAt(Ve))}this.prep(this.minalign,Te.SIZEOF_INT+De),this.addOffset(Ee),De&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},Te.Builder.prototype.finishSizePrefixed=function(Ee,Re){this.finish(Ee,Re,!0)},Te.Builder.prototype.requiredField=function(Ee,Re){var Ce=this.bb.capacity()-Ee,De=Ce-this.bb.readInt32(Ce);if(this.bb.readInt16(De+Re)==0)throw new Error("FlatBuffers: field "+Re+" must be set")},Te.Builder.prototype.startVector=function(Ee,Re,Ce){this.notNested(),this.vector_num_elems=Re,this.prep(Te.SIZEOF_INT,Ee*Re),this.prep(Ce,Ee*Re)},Te.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},Te.Builder.prototype.createString=function(Ee){if(Ee instanceof Uint8Array)var Re=Ee;else{Re=[];for(var Ce=0;Ce<Ee.length;){var De,$e=Ee.charCodeAt(Ce++);(De=$e<55296||$e>=56320?$e:($e<<10)+Ee.charCodeAt(Ce++)+-56613888)<128?Re.push(De):(De<2048?Re.push(De>>6&31|192):(De<65536?Re.push(De>>12&15|224):Re.push(De>>18&7|240,De>>12&63|128),Re.push(De>>6&63|128)),Re.push(63&De|128))}}this.addInt8(0),this.startVector(1,Re.length,1),this.bb.setPosition(this.space-=Re.length),Ce=0;for(var Ve=this.space,Be=this.bb.bytes();Ce<Re.length;Ce++)Be[Ve++]=Re[Ce];return this.endVector()},Te.Builder.prototype.createLong=function(Ee,Re){return Te.Long.create(Ee,Re)},Te.ByteBuffer=function(Ee){this.bytes_=Ee,this.position_=0},Te.ByteBuffer.allocate=function(Ee){return new Te.ByteBuffer(new Uint8Array(Ee))},Te.ByteBuffer.prototype.clear=function(){this.position_=0},Te.ByteBuffer.prototype.bytes=function(){return this.bytes_},Te.ByteBuffer.prototype.position=function(){return this.position_},Te.ByteBuffer.prototype.setPosition=function(Ee){this.position_=Ee},Te.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},Te.ByteBuffer.prototype.readInt8=function(Ee){return this.readUint8(Ee)<<24>>24},Te.ByteBuffer.prototype.readUint8=function(Ee){return this.bytes_[Ee]},Te.ByteBuffer.prototype.readInt16=function(Ee){return this.readUint16(Ee)<<16>>16},Te.ByteBuffer.prototype.readUint16=function(Ee){return this.bytes_[Ee]|this.bytes_[Ee+1]<<8},Te.ByteBuffer.prototype.readInt32=function(Ee){return this.bytes_[Ee]|this.bytes_[Ee+1]<<8|this.bytes_[Ee+2]<<16|this.bytes_[Ee+3]<<24},Te.ByteBuffer.prototype.readUint32=function(Ee){return this.readInt32(Ee)>>>0},Te.ByteBuffer.prototype.readInt64=function(Ee){return new Te.Long(this.readInt32(Ee),this.readInt32(Ee+4))},Te.ByteBuffer.prototype.readUint64=function(Ee){return new Te.Long(this.readUint32(Ee),this.readUint32(Ee+4))},Te.ByteBuffer.prototype.readFloat32=function(Ee){return Te.int32[0]=this.readInt32(Ee),Te.float32[0]},Te.ByteBuffer.prototype.readFloat64=function(Ee){return Te.int32[Te.isLittleEndian?0:1]=this.readInt32(Ee),Te.int32[Te.isLittleEndian?1:0]=this.readInt32(Ee+4),Te.float64[0]},Te.ByteBuffer.prototype.writeInt8=function(Ee,Re){this.bytes_[Ee]=Re},Te.ByteBuffer.prototype.writeUint8=function(Ee,Re){this.bytes_[Ee]=Re},Te.ByteBuffer.prototype.writeInt16=function(Ee,Re){this.bytes_[Ee]=Re,this.bytes_[Ee+1]=Re>>8},Te.ByteBuffer.prototype.writeUint16=function(Ee,Re){this.bytes_[Ee]=Re,this.bytes_[Ee+1]=Re>>8},Te.ByteBuffer.prototype.writeInt32=function(Ee,Re){this.bytes_[Ee]=Re,this.bytes_[Ee+1]=Re>>8,this.bytes_[Ee+2]=Re>>16,this.bytes_[Ee+3]=Re>>24},Te.ByteBuffer.prototype.writeUint32=function(Ee,Re){this.bytes_[Ee]=Re,this.bytes_[Ee+1]=Re>>8,this.bytes_[Ee+2]=Re>>16,this.bytes_[Ee+3]=Re>>24},Te.ByteBuffer.prototype.writeInt64=function(Ee,Re){this.writeInt32(Ee,Re.low),this.writeInt32(Ee+4,Re.high)},Te.ByteBuffer.prototype.writeUint64=function(Ee,Re){this.writeUint32(Ee,Re.low),this.writeUint32(Ee+4,Re.high)},Te.ByteBuffer.prototype.writeFloat32=function(Ee,Re){Te.float32[0]=Re,this.writeInt32(Ee,Te.int32[0])},Te.ByteBuffer.prototype.writeFloat64=function(Ee,Re){Te.float64[0]=Re,this.writeInt32(Ee,Te.int32[Te.isLittleEndian?0:1]),this.writeInt32(Ee+4,Te.int32[Te.isLittleEndian?1:0])},Te.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+Te.SIZEOF_INT+Te.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var Ee="",Re=0;Re<Te.FILE_IDENTIFIER_LENGTH;Re++)Ee+=String.fromCharCode(this.readInt8(this.position_+Te.SIZEOF_INT+Re));return Ee},Te.ByteBuffer.prototype.__offset=function(Ee,Re){var Ce=Ee-this.readInt32(Ee);return Re<this.readInt16(Ce)?this.readInt16(Ce+Re):0},Te.ByteBuffer.prototype.__union=function(Ee,Re){return Ee.bb_pos=Re+this.readInt32(Re),Ee.bb=this,Ee},Te.ByteBuffer.prototype.__string=function(Ee,Re){Ee+=this.readInt32(Ee);var Ce=this.readInt32(Ee),De="",$e=0;if(Ee+=Te.SIZEOF_INT,Re===Te.Encoding.UTF8_BYTES)return this.bytes_.subarray(Ee,Ee+Ce);for(;$e<Ce;){var Ve,Be=this.readUint8(Ee+$e++);if(Be<192)Ve=Be;else{var Me=this.readUint8(Ee+$e++);if(Be<224)Ve=(31&Be)<<6|63&Me;else{var Oe=this.readUint8(Ee+$e++);Ve=Be<240?(15&Be)<<12|(63&Me)<<6|63&Oe:(7&Be)<<18|(63&Me)<<12|(63&Oe)<<6|63&this.readUint8(Ee+$e++)}}Ve<65536?De+=String.fromCharCode(Ve):(Ve-=65536,De+=String.fromCharCode(55296+(Ve>>10),56320+(1023&Ve)))}return De},Te.ByteBuffer.prototype.__indirect=function(Ee){return Ee+this.readInt32(Ee)},Te.ByteBuffer.prototype.__vector=function(Ee){return Ee+this.readInt32(Ee)+Te.SIZEOF_INT},Te.ByteBuffer.prototype.__vector_len=function(Ee){return this.readInt32(Ee+this.readInt32(Ee))},Te.ByteBuffer.prototype.__has_identifier=function(Ee){if(Ee.length!=Te.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Te.FILE_IDENTIFIER_LENGTH);for(var Re=0;Re<Te.FILE_IDENTIFIER_LENGTH;Re++)if(Ee.charCodeAt(Re)!=this.readInt8(this.position_+Te.SIZEOF_INT+Re))return!1;return!0},Te.ByteBuffer.prototype.createLong=function(Ee,Re){return Te.Long.create(Ee,Re)}}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(n,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),__webpack_require__.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())}(ortWeb_min$1)),ortWeb_min$1.exports}var ortWeb_minExports=requireOrtWeb_min();const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];typeof process<"u"&&process?.release?.name==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env?.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={version:VERSION,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR};function isEmpty(n){return Object.keys(n).length===0}var define_process_env_default={};class FileResponse{_CONTENT_TYPE_MAP={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};constructor(e){if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let t=sharp.statSync(e);this.headers.set("content-length",t.size.toString()),this.updateContentType();let Te=this;this.body=new ReadableStream({start(Ee){Te.arrayBuffer().then(Re=>{Ee.enqueue(new Uint8Array(Re)),Ee.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(n,e=null,t=null){let Te;try{Te=new URL(n)}catch{return!1}return!(e&&!e.includes(Te.protocol)||t&&!t.includes(Te.hostname))}async function getFile(n){if(env$1.useFS&&!isValidUrl(n,["http:","https:","blob:"]))return new FileResponse(n);if(typeof process<"u"&&process?.release?.name==="node"){const e=!!define_process_env_default?.TESTING_REMOTELY,t=env$1.version,Te=new Headers;if(Te.set("User-Agent",`transformers.js/${t}; is_ci/${e};`),isValidUrl(n,["http:","https:"],["huggingface.co","hf.co"])){const Re=define_process_env_default?.HF_TOKEN??define_process_env_default?.HF_ACCESS_TOKEN;Re&&Te.set("Authorization",`Bearer ${Re}`)}return fetch(n,{headers:Te})}else return fetch(n)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(n,e,t){if(!t)return null;const Te=ERROR_MAPPING[n]??`Error (${n}) occurred while trying to load file`;throw Error(`${Te}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let t=sharp.join(this.path,e),Te=new FileResponse(t);if(Te.exists)return Te}async put(e,t){const Te=Buffer.from(await t.arrayBuffer());let Ee=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(Ee),{recursive:!0}),await sharp.promises.writeFile(Ee,Te)}catch(Re){console.warn("An error occurred while writing the file to cache:",Re)}}}async function tryCache(n,...e){for(let t of e)try{let Te=await n.match(t);if(Te)return Te}catch{continue}}async function getModelFile(n,e,t=!0,Te={}){dispatchCallback(Te.progress_callback,{status:"initiate",name:n,file:e});let Ee;if(!Ee&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{Ee=await caches.open("transformers-cache")}catch(Ke){console.warn("An error occurred while opening the browser cache:",Ke)}}!Ee&&env$1.useFSCache&&(Ee=new FileCache(Te.cache_dir??env$1.cacheDir));const Re=Te.revision??"main";let Ce=pathJoin(n,e),De=pathJoin(env$1.localModelPath,Ce),$e=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",n).replaceAll("{revision}",encodeURIComponent(Re)),e),Ve=Re==="main"?Ce:pathJoin(n,Re,e),Be,Me=Ee instanceof FileCache?Ve:$e,Oe=!1,Ue;Ee&&(Ue=await tryCache(Ee,De,Me));const ze=Ue!==void 0;if(Ue===void 0){if(isValidUrl(Ce,["http:","https:"])){if(Te.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${Ce}.`)}else try{Ue=await getFile(De),Be=De}catch(Xe){console.warn(`Unable to load from local path "${De}": "${Xe}"`)}if(Ue===void 0||Ue.status===404){if(Te.local_files_only){if(t)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${De}".`);return null}if(Ue=await getFile($e),Ue.status!==200)return handleError(Ue.status,$e,t);Be=Me}Oe=Ee&&typeof Response<"u"&&Ue instanceof Response&&Ue.status===200}dispatchCallback(Te.progress_callback,{status:"download",name:n,file:e});const He={status:"progress",name:n,file:e};let Ge;return Te.progress_callback?ze&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(Ge=new Uint8Array(await Ue.arrayBuffer()),dispatchCallback(Te.progress_callback,{...He,progress:100,loaded:Ge.length,total:Ge.length})):Ge=await readResponse(Ue,Ke=>{dispatchCallback(Te.progress_callback,{...He,...Ke})}):Ge=new Uint8Array(await Ue.arrayBuffer()),Oe&&Be&&await Ee.match(Be)===void 0&&await Ee.put(Be,new Response(Ge,{headers:Ue.headers})).catch(Ke=>{console.warn(`Unable to add response to browser cache: ${Ke}.`)}),dispatchCallback(Te.progress_callback,{status:"done",name:n,file:e}),Ge}async function getModelJSON(n,e,t=!0,Te={}){let Ee=await getModelFile(n,e,t,Te);if(Ee===null)return{};let Ce=new TextDecoder("utf-8").decode(Ee);return JSON.parse(Ce)}async function readResponse(n,e){const t=n.headers.get("Content-Length");t===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let Te=parseInt(t??"0"),Ee=new Uint8Array(Te),Re=0;const Ce=n.body.getReader();async function De(){const{done:$e,value:Ve}=await Ce.read();if($e)return;let Be=Re+Ve.length;if(Be>Te){Te=Be;let Oe=new Uint8Array(Te);Oe.set(Ee),Ee=Oe}Ee.set(Ve,Re),Re=Be;const Me=Re/Te*100;return e({progress:Me,loaded:Re,total:Te}),De()}return await De(),Ee}function pathJoin(...n){return n=n.map((e,t)=>(t&&(e=e.replace(new RegExp("^/"),"")),t!==n.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),n.join("/")}function interpolate_data(n,[e,t,Te],[Ee,Re],Ce="bilinear",De=!1){const $e=Re/Te,Ve=Ee/t,Be=new n.constructor(Ee*Re*e),Me=t*Te,Oe=Ee*Re;for(let Ue=0;Ue<Ee;++Ue)for(let ze=0;ze<Re;++ze){const He=Ue*Re+ze,Ge=(ze+.5)/$e-.5,Ke=(Ue+.5)/Ve-.5;let Xe=Math.floor(Ge),Je=Math.floor(Ke);const un=Math.min(Xe+1,Te-1),fn=Math.min(Je+1,t-1);Xe=Math.max(Xe,0),Je=Math.max(Je,0);const yn=Ge-Xe,gn=Ke-Je,mn=(1-yn)*(1-gn),dn=yn*(1-gn),vn=(1-yn)*gn,bn=yn*gn,Tn=Je*Te,En=fn*Te,In=Tn+Xe,Nn=Tn+un,On=En+Xe,Fn=En+un;for(let $n=0;$n<e;++$n){const Hn=$n*Me;Be[$n*Oe+He]=mn*n[Hn+In]+dn*n[Hn+Nn]+vn*n[Hn+On]+bn*n[Hn+Fn]}}return Be}function permute_data(n,e,t){const Te=new Array(t.length),Ee=new Array(t.length);for(let De=t.length-1,$e=1;De>=0;--De)Ee[De]=$e,Te[De]=e[t[De]],$e*=Te[De];const Re=t.map((De,$e)=>Ee[t.indexOf($e)]),Ce=new n.constructor(n.length);for(let De=0;De<n.length;++De){let $e=0;for(let Ve=e.length-1,Be=De;Ve>=0;--Ve)$e+=Be%e[Ve]*Re[Ve],Be=Math.floor(Be/e[Ve]);Ce[$e]=n[De]}return[Ce,Te]}function softmax(n){const e=max(n)[0],t=n.map(Re=>Math.exp(Re-e)),Te=t.reduce((Re,Ce)=>Re+Ce,0);return t.map(Re=>Re/Te)}function log_softmax(n){return softmax(n).map(Te=>Math.log(Te))}function getTopItems(n,e=0){return n=Array.from(n).map((t,Te)=>[Te,t]).sort((t,Te)=>Te[1]-t[1]),e!==null&&e>0&&(n=n.slice(0,e)),n}function min(n){if(n.length===0)throw Error("Array must not be empty");let e=n[0],t=0;for(let Te=1;Te<n.length;++Te)n[Te]<e&&(e=n[Te],t=Te);return[e,t]}function max(n){if(n.length===0)throw Error("Array must not be empty");let e=n[0],t=0;for(let Te=1;Te<n.length;++Te)n[Te]>e&&(e=n[Te],t=Te);return[Number(e),t]}function isPowerOfTwo(n){return n>0&&(n&n-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let Te=0;Te<this.table.length;Te+=2){const Ee=Math.PI*Te/this.size;this.table[Te]=Math.cos(Ee),this.table[Te+1]=-Math.sin(Ee)}let t=0;for(let Te=1;this.size>Te;Te<<=1)++t;this._width=t%2===0?t-1:t,this._bitrev=new Int32Array(1<<this._width);for(let Te=0;Te<this._bitrev.length;++Te){this._bitrev[Te]=0;for(let Ee=0;Ee<this._width;Ee+=2){const Re=this._width-Ee-2;this._bitrev[Te]|=(Te>>>Ee&3)<<Re}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,t){const Te=t||new Array(e.length>>>1);for(let Ee=0;Ee<e.length;Ee+=2)Te[Ee>>>1]=e[Ee];return Te}toComplexArray(e,t){const Te=t||this.createComplexArray();for(let Ee=0;Ee<Te.length;Ee+=2)Te[Ee]=e[Ee>>>1],Te[Ee+1]=0;return Te}transform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,1)}realTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._realTransform4(e,t,1)}inverseTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,-1);for(let Te=0;Te<e.length;++Te)e[Te]/=this.size}_transform4(e,t,Te){const Ee=this._csize;let Ce=1<<this._width,De=Ee/Ce<<1,$e,Ve;const Be=this._bitrev;if(De===4)for($e=0,Ve=0;$e<Ee;$e+=De,++Ve){const Oe=Be[Ve];this._singleTransform2(t,e,$e,Oe,Ce)}else for($e=0,Ve=0;$e<Ee;$e+=De,++Ve){const Oe=Be[Ve];this._singleTransform4(t,e,$e,Oe,Ce,Te)}const Me=this.table;for(Ce>>=2;Ce>=2;Ce>>=2){De=Ee/Ce<<1;const Oe=De>>>2;for($e=0;$e<Ee;$e+=De){const Ue=$e+Oe-1;for(let ze=$e,He=0;ze<Ue;ze+=2,He+=Ce){const Ge=ze,Ke=Ge+Oe,Xe=Ke+Oe,Je=Xe+Oe,un=e[Ge],fn=e[Ge+1],yn=e[Ke],gn=e[Ke+1],mn=e[Xe],dn=e[Xe+1],vn=e[Je],bn=e[Je+1],Tn=Me[He],En=Te*Me[He+1],In=yn*Tn-gn*En,Nn=yn*En+gn*Tn,On=Me[2*He],Fn=Te*Me[2*He+1],$n=mn*On-dn*Fn,Hn=mn*Fn+dn*On,Dn=Me[3*He],Un=Te*Me[3*He+1],Cn=vn*Dn-bn*Un,kn=vn*Un+bn*Dn,Yn=un+$n,Jn=fn+Hn,sr=un-$n,lr=fn-Hn,mr=In+Cn,gr=Nn+kn,Er=Te*(In-Cn),$r=Te*(Nn-kn);e[Ge]=Yn+mr,e[Ge+1]=Jn+gr,e[Ke]=sr+$r,e[Ke+1]=lr-Er,e[Xe]=Yn-mr,e[Xe+1]=Jn-gr,e[Je]=sr-$r,e[Je+1]=lr+Er}}}}_singleTransform2(e,t,Te,Ee,Re){const Ce=e[Ee],De=e[Ee+1],$e=e[Ee+Re],Ve=e[Ee+Re+1];t[Te]=Ce+$e,t[Te+1]=De+Ve,t[Te+2]=Ce-$e,t[Te+3]=De-Ve}_singleTransform4(e,t,Te,Ee,Re,Ce){const De=Re*2,$e=Re*3,Ve=e[Ee],Be=e[Ee+1],Me=e[Ee+Re],Oe=e[Ee+Re+1],Ue=e[Ee+De],ze=e[Ee+De+1],He=e[Ee+$e],Ge=e[Ee+$e+1],Ke=Ve+Ue,Xe=Be+ze,Je=Ve-Ue,un=Be-ze,fn=Me+He,yn=Oe+Ge,gn=Ce*(Me-He),mn=Ce*(Oe-Ge);t[Te]=Ke+fn,t[Te+1]=Xe+yn,t[Te+2]=Je+mn,t[Te+3]=un-gn,t[Te+4]=Ke-fn,t[Te+5]=Xe-yn,t[Te+6]=Je-mn,t[Te+7]=un+gn}_realTransform4(e,t,Te){const Ee=this._csize;let Ce=1<<this._width,De=Ee/Ce<<1,$e,Ve;const Be=this._bitrev;if(De===4)for($e=0,Ve=0;$e<Ee;$e+=De,++Ve){const Ue=Be[Ve];this._singleRealTransform2(t,e,$e,Ue>>>1,Ce>>>1)}else for($e=0,Ve=0;$e<Ee;$e+=De,++Ve){const Ue=Be[Ve];this._singleRealTransform4(t,e,$e,Ue>>>1,Ce>>>1,Te)}const Me=this.table;for(Ce>>=2;Ce>=2;Ce>>=2){De=Ee/Ce<<1;const Ue=De>>>1,ze=Ue>>>1,He=ze>>>1;for($e=0;$e<Ee;$e+=De)for(let Ge=0,Ke=0;Ge<=He;Ge+=2,Ke+=Ce){const Xe=$e+Ge,Je=Xe+ze,un=Je+ze,fn=un+ze,yn=e[Xe],gn=e[Xe+1],mn=e[Je],dn=e[Je+1],vn=e[un],bn=e[un+1],Tn=e[fn],En=e[fn+1],In=yn,Nn=gn,On=Me[Ke],Fn=Te*Me[Ke+1],$n=mn*On-dn*Fn,Hn=mn*Fn+dn*On,Dn=Me[2*Ke],Un=Te*Me[2*Ke+1],Cn=vn*Dn-bn*Un,kn=vn*Un+bn*Dn,Yn=Me[3*Ke],Jn=Te*Me[3*Ke+1],sr=Tn*Yn-En*Jn,lr=Tn*Jn+En*Yn,mr=In+Cn,gr=Nn+kn,Er=In-Cn,$r=Nn-kn,Yr=$n+sr,Gr=Hn+lr,Tr=Te*($n-sr),rr=Te*(Hn-lr);if(e[Xe]=mr+Yr,e[Xe+1]=gr+Gr,e[Je]=Er+rr,e[Je+1]=$r-Tr,Ge===0){e[un]=mr-Yr,e[un+1]=gr-Gr;continue}if(Ge===He)continue;const Ni=$e+ze-Ge,Ai=$e+Ue-Ge;e[Ni]=Er-Te*rr,e[Ni+1]=-$r-Te*Tr,e[Ai]=mr-Te*Yr,e[Ai+1]=-gr+Te*Gr}}const Oe=Ee>>>1;for(let Ue=2;Ue<Oe;Ue+=2)e[Ee-Ue]=e[Ue],e[Ee-Ue+1]=-e[Ue+1]}_singleRealTransform2(e,t,Te,Ee,Re){const Ce=e[Ee],De=e[Ee+Re];t[Te]=Ce+De,t[Te+1]=0,t[Te+2]=Ce-De,t[Te+3]=0}_singleRealTransform4(e,t,Te,Ee,Re,Ce){const De=Re*2,$e=Re*3,Ve=e[Ee],Be=e[Ee+Re],Me=e[Ee+De],Oe=e[Ee+$e],Ue=Ve+Me,ze=Ve-Me,He=Be+Oe,Ge=Ce*(Be-Oe);t[Te]=Ue+He,t[Te+1]=0,t[Te+2]=ze,t[Te+3]=-Ge,t[Te+4]=Ue-He,t[Te+5]=0,t[Te+6]=ze,t[Te+7]=Ge}}class NP2FFT{constructor(e){const t=2*(e-1),Te=2*(2*e-1),Ee=2**Math.ceil(Math.log2(Te));this.bufferSize=Ee,this._a=t;const Re=new Float64Array(Te),Ce=new Float64Array(Ee);this._chirpBuffer=new Float64Array(Ee),this._buffer1=new Float64Array(Ee),this._buffer2=new Float64Array(Ee),this._outBuffer1=new Float64Array(Ee),this._outBuffer2=new Float64Array(Ee);const De=-2*Math.PI/e,$e=Math.cos(De),Ve=Math.sin(De);for(let Be=0;Be<Te>>1;++Be){const Me=(Be+1-e)**2/2,Oe=Math.sqrt($e**2+Ve**2)**Me,Ue=Me*Math.atan2(Ve,$e),ze=2*Be;Re[ze]=Oe*Math.cos(Ue),Re[ze+1]=Oe*Math.sin(Ue),Ce[ze]=Re[ze],Ce[ze+1]=-Re[ze+1]}this._slicedChirpBuffer=Re.subarray(t,Te),this._f=new P2FFT(Ee>>1),this._f.transform(this._chirpBuffer,Ce)}_transform(e,t,Te){const Ee=this._buffer1,Re=this._buffer2,Ce=this._outBuffer1,De=this._outBuffer2,$e=this._chirpBuffer,Ve=this._slicedChirpBuffer,Be=this._a;if(Te)for(let Me=0;Me<Ve.length;Me+=2){const Oe=Me+1,Ue=Me>>1,ze=t[Ue];Ee[Me]=ze*Ve[Me],Ee[Oe]=ze*Ve[Oe]}else for(let Me=0;Me<Ve.length;Me+=2){const Oe=Me+1;Ee[Me]=t[Me]*Ve[Me]-t[Oe]*Ve[Oe],Ee[Oe]=t[Me]*Ve[Oe]+t[Oe]*Ve[Me]}this._f.transform(Ce,Ee);for(let Me=0;Me<$e.length;Me+=2){const Oe=Me+1;Re[Me]=Ce[Me]*$e[Me]-Ce[Oe]*$e[Oe],Re[Oe]=Ce[Me]*$e[Oe]+Ce[Oe]*$e[Me]}this._f.inverseTransform(De,Re);for(let Me=0;Me<De.length;Me+=2){const Oe=De[Me+Be],Ue=De[Me+Be+1],ze=Ve[Me],He=Ve[Me+1];e[Me]=Oe*ze-Ue*He,e[Me+1]=Oe*He+Ue*ze}}transform(e,t){this._transform(e,t,!1)}realTransform(e,t){this._transform(e,t,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,t){this.fft.realTransform(e,t)}transform(e,t){this.fft.transform(e,t)}}function medianFilter(n,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const t=new n.constructor(n.length),Te=new n.constructor(e),Ee=Math.floor(e/2);for(let Re=0;Re<n.length;++Re){let Ce=0;for(let De=-Ee;De<=Ee;++De){let $e=Re+De;$e<0?$e=Math.abs($e):$e>=n.length&&($e=2*(n.length-1)-$e),Te[Ce++]=n[$e]}Te.sort(),t[Re]=Te[Ee]}return t}function round(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function bankers_round(n){const e=Math.round(n);return Math.abs(n)%1===.5?e%2===0?e:e-1:e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{dims;type;data;size;constructor(...e){return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(t,Te)=>{if(typeof Te=="string"){let Ee=Number(Te);if(Number.isInteger(Ee))return t._getitem(Ee)}return t[Te]},set:(t,Te,Ee)=>t[Te]=Ee})}*[Symbol.iterator](){const[e,...t]=this.dims;if(t.length>0){const Te=t.reduce((Ee,Re)=>Ee*Re);for(let Ee=0;Ee<e;++Ee)yield this._subarray(Ee,Te,t)}else yield*this.data}_getitem(e){const[t,...Te]=this.dims;if(e=safeIndex(e,t),Te.length>0){const Ee=Te.reduce((Re,Ce)=>Re*Ce);return this._subarray(e,Ee,Te)}else return new Tensor(this.type,[this.data[e]],Te)}indexOf(e){for(let t=0;t<this.data.length;++t)if(this.data[t]==e)return t;return-1}_subarray(e,t,Te){const Ee=e*t,Re=(e+1)*t,Ce="subarray"in this.data?this.data.subarray(Ee,Re):this.data.slice(Ee,Re);return new Tensor(this.type,Ce,Te)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let t=0;t<this.data.length;++t)this.data[t]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let t=0;t<this.data.length;++t)this.data[t]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let t=[],Te=[];for(let $e=0;$e<this.dims.length;++$e){let Ve=e[$e];if(Ve==null)Te.push([0,this.dims[$e]]),t.push(this.dims[$e]);else if(typeof Ve=="number")Ve=safeIndex(Ve,this.dims[$e],$e),Te.push([Ve,Ve+1]);else if(Array.isArray(Ve)&&Ve.length===2){if(Ve[0]>Ve[1])throw new Error(`Invalid slice: ${Ve}`);let Be=[Math.max(Ve[0],0),Math.min(Ve[1],this.dims[$e])];Te.push(Be),t.push(Be[1]-Be[0])}else throw new Error(`Invalid slice: ${Ve}`)}let Ee=Te.map(([$e,Ve])=>Ve-$e),Re=Ee.reduce(($e,Ve)=>$e*Ve),Ce=new this.data.constructor(Re);const De=this.stride();for(let $e=0;$e<Re;++$e){let Ve=0;for(let Be=Ee.length-1,Me=$e;Be>=0;--Be){const Oe=Ee[Be];Ve+=(Me%Oe+Te[Be][0])*De[Be],Me=Math.floor(Me/Oe)}Ce[$e]=this.data[Ve]}return new Tensor(this.type,Ce,t)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,t=!1){return this.norm(1,e,t)}norm(e="fro",t=null,Te=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(t===null){let Ce=this.data.reduce((De,$e)=>De+$e**e,0)**(1/e);return new Tensor(this.type,[Ce],[])}t=safeIndex(t,this.dims.length);const Ee=this.dims.slice();Ee[t]=1;const Re=new this.data.constructor(this.data.length/this.dims[t]);for(let Ce=0;Ce<this.data.length;++Ce){let De=0;for(let $e=this.dims.length-1,Ve=Ce,Be=1;$e>=0;--$e){const Me=this.dims[$e];if($e!==t){const Oe=Ve%Me;De+=Oe*Be,Be*=Ee[$e]}Ve=Math.floor(Ve/Me)}Re[De]+=this.data[Ce]**e}if(e!==1)for(let Ce=0;Ce<Re.length;++Ce)Re[Ce]=Re[Ce]**(1/e);return Te||Ee.splice(t,1),new Tensor(this.type,Re,Ee)}normalize_(e=2,t=1){t=safeIndex(t,this.dims.length);const Te=this.norm(e,t,!0);for(let Ee=0;Ee<this.data.length;++Ee){let Re=0;for(let Ce=this.dims.length-1,De=Ee,$e=1;Ce>=0;--Ce){const Ve=this.dims[Ce];if(Ce!==t){const Be=De%Ve;Re+=Be*$e,$e*=this.dims[Ce]}De=Math.floor(De/Ve)}this.data[Ee]/=Te.data[Re]}return this}normalize(e=2,t=1){return this.clone().normalize_(e,t)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,t=-1){t=(t+this.dims.length)%this.dims.length;let Te=this.dims.slice(0,e),Ee=this.dims.slice(e,t+1),Re=this.dims.slice(t+1);return this.dims=[...Te,Ee.reduce((Ce,De)=>Ce*De,1),...Re],this}flatten(e=0,t=-1){return this.clone().flatten_(e,t)}view(...e){let t=-1;for(let Te=0;Te<e.length;++Te)if(e[Te]===-1){if(t!==-1)throw new Error("Only one dimension can be inferred");t=Te}if(t!==-1){const Te=e.reduce((Ee,Re,Ce)=>Ce!==t?Ee*Re:Ee,1);e[t]=this.data.length/Te}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,t){for(let Te=0;Te<this.data.length;++Te)this.data[Te]=Math.min(Math.max(this.data[Te],e),t);return this}clamp(e,t){return this.clone().clamp_(e,t)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(n,e){const t=n.length,Te=e.reduce((Re,Ce)=>Re*Ce);if(t!==Te)throw Error(`cannot reshape array of size ${t} into shape (${e})`);let Ee=n;for(let Re=e.length-1;Re>=0;Re--)Ee=Ee.reduce((Ce,De)=>{let $e=Ce[Ce.length-1];return $e.length<e[Re]?$e.push(De):Ce.push([De]),Ce},[[]]);return Ee[0]}function permute(n,e){const[t,Te]=permute_data(n.data,n.dims,e);return new Tensor(n.type,t,Te)}function interpolate(n,[e,t],Te="bilinear",Ee=!1){const Re=n.dims.at(-3)??1,Ce=n.dims.at(-2),De=n.dims.at(-1);let $e=interpolate_data(n.data,[Re,Ce,De],[e,t],Te,Ee);return new Tensor(n.type,$e,[Re,e,t])}function mean_pooling(n,e){let t=[n.dims[0],n.dims[2]],Te=new n.data.constructor(t[0]*t[1]),[Ee,Re,Ce]=n.dims,De=0;for(let $e=0;$e<Ee;++$e){let Ve=$e*Ce*Re;for(let Be=0;Be<Ce;++Be){let Me=0,Oe=0,Ue=$e*Re,ze=Ve+Be;for(let Ge=0;Ge<Re;++Ge){let Ke=Number(e.data[Ue+Ge]);Oe+=Ke,Me+=n.data[ze+Ge*Ce]*Ke}let He=Me/Oe;Te[De++]=He}}return new Tensor(n.type,Te,t)}function calc_squeeze_dims(n,e){return n=n.slice(),e===null?n=n.filter(t=>t!==1):typeof e=="number"?n[e]===1&&n.splice(e,1):Array.isArray(e)&&(n=n.filter((t,Te)=>t!==1||!e.includes(Te))),n}function calc_unsqueeze_dims(n,e){return e=safeIndex(e,n.length+1),n=n.slice(),n.splice(e,0,1),n}function safeIndex(n,e,t=null){if(n<-e||n>=e)throw new Error(`IndexError: index ${n} is out of bounds for dimension${t===null?"":" "+t} with size ${e}`);return n<0&&(n=(n%e+e)%e),n}function cat(n,e=0){e=safeIndex(e,n[0].dims.length);const t=n[0].dims.slice();t[e]=n.reduce((Ce,De)=>Ce+De.dims[e],0);const Te=t.reduce((Ce,De)=>Ce*De,1),Ee=new n[0].data.constructor(Te),Re=n[0].type;if(e===0){let Ce=0;for(let De of n)Ee.set(De.data,Ce),Ce+=De.data.length}else{let Ce=0;for(let De=0;De<n.length;++De){let $e=n[De];for(let Ve=0;Ve<$e.data.length;++Ve){let Be=0;for(let Me=$e.dims.length-1,Oe=Ve,Ue=1;Me>=0;--Me){const ze=$e.dims[Me];let He=Oe%ze;Me===e&&(He+=Ce),Be+=He*Ue,Ue*=t[Me],Oe=Math.floor(Oe/ze)}Ee[Be]=$e.data[Ve]}Ce+=$e.dims[e]}}return new Tensor(Re,Ee,t)}function stack(n,e=0){return cat(n.map(t=>t.unsqueeze(e)),e)}function std_mean(n,e=null,t=1,Te=!1){if(e===null){const Ve=n.data.reduce((Ue,ze)=>Ue+ze,0)/n.data.length,Be=Math.sqrt(n.data.reduce((Ue,ze)=>Ue+(ze-Ve)**2,0)/(n.data.length-t)),Me=new Tensor(n.type,[Ve],[]);return[new Tensor(n.type,[Be],[]),Me]}e=safeIndex(e,n.dims.length);const Ee=mean(n,e,Te),Re=n.dims.slice();Re[e]=1;const Ce=new n.data.constructor(n.data.length/n.dims[e]);for(let $e=0;$e<n.data.length;++$e){let Ve=0;for(let Be=n.dims.length-1,Me=$e,Oe=1;Be>=0;--Be){const Ue=n.dims[Be];if(Be!==e){const ze=Me%Ue;Ve+=ze*Oe,Oe*=Re[Be]}Me=Math.floor(Me/Ue)}Ce[Ve]+=(n.data[$e]-Ee.data[Ve])**2}for(let $e=0;$e<Ce.length;++$e)Ce[$e]=Math.sqrt(Ce[$e]/(n.dims[e]-t));return Te||Re.splice(e,1),[new Tensor(n.type,Ce,Re),Ee]}function mean(n,e=null,t=!1){if(e===null){let Re=n.data.reduce((Ce,De)=>Ce+De,0);return new Tensor(n.type,[Re/n.data.length],[])}e=safeIndex(e,n.dims.length);const Te=n.dims.slice();Te[e]=1;const Ee=new n.data.constructor(n.data.length/n.dims[e]);for(let Re=0;Re<n.data.length;++Re){let Ce=0;for(let De=n.dims.length-1,$e=Re,Ve=1;De>=0;--De){const Be=n.dims[De];if(De!==e){const Me=$e%Be;Ce+=Me*Ve,Ve*=Te[De]}$e=Math.floor($e/Be)}Ee[Ce]+=n.data[Re]}if(n.dims[e]!==1)for(let Re=0;Re<Ee.length;++Re)Ee[Re]=Ee[Re]/n.dims[e];return t||Te.splice(e,1),new Tensor(n.type,Ee,Te)}function dynamicTimeWarping(n){const[e,t]=n.dims,Te=[e+1,t+1],Ee=new Tensor("float32",new Float32Array(Te[0]*Te[1]).fill(1/0),Te),Re=new Tensor("float32",new Float32Array(Te[0]*Te[1]).fill(-1),Te);Ee[0].data[0]=0;for(let Be=1;Be<t+1;++Be)for(let Me=1;Me<e+1;++Me){const Oe=Ee[Me-1][Be-1].item(),Ue=Ee[Me-1][Be].item(),ze=Ee[Me][Be-1].item();let He,Ge;Oe<Ue&&Oe<ze?(He=Oe,Ge=0):Ue<Oe&&Ue<ze?(He=Ue,Ge=1):(He=ze,Ge=2),Ee[Me].data[Be]=n[Me-1][Be-1].item()+He,Re[Me].data[Be]=Ge}let Ce=e,De=t;Re.data.fill(2,0,Te[1]);for(let Be=0;Be<Te[0];++Be)Re[Be].data[0]=1;let $e=[],Ve=[];for(;Ce>0||De>0;)switch($e.push(Ce-1),Ve.push(De-1),Re[Ce][De].item()){case 0:--Ce,--De;break;case 1:--Ce;break;case 2:--De;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${Ce}, ${De}]. Please file a bug report.`)}return $e.reverse(),Ve.reverse(),[$e,Ve]}function dimsToStride(n){const e=new Array(n.length);for(let t=n.length-1,Te=1;t>=0;--t)e[t]=Te,Te*=n[t];return e}function ones(n){const e=n.reduce((t,Te)=>t*Te,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),n)}function ones_like(n){return ones(n.dims)}function quantize_embeddings(n,e){if(n.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(n.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const t=e==="binary",Te=t?"int8":"uint8",Ee=t?Int8Array:Uint8Array,Re=n.data,Ce=new Ee(Re.length/8);for(let De=0;De<Re.length;++De){const $e=Re[De]>0?1:0,Ve=Math.floor(De/8),Be=De%8;Ce[Ve]|=$e<<7-Be,t&&Be===0&&(Ce[Ve]-=128)}return new Tensor(Te,Ce,[n.dims[0],n.dims[1]/8])}class PriorityQueue{constructor(e=(t,Te)=>t>Te){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const t of e)this._heap.push(t),this._siftUp();return this.size}pop(){const e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}replace(e){const t=this.peek();return this._heap[0]=e,this._siftDown(),t}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){const Te=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=Te}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const t=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,t),e=t}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let t of e)this.push(t)}push(e){let t=this.root;for(let Te of e){let Ee=t.children.get(Te);Ee===void 0&&(Ee=CharTrieNode.default(),t.children.set(Te,Ee)),t=Ee}t.isLeaf=!0}*commonPrefixSearch(e){let t=this.root,Te="";for(let Ee=0;Ee<e.length&&t!==void 0;++Ee){const Re=e[Ee];Te+=Re,t=t.children.get(Re),t!==void 0&&t.isLeaf&&(yield Te)}}}class CharTrieNode{constructor(e,t){this.isLeaf=e,this.children=t}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,t,Te){this.sentence=e,this.len=e.length,this.bosTokenId=t,this.eosTokenId=Te,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const Ee=new TokenLatticeNode(this.bosTokenId,0,0,0,0),Re=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(Ee.clone()),this.nodes.push(Re.clone()),this.beginNodes[this.len].push(Re),this.endNodes[0].push(Ee)}insert(e,t,Te,Ee){const Re=this.nodes.length,Ce=new TokenLatticeNode(Ee,Re,e,t,Te);this.beginNodes[e].push(Ce),this.endNodes[e+t].push(Ce),this.nodes.push(Ce)}viterbi(){const e=this.len;let t=0;for(;t<=e;){if(this.beginNodes[t].length==0)return[];for(let De of this.beginNodes[t]){De.prev=null;let $e=0,Ve=null;for(let Be of this.endNodes[t]){const Me=Be.backtraceScore+De.score;(Ve===null||Me>$e)&&(Ve=Be.clone(),$e=Me)}if(Ve!==null)De.prev=Ve,De.backtraceScore=$e;else return[]}++t}const Te=[],Re=this.beginNodes[e][0].prev;if(Re===null)return[];let Ce=Re.clone();for(;Ce.prev!==null;)Te.push(Ce.clone()),Ce=Ce.clone().prev.clone();return Te.reverse(),Te}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(t=>this.piece(t))}tokenIds(){return this.viterbi().map(t=>t.tokenId)}}class TokenLatticeNode{constructor(e,t,Te,Ee,Re){this.tokenId=e,this.nodeId=t,this.pos=Te,this.length=Ee,this.score=Re,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(n,e){this.value=n,this.type=e}};function isWord(n){return/\w/.test(n)}function isInteger(n){return/[0-9]/.test(n)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(n,e={}){return n.endsWith(`
`)&&(n=n.slice(0,-1)),n=n.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(n=n.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(n=n.replace(/([#%]})\n/g,"$1")),n.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(n,e={}){const t=[],Te=preprocess(n,e);let Ee=0;const Re=Ce=>{let De="";for(;Ce(Te[Ee]);){if(Te[Ee]==="\\"){if(++Ee,Ee>=Te.length)throw new SyntaxError("Unexpected end of input");const $e=Te[Ee++],Ve=ESCAPE_CHARACTERS.get($e);if(Ve===void 0)throw new SyntaxError(`Unexpected escaped character: ${$e}`);De+=Ve;continue}if(De+=Te[Ee++],Ee>=Te.length)throw new SyntaxError("Unexpected end of input")}return De};e:for(;Ee<Te.length;){const Ce=t.at(-1)?.type;if(Ce===void 0||Ce===TOKEN_TYPES.CloseStatement||Ce===TOKEN_TYPES.CloseExpression){let $e="";for(;Ee<Te.length&&!(Te[Ee]==="{"&&(Te[Ee+1]==="%"||Te[Ee+1]==="{"));)$e+=Te[Ee++];if($e.length>0){t.push(new Token($e,TOKEN_TYPES.Text));continue}}Re($e=>/\s/.test($e));const De=Te[Ee];if(De==="-"||De==="+"){const $e=t.at(-1)?.type;if($e===TOKEN_TYPES.Text||$e===void 0)throw new SyntaxError(`Unexpected character: ${De}`);switch($e){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++Ee;const Ve=Re(isInteger);t.push(new Token(`${De}${Ve}`,Ve.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[$e,Ve]of ORDERED_MAPPING_TABLE)if(Te.slice(Ee,Ee+$e.length)===$e){t.push(new Token($e,Ve)),Ee+=$e.length;continue e}if(De==="'"||De==='"'){++Ee;const $e=Re(Ve=>Ve!==De);t.push(new Token($e,TOKEN_TYPES.StringLiteral)),++Ee;continue}if(isInteger(De)){const $e=Re(isInteger);t.push(new Token($e,TOKEN_TYPES.NumericLiteral));continue}if(isWord(De)){const $e=Re(isWord),Ve=Object.hasOwn(KEYWORDS,$e)?KEYWORDS[$e]:TOKEN_TYPES.Identifier;Ve===TOKEN_TYPES.In&&t.at(-1)?.type===TOKEN_TYPES.Not?(t.pop(),t.push(new Token("not in",TOKEN_TYPES.NotIn))):t.push(new Token($e,Ve));continue}throw new SyntaxError(`Unexpected character: ${De}`)}return t}var Statement=class{type="Statement"},Program=class extends Statement{constructor(n){super(),this.body=n}type="Program"},If=class extends Statement{constructor(n,e,t){super(),this.test=n,this.body=e,this.alternate=t}type="If"},For=class extends Statement{constructor(n,e,t){super(),this.loopvar=n,this.iterable=e,this.body=t}type="For"},SetStatement=class extends Statement{constructor(n,e){super(),this.assignee=n,this.value=e}type="Set"},Expression=class extends Statement{type="Expression"},MemberExpression=class extends Expression{constructor(n,e,t){super(),this.object=n,this.property=e,this.computed=t}type="MemberExpression"},CallExpression=class extends Expression{constructor(n,e){super(),this.callee=n,this.args=e}type="CallExpression"},Identifier=class extends Expression{constructor(n){super(),this.value=n}type="Identifier"},Literal=class extends Expression{constructor(n){super(),this.value=n}type="Literal"},NumericLiteral=class extends Literal{type="NumericLiteral"},StringLiteral=class extends Literal{type="StringLiteral"},BooleanLiteral=class extends Literal{type="BooleanLiteral"},ArrayLiteral=class extends Literal{type="ArrayLiteral"},TupleLiteral=class extends Literal{type="TupleLiteral"},ObjectLiteral=class extends Literal{type="ObjectLiteral"},BinaryExpression=class extends Expression{constructor(n,e,t){super(),this.operator=n,this.left=e,this.right=t}type="BinaryExpression"},FilterExpression=class extends Expression{constructor(n,e){super(),this.operand=n,this.filter=e}type="FilterExpression"},TestExpression=class extends Expression{constructor(n,e,t){super(),this.operand=n,this.negate=e,this.test=t}type="TestExpression"},UnaryExpression=class extends Expression{constructor(n,e){super(),this.operator=n,this.argument=e}type="UnaryExpression"},SliceExpression=class extends Expression{constructor(n=void 0,e=void 0,t=void 0){super(),this.start=n,this.stop=e,this.step=t}type="SliceExpression"},KeywordArgumentExpression=class extends Expression{constructor(n,e){super(),this.key=n,this.value=e}type="KeywordArgumentExpression"};function parse(n){const e=new Program([]);let t=0;function Te(Nn,On){const Fn=n[t++];if(!Fn||Fn.type!==Nn)throw new Error(`Parser Error: ${On}. ${Fn.type} !== ${Nn}.`);return Fn}function Ee(){switch(n[t].type){case TOKEN_TYPES.Text:return De();case TOKEN_TYPES.OpenStatement:return $e();case TOKEN_TYPES.OpenExpression:return Ve();default:throw new SyntaxError(`Unexpected token type: ${n[t].type}`)}}function Re(...Nn){return t+Nn.length<=n.length&&Nn.some((On,Fn)=>On!==n[t+Fn].type)}function Ce(...Nn){return t+Nn.length<=n.length&&Nn.every((On,Fn)=>On===n[t+Fn].type)}function De(){return new StringLiteral(Te(TOKEN_TYPES.Text,"Expected text token").value)}function $e(){Te(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let Nn;switch(n[t].type){case TOKEN_TYPES.Set:++t,Nn=Be(),Te(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++t,Nn=Me(),Te(TOKEN_TYPES.OpenStatement,"Expected {% token"),Te(TOKEN_TYPES.EndIf,"Expected endif token"),Te(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++t,Nn=Ue(),Te(TOKEN_TYPES.OpenStatement,"Expected {% token"),Te(TOKEN_TYPES.EndFor,"Expected endfor token"),Te(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${n[t].type}`)}return Nn}function Ve(){Te(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const Nn=ze();return Te(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),Nn}function Be(){const Nn=ze();if(Ce(TOKEN_TYPES.Equals)){++t;const On=Be();return new SetStatement(Nn,On)}return Nn}function Me(){const Nn=ze();Te(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const On=[],Fn=[];for(;!(n[t]?.type===TOKEN_TYPES.OpenStatement&&(n[t+1]?.type===TOKEN_TYPES.ElseIf||n[t+1]?.type===TOKEN_TYPES.Else||n[t+1]?.type===TOKEN_TYPES.EndIf));)On.push(Ee());if(n[t]?.type===TOKEN_TYPES.OpenStatement&&n[t+1]?.type!==TOKEN_TYPES.EndIf)if(++t,Ce(TOKEN_TYPES.ElseIf))Te(TOKEN_TYPES.ElseIf,"Expected elseif token"),Fn.push(Me());else for(Te(TOKEN_TYPES.Else,"Expected else token"),Te(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(n[t]?.type===TOKEN_TYPES.OpenStatement&&n[t+1]?.type===TOKEN_TYPES.EndIf);)Fn.push(Ee());return new If(Nn,On,Fn)}function Oe(Nn=!1){const On=Nn?In:ze,Fn=[On()],$n=Ce(TOKEN_TYPES.Comma);for(;$n&&(++t,Fn.push(On()),!!Ce(TOKEN_TYPES.Comma)););return $n?new TupleLiteral(Fn):Fn[0]}function Ue(){const Nn=Oe(!0);if(!(Nn instanceof Identifier||Nn instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Nn.type} instead`);Te(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const On=ze();Te(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Fn=[];for(;Re(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)Fn.push(Ee());return new For(Nn,On,Fn)}function ze(){return He()}function He(){const Nn=Ge();if(Ce(TOKEN_TYPES.If)){++t;const On=Ge();Te(TOKEN_TYPES.Else,"Expected else token");const Fn=Ge();return new If(On,[Nn],[Fn])}return Nn}function Ge(){let Nn=Ke();for(;Ce(TOKEN_TYPES.Or);){const On=n[t];++t;const Fn=Ke();Nn=new BinaryExpression(On,Nn,Fn)}return Nn}function Ke(){let Nn=Xe();for(;Ce(TOKEN_TYPES.And);){const On=n[t];++t;const Fn=Xe();Nn=new BinaryExpression(On,Nn,Fn)}return Nn}function Xe(){let Nn;for(;Ce(TOKEN_TYPES.Not);){const On=n[t];++t;const Fn=Xe();Nn=new UnaryExpression(On,Fn)}return Nn??Je()}function Je(){let Nn=un();for(;Ce(TOKEN_TYPES.ComparisonBinaryOperator)||Ce(TOKEN_TYPES.In)||Ce(TOKEN_TYPES.NotIn);){const On=n[t];++t;const Fn=un();Nn=new BinaryExpression(On,Nn,Fn)}return Nn}function un(){let Nn=bn();for(;Ce(TOKEN_TYPES.AdditiveBinaryOperator);){const On=n[t];++t;const Fn=bn();Nn=new BinaryExpression(On,Nn,Fn)}return Nn}function fn(){const Nn=vn();return Ce(TOKEN_TYPES.OpenParen)?yn(Nn):Nn}function yn(Nn){let On=new CallExpression(Nn,gn());return Ce(TOKEN_TYPES.OpenParen)&&(On=yn(On)),On}function gn(){Te(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const Nn=mn();return Te(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),Nn}function mn(){const Nn=[];for(;!Ce(TOKEN_TYPES.CloseParen);){let On=ze();if(Ce(TOKEN_TYPES.Equals)){if(++t,!(On instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const Fn=ze();On=new KeywordArgumentExpression(On,Fn)}Nn.push(On),Ce(TOKEN_TYPES.Comma)&&++t}return Nn}function dn(){const Nn=[];let On=!1;for(;!Ce(TOKEN_TYPES.CloseSquareBracket);)Ce(TOKEN_TYPES.Colon)?(Nn.push(void 0),++t,On=!0):(Nn.push(ze()),Ce(TOKEN_TYPES.Colon)&&(++t,On=!0));if(Nn.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(On){if(Nn.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...Nn)}return Nn[0]}function vn(){let Nn=In();for(;Ce(TOKEN_TYPES.Dot)||Ce(TOKEN_TYPES.OpenSquareBracket);){const On=n[t];++t;let Fn;const $n=On.type!==TOKEN_TYPES.Dot;if($n)Fn=dn(),Te(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(Fn=In(),Fn.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Nn=new MemberExpression(Nn,Fn,$n)}return Nn}function bn(){let Nn=Tn();for(;Ce(TOKEN_TYPES.MultiplicativeBinaryOperator);){const On=n[t];++t;const Fn=Tn();Nn=new BinaryExpression(On,Nn,Fn)}return Nn}function Tn(){let Nn=En();for(;Ce(TOKEN_TYPES.Is);){++t;const On=Ce(TOKEN_TYPES.Not);On&&++t;let Fn=In();if(Fn instanceof BooleanLiteral&&(Fn=new Identifier(Fn.value.toString())),!(Fn instanceof Identifier))throw new SyntaxError("Expected identifier for the test");Nn=new TestExpression(Nn,On,Fn)}return Nn}function En(){let Nn=fn();for(;Ce(TOKEN_TYPES.Pipe);){++t;let On=In();if(!(On instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");Ce(TOKEN_TYPES.OpenParen)&&(On=yn(On)),Nn=new FilterExpression(Nn,On)}return Nn}function In(){const Nn=n[t];switch(Nn.type){case TOKEN_TYPES.NumericLiteral:return++t,new NumericLiteral(Number(Nn.value));case TOKEN_TYPES.StringLiteral:return++t,new StringLiteral(Nn.value);case TOKEN_TYPES.BooleanLiteral:return++t,new BooleanLiteral(Nn.value==="true");case TOKEN_TYPES.Identifier:return++t,new Identifier(Nn.value);case TOKEN_TYPES.OpenParen:{++t;const On=Oe();if(n[t].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${n[t].type} instead`);return++t,On}case TOKEN_TYPES.OpenSquareBracket:{++t;const On=[];for(;!Ce(TOKEN_TYPES.CloseSquareBracket);)On.push(ze()),Ce(TOKEN_TYPES.Comma)&&++t;return++t,new ArrayLiteral(On)}case TOKEN_TYPES.OpenCurlyBracket:{++t;const On=new Map;for(;!Ce(TOKEN_TYPES.CloseCurlyBracket);){const Fn=ze();Te(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const $n=ze();On.set(Fn,$n),Ce(TOKEN_TYPES.Comma)&&++t}return++t,new ObjectLiteral(On)}default:throw new SyntaxError(`Unexpected token: ${Nn.type}`)}}for(;t<n.length;)e.body.push(Ee());return e}function range(n,e,t=1){e===void 0&&(e=n,n=0);const Te=[];for(let Ee=n;Ee<e;Ee+=t)Te.push(Ee);return Te}function slice(n,e,t,Te=1){const Ee=Math.sign(Te);Ee>=0?(e=(e??=0)<0?Math.max(n.length+e,0):Math.min(e,n.length),t=(t??=n.length)<0?Math.max(n.length+t,0):Math.min(t,n.length)):(e=(e??=n.length-1)<0?Math.max(n.length+e,-1):Math.min(e,n.length-1),t=(t??=-1)<-1?Math.max(n.length+t,-1):Math.min(t,n.length-1));const Re=[];for(let Ce=e;Ee*Ce<Ee*t;Ce+=Te)Re.push(n[Ce]);return Re}function titleCase(n){return n.replace(/\b\w/g,e=>e.toUpperCase())}var RuntimeValue=class{type="RuntimeValue";value;builtins=new Map;constructor(n=void 0){this.value=n}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{type="NumericValue"},StringValue=class extends RuntimeValue{type="StringValue";builtins=new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]])},BooleanValue=class extends RuntimeValue{type="BooleanValue"},ObjectValue=class extends RuntimeValue{type="ObjectValue";__bool__(){return new BooleanValue(this.value.size>0)}builtins=new Map([["get",new FunctionValue(([n,e])=>{if(!(n instanceof StringValue))throw new Error(`Object key must be a string: got ${n.type}`);return this.value.get(n.value)??e??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([n,e])=>new ArrayValue([new StringValue(n),e]))))]])},ArrayValue=class extends RuntimeValue{type="ArrayValue";builtins=new Map([["length",new NumericValue(this.value.length)]]);__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{type="TupleValue"},FunctionValue=class extends RuntimeValue{type="FunctionValue"},NullValue=class extends RuntimeValue{type="NullValue"},UndefinedValue=class extends RuntimeValue{type="UndefinedValue"},Environment=class{constructor(n){this.parent=n}variables=new Map([["namespace",new FunctionValue(n=>{if(n.length===0)return new ObjectValue(new Map);if(n.length!==1||!(n[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return n[0]})]]);tests=new Map([["boolean",n=>n.type==="BooleanValue"],["callable",n=>n instanceof FunctionValue],["odd",n=>{if(n.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${n.type}`);return n.value%2!==0}],["even",n=>{if(n.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${n.type}`);return n.value%2===0}],["false",n=>n.type==="BooleanValue"&&!n.value],["true",n=>n.type==="BooleanValue"&&n.value],["number",n=>n.type==="NumericValue"],["integer",n=>n.type==="NumericValue"&&Number.isInteger(n.value)],["iterable",n=>n instanceof ArrayValue||n instanceof StringValue],["lower",n=>{const e=n.value;return n.type==="StringValue"&&e===e.toLowerCase()}],["upper",n=>{const e=n.value;return n.type==="StringValue"&&e===e.toUpperCase()}],["none",n=>n.type==="NullValue"],["defined",n=>n.type!=="UndefinedValue"],["undefined",n=>n.type==="UndefinedValue"],["equalto",(n,e)=>n.value===e.value]]);set(n,e){return this.declareVariable(n,convertToRuntimeValues(e))}declareVariable(n,e){if(this.variables.has(n))throw new SyntaxError(`Variable already declared: ${n}`);return this.variables.set(n,e),e}setVariable(n,e){return this.variables.set(n,e),e}resolve(n){if(this.variables.has(n))return this;if(this.parent)return this.parent.resolve(n);throw new Error(`Unknown variable: ${n}`)}lookupVariable(n){try{return this.resolve(n).variables.get(n)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{global;constructor(n){this.global=n??new Environment}run(n){return this.evaluate(n,this.global)}evaluateBinaryExpression(n,e){const t=this.evaluate(n.left,e);switch(n.operator.value){case"and":return t.__bool__().value?this.evaluate(n.right,e):t;case"or":return t.__bool__().value?t:this.evaluate(n.right,e)}const Te=this.evaluate(n.right,e);switch(n.operator.value){case"==":return new BooleanValue(t.value==Te.value);case"!=":return new BooleanValue(t.value!=Te.value)}if(t instanceof UndefinedValue||Te instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(t instanceof NullValue||Te instanceof NullValue)throw new Error("Cannot perform operation on null values");if(t instanceof NumericValue&&Te instanceof NumericValue)switch(n.operator.value){case"+":return new NumericValue(t.value+Te.value);case"-":return new NumericValue(t.value-Te.value);case"*":return new NumericValue(t.value*Te.value);case"/":return new NumericValue(t.value/Te.value);case"%":return new NumericValue(t.value%Te.value);case"<":return new BooleanValue(t.value<Te.value);case">":return new BooleanValue(t.value>Te.value);case">=":return new BooleanValue(t.value>=Te.value);case"<=":return new BooleanValue(t.value<=Te.value)}else if(t instanceof ArrayValue&&Te instanceof ArrayValue)switch(n.operator.value){case"+":return new ArrayValue(t.value.concat(Te.value))}else if(Te instanceof ArrayValue){const Ee=Te.value.find(Re=>Re.value===t.value)!==void 0;switch(n.operator.value){case"in":return new BooleanValue(Ee);case"not in":return new BooleanValue(!Ee)}}if(t instanceof StringValue||Te instanceof StringValue)switch(n.operator.value){case"+":return new StringValue(t.value.toString()+Te.value.toString())}if(t instanceof StringValue&&Te instanceof StringValue)switch(n.operator.value){case"in":return new BooleanValue(Te.value.includes(t.value));case"not in":return new BooleanValue(!Te.value.includes(t.value))}if(t instanceof StringValue&&Te instanceof ObjectValue)switch(n.operator.value){case"in":return new BooleanValue(Te.value.has(t.value));case"not in":return new BooleanValue(!Te.value.has(t.value))}throw new SyntaxError(`Unknown operator "${n.operator.value}" between ${t.type} and ${Te.type}`)}evaluateFilterExpression(n,e){const t=this.evaluate(n.operand,e);if(n.filter.type==="Identifier"){const Te=n.filter;if(t instanceof ArrayValue)switch(Te.value){case"list":return t;case"first":return t.value[0];case"last":return t.value[t.value.length-1];case"length":return new NumericValue(t.value.length);case"reverse":return new ArrayValue(t.value.reverse());case"sort":return new ArrayValue(t.value.sort((Ee,Re)=>{if(Ee.type!==Re.type)throw new Error(`Cannot compare different types: ${Ee.type} and ${Re.type}`);switch(Ee.type){case"NumericValue":return Ee.value-Re.value;case"StringValue":return Ee.value.localeCompare(Re.value);default:throw new Error(`Cannot compare type: ${Ee.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${Te.value}`)}else if(t instanceof StringValue)switch(Te.value){case"length":return new NumericValue(t.value.length);case"upper":return new StringValue(t.value.toUpperCase());case"lower":return new StringValue(t.value.toLowerCase());case"title":return new StringValue(titleCase(t.value));case"capitalize":return new StringValue(t.value.charAt(0).toUpperCase()+t.value.slice(1));case"trim":return new StringValue(t.value.trim());default:throw new Error(`Unknown StringValue filter: ${Te.value}`)}else if(t instanceof NumericValue)switch(Te.value){case"abs":return new NumericValue(Math.abs(t.value));default:throw new Error(`Unknown NumericValue filter: ${Te.value}`)}else if(t instanceof ObjectValue)switch(Te.value){case"items":return new ArrayValue(Array.from(t.value.entries()).map(([Ee,Re])=>new ArrayValue([new StringValue(Ee),Re])));case"length":return new NumericValue(t.value.size);default:throw new Error(`Unknown ObjectValue filter: ${Te.value}`)}throw new Error(`Cannot apply filter "${Te.value}" to type: ${t.type}`)}else if(n.filter.type==="CallExpression"){const Te=n.filter;if(Te.callee.type!=="Identifier")throw new Error(`Unknown filter: ${Te.callee.type}`);const Ee=Te.callee.value;if(t instanceof ArrayValue){switch(Ee){case"selectattr":{if(t.value.some(Be=>!(Be instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(Te.args.some(Be=>Be.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[Re,Ce,De]=Te.args.map(Be=>this.evaluate(Be,e));let $e;if(Ce){const Be=e.tests.get(Ce.value);if(!Be)throw new Error(`Unknown test: ${Ce.value}`);$e=Be}else $e=(...Be)=>Be[0].__bool__().value;const Ve=t.value.filter(Be=>{const Me=Be.value.get(Re.value);return Me?$e(Me,De):!1});return new ArrayValue(Ve)}}throw new Error(`Unknown ArrayValue filter: ${Ee}`)}else throw new Error(`Cannot apply filter "${Ee}" to type: ${t.type}`)}throw new Error(`Unknown filter: ${n.filter.type}`)}evaluateTestExpression(n,e){const t=this.evaluate(n.operand,e),Te=e.tests.get(n.test.value);if(!Te)throw new Error(`Unknown test: ${n.test.value}`);const Ee=Te(t);return new BooleanValue(n.negate?!Ee:Ee)}evaluateUnaryExpression(n,e){const t=this.evaluate(n.argument,e);switch(n.operator.value){case"not":return new BooleanValue(!t.value);default:throw new SyntaxError(`Unknown operator: ${n.operator.value}`)}}evalProgram(n,e){return this.evaluateBlock(n.body,e)}evaluateBlock(n,e){let t="";for(const Te of n){const Ee=this.evaluate(Te,e);Ee.type!=="NullValue"&&Ee.type!=="UndefinedValue"&&(t+=Ee.value)}return new StringValue(t)}evaluateIdentifier(n,e){return e.lookupVariable(n.value)}evaluateCallExpression(n,e){const t=[],Te=new Map;for(const Re of n.args)if(Re.type==="KeywordArgumentExpression"){const Ce=Re;Te.set(Ce.key.value,this.evaluate(Ce.value,e))}else t.push(this.evaluate(Re,e));Te.size>0&&t.push(new ObjectValue(Te));const Ee=this.evaluate(n.callee,e);if(Ee.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Ee.type}`);return Ee.value(t,e)}evaluateSliceExpression(n,e,t){if(!(n instanceof ArrayValue||n instanceof StringValue))throw new Error("Slice object must be an array or string");const Te=this.evaluate(e.start,t),Ee=this.evaluate(e.stop,t),Re=this.evaluate(e.step,t);if(!(Te instanceof NumericValue||Te instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(Ee instanceof NumericValue||Ee instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(Re instanceof NumericValue||Re instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return n instanceof ArrayValue?new ArrayValue(slice(n.value,Te.value,Ee.value,Re.value)):new StringValue(slice(Array.from(n.value),Te.value,Ee.value,Re.value).join(""))}evaluateMemberExpression(n,e){const t=this.evaluate(n.object,e);let Te;if(n.computed){if(n.property.type==="SliceExpression")return this.evaluateSliceExpression(t,n.property,e);Te=this.evaluate(n.property,e)}else Te=new StringValue(n.property.value);let Ee;if(t instanceof ObjectValue){if(!(Te instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${Te.type}`);Ee=t.value.get(Te.value)??t.builtins.get(Te.value)}else if(t instanceof ArrayValue||t instanceof StringValue)if(Te instanceof NumericValue)Ee=t.value.at(Te.value),t instanceof StringValue&&(Ee=new StringValue(t.value.at(Te.value)));else if(Te instanceof StringValue)Ee=t.builtins.get(Te.value);else throw new Error(`Cannot access property with non-string/non-number: got ${Te.type}`);else{if(!(Te instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${Te.type}`);Ee=t.builtins.get(Te.value)}return Ee instanceof RuntimeValue?Ee:new UndefinedValue}evaluateSet(n,e){const t=this.evaluate(n.value,e);if(n.assignee.type==="Identifier"){const Te=n.assignee.value;e.setVariable(Te,t)}else if(n.assignee.type==="MemberExpression"){const Te=n.assignee,Ee=this.evaluate(Te.object,e);if(!(Ee instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(Te.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");Ee.value.set(Te.property.value,t)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(n.assignee)}`);return new NullValue}evaluateIf(n,e){const t=this.evaluate(n.test,e);return this.evaluateBlock(t.__bool__().value?n.body:n.alternate,e)}evaluateFor(n,e){const t=new Environment(e),Te=this.evaluate(n.iterable,t);if(!(Te instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${Te.type}`);let Ee="";for(let Re=0;Re<Te.value.length;++Re){const Ce=new Map([["index",new NumericValue(Re+1)],["index0",new NumericValue(Re)],["revindex",new NumericValue(Te.value.length-Re)],["revindex0",new NumericValue(Te.value.length-Re-1)],["first",new BooleanValue(Re===0)],["last",new BooleanValue(Re===Te.value.length-1)],["length",new NumericValue(Te.value.length)],["previtem",Re>0?Te.value[Re-1]:new UndefinedValue],["nextitem",Re<Te.value.length-1?Te.value[Re+1]:new UndefinedValue]]);t.setVariable("loop",new ObjectValue(Ce));const De=Te.value[Re];if(n.loopvar.type==="Identifier")t.setVariable(n.loopvar.value,De);else if(n.loopvar.type==="TupleLiteral"){const Ve=n.loopvar;if(De.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${De.type}`);const Be=De;if(Ve.value.length!==Be.value.length)throw new Error(`Too ${Ve.value.length>Be.value.length?"few":"many"} items to unpack`);for(let Me=0;Me<Ve.value.length;++Me){if(Ve.value[Me].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${Ve.value[Me].type}`);t.setVariable(Ve.value[Me].value,Be.value[Me])}}const $e=this.evaluateBlock(n.body,t);Ee+=$e.value}return new StringValue(Ee)}evaluate(n,e){if(n===void 0)return new UndefinedValue;switch(n.type){case"Program":return this.evalProgram(n,e);case"Set":return this.evaluateSet(n,e);case"If":return this.evaluateIf(n,e);case"For":return this.evaluateFor(n,e);case"NumericLiteral":return new NumericValue(Number(n.value));case"StringLiteral":return new StringValue(n.value);case"BooleanLiteral":return new BooleanValue(n.value);case"ArrayLiteral":return new ArrayValue(n.value.map(t=>this.evaluate(t,e)));case"TupleLiteral":return new TupleValue(n.value.map(t=>this.evaluate(t,e)));case"ObjectLiteral":{const t=new Map;for(const[Te,Ee]of n.value){const Re=this.evaluate(Te,e);if(!(Re instanceof StringValue))throw new Error(`Object keys must be strings: got ${Re.type}`);t.set(Re.value,this.evaluate(Ee,e))}return new ObjectValue(t)}case"Identifier":return this.evaluateIdentifier(n,e);case"CallExpression":return this.evaluateCallExpression(n,e);case"MemberExpression":return this.evaluateMemberExpression(n,e);case"UnaryExpression":return this.evaluateUnaryExpression(n,e);case"BinaryExpression":return this.evaluateBinaryExpression(n,e);case"FilterExpression":return this.evaluateFilterExpression(n,e);case"TestExpression":return this.evaluateTestExpression(n,e);default:throw new SyntaxError(`Unknown node type: ${n.type}`)}}};function convertToRuntimeValues(n){switch(typeof n){case"number":return new NumericValue(n);case"string":return new StringValue(n);case"boolean":return new BooleanValue(n);case"object":return n===null?new NullValue:Array.isArray(n)?new ArrayValue(n.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(n).map(([e,t])=>[e,convertToRuntimeValues(t)])));case"function":return new FunctionValue((e,t)=>{const Te=n(...e.map(Ee=>Ee.value))??null;return convertToRuntimeValues(Te)});default:throw new Error(`Cannot convert to runtime value: ${n}`)}}var Template=class{parsed;constructor(n){const e=tokenize(n,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(e)}render(n){const e=new Environment;e.set("false",!1),e.set("true",!0),e.set("raise_exception",Ee=>{throw new Error(Ee)}),e.set("range",range);for(const[Ee,Re]of Object.entries(n))e.set(Ee,Re);return new Interpreter(e).run(this.parsed).value}};async function loadTokenizer(n,e){const t=await Promise.all([getModelJSON(n,"tokenizer.json",!0,e),getModelJSON(n,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(t[1].legacy=e.legacy),t}function regexSplit(n,e){const t=[];let Te=0;for(const Ee of n.matchAll(e)){const Re=Ee[0];Te<Ee.index&&t.push(n.slice(Te,Ee.index)),Re.length>0&&t.push(Re),Te=Ee.index+Re.length}return Te<n.length&&t.push(n.slice(Te)),t}function createPattern(n,e=!0){if(n.Regex!==void 0){let t=n.Regex.replace(/\\([#&~])/g,"$1");for(const[Te,Ee]of PROBLEMATIC_REGEX_MAP)t=t.replaceAll(Te,Ee);return new RegExp(t,"gu")}else if(n.String!==void 0){const t=escapeRegExp(n.String);return new RegExp(e?t:`(${t})`,"gu")}else return console.warn("Unknown pattern type:",n),null}function objectToMap(n){return new Map(Object.entries(n))}function prepareTensorForDecode(n){const e=n.dims;switch(e.length){case 1:return n.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return n.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(n){return n.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(n){return n.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(n){return remove_accents(n.toLowerCase())}function fuse(n,e,t){const Te=[];let Ee=0;for(;Ee<n.length;){if(Te.push(n[Ee]),(t.get(n[Ee])??e)!==e){++Ee;continue}for(;Ee<n.length&&(t.get(n[Ee])??e)===e;)++Ee}return Te}function whitespace_split(n){return n.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...t){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...t);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...t);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let t=this.encode(e);return this.fuse_unk&&(t=fuse(t,this.unk_token_id,this.tokens_to_ids)),t}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(t=>this.tokens_to_ids.get(t)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(t=>this.vocab[t]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,Te]of this.tokens_to_ids)this.vocab[Te]=t}encode(e){const t=[];for(const Te of e){const Ee=[...Te];if(Ee.length>this.max_input_chars_per_word){t.push(this.unk_token);continue}let Re=!1,Ce=0;const De=[];for(;Ce<Ee.length;){let $e=Ee.length,Ve=null;for(;Ce<$e;){let Be=Ee.slice(Ce,$e).join("");if(Ce>0&&(Be=this.config.continuing_subword_prefix+Be),this.tokens_to_ids.has(Be)){Ve=Be;break}--$e}if(Ve===null){Re=!0;break}De.push(Ve),Ce=$e}Re?t.push(this.unk_token):t.push(...De)}return t}}class Unigram extends TokenizerModel{constructor(e,t){super(e);const Te=e.vocab.length;this.vocab=new Array(Te),this.scores=new Array(Te);for(let Ee=0;Ee<Te;++Ee){const Re=e.vocab[Ee];this.vocab[Ee]=Re[0],this.scores[Ee]=Re[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((Ee,Re)=>[Ee,Re])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=t.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const t=e.sentence,Te=t.length;let Ee=0;for(;Ee<Te;){let Ce=!1;for(let De of this.trie.commonPrefixSearch(t.slice(Ee))){const $e=this.tokens_to_ids.get(De),Ve=this.scores[$e],Be=De.length;e.insert(Ee,Be,Ve,$e),!Ce&&Be===1&&(Ce=!0)}Ce||e.insert(Ee,1,this.unkScore,this.unk_token_id),Ee+=1}}tokenize(e){const t=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(t),t.tokens()}encode(e){const t=[];for(const Te of e){const Ee=this.tokenize(Te);t.push(...Ee)}return t}}const BYTES_TO_UNICODE=(()=>{const n=[...Array.from({length:94},(Ee,Re)=>Re+33),...Array.from({length:12},(Ee,Re)=>Re+161),...Array.from({length:82},(Ee,Re)=>Re+174)],e=n.slice();let t=0;for(let Ee=0;Ee<256;++Ee)n.includes(Ee)||(n.push(Ee),e.push(256+t),t+=1);const Te=e.map(Ee=>String.fromCharCode(Ee));return Object.fromEntries(n.map((Ee,Re)=>[Ee,Te[Re]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,Te]of this.tokens_to_ids)this.vocab[Te]=t;this.bpe_ranks=new Map(e.merges.map((t,Te)=>[t,Te])),this.merges=e.merges.map(t=>t.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(e.length===0)return[];const t=this.cache.get(e);if(t!==void 0)return t;const Te=Array.from(e);this.end_of_word_suffix&&(Te[Te.length-1]+=this.end_of_word_suffix);let Ee=[];if(Te.length>1){const Re=new PriorityQueue(($e,Ve)=>$e.score<Ve.score);let Ce={token:Te[0],bias:0,prev:null,next:null},De=Ce;for(let $e=1;$e<Te.length;++$e){const Ve={bias:$e/Te.length,token:Te[$e],prev:De,next:null};De.next=Ve,this._add_node(Re,De),De=Ve}for(;!Re.isEmpty();){const $e=Re.pop();if($e.deleted||!$e.next||$e.next.deleted)continue;if($e.deleted=!0,$e.next.deleted=!0,$e.prev){const Be={...$e.prev};$e.prev.deleted=!0,$e.prev=Be,Be.prev?Be.prev.next=Be:Ce=Be}const Ve={token:$e.token+$e.next.token,bias:$e.bias,prev:$e.prev,next:$e.next.next};Ve.prev?(Ve.prev.next=Ve,this._add_node(Re,Ve.prev)):Ce=Ve,Ve.next&&(Ve.next.prev=Ve,this._add_node(Re,Ve))}for(let $e=Ce;$e!==null;$e=$e.next)Ee.push($e.token)}else Ee=Te;if(this.continuing_subword_suffix)for(let Re=0;Re<Ee.length-1;++Re)Ee[Re]+=this.continuing_subword_suffix;return this.cache.set(e,Ee),Ee}_add_node(e,t){const Te=this.bpe_ranks.get(t.token+this.BPE_SPLIT_TOKEN+t.next.token);Te!==void 0&&(t.score=Te+t.bias,e.push(t))}encode(e){const t=[];for(const Te of e){if(this.ignore_merges&&this.tokens_to_ids.has(Te)){t.push(Te);continue}const Ee=this.bpe(Te);for(const Re of Ee)this.tokens_to_ids.has(Re)?t.push(Re):this.byte_fallback?t.push(...Array.from(this.text_encoder.encode(Re)).map(Ce=>`<0x${Ce.toString(16).toUpperCase().padStart(2,"0")}>`)):t.push(this.unk_token)}return t}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,t){super(e),this.tokens_to_ids=objectToMap(t.target_lang?e.vocab[t.target_lang]:e.vocab),this.bos_token=t.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=t.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=t.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[Te,Ee]of this.tokens_to_ids)this.vocab[Ee]=Te}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const t=createPattern(this.config.pattern);return t===null?e:e.replaceAll(t,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(t=>Normalizer.fromConfig(t))}normalize(e){return this.normalizers.reduce((t,Te)=>Te.normalize(t),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const t=[];for(let Te=0;Te<e.length;++Te){const Ee=e[Te],Re=Ee.charCodeAt(0);this._is_chinese_char(Re)?(t.push(" "),t.push(Ee),t.push(" ")):t.push(Ee)}return t.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const t=[];for(const Te of e){const Ee=Te.charCodeAt(0);Ee===0||Ee===65533||this._is_control(Te)||(/^\s$/.test(Te)?t.push(" "):t.push(Te))}return t.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"Whitespace":return new WhitespacePreTokenizer(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,t){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,t){return(Array.isArray(e)?e.map(Te=>this.pre_tokenize_text(Te,t)):this.pre_tokenize_text(e,t)).flat()}_call(e,t){return this.pre_tokenize(e,t)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,t){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,t){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(Ee=>Array.from(this.text_encoder.encode(Ee),Re=>this.byte_encoder[Re]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,t){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const t=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(t,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);case"Sequence":return new PostProcessorSequence(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...t){throw Error("post_process should be implemented in subclass.")}_call(e,...t){return this.post_process(e,...t)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,t=null,{add_special_tokens:Te=!0}={}){Te&&(e=mergeArrays([this.cls],e,[this.sep]));let Ee=new Array(e.length).fill(0);if(t!==null){const Re=Te&&this instanceof RobertaProcessing?[this.sep]:[],Ce=Te?[this.sep]:[];e=mergeArrays(e,Re,t,Ce),Ee=mergeArrays(Ee,new Array(t.length+Re.length+Ce.length).fill(1))}return{tokens:e,token_type_ids:Ee}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,t=null,{add_special_tokens:Te=!0}={}){const Ee=t===null?this.single:this.pair;let Re=[],Ce=[];for(const De of Ee)"SpecialToken"in De?Te&&(Re.push(De.SpecialToken.id),Ce.push(De.SpecialToken.type_id)):"Sequence"in De&&(De.Sequence.id==="A"?(Re=mergeArrays(Re,e),Ce=mergeArrays(Ce,new Array(e.length).fill(De.Sequence.type_id))):De.Sequence.id==="B"&&(Re=mergeArrays(Re,t),Ce=mergeArrays(Ce,new Array(t.length).fill(De.Sequence.type_id))));return{tokens:Re,token_type_ids:Ce}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,t=null){return t&&(e=mergeArrays(e,t)),{tokens:e}}}class PostProcessorSequence extends PostProcessor{constructor(e){super(e),this.processors=e.processors.map(t=>PostProcessor.fromConfig(t))}post_process(e,t=null,Te={}){let Ee;for(const Re of this.processors)if(Re instanceof ByteLevelPostProcessor)e=Re.post_process(e).tokens,t&&(t=Re.post_process(t).tokens);else{const Ce=Re.post_process(e,t,Te);e=Ce.tokens,Ee=Ce.token_type_ids}return{tokens:e,token_type_ids:Ee}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const t=createPattern(this.config.pattern);return t===null?e:e.map(Te=>Te.replaceAll(t,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const t=[];let Te=[];for(const Ee of e){let Re=null;if(Ee.length===6&&Ee.startsWith("<0x")&&Ee.endsWith(">")){const Ce=parseInt(Ee.slice(3,5),16);isNaN(Ce)||(Re=Ce)}if(Re!==null)Te.push(Re);else{if(Te.length>0){const Ce=this.text_decoder.decode(Uint8Array.from(Te));t.push(Ce),Te=[]}t.push(Ee)}}if(Te.length>0){const Ee=this.text_decoder.decode(Uint8Array.from(Te));t.push(Ee),Te=[]}return t}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(t=>{let Te=0;for(let Re=0;Re<this.start&&t[Re]===this.content;++Re){Te=Re+1;continue}let Ee=t.length;for(let Re=0;Re<this.stop;++Re){const Ce=t.length-Re-1;if(t[Ce]===this.content){Ee=Ce;continue}else break}return t.slice(Te,Ee)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((t,Te)=>(Te!==0&&(t.startsWith(this.config.prefix)?t=t.replace(this.config.prefix,""):t=" "+t),this.cleanup&&(t=clean_up_tokenization(t)),t))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const t=e.join(""),Te=new Uint8Array([...t].map(Re=>this.byte_decoder[Re]));return this.text_decoder.decode(Te)}decode_chain(e){const t=[];let Te=[];for(const Ee of e)this.added_tokens.find(Re=>Re.content===Ee)!==void 0?(Te.length>0&&(t.push(this.convert_tokens_to_string(Te)),Te=[]),t.push(Ee)):Te.push(Ee);return Te.length>0&&t.push(this.convert_tokens_to_string(Te)),t}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const t=[e[0]];for(let Re=1;Re<e.length;++Re)e[Re]!==t.at(-1)&&t.push(e[Re]);let Ee=t.filter(Re=>Re!==this.pad_token).join("");return this.cleanup&&(Ee=clean_up_tokenization(Ee).replaceAll(this.word_delimiter_token," ").trim()),Ee}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(t=>Decoder.fromConfig(t))}decode_chain(e){return this.decoders.reduce((t,Te)=>Te.decode_chain(t),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((t,Te)=>t.replaceAll(this.suffix,Te===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let t="";for(let Te=1;Te<e.length;Te+=2)t+=e[Te];return[t]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:t=void 0}={}){let Te=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!Te.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&t===0)&&(Te=this.strRep+Te),[Te]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const t=[];for(let Te=0;Te<e.length;++Te){let Ee=e[Te].replaceAll(this.replacement," ");this.addPrefixSpace&&Te==0&&Ee.startsWith(" ")&&(Ee=Ee.substring(1)),t.push(Ee)}return t}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("")?e=e.split("").map(Te=>Te.normalize("NFKC")).join(""):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(t=>PreTokenizer.fromConfig(t))}pre_tokenize_text(e,t){return this.tokenizers.reduce((Te,Ee)=>Ee.pre_tokenize(Te,t),[e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,t){return e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,t){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,t){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(n,e,t,Te){for(const Ee of Object.keys(n)){const Re=e-n[Ee].length,Ce=t(Ee),De=new Array(Re).fill(Ce);n[Ee]=Te==="right"?mergeArrays(n[Ee],De):mergeArrays(De,n[Ee])}}function truncateHelper(n,e){for(const t of Object.keys(n))n[t].length=e}class PreTrainedTokenizer extends Callable{return_token_type_ids=!1;_default_chat_template=`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`;constructor(e,t){super(),this._tokenizer_config=t,this.normalizer=Normalizer.fromConfig(e.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(e.pre_tokenizer),this.model=TokenizerModel.fromConfig(e.model,t),this.post_processor=PostProcessor.fromConfig(e.post_processor),this.decoder=Decoder.fromConfig(e.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const Te of e.added_tokens){const Ee=new AddedToken(Te);this.added_tokens.push(Ee),this.model.tokens_to_ids.set(Ee.content,Ee.id),this.model.vocab[Ee.id]=Ee.content,Ee.special&&(this.special_tokens.push(Ee.content),this.all_special_ids.push(Ee.id))}if(this.additional_special_tokens=t.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(Te=>`${Te.lstrip?"\\s*":""}(${escapeRegExp(Te.content)})${Te.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=t.model_max_length,this.remove_space=t.remove_space,this.clean_up_tokenization_spaces=t.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=t.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=t.chat_template??null,Array.isArray(this.chat_template)){const Te=Object.create(null);for(const{name:Ee,template:Re}of this.chat_template){if(typeof Ee!="string"||typeof Re!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');Te[Ee]=Re}this.chat_template=Te}this._compiled_template_cache=new Map}getToken(...e){for(const t of e){const Te=this._tokenizer_config[t];if(Te)if(typeof Te=="object"){if(Te.__type==="AddedToken")return Te.content;throw Error(`Unknown token: ${Te}`)}else return Te}return null}static async from_pretrained(e,{progress_callback:t=null,config:Te=null,cache_dir:Ee=null,local_files_only:Re=!1,revision:Ce="main",legacy:De=null}={}){const $e=await loadTokenizer(e,{progress_callback:t,cache_dir:Ee,local_files_only:Re,revision:Ce,legacy:De});return new this(...$e)}_call(e,{text_pair:t=null,add_special_tokens:Te=!0,padding:Ee=!1,truncation:Re=null,max_length:Ce=null,return_tensor:De=!0,return_token_type_ids:$e=null}={}){const Ve=Array.isArray(e);let Be;if(Ve){if(e.length===0)throw Error("text array must be non-empty");if(t!==null){if(Array.isArray(t)){if(e.length!==t.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");Be=e.map((Oe,Ue)=>this._encode_plus(Oe,t[Ue],{add_special_tokens:Te,return_token_type_ids:$e}))}else Be=e.map(Oe=>this._encode_plus(Oe,null,{add_special_tokens:Te,return_token_type_ids:$e}))}else{if(e==null)throw Error("text may not be null or undefined");if(Array.isArray(t))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");Be=[this._encode_plus(e,t,{add_special_tokens:Te,return_token_type_ids:$e})]}if(Ce===null?Ee==="max_length"?Ce=this.model_max_length:Ce=max(Be.map(Oe=>Oe.input_ids.length))[0]:Re||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),Ce=Math.min(Ce,this.model_max_length),Ee||Re)for(let Oe=0;Oe<Be.length;++Oe)Be[Oe].input_ids.length!==Ce&&(Be[Oe].input_ids.length>Ce?Re&&truncateHelper(Be[Oe],Ce):Ee&&padHelper(Be[Oe],Ce,Ue=>Ue==="input_ids"?this.pad_token_id:0,this.padding_side));const Me={};if(De){if(!(Ee&&Re)&&Be.some(Ue=>{for(const ze of Object.keys(Ue))if(Ue[ze].length!==Be[0][ze]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const Oe=[Be.length,Be[0].input_ids.length];for(const Ue of Object.keys(Be[0]))Me[Ue]=new Tensor("int64",BigInt64Array.from(Be.flatMap(ze=>ze[Ue]).map(BigInt)),Oe)}else{for(const Oe of Object.keys(Be[0]))Me[Oe]=Be.map(Ue=>Ue[Oe]);if(!Ve)for(const Oe of Object.keys(Me))Me[Oe]=Me[Oe][0]}return Me}_encode_text(e){return e===null?null:(this.added_tokens_regex?e.split(this.added_tokens_regex).filter(Ee=>Ee):[e]).map((Ee,Re)=>{if(this.added_tokens.find(De=>De.content===Ee)!==void 0)return Ee;{if(this.remove_space===!0&&(Ee=Ee.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(Ee=lowercase_and_remove_accent(Ee)),this.normalizer!==null&&(Ee=this.normalizer(Ee)),Ee.length===0)return[];const De=this.pre_tokenizer!==null?this.pre_tokenizer(Ee,{section_index:Re}):[Ee];return this.model(De)}}).flat()}_encode_plus(e,t=null,{add_special_tokens:Te=!0,return_token_type_ids:Ee=null}={}){const Re=this._encode_text(e),Ce=this._encode_text(t),De=this.post_processor?this.post_processor(Re,Ce,{add_special_tokens:Te}):{tokens:mergeArrays(Re??[],Ce??[])},$e=this.model.convert_tokens_to_ids(De.tokens),Ve={input_ids:$e,attention_mask:new Array($e.length).fill(1)};return(Ee??this.return_token_type_ids)&&De.token_type_ids&&(Ve.token_type_ids=De.token_type_ids),Ve}encode(e,t=null,{add_special_tokens:Te=!0,return_token_type_ids:Ee=null}={}){const{input_ids:Re}=this._encode_plus(e,t,{add_special_tokens:Te,return_token_type_ids:Ee});return Re}batch_decode(e,t={}){return e instanceof Tensor&&(e=e.tolist()),e.map(Te=>this.decode(Te,t))}decode(e,t={}){if(e instanceof Tensor&&(e=prepareTensorForDecode(e)),!Array.isArray(e)||e.length===0||!isIntegralNumber(e[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(e,t)}decode_single(e,{skip_special_tokens:t=!1,clean_up_tokenization_spaces:Te=null}){let Ee=this.model.convert_ids_to_tokens(e);t&&(Ee=Ee.filter(Ce=>!this.special_tokens.includes(Ce)));let Re=this.decoder?this.decoder(Ee):Ee.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(Re=Re.replaceAll(this.decoder.end_of_word_suffix," "),t&&(Re=Re.trim())),(Te??this.clean_up_tokenization_spaces)&&(Re=clean_up_tokenization(Re)),Re}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(e,{chat_template:t=null,add_generation_prompt:Te=!1,tokenize:Ee=!0,padding:Re=!1,truncation:Ce=!1,max_length:De=null,return_tensor:$e=!0,tokenizer_kwargs:Ve={},...Be}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const ze=this.chat_template??this.default_chat_template;if(t!==null&&Object.hasOwn(ze,t))t=ze[t];else if(t===null&&"default"in ze)t=ze.default;else if(t===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(ze).sort()}.`)}else t??=this.chat_template??this.default_chat_template;if(typeof t!="string")throw Error(`chat_template must be a string, but got ${typeof t}`);let Me=this._compiled_template_cache.get(t);Me===void 0&&(Me=new Template(t),this._compiled_template_cache.set(t,Me));const Oe=Object.create(null);for(const ze of SPECIAL_TOKEN_ATTRIBUTES){const He=this.getToken(ze);He&&(Oe[ze]=He)}const Ue=Me.render({messages:e,add_generation_prompt:Te,...Oe,...Be});return Ee?this._call(Ue,{add_special_tokens:!1,padding:Re,truncation:Ce,max_length:De,return_tensor:$e,...Ve}).input_ids:Ue}}class BertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class AlbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class MobileBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class SqueezeBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaV2Tokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class HerbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class ConvBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class RoFormerTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0;constructor(e,t){super(e,t),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}'}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(Te=>this.languageRegex.test(Te)),this.lang_to_token=Te=>Te}_build_translation_inputs(e,t,Te){return _build_translation_inputs(this,e,t,Te)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,t){const Te=".,!?",Ee=e.pre_tokenizer?.pretokenizers[0]?.pattern;Ee&&Ee.Regex===` ?[^(\\s|[${Te}])]+`&&(Ee.Regex=` ?[^\\s${Te}]+`),super(e,t)}}const SPIECE_UNDERLINE="";class LlamaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`;DEFAULT_SYSTEM_PROMPT=`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`;constructor(e,t){super(e,t),this.use_default_system_prompt=t.use_default_system_prompt??!1,this.legacy=t.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(e){if(e===null)return null;if(this.legacy||e.length===0)return super._encode_text(e);let t=super._encode_text(SPIECE_UNDERLINE+e.replaceAll(SPIECE_UNDERLINE," "));return t.length>1&&t[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(t[1])&&(t=t.slice(1)),t}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(n,e,t,Te){if(!("language_codes"in n)||!Array.isArray(n.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in n)||!(n.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in n)||typeof n.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const Ee=Te.src_lang,Re=Te.tgt_lang;if(!n.language_codes.includes(Re))throw new Error(`Target language code "${Re}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);if(Ee!==void 0){if(!n.language_codes.includes(Ee))throw new Error(`Source language code "${Ee}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);for(const Ce of n.post_processor.config.single)if("SpecialToken"in Ce&&n.languageRegex.test(Ce.SpecialToken.id)){Ce.SpecialToken.id=n.lang_to_token(Ee);break}}return Te.forced_bos_token_id=n.model.convert_tokens_to_ids([n.lang_to_token(Re)])[0],n._call(e,t)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(Te=>this.languageRegex.test(Te)),this.lang_to_token=Te=>Te}_build_translation_inputs(e,t,Te){return _build_translation_inputs(this,e,t,Te)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(Te=>this.languageRegex.test(Te)).map(Te=>Te.slice(2,-2)),this.lang_to_token=Te=>`__${Te}__`}_build_translation_inputs(e,t,Te){return _build_translation_inputs(this,e,t,Te)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([n,e])=>[e,n]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}';_decode_asr(e,{return_timestamps:t=!1,return_language:Te=!1,time_precision:Ee=null,force_full_sequences:Re=!0}={}){if(Ee===null)throw Error("Must specify time_precision");let Ce=null;const De=t==="word";function $e(){return{language:Ce,timestamp:[null,null],text:""}}const Ve=[];let Be=$e(),Me=0;const Oe=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let Ue=[],ze=[],He=!1,Ge=null;const Ke=new Set(this.all_special_ids);for(const un of e){const fn=un.tokens,yn=De?un.token_timestamps:null;let gn=null,mn=Oe;if("stride"in un){const[bn,Tn,En]=un.stride;if(Me-=Tn,Ge=bn-En,Tn&&(mn=Tn/Ee+Oe),En)for(let In=fn.length-1;In>=0;--In){const Nn=fn[In];if(Nn>=Oe){if(gn!==null&&(Nn-Oe)*Ee<Ge)break;gn=Nn}}}let dn=[],vn=[];for(let bn=0;bn<fn.length;++bn){const Tn=fn[bn];if(Ke.has(Tn)){const En=this.decode([Tn]),In=WHISPER_LANGUAGE_MAPPING.get(En.slice(2,-2));if(In!==void 0){if(Ce!==null&&In!==Ce&&!t){Ue.push(dn);const Nn=this.findLongestCommonSequence(Ue)[0],On=this.decode(Nn);Be.text=On,Ve.push(Be),Ue=[],dn=[],Be=$e()}Ce=Be.language=In}}else if(Tn>=Oe){const En=(Tn-Oe)*Ee+Me,In=round(En,2);if(gn!==null&&Tn>=gn)He=!0;else if(He||Ue.length>0&&Tn<mn)He=!1;else if(Be.timestamp[0]===null)Be.timestamp[0]=In;else if(In!==Be.timestamp[0]){Be.timestamp[1]=In,Ue.push(dn),De&&ze.push(vn);const[Nn,On]=this.findLongestCommonSequence(Ue,ze),Fn=this.decode(Nn);Be.text=Fn,De&&(Be.words=this.collateWordTimestamps(Nn,On,Ce)),Ve.push(Be),Ue=[],dn=[],ze=[],vn=[],Be=$e()}}else if(dn.push(Tn),De){let En=round(yn[bn]+Me,2),In;bn+1<yn.length?In=round(yn[bn+1]+Me,2):In=null,vn.push([En,In])}}if("stride"in un){const[bn,Tn,En]=un.stride;Me+=bn-En}dn.length>0?(Ue.push(dn),De&&ze.push(vn)):Ue.every(bn=>bn.length===0)&&(Be=$e(),Ue=[],dn=[],ze=[],vn=[])}if(Ue.length>0){if(Re&&t)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[un,fn]=this.findLongestCommonSequence(Ue,ze),yn=this.decode(un);Be.text=yn,De&&(Be.words=this.collateWordTimestamps(un,fn,Ce)),Ve.push(Be)}let Xe=Object.create(null);const Je=Ve.map(un=>un.text).join("");if(t||Te){for(let un=0;un<Ve.length;++un){const fn=Ve[un];t||delete fn.timestamp,Te||delete fn.language}if(De){const un=[];for(const fn of Ve)for(const yn of fn.words)un.push(yn);Xe={chunks:un}}else Xe={chunks:Ve}}return[Je,Xe]}findLongestCommonSequence(e,t=null){let Te=e[0],Ee=Te.length,Re=[];const Ce=Array.isArray(t)&&t.length>0;let De=Ce?[]:null,$e=Ce?t[0]:null;for(let Ve=1;Ve<e.length;++Ve){const Be=e[Ve];let Me=0,Oe=[Ee,Ee,0,0];const Ue=Be.length;for(let un=1;un<Ee+Ue;++un){const fn=un/1e4,yn=Math.max(0,Ee-un),gn=Math.min(Ee,Ee+Ue-un),mn=Te.slice(yn,gn),dn=Math.max(0,un-Ee),vn=Math.min(Ue,un),bn=Be.slice(dn,vn);if(mn.length!==bn.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const Tn=mn.filter((In,Nn)=>In===bn[Nn]).length,En=Tn/un+fn;Tn>1&&En>Me&&(Me=En,Oe=[yn,gn,dn,vn])}const[ze,He,Ge,Ke]=Oe,Xe=Math.floor((He+ze)/2),Je=Math.floor((Ke+Ge)/2);Re.push(...Te.slice(0,Xe)),Te=Be.slice(Je),Ee=Te.length,Ce&&(De.push(...$e.slice(0,Xe)),$e=t[Ve].slice(Je))}return Re.push(...Te),Ce?(De.push(...$e),[Re,De]):[Re,[]]}collateWordTimestamps(e,t,Te){const[Ee,Re,Ce]=this.combineTokensIntoWords(e,Te),De=[];for(let $e=0;$e<Ee.length;++$e){const Ve=Ce[$e];De.push({text:Ee[$e],timestamp:[t[Ve.at(0)][0],t[Ve.at(-1)][1]]})}return De}combineTokensIntoWords(e,t,Te=`"'([{-`,Ee=`"'.,!?:)]}`){t=t??"english";let Re,Ce,De;return["chinese","japanese","thai","lao","myanmar"].includes(t)?[Re,Ce,De]=this.splitTokensOnUnicode(e):[Re,Ce,De]=this.splitTokensOnSpaces(e),this.mergePunctuations(Re,Ce,De,Te,Ee)}decode(e,t){let Te;return t&&t.decode_with_timestamps?(e instanceof Tensor&&(e=prepareTensorForDecode(e)),Te=this.decodeWithTimestamps(e,t)):Te=super.decode(e,t),Te}decodeWithTimestamps(e,t){const Te=t?.time_precision??.02,Ee=Array.from(this.all_special_ids).at(-1)+1;let Re=[[]];for(const Ce of e)if(Ce>=Ee){const De=round((Ce-Ee)*Te,2);Re.push(`<|${De}|>`),Re.push([])}else Re[Re.length-1].push(Ce);return Re=Re.map(Ce=>typeof Ce=="string"?Ce:super.decode(Ce,t)),Re.join("")}splitTokensOnUnicode(e){const t=this.decode(e,{decode_with_timestamps:!0}),Te="",Ee=[],Re=[],Ce=[];let De=[],$e=[],Ve=0;for(let Be=0;Be<e.length;++Be){const Me=e[Be];De.push(Me),$e.push(Be);const Oe=this.decode(De,{decode_with_timestamps:!0});(!Oe.includes(Te)||t[Ve+Oe.indexOf(Te)]===Te)&&(Ee.push(Oe),Re.push(De),Ce.push($e),De=[],$e=[],Ve+=Oe.length)}return[Ee,Re,Ce]}splitTokensOnSpaces(e){const[t,Te,Ee]=this.splitTokensOnUnicode(e),Re=[],Ce=[],De=[],$e=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let Ve=0;Ve<t.length;++Ve){const Be=t[Ve],Me=Te[Ve],Oe=Ee[Ve],Ue=Me[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),ze=Be.startsWith(" "),He=Be.trim(),Ge=$e.test(He);if(Ue||ze||Ge||Re.length===0)Re.push(Be),Ce.push(Me),De.push(Oe);else{const Ke=Re.length-1;Re[Ke]+=Be,Ce[Ke].push(...Me),De[Ke].push(...Oe)}}return[Re,Ce,De]}mergePunctuations(e,t,Te,Ee,Re){const Ce=structuredClone(e),De=structuredClone(t),$e=structuredClone(Te);let Ve=Ce.length-2,Be=Ce.length-1;for(;Ve>=0;)Ce[Ve].startsWith(" ")&&Ee.includes(Ce[Ve].trim())?(Ce[Be]=Ce[Ve]+Ce[Be],De[Be]=mergeArrays(De[Ve],De[Be]),$e[Be]=mergeArrays($e[Ve],$e[Be]),Ce[Ve]="",De[Ve]=[],$e[Ve]=[]):Be=Ve,--Ve;for(Ve=0,Be=1;Be<Ce.length;)!Ce[Ve].endsWith(" ")&&Re.includes(Ce[Be])?(Ce[Ve]+=Ce[Be],De[Ve]=mergeArrays(De[Ve],De[Be]),$e[Ve]=mergeArrays($e[Ve],$e[Be]),Ce[Be]="",De[Be]=[],$e[Be]=[]):Ve=Be,++Be;return[Ce.filter(Me=>Me),De.filter(Me=>Me.length>0),$e.filter(Me=>Me.length>0)]}get_decoder_prompt_ids({language:e=null,task:t=null,no_timestamps:Te=!0}={}){const Ee=[];if(e){e=e.toLowerCase();let Re=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(e);if(Re===void 0)if(WHISPER_LANGUAGE_MAPPING.has(e))Re=e;else{const $e=e.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${e}" is not supported. Must be one of: ${JSON.stringify($e)}`)}const Ce=this.model.tokens_to_ids.get(`<|${Re}|>`);if(Ce===void 0)throw new Error(`Unable to find language "${Re}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);Ee.push(Ce)}else Ee.push(null);if(t){if(t=t.toLowerCase(),t!=="transcribe"&&t!=="translate")throw new Error(`Task "${t}" is not supported. Must be one of: ["transcribe", "translate"]`);const Re=this.model.tokens_to_ids.get(`<|${t}|>`);if(Re===void 0)throw new Error(`Unable to find task "${t}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);Ee.push(Re)}else Ee.push(null);if(Te){const Re=this.model.tokens_to_ids.get("<|notimestamps|>");if(Re===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');Ee.push(Re)}return Ee.map((Re,Ce)=>[Ce+1,Re]).filter(Re=>Re[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(Te=>this.languageRegex.test(Te)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[t,...Te]=e.trim().split(this.languageRegex);if(Te.length===0)return super._encode_text(t);if(Te.length===2){const[Ee,Re]=Te;return this.supported_language_codes.includes(Ee)||console.warn(`Unsupported language code "${Ee}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([Ee],super._encode_text(Re))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{_default_chat_template="{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}"}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static TOKENIZER_CLASS_MAPPING={T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer};static async from_pretrained(e,{quantized:t=!0,progress_callback:Te=null,config:Ee=null,cache_dir:Re=null,local_files_only:Ce=!1,revision:De="main",legacy:$e=null}={}){const[Ve,Be]=await loadTokenizer(e,{progress_callback:Te,cache_dir:Re,local_files_only:Ce,revision:De,legacy:$e}),Me=Be.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let Oe=this.TOKENIZER_CLASS_MAPPING[Me];return Oe||(console.warn(`Unknown tokenizer class "${Me}", attempting to construct from base class.`),Oe=PreTrainedTokenizer),new Oe(Ve,Be)}}async function loadConfig(n,e){return await getModelJSON(n,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:t=null,config:Te=null,cache_dir:Ee=null,local_files_only:Re=!1,revision:Ce="main"}={}){let De=Te??await loadConfig(e,{progress_callback:t,cache_dir:Ee,local_files_only:Re,revision:Ce});return new this(De)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,t){for(let Te of t)this.processors.forEach(Ee=>Ee(e,Te))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,t){let Te=this.force_token_map[e.length];return exists(Te)&&(t.data.fill(-1/0),t.data[Te]=0),t}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,t){return e.length===1&&(t.data.fill(-1/0),t.data[this.bos_token_id]=0),t}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.max_length=e,this.forced_eos_token_id=t}_call(e,t){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.begin_suppress_tokens=e,this.begin_index=t}_call(e,t){if(e.length===this.begin_index)for(let Te of this.begin_suppress_tokens)t.data[Te]=-1/0;return t}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,t){const Te=t.data;if(Te[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return Te.fill(-1/0),Te[this.timestamp_begin]=0,t;const Ee=e.slice(this.begin_index),Re=Ee.length>=1&&Ee[Ee.length-1]>=this.timestamp_begin,Ce=Ee.length<2||Ee[Ee.length-2]>=this.timestamp_begin;if(Re&&(Ce?Te.subarray(this.timestamp_begin).fill(-1/0):Te.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const Be=this.timestamp_begin+this.max_initial_timestamp_index;Te.subarray(Be+1).fill(-1/0)}const De=log_softmax(Te),$e=Math.log(De.subarray(this.timestamp_begin).map(Math.exp).reduce((Be,Me)=>Be+Me)),Ve=max(De.subarray(0,this.timestamp_begin))[0];return $e>Ve&&Te.subarray(0,this.timestamp_begin).fill(-1/0),t}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const t=e.length,Te=[];for(let Re=0;Re<t+1-this.no_repeat_ngram_size;++Re){const Ce=[];for(let De=0;De<this.no_repeat_ngram_size;++De)Ce.push(e[Re+De]);Te.push(Ce)}const Ee=new Map;for(const Re of Te){const Ce=Re.slice(0,Re.length-1),De=JSON.stringify(Ce),$e=Ee.get(De)??[];$e.push(Re[Re.length-1]),Ee.set(De,$e)}return Ee}getGeneratedNgrams(e,t){const Te=t.slice(t.length+1-this.no_repeat_ngram_size,t.length);return e.get(JSON.stringify(Te))??[]}calcBannedNgramTokens(e){const t=[];if(e.length+1<this.no_repeat_ngram_size)return t;{const Te=this.getNgrams(e);return this.getGeneratedNgrams(Te,e)}}_call(e,t){const Te=this.calcBannedNgramTokens(e);for(const Ee of Te)t.data[Ee]=-1/0;return t}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,t){for(const Te of e)t.data[Te]<0?t.data[Te]*=this.penalty:t.data[Te]/=this.penalty;return t}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.min_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){if(e.length<this.min_length)for(const Te of this.eos_token_id)t.data[Te]=-1/0;return t}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,t,Te){super(),this.prompt_length_to_skip=e,this.min_new_tokens=t,this.eos_token_id=Array.isArray(Te)?Te:[Te]}_call(e,t){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const Ee of this.eos_token_id)t.data[Ee]=-1/0;return t}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(const Te of this.bad_words_ids){let Ee=!0;for(let Re=1;Re<=Te.length-1&&Te.length<e.length;++Re)if(Te.at(-Re-1)!==e.at(-Re)){Ee=!1;break}Ee&&(t.data[Te.at(-1)]=-1/0)}return t}}const GenerationConfig=class{constructor(n={}){this.max_length=n.max_length??20,this.max_new_tokens=n.max_new_tokens??null,this.min_length=n.min_length??0,this.min_new_tokens=n.min_new_tokens??null,this.early_stopping=n.early_stopping??!1,this.max_time=n.max_time??null,this.do_sample=n.do_sample??!1,this.num_beams=n.num_beams??1,this.num_beam_groups=n.num_beam_groups??1,this.penalty_alpha=n.penalty_alpha??null,this.use_cache=n.use_cache??!0,this.temperature=n.temperature??1,this.top_k=n.top_k??50,this.top_p=n.top_p??1,this.typical_p=n.typical_p??1,this.epsilon_cutoff=n.epsilon_cutoff??0,this.eta_cutoff=n.eta_cutoff??0,this.diversity_penalty=n.diversity_penalty??0,this.repetition_penalty=n.repetition_penalty??1,this.encoder_repetition_penalty=n.encoder_repetition_penalty??1,this.length_penalty=n.length_penalty??1,this.no_repeat_ngram_size=n.no_repeat_ngram_size??0,this.bad_words_ids=n.bad_words_ids??null,this.force_words_ids=n.force_words_ids??null,this.renormalize_logits=n.renormalize_logits??!1,this.constraints=n.constraints??null,this.forced_bos_token_id=n.forced_bos_token_id??null,this.forced_eos_token_id=n.forced_eos_token_id??null,this.remove_invalid_values=n.remove_invalid_values??!1,this.exponential_decay_length_penalty=n.exponential_decay_length_penalty??null,this.suppress_tokens=n.suppress_tokens??null,this.begin_suppress_tokens=n.begin_suppress_tokens??null,this.forced_decoder_ids=n.forced_decoder_ids??null,this.num_return_sequences=n.num_return_sequences??1,this.output_attentions=n.output_attentions??!1,this.output_hidden_states=n.output_hidden_states??!1,this.output_scores=n.output_scores??!1,this.return_dict_in_generate=n.return_dict_in_generate??!1,this.pad_token_id=n.pad_token_id??null,this.bos_token_id=n.bos_token_id??null,this.eos_token_id=n.eos_token_id??null,this.encoder_no_repeat_ngram_size=n.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=n.decoder_start_token_id??null,this.generation_kwargs=n.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,t=-1){return this.sample(e,t)}sample(e,t){throw Error("sample should be implemented in subclasses.")}getLogits(e,t){let Te=e.dims.at(-1),Ee=e.data;if(t===-1)Ee=Ee.slice(-Te);else{let Re=t*Te;Ee=Ee.slice(Re,Re+Te)}return this.generation_config.temperature>0&&(Ee=Ee.map(Re=>Re/this.generation_config.temperature)),Ee}randomSelect(e){let t=e.reduce((Ee,Re)=>Ee+Re,0),Te=Math.random()*t;for(let Ee=0;Ee<e.length;++Ee)if(Te-=e[Ee],Te<=0)return Ee;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,t=-1){let Te=this.getLogits(e,t);return[[max(Te)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,t=-1){let Te=e.dims.at(-1);this.generation_config.top_k>0&&(Te=Math.min(this.generation_config.top_k,Te));const Ee=this.getLogits(e,t),Re=getTopItems(Ee,Te),Ce=softmax(Re.map(De=>De[1]));return Array.from({length:this.generation_config.num_beams},()=>{const De=this.randomSelect(Ce);return[Re[De][0],Math.log(Ce[De])]})}}class BeamSearchSampler extends Sampler{sample(e,t=-1){let Te=e.dims.at(-1);this.generation_config.top_k>0&&(Te=Math.min(this.generation_config.top_k,Te));const Ee=this.getLogits(e,t),Re=getTopItems(Ee,Te),Ce=softmax(Re.map(De=>De[1]));return Array.from({length:this.generation_config.num_beams},(De,$e)=>[Re[$e][0],Math.log(Ce[$e])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(n,e,t){let Te=`onnx/${e}${t.quantized?"_quantized":""}.onnx`,Ee=await getModelFile(n,Te,!0,t);try{return await InferenceSession.create(Ee,{executionProviders})}catch(Re){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw Re;return console.warn(Re),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(Ee,{executionProviders:["wasm"]})}}function validateInputs(n,e){const t=Object.create(null),Te=[];for(const Ce of n.inputNames){const De=e[Ce];if(!(De instanceof Tensor)){Te.push(Ce);continue}t[Ce]=env.wasm.proxy?De.clone():De}if(Te.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${Te.join(", ")}.`);const Ee=Object.keys(e).length,Re=n.inputNames.length;if(Ee>Re){let Ce=Object.keys(e).filter(De=>!n.inputNames.includes(De));console.warn(`WARNING: Too many inputs were provided (${Ee} > ${Re}). The following inputs will be ignored: "${Ce.join(", ")}".`)}return t}async function sessionRun(n,e){const t=validateInputs(n,e);try{let Te=await n.run(t);return Te=replaceTensors(Te),Te}catch(Te){throw console.error(`An error occurred during model execution: "${Te}".`),console.error("Inputs given to model:",t),Te}}function replaceTensors(n){for(let e in n)n[e]instanceof ONNXTensor?n[e]=new Tensor(n[e]):typeof n[e]=="object"&&replaceTensors(n[e]);return n}function toI64Tensor(n){if(n instanceof Tensor)return n;if(n.length===0)throw Error("items must be non-empty");if(Array.isArray(n[0])){if(n.some(e=>e.length!==n[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(n.flat().map(e=>BigInt(e))),[n.length,n[0].length])}else return new Tensor("int64",BigInt64Array.from(n.map(e=>BigInt(e))),[1,n.length])}function prepareAttentionMask(n,e){let t=n.config.pad_token_id??null,Te=n.config.eos_token_id??null;isIntegralNumber(Te)&&(Te=[Te]);let Ee=e.indexOf(t)!==-1,Re=Te===null||!Te.includes(t);if(Ee&&Re){let Ce=BigInt64Array.from(e.data.map(De=>De!=t));return new Tensor("int64",Ce,e.dims)}else return ones_like(e)}function preparePositionIds(n,e,t){if(!n.inputNames.includes("position_ids"))return;const Te=new BigInt64Array(e.attention_mask.data.length);for(let Ee=0;Ee<e.attention_mask.dims[0];++Ee){let Re=Ee*e.attention_mask.dims[1],Ce=BigInt(0);for(let De=0;De<e.attention_mask.dims[1];++De){const $e=Re+De;e.attention_mask.data[$e]===0n?Te[$e]=BigInt(1):(Te[$e]=Ce,Ce+=e.attention_mask.data[$e])}}e.position_ids=new Tensor("int64",Te,e.attention_mask.dims),t&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(n){return new Tensor("bool",[n],[1])}async function seq2seqForward(n,e){let{encoder_outputs:t,past_key_values:Te}=e;t||(t=(await encoderForward(n,e)).last_hidden_state);let Ee={input_ids:e.decoder_input_ids,encoder_hidden_states:t};const Re=!!Te;n.decoder_merged_session.inputNames.includes("use_cache_branch")&&(Ee.use_cache_branch=boolTensor(Re)),n.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(Ee.encoder_attention_mask=e.attention_mask),preparePositionIds(n.decoder_merged_session,Ee,Re),n.addPastKeyValues(Ee,Te);const Ce=await sessionRun(n.decoder_merged_session,Ee);let De=Ce.logits;Te=n.getPastKeyValues(Ce,Te);const $e=n.getAttentions(Ce);return new Seq2SeqLMOutput({logits:De,past_key_values:Te,encoder_outputs:t,...$e})}function seq2seqStartBeams(n,e,t,Te){let Ee=[],Re=0;const Ce=n.requires_attention_mask??!0;let De=t.decoder_input_ids??t.decoder_start_token_id??t.bos_token_id??t.eos_token_id;De instanceof Tensor?De=De.tolist().flat():Array.isArray(De)||(De=[De]);for(let $e of e){$e.dims=[1,...$e.dims];let Ve={inputs:$e,encoder_outputs:null,prev_model_outputs:null,output_token_ids:De,done:!1,score:0,id:Re++};Ce&&(Ve.attention_mask=prepareAttentionMask(n,$e)),Ee.push(Ve)}return Ee}async function seq2seqRunBeam(n,e){const t=n.main_input_name;let Te=e.output_token_ids;e.prev_model_outputs&&(Te=Te.slice(-1));let Ee={[t]:e.inputs,decoder_input_ids:toI64Tensor(Te),encoder_outputs:e.encoder_outputs,past_key_values:e.prev_model_outputs?.past_key_values};e.attention_mask&&(Ee.attention_mask=e.attention_mask);let Re=await n.forward(Ee);return e.prev_model_outputs=Re,e.encoder_outputs=Re.encoder_outputs,Re}function seq2seqUpdatebeam(n,e){n.output_token_ids=[...n.output_token_ids,e]}async function encoderForward(n,e){const t=Object.create(null);for(const Te of n.session.inputNames)t[Te]=e[Te];return n.session.inputNames.includes("token_type_ids")&&!t.token_type_ids&&(t.token_type_ids=new Tensor("int64",new BigInt64Array(t.input_ids.data.length),t.input_ids.dims)),await sessionRun(n.session,t)}async function decoderForward(n,e){let{input_ids:t,past_key_values:Te,attention_mask:Ee}=e,Re={input_ids:t,attention_mask:Ee??prepareAttentionMask(n,t)};const Ce=!!Te;n.session.inputNames.includes("use_cache_branch")&&(Re.use_cache_branch=boolTensor(Ce)),preparePositionIds(n.session,Re,Ce),n.addPastKeyValues(Re,Te);let De=await sessionRun(n.session,Re),$e=De.logits;return Te=n.getPastKeyValues(De,Te),{logits:$e,past_key_values:Te}}function decoderStartBeams(n,e,t,Te,Ee){let Re=[],Ce=0;for(let De of e){let $e=De.tolist().map(Number);De.dims=[1,...De.dims];let Ve;Ee?(Ve=Ee[Ce],Ve.dims=[1,...Ve.dims]):Ve=prepareAttentionMask(n,De);let Be={input:De,model_input_ids:De,attention_mask:Ve,prev_model_outputs:null,output_token_ids:$e,num_output_tokens:Te,done:!1,score:0,id:Ce++};Re.push(Be)}return Re}async function decoderRunBeam(n,e){let t=new BigInt64Array(e.output_token_ids.length).fill(1n),Te={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",t,[1,t.length]),past_key_values:e.prev_model_outputs?.past_key_values},Ee=await n.forward(Te);return e.prev_model_outputs=Ee,Ee}function decoderUpdatebeam(n,e){n.output_token_ids=[...n.output_token_ids,e],n.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{main_input_name="input_ids";constructor(e,t){super(),this.config=e,this.session=t;const Te=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),Ee=MODEL_TYPE_MAPPING.get(Te);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,Ee===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):Ee===MODEL_TYPES.Seq2Seq||Ee===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):Ee===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const e=[];for(let t of Object.keys(this)){const Te=this[t];Te instanceof InferenceSession&&e.push(Te.handler.dispose())}return await Promise.all(e)}static async from_pretrained(e,{quantized:t=!0,progress_callback:Te=null,config:Ee=null,cache_dir:Re=null,local_files_only:Ce=!1,revision:De="main",model_file_name:$e=null}={}){let Ve={quantized:t,progress_callback:Te,config:Ee,cache_dir:Re,local_files_only:Ce,revision:De,model_file_name:$e};const Be=MODEL_CLASS_TO_NAME_MAPPING.get(this),Me=MODEL_TYPE_MAPPING.get(Be);let Oe;return Me===MODEL_TYPES.DecoderOnly?Oe=await Promise.all([AutoConfig.from_pretrained(e,Ve),constructSession(e,Ve.model_file_name??"decoder_model_merged",Ve),getModelJSON(e,"generation_config.json",!1,Ve)]):Me===MODEL_TYPES.Seq2Seq||Me===MODEL_TYPES.Vision2Seq?Oe=await Promise.all([AutoConfig.from_pretrained(e,Ve),constructSession(e,"encoder_model",Ve),constructSession(e,"decoder_model_merged",Ve),getModelJSON(e,"generation_config.json",!1,Ve)]):Me===MODEL_TYPES.MaskGeneration?Oe=await Promise.all([AutoConfig.from_pretrained(e,Ve),constructSession(e,"vision_encoder",Ve),constructSession(e,"prompt_encoder_mask_decoder",Ve)]):Me===MODEL_TYPES.EncoderDecoder?Oe=await Promise.all([AutoConfig.from_pretrained(e,Ve),constructSession(e,"encoder_model",Ve),constructSession(e,"decoder_model_merged",Ve)]):(Me!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${Be??Ee?.model_type}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),Oe=await Promise.all([AutoConfig.from_pretrained(e,Ve),constructSession(e,Ve.model_file_name??"model",Ve)])),new this(...Oe)}async _call(e){return await this.forward(e)}async forward(e){return await this._forward(this,e)}_get_logits_processor(e,t,Te=null){const Ee=new LogitsProcessorList;if(e.repetition_penalty!==null&&e.repetition_penalty!==1&&Ee.push(new RepetitionPenaltyLogitsProcessor(e.repetition_penalty)),e.no_repeat_ngram_size!==null&&e.no_repeat_ngram_size>0&&Ee.push(new NoRepeatNGramLogitsProcessor(e.no_repeat_ngram_size)),e.bad_words_ids!==null&&Ee.push(new NoBadWordsLogitsProcessor(e.bad_words_ids,e.eos_token_id)),e.min_length!==null&&e.eos_token_id!==null&&e.min_length>0&&Ee.push(new MinLengthLogitsProcessor(e.min_length,e.eos_token_id)),e.min_new_tokens!==null&&e.eos_token_id!==null&&e.min_new_tokens>0&&Ee.push(new MinNewTokensLengthLogitsProcessor(t,e.min_new_tokens,e.eos_token_id)),e.forced_bos_token_id!==null&&Ee.push(new ForcedBOSTokenLogitsProcessor(e.forced_bos_token_id)),e.forced_eos_token_id!==null&&Ee.push(new ForcedEOSTokenLogitsProcessor(e.max_length,e.forced_eos_token_id)),e.begin_suppress_tokens!==null){let Re=t>1||e.forced_bos_token_id===null?t:t+1;e.forced_decoder_ids!==null&&(Re+=e.forced_decoder_ids[e.forced_decoder_ids.length-1][0]),Ee.push(new SuppressTokensAtBeginLogitsProcessor(e.begin_suppress_tokens,Re))}return e.forced_decoder_ids!==null&&Ee.push(new ForceTokensLogitsProcessor(e.forced_decoder_ids)),Te!==null&&Ee.extend(Te),Ee}_get_generation_config(e){let t=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(t,this.generation_config),e!==null&&Object.assign(t,e),t}async generate(e,t=null,Te=null,{inputs_attention_mask:Ee=null}={}){if(!this.can_generate){let Ge=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const Ke=this.config.model_type,Xe=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(Ke)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(Ke)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(Ke)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(Ke);throw Xe&&(Ge+=` Please use the following class instead: '${Xe[0]}'`),Error(Ge)}if(!(e instanceof Tensor)&&!isTypedArray(e)&&!Array.isArray(e))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${e.constructor.name}".`);let Re;if(this.config.is_encoder_decoder)Re=0;else if(Re=e instanceof Tensor?e.dims.at(-1):e.length,Re===0)throw Error("Must supply a non-empty array of input token ids.");t=this._get_generation_config(t),Te=Te??new LogitsProcessorList,Te=this._get_logits_processor(t,Re,Te);let Ce=t.eos_token_id;Ce!==null&&!Array.isArray(Ce)&&(Ce=[Ce]);let De=1;const $e=De+(t.max_new_tokens??1/0),Ve=Number.isInteger(t.max_length)&&(t.max_new_tokens??null)===null;let Be=Sampler.getSampler(t),Me=this.getStartBeams(e,t,De,Ee);for(;Me.some(He=>!He.done)&&De<$e;){let He=[];for(let Ge of Me){if(Ge.done){He.push(Ge);continue}if(Ve&&Ge.output_token_ids.length>=t.max_length){Ge.done=!0,He.push(Ge);continue}let Ke=await this.runBeam(Ge);t.output_attentions&&this.addAttentionsToBeam(Ge,Ke),t.output_scores;let Xe=Ke.logits.slice(null,-1,null);Te(Ge.output_token_ids,Xe);let Je=Be(Xe);for(let[un,fn]of Je){let yn={...Ge};this.updateBeam(yn,un),yn.score+=fn,Ce&&Ce.includes(un)&&(yn.done=!0),He.push(yn)}}++De,He=this.groupBeams(He).map(Ge=>Ge.sort((Ke,Xe)=>Xe.score-Ke.score).slice(0,t.num_beams)),Me=He.flat(),t.callback_function&&t.callback_function(Me)}const Oe=this.groupBeams(Me),Ue=He=>Oe.map(Ge=>t.num_return_sequences>1?Ge.slice(0,t.num_return_sequences).map(Ke=>Ke[He]):[Ge[0][He]]).flat(),ze=Ue("output_token_ids");if(t.return_dict_in_generate){const He=Ue("decoder_attentions"),Ge=Ue("cross_attentions");return{sequences:ze,decoder_attentions:He,cross_attentions:Ge}}else return ze}addAttentionsToBeam(e,t){if(this.config.is_encoder_decoder){if(!t.cross_attentions||t.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.cross_attentions||(e.cross_attentions=[]),e.cross_attentions.push(t.cross_attentions)}if(!t.decoder_attentions||t.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.decoder_attentions||(e.decoder_attentions=[]),e.decoder_attentions.push(t.decoder_attentions)}groupBeams(e){const t=Object.create(null);for(const Te of e)t[Te.id]===void 0?t[Te.id]=[Te]:t[Te.id].push(Te);return Object.values(t)}getPastKeyValues(e,t){const Te=Object.create(null);for(const Ee in e)if(Ee.startsWith("present")){let Re=Ee.replace("present","past_key_values");t&&Ee.includes("encoder")?Te[Re]=t[Re]:Te[Re]=e[Ee]}return Te}getAttentions(e){const t=Object.create(null);for(const Te of["cross_attentions","decoder_attentions"]){const Ee=[];for(const Re in e)if(Re.startsWith(Te)){const Ce=Re.split(".").pop();Ee[Ce]=e[Re]}t[Te]=Ee}return t}addPastKeyValues(e,t){if(t)Object.assign(e,t);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let Ee=[1,this.num_encoder_heads,0,this.encoder_dim_kv],Re=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let Ce=0;Ce<this.num_decoder_layers;++Ce)e[`past_key_values.${Ce}.encoder.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Ce}.encoder.value`]=new Tensor("float32",[],Ee),e[`past_key_values.${Ce}.decoder.key`]=new Tensor("float32",[],Re),e[`past_key_values.${Ce}.decoder.value`]=new Tensor("float32",[],Re)}else if(this.config.model_type==="falcon"){let Ee=[1*this.num_heads,0,this.dim_kv];for(let Re=0;Re<this.num_layers;++Re)e[`past_key_values.${Re}.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Re}.value`]=new Tensor("float32",[],Ee)}else if(this.config.multi_query){let Ee=[1*this.num_heads,0,2*this.dim_kv];for(let Re=0;Re<this.num_layers;++Re)e[`past_key_values.${Re}.key_value`]=new Tensor("float32",[],Ee)}else if(this.config.model_type==="bloom"){let Ee=[1*this.num_heads,this.dim_kv,0],Re=[1*this.num_heads,0,this.dim_kv];for(let Ce=0;Ce<this.num_layers;++Ce)e[`past_key_values.${Ce}.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Ce}.value`]=new Tensor("float32",[],Re)}else{let Ee=[1,this.num_heads,0,this.dim_kv];for(let Re=0;Re<this.num_layers;++Re)e[`past_key_values.${Re}.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Re}.value`]=new Tensor("float32",[],Ee)}}getStartBeams(e,t,Te,Ee){return this._getStartBeams(this,e,t,Te,Ee)}async runBeam(e){return await this._runBeam(this,e)}updateBeam(e,t){return this._updateBeam(e,t)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{requires_attention_mask=!1;main_input_name="input_features";constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(e,t=null,Te=null){if(t=this._get_generation_config(t),t.return_timestamps??=!1,t.return_timestamps&&(Te=[new WhisperTimeStampLogitsProcessor(t)]),t.return_token_timestamps&&(t.output_attentions=!0,t.return_dict_in_generate=!0,t.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!t.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const Ee=await super.generate(e,t,Te);return t.return_token_timestamps&&t.alignment_heads&&(Ee.token_timestamps=this._extract_token_timestamps(Ee,t.alignment_heads,t.num_frames)),Ee}_extract_token_timestamps(e,t,Te=null,Ee=.02){if(!e.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let Re=this.config.median_filter_width;Re===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),Re=7);const Ce=e.cross_attentions.map(Ve=>{let Be=Array.from({length:this.config.decoder_layers},(Ge,Ke)=>cat(Ve.map(Xe=>Xe[Ke]),2)),Me=stack(t.map(([Ge,Ke])=>Te?Be[Ge].slice(null,Ke,null,[0,Te]):Be[Ge].slice(null,Ke)));Me=Me.transpose(1,0,2,3);let[Oe,Ue]=std_mean(Me,-2,0,!0),ze=Me.clone();for(let Ge=0;Ge<ze.dims[0];++Ge){let Ke=ze[Ge];for(let Xe=0;Xe<Ke.dims[0];++Xe){let Je=Ke[Xe];const un=Oe[Ge][Xe][0],fn=Ue[Ge][Xe][0];for(let yn=0;yn<Je.dims[0];++yn){let gn=Je[yn];for(let mn=0;mn<gn.data.length;++mn)gn.data[mn]=(gn.data[mn]-fn.data[mn])/un.data[mn];gn.data.set(medianFilter(gn.data,Re))}}}return mean(ze,1)}),De=[e.sequences.length,e.sequences[0].length],$e=new Tensor("float32",new Float32Array(De[0]*De[1]),De);for(let Ve=0;Ve<De[0];++Ve){const Be=Ce[Ve].neg().squeeze_(0);let[Me,Oe]=dynamicTimeWarping(Be),Ue=Array.from({length:Me.length-1},(Ge,Ke)=>Me[Ke+1]-Me[Ke]),ze=mergeArrays([1],Ue).map(Ge=>!!Ge),He=[];for(let Ge=0;Ge<ze.length;++Ge)ze[Ge]&&He.push(Oe[Ge]*Ee);$e[Ve].data.set(He,1)}return $e}}class VisionEncoderDecoderModel extends PreTrainedModel{main_input_name="pixel_values";constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee;const Re=this.config.encoder,Ce=this.config.decoder,De=Re.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(De)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(De))||console.warn(`Model type for encoder '${De}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const Ve=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(Ce.model_type);if(!Ve)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const Be=Ve[1],Me=new Be(Ce,Te,Ee);this.add_encoder_pkv="num_decoder_layers"in Me,this.add_encoder_pkv?(this.num_decoder_layers=Me.num_decoder_layers,this.num_decoder_heads=Me.num_decoder_heads,this.decoder_dim_kv=Me.decoder_dim_kv,this.num_encoder_layers=Me.num_encoder_layers,this.num_encoder_heads=Me.num_encoder_heads,this.encoder_dim_kv=Me.encoder_dim_kv):(this.num_layers=Me.num_layers,this.num_heads=Me.num_heads,this.dim_kv=Me.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:t,pred_masks:Te}){super(),this.logits=e,this.pred_boxes=t,this.pred_masks=Te}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,t,Te){super(e,t),this.prompt_encoder_mask_decoder=Te}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const t=e.input_points.dims.slice(0,-1),Te=t.reduce((Ee,Re)=>Ee*Re,1);e.input_labels=new Tensor("int64",new BigInt64Array(Te).fill(1n),t)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:t}){super(),this.iou_scores=e,this.pred_masks=t}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,t,Te,Ee){super(e,t),this.decoder_merged_session=Te,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,t,{threshold:Te=.5,minlenratio:Ee=0,maxlenratio:Re=20,vocoder:Ce=null}={}){const De={input_ids:e},{encoder_outputs:$e,encoder_attention_mask:Ve}=await encoderForward(this,De),Be=$e.dims[1]/this.config.reduction_factor,Me=Math.floor(Be*Re),Oe=Math.floor(Be*Ee),Ue=this.config.num_mel_bins;let ze=[],He=null,Ge=null,Ke=0;for(;;){++Ke;const un=boolTensor(!!Ge);let fn;Ge?fn=Ge.output_sequence_out:fn=new Tensor("float32",new Float32Array(Ue),[1,1,Ue]);let yn={use_cache_branch:un,output_sequence:fn,encoder_attention_mask:Ve,speaker_embeddings:t,encoder_hidden_states:$e};this.addPastKeyValues(yn,He),Ge=await sessionRun(this.decoder_merged_session,yn),He=this.getPastKeyValues(Ge,He);const{prob:gn,spectrum:mn}=Ge;if(ze.push(mn),Ke>=Oe&&(Array.from(gn.data).filter(dn=>dn>=Te).length>0||Ke>=Me))break}const Xe=cat(ze),{waveform:Je}=await sessionRun(Ce.session,{spectrogram:Xe});return{spectrogram:Xe,waveform:Je}}}class SpeechT5HifiGan extends PreTrainedModel{main_input_name="spectrogram"}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="audio_model",super.from_pretrained(e,t)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,t,Te){super(e,t),this.generation_config=Te,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(e,{quantized:t=!0,progress_callback:Te=null,config:Ee=null,cache_dir:Re=null,local_files_only:Ce=!1,revision:De="main",model_file_name:$e=null}={}){let Ve={quantized:t,progress_callback:Te,config:Ee,cache_dir:Re,local_files_only:Ce,revision:De,model_file_name:$e};if(Ee=await AutoConfig.from_pretrained(e,Ve),Ve.config||(Ve.config=Ee),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let Be of this.MODEL_CLASS_MAPPINGS){const Me=Be.get(Ee.model_type);if(Me)return await Me[1].from_pretrained(e,Ve)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${Ee.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,Ve);throw Error(`Unsupported model type: ${Ee.model_type}`)}}const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[n,e]of MODEL_CLASS_TYPE_MAPPING)for(const[t,Te]of n.values())MODEL_TYPE_MAPPING.set(t,e),MODEL_CLASS_TO_NAME_MAPPING.set(Te,t),MODEL_NAME_TO_CLASS_MAPPING.set(t,Te);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[n,e,t]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(n,t),MODEL_CLASS_TO_NAME_MAPPING.set(e,n),MODEL_NAME_TO_CLASS_MAPPING.set(n,e);class AutoModel extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=MODEL_CLASS_TYPE_MAPPING.map(e=>e[0]);static BASE_IF_FAIL=!0}class AutoModelForSequenceClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForTokenClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForSeq2SeqLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]}class AutoModelForSpeechSeq2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]}class AutoModelForTextToSpectrogram extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]}class AutoModelForTextToWaveform extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]}class AutoModelForCausalLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_WITH_LM_HEAD_MAPPING_NAMES]}class AutoModelForMaskedLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_MASKED_LM_MAPPING_NAMES]}class AutoModelForQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForVision2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]}class AutoModelForImageClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForImageSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]}class AutoModelForSemanticSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]}class AutoModelForObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForZeroShotObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForCTC extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_CTC_MAPPING_NAMES]}class AutoModelForAudioClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForImageToImage extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]}class AutoModelForDepthEstimation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]}class AutoModelForImageFeatureExtraction extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]}class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:t,encoder_outputs:Te,decoder_attentions:Ee=null,cross_attentions:Re=null}){super(),this.logits=e,this.past_key_values=t,this.encoder_outputs=Te,this.decoder_attentions=Ee,this.cross_attentions=Re}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:t}){super(),this.logits=e,this.embeddings=t}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:t}){super(),this.start_logits=e,this.end_logits=t}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:t}){super(),this.waveform=e,this.spectrogram=t}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(n,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(n,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async n=>{const t=(await n.metadata()).channels;let{data:Te,info:Ee}=await n.rotate().raw().toBuffer({resolveWithObject:!0});const Re=new RawImage(new Uint8ClampedArray(Te),Ee.width,Ee.height,Ee.channels);return t!==void 0&&t!==Ee.channels&&Re.convert(t),Re};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,t,Te,Ee){this.data=e,this.width=t,this.height=Te,this.channels=Ee}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let t=await getFile(e);if(t.status!==200)throw new Error(`Unable to read image from "${e}" (${t.status} ${t.statusText})`);let Te=await t.blob();return this.fromBlob(Te)}static async fromBlob(e){if(BROWSER_ENV){let t=await loadImageFunction(e);const Te=createCanvasFunction(t.width,t.height).getContext("2d");return Te.drawImage(t,0,0),new this(Te.getImageData(0,0,t.width,t.height).data,t.width,t.height,4)}else{let t=sharp(await e.arrayBuffer());return await loadImageFunction(t)}}static fromTensor(e,t="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(t==="CHW")e=e.transpose(1,2,0);else if(t!=="HWC")throw new Error(`Unsupported channel format: ${t}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let t=0,Te=0;t<this.data.length;t+=this.channels){const Ee=this.data[t],Re=this.data[t+1],Ce=this.data[t+2];e[Te++]=Math.round(.2989*Ee+.587*Re+.114*Ce)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let t=0,Te=0;t<this.data.length;++t)e[Te++]=this.data[t],e[Te++]=this.data[t],e[Te++]=this.data[t];break;case 4:for(let t=0,Te=0;t<this.data.length;t+=4)e[Te++]=this.data[t],e[Te++]=this.data[t+1],e[Te++]=this.data[t+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let t=0,Te=0;t<this.data.length;++t)e[Te++]=this.data[t],e[Te++]=this.data[t],e[Te++]=this.data[t],e[Te++]=255;break;case 3:for(let t=0,Te=0;t<this.data.length;t+=3)e[Te++]=this.data[t],e[Te++]=this.data[t+1],e[Te++]=this.data[t+2],e[Te++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,t,{resample:Te=2}={}){let Ee=RESAMPLING_MAPPING[Te]??Te;if(BROWSER_ENV){let Re=this.channels,Ce=this.toCanvas();const De=createCanvasFunction(e,t).getContext("2d");return De.drawImage(Ce,0,0,e,t),new RawImage(De.getImageData(0,0,e,t).data,e,t,4).convert(Re)}else{let Re=this.toSharp();switch(Ee){case"box":case"hamming":(Ee==="box"||Ee==="hamming")&&(console.warn(`Resampling method ${Ee} is not yet supported. Using bilinear instead.`),Ee="bilinear");case"nearest":case"bilinear":case"bicubic":Re=Re.affine([e/this.width,0,0,t/this.height],{interpolator:Ee});break;case"lanczos":Re=Re.resize({width:e,height:t,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${Ee} is not supported.`)}return await loadImageFunction(Re)}}async pad([e,t,Te,Ee]){if(e=Math.max(e,0),t=Math.max(t,0),Te=Math.max(Te,0),Ee=Math.max(Ee,0),e===0&&t===0&&Te===0&&Ee===0)return this;if(BROWSER_ENV){let Re=this.channels,Ce=this.toCanvas(),De=this.width+e+t,$e=this.height+Te+Ee;const Ve=createCanvasFunction(De,$e).getContext("2d");return Ve.drawImage(Ce,0,0,this.width,this.height,e,Te,De,$e),new RawImage(Ve.getImageData(0,0,De,$e).data,De,$e,4).convert(Re)}else{let Re=this.toSharp().extend({left:e,right:t,top:Te,bottom:Ee});return await loadImageFunction(Re)}}async crop([e,t,Te,Ee]){if(e=Math.max(e,0),t=Math.max(t,0),Te=Math.min(Te,this.width-1),Ee=Math.min(Ee,this.height-1),e===0&&t===0&&Te===this.width-1&&Ee===this.height-1)return this;const Re=Te-e+1,Ce=Ee-t+1;if(BROWSER_ENV){const De=this.channels,$e=this.toCanvas(),Ve=createCanvasFunction(Re,Ce).getContext("2d");return Ve.drawImage($e,e,t,Re,Ce,0,0,Re,Ce),new RawImage(Ve.getImageData(0,0,Re,Ce).data,Re,Ce,4).convert(De)}else{const De=this.toSharp().extract({left:e,top:t,width:Re,height:Ce});return await loadImageFunction(De)}}async center_crop(e,t){if(this.width===e&&this.height===t)return this;let Te=(this.width-e)/2,Ee=(this.height-t)/2;if(BROWSER_ENV){let Re=this.channels,Ce=this.toCanvas();const De=createCanvasFunction(e,t).getContext("2d");let $e=0,Ve=0,Be=0,Me=0;return Te>=0?$e=Te:Be=-Te,Ee>=0?Ve=Ee:Me=-Ee,De.drawImage(Ce,$e,Ve,e,t,Be,Me,e,t),new RawImage(De.getImageData(0,0,e,t).data,e,t,4).convert(Re)}else{let Re=this.toSharp();if(Te>=0&&Ee>=0)Re=Re.extract({left:Math.floor(Te),top:Math.floor(Ee),width:e,height:t});else if(Te<=0&&Ee<=0){let Ce=Math.floor(-Ee),De=Math.floor(-Te);Re=Re.extend({top:Ce,left:De,right:e-this.width-De,bottom:t-this.height-Ce})}else{let Ce=[0,0],De=0;Ee<0?(Ce[0]=Math.floor(-Ee),Ce[1]=t-this.height-Ce[0]):De=Math.floor(Ee);let $e=[0,0],Ve=0;Te<0?($e[0]=Math.floor(-Te),$e[1]=e-this.width-$e[0]):Ve=Math.floor(Te),Re=Re.extend({top:Ce[0],bottom:Ce[1],left:$e[0],right:$e[1]}).extract({left:Ve,top:De,width:e,height:t})}return await loadImageFunction(Re)}}async toBlob(e="image/png",t=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:t})}toTensor(e="CHW"){let t=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(e!=="HWC")if(e==="CHW")t=t.permute(2,0,1);else throw new Error(`Unsupported channel format: ${e}`);return t}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),t=createCanvasFunction(e.width,e.height),Te=new ImageDataClass(e.data,e.width,e.height);return t.getContext("2d").putImageData(Te,0,0),t}_update(e,t,Te,Ee=null){return this.data=e,this.width=t,this.height=Te,Ee!==null&&(this.channels=Ee),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const t=e.split(".").pop().toLowerCase(),Te=CONTENT_TYPE_MAP.get(t)??"image/png",Ee=await this.toBlob(Te),Re=URL.createObjectURL(Ee),Ce=document.createElement("a");Ce.href=Re,Ce.download=e,Ce.click(),Ce.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(n,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const t=await(await getFile(n)).arrayBuffer(),Te=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${Te.sampleRate}Hz.`);const Ee=await Te.decodeAudioData(t);let Re;if(Ee.numberOfChannels===2){const Ce=Math.sqrt(2),De=Ee.getChannelData(0),$e=Ee.getChannelData(1);Re=new Float32Array(De.length);for(let Ve=0;Ve<Ee.length;++Ve)Re[Ve]=Ce*(De[Ve]+$e[Ve])/2}else Re=Ee.getChannelData(0);return Re}function hanning(n){if(n<1)return new Float64Array;if(n===1)return new Float64Array([1]);const e=n-1,t=Math.PI/e,Te=new Float64Array(n);for(let Ee=0;Ee<n;++Ee){const Re=2*Ee-e;Te[Ee]=.5+.5*Math.cos(t*Re)}return Te}const HERTZ_TO_MEL_MAPPING={htk:n=>2595*Math.log10(1+n/700),kaldi:n=>1127*Math.log(1+n/700),slaney:(n,e=1e3,t=15,Te=27/Math.log(6.4))=>n>=e?t+Math.log(n/e)*Te:3*n/200};function hertz_to_mel(n,e="htk"){const t=HERTZ_TO_MEL_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof n=="number"?t(n):n.map(Te=>t(Te))}const MEL_TO_HERTZ_MAPPING={htk:n=>700*(10**(n/2595)-1),kaldi:n=>700*(Math.exp(n/1127)-1),slaney:(n,e=1e3,t=15,Te=Math.log(6.4)/27)=>n>=t?e*Math.exp(Te*(n-t)):200*n/3};function mel_to_hertz(n,e="htk"){const t=MEL_TO_HERTZ_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof n=="number"?t(n):n.map(Te=>t(Te))}function _create_triangular_filter_bank(n,e){const t=Float64Array.from({length:e.length-1},(Ce,De)=>e[De+1]-e[De]),Te=Array.from({length:n.length},()=>new Array(e.length));for(let Ce=0;Ce<n.length;++Ce){const De=Te[Ce];for(let $e=0;$e<e.length;++$e)De[$e]=e[$e]-n[Ce]}const Ee=e.length-2,Re=Array.from({length:Ee},()=>new Array(n.length));for(let Ce=0;Ce<n.length;++Ce){const De=Te[Ce];for(let $e=0;$e<Ee;++$e){const Ve=-De[$e]/t[$e],Be=De[$e+2]/t[$e+1];Re[$e][Ce]=Math.max(0,Math.min(Ve,Be))}}return Re}function linspace(n,e,t){const Te=(e-n)/(t-1);return Float64Array.from({length:t},(Ee,Re)=>n+Te*Re)}function mel_filter_bank(n,e,t,Te,Ee,Re=null,Ce="htk",De=!1){if(Re!==null&&Re!=="slaney")throw new Error('norm must be one of null or "slaney"');const $e=hertz_to_mel(t,Ce),Ve=hertz_to_mel(Te,Ce),Be=linspace($e,Ve,e+2);let Me=mel_to_hertz(Be,Ce),Oe;if(De){const ze=Ee/(n*2);Oe=hertz_to_mel(Float64Array.from({length:n},(He,Ge)=>Ge*ze),Ce),Me=Be}else Oe=linspace(0,Math.floor(Ee/2),n);const Ue=_create_triangular_filter_bank(Oe,Me);if(Re!==null&&Re==="slaney")for(let ze=0;ze<e;++ze){const He=Ue[ze],Ge=2/(Me[ze+2]-Me[ze]);for(let Ke=0;Ke<n;++Ke)He[Ke]*=Ge}return Ue}function padReflect(n,e,t){const Te=new n.constructor(n.length+e+t),Ee=n.length-1;for(let Re=0;Re<n.length;++Re)Te[e+Re]=n[Re];for(let Re=1;Re<=e;++Re)Te[e-Re]=n[calculateReflectOffset(Re,Ee)];for(let Re=1;Re<=t;++Re)Te[Ee+e+Re]=n[calculateReflectOffset(Ee-Re,Ee)];return Te}function _db_conversion_helper(n,e,t,Te,Ee){if(t<=0)throw new Error("reference must be greater than zero");if(Te<=0)throw new Error("min_value must be greater than zero");t=Math.max(Te,t);const Re=Math.log10(t);for(let Ce=0;Ce<n.length;++Ce)n[Ce]=e*Math.log10(Math.max(Te,n[Ce])-Re);if(Ee!==null){if(Ee<=0)throw new Error("db_range must be greater than zero");const Ce=max(n)[0]-Ee;for(let De=0;De<n.length;++De)n[De]=Math.max(n[De],Ce)}return n}function amplitude_to_db(n,e=1,t=1e-5,Te=null){return _db_conversion_helper(n,20,e,t,Te)}function power_to_db(n,e=1,t=1e-10,Te=null){return _db_conversion_helper(n,10,e,t,Te)}function spectrogram(n,e,t,Te,{fft_length:Ee=null,power:Re=1,center:Ce=!0,pad_mode:De="reflect",onesided:$e=!0,preemphasis:Ve=null,mel_filters:Be=null,mel_floor:Me=1e-10,log_mel:Oe=null,reference:Ue=1,min_value:ze=1e-10,db_range:He=null,remove_dc_offset:Ge=null,max_num_frames:Ke=null,do_pad:Xe=!0,transpose:Je=!1}={}){const un=e.length;if(Ee===null&&(Ee=t),t>Ee)throw Error(`frame_length (${t}) may not be larger than fft_length (${Ee})`);if(un!==t)throw new Error(`Length of the window (${un}) must equal frame_length (${t})`);if(Te<=0)throw new Error("hop_length must be greater than zero");if(Re===null&&Be!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(Ce){if(De!=="reflect")throw new Error(`pad_mode="${De}" not implemented yet.`);const On=Math.floor((Ee-1)/2)+1;n=padReflect(n,On,On)}const fn=Math.floor(1+Math.floor((n.length-t)/Te)),yn=$e?Math.floor(Ee/2)+1:Ee;let gn=fn,mn=fn;Ke!==null&&(Ke>fn?Xe&&(mn=Ke):mn=gn=Ke);const dn=new FFT(Ee),vn=new Float64Array(Ee),bn=new Float64Array(dn.outputBufferSize),Tn=new Array(gn);for(let On=0;On<gn;++On){const Fn=On*Te;for(let Hn=0;Hn<t;++Hn)vn[Hn]=n[Fn+Hn];if(Ge){let Hn=0;for(let Un=0;Un<t;++Un)Hn+=vn[Un];const Dn=Hn/t;for(let Un=0;Un<t;++Un)vn[Un]-=Dn}if(Ve!==null){for(let Hn=t-1;Hn>=1;--Hn)vn[Hn]-=Ve*vn[Hn-1];vn[0]*=1-Ve}for(let Hn=0;Hn<e.length;++Hn)vn[Hn]*=e[Hn];dn.realTransform(bn,vn);const $n=new Array(yn);for(let Hn=0;Hn<$n.length;++Hn){const Dn=Hn<<1;$n[Hn]=bn[Dn]**2+bn[Dn+1]**2}Tn[On]=$n}if(Re!==null&&Re!==2){const On=2/Re;for(let Fn=0;Fn<Tn.length;++Fn){const $n=Tn[Fn];for(let Hn=0;Hn<$n.length;++Hn)$n[Hn]**=On}}const En=Be.length,In=new Float32Array(En*mn),Nn=Je?[mn,En]:[En,mn];for(let On=0;On<En;++On){const Fn=Be[On];for(let $n=0;$n<gn;++$n){const Hn=Tn[$n];let Dn=0;for(let Un=0;Un<yn;++Un)Dn+=Fn[Un]*Hn[Un];In[Je?$n*En+On:On*gn+$n]=Math.max(Me,Dn)}}if(Re!==null&&Oe!==null){const On=Math.min(In.length,gn*En);switch(Oe){case"log":for(let Fn=0;Fn<On;++Fn)In[Fn]=Math.log(In[Fn]);break;case"log10":for(let Fn=0;Fn<On;++Fn)In[Fn]=Math.log10(In[Fn]);break;case"dB":if(Re===1)amplitude_to_db(In,Ue,ze,He);else if(Re===2)power_to_db(In,Ue,ze,He);else throw new Error(`Cannot use log_mel option '${Oe}' with power ${Re}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${Oe}'`)}}return{data:In,dims:Nn}}function window_function(n,e,{periodic:t=!0,frame_length:Te=null,center:Ee=!0}={}){const Re=t?n+1:n;let Ce;switch(e){case"boxcar":Ce=new Float64Array(Re).fill(1);break;case"hann":case"hann_window":Ce=hanning(Re);break;case"povey":Ce=hanning(Re).map(De=>Math.pow(De,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(t&&(Ce=Ce.subarray(0,n)),Te===null)return Ce;if(n>Te)throw new Error(`Length of the window (${n}) may not be larger than frame_length (${Te})`);return Ce}function center_to_corners_format([n,e,t,Te]){return[n-t/2,e-Te/2,n+t/2,e+Te/2]}function post_process_object_detection(n,e=.5,t=null,Te=!1){const Ee=n.logits,Re=n.pred_boxes,[Ce,De,$e]=Ee.dims;if(t!==null&&t.length!==Ce)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let Ve=[];for(let Be=0;Be<Ce;++Be){let Me=t!==null?t[Be]:null,Oe={boxes:[],classes:[],scores:[]},Ue=Ee[Be],ze=Re[Be];for(let He=0;He<De;++He){let Ge=Ue[He],Ke=[],Xe;if(Te){Xe=Ge.sigmoid().data;for(let Je=0;Je<Xe.length;++Je)Xe[Je]>e&&Ke.push(Je)}else{let Je=max(Ge.data)[1];if(Je===$e-1)continue;Ke.push(Je),Xe=softmax(Ge.data)}for(const Je of Ke){let un=ze[He].data;un=center_to_corners_format(un),Me!==null&&(un=un.map((fn,yn)=>fn*Me[(yn+1)%2])),Oe.boxes.push(un),Oe.classes.push(Je),Oe.scores.push(Xe[Je])}}Ve.push(Oe)}return Ve}function validate_audio_inputs(n,e){if(!(n instanceof Float32Array||n instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${n?.constructor?.name??typeof n} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(n,e,t=0,Te=null){const Ee=n/e;let Re=bankers_round(Ee)*e;return Te!==null&&Re>Te&&(Re=Math.floor(Ee)*e),Re<t&&(Re=Math.ceil(Ee)*e),Re}function enforce_size_divisibility([n,e],t){return[Math.max(Math.floor(n/t),1)*t,Math.max(Math.floor(e/t),1)*t]}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,t,Te=2){const Ee=e.height,Re=e.width,Ce=t.height,De=t.width;let $e=Math.min(Ee,Ce),Ve=Math.min(Re,De);return $e===Ee&&Ve===Re?e:(Ee>Re?Ve=Math.floor(Re*$e/Ee):Re>Ee&&($e=Math.floor(Ee*Ve/Re)),await e.resize(Ve,$e,{resample:Te}))}async crop_margin(e,t=200){const Te=e.clone().grayscale(),Ee=min(Te.data)[0],Ce=max(Te.data)[0]-Ee;if(Ce===0)return e;const De=t/255;let $e=Te.width,Ve=Te.height,Be=0,Me=0;for(let Oe=0;Oe<Te.height;++Oe){const Ue=Oe*Te.width;for(let ze=0;ze<Te.width;++ze)(Te.data[Ue+ze]-Ee)/Ce<De&&($e=Math.min($e,ze),Ve=Math.min(Ve,Oe),Be=Math.max(Be,ze),Me=Math.max(Me,Oe))}return e=await e.crop([$e,Ve,Be,Me]),e}pad_image(e,t,Te,{mode:Ee="constant",center:Re=!1,constant_values:Ce=0}={}){const[De,$e,Ve]=t;let Be,Me;if(typeof Te=="number"?(Be=Te,Me=Te):(Be=Te.width,Me=Te.height),Be!==$e||Me!==De){const Oe=new Float32Array(Be*Me*Ve);if(Array.isArray(Ce))for(let He=0;He<Oe.length;++He)Oe[He]=Ce[He%Ve];else Ce!==0&&Oe.fill(Ce);const[Ue,ze]=Re?[Math.floor((Be-$e)/2),Math.floor((Me-De)/2)]:[0,0];for(let He=0;He<De;++He){const Ge=(He+ze)*Be,Ke=He*$e;for(let Xe=0;Xe<$e;++Xe){const Je=(Ge+Xe+Ue)*Ve,un=(Ke+Xe)*Ve;for(let fn=0;fn<Ve;++fn)Oe[Je+fn]=e[un+fn]}}if(Ee==="symmetric"){if(Re)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const He=De-1,Ge=$e-1;for(let Ke=0;Ke<Me;++Ke){const Xe=Ke*Be,Je=calculateReflectOffset(Ke,He)*$e;for(let un=0;un<Be;++un){if(Ke<De&&un<$e)continue;const fn=(Xe+un)*Ve,yn=(Je+calculateReflectOffset(un,Ge))*Ve;for(let gn=0;gn<Ve;++gn)Oe[fn+gn]=e[yn+gn]}}}e=Oe,t=[Me,Be,Ve]}return[e,t]}rescale(e){for(let t=0;t<e.length;++t)e[t]=this.rescale_factor*e[t]}get_resize_output_image_size(e,t){const[Te,Ee]=e.size;let Re,Ce;if(this.do_thumbnail){const{height:De,width:$e}=t;Re=Math.min(De,$e)}else Number.isInteger(t)?(Re=t,Ce=this.config.max_size??Re):t!==void 0&&(Re=t.shortest_edge,Ce=t.longest_edge);if(Re!==void 0||Ce!==void 0){const De=Re===void 0?1:Math.max(Re/Te,Re/Ee),$e=Te*De,Ve=Ee*De,Be=Ce===void 0?1:Math.min(Ce/$e,Ce/Ve);let Me=Math.floor(Number(($e*Be).toFixed(2))),Oe=Math.floor(Number((Ve*Be).toFixed(2)));return this.size_divisibility!==void 0&&([Me,Oe]=enforce_size_divisibility([Me,Oe],this.size_divisibility)),[Me,Oe]}else if(t!==void 0&&t.width!==void 0&&t.height!==void 0){let De=t.width,$e=t.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let Ve=$e/Ee,Be=De/Te;Math.abs(1-Be)<Math.abs(1-Ve)?Ve=Be:Be=Ve,$e=constraint_to_multiple_of(Ve*Ee,this.config.ensure_multiple_of),De=constraint_to_multiple_of(Be*Te,this.config.ensure_multiple_of)}return[De,$e]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([Te,Ee],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(t)}`)}}async resize(e){const[t,Te]=this.get_resize_output_image_size(e,this.size);return await e.resize(t,Te,{resample:this.resample})}async preprocess(e,{do_normalize:t=null,do_pad:Te=null,do_convert_rgb:Ee=null,do_convert_grayscale:Re=null,do_flip_channel_order:Ce=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[De,$e]=e.size;if(Ee??this.do_convert_rgb?e=e.rgb():Re&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let Ue,ze;Number.isInteger(this.crop_size)?(Ue=this.crop_size,ze=this.crop_size):(Ue=this.crop_size.width,ze=this.crop_size.height),e=await e.center_crop(Ue,ze)}const Ve=[e.height,e.width];let Be=Float32Array.from(e.data),Me=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(Be),t??this.do_normalize){let Ue=this.image_mean;Array.isArray(this.image_mean)||(Ue=new Array(e.channels).fill(Ue));let ze=this.image_std;if(Array.isArray(this.image_std)||(ze=new Array(e.channels).fill(Ue)),Ue.length!==e.channels||ze.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${Ue.length}) and \`image_std\` (${ze.length}) must match the number of channels in the image (${e.channels}).`);for(let He=0;He<Be.length;He+=e.channels)for(let Ge=0;Ge<e.channels;++Ge)Be[He+Ge]=(Be[He+Ge]-Ue[Ge])/ze[Ge]}if(Te??this.do_pad){if(this.pad_size)[Be,Me]=this.pad_image(Be,[e.height,e.width,e.channels],this.pad_size);else if(this.size_divisibility){const[Ue,ze]=enforce_size_divisibility([Me[1],Me[0]],this.size_divisibility);[Be,Me]=this.pad_image(Be,Me,{width:Ue,height:ze})}}if(Ce??this.do_flip_channel_order){if(Me[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let Ue=0;Ue<Be.length;Ue+=3){const ze=Be[Ue];Be[Ue]=Be[Ue+2],Be[Ue+2]=ze}}const Oe=new Tensor("float32",Be,Me).permute(2,0,1);return{original_size:[$e,De],reshaped_input_size:Ve,pixel_values:Oe}}async _call(e,...t){Array.isArray(e)||(e=[e]);const Te=await Promise.all(e.map(Re=>this.preprocess(Re)));return{pixel_values:stack(Te.map(Re=>Re.pixel_values),0),original_sizes:Te.map(Re=>Re.original_size),reshaped_input_sizes:Te.map(Re=>Re.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,t=null){const Te=e.logits,Ee=Te.dims[0];if(t!==null&&t.length!==Ee)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const Re=[];for(let Ce=0;Ce<Ee;++Ce){const De=t!==null?t[Ce]:null;let $e=Te[Ce];De!==null&&($e=interpolate($e,De,"bilinear",!1));const[Ve,Be]=De??$e.dims.slice(-2),Me=new Tensor("int32",new Int32Array(Ve*Be),[Ve,Be]),Oe=$e[0].data;for(let Ge=1;Ge<$e.dims[0];++Ge){const Ke=$e[Ge].data;for(let Xe=0;Xe<Ke.length;++Xe)Ke[Xe]>Oe[Xe]&&(Oe[Xe]=Ke[Xe],Me.data[Xe]=Ge)}const Ue=new Array($e.dims[0]),ze=Me.data;for(let Ge=0;Ge<ze.length;++Ge){const Ke=ze[Ge];Ue[Ke]=Ke}const He=Ue.filter(Ge=>Ge!==void 0);Re.push({segmentation:Me,labels:He})}return Re}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){const t=this.size?.shortest_edge;if(t===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(t<384){const Te=Math.floor(t/this.crop_pct),[Ee,Re]=this.get_resize_output_image_size(e,{shortest_edge:Te});e=await e.resize(Ee,Re,{resample:this.resample}),e=await e.center_crop(t,t)}else e=await e.resize(t,t,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(t=>t*t))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,t,Te,Ee={}){const[Re,Ce,De]=t;let $e=this.image_mean;Array.isArray(this.image_mean)||($e=new Array(De).fill($e));let Ve=this.image_std;Array.isArray(Ve)||(Ve=new Array(De).fill($e));const Be=$e.map((Me,Oe)=>-Me/Ve[Oe]);return super.pad_image(e,t,Te,{center:!0,constant_values:Be,...Ee})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const t=await super._call(e),Te=[t.pixel_values.dims[0],64,64],Ee=new Tensor("int64",new BigInt64Array(Te.reduce((Re,Ce)=>Re*Ce)).fill(1n),Te);return{...t,pixel_mask:Ee}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,t,Te,Ee){let Re=[],Ce=[],De=[];for(let $e=0;$e<e.dims[0];++$e){let Ve=e[$e],Be=t[$e],Me=max(Ve.data)[1];if(Me===Ee)continue;let Ue=softmax(Ve.data)[Me];Ue>Te&&(Re.push(Be),Ce.push(Ue),De.push(Me))}return[Re,Ce,De]}check_segment_validity(e,t,Te,Ee=.5,Re=.8){let Ce=[],De=0,$e=0;for(let Be=0;Be<e.length;++Be)e[Be]===Te&&(Ce.push(Be),++De),t[Te].data[Be]>=Ee&&++$e;let Ve=De>0&&$e>0;return Ve&&(Ve=De/$e>Re),[Ve,Ce]}compute_segments(e,t,Te,Ee,Re,Ce=null,De=null){let[$e,Ve]=De??e[0].dims,Be=new Tensor("int32",new Int32Array($e*Ve),[$e,Ve]),Me=[];if(De!==null)for(let He=0;He<e.length;++He)e[He]=interpolate(e[He],De,"bilinear",!1);let Oe=new Int32Array(e[0].data.length),Ue=new Float32Array(e[0].data.length);for(let He=0;He<e.length;++He){let Ge=t[He];for(let Ke=0;Ke<e[He].data.length;++Ke)e[He].data[Ke]*=Ge,e[He].data[Ke]>Ue[Ke]&&(Oe[Ke]=He,Ue[Ke]=e[He].data[Ke])}let ze=0;for(let He=0;He<Te.length;++He){let Ge=Te[He],[Ke,Xe]=this.check_segment_validity(Oe,e,He,Ee,Re);if(Ke){++ze;for(let Je of Xe)Be.data[Je]=ze;Me.push({id:ze,label_id:Ge,score:t[He]})}}return[Be,Me]}post_process_panoptic_segmentation(e,t=.5,Te=.5,Ee=.8,Re=null,Ce=null){Re===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),Re=new Set);const De=e.logits,Ve=e.pred_masks.sigmoid();let[Be,Me,Oe]=De.dims;if(Oe-=1,Ce!==null&&Ce.length!==Be)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let Ue=[];for(let ze=0;ze<Be;++ze){let He=Ce!==null?Ce[ze]:null,Ge=De[ze],Ke=Ve[ze],[Xe,Je,un]=this.remove_low_and_no_objects(Ge,Ke,t,Oe);if(un.length===0){let[gn,mn]=He??Ke.dims.slice(-2),dn=new Tensor("int32",new Int32Array(gn*mn).fill(-1),[gn,mn]);Ue.push({segmentation:dn,segments_info:[]});continue}let[fn,yn]=this.compute_segments(Xe,Je,un,Te,Ee,Re,He);Ue.push({segmentation:fn,segments_info:yn})}return Ue}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,t,Te){e=structuredClone(e);let Ee=calculateDimensions(e);if(Ee.length===3)Ee=[1,...Ee],e=[e];else if(Ee.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let Re=0;Re<e.length;++Re){let Ce=t[Re],De=Te[Re],$e=[De[0]/Ce[0],De[1]/Ce[1]];for(let Ve=0;Ve<e[Re].length;++Ve)for(let Be=0;Be<e[Re][Ve].length;++Be)for(let Me=0;Me<e[Re][Ve][Be].length;++Me)e[Re][Ve][Be][Me]*=$e[Me]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),Ee)}add_input_labels(e,t){let Te=calculateDimensions(e);if(Te.length===2)Te=[1,...Te],e=[e];else if(Te.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(Te.some((Ee,Re)=>Ee!==t.dims[Re]))throw Error(`The first ${Te.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),Te)}async _call(e,t=null,Te=null){const Ee=await super._call(e);if(t&&(Ee.input_points=this.reshape_input_points(t,Ee.original_sizes,Ee.reshaped_input_sizes)),Te){if(!Ee.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");Ee.input_labels=this.add_input_labels(Te,Ee.input_points)}return Ee}post_process_masks(e,t,Te,{mask_threshold:Ee=0,binarize:Re=!0,pad_size:Ce=null}={}){const De=[];Ce=Ce??this.pad_size;const $e=[Ce.height,Ce.width];for(let Ve=0;Ve<t.length;++Ve){const Be=t[Ve],Me=Te[Ve],Oe=e[Ve],Ue=[];for(let ze=0;ze<Oe.dims[0];++ze){const He=Oe[ze];let Ge=interpolate(He,$e,"bilinear",!1);if(Ge=Ge.slice(null,[0,Me[0]],[0,Me[1]]),Ge=interpolate(Ge,Be,"bilinear",!1),Re){const Ke=new Uint8Array(Ge.data.length);for(let Xe=0;Xe<Ge.data.length;++Xe)Ge.data[Xe]>Ee&&(Ke[Xe]=1);Ge=new Tensor("bool",Ke,Ge.dims)}Ue.push(Ge)}De.push(stack(Ue))}return De}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,t,Te,Ee={}){const[Re,Ce,De]=t;return super.pad_image(e,t,{width:Ce+(Te-Ce%Te)%Te,height:Re+(Te-Re%Te)%Te},{mode:"symmetric",center:!1,constant_values:-1,...Ee})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const Te=await Promise.all(e.map(Ce=>this.preprocess(Ce))),Ee=await Promise.all(t.map(Ce=>this.preprocess(Ce,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(Te.map((Ce,De)=>cat([Ce.pixel_values,Ee[De].pixel_values],0)),0),original_sizes:Te.map(Ce=>Ce.original_size),reshaped_input_sizes:Te.map(Ce=>Ce.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.config.mel_filters??=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:t,dims:Te}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),Ee=max(t)[0];for(let Re=0;Re<t.length;++Re)t[Re]=(Math.max(t[Re],Ee-8)+4)/4;return{data:t,dims:Te}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let t;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),t=e.slice(0,this.config.n_samples)):(t=new Float32Array(this.config.n_samples),t.set(e));const{data:Te,dims:Ee}=this._extract_fbank_features(t);return{input_features:new Tensor("float32",Te,[1,...Ee])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const Te=e.reduce((Re,Ce)=>Re+Ce,0)/e.length,Ee=e.reduce((Re,Ce)=>Re+(Ce-Te)**2,0)/e.length;return e.map(Re=>(Re-Te)/Math.sqrt(Ee+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let t=e;this.config.do_normalize&&(t=this._zero_mean_unit_var_norm(t));const Te=[1,t.length];return{input_values:new Tensor("float32",t,Te),attention_mask:new Tensor("int64",new BigInt64Array(t.length).fill(1n),Te)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,Te=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let Ee=0;Ee<Te.length;++Ee)Te[Ee].push(0);this.mel_filters=Te,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(e,t){return e=e.map(Te=>Te*32768),spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e,{padding:t=!0,pad_to_multiple_of:Te=2,do_normalize_per_mel_bins:Ee=!0,return_attention_mask:Re=!0}={}){validate_audio_inputs(e,"SeamlessM4TFeatureExtractor");let Ce=this._extract_fbank_features(e,this.config.max_length);if(Ee){const[ze,He]=Ce.dims;for(let Ge=0;Ge<He;++Ge){let Ke=0;for(let fn=0;fn<ze;++fn)Ke+=Ce.data[fn*He+Ge];const Xe=Ke/ze;let Je=0;for(let fn=0;fn<ze;++fn)Je+=(Ce.data[fn*He+Ge]-Xe)**2;Je/=ze-1;const un=Math.sqrt(Je+1e-7);for(let fn=0;fn<ze;++fn){const yn=fn*He+Ge;Ce.data[yn]=(Ce.data[yn]-Xe)/un}}}let De;if(t){const[ze,He]=Ce.dims,Ge=ze%Te;if(Ge>0){const Ke=new Float32Array(He*(ze+Ge));Ke.set(Ce.data),Ke.fill(this.config.padding_value,Ce.data.length);const Xe=ze+Ge;Ce={data:Ke,dims:[Xe,He]},Re&&(De=new Tensor("int64",new BigInt64Array(Xe),[1,Xe]),De.data.fill(1n,0,ze))}}const[$e,Ve]=Ce.dims,Be=this.config.stride;if($e%Be!==0)throw new Error(`The number of frames (${$e}) must be a multiple of the stride (${Be}).`);const Oe=new Tensor("float32",Ce.data,Ce.dims).view(1,Math.floor($e/Be),Ve*Be),Ue={input_features:Oe};if(Re){const ze=Oe.dims[1],He=new Tensor("int64",new BigInt64Array(ze),[1,ze]);if(De)for(let Ge=1,Ke=0;Ge<$e;Ge+=Be,++Ke)He.data[Ke]=De.data[Ge];else He.data.fill(1n);Ue.attention_mask=He}return Ue}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,Te=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let Ee=0;Ee<Te.length;++Ee)Te[Ee].push(0);this.mel_filters=Te,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,t){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const t=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const Te=this.std*2;for(let Ee=0;Ee<t.data.length;++Ee)t.data[Ee]=(t.data[Ee]-this.mean)/Te}return{input_values:new Tensor("float32",t.data,[1,...t.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,t,Te,Ee){let Re,Ce=!1;const De=e.length-t;if(De>0)if(Te==="rand_trunc"){Ce=!0;const $e=Math.floor(Math.random()*(De+1));e=e.subarray($e,$e+t),Re=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),Re.dims=[1,...Re.dims]}else throw new Error(`Truncation strategy "${Te}" not implemented`);else{if(De<0){let $e=new Float64Array(t);if($e.set(e),Ee==="repeat")for(let Ve=e.length;Ve<t;Ve+=e.length)$e.set(e.subarray(0,Math.min(e.length,t-Ve)),Ve);else if(Ee==="repeatpad")for(let Ve=e.length;Ve<-De;Ve+=e.length)$e.set(e,Ve);e=$e}if(Te==="fusion")throw new Error(`Truncation strategy "${Te}" not implemented`);Re=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),Re.dims=[1,...Re.dims]}return{...Re,longer:Ce}}_extract_fbank_features(e,t,Te=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:t,log_mel:"dB",max_num_frames:Te,do_pad:!1,transpose:!0})}async _call(e,{max_length:t=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const Te=this._get_input_mel(e,t??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",Te.data,[1,...Te.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...t){return await this.feature_extractor(e,...t)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static FEATURE_EXTRACTOR_CLASS_MAPPING={ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor};static PROCESSOR_CLASS_MAPPING={WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor};static async from_pretrained(e,{progress_callback:t=null,config:Te=null,cache_dir:Ee=null,local_files_only:Re=!1,revision:Ce="main"}={}){let De=Te??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:t,cache_dir:Ee,local_files_only:Re,revision:Ce}),$e=De.feature_extractor_type??De.image_processor_type,Ve=this.FEATURE_EXTRACTOR_CLASS_MAPPING[$e];if(!Ve)if(De.size!==void 0)console.warn(`Feature extractor type "${$e}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),Ve=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${$e}`);let Be=this.PROCESSOR_CLASS_MAPPING[De.processor_class]??Processor,Me=new Ve(De);return new Be(Me)}}async function prepareImages(n){return Array.isArray(n)||(n=[n]),await Promise.all(n.map(e=>RawImage.read(e)))}async function prepareAudios(n,e){return Array.isArray(n)||(n=[n]),await Promise.all(n.map(t=>typeof t=="string"||t instanceof URL?read_audio(t,e):t instanceof Float64Array?new Float32Array(t):t))}function get_bounding_box(n,e){e&&(n=n.map(Ce=>Ce|0));const[t,Te,Ee,Re]=n;return{xmin:t,ymin:Te,xmax:Ee,ymax:Re}}class Pipeline extends Callable{constructor({task:e,model:t,tokenizer:Te=null,processor:Ee=null}){super(),this.task=e,this.model=t,this.tokenizer=Te,this.processor=Ee}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const Te=this.tokenizer(e,{padding:!0,truncation:!0}),Ee=await this.model(Te),Re=this.model.config.problem_type==="multi_label_classification"?$e=>$e.sigmoid().data:$e=>softmax($e.data),Ce=this.model.config.id2label,De=[];for(const $e of Ee.logits){const Ve=Re($e),Me=getTopItems(Ve,t).map(Oe=>({label:Ce[Oe[0]],score:Oe[1]}));t===1?De.push(...Me):De.push(Me)}return Array.isArray(e)||t===1?De:De[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:t=["O"]}={}){const Te=Array.isArray(e),Ee=this.tokenizer(Te?e:[e],{padding:!0,truncation:!0}),Ce=(await this.model(Ee)).logits,De=this.model.config.id2label,$e=[];for(let Ve=0;Ve<Ce.dims[0];++Ve){const Be=Ee.input_ids[Ve],Me=Ce[Ve],Oe=[];for(let Ue=0;Ue<Me.dims[0];++Ue){const ze=Me[Ue],He=max(ze.data)[1],Ge=De?De[He]:`LABEL_${He}`;if(t.includes(Ge))continue;const Ke=this.tokenizer.decode([Be[Ue].item()],{skip_special_tokens:!0});if(Ke==="")continue;const Xe=softmax(ze.data);Oe.push({entity:Ge,score:Xe[He],index:Ue,word:Ke,start:null,end:null})}$e.push(Oe)}return Te?$e:$e[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{topk:Te=1}={}){const Ee=this.tokenizer(e,{text_pair:t,padding:!0,truncation:!0}),Re=await this.model(Ee),Ce=[];for(let De=0;De<Re.start_logits.dims[0];++De){const $e=Ee.input_ids[De],Ve=$e.indexOf(this.tokenizer.sep_token_id),Be=Array.from(softmax(Re.start_logits[De].data)).map((Ue,ze)=>[Ue,ze]).filter(Ue=>Ue[1]>Ve),Me=Array.from(softmax(Re.end_logits[De].data)).map((Ue,ze)=>[Ue,ze]).filter(Ue=>Ue[1]>Ve),Oe=product(Be,Me).filter(Ue=>Ue[0][1]<=Ue[1][1]).map(Ue=>[Ue[0][1],Ue[1][1],Ue[0][0]*Ue[1][0]]).sort((Ue,ze)=>ze[2]-Ue[2]);for(let Ue=0;Ue<Math.min(Oe.length,Te);++Ue){const[ze,He,Ge]=Oe[Ue],Ke=[...$e].slice(ze,He+1),Xe=this.tokenizer.decode(Ke,{skip_special_tokens:!0});Ce.push({answer:Xe,score:Ge})}}return Te===1?Ce[0]:Ce}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=5}={}){const Te=this.tokenizer(e,{padding:!0,truncation:!0}),Ee=await this.model(Te),Re=[];for(let Ce=0;Ce<Te.input_ids.dims[0];++Ce){const De=Te.input_ids[Ce],$e=De.indexOf(this.tokenizer.mask_token_id);if($e===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const Be=Ee.logits[Ce][$e],Me=getTopItems(softmax(Be.data),t);Re.push(Me.map(Oe=>{const Ue=[...De];return Ue[$e]=Oe[0],{score:Oe[1],token:Oe[0],token_str:this.tokenizer.model.vocab[Oe[0]],sequence:this.tokenizer.decode(Ue,{skip_special_tokens:!0})}}))}return Array.isArray(e)?Re:Re[0]}}class Text2TextGenerationPipeline extends Pipeline{_key="generated_text";constructor(e){super(e)}async _call(e,t={}){Array.isArray(e)||(e=[e]),this.model.config.prefix&&(e=e.map($e=>this.model.config.prefix+$e));const Te=this.model.config.task_specific_params;Te&&Te[this.task]&&Te[this.task].prefix&&(e=e.map($e=>Te[this.task].prefix+$e));const Ee=this.tokenizer,Re={padding:!0,truncation:!0};let Ce;this instanceof TranslationPipeline&&"_build_translation_inputs"in Ee?Ce=Ee._build_translation_inputs(e,Re,t).input_ids:Ce=Ee(e,Re).input_ids;const De=await this.model.generate(Ce,t);return Ee.batch_decode(De,{skip_special_tokens:!0}).map($e=>({[this._key]:$e}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{_key="summary_text";constructor(e){super(e)}}class TranslationPipeline extends Text2TextGenerationPipeline{_key="translation_text";constructor(e){super(e)}}function isChat(n){return Array.isArray(n)&&n.every(e=>"role"in e&&"content"in e)}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){let Te=!1,Ee=!1,Re;if(typeof e=="string")Re=e=[e];else if(Array.isArray(e)&&e.every(ze=>typeof ze=="string"))Te=!0,Re=e;else{if(isChat(e))e=[e];else if(Array.isArray(e)&&e.every(isChat))Te=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");Ee=!0,Re=e.map(ze=>this.tokenizer.apply_chat_template(ze,{tokenize:!1,add_generation_prompt:!0}))}const Ce=t.add_special_tokens??!1,De=Ee?!1:t.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:$e,attention_mask:Ve}=this.tokenizer(Re,{add_special_tokens:Ce,padding:!0,truncation:!0}),Be=await this.model.generate($e,t,null,{inputs_attention_mask:Ve});let Me=this.tokenizer.batch_decode(Be,{skip_special_tokens:!0}),Oe;!De&&$e.dims.at(-1)>0&&(Oe=this.tokenizer.batch_decode($e,{skip_special_tokens:!0}).map(ze=>ze.length));const Ue=Array.from({length:e.length},ze=>[]);for(let ze=0;ze<Me.length;++ze){const He=Math.floor(ze/Be.length*e.length);Oe&&(Me[ze]=Me[ze].slice(Oe[He])),Ue[He].push({generated_text:Ee?[...e[He],{role:"assistant",content:Me[ze]}]:Me[ze]})}return!Te&&Ue.length===1?Ue[0]:Ue}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([t,Te])=>[t.toLowerCase(),Te])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,t,{hypothesis_template:Te="This example is {}.",multi_label:Ee=!1}={}){const Re=Array.isArray(e);Re||(e=[e]),Array.isArray(t)||(t=[t]);const Ce=t.map(Ve=>Te.replace("{}",Ve)),De=Ee||t.length===1,$e=[];for(const Ve of e){const Be=[];for(const Ue of Ce){const ze=this.tokenizer(Ve,{text_pair:Ue,padding:!0,truncation:!0}),He=await this.model(ze);De?Be.push([He.logits.data[this.contradiction_id],He.logits.data[this.entailment_id]]):Be.push(He.logits.data[this.entailment_id])}const Oe=(De?Be.map(Ue=>softmax(Ue)[1]):softmax(Be)).map((Ue,ze)=>[Ue,ze]).sort((Ue,ze)=>ze[0]-Ue[0]);$e.push({sequence:Ve,labels:Oe.map(Ue=>t[Ue[1]]),scores:Oe.map(Ue=>Ue[0])})}return Re?$e:$e[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:t="none",normalize:Te=!1,quantize:Ee=!1,precision:Re="binary"}={}){const Ce=this.tokenizer(e,{padding:!0,truncation:!0}),De=await this.model(Ce);let $e=De.last_hidden_state??De.logits??De.token_embeddings;if(t!=="none")if(t==="mean")$e=mean_pooling($e,Ce.attention_mask);else if(t==="cls")$e=$e.slice(null,0);else throw Error(`Pooling method '${t}' not supported.`);return Te&&($e=$e.normalize(2,-1)),Ee&&($e=quantize_embeddings($e,Re)),$e}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pool:t=null}={}){const Te=await prepareImages(e),{pixel_values:Ee}=await this.processor(Te),Re=await this.model({pixel_values:Ee});let Ce;if(t){if(!("pooler_output"in Re))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");Ce=Re.pooler_output}else Ce=Re.last_hidden_state??Re.logits??Re.image_embeds;return Ce}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=null}={}){const Te=!Array.isArray(e),Ee=this.processor.feature_extractor.config.sampling_rate,Re=await prepareAudios(e,Ee),Ce=this.model.config.id2label,De=[];for(const $e of Re){const Ve=await this.processor($e),Me=(await this.model(Ve)).logits[0],Ue=getTopItems(softmax(Me.data),t).map(ze=>({label:Ce[ze[0]],score:ze[1]}));t===1?De.push(...Ue):De.push(Ue)}return!Te||t===1?De:De[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:Te="This is a sound of {}."}={}){const Ee=!Array.isArray(e);Ee&&(e=[e]);const Re=t.map(Be=>Te.replace("{}",Be)),Ce=this.tokenizer(Re,{padding:!0,truncation:!0}),De=this.processor.feature_extractor.config.sampling_rate,$e=await prepareAudios(e,De),Ve=[];for(const Be of $e){const Me=await this.processor(Be),Oe=await this.model({...Ce,...Me}),Ue=softmax(Oe.logits_per_audio.data);Ve.push([...Ue].map((ze,He)=>({score:ze,label:t[He]})))}return Ee?Ve[0]:Ve}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,t);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,t);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,t={}){t.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),t.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const Te=!Array.isArray(e);Te&&(e=[e]);const Ee=this.processor.feature_extractor.config.sampling_rate,Re=await prepareAudios(e,Ee),Ce=[];for(const De of Re){const $e=await this.processor(De),Be=(await this.model($e)).logits[0],Me=[];for(const Ue of Be)Me.push(max(Ue.data)[1]);const Oe=this.tokenizer.decode(Me);Ce.push({text:Oe})}return Te?Ce[0]:Ce}async _call_whisper(e,t={}){const Te=t.return_timestamps??!1,Ee=t.chunk_length_s??0,Re=t.chunk_callback??null,Ce=t.force_full_sequences??!1;let De=t.stride_length_s??null;Te==="word"&&(t.return_token_timestamps=!0);const $e=pop(t,"language",null),Ve=pop(t,"task",null);if($e||Ve||Te){if(t.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const Ge=this.tokenizer.get_decoder_prompt_ids({language:$e,task:Ve,no_timestamps:!Te});Ge.length>0&&(t.forced_decoder_ids=Ge)}const Be=!Array.isArray(e);Be&&(e=[e]);const Me=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,Oe=this.processor.feature_extractor.config.hop_length,Ue=this.processor.feature_extractor.config.sampling_rate,ze=await prepareAudios(e,Ue),He=[];for(const Ge of ze){let Ke=[];if(Ee>0){if(De===null)De=Ee/6;else if(Ee<=De)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const un=Ue*Ee,fn=Ue*De,yn=un-2*fn;let gn=0;for(;gn<Ge.length;){const mn=Ge.subarray(gn,gn+un),dn=await this.processor(mn),vn=gn===0,bn=gn+yn>=Ge.length;Ke.push({stride:[mn.length,vn?0:fn,bn?0:fn],input_features:dn.input_features,is_last:bn}),gn+=yn}}else Ke=[{stride:[Ge.length,0,0],input_features:(await this.processor(Ge)).input_features,is_last:!0}];for(const un of Ke){t.num_frames=Math.floor(un.stride[0]/Oe);const fn=await this.model.generate(un.input_features,t);Te==="word"?(un.tokens=fn.sequences[0],un.token_timestamps=fn.token_timestamps.tolist()[0].map(yn=>round(yn,2))):un.tokens=fn[0],un.stride=un.stride.map(yn=>yn/Ue),Re!==null&&Re(un)}const[Xe,Je]=this.tokenizer._decode_asr(Ke,{time_precision:Me,return_timestamps:Te,force_full_sequences:Ce});He.push({text:Xe,...Je})}return Be?He[0]:He}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){const Te=Array.isArray(e),Ee=await prepareImages(e),{pixel_values:Re}=await this.processor(Ee),Ce=[];for(const De of Re){De.dims=[1,...De.dims];const $e=await this.model.generate(De,t),Ve=this.tokenizer.batch_decode($e,{skip_special_tokens:!0}).map(Be=>({generated_text:Be.trim()}));Ce.push(Ve)}return Te?Ce:Ce[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const Te=Array.isArray(e),Ee=await prepareImages(e),{pixel_values:Re}=await this.processor(Ee),Ce=await this.model({pixel_values:Re}),De=this.model.config.id2label,$e=[];for(const Ve of Ce.logits){const Me=getTopItems(softmax(Ve.data),t).map(Oe=>({label:De[Oe[0]],score:Oe[1]}));t===1?$e.push(...Me):$e.push(Me)}return Te||t===1?$e:$e[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:t=.5,mask_threshold:Te=.5,overlap_mask_area_threshold:Ee=.8,label_ids_to_fuse:Re=null,target_sizes:Ce=null,subtask:De=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const Ve=await prepareImages(e),Be=Ve.map(Ke=>[Ke.height,Ke.width]),{pixel_values:Me,pixel_mask:Oe}=await this.processor(Ve),Ue=await this.model({pixel_values:Me,pixel_mask:Oe});let ze=null;if(De!==null)ze=this.subtasks_mapping[De];else for(let[Ke,Xe]of Object.entries(this.subtasks_mapping))if(Xe in this.processor.feature_extractor){ze=this.processor.feature_extractor[Xe].bind(this.processor.feature_extractor),De=Ke;break}const He=this.model.config.id2label,Ge=[];if(De==="panoptic"||De==="instance"){const Ke=ze(Ue,t,Te,Ee,Re,Ce??Be)[0],Xe=Ke.segmentation;for(const Je of Ke.segments_info){const un=new Uint8ClampedArray(Xe.data.length);for(let yn=0;yn<Xe.data.length;++yn)Xe.data[yn]===Je.id&&(un[yn]=255);const fn=new RawImage(un,Xe.dims[1],Xe.dims[0],1);Ge.push({score:Je.score,label:He[Je.label_id],mask:fn})}}else if(De==="semantic"){const{segmentation:Ke,labels:Xe}=ze(Ue,Ce??Be)[0];for(const Je of Xe){const un=new Uint8ClampedArray(Ke.data.length);for(let yn=0;yn<Ke.data.length;++yn)Ke.data[yn]===Je&&(un[yn]=255);const fn=new RawImage(un,Ke.dims[1],Ke.dims[0],1);Ge.push({score:null,label:He[Je],mask:fn})}}else throw Error(`Subtask ${De} not supported.`);return Ge}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:Te="This is a photo of {}"}={}){const Ee=Array.isArray(e),Re=await prepareImages(e),Ce=t.map(Oe=>Te.replace("{}",Oe)),De=this.tokenizer(Ce,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:$e}=await this.processor(Re),Ve=await this.model({...De,pixel_values:$e}),Be=this.model.config.model_type==="siglip"?Oe=>Oe.sigmoid().data:Oe=>softmax(Oe.data),Me=[];for(const Oe of Ve.logits_per_image){const ze=[...Be(Oe)].map((He,Ge)=>({score:He,label:t[Ge]}));ze.sort((He,Ge)=>Ge.score-He.score),Me.push(ze)}return Ee?Me:Me[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:t=.9,percentage:Te=!1}={}){const Ee=Array.isArray(e);if(Ee&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const Re=await prepareImages(e),Ce=Te?null:Re.map(Ue=>[Ue.height,Ue.width]),{pixel_values:De,pixel_mask:$e}=await this.processor(Re),Ve=await this.model({pixel_values:De,pixel_mask:$e}),Be=this.processor.feature_extractor.post_process_object_detection(Ve,t,Ce),Me=this.model.config.id2label,Oe=Be.map(Ue=>Ue.boxes.map((ze,He)=>({score:Ue.scores[He],label:Me[Ue.classes[He]],box:get_bounding_box(ze,!Te)})));return Ee?Oe:Oe[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{threshold:Te=.1,topk:Ee=null,percentage:Re=!1}={}){const Ce=Array.isArray(e),De=await prepareImages(e),$e=this.tokenizer(t,{padding:!0,truncation:!0}),Ve=await this.processor(De),Be=[];for(let Me=0;Me<De.length;++Me){const Oe=De[Me],Ue=Re?null:[[Oe.height,Oe.width]],ze=Ve.pixel_values[Me].unsqueeze_(0),He=await this.model({...$e,pixel_values:ze}),Ge=this.processor.feature_extractor.post_process_object_detection(He,Te,Ue,!0)[0];let Ke=Ge.boxes.map((Xe,Je)=>({score:Ge.scores[Je],label:t[Ge.classes[Je]],box:get_bounding_box(Xe,!Re)})).sort((Xe,Je)=>Je.score-Xe.score);Ee!==null&&(Ke=Ke.slice(0,Ee)),Be.push(Ke)}return Ce?Be:Be[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,Te={}){const Ee=(await prepareImages(e))[0],{pixel_values:Re}=await this.processor(Ee),Ce=`<s_docvqa><s_question>${t}</s_question><s_answer>`,De=this.tokenizer(Ce,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,$e=await this.model.generate(Re,{...Te,decoder_input_ids:De,max_length:this.model.config.decoder.max_position_embeddings}),Be=this.tokenizer.batch_decode($e)[0].match(/<s_answer>(.*?)<\/s_answer>/);let Me=null;return Be&&Be.length>=2&&(Me=Be[1].trim()),[{answer:Me}]}}class TextToAudioPipeline extends Pipeline{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(e){super(e),this.vocoder=e.vocoder??null}async _call(e,{speaker_embeddings:t=null}={}){return this.processor?this._call_text_to_spectrogram(e,{speaker_embeddings:t}):this._call_text_to_waveform(e)}async _call_text_to_waveform(e){const t=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:Te}=await this.model(t),Ee=this.model.config.sampling_rate;return{audio:Te.data,sampling_rate:Ee}}async _call_text_to_spectrogram(e,{speaker_embeddings:t}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof t=="string"||t instanceof URL)&&(t=new Float32Array(await(await fetch(t)).arrayBuffer())),t instanceof Float32Array)t=new Tensor("float32",t,[1,t.length]);else if(!(t instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:Te}=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:Ee}=await this.model.generate_speech(Te,t,{vocoder:this.vocoder}),Re=this.processor.feature_extractor.config.sampling_rate;return{audio:Ee.data,sampling_rate:Re}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),Te=await this.processor(t),Ee=await this.model(Te),Re=[];for(const Ce of Ee.reconstruction){const De=Ce.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");Re.push(RawImage.fromTensor(De))}return Re.length>1?Re:Re[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),Te=await this.processor(t),{predicted_depth:Ee}=await this.model(Te),Re=[];for(let Ce=0;Ce<t.length;++Ce){const De=interpolate(Ee[Ce],t[Ce].size.reverse(),"bilinear",!1),$e=De.mul_(255/max(De.data)[0]).to("uint8");Re.push({predicted_depth:Ee[Ce],depth:RawImage.fromTensor($e)})}return Re.length>1?Re:Re[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(n,e=null,{quantized:t=!0,progress_callback:Te=null,config:Ee=null,cache_dir:Re=null,local_files_only:Ce=!1,revision:De="main",model_file_name:$e=null}={}){n=TASK_ALIASES[n]??n;const Ve=SUPPORTED_TASKS[n.split("_",1)[0]];if(!Ve)throw Error(`Unsupported pipeline: ${n}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=Ve.default.model,console.log(`No model specified. Using default model: "${e}".`));const Be={quantized:t,progress_callback:Te,config:Ee,cache_dir:Re,local_files_only:Ce,revision:De,model_file_name:$e},Me=new Map([["tokenizer",Ve.tokenizer],["model",Ve.model],["processor",Ve.processor]]),Oe=await loadItems(Me,e,Be);Oe.task=n,dispatchCallback(Te,{status:"ready",task:n,model:e});const Ue=Ve.pipeline;return new Ue(Oe)}async function loadItems(n,e,t){const Te=Object.create(null),Ee=[];for(let[Re,Ce]of n.entries()){if(!Ce)continue;let De;Array.isArray(Ce)?De=new Promise(async($e,Ve)=>{let Be;for(let Me of Ce){if(Me===null){$e(null);return}try{$e(await Me.from_pretrained(e,t));return}catch(Oe){Be=Oe}}Ve(Be)}):De=Ce.from_pretrained(e,t),Te[Re]=De,Ee.push(De)}await Promise.all(Ee);for(let[Re,Ce]of Object.entries(Te))Te[Re]=await Ce;return Te}let transcriber=null;async function loadModel(){if(!transcriber)try{console.log(" Loading Whisper model from /models/whisper-tiny..."),transcriber=await pipeline("automatic-speech-recognition","/models/whisper-tiny",{quantized:!0,local_files_only:!0}),console.log(" Whisper model loaded successfully.")}catch{y$1.error("Failed to load Whisper model.")}return transcriber}function VoiceFeedback(){const[n,e]=reactExports.useState(!1),[t,Te]=reactExports.useState(!1),[Ee,Re]=reactExports.useState(""),[Ce,De]=reactExports.useState(""),[$e,Ve]=reactExports.useState(null),[Be,Me]=reactExports.useState(""),[Oe,Ue]=reactExports.useState(!1),ze=reactExports.useRef(null),He=reactExports.useRef([]);reactExports.useEffect(()=>(loadModel(),onAuthStateChanged(auth,yn=>{yn&&Ve(yn.uid)})),[]);const Ge=async()=>{try{const yn=await navigator.mediaDevices.getUserMedia({audio:!0});ze.current=new MediaRecorder(yn),He.current=[],ze.current.ondataavailable=gn=>He.current.push(gn.data),ze.current.onstop=Xe,ze.current.start(),e(!0),Ue(!0)}catch(yn){console.error(" Mic access failed:",yn),y$1.error("Please allow microphone access.")}},Ke=()=>ze.current?.stop(),Xe=async()=>{Te(!0);const yn=new Blob(He.current,{type:"audio/webm"});try{const gn=await yn.arrayBuffer(),mn=await loadModel();if(!mn){Re(" Whisper model not available."),y$1.error("Whisper model not available.");return}const{text:dn}=await mn(gn);Re(dn),await Je(dn)}catch(gn){console.error(" Transcription failed:",gn),Re(" Could not transcribe audio."),y$1.error("Could not transcribe audio.")}finally{Te(!1),e(!1),Ue(!1)}},Je=async yn=>{try{const mn=(await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-8b-8192",messages:[{role:"system",content:"You're VoiceMirror by Mindmorph: give warm, constructive speaking feedback."},{role:"user",content:yn}],temperature:.7},{headers:{Authorization:"Bearer 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"}})).data.choices[0]?.message?.content||" No feedback generated.";De(mn),un(mn),$e&&await addDoc(collection(db,"voicemirror",$e,"sessions"),{transcript:yn,feedback:mn,reaction:Be,createdAt:serverTimestamp()})}catch(gn){console.error(" AI response error:",gn),De(" Could not generate feedback."),y$1.error("Could not generate AI feedback.")}},un=yn=>{const gn=new SpeechSynthesisUtterance(yn);gn.lang="en-IN",speechSynthesis.speak(gn)},fn=()=>{const yn=new E;yn.text(" Transcript:",10,10),yn.text(Ee||"None",10,20),yn.text(" Feedback:",10,40),yn.text(Ce||"None",10,50),yn.save("VoiceMirror.pdf")};return jsxRuntimeExports.jsx("div",{className:"min-h-screen p-6 bg-gradient-to-br from-indigo-100 to-white dark:from-gray-900 dark:to-black text-gray-900 dark:text-white font-poppins",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto bg-white/30 dark:bg-white/10 backdrop-blur-md p-6 rounded-2xl shadow-lg",children:[jsxRuntimeExports.jsx("h1",{className:"text-center text-3xl font-bold text-indigo-700 dark:text-indigo-300 mb-6",children:" VoiceMirror  Speak. Reflect. Improve."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[jsxRuntimeExports.jsxs("button",{onClick:n?Ke:Ge,className:`px-6 py-3 rounded-full text-white shadow-md flex items-center gap-2 transition-all ${n?"bg-red-600 hover:bg-red-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:[n?jsxRuntimeExports.jsx(CircleStop,{size:20}):jsxRuntimeExports.jsx(Mic,{size:20}),n?"Stop":"Record"]}),jsxRuntimeExports.jsx("button",{onClick:fn,className:"underline text-indigo-600 hover:text-indigo-800 text-sm self-center",children:" Export PDF"})]}),Oe&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 space-x-1 h-10",children:[...Array(10)].map((yn,gn)=>jsxRuntimeExports.jsx("div",{className:"w-2 bg-indigo-400 rounded animate-pulse",style:{animationDelay:`${gn*100}ms`}},gn))}),t&&jsxRuntimeExports.jsx("p",{className:"text-center text-gray-600 mb-4",children:" Processing"}),Ee&&jsxRuntimeExports.jsxs("div",{className:"bg-white/40 dark:bg-white/10 p-4 mb-6 rounded-xl border shadow-inner",children:[jsxRuntimeExports.jsx("h2",{className:"font-semibold text-indigo-700 dark:text-indigo-300 mb-2",children:" Transcript"}),jsxRuntimeExports.jsx("p",{children:Ee})]}),Ce&&jsxRuntimeExports.jsxs("div",{className:"bg-indigo-100/40 dark:bg-indigo-300/10 p-4 rounded-xl border shadow-md",children:[jsxRuntimeExports.jsx("h2",{className:"font-semibold text-indigo-800 dark:text-indigo-300 mb-2",children:" Feedback"}),jsxRuntimeExports.jsx("p",{children:Ce}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>un(Ce),className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 text-sm",children:[jsxRuntimeExports.jsx(Volume2,{size:18})," Hear Again"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 text-xl",children:["","","","",""].map(yn=>jsxRuntimeExports.jsx("button",{onClick:()=>Me(yn),className:Be===yn?"opacity-100":"opacity-50",children:yn},yn))})]})]})]})})}function Home({user:n}){const[e,t]=reactExports.useState(!0),Te=reactExports.useRef(null),Ee=useNavigate();reactExports.useEffect(()=>{const un=setTimeout(()=>t(!1),1500);return()=>clearTimeout(un)},[]);const Re=[{title:"Career Mentor",desc:"Get career advice powered by your strengths and passions.",icon:jsxRuntimeExports.jsx(GraduationCap,{className:"w-6 h-6 text-purple-400"}),link:"/careercrack"},{title:"Mood Mirror",desc:"Chat with an AI that understands your emotions and tracks your mood.",icon:jsxRuntimeExports.jsx(Brain,{className:"w-6 h-6 text-purple-400"}),link:"/moodmirror"},{title:"Scholarship Scout",desc:"Find best-fit scholarships based on your background & interests.",icon:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6 text-purple-400"}),link:"/scholarships"},{title:"Smart Notes",desc:"Organize your notes with AI tagging and outlines.",icon:jsxRuntimeExports.jsx(NotebookPen,{className:"w-6 h-6 text-purple-400"}),link:"/smartnotes"},{title:"Voice to Text",desc:"Transcribe your ideas with whisper-accurate AI.",icon:jsxRuntimeExports.jsx(Mic,{className:"w-6 h-6 text-purple-400"}),link:"/voicefeedback"},{title:"PDF Exports",desc:"Download your chats and notes instantly.",icon:jsxRuntimeExports.jsx(FileText,{className:"w-6 h-6 text-purple-400"}),link:"/careercrack"},{title:"Resume Analyzer",desc:"Upload your resume for an ATS score and improvement tips.",icon:jsxRuntimeExports.jsx(FileText,{className:"w-6 h-6 text-purple-400"}),link:"/resume-analyzer"},{title:"Resource Vault",desc:"Discover, upvote, and manage useful resources together.",icon:jsxRuntimeExports.jsx(BookOpen,{className:"w-6 h-6 text-purple-400"}),link:"/resourcevault"}],Ce=[{name:"Ananya S.",quote:"EDGEx helped me discover a career path I never even considered. Life-changing!",role:"Class 12, Delhi"},{name:"Rohan M.",quote:"MoodMirror is like talking to a friend who truly understands you. So cool!",role:"Class 10, Mumbai"},{name:"Sneha T.",quote:"The scholarship tool got me 3 perfect matches. This is the future of guidance!",role:"Commerce Student, Kolkata"}],[[De,$e],Ve]=reactExports.useState([0,0]),Be=un=>{Ve(([fn])=>[(fn+un+Ce.length)%Ce.length,un])},{scrollYProgress:Me}=useScroll(),Oe=useTransform(Me,[0,1],["0%","50%"]),Ue=[{label:"Students Helped",value:5700},{label:"Scholarships Found",value:1300},{label:"Mood Sessions",value:25e3}],[ze,He]=reactExports.useState(Ue.map(()=>1)),[Ge,Ke]=reactExports.useState(!1);reactExports.useEffect(()=>{let un=0,fn=null,yn=!1;const gn=()=>{if(!Te.current||Ge)return;const mn=window.pageYOffset||document.documentElement.scrollTop,dn=Te.current.getBoundingClientRect(),vn=window.innerHeight;fn&&clearTimeout(fn),dn.top<=vn*.5&&dn.bottom>=vn*.5&&Math.abs(mn-un)>10&&!yn&&(yn=!0,Xe(),setTimeout(()=>{yn=!1},3e3)),un=mn,fn=setTimeout(()=>{},150)};return gn(),window.addEventListener("scroll",gn,{passive:!0}),()=>{window.removeEventListener("scroll",gn),fn&&clearTimeout(fn)}},[Ge]);const Xe=()=>{if(Ge)return;Ke(!0),He(Ue.map(()=>1));const un=2e3,fn=60,yn=un/fn;let gn=0;const mn=setInterval(()=>{gn++,He(dn=>{const vn=dn.map((bn,Tn)=>{const En=Ue[Tn].value,In=gn/fn,Nn=Math.floor(1+(En-1)*In);return Math.min(Nn,En)});return gn>=fn&&(clearInterval(mn),setTimeout(()=>{Ke(!1)},1e4)),vn})},yn)},Je=()=>{Ee(n?"/careercrack":"/login")};return e?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-[#0a0a14]",children:jsxRuntimeExports.jsx(motion.div,{className:"w-10 h-10 rounded-full bg-purple-500",animate:{scale:[1,1.5,1]},transition:{repeat:1/0,duration:1}})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white text-gray-900 dark:bg-[#0a0a14] dark:text-white font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"relative overflow-hidden py-24 px-6 lg:px-20 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.div,{style:{y:Oe},className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-purple-500 opacity-30 blur-3xl rounded-full z-0"}),jsxRuntimeExports.jsxs(motion.svg,{className:"absolute inset-0 w-full h-full z-0 opacity-5",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{y:Oe},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"white",strokeWidth:"0.2"})})}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7},className:"z-10 max-w-4xl",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl md:text-6xl font-bold leading-tight text-gray-900 dark:text-white mb-6",children:["Think better with ",jsxRuntimeExports.jsx("span",{className:"text-purple-400",children:"EDGEx"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-8",children:"Your all-in-one AI toolkit: career mentor, mood companion, scholarship tracker & more."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:Je,className:"bg-purple-600 hover:bg-purple-700 transition px-6 py-3 rounded-lg text-white font-semibold flex items-center gap-2",children:["Start Exploring ",jsxRuntimeExports.jsx(ArrowRight,{size:18})]}),jsxRuntimeExports.jsx("a",{href:"#features",className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white underline flex items-center h-full px-6 py-3 rounded-lg font-semibold",children:"Learn More"})]})]})]}),jsxRuntimeExports.jsxs("section",{id:"features",className:"py-20 px-6 lg:px-20 bg-gray-100 dark:bg-[#0e0e1a]",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white",children:"What can EDGEx AI do?"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto text-gray-900 dark:text-white",children:Re.map((un,fn)=>{const yn=jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.03},initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.3},viewport:{once:!0},className:"bg-glass backdrop-blur-md p-6 rounded-xl border border-white/10 transition-[box-shadow,colors] duration-300 cursor-pointer flex flex-col justify-between h-full hover:shadow-2xl hover:border-white/20 hover:bg-white/5 text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[un.icon,jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:un.title})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 flex-grow",children:un.desc})]},fn);return un.link?jsxRuntimeExports.jsx(Link,{to:un.link,children:yn},fn):jsxRuntimeExports.jsx("div",{children:yn},fn)})})]}),jsxRuntimeExports.jsxs("section",{ref:Te,className:"py-20 bg-white text-center dark:bg-[#0a0a14]",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-12",children:"Our Impact So Far "}),!Ge&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:Xe,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}),jsxRuntimeExports.jsx("div",{className:"text-blue-400 text-sm mt-2"})]}),Ge&&jsxRuntimeExports.jsx("div",{className:"text-green-400 text-sm mb-6 animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-10 max-w-6xl mx-auto",children:Ue.map((un,fn)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:fn*.2},viewport:{once:!0},className:"p-6 rounded-xl bg-white dark:bg-gray-800 transition transform hover:scale-105 hover:shadow-lg cursor-pointer",title:un.label==="Students Helped"?"Number of students who received guidance":un.label==="Scholarships Found"?"Scholarships we helped students find":"Sessions that improved students",children:[jsxRuntimeExports.jsxs("p",{className:"text-4xl font-bold text-purple-400",children:[ze[fn].toLocaleString(),"+",Ge&&ze[fn]===1&&jsxRuntimeExports.jsx("span",{className:"text-green-400 text-sm ml-2",children:" Starting..."})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:un.label})]},fn))})]}),jsxRuntimeExports.jsxs("section",{className:"py-24 px-6 lg:px-20 bg-gray-100 dark:bg-[#0e0e1a]",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white",children:" What Students Say"}),jsxRuntimeExports.jsxs("div",{className:"relative max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,custom:$e,children:jsxRuntimeExports.jsxs(motion.div,{className:"bg-white p-8 rounded-xl border border-gray-200 text-gray-900 dark:bg-[#1a1a2e] dark:border-white/10 dark:text-white",initial:{x:$e>0?300:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:$e<0?300:-300,opacity:0},transition:{duration:.6},children:[jsxRuntimeExports.jsxs("p",{className:"text-lg italic mb-4",children:["",Ce[De].quote,""]}),jsxRuntimeExports.jsx("p",{className:"font-semibold",children:Ce[De].name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-300",children:Ce[De].role})]},De)}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Be(-1),className:"text-purple-400 hover:text-purple-600 transition",children:" Previous"}),jsxRuntimeExports.jsx("button",{onClick:()=>Be(1),className:"text-purple-400 hover:text-purple-600 transition",children:"Next "})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"relative z-10 bg-gray-100 dark:bg-[#12121c] py-20 px-6 lg:px-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-purple-600/30 blur-[150px] rounded-full z-0"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-[400px] h-[400px] bg-indigo-500/20 blur-[120px] rounded-full z-0"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center",children:[jsxRuntimeExports.jsxs(motion.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:["Ready to ",jsxRuntimeExports.jsx("span",{className:"text-purple-400",children:"level up"})," your journey?"]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-gray-700 dark:text-gray-400 text-lg mb-8",children:"Start exploring EDGExs tools and get ahead in your academic & personal path."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.7,delay:.3},children:jsxRuntimeExports.jsx("button",{onClick:Je,className:"inline-block bg-purple-600 hover:bg-purple-700 transition px-8 py-3 text-lg font-semibold rounded-lg text-white shadow-xl",children:"Start Now "})})]})]}),jsxRuntimeExports.jsx("footer",{className:"py-8  text-gray-500 dark:text-gray-400 text-sm px-8 lg:px-20 ",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center ",children:[" ",new Date().getFullYear()," EDGEx by Ayushman. All rights reserved.",jsxRuntimeExports.jsxs("div",{className:"flex  space-x-4 text-purple-400 text-3xl ",children:[jsxRuntimeExports.jsx("a",{href:"https://github.com/ayush585/edgex",target:"_blank",className:"hover:text-purple-200 transition",children:jsxRuntimeExports.jsx(FaGithub,{})}),jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/ayushman-mukherjee-437a49314/",target:"_blank",className:"hover:text-purple-200 transition",children:jsxRuntimeExports.jsx(FaLinkedin,{})})]})]})})]})}function ResumeAnalyzer(){const[n,e]=reactExports.useState(""),[t,Te]=reactExports.useState(null),[Ee,Re]=reactExports.useState([]),Ce=()=>new Promise((Be,Me)=>{if(window.pdfjsLib)return Be(window.pdfjsLib);const Oe=document.createElement("script");Oe.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.5.136/pdf.min.js",Oe.onload=()=>Be(window.pdfjsLib),Oe.onerror=Me,document.body.appendChild(Oe)}),De=async Be=>{const Me=await Ce();Me.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.5.136/pdf.worker.min.js";const Oe=new Uint8Array(Be),Ue=await Me.getDocument({data:Oe}).promise;let ze="";for(let He=1;He<=Ue.numPages;He++){const Ke=await(await Ue.getPage(He)).getTextContent();ze+=Ke.items.map(Xe=>Xe.str).join(" ")+`
`}return ze},$e=async Be=>{if(!Be)return;const Me=(Be.name.split(".").pop()||"").toLowerCase();if(Me==="txt"){const Oe=new FileReader;Oe.onload=Ue=>e(String(Ue.target?.result||"")),Oe.readAsText(Be)}else if(Me==="pdf"){const Oe=new FileReader;Oe.onload=async Ue=>{try{const ze=Ue.target?.result,He=await De(ze);e(He)}catch(ze){console.error(ze),y$1.error("Could not read PDF text. Please try a .txt export of your resume.")}},Oe.readAsArrayBuffer(Be)}else y$1.error("Supported files: .pdf, .txt")},Ve=()=>{const Be=n||"",Me=[];let Oe=50;/\b(email|@)\b/i.test(Be)||(Me.push("Add a professional email."),Oe-=5),/\b(phone|\+?\d{7,})\b/i.test(Be)||(Me.push("Include a reachable phone number."),Oe-=5),/\b(education|b\.tech|btech|m\.tech|degree)\b/i.test(Be)||(Me.push("Add an Education section."),Oe-=10),/\b(experience|internship|project)\b/i.test(Be)||(Me.push("Highlight experience, internships, or projects."),Oe-=10),/\b(skills|technologies|tools)\b/i.test(Be)||(Me.push("List key skills and tools."),Oe-=10),/\b(achievements|awards|certifications)\b/i.test(Be)||(Me.push("Add achievements or certifications."),Oe-=5),(Be.match(/\b(responsible for|worked on)\b/gi)||[]).length>3&&Me.push("Use action verbs (built, led, delivered) over passive phrasing."),Be.length>8e3&&(Me.push("Try to keep the resume concise (12 pages)."),Oe-=5),Oe=Math.max(0,Math.min(100,Oe+Math.min(20,Math.floor((Be.match(/\b(project|react|node|ml|api|sql|aws)\b/gi)||[]).length*2)))),Te(Oe),Re(Me.length?Me:["Looks good! Consider tailoring to each jobs keywords."])};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Resume Analyzer (ATS)"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mb-4",children:"Upload your resume (.pdf or .txt) or paste text below, then get an ATS-style score with improvement tips."}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 mb-4",children:jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.txt",onChange:Be=>$e(Be.target.files?.[0]||null),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"})}),jsxRuntimeExports.jsx("textarea",{className:"w-full h-56 p-4 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Paste your resume text here...",value:n,onChange:Be=>e(Be.target.value)}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:Ve,className:"px-5 py-2 rounded-md bg-purple-600 hover:bg-purple-700 text-white font-semibold",children:"Analyze"}),t!==null&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["Score: ",jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:[t,"/100"]})]})]}),Ee.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Suggestions"}),jsxRuntimeExports.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1",children:Ee.map((Be,Me)=>jsxRuntimeExports.jsx("li",{children:Be},Me))})]})]})})}const ScrollToTopButton=()=>{const[n,e]=reactExports.useState(!1),[t,Te]=reactExports.useState(130);reactExports.useEffect(()=>{const Re=()=>{const Ce=window.scrollY>300;e(Ce);const De=window.innerHeight,$e=document.documentElement.scrollHeight,Be=window.scrollY+De>$e-300;Te(Ce?Be?130:20:130)};return Re(),window.addEventListener("scroll",Re),()=>window.removeEventListener("scroll",Re)},[]);const Ee=()=>{window.scrollTo({top:0,behavior:"smooth"})};return jsxRuntimeExports.jsx("button",{onClick:Ee,"aria-label":"Scroll to top",className:`fixed right-6 z-50 p-4 rounded-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,style:{bottom:`${t}px`},children:jsxRuntimeExports.jsx(FaArrowUp,{className:"w-5 h-5"})})},ResourceVault=React.lazy(()=>__vitePreload(()=>import("./ResourceVault-tdIs4OMu.js"),[]));function App(){const[n,e]=reactExports.useState(null),[t,Te]=reactExports.useState(!0),[Ee,Re]=reactExports.useState(()=>{try{if(typeof document<"u")return document.documentElement.classList.contains("dark")?"dark":"light"}catch{}return"light"});reactExports.useEffect(()=>{try{Ee==="dark"?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}catch{}},[Ee]);const Ce=()=>Re(De=>De==="dark"?"light":"dark");return reactExports.useEffect(()=>{const De=onAuthStateChanged(auth,$e=>{e($e),Te(!1)});return()=>De()},[]),t?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-all duration-500",children:[jsxRuntimeExports.jsx(Navbar,{user:n,theme:Ee,toggleTheme:Ce}),jsxRuntimeExports.jsx("main",{className:"flex-1",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/careercrack",element:jsxRuntimeExports.jsx(CareerCrack,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/moodmirror",element:jsxRuntimeExports.jsx(MoodMirror,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/scholarships",element:jsxRuntimeExports.jsx(ScholarshipScout,{})}),jsxRuntimeExports.jsx(Route,{path:"/smartnotes",element:jsxRuntimeExports.jsx(SmartNotes,{})}),jsxRuntimeExports.jsx(Route,{path:"/voicefeedback",element:jsxRuntimeExports.jsx(VoiceFeedback,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/resume-analyzer",element:jsxRuntimeExports.jsx(ResumeAnalyzer,{})}),jsxRuntimeExports.jsx(Route,{path:"/resourcevault",element:jsxRuntimeExports.jsx(React.Suspense,{fallback:jsxRuntimeExports.jsx("div",{className:"p-6 text-gray-500",children:"Loading Resource Vault"}),children:jsxRuntimeExports.jsx(ResourceVault,{user:n})})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginModal$1,{})})]})}),jsxRuntimeExports.jsx(ScrollToTopButton,{}),jsxRuntimeExports.jsx(Lt$1,{})]})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{AnimatePresence as A,BookOpen as B,X$1 as X,_typeof as _,commonjsGlobal$2 as a,createLucideIcon as c,getDefaultExportFromCjs as g,jsxRuntimeExports as j,motion as m,reactExports as r};
