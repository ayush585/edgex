import{c as v,r as s,j as e,A as D,m as S,B as Y,X as A}from"./index-CsCixfXi.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],ee=v("circle-arrow-up",Z);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ae=v("external-link",te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],se=v("funnel",re);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],T=v("log-in",le);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oe=v("plus",ne);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],de=v("search",ie);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ue=v("tag",ce);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xe=v("trash-2",pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ge=v("triangle-alert",he);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],U=v("user-plus",me),$=[{id:1,title:"Complete React Documentation",url:"https://react.dev",description:"Official React documentation with hooks, components, and best practices for modern React development.",tags:["React","JavaScript","Frontend","Documentation"],upvotes:45,has_upvoted:!1,posted_by:{id:1,name:"Sarah Chen",avatar:"SC"},created_at:new Date(Date.now()-2880*60*1e3).toISOString(),domain:"react.dev"},{id:2,title:"Python for Data Science Handbook",url:"https://jakevdp.github.io/PythonDataScienceHandbook/",description:"Free online book covering NumPy, Pandas, Matplotlib, and Scikit-Learn for data science.",tags:["Python","Data Science","Machine Learning","Free Book"],upvotes:32,has_upvoted:!0,posted_by:{id:2,name:"Alex Kumar",avatar:"AK"},created_at:new Date(Date.now()-7200*60*1e3).toISOString(),domain:"jakevdp.github.io"},{id:3,title:"Coursera Machine Learning Course",url:"https://coursera.org/learn/machine-learning",description:"Andrew Ng's famous ML course. Perfect for beginners wanting to understand algorithms and applications.",tags:["Machine Learning","Course","Beginner","Mathematics"],upvotes:78,has_upvoted:!1,posted_by:{id:1,name:"Sarah Chen",avatar:"SC"},created_at:new Date(Date.now()-10080*60*1e3).toISOString(),domain:"coursera.org"}],be=t=>{const u=new Date,k=new Date(t);let o=Math.floor((u-k)/1e3);return o<0&&(o=0),o<60?"Just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:`${Math.floor(o/86400)}d ago`},I=t=>{try{return new URL(t).hostname.replace("www.","")}catch{return"invalid-url"}},ye=t=>{try{const u=new URL(t);return u.protocol==="http:"||u.protocol==="https:"}catch{return!1}},fe=({isOpen:t,onClose:u,onLogin:k})=>{const[o,m]=s.useState(""),[p,a]=s.useState(""),[x,h]=s.useState(""),[i,g]=s.useState("login"),[y,w]=s.useState(!1),f=async N=>{N.preventDefault(),h(""),w(!0);try{if(await new Promise(l=>setTimeout(l,1e3)),i==="signup"){if(p.length<6)throw new Error("Password too weak. Use at least 6 characters.")}else if(o!=="test@example.com"||p!=="password123")throw new Error("Invalid email or password.");const j={id:Date.now(),email:o,name:o.split("@")[0],avatar:o.charAt(0).toUpperCase()+o.split("@")[0].charAt(1).toUpperCase(),role:"mentor"};k(j),u()}catch(j){h(j.message)}finally{w(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"login-modal-title",children:e.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{id:"login-modal-title",className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:i==="signup"?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-6 h-6 text-purple-600"}),"Create Account"]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-6 h-6 text-purple-600"}),"Welcome Back"]})}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx(A,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:i==="signup"?"Join our community to share amazing resources!":"Sign in to contribute to Resource Vault"})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[x&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:x})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:o,onChange:N=>m(N.target.value),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"your@email.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:p,onChange:N=>a(N.target.value),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:i==="signup"?"Create a strong password":"Enter your password",required:!0}),i==="signup"&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Password must be at least 6 characters"})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),i==="signup"?"Creating Account...":"Signing In..."]}):e.jsx(e.Fragment,{children:i==="signup"?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4"}),"Create Account"]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"}),"Sign In"]})})})]}),e.jsxs("div",{className:"p-6 pt-0",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[i==="signup"?"Already have an account?":"New to Resource Vault?"," ",e.jsx("button",{onClick:()=>{g(i==="signup"?"login":"signup"),h("")},className:"text-purple-600 dark:text-purple-400 hover:underline font-medium",children:i==="signup"?"Sign In":"Create Account"})]}),i==="login"&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Demo Login:"})," test@example.com / password123"]})})]})]})}):null},we=({resource:t,onUpvote:u,onDelete:k,onEdit:o,currentUser:m})=>{const[p,a]=s.useState(!1),[x,h]=s.useState(!1),i=m?.id===t.posted_by.id,g=f=>{f.preventDefault(),u(t.id)},y=()=>{window.confirm("Are you sure you want to delete this resource? This action cannot be undone.")&&(k(t.id),h(!1))},w=()=>{o(t),h(!1)};return e.jsxs(S.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white/60 dark:bg-white/10 backdrop-blur-md p-6 rounded-2xl border border-white/20 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-lg font-semibold text-purple-800 dark:text-purple-300 hover:text-purple-600 dark:hover:text-purple-200 transition-colors flex items-center gap-2 group",children:[t.title,e.jsx(ae,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 text-xs rounded-full",children:t.domain})]}),e.jsxs("p",{className:`text-gray-700 dark:text-gray-300 text-sm mb-3 ${!p&&t.description.length>150?"line-clamp-3":""}`,children:[t.description,!p&&t.description.length>150&&e.jsx("button",{onClick:()=>a(!0),className:"text-purple-600 dark:text-purple-400 hover:underline ml-1",children:"Show more"}),p&&t.description.length>150&&e.jsx("button",{onClick:()=>a(!1),className:"text-purple-600 dark:text-purple-400 hover:underline ml-1",children:"Show less"})]})]}),i&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>h(!x),className:"p-1 rounded-full hover:bg-white/20 dark:hover:bg-white/10 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),e.jsx(D,{children:x&&e.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 top-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10",children:[e.jsxs("button",{onClick:w,className:"w-full px-4 py-2 text-left text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center gap-2 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:y,className:"w-full px-4 py-2 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 text-sm",children:[e.jsx(xe,{className:"w-4 h-4"}),"Delete"]})]})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map(f=>e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 text-xs rounded-full",children:f},f))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs font-semibold",children:t.posted_by.avatar}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.posted_by.name})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-500",children:be(t.created_at)})]}),e.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${t.has_upvoted?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"aria-pressed":t.has_upvoted,children:[e.jsx(ee,{className:`w-4 h-4 ${t.has_upvoted?"fill-current":""}`}),e.jsx("span",{className:"font-semibold",children:t.upvotes})]})]})]})},ke=({isOpen:t,onClose:u,onAdd:k,onEdit:o,loading:m,editingResource:p})=>{const[a,x]=s.useState({title:"",url:"",description:"",tags:[]}),[h,i]=s.useState(""),[g,y]=s.useState({}),w=!!p;s.useEffect(()=>{t&&(x(p?{title:p.title,url:p.url,description:p.description,tags:[...p.tags]}:{title:"",url:"",description:"",tags:[]}),i(""),y({}))},[t,p]);const f=async l=>{l.preventDefault();const d={};(!a.title.trim()||a.title.length<5||a.title.length>120)&&(d.title="Title must be 5-120 characters"),ye(a.url)||(d.url="Please enter a valid HTTP/HTTPS URL"),a.description.length>500&&(d.description="Description must be under 500 characters"),a.tags.length===0&&(d.tags="Please add at least one tag"),y(d),Object.keys(d).length===0&&(w?await o(p.id,{...a,domain:I(a.url)})&&u():await k({...a,domain:I(a.url)})&&(x({title:"",url:"",description:"",tags:[]}),i(""),y({}),u()))},N=l=>{if(l.key==="Enter"&&h.trim()&&a.tags.length<5){l.preventDefault();const d=h.trim();d.length<=20&&!a.tags.includes(d)&&(x(b=>({...b,tags:[...b.tags,d]})),i(""))}},j=l=>{x(d=>({...d,tags:d.tags.filter(b=>b!==l)}))};return t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"resource-modal-title",children:e.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{id:"resource-modal-title",className:"text-2xl font-bold text-gray-900 dark:text-white",children:w?"Edit Resource":"Add Resource"}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx(A,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:a.title,onChange:l=>x(d=>({...d,title:l.target.value})),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter resource title",maxLength:120}),g.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.title}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[a.title.length,"/120"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL *"}),e.jsx("input",{type:"url",value:a.url,onChange:l=>x(d=>({...d,url:l.target.value})),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://example.com"}),g.url&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.url})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:l=>x(d=>({...d,description:l.target.value})),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:4,placeholder:"Describe what makes this resource valuable",maxLength:500}),g.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.description}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[a.description.length,"/500"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags * (Press Enter to add)"}),e.jsx("input",{type:"text",value:h,onChange:l=>i(l.target.value),onKeyDown:N,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Add tags (max 5)",maxLength:20,disabled:a.tags.length>=5}),g.tags&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.tags}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:a.tags.map(l=>e.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[l,e.jsx("button",{type:"button",onClick:()=>j(l),className:"hover:text-red-500",children:e.jsx(A,{className:"w-3 h-3"})})]},l))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),w?"Updating...":"Adding..."]}):w?"Update Resource":"Add Resource"})]})]})]})}):null},ve=()=>{const[t,u]=s.useState($),[k,o]=s.useState($),[m,p]=s.useState(""),[a,x]=s.useState([]),[h,i]=s.useState("top"),[g,y]=s.useState(!1),[w,f]=s.useState(!1),[N,j]=s.useState(!1),[l,d]=s.useState(!1),[b,R]=s.useState(null),[H,C]=s.useState(null),L=s.useRef(),z=s.useMemo(()=>[...new Set(t.flatMap(r=>r.tags))].sort(),[t]);s.useEffect(()=>(L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{B()},300),()=>clearTimeout(L.current)),[m,a,h,t]);const B=()=>{let r=t.filter(c=>{const n=m===""||c.title.toLowerCase().includes(m.toLowerCase())||c.description.toLowerCase().includes(m.toLowerCase())||c.domain.toLowerCase().includes(m.toLowerCase()),_=a.length===0||a.every(M=>c.tags.includes(M));return n&&_});r.sort((c,n)=>h==="top"?c.upvotes!==n.upvotes?n.upvotes-c.upvotes:new Date(n.created_at)-new Date(c.created_at):new Date(n.created_at)-new Date(c.created_at)),o(r)},q=r=>{u(c=>c.map(n=>n.id===r?{...n,upvotes:n.has_upvoted?n.upvotes-1:n.upvotes+1,has_upvoted:!n.has_upvoted}:n))},V=r=>{u(c=>c.filter(n=>n.id!==r))},O=r=>{C(r),y(!0)},J=async(r,c)=>(j(!0),new Promise(n=>{setTimeout(()=>{u(_=>_.map(M=>M.id===r?{...M,...c,updated_at:new Date().toISOString()}:M)),j(!1),C(null),n(!0)},1e3)})),K=async r=>(j(!0),new Promise(c=>{setTimeout(()=>{const n={id:Date.now(),...r,upvotes:0,has_upvoted:!1,posted_by:b,created_at:new Date().toISOString()};u(_=>[n,..._]),j(!1),c(!0)},1e3)})),E=()=>{b?(C(null),y(!0)):f(!0)},W=r=>{R(r),f(!1),setTimeout(()=>{C(null),y(!0)},100)},Q=()=>{R(null)},X=r=>{x(c=>c.includes(r)?c.filter(n=>n!==r):[...c,r])},F=()=>{p(""),x([]),i("top")},G=k.length===0,P=m||a.length>0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-indigo-100 dark:from-purple-900 dark:via-indigo-900 dark:to-blue-900 transition-all duration-500",children:[e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 via-pink-500 to-indigo-600 bg-clip-text text-transparent",children:"Resource Vault"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg mt-2",children:"Discover, share, and upvote the best learning resources together"})]}),e.jsx("div",{className:"flex items-center gap-3",children:b?e.jsxs("div",{className:"flex items-center gap-3 bg-white/60 dark:bg-white/10 backdrop-blur-md rounded-full px-4 py-2 border border-white/20",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:b.avatar}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:b.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:b.role})]}),e.jsx("button",{onClick:Q,className:"text-gray-500 hover:text-red-500 transition-colors p-1",title:"Logout",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 bg-white/60 dark:bg-white/10 backdrop-blur-md rounded-full px-4 py-2 border border-white/20 hover:bg-white/80 dark:hover:bg-white/20 transition-all",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Sign In"})]})})]})}),e.jsxs("div",{className:"bg-white/60 dark:bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search resources, descriptions, or domains...",value:m,onChange:r=>p(r.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/50 dark:bg-white/10 border border-white/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("button",{onClick:()=>d(!l),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${a.length>0||l?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-white/50 dark:bg-white/10 text-gray-600 dark:text-gray-400"}`,children:[e.jsx(se,{className:"w-4 h-4"}),"Filters",a.length>0&&e.jsx("span",{className:"bg-purple-500 text-white text-xs px-2 py-1 rounded-full",children:a.length})]}),e.jsxs("select",{value:h,onChange:r=>i(r.target.value),className:"py-2 pl-4  pr-8 bg-white/50 dark:bg-white/10 border border-white/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"top",children:"Top Rated"}),e.jsx("option",{value:"new",children:"Newest"})]}),e.jsxs("button",{onClick:E,className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-4 py-2 rounded-lg transition-all hover:scale-105 shadow-lg",children:[e.jsx(oe,{className:"w-4 h-4"}),"Add Resource"]})]})]}),e.jsx(D,{children:l&&e.jsxs(S.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-white/20",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(r=>e.jsxs("button",{onClick:()=>X(r),className:`px-3 py-2 rounded-full text-sm transition-all ${a.includes(r)?"bg-purple-500 text-white shadow-md":"bg-white/50 dark:bg-white/10 text-gray-700 dark:text-gray-300 hover:bg-white/70 dark:hover:bg-white/20"}`,children:[e.jsx(ue,{className:"w-3 h-3 inline mr-1"}),r]},r))}),P&&e.jsx("button",{onClick:F,className:"mt-3 text-purple-600 dark:text-purple-400 hover:underline text-sm",children:"Clear all filters"})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(D,{children:k.map(r=>e.jsx(we,{resource:r,onUpvote:q,onDelete:V,onEdit:O,currentUser:b},r.id))}),G&&e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:e.jsx("div",{className:"bg-white/60 dark:bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-lg p-8 max-w-md mx-auto",children:P?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No matching resources"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Try adjusting your search or filters"}),e.jsx("button",{onClick:F,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Clear filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No resources yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Be the first to share a valuable learning resource!"}),e.jsx("button",{onClick:E,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Add First Resource"})]})})})]})]}),e.jsx(D,{children:w&&e.jsx(fe,{isOpen:w,onClose:()=>f(!1),onLogin:W})}),e.jsx(D,{children:g&&e.jsx(ke,{isOpen:g,onClose:()=>{y(!1),C(null)},onAdd:K,onEdit:J,editingResource:H,loading:N})})]})};export{ve as default};
